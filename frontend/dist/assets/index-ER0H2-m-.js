function W1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function N0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kf={exports:{}},Cl={},Qf={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function q1(){if($y)return $e;$y=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function _(B){return B===null||typeof B!="object"?null:(B=T&&B[T]||B["@@iterator"],typeof B=="function"?B:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,D={};function A(B,Y,ce){this.props=B,this.context=Y,this.refs=D,this.updater=ce||P}A.prototype.isReactComponent={},A.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function z(){}z.prototype=A.prototype;function G(B,Y,ce){this.props=B,this.context=Y,this.refs=D,this.updater=ce||P}var q=G.prototype=new z;q.constructor=G,O(q,A.prototype),q.isPureReactComponent=!0;var Z=Array.isArray,K=Object.prototype.hasOwnProperty,J={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function b(B,Y,ce){var _e,Re={},me=null,Fe=null;if(Y!=null)for(_e in Y.ref!==void 0&&(Fe=Y.ref),Y.key!==void 0&&(me=""+Y.key),Y)K.call(Y,_e)&&!R.hasOwnProperty(_e)&&(Re[_e]=Y[_e]);var Me=arguments.length-2;if(Me===1)Re.children=ce;else if(1<Me){for(var Be=Array(Me),gt=0;gt<Me;gt++)Be[gt]=arguments[gt+2];Re.children=Be}if(B&&B.defaultProps)for(_e in Me=B.defaultProps,Me)Re[_e]===void 0&&(Re[_e]=Me[_e]);return{$$typeof:n,type:B,key:me,ref:Fe,props:Re,_owner:J.current}}function k(B,Y){return{$$typeof:n,type:B.type,key:Y,ref:B.ref,props:B.props,_owner:B._owner}}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function L(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ce){return Y[ce]})}var F=/\/+/g;function N(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):Y.toString(36)}function he(B,Y,ce,_e,Re){var me=typeof B;(me==="undefined"||me==="boolean")&&(B=null);var Fe=!1;if(B===null)Fe=!0;else switch(me){case"string":case"number":Fe=!0;break;case"object":switch(B.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=B,Re=Re(Fe),B=_e===""?"."+N(Fe,0):_e,Z(Re)?(ce="",B!=null&&(ce=B.replace(F,"$&/")+"/"),he(Re,Y,ce,"",function(gt){return gt})):Re!=null&&(I(Re)&&(Re=k(Re,ce+(!Re.key||Fe&&Fe.key===Re.key?"":(""+Re.key).replace(F,"$&/")+"/")+B)),Y.push(Re)),1;if(Fe=0,_e=_e===""?".":_e+":",Z(B))for(var Me=0;Me<B.length;Me++){me=B[Me];var Be=_e+N(me,Me);Fe+=he(me,Y,ce,Be,Re)}else if(Be=_(B),typeof Be=="function")for(B=Be.call(B),Me=0;!(me=B.next()).done;)me=me.value,Be=_e+N(me,Me++),Fe+=he(me,Y,ce,Be,Re);else if(me==="object")throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ue(B,Y,ce){if(B==null)return B;var _e=[],Re=0;return he(B,_e,"","",function(me){return Y.call(ce,me,Re++)}),_e}function Ve(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(ce){(B._status===0||B._status===-1)&&(B._status=1,B._result=ce)},function(ce){(B._status===0||B._status===-1)&&(B._status=2,B._result=ce)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var Oe={current:null},ne={transition:null},de={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:J};function ae(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:Ue,forEach:function(B,Y,ce){Ue(B,function(){Y.apply(this,arguments)},ce)},count:function(B){var Y=0;return Ue(B,function(){Y++}),Y},toArray:function(B){return Ue(B,function(Y){return Y})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},$e.Component=A,$e.Fragment=t,$e.Profiler=s,$e.PureComponent=G,$e.StrictMode=r,$e.Suspense=f,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,$e.act=ae,$e.cloneElement=function(B,Y,ce){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var _e=O({},B.props),Re=B.key,me=B.ref,Fe=B._owner;if(Y!=null){if(Y.ref!==void 0&&(me=Y.ref,Fe=J.current),Y.key!==void 0&&(Re=""+Y.key),B.type&&B.type.defaultProps)var Me=B.type.defaultProps;for(Be in Y)K.call(Y,Be)&&!R.hasOwnProperty(Be)&&(_e[Be]=Y[Be]===void 0&&Me!==void 0?Me[Be]:Y[Be])}var Be=arguments.length-2;if(Be===1)_e.children=ce;else if(1<Be){Me=Array(Be);for(var gt=0;gt<Be;gt++)Me[gt]=arguments[gt+2];_e.children=Me}return{$$typeof:n,type:B.type,key:Re,ref:me,props:_e,_owner:Fe}},$e.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},$e.createElement=b,$e.createFactory=function(B){var Y=b.bind(null,B);return Y.type=B,Y},$e.createRef=function(){return{current:null}},$e.forwardRef=function(B){return{$$typeof:d,render:B}},$e.isValidElement=I,$e.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:Ve}},$e.memo=function(B,Y){return{$$typeof:m,type:B,compare:Y===void 0?null:Y}},$e.startTransition=function(B){var Y=ne.transition;ne.transition={};try{B()}finally{ne.transition=Y}},$e.unstable_act=ae,$e.useCallback=function(B,Y){return Oe.current.useCallback(B,Y)},$e.useContext=function(B){return Oe.current.useContext(B)},$e.useDebugValue=function(){},$e.useDeferredValue=function(B){return Oe.current.useDeferredValue(B)},$e.useEffect=function(B,Y){return Oe.current.useEffect(B,Y)},$e.useId=function(){return Oe.current.useId()},$e.useImperativeHandle=function(B,Y,ce){return Oe.current.useImperativeHandle(B,Y,ce)},$e.useInsertionEffect=function(B,Y){return Oe.current.useInsertionEffect(B,Y)},$e.useLayoutEffect=function(B,Y){return Oe.current.useLayoutEffect(B,Y)},$e.useMemo=function(B,Y){return Oe.current.useMemo(B,Y)},$e.useReducer=function(B,Y,ce){return Oe.current.useReducer(B,Y,ce)},$e.useRef=function(B){return Oe.current.useRef(B)},$e.useState=function(B){return Oe.current.useState(B)},$e.useSyncExternalStore=function(B,Y,ce){return Oe.current.useSyncExternalStore(B,Y,ce)},$e.useTransition=function(){return Oe.current.useTransition()},$e.version="18.3.1",$e}var Hy;function pm(){return Hy||(Hy=1,Qf.exports=q1()),Qf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function G1(){if(Wy)return Cl;Wy=1;var n=pm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var y,T={},_=null,P=null;m!==void 0&&(_=""+m),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(P=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(T[y]=f[y]);if(d&&d.defaultProps)for(y in f=d.defaultProps,f)T[y]===void 0&&(T[y]=f[y]);return{$$typeof:e,type:d,key:_,ref:P,props:T,_owner:s.current}}return Cl.Fragment=t,Cl.jsx=u,Cl.jsxs=u,Cl}var qy;function K1(){return qy||(qy=1,Kf.exports=G1()),Kf.exports}var E=K1(),V=pm();const O0=N0(V),Cp=W1({__proto__:null,default:O0},[V]);var Dc={},Xf={exports:{}},kn={},Yf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function Q1(){return Gy||(Gy=1,(function(n){function e(ne,de){var ae=ne.length;ne.push(de);e:for(;0<ae;){var B=ae-1>>>1,Y=ne[B];if(0<s(Y,de))ne[B]=de,ne[ae]=Y,ae=B;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var de=ne[0],ae=ne.pop();if(ae!==de){ne[0]=ae;e:for(var B=0,Y=ne.length,ce=Y>>>1;B<ce;){var _e=2*(B+1)-1,Re=ne[_e],me=_e+1,Fe=ne[me];if(0>s(Re,ae))me<Y&&0>s(Fe,Re)?(ne[B]=Fe,ne[me]=ae,B=me):(ne[B]=Re,ne[_e]=ae,B=_e);else if(me<Y&&0>s(Fe,ae))ne[B]=Fe,ne[me]=ae,B=me;else break e}}return de}function s(ne,de){var ae=ne.sortIndex-de.sortIndex;return ae!==0?ae:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,T=null,_=3,P=!1,O=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(ne){for(var de=t(m);de!==null;){if(de.callback===null)r(m);else if(de.startTime<=ne)r(m),de.sortIndex=de.expirationTime,e(f,de);else break;de=t(m)}}function Z(ne){if(D=!1,q(ne),!O)if(t(f)!==null)O=!0,Ve(K);else{var de=t(m);de!==null&&Oe(Z,de.startTime-ne)}}function K(ne,de){O=!1,D&&(D=!1,z(b),b=-1),P=!0;var ae=_;try{for(q(de),T=t(f);T!==null&&(!(T.expirationTime>de)||ne&&!L());){var B=T.callback;if(typeof B=="function"){T.callback=null,_=T.priorityLevel;var Y=B(T.expirationTime<=de);de=n.unstable_now(),typeof Y=="function"?T.callback=Y:T===t(f)&&r(f),q(de)}else r(f);T=t(f)}if(T!==null)var ce=!0;else{var _e=t(m);_e!==null&&Oe(Z,_e.startTime-de),ce=!1}return ce}finally{T=null,_=ae,P=!1}}var J=!1,R=null,b=-1,k=5,I=-1;function L(){return!(n.unstable_now()-I<k)}function F(){if(R!==null){var ne=n.unstable_now();I=ne;var de=!0;try{de=R(!0,ne)}finally{de?N():(J=!1,R=null)}}else J=!1}var N;if(typeof G=="function")N=function(){G(F)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ue=he.port2;he.port1.onmessage=F,N=function(){Ue.postMessage(null)}}else N=function(){A(F,0)};function Ve(ne){R=ne,J||(J=!0,N())}function Oe(ne,de){b=A(function(){ne(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){O||P||(O=!0,Ve(K))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ne){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var ae=_;_=de;try{return ne()}finally{_=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=_;_=ne;try{return de()}finally{_=ae}},n.unstable_scheduleCallback=function(ne,de,ae){var B=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?B+ae:B):ae=B,ne){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,ne={id:y++,callback:de,priorityLevel:ne,startTime:ae,expirationTime:Y,sortIndex:-1},ae>B?(ne.sortIndex=ae,e(m,ne),t(f)===null&&ne===t(m)&&(D?(z(b),b=-1):D=!0,Oe(Z,ae-B))):(ne.sortIndex=Y,e(f,ne),O||P||(O=!0,Ve(K))),ne},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ne){var de=_;return function(){var ae=_;_=de;try{return ne.apply(this,arguments)}finally{_=ae}}}})(Jf)),Jf}var Ky;function X1(){return Ky||(Ky=1,Yf.exports=Q1()),Yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function Y1(){if(Qy)return kn;Qy=1;var n=pm(),e=X1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},T={};function _(i){return f.call(T,i)?!0:f.call(y,i)?!1:m.test(i)?T[i]=!0:(y[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,l,h,p,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function G(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(z,G);A[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(z,G);A[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(z,G);A[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function q(i,o,l,h){var p=A.hasOwnProperty(o)?A[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,l,p,h)&&(l=null),h||p===null?_(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),J=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function de(i){return i===null||typeof i!="object"?null:(i=ne&&i[ne]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,B;function Y(i){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var ce=!1;function _e(i,o){if(!i||ce)return"";ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var h=Q}Reflect.construct(i,[],o)}else{try{o.call()}catch(Q){h=Q}i.call(o.prototype)}else{try{throw Error()}catch(Q){h=Q}i()}}catch(Q){if(Q&&h&&typeof Q.stack=="string"){for(var p=Q.stack.split(`
`),v=h.stack.split(`
`),S=p.length-1,x=v.length-1;1<=S&&0<=x&&p[S]!==v[x];)x--;for(;1<=S&&0<=x;S--,x--)if(p[S]!==v[x]){if(S!==1||x!==1)do if(S--,x--,0>x||p[S]!==v[x]){var j=`
`+p[S].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=S&&0<=x);break}}}finally{ce=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Y(i):""}function Re(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=_e(i.type,!1),i;case 11:return i=_e(i.type.render,!1),i;case 1:return i=_e(i.type,!0),i;default:return""}}function me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case J:return"Portal";case k:return"Profiler";case b:return"StrictMode";case N:return"Suspense";case he:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case I:return(i._context.displayName||"Context")+".Provider";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ue:return o=i.displayName||null,o!==null?o:me(i.type)||"Memo";case Ve:o=i._payload,i=i._init;try{return me(i(o))}catch{}}return null}function Fe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Me(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Be(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function gt(i){var o=Be(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function bt(i){i._valueTracker||(i._valueTracker=gt(i))}function Wn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Be(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function vt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function He(i,o){var l=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function sr(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Me(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Mi(i,o){o=o.checked,o!=null&&q(i,"checked",o,!1)}function Li(i,o){Mi(i,o);var l=Me(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?si(i,o.type,l):o.hasOwnProperty("defaultValue")&&si(i,o.type,Me(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Po(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function si(i,o,l){(o!=="number"||vt(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var or=Array.isArray;function qn(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Me(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Ds(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Or(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(or(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Me(l)}}function oi(i,o){var l=Me(o.value),h=Me(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function ai(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function At(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?At(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ar,Tn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ar.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function We(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},li=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(i){li.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Dr[o]=Dr[i]})});function Vs(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Dr.hasOwnProperty(i)&&Dr[i]?(""+o).trim():o+"px"}function Ms(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Vs(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Ls=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function js(i,o){if(o){if(Ls[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Fs(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function ji(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fi=null,pn=null,Gn=null;function Ui(i){if(i=cl(i)){if(typeof Fi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Qu(o),Fi(i.stateNode,i.type,o))}}function M(i){pn?Gn?Gn.push(i):Gn=[i]:pn=i}function le(){if(pn){var i=pn,o=Gn;if(Gn=pn=null,Ui(i),o)for(i=0;i<o.length;i++)Ui(o[i])}}function Te(i,o){return i(o)}function it(){}var Ht=!1;function Us(i,o,l){if(Ht)return i(o,l);Ht=!0;try{return Te(i,o,l)}finally{Ht=!1,(pn!==null||Gn!==null)&&(it(),le())}}function yt(i,o){var l=i.stateNode;if(l===null)return null;var h=Qu(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var ko=!1;if(d)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){ko=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{ko=!1}function zs(i,o,l,h,p,v,S,x,j){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(l,Q)}catch(ie){this.onError(ie)}}var Bs=!1,xo=null,ur=!1,Ha=null,Ed={onError:function(i){Bs=!0,xo=i}};function No(i,o,l,h,p,v,S,x,j){Bs=!1,xo=null,zs.apply(Ed,arguments)}function wu(i,o,l,h,p,v,S,x,j){if(No.apply(this,arguments),Bs){if(Bs){var Q=xo;Bs=!1,xo=null}else throw Error(t(198));ur||(ur=!0,Ha=Q)}}function cr(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function $s(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function hr(i){if(cr(i)!==i)throw Error(t(188))}function Eu(i){var o=i.alternate;if(!o){if(o=cr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return hr(p),i;if(v===h)return hr(p),o;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=v;else{for(var S=!1,x=p.child;x;){if(x===l){S=!0,l=p,h=v;break}if(x===h){S=!0,h=p,l=v;break}x=x.sibling}if(!S){for(x=v.child;x;){if(x===l){S=!0,l=v,h=p;break}if(x===h){S=!0,h=v,l=p;break}x=x.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Wa(i){return i=Eu(i),i!==null?Oo(i):null}function Oo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Oo(i);if(o!==null)return o;i=i.sibling}return null}var Do=e.unstable_scheduleCallback,qa=e.unstable_cancelCallback,Tu=e.unstable_shouldYield,Td=e.unstable_requestPaint,at=e.unstable_now,Su=e.unstable_getCurrentPriorityLevel,Hs=e.unstable_ImmediatePriority,zi=e.unstable_UserBlockingPriority,Kn=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Iu=e.unstable_IdlePriority,Ws=null,Mn=null;function Cu(i){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Ws,i,void 0,(i.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Au,Ka=Math.log,bu=Math.LN2;function Au(i){return i>>>=0,i===0?32:31-(Ka(i)/bu|0)|0}var Vo=64,Mo=4194304;function Bi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function qs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,v=i.pingedLanes,S=l&268435455;if(S!==0){var x=S&~p;x!==0?h=Bi(x):(v&=S,v!==0&&(h=Bi(v)))}else S=l&~p,S!==0?h=Bi(S):v!==0&&(h=Bi(v));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,v=o&-o,p>=v||p===16&&(v&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-mn(o),p=1<<l,h|=i[l],o&=~p;return h}function Sd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-mn(v),x=1<<S,j=p[S];j===-1?((x&l)===0||(x&h)!==0)&&(p[S]=Sd(x,o)):j<=o&&(i.expiredLanes|=x),v&=~x}}function Ln(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Gs(){var i=Vo;return Vo<<=1,(Vo&4194240)===0&&(Vo=64),i}function $i(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Hi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-mn(o),i[o]=l}function st(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-mn(l),v=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~v}}function Wi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-mn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var Ke=0;function qi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ru,Lo,Pu,ku,xu,Qa=!1,Vr=[],Xt=null,dr=null,fr=null,Gi=new Map,Qn=new Map,Mr=[],Id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(i,o){switch(i){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Gi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(o.pointerId)}}function Sn(i,o,l,h,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},o!==null&&(o=cl(o),o!==null&&Lo(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Cd(i,o,l,h,p){switch(o){case"focusin":return Xt=Sn(Xt,i,o,l,h,p),!0;case"dragenter":return dr=Sn(dr,i,o,l,h,p),!0;case"mouseover":return fr=Sn(fr,i,o,l,h,p),!0;case"pointerover":var v=p.pointerId;return Gi.set(v,Sn(Gi.get(v)||null,i,o,l,h,p)),!0;case"gotpointercapture":return v=p.pointerId,Qn.set(v,Sn(Qn.get(v)||null,i,o,l,h,p)),!0}return!1}function Ou(i){var o=Js(i.target);if(o!==null){var l=cr(o);if(l!==null){if(o=l.tag,o===13){if(o=$s(l),o!==null){i.blockedOn=o,xu(i.priority,function(){Pu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=jo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);ui=h,l.target.dispatchEvent(h),ui=null}else return o=cl(l),o!==null&&Lo(o),i.blockedOn=l,!1;o.shift()}return!0}function Ks(i,o,l){hi(i)&&l.delete(o)}function Du(){Qa=!1,Xt!==null&&hi(Xt)&&(Xt=null),dr!==null&&hi(dr)&&(dr=null),fr!==null&&hi(fr)&&(fr=null),Gi.forEach(Ks),Qn.forEach(Ks)}function pr(i,o){i.blockedOn===o&&(i.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Du)))}function mr(i){function o(p){return pr(p,i)}if(0<Vr.length){pr(Vr[0],i);for(var l=1;l<Vr.length;l++){var h=Vr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Xt!==null&&pr(Xt,i),dr!==null&&pr(dr,i),fr!==null&&pr(fr,i),Gi.forEach(o),Qn.forEach(o),l=0;l<Mr.length;l++)h=Mr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<Mr.length&&(l=Mr[0],l.blockedOn===null);)Ou(l),l.blockedOn===null&&Mr.shift()}var di=Z.ReactCurrentBatchConfig,Ki=!0;function pt(i,o,l,h){var p=Ke,v=di.transition;di.transition=null;try{Ke=1,Xa(i,o,l,h)}finally{Ke=p,di.transition=v}}function bd(i,o,l,h){var p=Ke,v=di.transition;di.transition=null;try{Ke=4,Xa(i,o,l,h)}finally{Ke=p,di.transition=v}}function Xa(i,o,l,h){if(Ki){var p=jo(i,o,l,h);if(p===null)Ld(i,o,h,Qs,l),Nu(i,h);else if(Cd(p,i,o,l,h))h.stopPropagation();else if(Nu(i,h),o&4&&-1<Id.indexOf(i)){for(;p!==null;){var v=cl(p);if(v!==null&&Ru(v),v=jo(i,o,l,h),v===null&&Ld(i,o,h,Qs,l),v===p)break;p=v}p!==null&&h.stopPropagation()}else Ld(i,o,h,null,l)}}var Qs=null;function jo(i,o,l,h){if(Qs=null,i=ji(h),i=Js(i),i!==null)if(o=cr(i),o===null)i=null;else if(l=o.tag,l===13){if(i=$s(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Qs=i,null}function Ya(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Su()){case Hs:return 1;case zi:return 4;case Kn:case Ga:return 16;case Iu:return 536870912;default:return 16}default:return 16}}var jn=null,Fo=null,In=null;function Ja(){if(In)return In;var i,o=Fo,l=o.length,h,p="value"in jn?jn.value:jn.textContent,v=p.length;for(i=0;i<l&&o[i]===p[i];i++);var S=l-i;for(h=1;h<=S&&o[l-h]===p[v-h];h++);return In=p.slice(i,1<h?1-h:void 0)}function Uo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Lr(){return!0}function Za(){return!1}function Yt(i){function o(l,h,p,v,S){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Lr:Za,this.isPropagationStopped=Za,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),o}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Yt(gr),jr=ae({},gr,{view:0,detail:0}),Ad=Yt(jr),Bo,fi,Qi,Xs=ae({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qi&&(Qi&&i.type==="mousemove"?(Bo=i.screenX-Qi.screenX,fi=i.screenY-Qi.screenY):fi=Bo=0,Qi=i),Bo)},movementY:function(i){return"movementY"in i?i.movementY:fi}}),$o=Yt(Xs),el=ae({},Xs,{dataTransfer:0}),Vu=Yt(el),Ho=ae({},jr,{relatedTarget:0}),Wo=Yt(Ho),Mu=ae({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),pi=Yt(Mu),Lu=ae({},gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ju=Yt(Lu),Fu=ae({},gr,{data:0}),tl=Yt(Fu),qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Uu[i])?!!o[i]:!1}function Fr(){return zu}var c=ae({},jr,{key:function(i){if(i.key){var o=qo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Uo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(i){return i.type==="keypress"?Uo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Uo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Yt(c),w=ae({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Yt(w),$=ae({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),X=Yt($),ue=ae({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rt=Yt(ue),Ft=ae({},Xs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=Yt(Ft),Wt=[9,13,27,32],Nt=d&&"CompositionEvent"in window,Xn=null;d&&"documentMode"in document&&(Xn=document.documentMode);var Fn=d&&"TextEvent"in window&&!Xn,Ys=d&&(!Nt||Xn&&8<Xn&&11>=Xn),Go=" ",Lg=!1;function jg(i,o){switch(i){case"keyup":return Wt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ko=!1;function BI(i,o){switch(i){case"compositionend":return Fg(o);case"keypress":return o.which!==32?null:(Lg=!0,Go);case"textInput":return i=o.data,i===Go&&Lg?null:i;default:return null}}function $I(i,o){if(Ko)return i==="compositionend"||!Nt&&jg(i,o)?(i=Ja(),In=Fo=jn=null,Ko=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ys&&o.locale!=="ko"?null:o.data;default:return null}}var HI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!HI[i.type]:o==="textarea"}function zg(i,o,l,h){M(h),o=qu(o,"onChange"),0<o.length&&(l=new zo("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var nl=null,rl=null;function WI(i){sv(i,0)}function Bu(i){var o=Zo(i);if(Wn(o))return i}function qI(i,o){if(i==="change")return o}var Bg=!1;if(d){var Rd;if(d){var Pd="oninput"in document;if(!Pd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),Pd=typeof $g.oninput=="function"}Rd=Pd}else Rd=!1;Bg=Rd&&(!document.documentMode||9<document.documentMode)}function Hg(){nl&&(nl.detachEvent("onpropertychange",Wg),rl=nl=null)}function Wg(i){if(i.propertyName==="value"&&Bu(rl)){var o=[];zg(o,rl,i,ji(i)),Us(WI,o)}}function GI(i,o,l){i==="focusin"?(Hg(),nl=o,rl=l,nl.attachEvent("onpropertychange",Wg)):i==="focusout"&&Hg()}function KI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bu(rl)}function QI(i,o){if(i==="click")return Bu(o)}function XI(i,o){if(i==="input"||i==="change")return Bu(o)}function YI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var vr=typeof Object.is=="function"?Object.is:YI;function il(i,o){if(vr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!vr(i[p],o[p]))return!1}return!0}function qg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Gg(i,o){var l=qg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qg(l)}}function Kg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Kg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Qg(){for(var i=window,o=vt();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=vt(i.document)}return o}function kd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function JI(i){var o=Qg(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Kg(l.ownerDocument.documentElement,l)){if(h!==null&&kd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!i.extend&&v>h&&(p=h,h=v,v=p),p=Gg(l,v);var S=Gg(l,h);p&&S&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),v>h?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ZI=d&&"documentMode"in document&&11>=document.documentMode,Qo=null,xd=null,sl=null,Nd=!1;function Xg(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nd||Qo==null||Qo!==vt(h)||(h=Qo,"selectionStart"in h&&kd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sl&&il(sl,h)||(sl=h,h=qu(xd,"onSelect"),0<h.length&&(o=new zo("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=Qo)))}function $u(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Xo={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},Od={},Yg={};d&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Hu(i){if(Od[i])return Od[i];if(!Xo[i])return i;var o=Xo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Yg)return Od[i]=o[l];return i}var Jg=Hu("animationend"),Zg=Hu("animationiteration"),ev=Hu("animationstart"),tv=Hu("transitionend"),nv=new Map,rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(i,o){nv.set(i,o),a(o,[i])}for(var Dd=0;Dd<rv.length;Dd++){var Vd=rv[Dd],e1=Vd.toLowerCase(),t1=Vd[0].toUpperCase()+Vd.slice(1);Xi(e1,"on"+t1)}Xi(Jg,"onAnimationEnd"),Xi(Zg,"onAnimationIteration"),Xi(ev,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(tv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function iv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,wu(h,o,void 0,i),i.currentTarget=null}function sv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var v=void 0;if(o)for(var S=h.length-1;0<=S;S--){var x=h[S],j=x.instance,Q=x.currentTarget;if(x=x.listener,j!==v&&p.isPropagationStopped())break e;iv(p,x,Q),v=j}else for(S=0;S<h.length;S++){if(x=h[S],j=x.instance,Q=x.currentTarget,x=x.listener,j!==v&&p.isPropagationStopped())break e;iv(p,x,Q),v=j}}}if(ur)throw i=Ha,ur=!1,Ha=null,i}function ht(i,o){var l=o[$d];l===void 0&&(l=o[$d]=new Set);var h=i+"__bubble";l.has(h)||(ov(o,i,2,!1),l.add(h))}function Md(i,o,l){var h=0;o&&(h|=4),ov(l,i,h,o)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function al(i){if(!i[Wu]){i[Wu]=!0,r.forEach(function(l){l!=="selectionchange"&&(n1.has(l)||Md(l,!1,i),Md(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Wu]||(o[Wu]=!0,Md("selectionchange",!1,o))}}function ov(i,o,l,h){switch(Ya(o)){case 1:var p=pt;break;case 4:p=bd;break;default:p=Xa}l=p.bind(null,o,l,i),p=void 0,!ko||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Ld(i,o,l,h,p){var v=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var x=h.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(S===4)for(S=h.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===p||j.nodeType===8&&j.parentNode===p))return;S=S.return}for(;x!==null;){if(S=Js(x),S===null)return;if(j=S.tag,j===5||j===6){h=v=S;continue e}x=x.parentNode}}h=h.return}Us(function(){var Q=v,ie=ji(l),se=[];e:{var re=nv.get(i);if(re!==void 0){var pe=zo,ye=i;switch(i){case"keypress":if(Uo(l)===0)break e;case"keydown":case"keyup":pe=g;break;case"focusin":ye="focus",pe=Wo;break;case"focusout":ye="blur",pe=Wo;break;case"beforeblur":case"afterblur":pe=Wo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=$o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=X;break;case Jg:case Zg:case ev:pe=pi;break;case tv:pe=rt;break;case"scroll":pe=Ad;break;case"wheel":pe=Qe;break;case"copy":case"cut":case"paste":pe=ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=C}var we=(o&4)!==0,Pt=!we&&i==="scroll",H=we?re!==null?re+"Capture":null:re;we=[];for(var U=Q,W;U!==null;){W=U;var oe=W.stateNode;if(W.tag===5&&oe!==null&&(W=oe,H!==null&&(oe=yt(U,H),oe!=null&&we.push(ll(U,oe,W)))),Pt)break;U=U.return}0<we.length&&(re=new pe(re,ye,null,l,ie),se.push({event:re,listeners:we}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",re&&l!==ui&&(ye=l.relatedTarget||l.fromElement)&&(Js(ye)||ye[mi]))break e;if((pe||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,pe?(ye=l.relatedTarget||l.toElement,pe=Q,ye=ye?Js(ye):null,ye!==null&&(Pt=cr(ye),ye!==Pt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(pe=null,ye=Q),pe!==ye)){if(we=$o,oe="onMouseLeave",H="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(we=C,oe="onPointerLeave",H="onPointerEnter",U="pointer"),Pt=pe==null?re:Zo(pe),W=ye==null?re:Zo(ye),re=new we(oe,U+"leave",pe,l,ie),re.target=Pt,re.relatedTarget=W,oe=null,Js(ie)===Q&&(we=new we(H,U+"enter",ye,l,ie),we.target=W,we.relatedTarget=Pt,oe=we),Pt=oe,pe&&ye)t:{for(we=pe,H=ye,U=0,W=we;W;W=Yo(W))U++;for(W=0,oe=H;oe;oe=Yo(oe))W++;for(;0<U-W;)we=Yo(we),U--;for(;0<W-U;)H=Yo(H),W--;for(;U--;){if(we===H||H!==null&&we===H.alternate)break t;we=Yo(we),H=Yo(H)}we=null}else we=null;pe!==null&&av(se,re,pe,we,!1),ye!==null&&Pt!==null&&av(se,Pt,ye,we,!0)}}e:{if(re=Q?Zo(Q):window,pe=re.nodeName&&re.nodeName.toLowerCase(),pe==="select"||pe==="input"&&re.type==="file")var Ee=qI;else if(Ug(re))if(Bg)Ee=XI;else{Ee=KI;var Ce=GI}else(pe=re.nodeName)&&pe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ee=QI);if(Ee&&(Ee=Ee(i,Q))){zg(se,Ee,l,ie);break e}Ce&&Ce(i,re,Q),i==="focusout"&&(Ce=re._wrapperState)&&Ce.controlled&&re.type==="number"&&si(re,"number",re.value)}switch(Ce=Q?Zo(Q):window,i){case"focusin":(Ug(Ce)||Ce.contentEditable==="true")&&(Qo=Ce,xd=Q,sl=null);break;case"focusout":sl=xd=Qo=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Xg(se,l,ie);break;case"selectionchange":if(ZI)break;case"keydown":case"keyup":Xg(se,l,ie)}var be;if(Nt)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ko?jg(i,l)&&(xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(Ys&&l.locale!=="ko"&&(Ko||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ko&&(be=Ja()):(jn=ie,Fo="value"in jn?jn.value:jn.textContent,Ko=!0)),Ce=qu(Q,xe),0<Ce.length&&(xe=new tl(xe,i,null,l,ie),se.push({event:xe,listeners:Ce}),be?xe.data=be:(be=Fg(l),be!==null&&(xe.data=be)))),(be=Fn?BI(i,l):$I(i,l))&&(Q=qu(Q,"onBeforeInput"),0<Q.length&&(ie=new tl("onBeforeInput","beforeinput",null,l,ie),se.push({event:ie,listeners:Q}),ie.data=be))}sv(se,o)})}function ll(i,o,l){return{instance:i,listener:o,currentTarget:l}}function qu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=yt(i,l),v!=null&&h.unshift(ll(i,v,p)),v=yt(i,o),v!=null&&h.push(ll(i,v,p))),i=i.return}return h}function Yo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function av(i,o,l,h,p){for(var v=o._reactName,S=[];l!==null&&l!==h;){var x=l,j=x.alternate,Q=x.stateNode;if(j!==null&&j===h)break;x.tag===5&&Q!==null&&(x=Q,p?(j=yt(l,v),j!=null&&S.unshift(ll(l,j,x))):p||(j=yt(l,v),j!=null&&S.push(ll(l,j,x)))),l=l.return}S.length!==0&&i.push({event:o,listeners:S})}var r1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function lv(i){return(typeof i=="string"?i:""+i).replace(r1,`
`).replace(i1,"")}function Gu(i,o,l){if(o=lv(o),lv(i)!==o&&l)throw Error(t(425))}function Ku(){}var jd=null,Fd=null;function Ud(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,s1=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,o1=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(i){return uv.resolve(null).then(i).catch(a1)}:zd;function a1(i){setTimeout(function(){throw i})}function Bd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),mr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);mr(o)}function Yi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function cv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Ur="__reactFiber$"+Jo,ul="__reactProps$"+Jo,mi="__reactContainer$"+Jo,$d="__reactEvents$"+Jo,l1="__reactListeners$"+Jo,u1="__reactHandles$"+Jo;function Js(i){var o=i[Ur];if(o)return o;for(var l=i.parentNode;l;){if(o=l[mi]||l[Ur]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=cv(i);i!==null;){if(l=i[Ur])return l;i=cv(i)}return o}i=l,l=i.parentNode}return null}function cl(i){return i=i[Ur]||i[mi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Zo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Qu(i){return i[ul]||null}var Hd=[],ea=-1;function Ji(i){return{current:i}}function dt(i){0>ea||(i.current=Hd[ea],Hd[ea]=null,ea--)}function lt(i,o){ea++,Hd[ea]=i.current,i.current=o}var Zi={},sn=Ji(Zi),Cn=Ji(!1),Zs=Zi;function ta(i,o){var l=i.type.contextTypes;if(!l)return Zi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=o[v];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function bn(i){return i=i.childContextTypes,i!=null}function Xu(){dt(Cn),dt(sn)}function hv(i,o,l){if(sn.current!==Zi)throw Error(t(168));lt(sn,o),lt(Cn,l)}function dv(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Fe(i)||"Unknown",p));return ae({},l,h)}function Yu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Zi,Zs=sn.current,lt(sn,i),lt(Cn,Cn.current),!0}function fv(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=dv(i,o,Zs),h.__reactInternalMemoizedMergedChildContext=i,dt(Cn),dt(sn),lt(sn,i)):dt(Cn),lt(Cn,l)}var gi=null,Ju=!1,Wd=!1;function pv(i){gi===null?gi=[i]:gi.push(i)}function c1(i){Ju=!0,pv(i)}function es(){if(!Wd&&gi!==null){Wd=!0;var i=0,o=Ke;try{var l=gi;for(Ke=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}gi=null,Ju=!1}catch(p){throw gi!==null&&(gi=gi.slice(i+1)),Do(Hs,es),p}finally{Ke=o,Wd=!1}}return null}var na=[],ra=0,Zu=null,ec=0,Yn=[],Jn=0,eo=null,vi=1,yi="";function to(i,o){na[ra++]=ec,na[ra++]=Zu,Zu=i,ec=o}function mv(i,o,l){Yn[Jn++]=vi,Yn[Jn++]=yi,Yn[Jn++]=eo,eo=i;var h=vi;i=yi;var p=32-mn(h)-1;h&=~(1<<p),l+=1;var v=32-mn(o)+p;if(30<v){var S=p-p%5;v=(h&(1<<S)-1).toString(32),h>>=S,p-=S,vi=1<<32-mn(o)+p|l<<p|h,yi=v+i}else vi=1<<v|l<<p|h,yi=i}function qd(i){i.return!==null&&(to(i,1),mv(i,1,0))}function Gd(i){for(;i===Zu;)Zu=na[--ra],na[ra]=null,ec=na[--ra],na[ra]=null;for(;i===eo;)eo=Yn[--Jn],Yn[Jn]=null,yi=Yn[--Jn],Yn[Jn]=null,vi=Yn[--Jn],Yn[Jn]=null}var Un=null,zn=null,mt=!1,yr=null;function gv(i,o){var l=nr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function vv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Un=i,zn=Yi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Un=i,zn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=eo!==null?{id:vi,overflow:yi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=nr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Un=i,zn=null,!0):!1;default:return!1}}function Kd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Qd(i){if(mt){var o=zn;if(o){var l=o;if(!vv(i,o)){if(Kd(i))throw Error(t(418));o=Yi(l.nextSibling);var h=Un;o&&vv(i,o)?gv(h,l):(i.flags=i.flags&-4097|2,mt=!1,Un=i)}}else{if(Kd(i))throw Error(t(418));i.flags=i.flags&-4097|2,mt=!1,Un=i}}}function yv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Un=i}function tc(i){if(i!==Un)return!1;if(!mt)return yv(i),mt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ud(i.type,i.memoizedProps)),o&&(o=zn)){if(Kd(i))throw _v(),Error(t(418));for(;o;)gv(i,o),o=Yi(o.nextSibling)}if(yv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){zn=Yi(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}zn=null}}else zn=Un?Yi(i.stateNode.nextSibling):null;return!0}function _v(){for(var i=zn;i;)i=Yi(i.nextSibling)}function ia(){zn=Un=null,mt=!1}function Xd(i){yr===null?yr=[i]:yr.push(i)}var h1=Z.ReactCurrentBatchConfig;function hl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var x=p.refs;S===null?delete x[v]:x[v]=S},o._stringRef=v,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function nc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function wv(i){var o=i._init;return o(i._payload)}function Ev(i){function o(H,U){if(i){var W=H.deletions;W===null?(H.deletions=[U],H.flags|=16):W.push(U)}}function l(H,U){if(!i)return null;for(;U!==null;)o(H,U),U=U.sibling;return null}function h(H,U){for(H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function p(H,U){return H=ls(H,U),H.index=0,H.sibling=null,H}function v(H,U,W){return H.index=W,i?(W=H.alternate,W!==null?(W=W.index,W<U?(H.flags|=2,U):W):(H.flags|=2,U)):(H.flags|=1048576,U)}function S(H){return i&&H.alternate===null&&(H.flags|=2),H}function x(H,U,W,oe){return U===null||U.tag!==6?(U=Bf(W,H.mode,oe),U.return=H,U):(U=p(U,W),U.return=H,U)}function j(H,U,W,oe){var Ee=W.type;return Ee===R?ie(H,U,W.props.children,oe,W.key):U!==null&&(U.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Ve&&wv(Ee)===U.type)?(oe=p(U,W.props),oe.ref=hl(H,U,W),oe.return=H,oe):(oe=bc(W.type,W.key,W.props,null,H.mode,oe),oe.ref=hl(H,U,W),oe.return=H,oe)}function Q(H,U,W,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=$f(W,H.mode,oe),U.return=H,U):(U=p(U,W.children||[]),U.return=H,U)}function ie(H,U,W,oe,Ee){return U===null||U.tag!==7?(U=uo(W,H.mode,oe,Ee),U.return=H,U):(U=p(U,W),U.return=H,U)}function se(H,U,W){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Bf(""+U,H.mode,W),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case K:return W=bc(U.type,U.key,U.props,null,H.mode,W),W.ref=hl(H,null,U),W.return=H,W;case J:return U=$f(U,H.mode,W),U.return=H,U;case Ve:var oe=U._init;return se(H,oe(U._payload),W)}if(or(U)||de(U))return U=uo(U,H.mode,W,null),U.return=H,U;nc(H,U)}return null}function re(H,U,W,oe){var Ee=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ee!==null?null:x(H,U,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case K:return W.key===Ee?j(H,U,W,oe):null;case J:return W.key===Ee?Q(H,U,W,oe):null;case Ve:return Ee=W._init,re(H,U,Ee(W._payload),oe)}if(or(W)||de(W))return Ee!==null?null:ie(H,U,W,oe,null);nc(H,W)}return null}function pe(H,U,W,oe,Ee){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return H=H.get(W)||null,x(U,H,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case K:return H=H.get(oe.key===null?W:oe.key)||null,j(U,H,oe,Ee);case J:return H=H.get(oe.key===null?W:oe.key)||null,Q(U,H,oe,Ee);case Ve:var Ce=oe._init;return pe(H,U,W,Ce(oe._payload),Ee)}if(or(oe)||de(oe))return H=H.get(W)||null,ie(U,H,oe,Ee,null);nc(U,oe)}return null}function ye(H,U,W,oe){for(var Ee=null,Ce=null,be=U,xe=U=0,Kt=null;be!==null&&xe<W.length;xe++){be.index>xe?(Kt=be,be=null):Kt=be.sibling;var Je=re(H,be,W[xe],oe);if(Je===null){be===null&&(be=Kt);break}i&&be&&Je.alternate===null&&o(H,be),U=v(Je,U,xe),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je,be=Kt}if(xe===W.length)return l(H,be),mt&&to(H,xe),Ee;if(be===null){for(;xe<W.length;xe++)be=se(H,W[xe],oe),be!==null&&(U=v(be,U,xe),Ce===null?Ee=be:Ce.sibling=be,Ce=be);return mt&&to(H,xe),Ee}for(be=h(H,be);xe<W.length;xe++)Kt=pe(be,H,xe,W[xe],oe),Kt!==null&&(i&&Kt.alternate!==null&&be.delete(Kt.key===null?xe:Kt.key),U=v(Kt,U,xe),Ce===null?Ee=Kt:Ce.sibling=Kt,Ce=Kt);return i&&be.forEach(function(us){return o(H,us)}),mt&&to(H,xe),Ee}function we(H,U,W,oe){var Ee=de(W);if(typeof Ee!="function")throw Error(t(150));if(W=Ee.call(W),W==null)throw Error(t(151));for(var Ce=Ee=null,be=U,xe=U=0,Kt=null,Je=W.next();be!==null&&!Je.done;xe++,Je=W.next()){be.index>xe?(Kt=be,be=null):Kt=be.sibling;var us=re(H,be,Je.value,oe);if(us===null){be===null&&(be=Kt);break}i&&be&&us.alternate===null&&o(H,be),U=v(us,U,xe),Ce===null?Ee=us:Ce.sibling=us,Ce=us,be=Kt}if(Je.done)return l(H,be),mt&&to(H,xe),Ee;if(be===null){for(;!Je.done;xe++,Je=W.next())Je=se(H,Je.value,oe),Je!==null&&(U=v(Je,U,xe),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je);return mt&&to(H,xe),Ee}for(be=h(H,be);!Je.done;xe++,Je=W.next())Je=pe(be,H,xe,Je.value,oe),Je!==null&&(i&&Je.alternate!==null&&be.delete(Je.key===null?xe:Je.key),U=v(Je,U,xe),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je);return i&&be.forEach(function(H1){return o(H,H1)}),mt&&to(H,xe),Ee}function Pt(H,U,W,oe){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case K:e:{for(var Ee=W.key,Ce=U;Ce!==null;){if(Ce.key===Ee){if(Ee=W.type,Ee===R){if(Ce.tag===7){l(H,Ce.sibling),U=p(Ce,W.props.children),U.return=H,H=U;break e}}else if(Ce.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Ve&&wv(Ee)===Ce.type){l(H,Ce.sibling),U=p(Ce,W.props),U.ref=hl(H,Ce,W),U.return=H,H=U;break e}l(H,Ce);break}else o(H,Ce);Ce=Ce.sibling}W.type===R?(U=uo(W.props.children,H.mode,oe,W.key),U.return=H,H=U):(oe=bc(W.type,W.key,W.props,null,H.mode,oe),oe.ref=hl(H,U,W),oe.return=H,H=oe)}return S(H);case J:e:{for(Ce=W.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){l(H,U.sibling),U=p(U,W.children||[]),U.return=H,H=U;break e}else{l(H,U);break}else o(H,U);U=U.sibling}U=$f(W,H.mode,oe),U.return=H,H=U}return S(H);case Ve:return Ce=W._init,Pt(H,U,Ce(W._payload),oe)}if(or(W))return ye(H,U,W,oe);if(de(W))return we(H,U,W,oe);nc(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,U!==null&&U.tag===6?(l(H,U.sibling),U=p(U,W),U.return=H,H=U):(l(H,U),U=Bf(W,H.mode,oe),U.return=H,H=U),S(H)):l(H,U)}return Pt}var sa=Ev(!0),Tv=Ev(!1),rc=Ji(null),ic=null,oa=null,Yd=null;function Jd(){Yd=oa=ic=null}function Zd(i){var o=rc.current;dt(rc),i._currentValue=o}function ef(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function aa(i,o){ic=i,Yd=oa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(An=!0),i.firstContext=null)}function Zn(i){var o=i._currentValue;if(Yd!==i)if(i={context:i,memoizedValue:o,next:null},oa===null){if(ic===null)throw Error(t(308));oa=i,ic.dependencies={lanes:0,firstContext:i}}else oa=oa.next=i;return o}var no=null;function tf(i){no===null?no=[i]:no.push(i)}function Sv(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,tf(o)):(l.next=p.next,p.next=l),o.interleaved=l,_i(i,h)}function _i(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var ts=!1;function nf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function wi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ns(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Ye&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,_i(i,l)}return p=h.interleaved,p===null?(o.next=o,tf(h)):(o.next=p.next,p.next=o),h.interleaved=o,_i(i,l)}function sc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Wi(i,l)}}function Cv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?p=v=o:v=v.next=o}else p=v=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function oc(i,o,l,h){var p=i.updateQueue;ts=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var j=x,Q=j.next;j.next=null,S===null?v=Q:S.next=Q,S=j;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,x=ie.lastBaseUpdate,x!==S&&(x===null?ie.firstBaseUpdate=Q:x.next=Q,ie.lastBaseUpdate=j))}if(v!==null){var se=p.baseState;S=0,ie=Q=j=null,x=v;do{var re=x.lane,pe=x.eventTime;if((h&re)===re){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ye=i,we=x;switch(re=o,pe=l,we.tag){case 1:if(ye=we.payload,typeof ye=="function"){se=ye.call(pe,se,re);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=we.payload,re=typeof ye=="function"?ye.call(pe,se,re):ye,re==null)break e;se=ae({},se,re);break e;case 2:ts=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,re=p.effects,re===null?p.effects=[x]:re.push(x))}else pe={eventTime:pe,lane:re,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ie===null?(Q=ie=pe,j=se):ie=ie.next=pe,S|=re;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;re=x,x=re.next,re.next=null,p.lastBaseUpdate=re,p.shared.pending=null}}while(!0);if(ie===null&&(j=se),p.baseState=j,p.firstBaseUpdate=Q,p.lastBaseUpdate=ie,o=p.shared.interleaved,o!==null){p=o;do S|=p.lane,p=p.next;while(p!==o)}else v===null&&(p.shared.lanes=0);so|=S,i.lanes=S,i.memoizedState=se}}function bv(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var dl={},zr=Ji(dl),fl=Ji(dl),pl=Ji(dl);function ro(i){if(i===dl)throw Error(t(174));return i}function rf(i,o){switch(lt(pl,o),lt(fl,i),lt(zr,dl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Rt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Rt(o,i)}dt(zr),lt(zr,o)}function la(){dt(zr),dt(fl),dt(pl)}function Av(i){ro(pl.current);var o=ro(zr.current),l=Rt(o,i.type);o!==l&&(lt(fl,i),lt(zr,l))}function sf(i){fl.current===i&&(dt(zr),dt(fl))}var _t=Ji(0);function ac(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var of=[];function af(){for(var i=0;i<of.length;i++)of[i]._workInProgressVersionPrimary=null;of.length=0}var lc=Z.ReactCurrentDispatcher,lf=Z.ReactCurrentBatchConfig,io=0,wt=null,Ut=null,qt=null,uc=!1,ml=!1,gl=0,d1=0;function on(){throw Error(t(321))}function uf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!vr(i[l],o[l]))return!1;return!0}function cf(i,o,l,h,p,v){if(io=v,wt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,lc.current=i===null||i.memoizedState===null?g1:v1,i=l(h,p),ml){v=0;do{if(ml=!1,gl=0,25<=v)throw Error(t(301));v+=1,qt=Ut=null,o.updateQueue=null,lc.current=y1,i=l(h,p)}while(ml)}if(lc.current=dc,o=Ut!==null&&Ut.next!==null,io=0,qt=Ut=wt=null,uc=!1,o)throw Error(t(300));return i}function hf(){var i=gl!==0;return gl=0,i}function Br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?wt.memoizedState=qt=i:qt=qt.next=i,qt}function er(){if(Ut===null){var i=wt.alternate;i=i!==null?i.memoizedState:null}else i=Ut.next;var o=qt===null?wt.memoizedState:qt.next;if(o!==null)qt=o,Ut=i;else{if(i===null)throw Error(t(310));Ut=i,i={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},qt===null?wt.memoizedState=qt=i:qt=qt.next=i}return qt}function vl(i,o){return typeof o=="function"?o(i):o}function df(i){var o=er(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Ut,p=h.baseQueue,v=l.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}h.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,h=h.baseState;var x=S=null,j=null,Q=v;do{var ie=Q.lane;if((io&ie)===ie)j!==null&&(j=j.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),h=Q.hasEagerState?Q.eagerState:i(h,Q.action);else{var se={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};j===null?(x=j=se,S=h):j=j.next=se,wt.lanes|=ie,so|=ie}Q=Q.next}while(Q!==null&&Q!==v);j===null?S=h:j.next=x,vr(h,o.memoizedState)||(An=!0),o.memoizedState=h,o.baseState=S,o.baseQueue=j,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do v=p.lane,wt.lanes|=v,so|=v,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function ff(i){var o=er(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,v=o.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do v=i(v,S.action),S=S.next;while(S!==p);vr(v,o.memoizedState)||(An=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,h]}function Rv(){}function Pv(i,o){var l=wt,h=er(),p=o(),v=!vr(h.memoizedState,p);if(v&&(h.memoizedState=p,An=!0),h=h.queue,pf(Nv.bind(null,l,h,i),[i]),h.getSnapshot!==o||v||qt!==null&&qt.memoizedState.tag&1){if(l.flags|=2048,yl(9,xv.bind(null,l,h,p,o),void 0,null),Gt===null)throw Error(t(349));(io&30)!==0||kv(l,o,p)}return p}function kv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=wt.updateQueue,o===null?(o={lastEffect:null,stores:null},wt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function xv(i,o,l,h){o.value=l,o.getSnapshot=h,Ov(o)&&Dv(i)}function Nv(i,o,l){return l(function(){Ov(o)&&Dv(i)})}function Ov(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!vr(i,l)}catch{return!0}}function Dv(i){var o=_i(i,1);o!==null&&Tr(o,i,1,-1)}function Vv(i){var o=Br();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:i},o.queue=i,i=i.dispatch=m1.bind(null,wt,i),[o.memoizedState,i]}function yl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=wt.updateQueue,o===null?(o={lastEffect:null,stores:null},wt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Mv(){return er().memoizedState}function cc(i,o,l,h){var p=Br();wt.flags|=i,p.memoizedState=yl(1|o,l,void 0,h===void 0?null:h)}function hc(i,o,l,h){var p=er();h=h===void 0?null:h;var v=void 0;if(Ut!==null){var S=Ut.memoizedState;if(v=S.destroy,h!==null&&uf(h,S.deps)){p.memoizedState=yl(o,l,v,h);return}}wt.flags|=i,p.memoizedState=yl(1|o,l,v,h)}function Lv(i,o){return cc(8390656,8,i,o)}function pf(i,o){return hc(2048,8,i,o)}function jv(i,o){return hc(4,2,i,o)}function Fv(i,o){return hc(4,4,i,o)}function Uv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zv(i,o,l){return l=l!=null?l.concat([i]):null,hc(4,4,Uv.bind(null,o,i),l)}function mf(){}function Bv(i,o){var l=er();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function $v(i,o){var l=er();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Hv(i,o,l){return(io&21)===0?(i.baseState&&(i.baseState=!1,An=!0),i.memoizedState=l):(vr(l,o)||(l=Gs(),wt.lanes|=l,so|=l,i.baseState=!0),o)}function f1(i,o){var l=Ke;Ke=l!==0&&4>l?l:4,i(!0);var h=lf.transition;lf.transition={};try{i(!1),o()}finally{Ke=l,lf.transition=h}}function Wv(){return er().memoizedState}function p1(i,o,l){var h=os(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},qv(i))Gv(o,l);else if(l=Sv(i,o,l,h),l!==null){var p=yn();Tr(l,i,h,p),Kv(l,o,h)}}function m1(i,o,l){var h=os(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(qv(i))Gv(o,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,x=v(S,l);if(p.hasEagerState=!0,p.eagerState=x,vr(x,S)){var j=o.interleaved;j===null?(p.next=p,tf(o)):(p.next=j.next,j.next=p),o.interleaved=p;return}}catch{}finally{}l=Sv(i,o,p,h),l!==null&&(p=yn(),Tr(l,i,h,p),Kv(l,o,h))}}function qv(i){var o=i.alternate;return i===wt||o!==null&&o===wt}function Gv(i,o){ml=uc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Kv(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Wi(i,l)}}var dc={readContext:Zn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},g1={readContext:Zn,useCallback:function(i,o){return Br().memoizedState=[i,o===void 0?null:o],i},useContext:Zn,useEffect:Lv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,cc(4194308,4,Uv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return cc(4194308,4,i,o)},useInsertionEffect:function(i,o){return cc(4,2,i,o)},useMemo:function(i,o){var l=Br();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=Br();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=p1.bind(null,wt,i),[h.memoizedState,i]},useRef:function(i){var o=Br();return i={current:i},o.memoizedState=i},useState:Vv,useDebugValue:mf,useDeferredValue:function(i){return Br().memoizedState=i},useTransition:function(){var i=Vv(!1),o=i[0];return i=f1.bind(null,i[1]),Br().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=wt,p=Br();if(mt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Gt===null)throw Error(t(349));(io&30)!==0||kv(h,o,l)}p.memoizedState=l;var v={value:l,getSnapshot:o};return p.queue=v,Lv(Nv.bind(null,h,v,i),[i]),h.flags|=2048,yl(9,xv.bind(null,h,v,l,o),void 0,null),l},useId:function(){var i=Br(),o=Gt.identifierPrefix;if(mt){var l=yi,h=vi;l=(h&~(1<<32-mn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=gl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=d1++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},v1={readContext:Zn,useCallback:Bv,useContext:Zn,useEffect:pf,useImperativeHandle:zv,useInsertionEffect:jv,useLayoutEffect:Fv,useMemo:$v,useReducer:df,useRef:Mv,useState:function(){return df(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=er();return Hv(o,Ut.memoizedState,i)},useTransition:function(){var i=df(vl)[0],o=er().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Wv,unstable_isNewReconciler:!1},y1={readContext:Zn,useCallback:Bv,useContext:Zn,useEffect:pf,useImperativeHandle:zv,useInsertionEffect:jv,useLayoutEffect:Fv,useMemo:$v,useReducer:ff,useRef:Mv,useState:function(){return ff(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=er();return Ut===null?o.memoizedState=i:Hv(o,Ut.memoizedState,i)},useTransition:function(){var i=ff(vl)[0],o=er().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Wv,unstable_isNewReconciler:!1};function _r(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function gf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:ae({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fc={isMounted:function(i){return(i=i._reactInternals)?cr(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=yn(),p=os(i),v=wi(h,p);v.payload=o,l!=null&&(v.callback=l),o=ns(i,v,p),o!==null&&(Tr(o,i,p,h),sc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=yn(),p=os(i),v=wi(h,p);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=ns(i,v,p),o!==null&&(Tr(o,i,p,h),sc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=yn(),h=os(i),p=wi(l,h);p.tag=2,o!=null&&(p.callback=o),o=ns(i,p,h),o!==null&&(Tr(o,i,h,l),sc(o,i,h))}};function Qv(i,o,l,h,p,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,S):o.prototype&&o.prototype.isPureReactComponent?!il(l,h)||!il(p,v):!0}function Xv(i,o,l){var h=!1,p=Zi,v=o.contextType;return typeof v=="object"&&v!==null?v=Zn(v):(p=bn(o)?Zs:sn.current,h=o.contextTypes,v=(h=h!=null)?ta(i,p):Zi),o=new o(l,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=fc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=v),o}function Yv(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&fc.enqueueReplaceState(o,o.state,null)}function vf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},nf(i);var v=o.contextType;typeof v=="object"&&v!==null?p.context=Zn(v):(v=bn(o)?Zs:sn.current,p.context=ta(i,v)),p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(gf(i,o,v,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&fc.enqueueReplaceState(p,p.state,null),oc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ua(i,o){try{var l="",h=o;do l+=Re(h),h=h.return;while(h);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:p,digest:null}}function yf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function _f(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var _1=typeof WeakMap=="function"?WeakMap:Map;function Jv(i,o,l){l=wi(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){wc||(wc=!0,Df=h),_f(i,o)},l}function Zv(i,o,l){l=wi(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){_f(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){_f(i,o),typeof h!="function"&&(is===null?is=new Set([this]):is.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function ey(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new _1;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=O1.bind(null,i,o,l),o.then(i,i))}function ty(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function ny(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=wi(-1,1),o.tag=2,ns(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var w1=Z.ReactCurrentOwner,An=!1;function vn(i,o,l,h){o.child=i===null?Tv(o,null,l,h):sa(o,i.child,l,h)}function ry(i,o,l,h,p){l=l.render;var v=o.ref;return aa(o,p),h=cf(i,o,l,h,v,p),l=hf(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ei(i,o,p)):(mt&&l&&qd(o),o.flags|=1,vn(i,o,h,p),o.child)}function iy(i,o,l,h,p){if(i===null){var v=l.type;return typeof v=="function"&&!zf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,sy(i,o,v,h,p)):(i=bc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,(i.lanes&p)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:il,l(S,h)&&i.ref===o.ref)return Ei(i,o,p)}return o.flags|=1,i=ls(v,h),i.ref=o.ref,i.return=o,o.child=i}function sy(i,o,l,h,p){if(i!==null){var v=i.memoizedProps;if(il(v,h)&&i.ref===o.ref)if(An=!1,o.pendingProps=h=v,(i.lanes&p)!==0)(i.flags&131072)!==0&&(An=!0);else return o.lanes=i.lanes,Ei(i,o,p)}return wf(i,o,l,h,p)}function oy(i,o,l){var h=o.pendingProps,p=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ha,Bn),Bn|=l;else{if((l&1073741824)===0)return i=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,lt(ha,Bn),Bn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,lt(ha,Bn),Bn|=h}else v!==null?(h=v.baseLanes|l,o.memoizedState=null):h=l,lt(ha,Bn),Bn|=h;return vn(i,o,p,l),o.child}function ay(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function wf(i,o,l,h,p){var v=bn(l)?Zs:sn.current;return v=ta(o,v),aa(o,p),l=cf(i,o,l,h,v,p),h=hf(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ei(i,o,p)):(mt&&h&&qd(o),o.flags|=1,vn(i,o,l,p),o.child)}function ly(i,o,l,h,p){if(bn(l)){var v=!0;Yu(o)}else v=!1;if(aa(o,p),o.stateNode===null)mc(i,o),Xv(o,l,h),vf(o,l,h,p),h=!0;else if(i===null){var S=o.stateNode,x=o.memoizedProps;S.props=x;var j=S.context,Q=l.contextType;typeof Q=="object"&&Q!==null?Q=Zn(Q):(Q=bn(l)?Zs:sn.current,Q=ta(o,Q));var ie=l.getDerivedStateFromProps,se=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function";se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==h||j!==Q)&&Yv(o,S,h,Q),ts=!1;var re=o.memoizedState;S.state=re,oc(o,h,S,p),j=o.memoizedState,x!==h||re!==j||Cn.current||ts?(typeof ie=="function"&&(gf(o,l,ie,h),j=o.memoizedState),(x=ts||Qv(o,l,x,h,re,j,Q))?(se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=j),S.props=h,S.state=j,S.context=Q,h=x):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{S=o.stateNode,Iv(i,o),x=o.memoizedProps,Q=o.type===o.elementType?x:_r(o.type,x),S.props=Q,se=o.pendingProps,re=S.context,j=l.contextType,typeof j=="object"&&j!==null?j=Zn(j):(j=bn(l)?Zs:sn.current,j=ta(o,j));var pe=l.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==se||re!==j)&&Yv(o,S,h,j),ts=!1,re=o.memoizedState,S.state=re,oc(o,h,S,p);var ye=o.memoizedState;x!==se||re!==ye||Cn.current||ts?(typeof pe=="function"&&(gf(o,l,pe,h),ye=o.memoizedState),(Q=ts||Qv(o,l,Q,h,re,ye,j)||!1)?(ie||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ye,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ye,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ye),S.props=h,S.state=ye,S.context=j,h=Q):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),h=!1)}return Ef(i,o,l,h,v,p)}function Ef(i,o,l,h,p,v){ay(i,o);var S=(o.flags&128)!==0;if(!h&&!S)return p&&fv(o,l,!1),Ei(i,o,v);h=o.stateNode,w1.current=o;var x=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&S?(o.child=sa(o,i.child,null,v),o.child=sa(o,null,x,v)):vn(i,o,x,v),o.memoizedState=h.state,p&&fv(o,l,!0),o.child}function uy(i){var o=i.stateNode;o.pendingContext?hv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&hv(i,o.context,!1),rf(i,o.containerInfo)}function cy(i,o,l,h,p){return ia(),Xd(p),o.flags|=256,vn(i,o,l,h),o.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function Sf(i){return{baseLanes:i,cachePool:null,transitions:null}}function hy(i,o,l){var h=o.pendingProps,p=_t.current,v=!1,S=(o.flags&128)!==0,x;if((x=S)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),lt(_t,p&1),i===null)return Qd(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=h.children,i=h.fallback,v?(h=o.mode,v=o.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ac(S,h,0,null),i=uo(i,h,l,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=Sf(l),o.memoizedState=Tf,i):If(o,S));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return E1(i,o,S,h,x,p,l);if(v){v=h.fallback,S=o.mode,p=i.child,x=p.sibling;var j={mode:"hidden",children:h.children};return(S&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=j,o.deletions=null):(h=ls(p,j),h.subtreeFlags=p.subtreeFlags&14680064),x!==null?v=ls(x,v):(v=uo(v,S,l,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,S=i.child.memoizedState,S=S===null?Sf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~l,o.memoizedState=Tf,h}return v=i.child,i=v.sibling,h=ls(v,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function If(i,o){return o=Ac({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function pc(i,o,l,h){return h!==null&&Xd(h),sa(o,i.child,null,l),i=If(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function E1(i,o,l,h,p,v,S){if(l)return o.flags&256?(o.flags&=-257,h=yf(Error(t(422))),pc(i,o,S,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=h.fallback,p=o.mode,h=Ac({mode:"visible",children:h.children},p,0,null),v=uo(v,p,S,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,(o.mode&1)!==0&&sa(o,i.child,null,S),o.child.memoizedState=Sf(S),o.memoizedState=Tf,v);if((o.mode&1)===0)return pc(i,o,S,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var x=h.dgst;return h=x,v=Error(t(419)),h=yf(v,h,void 0),pc(i,o,S,h)}if(x=(S&i.childLanes)!==0,An||x){if(h=Gt,h!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,_i(i,p),Tr(h,i,p,-1))}return Uf(),h=yf(Error(t(421))),pc(i,o,S,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=D1.bind(null,i),p._reactRetry=o,null):(i=v.treeContext,zn=Yi(p.nextSibling),Un=o,mt=!0,yr=null,i!==null&&(Yn[Jn++]=vi,Yn[Jn++]=yi,Yn[Jn++]=eo,vi=i.id,yi=i.overflow,eo=o),o=If(o,h.children),o.flags|=4096,o)}function dy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ef(i.return,o,l)}function Cf(i,o,l,h,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=p)}function fy(i,o,l){var h=o.pendingProps,p=h.revealOrder,v=h.tail;if(vn(i,o,h.children,l),h=_t.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dy(i,l,o);else if(i.tag===19)dy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(lt(_t,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&ac(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Cf(o,!1,p,l,v);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&ac(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Cf(o,!0,l,null,v);break;case"together":Cf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function mc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ei(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),so|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=ls(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=ls(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function T1(i,o,l){switch(o.tag){case 3:uy(o),ia();break;case 5:Av(o);break;case 1:bn(o.type)&&Yu(o);break;case 4:rf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;lt(rc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(lt(_t,_t.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?hy(i,o,l):(lt(_t,_t.current&1),i=Ei(i,o,l),i!==null?i.sibling:null);lt(_t,_t.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return fy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),lt(_t,_t.current),h)break;return null;case 22:case 23:return o.lanes=0,oy(i,o,l)}return Ei(i,o,l)}var py,bf,my,gy;py=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},bf=function(){},my=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,ro(zr.current);var v=null;switch(l){case"input":p=He(i,p),h=He(i,h),v=[];break;case"select":p=ae({},p,{value:void 0}),h=ae({},h,{value:void 0}),v=[];break;case"textarea":p=Ds(i,p),h=Ds(i,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Ku)}js(l,h);var S;l=null;for(Q in p)if(!h.hasOwnProperty(Q)&&p.hasOwnProperty(Q)&&p[Q]!=null)if(Q==="style"){var x=p[Q];for(S in x)x.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?v||(v=[]):(v=v||[]).push(Q,null));for(Q in h){var j=h[Q];if(x=p!=null?p[Q]:void 0,h.hasOwnProperty(Q)&&j!==x&&(j!=null||x!=null))if(Q==="style")if(x){for(S in x)!x.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in j)j.hasOwnProperty(S)&&x[S]!==j[S]&&(l||(l={}),l[S]=j[S])}else l||(v||(v=[]),v.push(Q,l)),l=j;else Q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,x=x?x.__html:void 0,j!=null&&x!==j&&(v=v||[]).push(Q,j)):Q==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(Q,""+j):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?(j!=null&&Q==="onScroll"&&ht("scroll",i),v||x===j||(v=[])):(v=v||[]).push(Q,j))}l&&(v=v||[]).push("style",l);var Q=v;(o.updateQueue=Q)&&(o.flags|=4)}},gy=function(i,o,l,h){l!==h&&(o.flags|=4)};function _l(i,o){if(!mt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function an(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function S1(i,o,l){var h=o.pendingProps;switch(Gd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(o),null;case 1:return bn(o.type)&&Xu(),an(o),null;case 3:return h=o.stateNode,la(),dt(Cn),dt(sn),af(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(tc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,yr!==null&&(Lf(yr),yr=null))),bf(i,o),an(o),null;case 5:sf(o);var p=ro(pl.current);if(l=o.type,i!==null&&o.stateNode!=null)my(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return an(o),null}if(i=ro(zr.current),tc(o)){h=o.stateNode,l=o.type;var v=o.memoizedProps;switch(h[Ur]=o,h[ul]=v,i=(o.mode&1)!==0,l){case"dialog":ht("cancel",h),ht("close",h);break;case"iframe":case"object":case"embed":ht("load",h);break;case"video":case"audio":for(p=0;p<ol.length;p++)ht(ol[p],h);break;case"source":ht("error",h);break;case"img":case"image":case"link":ht("error",h),ht("load",h);break;case"details":ht("toggle",h);break;case"input":sr(h,v),ht("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},ht("invalid",h);break;case"textarea":Or(h,v),ht("invalid",h)}js(l,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var x=v[S];S==="children"?typeof x=="string"?h.textContent!==x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&ht("scroll",h)}switch(l){case"input":bt(h),Po(h,v,!0);break;case"textarea":bt(h),ai(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Ku)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=At(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=S.createElement(l,{is:h.is}):(i=S.createElement(l),l==="select"&&(S=i,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):i=S.createElementNS(i,l),i[Ur]=o,i[ul]=h,py(i,o,!1,!1),o.stateNode=i;e:{switch(S=Fs(l,h),l){case"dialog":ht("cancel",i),ht("close",i),p=h;break;case"iframe":case"object":case"embed":ht("load",i),p=h;break;case"video":case"audio":for(p=0;p<ol.length;p++)ht(ol[p],i);p=h;break;case"source":ht("error",i),p=h;break;case"img":case"image":case"link":ht("error",i),ht("load",i),p=h;break;case"details":ht("toggle",i),p=h;break;case"input":sr(i,h),p=He(i,h),ht("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=ae({},h,{value:void 0}),ht("invalid",i);break;case"textarea":Or(i,h),p=Ds(i,h),ht("invalid",i);break;default:p=h}js(l,p),x=p;for(v in x)if(x.hasOwnProperty(v)){var j=x[v];v==="style"?Ms(i,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Tn(i,j)):v==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&We(i,j):typeof j=="number"&&We(i,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?j!=null&&v==="onScroll"&&ht("scroll",i):j!=null&&q(i,v,j,S))}switch(l){case"input":bt(i),Po(i,h,!1);break;case"textarea":bt(i),ai(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Me(h.value));break;case"select":i.multiple=!!h.multiple,v=h.value,v!=null?qn(i,!!h.multiple,v,!1):h.defaultValue!=null&&qn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ku)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return an(o),null;case 6:if(i&&o.stateNode!=null)gy(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=ro(pl.current),ro(zr.current),tc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Ur]=o,(v=h.nodeValue!==l)&&(i=Un,i!==null))switch(i.tag){case 3:Gu(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gu(h.nodeValue,l,(i.mode&1)!==0)}v&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Ur]=o,o.stateNode=h}return an(o),null;case 13:if(dt(_t),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mt&&zn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)_v(),ia(),o.flags|=98560,v=!1;else if(v=tc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Ur]=o}else ia(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;an(o),v=!1}else yr!==null&&(Lf(yr),yr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(_t.current&1)!==0?zt===0&&(zt=3):Uf())),o.updateQueue!==null&&(o.flags|=4),an(o),null);case 4:return la(),bf(i,o),i===null&&al(o.stateNode.containerInfo),an(o),null;case 10:return Zd(o.type._context),an(o),null;case 17:return bn(o.type)&&Xu(),an(o),null;case 19:if(dt(_t),v=o.memoizedState,v===null)return an(o),null;if(h=(o.flags&128)!==0,S=v.rendering,S===null)if(h)_l(v,!1);else{if(zt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ac(i),S!==null){for(o.flags|=128,_l(v,!1),h=S.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)v=l,i=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return lt(_t,_t.current&1|2),o.child}i=i.sibling}v.tail!==null&&at()>da&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304)}else{if(!h)if(i=ac(S),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),_l(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!mt)return an(o),null}else 2*at()-v.renderingStartTime>da&&l!==1073741824&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=at(),o.sibling=null,l=_t.current,lt(_t,h?l&1|2:l&1),o):(an(o),null);case 22:case 23:return Ff(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Bn&1073741824)!==0&&(an(o),o.subtreeFlags&6&&(o.flags|=8192)):an(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function I1(i,o){switch(Gd(o),o.tag){case 1:return bn(o.type)&&Xu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return la(),dt(Cn),dt(sn),af(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return sf(o),null;case 13:if(dt(_t),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return dt(_t),null;case 4:return la(),null;case 10:return Zd(o.type._context),null;case 22:case 23:return Ff(),null;case 24:return null;default:return null}}var gc=!1,ln=!1,C1=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ca(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Tt(i,o,h)}else l.current=null}function Af(i,o,l){try{l()}catch(h){Tt(i,o,h)}}var vy=!1;function b1(i,o){if(jd=Ki,i=Qg(),kd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,x=-1,j=-1,Q=0,ie=0,se=i,re=null;t:for(;;){for(var pe;se!==l||p!==0&&se.nodeType!==3||(x=S+p),se!==v||h!==0&&se.nodeType!==3||(j=S+h),se.nodeType===3&&(S+=se.nodeValue.length),(pe=se.firstChild)!==null;)re=se,se=pe;for(;;){if(se===i)break t;if(re===l&&++Q===p&&(x=S),re===v&&++ie===h&&(j=S),(pe=se.nextSibling)!==null)break;se=re,re=se.parentNode}se=pe}l=x===-1||j===-1?null:{start:x,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fd={focusedElem:i,selectionRange:l},Ki=!1,ve=o;ve!==null;)if(o=ve,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ve=i;else for(;ve!==null;){o=ve;try{var ye=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var we=ye.memoizedProps,Pt=ye.memoizedState,H=o.stateNode,U=H.getSnapshotBeforeUpdate(o.elementType===o.type?we:_r(o.type,we),Pt);H.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var W=o.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){Tt(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,ve=i;break}ve=o.return}return ye=vy,vy=!1,ye}function wl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var v=p.destroy;p.destroy=void 0,v!==void 0&&Af(o,l,v)}p=p.next}while(p!==h)}}function vc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Rf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function yy(i){var o=i.alternate;o!==null&&(i.alternate=null,yy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ur],delete o[ul],delete o[$d],delete o[l1],delete o[u1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function _y(i){return i.tag===5||i.tag===3||i.tag===4}function wy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||_y(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ku));else if(h!==4&&(i=i.child,i!==null))for(Pf(i,o,l),i=i.sibling;i!==null;)Pf(i,o,l),i=i.sibling}function kf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(kf(i,o,l),i=i.sibling;i!==null;)kf(i,o,l),i=i.sibling}var Jt=null,wr=!1;function rs(i,o,l){for(l=l.child;l!==null;)Ey(i,o,l),l=l.sibling}function Ey(i,o,l){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Ws,l)}catch{}switch(l.tag){case 5:ln||ca(l,o);case 6:var h=Jt,p=wr;Jt=null,rs(i,o,l),Jt=h,wr=p,Jt!==null&&(wr?(i=Jt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Jt.removeChild(l.stateNode));break;case 18:Jt!==null&&(wr?(i=Jt,l=l.stateNode,i.nodeType===8?Bd(i.parentNode,l):i.nodeType===1&&Bd(i,l),mr(i)):Bd(Jt,l.stateNode));break;case 4:h=Jt,p=wr,Jt=l.stateNode.containerInfo,wr=!0,rs(i,o,l),Jt=h,wr=p;break;case 0:case 11:case 14:case 15:if(!ln&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Af(l,o,S),p=p.next}while(p!==h)}rs(i,o,l);break;case 1:if(!ln&&(ca(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(x){Tt(l,o,x)}rs(i,o,l);break;case 21:rs(i,o,l);break;case 22:l.mode&1?(ln=(h=ln)||l.memoizedState!==null,rs(i,o,l),ln=h):rs(i,o,l);break;default:rs(i,o,l)}}function Ty(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new C1),o.forEach(function(h){var p=V1.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Er(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var v=i,S=o,x=S;e:for(;x!==null;){switch(x.tag){case 5:Jt=x.stateNode,wr=!1;break e;case 3:Jt=x.stateNode.containerInfo,wr=!0;break e;case 4:Jt=x.stateNode.containerInfo,wr=!0;break e}x=x.return}if(Jt===null)throw Error(t(160));Ey(v,S,p),Jt=null,wr=!1;var j=p.alternate;j!==null&&(j.return=null),p.return=null}catch(Q){Tt(p,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sy(o,i),o=o.sibling}function Sy(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Er(o,i),$r(i),h&4){try{wl(3,i,i.return),vc(3,i)}catch(we){Tt(i,i.return,we)}try{wl(5,i,i.return)}catch(we){Tt(i,i.return,we)}}break;case 1:Er(o,i),$r(i),h&512&&l!==null&&ca(l,l.return);break;case 5:if(Er(o,i),$r(i),h&512&&l!==null&&ca(l,l.return),i.flags&32){var p=i.stateNode;try{We(p,"")}catch(we){Tt(i,i.return,we)}}if(h&4&&(p=i.stateNode,p!=null)){var v=i.memoizedProps,S=l!==null?l.memoizedProps:v,x=i.type,j=i.updateQueue;if(i.updateQueue=null,j!==null)try{x==="input"&&v.type==="radio"&&v.name!=null&&Mi(p,v),Fs(x,S);var Q=Fs(x,v);for(S=0;S<j.length;S+=2){var ie=j[S],se=j[S+1];ie==="style"?Ms(p,se):ie==="dangerouslySetInnerHTML"?Tn(p,se):ie==="children"?We(p,se):q(p,ie,se,Q)}switch(x){case"input":Li(p,v);break;case"textarea":oi(p,v);break;case"select":var re=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var pe=v.value;pe!=null?qn(p,!!v.multiple,pe,!1):re!==!!v.multiple&&(v.defaultValue!=null?qn(p,!!v.multiple,v.defaultValue,!0):qn(p,!!v.multiple,v.multiple?[]:"",!1))}p[ul]=v}catch(we){Tt(i,i.return,we)}}break;case 6:if(Er(o,i),$r(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,v=i.memoizedProps;try{p.nodeValue=v}catch(we){Tt(i,i.return,we)}}break;case 3:if(Er(o,i),$r(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mr(o.containerInfo)}catch(we){Tt(i,i.return,we)}break;case 4:Er(o,i),$r(i);break;case 13:Er(o,i),$r(i),p=i.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Of=at())),h&4&&Ty(i);break;case 22:if(ie=l!==null&&l.memoizedState!==null,i.mode&1?(ln=(Q=ln)||ie,Er(o,i),ln=Q):Er(o,i),$r(i),h&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!ie&&(i.mode&1)!==0)for(ve=i,ie=i.child;ie!==null;){for(se=ve=ie;ve!==null;){switch(re=ve,pe=re.child,re.tag){case 0:case 11:case 14:case 15:wl(4,re,re.return);break;case 1:ca(re,re.return);var ye=re.stateNode;if(typeof ye.componentWillUnmount=="function"){h=re,l=re.return;try{o=h,ye.props=o.memoizedProps,ye.state=o.memoizedState,ye.componentWillUnmount()}catch(we){Tt(h,l,we)}}break;case 5:ca(re,re.return);break;case 22:if(re.memoizedState!==null){by(se);continue}}pe!==null?(pe.return=re,ve=pe):by(se)}ie=ie.sibling}e:for(ie=null,se=i;;){if(se.tag===5){if(ie===null){ie=se;try{p=se.stateNode,Q?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(x=se.stateNode,j=se.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,x.style.display=Vs("display",S))}catch(we){Tt(i,i.return,we)}}}else if(se.tag===6){if(ie===null)try{se.stateNode.nodeValue=Q?"":se.memoizedProps}catch(we){Tt(i,i.return,we)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;ie===se&&(ie=null),se=se.return}ie===se&&(ie=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Er(o,i),$r(i),h&4&&Ty(i);break;case 21:break;default:Er(o,i),$r(i)}}function $r(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(_y(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(We(p,""),h.flags&=-33);var v=wy(i);kf(i,v,p);break;case 3:case 4:var S=h.stateNode.containerInfo,x=wy(i);Pf(i,x,S);break;default:throw Error(t(161))}}catch(j){Tt(i,i.return,j)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function A1(i,o,l){ve=i,Iy(i)}function Iy(i,o,l){for(var h=(i.mode&1)!==0;ve!==null;){var p=ve,v=p.child;if(p.tag===22&&h){var S=p.memoizedState!==null||gc;if(!S){var x=p.alternate,j=x!==null&&x.memoizedState!==null||ln;x=gc;var Q=ln;if(gc=S,(ln=j)&&!Q)for(ve=p;ve!==null;)S=ve,j=S.child,S.tag===22&&S.memoizedState!==null?Ay(p):j!==null?(j.return=S,ve=j):Ay(p);for(;v!==null;)ve=v,Iy(v),v=v.sibling;ve=p,gc=x,ln=Q}Cy(i)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ve=v):Cy(i)}}function Cy(i){for(;ve!==null;){var o=ve;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:ln||vc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!ln)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:_r(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&bv(o,v,h);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}bv(o,S,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&l.focus();break;case"img":j.src&&(l.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var se=ie.dehydrated;se!==null&&mr(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||o.flags&512&&Rf(o)}catch(re){Tt(o,o.return,re)}}if(o===i){ve=null;break}if(l=o.sibling,l!==null){l.return=o.return,ve=l;break}ve=o.return}}function by(i){for(;ve!==null;){var o=ve;if(o===i){ve=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ve=l;break}ve=o.return}}function Ay(i){for(;ve!==null;){var o=ve;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{vc(4,o)}catch(j){Tt(o,l,j)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(j){Tt(o,p,j)}}var v=o.return;try{Rf(o)}catch(j){Tt(o,v,j)}break;case 5:var S=o.return;try{Rf(o)}catch(j){Tt(o,S,j)}}}catch(j){Tt(o,o.return,j)}if(o===i){ve=null;break}var x=o.sibling;if(x!==null){x.return=o.return,ve=x;break}ve=o.return}}var R1=Math.ceil,yc=Z.ReactCurrentDispatcher,xf=Z.ReactCurrentOwner,tr=Z.ReactCurrentBatchConfig,Ye=0,Gt=null,Ot=null,Zt=0,Bn=0,ha=Ji(0),zt=0,El=null,so=0,_c=0,Nf=0,Tl=null,Rn=null,Of=0,da=1/0,Ti=null,wc=!1,Df=null,is=null,Ec=!1,ss=null,Tc=0,Sl=0,Vf=null,Sc=-1,Ic=0;function yn(){return(Ye&6)!==0?at():Sc!==-1?Sc:Sc=at()}function os(i){return(i.mode&1)===0?1:(Ye&2)!==0&&Zt!==0?Zt&-Zt:h1.transition!==null?(Ic===0&&(Ic=Gs()),Ic):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:Ya(i.type)),i)}function Tr(i,o,l,h){if(50<Sl)throw Sl=0,Vf=null,Error(t(185));Hi(i,l,h),((Ye&2)===0||i!==Gt)&&(i===Gt&&((Ye&2)===0&&(_c|=l),zt===4&&as(i,Zt)),Pn(i,h),l===1&&Ye===0&&(o.mode&1)===0&&(da=at()+500,Ju&&es()))}function Pn(i,o){var l=i.callbackNode;ci(i,o);var h=qs(i,i===Gt?Zt:0);if(h===0)l!==null&&qa(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&qa(l),o===1)i.tag===0?c1(Py.bind(null,i)):pv(Py.bind(null,i)),o1(function(){(Ye&6)===0&&es()}),l=null;else{switch(qi(h)){case 1:l=Hs;break;case 4:l=zi;break;case 16:l=Kn;break;case 536870912:l=Iu;break;default:l=Kn}l=Ly(l,Ry.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Ry(i,o){if(Sc=-1,Ic=0,(Ye&6)!==0)throw Error(t(327));var l=i.callbackNode;if(fa()&&i.callbackNode!==l)return null;var h=qs(i,i===Gt?Zt:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Cc(i,h);else{o=h;var p=Ye;Ye|=2;var v=xy();(Gt!==i||Zt!==o)&&(Ti=null,da=at()+500,ao(i,o));do try{x1();break}catch(x){ky(i,x)}while(!0);Jd(),yc.current=v,Ye=p,Ot!==null?o=0:(Gt=null,Zt=0,o=zt)}if(o!==0){if(o===2&&(p=Ln(i),p!==0&&(h=p,o=Mf(i,p))),o===1)throw l=El,ao(i,0),as(i,h),Pn(i,at()),l;if(o===6)as(i,h);else{if(p=i.current.alternate,(h&30)===0&&!P1(p)&&(o=Cc(i,h),o===2&&(v=Ln(i),v!==0&&(h=v,o=Mf(i,v))),o===1))throw l=El,ao(i,0),as(i,h),Pn(i,at()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:lo(i,Rn,Ti);break;case 3:if(as(i,h),(h&130023424)===h&&(o=Of+500-at(),10<o)){if(qs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){yn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=zd(lo.bind(null,i,Rn,Ti),o);break}lo(i,Rn,Ti);break;case 4:if(as(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var S=31-mn(h);v=1<<S,S=o[S],S>p&&(p=S),h&=~v}if(h=p,h=at()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*R1(h/1960))-h,10<h){i.timeoutHandle=zd(lo.bind(null,i,Rn,Ti),h);break}lo(i,Rn,Ti);break;case 5:lo(i,Rn,Ti);break;default:throw Error(t(329))}}}return Pn(i,at()),i.callbackNode===l?Ry.bind(null,i):null}function Mf(i,o){var l=Tl;return i.current.memoizedState.isDehydrated&&(ao(i,o).flags|=256),i=Cc(i,o),i!==2&&(o=Rn,Rn=l,o!==null&&Lf(o)),i}function Lf(i){Rn===null?Rn=i:Rn.push.apply(Rn,i)}function P1(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],v=p.getSnapshot;p=p.value;try{if(!vr(v(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function as(i,o){for(o&=~Nf,o&=~_c,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-mn(o),h=1<<l;i[l]=-1,o&=~h}}function Py(i){if((Ye&6)!==0)throw Error(t(327));fa();var o=qs(i,0);if((o&1)===0)return Pn(i,at()),null;var l=Cc(i,o);if(i.tag!==0&&l===2){var h=Ln(i);h!==0&&(o=h,l=Mf(i,h))}if(l===1)throw l=El,ao(i,0),as(i,o),Pn(i,at()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,lo(i,Rn,Ti),Pn(i,at()),null}function jf(i,o){var l=Ye;Ye|=1;try{return i(o)}finally{Ye=l,Ye===0&&(da=at()+500,Ju&&es())}}function oo(i){ss!==null&&ss.tag===0&&(Ye&6)===0&&fa();var o=Ye;Ye|=1;var l=tr.transition,h=Ke;try{if(tr.transition=null,Ke=1,i)return i()}finally{Ke=h,tr.transition=l,Ye=o,(Ye&6)===0&&es()}}function Ff(){Bn=ha.current,dt(ha)}function ao(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,s1(l)),Ot!==null)for(l=Ot.return;l!==null;){var h=l;switch(Gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Xu();break;case 3:la(),dt(Cn),dt(sn),af();break;case 5:sf(h);break;case 4:la();break;case 13:dt(_t);break;case 19:dt(_t);break;case 10:Zd(h.type._context);break;case 22:case 23:Ff()}l=l.return}if(Gt=i,Ot=i=ls(i.current,null),Zt=Bn=o,zt=0,El=null,Nf=_c=so=0,Rn=Tl=null,no!==null){for(o=0;o<no.length;o++)if(l=no[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,v=l.pending;if(v!==null){var S=v.next;v.next=p,h.next=S}l.pending=h}no=null}return i}function ky(i,o){do{var l=Ot;try{if(Jd(),lc.current=dc,uc){for(var h=wt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}uc=!1}if(io=0,qt=Ut=wt=null,ml=!1,gl=0,xf.current=null,l===null||l.return===null){zt=1,El=o,Ot=null;break}e:{var v=i,S=l.return,x=l,j=o;if(o=Zt,x.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=j,ie=x,se=ie.tag;if((ie.mode&1)===0&&(se===0||se===11||se===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=ty(S);if(pe!==null){pe.flags&=-257,ny(pe,S,x,v,o),pe.mode&1&&ey(v,Q,o),o=pe,j=Q;var ye=o.updateQueue;if(ye===null){var we=new Set;we.add(j),o.updateQueue=we}else ye.add(j);break e}else{if((o&1)===0){ey(v,Q,o),Uf();break e}j=Error(t(426))}}else if(mt&&x.mode&1){var Pt=ty(S);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),ny(Pt,S,x,v,o),Xd(ua(j,x));break e}}v=j=ua(j,x),zt!==4&&(zt=2),Tl===null?Tl=[v]:Tl.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var H=Jv(v,j,o);Cv(v,H);break e;case 1:x=j;var U=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(is===null||!is.has(W)))){v.flags|=65536,o&=-o,v.lanes|=o;var oe=Zv(v,x,o);Cv(v,oe);break e}}v=v.return}while(v!==null)}Oy(l)}catch(Ee){o=Ee,Ot===l&&l!==null&&(Ot=l=l.return);continue}break}while(!0)}function xy(){var i=yc.current;return yc.current=dc,i===null?dc:i}function Uf(){(zt===0||zt===3||zt===2)&&(zt=4),Gt===null||(so&268435455)===0&&(_c&268435455)===0||as(Gt,Zt)}function Cc(i,o){var l=Ye;Ye|=2;var h=xy();(Gt!==i||Zt!==o)&&(Ti=null,ao(i,o));do try{k1();break}catch(p){ky(i,p)}while(!0);if(Jd(),Ye=l,yc.current=h,Ot!==null)throw Error(t(261));return Gt=null,Zt=0,zt}function k1(){for(;Ot!==null;)Ny(Ot)}function x1(){for(;Ot!==null&&!Tu();)Ny(Ot)}function Ny(i){var o=My(i.alternate,i,Bn);i.memoizedProps=i.pendingProps,o===null?Oy(i):Ot=o,xf.current=null}function Oy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=S1(l,o,Bn),l!==null){Ot=l;return}}else{if(l=I1(l,o),l!==null){l.flags&=32767,Ot=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{zt=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=i}while(o!==null);zt===0&&(zt=5)}function lo(i,o,l){var h=Ke,p=tr.transition;try{tr.transition=null,Ke=1,N1(i,o,l,h)}finally{tr.transition=p,Ke=h}return null}function N1(i,o,l,h){do fa();while(ss!==null);if((Ye&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(st(i,v),i===Gt&&(Ot=Gt=null,Zt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ec||(Ec=!0,Ly(Kn,function(){return fa(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=tr.transition,tr.transition=null;var S=Ke;Ke=1;var x=Ye;Ye|=4,xf.current=null,b1(i,l),Sy(l,i),JI(Fd),Ki=!!jd,Fd=jd=null,i.current=l,A1(l),Td(),Ye=x,Ke=S,tr.transition=v}else i.current=l;if(Ec&&(Ec=!1,ss=i,Tc=p),v=i.pendingLanes,v===0&&(is=null),Cu(l.stateNode),Pn(i,at()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(wc)throw wc=!1,i=Df,Df=null,i;return(Tc&1)!==0&&i.tag!==0&&fa(),v=i.pendingLanes,(v&1)!==0?i===Vf?Sl++:(Sl=0,Vf=i):Sl=0,es(),null}function fa(){if(ss!==null){var i=qi(Tc),o=tr.transition,l=Ke;try{if(tr.transition=null,Ke=16>i?16:i,ss===null)var h=!1;else{if(i=ss,ss=null,Tc=0,(Ye&6)!==0)throw Error(t(331));var p=Ye;for(Ye|=4,ve=i.current;ve!==null;){var v=ve,S=v.child;if((ve.flags&16)!==0){var x=v.deletions;if(x!==null){for(var j=0;j<x.length;j++){var Q=x[j];for(ve=Q;ve!==null;){var ie=ve;switch(ie.tag){case 0:case 11:case 15:wl(8,ie,v)}var se=ie.child;if(se!==null)se.return=ie,ve=se;else for(;ve!==null;){ie=ve;var re=ie.sibling,pe=ie.return;if(yy(ie),ie===Q){ve=null;break}if(re!==null){re.return=pe,ve=re;break}ve=pe}}}var ye=v.alternate;if(ye!==null){var we=ye.child;if(we!==null){ye.child=null;do{var Pt=we.sibling;we.sibling=null,we=Pt}while(we!==null)}}ve=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ve=S;else e:for(;ve!==null;){if(v=ve,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:wl(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,ve=H;break e}ve=v.return}}var U=i.current;for(ve=U;ve!==null;){S=ve;var W=S.child;if((S.subtreeFlags&2064)!==0&&W!==null)W.return=S,ve=W;else e:for(S=U;ve!==null;){if(x=ve,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:vc(9,x)}}catch(Ee){Tt(x,x.return,Ee)}if(x===S){ve=null;break e}var oe=x.sibling;if(oe!==null){oe.return=x.return,ve=oe;break e}ve=x.return}}if(Ye=p,es(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Ws,i)}catch{}h=!0}return h}finally{Ke=l,tr.transition=o}}return!1}function Dy(i,o,l){o=ua(l,o),o=Jv(i,o,1),i=ns(i,o,1),o=yn(),i!==null&&(Hi(i,1,o),Pn(i,o))}function Tt(i,o,l){if(i.tag===3)Dy(i,i,l);else for(;o!==null;){if(o.tag===3){Dy(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(is===null||!is.has(h))){i=ua(l,i),i=Zv(o,i,1),o=ns(o,i,1),i=yn(),o!==null&&(Hi(o,1,i),Pn(o,i));break}}o=o.return}}function O1(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=yn(),i.pingedLanes|=i.suspendedLanes&l,Gt===i&&(Zt&l)===l&&(zt===4||zt===3&&(Zt&130023424)===Zt&&500>at()-Of?ao(i,0):Nf|=l),Pn(i,o)}function Vy(i,o){o===0&&((i.mode&1)===0?o=1:(o=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var l=yn();i=_i(i,o),i!==null&&(Hi(i,o,l),Pn(i,l))}function D1(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Vy(i,l)}function V1(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),Vy(i,l)}var My;My=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Cn.current)An=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return An=!1,T1(i,o,l);An=(i.flags&131072)!==0}else An=!1,mt&&(o.flags&1048576)!==0&&mv(o,ec,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;mc(i,o),i=o.pendingProps;var p=ta(o,sn.current);aa(o,l),p=cf(null,o,h,i,p,l);var v=hf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,bn(h)?(v=!0,Yu(o)):v=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,nf(o),p.updater=fc,o.stateNode=p,p._reactInternals=o,vf(o,h,i,l),o=Ef(null,o,h,!0,v,l)):(o.tag=0,mt&&v&&qd(o),vn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(mc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=L1(h),i=_r(h,i),p){case 0:o=wf(null,o,h,i,l);break e;case 1:o=ly(null,o,h,i,l);break e;case 11:o=ry(null,o,h,i,l);break e;case 14:o=iy(null,o,h,_r(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:_r(h,p),wf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:_r(h,p),ly(i,o,h,p,l);case 3:e:{if(uy(o),i===null)throw Error(t(387));h=o.pendingProps,v=o.memoizedState,p=v.element,Iv(i,o),oc(o,h,null,l);var S=o.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){p=ua(Error(t(423)),o),o=cy(i,o,h,l,p);break e}else if(h!==p){p=ua(Error(t(424)),o),o=cy(i,o,h,l,p);break e}else for(zn=Yi(o.stateNode.containerInfo.firstChild),Un=o,mt=!0,yr=null,l=Tv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ia(),h===p){o=Ei(i,o,l);break e}vn(i,o,h,l)}o=o.child}return o;case 5:return Av(o),i===null&&Qd(o),h=o.type,p=o.pendingProps,v=i!==null?i.memoizedProps:null,S=p.children,Ud(h,p)?S=null:v!==null&&Ud(h,v)&&(o.flags|=32),ay(i,o),vn(i,o,S,l),o.child;case 6:return i===null&&Qd(o),null;case 13:return hy(i,o,l);case 4:return rf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=sa(o,null,h,l):vn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:_r(h,p),ry(i,o,h,p,l);case 7:return vn(i,o,o.pendingProps,l),o.child;case 8:return vn(i,o,o.pendingProps.children,l),o.child;case 12:return vn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,v=o.memoizedProps,S=p.value,lt(rc,h._currentValue),h._currentValue=S,v!==null)if(vr(v.value,S)){if(v.children===p.children&&!Cn.current){o=Ei(i,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var x=v.dependencies;if(x!==null){S=v.child;for(var j=x.firstContext;j!==null;){if(j.context===h){if(v.tag===1){j=wi(-1,l&-l),j.tag=2;var Q=v.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?j.next=j:(j.next=ie.next,ie.next=j),Q.pending=j}}v.lanes|=l,j=v.alternate,j!==null&&(j.lanes|=l),ef(v.return,l,o),x.lanes|=l;break}j=j.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,x=S.alternate,x!==null&&(x.lanes|=l),ef(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}vn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,aa(o,l),p=Zn(p),h=h(p),o.flags|=1,vn(i,o,h,l),o.child;case 14:return h=o.type,p=_r(h,o.pendingProps),p=_r(h.type,p),iy(i,o,h,p,l);case 15:return sy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:_r(h,p),mc(i,o),o.tag=1,bn(h)?(i=!0,Yu(o)):i=!1,aa(o,l),Xv(o,h,p),vf(o,h,p,l),Ef(null,o,h,!0,i,l);case 19:return fy(i,o,l);case 22:return oy(i,o,l)}throw Error(t(156,o.tag))};function Ly(i,o){return Do(i,o)}function M1(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(i,o,l,h){return new M1(i,o,l,h)}function zf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function L1(i){if(typeof i=="function")return zf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===Ue)return 14}return 2}function ls(i,o){var l=i.alternate;return l===null?(l=nr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function bc(i,o,l,h,p,v){var S=2;if(h=i,typeof i=="function")zf(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case R:return uo(l.children,p,v,o);case b:S=8,p|=8;break;case k:return i=nr(12,l,o,p|2),i.elementType=k,i.lanes=v,i;case N:return i=nr(13,l,o,p),i.elementType=N,i.lanes=v,i;case he:return i=nr(19,l,o,p),i.elementType=he,i.lanes=v,i;case Oe:return Ac(l,p,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:S=10;break e;case L:S=9;break e;case F:S=11;break e;case Ue:S=14;break e;case Ve:S=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=nr(S,l,o,p),o.elementType=i,o.type=h,o.lanes=v,o}function uo(i,o,l,h){return i=nr(7,i,h,o),i.lanes=l,i}function Ac(i,o,l,h){return i=nr(22,i,h,o),i.elementType=Oe,i.lanes=l,i.stateNode={isHidden:!1},i}function Bf(i,o,l){return i=nr(6,i,null,o),i.lanes=l,i}function $f(i,o,l){return o=nr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function j1(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Hf(i,o,l,h,p,v,S,x,j){return i=new j1(i,o,l,x,j),o===1?(o=1,v===!0&&(o|=8)):o=0,v=nr(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(v),i}function F1(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function jy(i){if(!i)return Zi;i=i._reactInternals;e:{if(cr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(bn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(bn(l))return dv(i,l,o)}return o}function Fy(i,o,l,h,p,v,S,x,j){return i=Hf(l,h,!0,i,p,v,S,x,j),i.context=jy(null),l=i.current,h=yn(),p=os(l),v=wi(h,p),v.callback=o??null,ns(l,v,p),i.current.lanes=p,Hi(i,p,h),Pn(i,h),i}function Rc(i,o,l,h){var p=o.current,v=yn(),S=os(p);return l=jy(l),o.context===null?o.context=l:o.pendingContext=l,o=wi(v,S),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ns(p,o,S),i!==null&&(Tr(i,p,S,v),sc(i,p,S)),S}function Pc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Uy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Wf(i,o){Uy(i,o),(i=i.alternate)&&Uy(i,o)}function U1(){return null}var zy=typeof reportError=="function"?reportError:function(i){console.error(i)};function qf(i){this._internalRoot=i}kc.prototype.render=qf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Rc(i,o,null,null)},kc.prototype.unmount=qf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;oo(function(){Rc(null,i,null,null)}),o[mi]=null}};function kc(i){this._internalRoot=i}kc.prototype.unstable_scheduleHydration=function(i){if(i){var o=ku();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Mr.length&&o!==0&&o<Mr[l].priority;l++);Mr.splice(l,0,i),l===0&&Ou(i)}};function Gf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function By(){}function z1(i,o,l,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var Q=Pc(S);v.call(Q)}}var S=Fy(o,h,i,0,null,!1,!1,"",By);return i._reactRootContainer=S,i[mi]=S.current,al(i.nodeType===8?i.parentNode:i),oo(),S}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var x=h;h=function(){var Q=Pc(j);x.call(Q)}}var j=Hf(i,0,!1,null,null,!1,!1,"",By);return i._reactRootContainer=j,i[mi]=j.current,al(i.nodeType===8?i.parentNode:i),oo(function(){Rc(o,j,l,h)}),j}function Nc(i,o,l,h,p){var v=l._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var x=p;p=function(){var j=Pc(S);x.call(j)}}Rc(o,S,i,p)}else S=z1(l,o,i,p,h);return Pc(S)}Ru=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=Bi(o.pendingLanes);l!==0&&(Wi(o,l|1),Pn(o,at()),(Ye&6)===0&&(da=at()+500,es()))}break;case 13:oo(function(){var h=_i(i,1);if(h!==null){var p=yn();Tr(h,i,1,p)}}),Wf(i,1)}},Lo=function(i){if(i.tag===13){var o=_i(i,134217728);if(o!==null){var l=yn();Tr(o,i,134217728,l)}Wf(i,134217728)}},Pu=function(i){if(i.tag===13){var o=os(i),l=_i(i,o);if(l!==null){var h=yn();Tr(l,i,o,h)}Wf(i,o)}},ku=function(){return Ke},xu=function(i,o){var l=Ke;try{return Ke=i,o()}finally{Ke=l}},Fi=function(i,o,l){switch(o){case"input":if(Li(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=Qu(h);if(!p)throw Error(t(90));Wn(h),Li(h,p)}}}break;case"textarea":oi(i,l);break;case"select":o=l.value,o!=null&&qn(i,!!l.multiple,o,!1)}},Te=jf,it=oo;var B1={usingClientEntryPoint:!1,Events:[cl,Zo,Qu,M,le,jf]},Il={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wa(i),i===null?null:i.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||U1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{Ws=Oc.inject($1),Mn=Oc}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1,kn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(o))throw Error(t(200));return F1(i,o,null,l)},kn.createRoot=function(i,o){if(!Gf(i))throw Error(t(299));var l=!1,h="",p=zy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Hf(i,1,!1,null,null,l,!1,h,p),i[mi]=o.current,al(i.nodeType===8?i.parentNode:i),new qf(o)},kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wa(o),i=i===null?null:i.stateNode,i},kn.flushSync=function(i){return oo(i)},kn.hydrate=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!0,l)},kn.hydrateRoot=function(i,o,l){if(!Gf(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,v="",S=zy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=Fy(o,null,i,1,l??null,p,!1,v,S),i[mi]=o.current,al(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new kc(o)},kn.render=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!1,l)},kn.unmountComponentAtNode=function(i){if(!xc(i))throw Error(t(40));return i._reactRootContainer?(oo(function(){Nc(null,null,i,!1,function(){i._reactRootContainer=null,i[mi]=null})}),!0):!1},kn.unstable_batchedUpdates=jf,kn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nc(i,o,l,!1,h)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var Xy;function D0(){if(Xy)return Xf.exports;Xy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xf.exports=Y1(),Xf.exports}var Yy;function J1(){if(Yy)return Dc;Yy=1;var n=D0();return Dc.createRoot=n.createRoot,Dc.hydrateRoot=n.hydrateRoot,Dc}var Z1=J1();const eC=N0(Z1);var tC=D0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bl.apply(this,arguments)}var gs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gs||(gs={}));const Jy="popstate";function nC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return bp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:V0(s)}return iC(e,t,null,n)}function jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rC(){return Math.random().toString(36).substr(2,8)}function Zy(n,e){return{usr:n.state,key:n.key,idx:e}}function bp(n,e,t,r){return t===void 0&&(t=null),Bl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Oa(e):e,{state:t,key:e&&e.key||r||rC()})}function V0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function iC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=gs.Pop,f=null,m=y();m==null&&(m=0,u.replaceState(Bl({},u.state,{idx:m}),""));function y(){return(u.state||{idx:null}).idx}function T(){d=gs.Pop;let A=y(),z=A==null?null:A-m;m=A,f&&f({action:d,location:D.location,delta:z})}function _(A,z){d=gs.Push;let G=bp(D.location,A,z);m=y()+1;let q=Zy(G,m),Z=D.createHref(G);try{u.pushState(q,"",Z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(Z)}a&&f&&f({action:d,location:D.location,delta:1})}function P(A,z){d=gs.Replace;let G=bp(D.location,A,z);m=y();let q=Zy(G,m),Z=D.createHref(G);u.replaceState(q,"",Z),a&&f&&f({action:d,location:D.location,delta:0})}function O(A){let z=s.location.origin!=="null"?s.location.origin:s.location.href,G=typeof A=="string"?A:V0(A);return G=G.replace(/ $/,"%20"),jt(z,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,z)}let D={get action(){return d},get location(){return n(s,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Jy,T),f=A,()=>{s.removeEventListener(Jy,T),f=null}},createHref(A){return e(s,A)},createURL:O,encodeLocation(A){let z=O(A);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:_,replace:P,go(A){return u.go(A)}};return D}var e_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(e_||(e_={}));function sC(n,e,t){return t===void 0&&(t="/"),oC(n,e,t)}function oC(n,e,t,r){let s=typeof e=="string"?Oa(e):e,a=j0(s.pathname||"/",t);if(a==null)return null;let u=M0(n);aC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=_C(a);d=gC(u[f],m)}return d}function M0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(jt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=mo([r,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(jt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),M0(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:pC(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of L0(a.path))s(a,u,f)}),e}function L0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=L0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function aC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const lC=/^:[\w-]+$/,uC=3,cC=2,hC=1,dC=10,fC=-2,t_=n=>n==="*";function pC(n,e){let t=n.split("/"),r=t.length;return t.some(t_)&&(r+=fC),e&&(r+=cC),t.filter(s=>!t_(s)).reduce((s,a)=>s+(lC.test(a)?uC:a===""?hC:dC),r)}function mC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function gC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",T=vC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),_=f.route;if(!T)return null;Object.assign(s,T.params),u.push({params:s,pathname:mo([a,T.pathname]),pathnameBase:IC(mo([a,T.pathnameBase])),route:_}),T.pathnameBase!=="/"&&(a=mo([a,T.pathnameBase]))}return u}function vC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=yC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,y,T)=>{let{paramName:_,isOptional:P}=y;if(_==="*"){let D=d[T]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const O=d[T];return P&&!O?m[_]=void 0:m[_]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function yC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _C(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function j0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const wC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EC=n=>wC.test(n);function TC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Oa(n):n,a;if(t)if(EC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),mm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=n_(t.substring(1),"/"):a=n_(t,e)}else a=e;return{pathname:a,search:CC(r),hash:bC(s)}}function n_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function F0(n,e){let t=SC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function U0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Oa(n):(s=Bl({},n),jt(!s.pathname||!s.pathname.includes("?"),Zf("?","pathname","search",s)),jt(!s.pathname||!s.pathname.includes("#"),Zf("#","pathname","hash",s)),jt(!s.search||!s.search.includes("#"),Zf("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let T=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),T-=1;s.pathname=_.join("/")}d=T>=0?e[T]:"/"}let f=TC(s,d),m=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}const mo=n=>n.join("/").replace(/\/\/+/g,"/"),IC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),CC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function AC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const z0=["post","put","patch","delete"];new Set(z0);const RC=["get",...z0];new Set(RC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$l.apply(this,arguments)}const gm=V.createContext(null),PC=V.createContext(null),nu=V.createContext(null),Fh=V.createContext(null),Io=V.createContext({outlet:null,matches:[],isDataRoute:!1}),B0=V.createContext(null);function ru(){return V.useContext(Fh)!=null}function vm(){return ru()||jt(!1),V.useContext(Fh).location}function $0(n){V.useContext(nu).static||V.useLayoutEffect(n)}function iu(){let{isDataRoute:n}=V.useContext(Io);return n?BC():kC()}function kC(){ru()||jt(!1);let n=V.useContext(gm),{basename:e,future:t,navigator:r}=V.useContext(nu),{matches:s}=V.useContext(Io),{pathname:a}=vm(),u=JSON.stringify(F0(s,t.v7_relativeSplatPath)),d=V.useRef(!1);return $0(()=>{d.current=!0}),V.useCallback(function(m,y){if(y===void 0&&(y={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let T=U0(m,JSON.parse(u),a,y.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:mo([e,T.pathname])),(y.replace?r.replace:r.push)(T,y.state,y)},[e,r,u,a,n])}function xC(n,e){return NC(n,e)}function NC(n,e,t,r){ru()||jt(!1);let{navigator:s}=V.useContext(nu),{matches:a}=V.useContext(Io),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=vm(),y;if(e){var T;let A=typeof e=="string"?Oa(e):e;f==="/"||(T=A.pathname)!=null&&T.startsWith(f)||jt(!1),y=A}else y=m;let _=y.pathname||"/",P=_;if(f!=="/"){let A=f.replace(/^\//,"").split("/");P="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let O=sC(n,{pathname:P}),D=LC(O&&O.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:mo([f,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:mo([f,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,t,r);return e&&D?V.createElement(Fh.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:gs.Pop}},D):D}function OC(){let n=zC(),e=AC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const DC=V.createElement(OC,null);class VC extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Io.Provider,{value:this.props.routeContext},V.createElement(B0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MC(n){let{routeContext:e,match:t,children:r}=n,s=V.useContext(gm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Io.Provider,{value:e},r)}function LC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let y=u.findIndex(T=>T.route.id&&(d==null?void 0:d[T.route.id])!==void 0);y>=0||jt(!1),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<u.length;y++){let T=u[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(m=y),T.route.id){let{loaderData:_,errors:P}=t,O=T.route.loader&&_[T.route.id]===void 0&&(!P||P[T.route.id]===void 0);if(T.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((y,T,_)=>{let P,O=!1,D=null,A=null;t&&(P=d&&T.route.id?d[T.route.id]:void 0,D=T.route.errorElement||DC,f&&(m<0&&_===0?($C("route-fallback"),O=!0,A=null):m===_&&(O=!0,A=T.route.hydrateFallbackElement||null)));let z=e.concat(u.slice(0,_+1)),G=()=>{let q;return P?q=D:O?q=A:T.route.Component?q=V.createElement(T.route.Component,null):T.route.element?q=T.route.element:q=y,V.createElement(MC,{match:T,routeContext:{outlet:y,matches:z,isDataRoute:t!=null},children:q})};return t&&(T.route.ErrorBoundary||T.route.errorElement||_===0)?V.createElement(VC,{location:t.location,revalidation:t.revalidation,component:D,error:P,children:G(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):G()},null)}var H0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(H0||{}),W0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(W0||{});function jC(n){let e=V.useContext(gm);return e||jt(!1),e}function FC(n){let e=V.useContext(PC);return e||jt(!1),e}function UC(n){let e=V.useContext(Io);return e||jt(!1),e}function q0(n){let e=UC(),t=e.matches[e.matches.length-1];return t.route.id||jt(!1),t.route.id}function zC(){var n;let e=V.useContext(B0),t=FC(),r=q0();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function BC(){let{router:n}=jC(H0.UseNavigateStable),e=q0(W0.UseNavigateStable),t=V.useRef(!1);return $0(()=>{t.current=!0}),V.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$l({fromRouteId:e},a)))},[n,e])}const r_={};function $C(n,e,t){r_[n]||(r_[n]=!0)}function HC(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Cr(n){let{to:e,replace:t,state:r,relative:s}=n;ru()||jt(!1);let{future:a,static:u}=V.useContext(nu),{matches:d}=V.useContext(Io),{pathname:f}=vm(),m=iu(),y=U0(e,F0(d,a.v7_relativeSplatPath),f,s==="path"),T=JSON.stringify(y);return V.useEffect(()=>m(JSON.parse(T),{replace:t,state:r,relative:s}),[m,T,s,t,r]),null}function co(n){jt(!1)}function WC(n){let{basename:e="/",children:t=null,location:r,navigationType:s=gs.Pop,navigator:a,static:u=!1,future:d}=n;ru()&&jt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:u,future:$l({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=Oa(r));let{pathname:y="/",search:T="",hash:_="",state:P=null,key:O="default"}=r,D=V.useMemo(()=>{let A=j0(y,f);return A==null?null:{location:{pathname:A,search:T,hash:_,state:P,key:O},navigationType:s}},[f,y,T,_,P,O,s]);return D==null?null:V.createElement(nu.Provider,{value:m},V.createElement(Fh.Provider,{children:t,value:D}))}function qC(n){let{children:e,location:t}=n;return xC(Ap(e),t)}new Promise(()=>{});function Ap(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,s)=>{if(!V.isValidElement(r))return;let a=[...e,s];if(r.type===V.Fragment){t.push.apply(t,Ap(r.props.children,a));return}r.type!==co&&jt(!1),!r.props.index||!r.props.children||jt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Ap(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const GC="6";try{window.__reactRouterVersion=GC}catch{}const KC="startTransition",i_=Cp[KC];function QC(n){let{basename:e,children:t,future:r,window:s}=n,a=V.useRef();a.current==null&&(a.current=nC({window:s,v5Compat:!0}));let u=a.current,[d,f]=V.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},y=V.useCallback(T=>{m&&i_?i_(()=>f(T)):f(T)},[f,m]);return V.useLayoutEffect(()=>u.listen(y),[u,y]),V.useEffect(()=>HC(r),[r]),V.createElement(WC,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var s_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(s_||(s_={}));var o_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(o_||(o_={}));function a_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function XC(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function YC(){const[n,e]=V.useState(null),[t,r]=V.useState(!1);V.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=V.useMemo(()=>!a_()&&XC()&&!t&&!n,[t,n]),a=V.useMemo(()=>!a_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:E.jsxs("section",{className:"install-banner","aria-live":"polite",children:[E.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),E.jsxs("div",{className:"install-actions",children:[a?E.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const G0=V.createContext(null);function JC({children:n}){const[e,t]=V.useState([]),r=V.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=V.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return E.jsxs(G0.Provider,{value:s,children:[n,E.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>E.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Uh(){const n=V.useContext(G0);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const ZC=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,y=a>>2,T=(a&3)<<4|d>>4;let _=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(_=64)),r.push(t[y],t[T],t[_],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const T=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||T==null)throw new tb;const _=a<<2|d>>4;if(r.push(_),m!==64){const P=d<<4&240|m>>2;if(r.push(P),T!==64){const O=m<<6&192|T;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nb=function(n){const e=K0(n);return Q0.encodeByteArray(e,!0)},ch=function(n){return nb(n).replace(/\./g,"")},X0=function(n){try{return Q0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=()=>rb().__FIREBASE_DEFAULTS__,sb=()=>{if(typeof process>"u"||typeof l_>"u")return;const n=l_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ob=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X0(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return ZC()||ib()||sb()||ob()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Y0=n=>{var e,t;return(t=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ym=n=>{const e=Y0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},J0=()=>{var n;return(n=zh())===null||n===void 0?void 0:n.config},Z0=n=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ch(JSON.stringify(t)),ch(JSON.stringify(u)),""].join(".")}const Vl={};function lb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?n.emulator.push(e):n.prod.push(e);return n}function ub(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let u_=!1;function $h(n,e){if(typeof window>"u"||typeof document>"u"||!Di(window.location.host)||Vl[n]===e||Vl[n]||u_)return;Vl[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=lb().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,P){_.setAttribute("width","24"),_.setAttribute("id",P),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{u_=!0,u()},_}function y(_,P){_.setAttribute("id",P),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function T(){const _=ub(r),P=t("text"),O=document.getElementById(P)||document.createElement("span"),D=t("learnmore"),A=document.getElementById(D)||document.createElement("a"),z=t("preprendIcon"),G=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const q=_.element;d(q),y(A,D);const Z=m();f(G,z),q.append(G,O,A,Z),document.body.appendChild(q)}a?(O.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function hb(){var n;const e=(n=zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function db(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mb(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gb(){return!hb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vb(){try{return typeof indexedDB=="object"}catch{return!1}}function yb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="FirebaseError";class kr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_b,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?wb(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new kr(s,d,r)}}function wb(n,e){return n.replace(Eb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Eb=/\{\$([^}]+)}/g;function Tb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(c_(a)&&c_(u)){if(!yo(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function c_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sb(n,e){const t=new Ib(n,e);return t.subscribe.bind(t)}class Ib{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Cb(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ep),s.error===void 0&&(s.error=ep),s.complete===void 0&&(s.complete=ep);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n){return n&&n._delegate?n._delegate:n}class Ri{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ab;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rb(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ab(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ab(n){return n===ho?void 0:n}function Rb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const kb={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},xb=qe.INFO,Nb={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Ob=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Nb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=xb,this._logHandler=Ob,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Db=(n,e)=>e.some(t=>n instanceof t);let h_,d_;function Vb(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mb(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,Rp=new WeakMap,nE=new WeakMap,tp=new WeakMap,wm=new WeakMap;function Lb(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ys(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tE.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function jb(n){if(Rp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Rp.set(n,e)}let Pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Fb(n){Pp=n(Pp)}function Ub(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(np(this),e,...t);return nE.set(r,e.sort?e.sort():[e]),ys(r)}:Mb().includes(n)?function(...e){return n.apply(np(this),e),ys(tE.get(this))}:function(...e){return ys(n.apply(np(this),e))}}function zb(n){return typeof n=="function"?Ub(n):(n instanceof IDBTransaction&&jb(n),Db(n,Vb())?new Proxy(n,Pp):n)}function ys(n){if(n instanceof IDBRequest)return Lb(n);if(tp.has(n))return tp.get(n);const e=zb(n);return e!==n&&(tp.set(n,e),wm.set(e,n)),e}const np=n=>wm.get(n);function Bb(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=ys(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ys(u.result),f.oldVersion,f.newVersion,ys(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const $b=["get","getKey","getAll","getAllKeys","count"],Hb=["put","add","delete","clear"],rp=new Map;function f_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Hb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$b.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return rp.set(e,a),a}Fb(n=>({...n,get:(e,t,r)=>f_(e,t)||n.get(e,t,r),has:(e,t)=>!!f_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",p_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new _m("@firebase/app"),Gb="@firebase/app-compat",Kb="@firebase/analytics-compat",Qb="@firebase/analytics",Xb="@firebase/app-check-compat",Yb="@firebase/app-check",Jb="@firebase/auth",Zb="@firebase/auth-compat",eA="@firebase/database",tA="@firebase/data-connect",nA="@firebase/database-compat",rA="@firebase/functions",iA="@firebase/functions-compat",sA="@firebase/installations",oA="@firebase/installations-compat",aA="@firebase/messaging",lA="@firebase/messaging-compat",uA="@firebase/performance",cA="@firebase/performance-compat",hA="@firebase/remote-config",dA="@firebase/remote-config-compat",fA="@firebase/storage",pA="@firebase/storage-compat",mA="@firebase/firestore",gA="@firebase/ai",vA="@firebase/firestore-compat",yA="firebase",_A="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",wA={[kp]:"fire-core",[Gb]:"fire-core-compat",[Qb]:"fire-analytics",[Kb]:"fire-analytics-compat",[Yb]:"fire-app-check",[Xb]:"fire-app-check-compat",[Jb]:"fire-auth",[Zb]:"fire-auth-compat",[eA]:"fire-rtdb",[tA]:"fire-data-connect",[nA]:"fire-rtdb-compat",[rA]:"fire-fn",[iA]:"fire-fn-compat",[sA]:"fire-iid",[oA]:"fire-iid-compat",[aA]:"fire-fcm",[lA]:"fire-fcm-compat",[uA]:"fire-perf",[cA]:"fire-perf-compat",[hA]:"fire-rc",[dA]:"fire-rc-compat",[fA]:"fire-gcs",[pA]:"fire-gcs-compat",[mA]:"fire-fst",[vA]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[yA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,EA=new Map,Np=new Map;function m_(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ss(n){const e=n.name;if(Np.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,n);for(const t of hh.values())m_(t,n);for(const t of EA.values())m_(t,n);return!0}function au(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new su("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=_A;function rE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(t||(t=J0()),!t)throw _s.create("no-options");const a=hh.get(s);if(a){if(yo(t,a.options)&&yo(r,a.config))return a;throw _s.create("duplicate-app",{appName:s})}const u=new Pb(s);for(const f of Np.values())u.addComponent(f);const d=new SA(t,r,u);return hh.set(s,d),d}function Hh(n=xp){const e=hh.get(n);if(!e&&n===xp&&J0())return rE();if(!e)throw _s.create("no-app",{appName:n});return e}function ir(n,e,t){var r;let s=(r=wA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(d.join(" "));return}Ss(new Ri(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firebase-heartbeat-database",CA=1,Hl="firebase-heartbeat-store";let ip=null;function iE(){return ip||(ip=Bb(IA,CA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hl)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),ip}async function bA(n){try{const t=(await iE()).transaction(Hl),r=await t.objectStore(Hl).get(sE(n));return await t.done,r}catch(e){if(e instanceof kr)Pi.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function g_(n,e){try{const r=(await iE()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,sE(n)),await r.done}catch(t){if(t instanceof kr)Pi.warn(t.message);else{const r=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(r.message)}}}function sE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=1024,RA=30;class PA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=v_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>RA){const u=NA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v_(),{heartbeatsToSend:r,unsentEntries:s}=kA(this._heartbeatsCache.heartbeats),a=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pi.warn(t),""}}}function v_(){return new Date().toISOString().substring(0,10)}function kA(n,e=AA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),y_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),y_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vb()?yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y_(n){return ch(JSON.stringify({version:2,heartbeats:n})).length}function NA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){Ss(new Ri("platform-logger",e=>new Wb(e),"PRIVATE")),Ss(new Ri("heartbeat",e=>new PA(e),"PRIVATE")),ir(kp,p_,n),ir(kp,p_,"esm2017"),ir("fire-js","")}OA("");var DA="firebase",VA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(DA,VA,"app");function Em(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function oE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MA=oE,aE=new su("auth","Firebase",oE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new _m("@firebase/auth");function LA(n,...e){dh.logLevel<=qe.WARN&&dh.warn(`Auth (${Co}): ${n}`,...e)}function Qc(n,...e){dh.logLevel<=qe.ERROR&&dh.error(`Auth (${Co}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,...e){throw Sm(n,...e)}function br(n,...e){return Sm(n,...e)}function Tm(n,e,t){const r=Object.assign(Object.assign({},MA()),{[e]:t});return new su("auth","Firebase",r).create(e,{appName:n.name})}function ws(n){return Tm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ti(n,"argument-error"),Tm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return aE.create(n,...e)}function Ne(n,e,...t){if(!n)throw Sm(e,...t)}function Ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qc(e),new Error(e)}function ki(n,e){n||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jA(){return __()==="http:"||__()==="https:"}function __(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jA()||fb()||"connection"in navigator)?navigator.onLine:!0}function UA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ki(t>e,"Short delay should be less than long delay!"),this.isMobile=cb()||pb()}get(){return FA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e){ki(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$A=new lu(3e4,6e4);function Cm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Da(n,e,t,r,s={}){return cE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=ou(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return db()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Di(n.emulatorConfig.host)&&(m.credentials="include"),uE.fetch()(await hE(n,n.config.apiHost,t,d),m)})}async function cE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},zA),e);try{const s=new WA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Vc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Vc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Vc(n,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Tm(n,y,m);ti(n,y)}}catch(s){if(s instanceof kr)throw s;ti(n,"network-request-failed",{message:String(s)})}}async function HA(n,e,t,r,s={}){const a=await Da(n,e,t,r,s);return"mfaPendingCredential"in a&&ti(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function hE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Im(n.config,s):`${n.config.apiScheme}://${s}`;return BA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class WA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),$A.get())})}}function Vc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=br(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(n,e){return Da(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return Da(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GA(n,e=!1){const t=ct(n),r=await t.getIdToken(e),s=bm(r);Ne(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Ml(sp(s.auth_time)),issuedAtTime:Ml(sp(s.iat)),expirationTime:Ml(sp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function sp(n){return Number(n)*1e3}function bm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=X0(t);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function w_(n){const e=bm(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof kr&&KA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function KA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Wl(n,fh(t,{idToken:r}));Ne(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?dE(a.providerUserInfo):[],d=YA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),y=f?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Dp(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,T)}async function XA(n){const e=ct(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dE(n){return n.map(e=>{var{providerId:t}=e,r=Em(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(n,e){const t=await cE(n,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await hE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&Di(n.emulatorConfig.host)&&(f.credentials="include"),uE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZA(n,e){return Da(n,"POST","/v2/accounts:revokeToken",Cm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=w_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await JA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new _a;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Ne(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Em(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Dp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GA(this,e)}reload(){return XA(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await Wl(this,qA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,y;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,A=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,z=(m=t.createdAt)!==null&&m!==void 0?m:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:q,emailVerified:Z,isAnonymous:K,providerData:J,stsTokenManager:R}=t;Ne(q&&R,e,"internal-error");const b=_a.fromJSON(this.name,R);Ne(typeof q=="string",e,"internal-error"),cs(T,e.name),cs(_,e.name),Ne(typeof Z=="boolean",e,"internal-error"),Ne(typeof K=="boolean",e,"internal-error"),cs(P,e.name),cs(O,e.name),cs(D,e.name),cs(A,e.name),cs(z,e.name),cs(G,e.name);const k=new Ir({uid:q,auth:e,email:_,emailVerified:Z,displayName:T,isAnonymous:K,photoURL:O,phoneNumber:P,tenantId:D,stsTokenManager:b,createdAt:z,lastLoginAt:G});return J&&Array.isArray(J)&&(k.providerData=J.map(I=>Object.assign({},I))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new _a;s.updateFromServerResponse(t);const a=new Ir({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ne(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?dE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new _a;d.updateFromIdToken(r);const f=new Ir({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;function Ci(n){ki(n instanceof Function,"Expected a class definition");let e=E_.get(n);return e?(ki(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,E_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fE.type="NONE";const T_=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n,e,t){return`firebase:${n}:${e}:${t}`}class wa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Xc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xc("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new wa(Ci(T_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ci(T_);const u=Xc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(u);if(y){let T;if(typeof y=="string"){const _=await fh(e,{idToken:y}).catch(()=>{});if(!_)break;T=await Ir._fromGetAccountInfoResponse(e,_,y)}else T=Ir._fromJSON(e,y);m!==a&&(d=T),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new wa(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new wa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(wE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pE(n=fn()){return/firefox\//i.test(n)}function mE(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(n=fn()){return/crios\//i.test(n)}function vE(n=fn()){return/iemobile/i.test(n)}function yE(n=fn()){return/android/i.test(n)}function _E(n=fn()){return/blackberry/i.test(n)}function wE(n=fn()){return/webos/i.test(n)}function Am(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eR(n=fn()){var e;return Am(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tR(){return mb()&&document.documentMode===10}function EE(n=fn()){return Am(n)||yE(n)||wE(n)||_E(n)||/windows phone/i.test(n)||vE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n,e=[]){let t;switch(n){case"Browser":t=S_(fn());break;case"Worker":t=`${S_(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(n,e={}){return Da(n,"GET","/v2/passwordPolicy",Cm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=6;class sR{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:iR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new nR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ci(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(ws(this));const t=e?ct(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rR(this),t=new sR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ci(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[Ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&LA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Va(n){return ct(n)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sb(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aR(n){Rm=n}function lR(n){return Rm.loadJS(n)}function uR(){return Rm.gapiScript}function cR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n,e){const t=au(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(yo(a,e??{}))return s;ti(s,"already-initialized")}return t.initialize({options:e})}function dR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ci);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fR(n,e,t){const r=Va(n);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=SE(e),{host:u,port:d}=pR(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},y=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(yo(m,r.config.emulator)&&yo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Di(u)?(Bh(`${a}//${u}${f}`),$h("Auth",!0)):mR()}function SE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pR(n){const e=SE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:C_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:C_(u)}}}function C_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,t){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n,e){return HA(n,"POST","/v1/accounts:signInWithIdp",Cm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="http://localhost";class _o extends IE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Em(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new _o(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ea(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:gR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Wh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends uu{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Si.credential(t,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends uu{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends uu{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ps.credential(t,r)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Ir._fromIdTokenResponse(e,r,s),u=b_(r);return new Ca({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=b_(r);return new Ca({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function b_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends kr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new mh(e,t,r,s)}}function CE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,a,e,r):a})}async function vR(n,e,t=!1){const r=await Wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ca._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,e,t=!1){const{auth:r}=n;if(Nn(r.app))return Promise.reject(ws(r));const s="reauthenticate";try{const a=await Wl(n,CE(r,s,e,n),t);Ne(a.idToken,r,"internal-error");const u=bm(a.idToken);Ne(u,r,"internal-error");const{sub:d}=u;return Ne(n.uid===d,r,"user-mismatch"),Ca._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ti(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(n,e,t=!1){if(Nn(n.app))return Promise.reject(ws(n));const r="signIn",s=await CE(n,r,e),a=await Ca._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(n,e){return ct(n).setPersistence(e)}function bE(n,e,t,r){return ct(n).onIdTokenChanged(e,t,r)}function ER(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function qh(n){return ct(n).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=1e3,SR=10;class RE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);tR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},TR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const PE=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kE.type="SESSION";const xE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await IR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Pm("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(T){const _=T;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(_.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function bR(n){Qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function AR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PR(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebaseLocalStorageDb",kR=1,vh="firebaseLocalStorage",DE="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function xR(){const n=indexedDB.deleteDatabase(OE);return new cu(n).toPromise()}function Vp(){const n=indexedDB.open(OE,kR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:DE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await xR(),e(await Vp()))})})}async function A_(n,e,t){const r=Kh(n,!0).put({[DE]:e,value:t});return new cu(r).toPromise()}async function NR(n,e){const t=Kh(n,!1).get(e),r=await new cu(t).toPromise();return r===void 0?null:r.value}function R_(n,e){const t=Kh(n,!0).delete(e);return new cu(t).toPromise()}const OR=800,DR=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>DR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(PR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AR(),!this.activeServiceWorker)return;this.sender=new CR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await A_(e,gh,"1"),await R_(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>A_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>NR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>R_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Kh(s,!1).getAll();return new cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const VR=VE;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){return e?Ci(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends IE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MR(n){return _R(n.auth,new xm(n),n.bypassAuthState)}function LR(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),yR(t,new xm(n),n.bypassAuthState)}async function jR(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),vR(t,new xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MR;case"linkViaPopup":case"linkViaRedirect":return jR;case"reauthViaPopup":case"reauthViaRedirect":return LR;default:ti(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new lu(2e3,1e4);async function UR(n,e,t){if(Nn(n.app))return Promise.reject(br(n,"operation-not-supported-in-this-environment"));const r=Va(n);lE(n,e,Wh);const s=km(r,t);return new fo(r,"signInViaPopup",e,s).executeNotNull()}class fo extends ME{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FR.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="pendingRedirect",Yc=new Map;class BR extends ME{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const r=await $R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $R(n,e){const t=jE(e),r=LE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function HR(n,e){return LE(n)._set(jE(e),"true")}function WR(n,e){Yc.set(n._key(),e)}function LE(n){return Ci(n._redirectPersistence)}function jE(n){return Xc(zR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e,t){return GR(n,e,t)}async function GR(n,e,t){if(Nn(n.app))return Promise.reject(ws(n));const r=Va(n);lE(n,e,Wh),await r._initializationPromise;const s=km(r,t);return await HR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function KR(n,e){return await Va(n)._initializationPromise,FE(n,e,!1)}async function FE(n,e,t=!1){if(Nn(n.app))return Promise.reject(ws(n));const r=Va(n),s=km(r,e),u=await new BR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=600*1e3;class XR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!UE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(br(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QR&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e={}){return Da(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eP=/^https?/;async function tP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JR(n);for(const t of e)try{if(nP(t))return}catch{}ti(n,"unauthorized-domain")}function nP(n){const e=Op(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!eP.test(t))return!1;if(ZR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new lu(3e4,6e4);function k_(){const n=Qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iP(n){return new Promise((e,t)=>{var r,s,a;function u(){k_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k_(),t(br(n,"network-request-failed"))},timeout:rP.get()})}if(!((s=(r=Qr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Qr().gapi)===null||a===void 0)&&a.load)u();else{const d=cR("iframefcb");return Qr()[d]=()=>{gapi.load?u():t(br(n,"network-request-failed"))},lR(`${uR()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function sP(n){return Jc=Jc||iP(n),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new lu(5e3,15e3),aP="__/auth/iframe",lP="emulator/auth/iframe",uP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hP(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Im(e,lP):`https://${n.config.authDomain}/${aP}`,r={apiKey:e.apiKey,appName:n.name,v:Co},s=cP.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ou(r).slice(1)}`}async function dP(n){const e=await sP(n),t=Qr().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:hP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uP,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=br(n,"network-request-failed"),d=Qr().setTimeout(()=>{a(u)},oP.get());function f(){Qr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pP=500,mP=600,gP="_blank",vP="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yP(n,e,t,r=pP,s=mP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},fP),{width:r.toString(),height:s.toString(),top:a,left:u}),m=fn().toLowerCase();t&&(d=gE(m)?gP:t),pE(m)&&(e=e||vP,f.scrollbars="yes");const y=Object.entries(f).reduce((_,[P,O])=>`${_}${P}=${O},`,"");if(eR(m)&&d!=="_self")return _P(e||"",d),new x_(null);const T=window.open(e||"",d,y);Ne(T,n,"popup-blocked");try{T.focus()}catch{}return new x_(T)}function _P(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="__/auth/handler",EP="emulator/auth/handler",TP=encodeURIComponent("fac");async function N_(n,e,t,r,s,a){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Co,eventId:s};if(e instanceof Wh){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Tb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))u[y]=T}if(e instanceof uu){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),m=f?`#${TP}=${encodeURIComponent(f)}`:"";return`${SP(n)}?${ou(d).slice(1)}${m}`}function SP({config:n}){return n.emulator?Im(n,EP):`https://${n.authDomain}/${wP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class IP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xE,this._completeRedirectFn=FE,this._overrideRedirectResult=WR}async _openPopup(e,t,r,s){var a;ki((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await N_(e,t,r,Op(),s);return yP(e,u,Pm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await N_(e,t,r,Op(),s);return bR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ki(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await dP(e),r=new XR(e);return t.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(op,{type:op},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[op];u!==void 0&&t(!!u),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return EE()||mE()||Am()}}const CP=IP;var O_="@firebase/auth",D_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RP(n){Ss(new Ri("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Ne(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(n)},m=new oR(r,s,a,f);return dR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ss(new Ri("auth-internal",e=>{const t=Va(e.getProvider("auth").getImmediate());return(r=>new bP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(O_,D_,AP(n)),ir(O_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=300,kP=Z0("authIdTokenMaxAge")||PP;let V_=null;const xP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>kP)return;const s=t==null?void 0:t.token;V_!==s&&(V_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NP(n=Hh()){const e=au(n,"auth");if(e.isInitialized())return e.getImmediate();const t=hR(n,{popupRedirectResolver:CP,persistence:[VR,PE,xE]}),r=Z0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=xP(a.toString());ER(t,u,()=>u(t.currentUser)),bE(t,d=>u(d))}}const s=Y0("auth");return s&&fR(t,`http://${s}`),t}function OP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}aR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=br("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",OP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RP("Browser");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,zE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,b){function k(){}k.prototype=b.prototype,R.D=b.prototype,R.prototype=new k,R.prototype.constructor=R,R.C=function(I,L,F){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return b.prototype[L].apply(I,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,b,k){k||(k=0);var I=Array(16);if(typeof b=="string")for(var L=0;16>L;++L)I[L]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(L=0;16>L;++L)I[L]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=R.g[0],k=R.g[1],L=R.g[2];var F=R.g[3],N=b+(F^k&(L^F))+I[0]+3614090360&4294967295;b=k+(N<<7&4294967295|N>>>25),N=F+(L^b&(k^L))+I[1]+3905402710&4294967295,F=b+(N<<12&4294967295|N>>>20),N=L+(k^F&(b^k))+I[2]+606105819&4294967295,L=F+(N<<17&4294967295|N>>>15),N=k+(b^L&(F^b))+I[3]+3250441966&4294967295,k=L+(N<<22&4294967295|N>>>10),N=b+(F^k&(L^F))+I[4]+4118548399&4294967295,b=k+(N<<7&4294967295|N>>>25),N=F+(L^b&(k^L))+I[5]+1200080426&4294967295,F=b+(N<<12&4294967295|N>>>20),N=L+(k^F&(b^k))+I[6]+2821735955&4294967295,L=F+(N<<17&4294967295|N>>>15),N=k+(b^L&(F^b))+I[7]+4249261313&4294967295,k=L+(N<<22&4294967295|N>>>10),N=b+(F^k&(L^F))+I[8]+1770035416&4294967295,b=k+(N<<7&4294967295|N>>>25),N=F+(L^b&(k^L))+I[9]+2336552879&4294967295,F=b+(N<<12&4294967295|N>>>20),N=L+(k^F&(b^k))+I[10]+4294925233&4294967295,L=F+(N<<17&4294967295|N>>>15),N=k+(b^L&(F^b))+I[11]+2304563134&4294967295,k=L+(N<<22&4294967295|N>>>10),N=b+(F^k&(L^F))+I[12]+1804603682&4294967295,b=k+(N<<7&4294967295|N>>>25),N=F+(L^b&(k^L))+I[13]+4254626195&4294967295,F=b+(N<<12&4294967295|N>>>20),N=L+(k^F&(b^k))+I[14]+2792965006&4294967295,L=F+(N<<17&4294967295|N>>>15),N=k+(b^L&(F^b))+I[15]+1236535329&4294967295,k=L+(N<<22&4294967295|N>>>10),N=b+(L^F&(k^L))+I[1]+4129170786&4294967295,b=k+(N<<5&4294967295|N>>>27),N=F+(k^L&(b^k))+I[6]+3225465664&4294967295,F=b+(N<<9&4294967295|N>>>23),N=L+(b^k&(F^b))+I[11]+643717713&4294967295,L=F+(N<<14&4294967295|N>>>18),N=k+(F^b&(L^F))+I[0]+3921069994&4294967295,k=L+(N<<20&4294967295|N>>>12),N=b+(L^F&(k^L))+I[5]+3593408605&4294967295,b=k+(N<<5&4294967295|N>>>27),N=F+(k^L&(b^k))+I[10]+38016083&4294967295,F=b+(N<<9&4294967295|N>>>23),N=L+(b^k&(F^b))+I[15]+3634488961&4294967295,L=F+(N<<14&4294967295|N>>>18),N=k+(F^b&(L^F))+I[4]+3889429448&4294967295,k=L+(N<<20&4294967295|N>>>12),N=b+(L^F&(k^L))+I[9]+568446438&4294967295,b=k+(N<<5&4294967295|N>>>27),N=F+(k^L&(b^k))+I[14]+3275163606&4294967295,F=b+(N<<9&4294967295|N>>>23),N=L+(b^k&(F^b))+I[3]+4107603335&4294967295,L=F+(N<<14&4294967295|N>>>18),N=k+(F^b&(L^F))+I[8]+1163531501&4294967295,k=L+(N<<20&4294967295|N>>>12),N=b+(L^F&(k^L))+I[13]+2850285829&4294967295,b=k+(N<<5&4294967295|N>>>27),N=F+(k^L&(b^k))+I[2]+4243563512&4294967295,F=b+(N<<9&4294967295|N>>>23),N=L+(b^k&(F^b))+I[7]+1735328473&4294967295,L=F+(N<<14&4294967295|N>>>18),N=k+(F^b&(L^F))+I[12]+2368359562&4294967295,k=L+(N<<20&4294967295|N>>>12),N=b+(k^L^F)+I[5]+4294588738&4294967295,b=k+(N<<4&4294967295|N>>>28),N=F+(b^k^L)+I[8]+2272392833&4294967295,F=b+(N<<11&4294967295|N>>>21),N=L+(F^b^k)+I[11]+1839030562&4294967295,L=F+(N<<16&4294967295|N>>>16),N=k+(L^F^b)+I[14]+4259657740&4294967295,k=L+(N<<23&4294967295|N>>>9),N=b+(k^L^F)+I[1]+2763975236&4294967295,b=k+(N<<4&4294967295|N>>>28),N=F+(b^k^L)+I[4]+1272893353&4294967295,F=b+(N<<11&4294967295|N>>>21),N=L+(F^b^k)+I[7]+4139469664&4294967295,L=F+(N<<16&4294967295|N>>>16),N=k+(L^F^b)+I[10]+3200236656&4294967295,k=L+(N<<23&4294967295|N>>>9),N=b+(k^L^F)+I[13]+681279174&4294967295,b=k+(N<<4&4294967295|N>>>28),N=F+(b^k^L)+I[0]+3936430074&4294967295,F=b+(N<<11&4294967295|N>>>21),N=L+(F^b^k)+I[3]+3572445317&4294967295,L=F+(N<<16&4294967295|N>>>16),N=k+(L^F^b)+I[6]+76029189&4294967295,k=L+(N<<23&4294967295|N>>>9),N=b+(k^L^F)+I[9]+3654602809&4294967295,b=k+(N<<4&4294967295|N>>>28),N=F+(b^k^L)+I[12]+3873151461&4294967295,F=b+(N<<11&4294967295|N>>>21),N=L+(F^b^k)+I[15]+530742520&4294967295,L=F+(N<<16&4294967295|N>>>16),N=k+(L^F^b)+I[2]+3299628645&4294967295,k=L+(N<<23&4294967295|N>>>9),N=b+(L^(k|~F))+I[0]+4096336452&4294967295,b=k+(N<<6&4294967295|N>>>26),N=F+(k^(b|~L))+I[7]+1126891415&4294967295,F=b+(N<<10&4294967295|N>>>22),N=L+(b^(F|~k))+I[14]+2878612391&4294967295,L=F+(N<<15&4294967295|N>>>17),N=k+(F^(L|~b))+I[5]+4237533241&4294967295,k=L+(N<<21&4294967295|N>>>11),N=b+(L^(k|~F))+I[12]+1700485571&4294967295,b=k+(N<<6&4294967295|N>>>26),N=F+(k^(b|~L))+I[3]+2399980690&4294967295,F=b+(N<<10&4294967295|N>>>22),N=L+(b^(F|~k))+I[10]+4293915773&4294967295,L=F+(N<<15&4294967295|N>>>17),N=k+(F^(L|~b))+I[1]+2240044497&4294967295,k=L+(N<<21&4294967295|N>>>11),N=b+(L^(k|~F))+I[8]+1873313359&4294967295,b=k+(N<<6&4294967295|N>>>26),N=F+(k^(b|~L))+I[15]+4264355552&4294967295,F=b+(N<<10&4294967295|N>>>22),N=L+(b^(F|~k))+I[6]+2734768916&4294967295,L=F+(N<<15&4294967295|N>>>17),N=k+(F^(L|~b))+I[13]+1309151649&4294967295,k=L+(N<<21&4294967295|N>>>11),N=b+(L^(k|~F))+I[4]+4149444226&4294967295,b=k+(N<<6&4294967295|N>>>26),N=F+(k^(b|~L))+I[11]+3174756917&4294967295,F=b+(N<<10&4294967295|N>>>22),N=L+(b^(F|~k))+I[2]+718787259&4294967295,L=F+(N<<15&4294967295|N>>>17),N=k+(F^(L|~b))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(L+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+F&4294967295}r.prototype.u=function(R,b){b===void 0&&(b=R.length);for(var k=b-this.blockSize,I=this.B,L=this.h,F=0;F<b;){if(L==0)for(;F<=k;)s(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<b;)if(I[L++]=R.charCodeAt(F++),L==this.blockSize){s(this,I),L=0;break}}else for(;F<b;)if(I[L++]=R[F++],L==this.blockSize){s(this,I),L=0;break}}this.h=L,this.o+=b},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;var k=8*this.o;for(b=R.length-8;b<R.length;++b)R[b]=k&255,k/=256;for(this.u(R),R=Array(16),b=k=0;4>b;++b)for(var I=0;32>I;I+=8)R[k++]=this.g[b]>>>I&255;return R};function a(R,b){var k=d;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=b(R)}function u(R,b){this.h=b;for(var k=[],I=!0,L=R.length-1;0<=L;L--){var F=R[L]|0;I&&F==b||(k[L]=F,I=!1)}this.g=k}var d={};function f(R){return-128<=R&&128>R?a(R,function(b){return new u([b|0],0>b?-1:0)}):new u([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return A(m(-R));for(var b=[],k=1,I=0;R>=k;I++)b[I]=R/k|0,k*=4294967296;return new u(b,0)}function y(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return A(y(R.substring(1),b));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(b,8)),I=T,L=0;L<R.length;L+=8){var F=Math.min(8,R.length-L),N=parseInt(R.substring(L,L+F),b);8>F?(F=m(Math.pow(b,F)),I=I.j(F).add(m(N))):(I=I.j(k),I=I.add(m(N)))}return I}var T=f(0),_=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-A(this).m();for(var R=0,b=1,k=0;k<this.g.length;k++){var I=this.i(k);R+=(0<=I?I:4294967296+I)*b,b*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(D(this))return"-"+A(this).toString(R);for(var b=m(Math.pow(R,6)),k=this,I="";;){var L=Z(k,b).g;k=z(k,L.j(b));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(R);if(k=L,O(k))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(var b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function D(R){return R.h==-1}n.l=function(R){return R=z(this,R),D(R)?-1:O(R)?0:1};function A(R){for(var b=R.g.length,k=[],I=0;I<b;I++)k[I]=~R.g[I];return new u(k,~R.h).add(_)}n.abs=function(){return D(this)?A(this):this},n.add=function(R){for(var b=Math.max(this.g.length,R.g.length),k=[],I=0,L=0;L<=b;L++){var F=I+(this.i(L)&65535)+(R.i(L)&65535),N=(F>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);I=N>>>16,F&=65535,N&=65535,k[L]=N<<16|F}return new u(k,k[k.length-1]&-2147483648?-1:0)};function z(R,b){return R.add(A(b))}n.j=function(R){if(O(this)||O(R))return T;if(D(this))return D(R)?A(this).j(A(R)):A(A(this).j(R));if(D(R))return A(this.j(A(R)));if(0>this.l(P)&&0>R.l(P))return m(this.m()*R.m());for(var b=this.g.length+R.g.length,k=[],I=0;I<2*b;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var L=0;L<R.g.length;L++){var F=this.i(I)>>>16,N=this.i(I)&65535,he=R.i(L)>>>16,Ue=R.i(L)&65535;k[2*I+2*L]+=N*Ue,G(k,2*I+2*L),k[2*I+2*L+1]+=F*Ue,G(k,2*I+2*L+1),k[2*I+2*L+1]+=N*he,G(k,2*I+2*L+1),k[2*I+2*L+2]+=F*he,G(k,2*I+2*L+2)}for(I=0;I<b;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=b;I<2*b;I++)k[I]=0;return new u(k,0)};function G(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function q(R,b){this.g=R,this.h=b}function Z(R,b){if(O(b))throw Error("division by zero");if(O(R))return new q(T,T);if(D(R))return b=Z(A(R),b),new q(A(b.g),A(b.h));if(D(b))return b=Z(R,A(b)),new q(A(b.g),b.h);if(30<R.g.length){if(D(R)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var k=_,I=b;0>=I.l(R);)k=K(k),I=K(I);var L=J(k,1),F=J(I,1);for(I=J(I,2),k=J(k,2);!O(I);){var N=F.add(I);0>=N.l(R)&&(L=L.add(k),F=N),I=J(I,1),k=J(k,1)}return b=z(R,L.j(b)),new q(L,b)}for(L=T;0<=R.l(b);){for(k=Math.max(1,Math.floor(R.m()/b.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=m(k),N=F.j(b);D(N)||0<N.l(R);)k-=I,F=m(k),N=F.j(b);O(F)&&(F=_),L=L.add(F),R=z(R,N)}return new q(L,R)}n.A=function(R){return Z(this,R).h},n.and=function(R){for(var b=Math.max(this.g.length,R.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)&R.i(I);return new u(k,this.h&R.h)},n.or=function(R){for(var b=Math.max(this.g.length,R.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)|R.i(I);return new u(k,this.h|R.h)},n.xor=function(R){for(var b=Math.max(this.g.length,R.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)^R.i(I);return new u(k,this.h^R.h)};function K(R){for(var b=R.g.length+1,k=[],I=0;I<b;I++)k[I]=R.i(I)<<1|R.i(I-1)>>>31;return new u(k,R.h)}function J(R,b){var k=b>>5;b%=32;for(var I=R.g.length-k,L=[],F=0;F<I;F++)L[F]=0<b?R.i(F+k)>>>b|R.i(F+k+1)<<32-b:R.i(F+k);return new u(L,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,Es=u}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,kl,$E,Zc,Mp,HE,WE,qE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var w=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var $=c[C];if(!($ in w))break e;w=w[$]}c=c[c.length-1],C=w[c],g=g(C),g!=C&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,C=!1,$={next:function(){if(!C&&w<c.length){var X=w++;return{value:g(X,c[X]),done:!1}}return C=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,w){return c.call.apply(c.bind,arguments)}function T(c,g,w){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,C),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function _(c,g,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,_.apply(null,arguments)}function P(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function O(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(C,$,X){for(var ue=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ue[rt-2]=arguments[rt];return g.prototype[$].apply(C,ue)}}function D(c){const g=c.length;if(0<g){const w=Array(g);for(let C=0;C<g;C++)w[C]=c[C];return w}return[]}function A(c,g){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(f(C)){const $=c.length||0,X=C.length||0;c.length=$+X;for(let ue=0;ue<X;ue++)c[$+ue]=C[ue]}else c.push(C)}}class z{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var K=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function J(c,g,w){for(const C in c)g.call(w,c[C],C,c)}function R(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function b(c){const g={};for(const w in c)g[w]=c[w];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,g){let w,C;for(let $=1;$<arguments.length;$++){C=arguments[$];for(w in C)c[w]=C[w];for(let X=0;X<k.length;X++)w=k[X],Object.prototype.hasOwnProperty.call(C,w)&&(c[w]=C[w])}}function L(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function F(c){d.setTimeout(()=>{throw c},0)}function N(){var c=de;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class he{constructor(){this.h=this.g=null}add(g,w){const C=Ue.get();C.set(g,w),this.h?this.h.next=C:this.g=C,this.h=C}}var Ue=new z(()=>new Ve,c=>c.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,ne=!1,de=new he,ae=()=>{const c=d.Promise.resolve(void 0);Oe=()=>{c.then(B)}};var B=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(w){F(w)}var g=Ue;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ne=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,g),d.removeEventListener("test",w,g)}catch{}return c})();function Re(c,g){if(ce.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(K){e:{try{Z(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:me[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}O(Re,ce);var me={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Be(c,g,w,C,$){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!C,this.ha=$,this.key=++Me,this.da=this.fa=!1}function gt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bt(c){this.src=c,this.g={},this.h=0}bt.prototype.add=function(c,g,w,C,$){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var ue=vt(c,g,C,$);return-1<ue?(g=c[ue],w||(g.fa=!1)):(g=new Be(g,this.src,X,!!C,$),g.fa=w,c.push(g)),g};function Wn(c,g){var w=g.type;if(w in c.g){var C=c.g[w],$=Array.prototype.indexOf.call(C,g,void 0),X;(X=0<=$)&&Array.prototype.splice.call(C,$,1),X&&(gt(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function vt(c,g,w,C){for(var $=0;$<c.length;++$){var X=c[$];if(!X.da&&X.listener==g&&X.capture==!!w&&X.ha==C)return $}return-1}var He="closure_lm_"+(1e6*Math.random()|0),sr={};function Mi(c,g,w,C,$){if(Array.isArray(g)){for(var X=0;X<g.length;X++)Mi(c,g[X],w,C,$);return null}return w=ai(w),c&&c[Fe]?c.K(g,w,m(C)?!!C.capture:!1,$):Li(c,g,w,!1,C,$)}function Li(c,g,w,C,$,X){if(!g)throw Error("Invalid event type");var ue=m($)?!!$.capture:!!$,rt=Or(c);if(rt||(c[He]=rt=new bt(c)),w=rt.add(g,w,C,ue,X),w.proxy)return w;if(C=Po(),w.proxy=C,C.src=c,C.listener=w,c.addEventListener)_e||($=ue),$===void 0&&($=!1),c.addEventListener(g.toString(),C,$);else if(c.attachEvent)c.attachEvent(qn(g.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Po(){function c(w){return g.call(c.src,c.listener,w)}const g=Ds;return c}function si(c,g,w,C,$){if(Array.isArray(g))for(var X=0;X<g.length;X++)si(c,g[X],w,C,$);else C=m(C)?!!C.capture:!!C,w=ai(w),c&&c[Fe]?(c=c.i,g=String(g).toString(),g in c.g&&(X=c.g[g],w=vt(X,w,C,$),-1<w&&(gt(X[w]),Array.prototype.splice.call(X,w,1),X.length==0&&(delete c.g[g],c.h--)))):c&&(c=Or(c))&&(g=c.g[g.toString()],c=-1,g&&(c=vt(g,w,C,$)),(w=-1<c?g[c]:null)&&or(w))}function or(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Fe])Wn(g.i,c);else{var w=c.type,C=c.proxy;g.removeEventListener?g.removeEventListener(w,C,c.capture):g.detachEvent?g.detachEvent(qn(w),C):g.addListener&&g.removeListener&&g.removeListener(C),(w=Or(g))?(Wn(w,c),w.h==0&&(w.src=null,g[He]=null)):gt(c)}}}function qn(c){return c in sr?sr[c]:sr[c]="on"+c}function Ds(c,g){if(c.da)c=!0;else{g=new Re(g,this);var w=c.listener,C=c.ha||c.src;c.fa&&or(c),c=w.call(C,g)}return c}function Or(c){return c=c[He],c instanceof bt?c:null}var oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ai(c){return typeof c=="function"?c:(c[oi]||(c[oi]=function(g){return c.handleEvent(g)}),c[oi])}function At(){Y.call(this),this.i=new bt(this),this.M=this,this.F=null}O(At,Y),At.prototype[Fe]=!0,At.prototype.removeEventListener=function(c,g,w,C){si(this,c,g,w,C)};function Rt(c,g){var w,C=c.F;if(C)for(w=[];C;C=C.F)w.push(C);if(c=c.M,C=g.type||g,typeof g=="string")g=new ce(g,c);else if(g instanceof ce)g.target=g.target||c;else{var $=g;g=new ce(C,c),I(g,$)}if($=!0,w)for(var X=w.length-1;0<=X;X--){var ue=g.g=w[X];$=ar(ue,C,!0,g)&&$}if(ue=g.g=c,$=ar(ue,C,!0,g)&&$,$=ar(ue,C,!1,g)&&$,w)for(X=0;X<w.length;X++)ue=g.g=w[X],$=ar(ue,C,!1,g)&&$}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],C=0;C<w.length;C++)gt(w[C]);delete c.g[g],c.h--}}this.F=null},At.prototype.K=function(c,g,w,C){return this.i.add(String(c),g,!1,w,C)},At.prototype.L=function(c,g,w,C){return this.i.add(String(c),g,!0,w,C)};function ar(c,g,w,C){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,X=0;X<g.length;++X){var ue=g[X];if(ue&&!ue.da&&ue.capture==w){var rt=ue.listener,Ft=ue.ha||ue.src;ue.fa&&Wn(c.i,ue),$=rt.call(Ft,C)!==!1&&$}}return $&&!C.defaultPrevented}function Tn(c,g,w){if(typeof c=="function")w&&(c=_(c,w));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function We(c){c.g=Tn(()=>{c.g=null,c.i&&(c.i=!1,We(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Dr extends Y{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(c){Y.call(this),this.h=c,this.g={}}O(li,Y);var Vs=[];function Ms(c){J(c.g,function(g,w){this.g.hasOwnProperty(w)&&or(g)},c),c.g={}}li.prototype.N=function(){li.aa.N.call(this),Ms(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ls=d.JSON.stringify,js=d.JSON.parse,Fs=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ui(){}ui.prototype.h=null;function ji(c){return c.h||(c.h=c.i())}function Fi(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){ce.call(this,"d")}O(Gn,ce);function Ui(){ce.call(this,"c")}O(Ui,ce);var M={},le=null;function Te(){return le=le||new At}M.La="serverreachability";function it(c){ce.call(this,M.La,c)}O(it,ce);function Ht(c){const g=Te();Rt(g,new it(g))}M.STAT_EVENT="statevent";function Us(c,g){ce.call(this,M.STAT_EVENT,c),this.stat=g}O(Us,ce);function yt(c){const g=Te();Rt(g,new Us(g,c))}M.Ma="timingevent";function ko(c,g){ce.call(this,M.Ma,c),this.size=g}O(ko,ce);function lr(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function zs(){this.g=!0}zs.prototype.xa=function(){this.g=!1};function Bs(c,g,w,C,$,X){c.info(function(){if(c.g)if(X)for(var ue="",rt=X.split("&"),Ft=0;Ft<rt.length;Ft++){var Qe=rt[Ft].split("=");if(1<Qe.length){var Wt=Qe[0];Qe=Qe[1];var Nt=Wt.split("_");ue=2<=Nt.length&&Nt[1]=="type"?ue+(Wt+"="+Qe+"&"):ue+(Wt+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+C+") [attempt "+$+"]: "+g+`
`+w+`
`+ue})}function xo(c,g,w,C,$,X,ue){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+$+"]: "+g+`
`+w+`
`+X+" "+ue})}function ur(c,g,w,C){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ed(c,w)+(C?" "+C:"")})}function Ha(c,g){c.info(function(){return"TIMEOUT: "+g})}zs.prototype.info=function(){};function Ed(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var C=w[c];if(!(2>C.length)){var $=C[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Ls(w)}catch{return g}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function $s(){}O($s,ui),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},cr=new $s;function hr(c,g,w,C){this.j=c,this.i=g,this.l=w,this.R=C||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Wa={},Oo={};function Do(c,g,w){c.L=1,c.v=Wi(Ln(g)),c.m=w,c.P=!0,qa(c,null)}function qa(c,g){c.F=Date.now(),at(c),c.A=Ln(c.v);var w=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Gi(w.i,"t",C),c.C=0,w=c.j.J,c.h=new Eu,c.g=Fu(c.j,w?g:null,!c.m),0<c.O&&(c.M=new Dr(_(c.Y,c,c.g),c.O)),g=c.U,w=c.g,C=c.ca;var $="readystatechange";Array.isArray($)||($&&(Vs[0]=$.toString()),$=Vs);for(var X=0;X<$.length;X++){var ue=Mi(w,$[X],C||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ht(),Bs(c.i,c.u,c.A,c.l,c.R,c.m)}hr.prototype.ca=function(c){c=c.target;const g=this.M;g&&In(c)==3?g.j():this.Y(c)},hr.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=In(this.g);var g=this.g.Ba();const Xn=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||Nt!=4||g==7||(g==8||0>=Xn?Ht(3):Ht(2)),Hs(this);var w=this.g.Z();this.X=w;t:if(Tu(this)){var C=Ja(this.g);c="";var $=C.length,X=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kn(this),zi(this);var ue="";break t}this.h.i=new d.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(C[g],{stream:!(X&&g==$-1)});C.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=w==200,xo(this.i,this.u,this.A,this.l,this.R,Nt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Ft=this.g;if((rt=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(rt)){var Qe=rt;break t}}Qe=null}if(w=Qe)ur(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,yt(12),Kn(this),zi(this);break e}}if(this.P){w=!0;let Fn;for(;!this.J&&this.C<ue.length;)if(Fn=Td(this,ue),Fn==Oo){Nt==4&&(this.s=4,yt(14),w=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Wa){this.s=4,yt(15),ur(this.i,this.l,ue,"[Invalid Chunk]"),w=!1;break}else ur(this.i,this.l,Fn,null),Ga(this,Fn);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ue.length!=0||this.h.h||(this.s=1,yt(16),w=!1),this.o=this.o&&w,!w)ur(this.i,this.l,ue,"[Invalid Chunked Response]"),Kn(this),zi(this);else if(0<ue.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),el(Wt),Wt.M=!0,yt(11))}}else ur(this.i,this.l,ue,null),Ga(this,ue);Nt==4&&Kn(this),this.o&&!this.J&&(Nt==4?Wo(this.j,this):(this.o=!1,at(this)))}else Uo(this.g),w==400&&0<ue.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Kn(this),zi(this)}}}catch{}finally{}};function Tu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Td(c,g){var w=c.C,C=g.indexOf(`
`,w);return C==-1?Oo:(w=Number(g.substring(w,C)),isNaN(w)?Wa:(C+=1,C+w>g.length?Oo:(g=g.slice(C,C+w),c.C=C+w,g)))}hr.prototype.cancel=function(){this.J=!0,Kn(this)};function at(c){c.S=Date.now()+c.I,Su(c,c.I)}function Su(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=lr(_(c.ba,c),g)}function Hs(c){c.B&&(d.clearTimeout(c.B),c.B=null)}hr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ha(this.i,this.A),this.L!=2&&(Ht(),yt(17)),Kn(this),this.s=2,zi(this)):Su(this,this.S-c)};function zi(c){c.j.G==0||c.J||Wo(c.j,c)}function Kn(c){Hs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ms(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ga(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||mn(w.h,c))){if(!c.K&&mn(w.h,c)&&w.G==3){try{var C=w.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var $=C;if($[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Ho(w),gr(w);else break e;$o(w),yt(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=lr(_(w.Za,w),6e3));if(1>=Cu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else pi(w,11)}else if((c.K||w.g==c)&&Ho(w),!G(g))for($=w.Da.g.parse(g),g=0;g<$.length;g++){let Qe=$[g];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const Wt=Qe[3];Wt!=null&&(w.la=Wt,w.j.info("VER="+w.la));const Nt=Qe[4];Nt!=null&&(w.Aa=Nt,w.j.info("SVER="+w.Aa));const Xn=Qe[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(C=1.5*Xn,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Fn=c.g;if(Fn){const Ys=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ys){var X=C.h;X.g||Ys.indexOf("spdy")==-1&&Ys.indexOf("quic")==-1&&Ys.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ka(X,X.h),X.h=null))}if(C.D){const Go=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(C.ya=Go,st(C.I,C.D,Go))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var ue=c;if(C.qa=ju(C,C.J?C.ia:null,C.W),ue.K){bu(C.h,ue);var rt=ue,Ft=C.L;Ft&&(rt.I=Ft),rt.B&&(Hs(rt),at(rt)),C.g=ue}else Xs(C);0<w.i.length&&jr(w)}else Qe[0]!="stop"&&Qe[0]!="close"||pi(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?pi(w,7):Yt(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}Ht(4)}catch{}}var Iu=class{constructor(c,g){this.g=c,this.map=g}};function Ws(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cu(c){return c.h?1:c.g?c.g.size:0}function mn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ka(c,g){c.g?c.g.add(g):c.h=g}function bu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ws.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return D(c.i)}function Vo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,C=0;C<w;C++)g.push(c[C]);return g}g=[],w=0;for(C in c)g[w++]=c[C];return g}function Mo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const C in c)g[w++]=C;return g}}}function Bi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=Mo(c),C=Vo(c),$=C.length,X=0;X<$;X++)g.call(void 0,C[X],w&&w[X],c)}var qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var C=c[w].indexOf("="),$=null;if(0<=C){var X=c[w].substring(0,C);$=c[w].substring(C+1)}else X=c[w];g(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ci){this.h=c.h,Gs(this,c.j),this.o=c.o,this.g=c.g,$i(this,c.s),this.l=c.l;var g=c.i,w=new Vr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Hi(this,w),this.m=c.m}else c&&(g=String(c).match(qs))?(this.h=!1,Gs(this,g[1]||"",!0),this.o=Ke(g[2]||""),this.g=Ke(g[3]||"",!0),$i(this,g[4]),this.l=Ke(g[5]||"",!0),Hi(this,g[6]||"",!0),this.m=Ke(g[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}ci.prototype.toString=function(){var c=[],g=this.j;g&&c.push(qi(g,Lo,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(qi(g,Lo,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(qi(w,w.charAt(0)=="/"?ku:Pu,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",qi(w,Qa)),c.join("")};function Ln(c){return new ci(c)}function Gs(c,g,w){c.j=w?Ke(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function $i(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Hi(c,g,w){g instanceof Vr?(c.i=g,Mr(c.i,c.h)):(w||(g=qi(g,xu)),c.i=new Vr(g,c.h))}function st(c,g,w){c.i.set(g,w)}function Wi(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ke(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qi(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Ru),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ru(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lo=/[#\/\?@]/g,Pu=/[#\?:]/g,ku=/[#\?]/g,xu=/[#\?@]/g,Qa=/#/g;function Vr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Xt(c){c.g||(c.g=new Map,c.h=0,c.i&&Sd(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=Vr.prototype,n.add=function(c,g){Xt(this),this.i=null,c=Qn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function dr(c,g){Xt(c),g=Qn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function fr(c,g){return Xt(c),g=Qn(c,g),c.g.has(g)}n.forEach=function(c,g){Xt(this),this.g.forEach(function(w,C){w.forEach(function($){c.call(g,$,C,this)},this)},this)},n.na=function(){Xt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let C=0;C<g.length;C++){const $=c[C];for(let X=0;X<$.length;X++)w.push(g[C])}return w},n.V=function(c){Xt(this);let g=[];if(typeof c=="string")fr(this,c)&&(g=g.concat(this.g.get(Qn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Xt(this),this.i=null,c=Qn(this,c),fr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Gi(c,g,w){dr(c,g),0<w.length&&(c.i=null,c.g.set(Qn(c,g),D(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var C=g[w];const X=encodeURIComponent(String(C)),ue=this.V(C);for(C=0;C<ue.length;C++){var $=X;ue[C]!==""&&($+="="+encodeURIComponent(String(ue[C]))),c.push($)}}return this.i=c.join("&")};function Qn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Mr(c,g){g&&!c.j&&(Xt(c),c.i=null,c.g.forEach(function(w,C){var $=C.toLowerCase();C!=$&&(dr(this,C),Gi(this,$,w))},c)),c.j=g}function Id(c,g){const w=new zs;if(d.Image){const C=new Image;C.onload=P(Sn,w,"TestLoadImage: loaded",!0,g,C),C.onerror=P(Sn,w,"TestLoadImage: error",!1,g,C),C.onabort=P(Sn,w,"TestLoadImage: abort",!1,g,C),C.ontimeout=P(Sn,w,"TestLoadImage: timeout",!1,g,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else g(!1)}function Nu(c,g){const w=new zs,C=new AbortController,$=setTimeout(()=>{C.abort(),Sn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:C.signal}).then(X=>{clearTimeout($),X.ok?Sn(w,"TestPingServer: ok",!0,g):Sn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Sn(w,"TestPingServer: error",!1,g)})}function Sn(c,g,w,C,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),C(w)}catch{}}function Cd(){this.g=new Fs}function Ou(c,g,w){const C=w||"";try{Bi(c,function($,X){let ue=$;m($)&&(ue=Ls($)),g.push(C+X+"="+encodeURIComponent(ue))})}catch($){throw g.push(C+"type="+encodeURIComponent("_badmap")),$}}function hi(c){this.l=c.Ub||null,this.j=c.eb||!1}O(hi,ui),hi.prototype.g=function(){return new Ks(this.l,this.j)},hi.prototype.i=(function(c){return function(){return c}})({});function Ks(c,g){At.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Ks,At),n=Ks.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,mr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Du(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Du(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?pr(this):mr(this),this.readyState==3&&Du(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},n.Qa=function(c){this.g&&(this.response=c,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function mr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function di(c){let g="";return J(c,function(w,C){g+=C,g+=":",g+=w,g+=`\r
`}),g}function Ki(c,g,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=di(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):st(c,g,w))}function pt(c){At.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(pt,At);var bd=/^https?$/i,Xa=["POST","PUT"];n=pt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?ji(this.o):ji(cr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(X){Qs(this,X);return}if(c=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var $ in C)w.set($,C[$]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const X of C.keys())w.set(X,C.get(X));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xa,g,void 0))||C||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of w)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Qs(this,X)}};function Qs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,jo(c),jn(c)}function jo(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),jn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jn(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(c){if(c.h&&typeof u<"u"&&(!c.v[1]||In(c)!=4||c.Z()!=2)){if(c.u&&In(c)==4)Tn(c.Ea,0,c);else if(Rt(c,"readystatechange"),In(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var C;if(C=ue===0){var $=String(c.D).match(qs)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),C=!bd.test($?$.toLowerCase():"")}w=C}if(w)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var X=2<In(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",jo(c)}}finally{jn(c)}}}}function jn(c,g){if(c.g){Fo(c);const w=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Rt(c,"ready");try{w.onreadystatechange=C}catch{}}}function Fo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function In(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),js(g)}};function Ja(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uo(c){const g={};c=(c.g&&2<=In(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(G(c[C]))continue;var w=L(c[C]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=g[$]||[];g[$]=X,X.push(w)}R(g,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Za(c){this.Aa=0,this.i=[],this.j=new zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lr("baseRetryDelayMs",5e3,c),this.cb=Lr("retryDelaySeedMs",1e4,c),this.Wa=Lr("forwardChannelMaxRetries",2,c),this.wa=Lr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ws(c&&c.concurrentRequestLimit),this.Da=new Cd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,C){yt(0),this.W=c,this.H=g||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=ju(this,null,this.W),jr(this)};function Yt(c){if(zo(c),c.G==3){var g=c.U++,w=Ln(c.I);if(st(w,"SID",c.K),st(w,"RID",g),st(w,"TYPE","terminate"),fi(c,w),g=new hr(c,c.j,g),g.L=2,g.v=Wi(Ln(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=g.v,w=!0),w||(g.g=Fu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),at(g)}Lu(c)}function gr(c){c.g&&(el(c),c.g.cancel(),c.g=null)}function zo(c){gr(c),c.u&&(d.clearTimeout(c.u),c.u=null),Ho(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function jr(c){if(!Mn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Oe||ae(),ne||(Oe(),ne=!0),de.add(g,c),c.B=0}}function Ad(c,g){return Cu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=lr(_(c.Ga,c,g),Mu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new hr(this,this.j,c);let X=this.o;if(this.S&&(X?(X=b(X),I(X,this.S)):X=this.S),this.m!==null||this.O||($.H=X,X=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Qi(this,$,g),w=Ln(this.I),st(w,"RID",c),st(w,"CVER",22),this.D&&st(w,"X-HTTP-Session-Id",this.D),fi(this,w),X&&(this.O?g="headers="+encodeURIComponent(String(di(X)))+"&"+g:this.m&&Ki(w,this.m,X)),Ka(this.h,$),this.Ua&&st(w,"TYPE","init"),this.P?(st(w,"$req",g),st(w,"SID","null"),$.T=!0,Do($,w,null)):Do($,w,g),this.G=2}}else this.G==3&&(c?Bo(this,c):this.i.length==0||Mn(this.h)||Bo(this))};function Bo(c,g){var w;g?w=g.l:w=c.U++;const C=Ln(c.I);st(C,"SID",c.K),st(C,"RID",w),st(C,"AID",c.T),fi(c,C),c.m&&c.o&&Ki(C,c.m,c.o),w=new hr(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Qi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ka(c.h,w),Do(w,C,g)}function fi(c,g){c.H&&J(c.H,function(w,C){st(g,C,w)}),c.l&&Bi({},function(w,C){st(g,C,w)})}function Qi(c,g,w){w=Math.min(c.i.length,w);var C=c.l?_(c.l.Na,c.l,c):null;e:{var $=c.i;let X=-1;for(;;){const ue=["count="+w];X==-1?0<w?(X=$[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let rt=!0;for(let Ft=0;Ft<w;Ft++){let Qe=$[Ft].g;const Wt=$[Ft].map;if(Qe-=X,0>Qe)X=Math.max(0,$[Ft].g-100),rt=!1;else try{Ou(Wt,ue,"req"+Qe+"_")}catch{C&&C(Wt)}}if(rt){C=ue.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,C}function Xs(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Oe||ae(),ne||(Oe(),ne=!0),de.add(g,c),c.v=0}}function $o(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=lr(_(c.Fa,c),Mu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=lr(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),gr(this),Vu(this))};function el(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Vu(c){c.g=new hr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Ln(c.qa);st(g,"RID","rpc"),st(g,"SID",c.K),st(g,"AID",c.T),st(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(g,"TO",c.ja),st(g,"TYPE","xmlhttp"),fi(c,g),c.m&&c.o&&Ki(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Wi(Ln(g)),w.m=null,w.P=!0,qa(w,c)}n.Za=function(){this.C!=null&&(this.C=null,gr(this),$o(this),yt(19))};function Ho(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Wo(c,g){var w=null;if(c.g==g){Ho(c),el(c),c.g=null;var C=2}else if(mn(c.h,g))w=g.D,bu(c.h,g),C=1;else return;if(c.G!=0){if(g.o)if(C==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;C=Te(),Rt(C,new ko(C,w)),jr(c)}else Xs(c);else if($=g.s,$==3||$==0&&0<g.X||!(C==1&&Ad(c,g)||C==2&&$o(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),$){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function Mu(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function pi(c,g){if(c.j.info("Error code "+g),g==2){var w=_(c.fb,c),C=c.Xa;const $=!C;C=new ci(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gs(C,"https"),Wi(C),$?Id(C.toString(),w):Nu(C.toString(),w)}else yt(2);c.G=0,c.l&&c.l.sa(g),Lu(c),zo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Lu(c){if(c.G=0,c.ka=[],c.l){const g=Au(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function ju(c,g,w){var C=w instanceof ci?Ln(w):new ci(w);if(C.g!="")g&&(C.g=g+"."+C.g),$i(C,C.s);else{var $=d.location;C=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var X=new ci(null);C&&Gs(X,C),g&&(X.g=g),$&&$i(X,$),w&&(X.l=w),C=X}return w=c.D,g=c.ya,w&&g&&st(C,w,g),st(C,"VER",c.la),fi(c,C),C}function Fu(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new pt(new hi({eb:w})):new pt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tl(){}n=tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qo(){}qo.prototype.g=function(c,g){return new gn(c,g)};function gn(c,g){At.call(this),this.g=new Za(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!G(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!G(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Fr(this)}O(gn,At),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Ls(c),c=w);g.i.push(new Iu(g.Ya++,c)),g.G==3&&jr(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)};function Uu(c){Gn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}O(Uu,Gn);function zu(){Ui.call(this),this.status=1}O(zu,Ui);function Fr(c){this.g=c}O(Fr,tl),Fr.prototype.ua=function(){Rt(this.g,"a")},Fr.prototype.ta=function(c){Rt(this.g,new Uu(c))},Fr.prototype.sa=function(c){Rt(this.g,new zu)},Fr.prototype.ra=function(){Rt(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,qE=function(){return new qo},WE=function(){return Te()},HE=M,Mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Zc=No,wu.COMPLETE="complete",$E=wu,Fi.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",At.prototype.listen=At.prototype.K,kl=Fi,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,BE=pt}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const L_="@firebase/firestore",j_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new _m("@firebase/firestore");function ma(){return wo.logLevel}function ge(n,...e){if(wo.logLevel<=qe.DEBUG){const t=e.map(Nm);wo.debug(`Firestore (${Ma}): ${n}`,...t)}}function xi(n,...e){if(wo.logLevel<=qe.ERROR){const t=e.map(Nm);wo.error(`Firestore (${Ma}): ${n}`,...t)}}function Is(n,...e){if(wo.logLevel<=qe.WARN){const t=e.map(Nm);wo.warn(`Firestore (${Ma}): ${n}`,...t)}}function Nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,GE(n,r,t)}function GE(n,e,t){let r=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xi(r),new Error(r)}function nt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||GE(e,s,r)}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class VP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class MP{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bi,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new KE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class LP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new LP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class F_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new F_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new F_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=UP(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Lp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ze(r,s);{const a=QE(),u=zP(a.encode(U_(n,t)),a.encode(U_(e,t)));return u!==0?u:ze(r,s)}}t+=r>65535?2:1}return ze(n.length,e.length)}function U_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function zP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ze(n[t],e[t]);return ze(n.length,e.length)}function ba(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Wr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Wr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return ze(e.length,t.length)}static compareSegments(e,t){const r=Wr.isNumericId(e),s=Wr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Wr.extractNumericId(e).compare(Wr.extractNumericId(t)):Lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class ut extends Wr{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const BP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Wr{construct(e,t,r){return new nn(e,t,r)}static isValidIdentifier(e){return BP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new nn([z_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(ut.fromString(e))}static fromName(e){return new Ie(ut.fromString(e).popFirst(5))}static empty(){return new Ie(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e,t){if(!t)throw new fe(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $P(n,e,t,r){if(e===!0&&r===!0)throw new fe(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B_(n){if(!Ie.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $_(n){if(Ie.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qh(n);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e){const t={typeString:n};return e&&(t.value=e),t}function hu(n,e){if(!YE(n))throw new fe(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new fe(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,W_=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*W_);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<H_)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W_}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Lt("string",ft._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new ft(0,0))}static max(){return new De(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function HP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new Cs(s,Ie.empty(),e)}function WP(n){return new Cs(n.readTime,n.key,ql)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(De.min(),Ie.empty(),ql)}static max(){return new Cs(De.max(),Ie.empty(),ql)}}function qP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==GP)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((s=>s?te.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((y=>{u[m]=y,++d,d===a&&r(u)}),(y=>s(y)))}}))}static doWhile(e,t){return new te(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function QP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ja(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Xh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function Yh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function XP(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="";function YP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=q_(e)),e=JP(n.get(t),e);return q_(e)}function JP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case JE:t+="";break;default:t+=a}}return t}function q_(n){return n+JE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??en.RED,this.left=s??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new en(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return en.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class K_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new $n([])}unionWith(e){let t=new $t(nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new eT("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const ZP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=ZP.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function As(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",rT="__previous_value__",iT="__local_write_time__";function Vm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||t===void 0?void 0:t.stringValue)===tT}function Jh(n){const e=n.mapValue.fields[rT];return Vm(e)?Jh(e):e}function Gl(n){const e=bs(n.mapValue.fields[iT].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,r,s,a,u,d,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const _h="(default)";class Kl{constructor(e,t){this.projectId=e,this.database=t||_h}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",tk="__max__",jc={mapValue:{}},oT="__vector__",wh="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vm(n)?4:rk(n)?9007199254740991:nk(n)?10:11:ke(28295,{value:n})}function ri(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gl(n).isEqual(Gl(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=bs(s.timestampValue),d=bs(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return As(s.bytesValue).isEqual(As(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return kt(s.geoPointValue.latitude)===kt(a.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return kt(s.integerValue)===kt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=kt(s.doubleValue),d=kt(a.doubleValue);return u===d?yh(u)===yh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ba(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(G_(u)!==G_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ri(u[f],d[f])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function Ql(n,e){return(n.values||[]).find((t=>ri(t,e)))!==void 0}function Aa(n,e){if(n===e)return 0;const t=Rs(n),r=Rs(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=kt(a.integerValue||a.doubleValue),f=kt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return Q_(n.timestampValue,e.timestampValue);case 4:return Q_(Gl(n),Gl(e));case 5:return Lp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=As(a),f=As(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=ze(d[m],f[m]);if(y!==0)return y}return ze(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ze(kt(a.latitude),kt(u.latitude));return d!==0?d:ze(kt(a.longitude),kt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return X_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,y;const T=a.fields||{},_=u.fields||{},P=(d=T[wh])===null||d===void 0?void 0:d.arrayValue,O=(f=_[wh])===null||f===void 0?void 0:f.arrayValue,D=ze(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0);return D!==0?D:X_(P,O)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===jc.mapValue&&u===jc.mapValue)return 0;if(a===jc.mapValue)return 1;if(u===jc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let T=0;T<f.length&&T<y.length;++T){const _=Lp(f[T],y[T]);if(_!==0)return _;const P=Aa(d[f[T]],m[y[T]]);if(P!==0)return P}return ze(f.length,y.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{le:t})}}function Q_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=bs(n),r=bs(e),s=ze(t.seconds,r.seconds);return s!==0?s:ze(t.nanos,r.nanos)}function X_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Aa(t[s],r[s]);if(a)return a}return ze(t.length,r.length)}function Ra(n){return jp(n)}function jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=bs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return As(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=jp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${jp(t.fields[u])}`;return s+"}"})(n.mapValue):ke(61005,{value:n})}function eh(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(n);return e?16+eh(e):16;case 5:return 2*n.stringValue.length;case 6:return As(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+eh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return xs(r.fields,((a,u)=>{s+=a.length+eh(u)})),s})(n.mapValue);default:throw ke(13486,{value:n})}}function Y_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fp(n){return!!n&&"integerValue"in n}function Mm(n){return!!n&&"arrayValue"in n}function J_(n){return!!n&&"nullValue"in n}function Z_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function nk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sT])===null||t===void 0?void 0:t.stringValue)===oT}function Ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ll(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=nn.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=Ll(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){xs(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new On(Ll(this.value))}}function aT(n){const e=[];return xs(n.fields,((t,r)=>{const s=new nn([t]);if(th(r)){const a=aT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,De.min(),De.min(),De.min(),On.empty(),0)}static newFoundDocument(e,t,r,s){return new dn(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new dn(e,2,t,De.min(),De.min(),On.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,De.min(),De.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function ew(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ie.comparator(Ie.fromName(u.referenceValue),t.key):r=Aa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function tw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t="asc"){this.field=e,this.dir=t}}function ik(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class Mt extends lT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ok(e,t,r):t==="array-contains"?new uk(e,r):t==="in"?new ck(e,r):t==="not-in"?new hk(e,r):t==="array-contains-any"?new dk(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ak(e,r):new lk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Aa(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends lT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Pr(e,t)}matches(e){return uT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(n){return n.op==="and"}function cT(n){return sk(n)&&uT(n)}function sk(n){for(const e of n.filters)if(e instanceof Pr)return!1;return!0}function Up(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Ra(n.value);if(cT(n))return n.filters.map((e=>Up(e))).join(",");{const e=n.filters.map((t=>Up(t))).join(",");return`${n.op}(${e})`}}function hT(n,e){return n instanceof Mt?(function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)})(n,e):n instanceof Pr?(function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&hT(u,s.filters[d])),!0):!1})(n,e):void ke(19439)}function dT(n){return n instanceof Mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ra(t.value)}`})(n):n instanceof Pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(dT).join(" ,")+"}"})(n):"Filter"}class ok extends Mt{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class ak extends Mt{constructor(e,t){super(e,"in",t),this.keys=fT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lk extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=fT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class uk extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mm(t)&&Ql(t.arrayValue,this.value)}}class ck extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ql(this.value.arrayValue,t)}}class hk extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ql(this.value.arrayValue,t)}}class dk extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ql(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function nw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new fk(n,e,t,r,s,a,u)}function Lm(n){const e=je(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Up(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ra(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ra(r))).join(",")),e.Pe=t}return e.Pe}function jm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ik(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tw(n.startAt,e.startAt)&&tw(n.endAt,e.endAt)}function zp(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function pk(n,e,t,r,s,a,u,d){return new du(n,e,t,r,s,a,u,d)}function Fm(n){return new du(n)}function rw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function jl(n){const e=je(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new $t(nn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Th(a,r))})),t.has(nn.keyField().canonicalString())||e.Te.push(new Th(nn.keyField(),r))}return e.Te}function Xr(n){const e=je(n);return e.Ie||(e.Ie=mk(e,jl(n))),e.Ie}function mk(n,e){if(n.limitType==="F")return nw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Th(s.field,a)}));const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return nw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Bp(n,e){const t=n.filters.concat([e]);return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $p(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zh(n,e){return jm(Xr(n),Xr(e))&&n.limitType===e.limitType}function mT(n){return`${Lm(Xr(n))}|lt:${n.limitType}`}function ga(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>dT(s))).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ra(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ra(s))).join(",")),`Target(${r})`})(Xr(n))}; limitType=${n.limitType})`}function ed(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of jl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=ew(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,jl(r),s)||r.endAt&&!(function(u,d,f){const m=ew(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,jl(r),s))})(n,e)}function gk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gT(n){return(e,t)=>{let r=!1;for(const s of jl(n)){const a=vk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function vk(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Aa(f,m):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Et(Ie.comparator);function Ni(){return yk}const vT=new Et(Ie.comparator);function xl(...n){let e=vT;for(const t of n)e=e.insert(t.key,t);return e}function yT(n){let e=vT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function po(){return Fl()}function _T(){return Fl()}function Fl(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _k=new Et(Ie.comparator),wk=new $t(Ie.comparator);function Ge(...n){let e=wk;for(const t of n)e=e.add(t);return e}const Ek=new $t(ze);function Tk(){return Ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function wT(n){return{integerValue:""+n}}function Sk(n,e){return XP(e)?wT(e):Um(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function Ik(n,e,t){return n instanceof Xl?(function(s,a){const u={fields:{[nT]:{stringValue:tT},[iT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Vm(a)&&(a=Jh(a)),a&&(u.fields[rT]=a),{mapValue:u}})(t,e):n instanceof Yl?TT(n,e):n instanceof Jl?ST(n,e):(function(s,a){const u=ET(s,a),d=iw(u)+iw(s.Ee);return Fp(u)&&Fp(s.Ee)?wT(d):Um(s.serializer,d)})(n,e)}function Ck(n,e,t){return n instanceof Yl?TT(n,e):n instanceof Jl?ST(n,e):t}function ET(n,e){return n instanceof Sh?(function(r){return Fp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Xl extends td{}class Yl extends td{constructor(e){super(),this.elements=e}}function TT(n,e){const t=IT(e);for(const r of n.elements)t.some((s=>ri(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Jl extends td{constructor(e){super(),this.elements=e}}function ST(n,e){let t=IT(e);for(const r of n.elements)t=t.filter((s=>!ri(s,r)));return{arrayValue:{values:t}}}class Sh extends td{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function iw(n){return kt(n.integerValue||n.doubleValue)}function IT(n){return Mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.field=e,this.transform=t}}function Ak(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Jl&&s instanceof Jl?ba(r.elements,s.elements,ri):r instanceof Sh&&s instanceof Sh?ri(r.Ee,s.Ee):r instanceof Xl&&s instanceof Xl})(n.transform,e.transform)}class Rk{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class nd{}function CT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zm(n.key,Ar.none()):new fu(n.key,n.data,Ar.none());{const t=n.data,r=On.empty();let s=new $t(nn.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ns(n.key,r,new $n(s.toArray()),Ar.none())}}function Pk(n,e,t){n instanceof fu?(function(s,a,u){const d=s.value.clone(),f=ow(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ns?(function(s,a,u){if(!nh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=ow(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(bT(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ul(n,e,t,r){return n instanceof fu?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=a.value.clone(),y=aw(a.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ns?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=aw(a.fieldTransforms,f,u),y=u.data;return y.setAll(bT(a)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(a,u,d){return nh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function kk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=ET(r.transform,s||null);a!=null&&(t===null&&(t=On.empty()),t.set(r.field,a))}return t||null}function sw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ba(r,s,((a,u)=>Ak(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends nd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends nd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function bT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ow(n,e,t){const r=new Map;nt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Ck(u,d,t[s]))}return r}function aw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Ik(a,u,e))}return r}class zm extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xk extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Pk(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_T();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=CT(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,((t,r)=>sw(t,r)))&&ba(this.baseMutations,e.baseMutations,((t,r)=>sw(t,r)))}}class Bm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return _k})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Bm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Xe;function Vk(n){switch(n){case ee.OK:return ke(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function AT(n){if(n===void 0)return xi("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Dt.OK:return ee.OK;case Dt.CANCELLED:return ee.CANCELLED;case Dt.UNKNOWN:return ee.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ee.INTERNAL;case Dt.UNAVAILABLE:return ee.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ee.NOT_FOUND;case Dt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Dt.ABORTED:return ee.ABORTED;case Dt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Dt.DATA_LOSS:return ee.DATA_LOSS;default:return ke(39323,{code:n})}}(Xe=Dt||(Dt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Es([4294967295,4294967295],0);function lw(n){const e=QE().encode(n),t=new zE;return t.update(e),new Uint8Array(t.digest())}function uw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Es([t,r],0),new Es([s,a],0)]}class $m{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nl(`Invalid padding: ${t}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Es.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Es.fromNumber(r)));return s.compare(Mk)===1&&(s=new Es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=lw(e),[r,s]=uw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new $m(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=lw(e),[r,s]=uw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rd(De.min(),s,new Et(ze),Ni(),Ge())}}class pu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pu(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class RT{constructor(e,t){this.targetId=e,this.De=t}}class PT{constructor(e,t,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class cw{constructor(){this.ve=0,this.Ce=hw(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ke(38017,{changeType:a})}})),new pu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=hw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Lk{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ni(),this.je=Fc(),this.Je=Fc(),this.He=new Et(ze)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(zp(a))if(r===0){const u=new Ie(a.path);this.Xe(t,u,dn.newNoDocument(u,De.min()))}else nt(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=As(r).toUint8Array()}catch(f){if(f instanceof eT)return Is("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new $m(u,s,a)}catch(f){return Is(f instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&zp(d.target)){const f=new Ie(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,dn.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ge();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new rd(e,t,this.He,this.ze,r);return this.ze=Ni(),this.je=Fc(),this.Je=Fc(),this.He=new Et(ze),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new cw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new $t(ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new $t(ze),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new cw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Fc(){return new Et(Ie.comparator)}function hw(){return new Et(Ie.comparator)}const jk={asc:"ASCENDING",desc:"DESCENDING"},Fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uk={and:"AND",or:"OR"};class zk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hp(n,e){return n.useProto3Json||Yh(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Bk(n,e){return Ih(n,e.toTimestamp())}function Yr(n){return nt(!!n,49232),De.fromTimestamp((function(t){const r=bs(t);return new ft(r.seconds,r.nanos)})(n))}function Hm(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=(function(s){return new ut(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xT(n){const e=ut.fromString(n);return nt(MT(e),10190,{key:e.toString()}),e}function qp(n,e){return Hm(n.databaseId,e.path)}function ap(n,e){const t=xT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(OT(t))}function NT(n,e){return Hm(n.databaseId,e)}function $k(n){const e=xT(n);return e.length===4?ut.emptyPath():OT(e)}function Gp(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dw(n,e,t){return{name:qp(n,e),fields:t.value.mapValue.fields}}function Hk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ke(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(nt(y===void 0||typeof y=="string",58123),rn.fromBase64String(y||"")):(nt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),rn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const y=m.code===void 0?ee.UNKNOWN:AT(m.code);return new fe(y,m.message||"")})(u);t=new PT(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ap(n,r.document.name),a=Yr(r.document.updateTime),u=r.document.createTime?Yr(r.document.createTime):De.min(),d=new On({mapValue:{fields:r.document.fields}}),f=dn.newFoundDocument(s,a,u,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new rh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ap(n,r.document),a=r.readTime?Yr(r.readTime):De.min(),u=dn.newNoDocument(s,a),d=r.removedTargetIds||[];t=new rh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ap(n,r.document),a=r.removedTargetIds||[];t=new rh([],a,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Dk(s,a),d=r.targetId;t=new RT(d,u)}}return t}function Wk(n,e){let t;if(e instanceof fu)t={update:dw(n,e.key,e.value)};else if(e instanceof zm)t={delete:qp(n,e.key)};else if(e instanceof Ns)t={update:dw(n,e.key,e.data),updateMask:ex(e.fieldMask)};else{if(!(e instanceof xk))return ke(16599,{Rt:e.type});t={verify:qp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Jl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw ke(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Bk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function qk(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Yr(s.updateTime):Yr(a);return u.isEqual(De.min())&&(u=Yr(a)),new Rk(u,s.transformResults||[])})(t,e)))):[]}function Gk(n,e){return{documents:[NT(n,e.path)]}}function Kk(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NT(n,s);const a=(function(m){if(m.length!==0)return VT(Pr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((y=>(function(_){return{field:va(_.field),direction:Yk(_.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Hp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function Qk(n){let e=$k(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){nt(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(T){const _=DT(T);return _ instanceof Pr&&cT(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((_=>(function(O){return new Th(ya(O.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let _;return _=typeof T=="object"?T.value:T,Yh(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(T){const _=!!T.before,P=T.values||[];return new Eh(P,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const _=!T.before,P=T.values||[];return new Eh(P,_)})(t.endAt)),pk(e,s,u,a,d,"F",f,m)}function Xk(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ya(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ya(t.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ya(t.unaryFilter.field);return Mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ya(t.unaryFilter.field);return Mt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Mt.create(ya(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Pr.create(t.compositeFilter.filters.map((r=>DT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function Yk(n){return jk[n]}function Jk(n){return Fk[n]}function Zk(n){return Uk[n]}function va(n){return{fieldPath:n.canonicalString()}}function ya(n){return nn.fromServerFormat(n.fieldPath)}function VT(n){return n instanceof Mt?(function(t){if(t.op==="=="){if(Z_(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NAN"}};if(J_(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z_(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NAN"}};if(J_(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(t.field),op:Jk(t.op),value:t.value}}})(n):n instanceof Pr?(function(t){const r=t.getFilters().map((s=>VT(s)));return r.length===1?r[0]:{compositeFilter:{op:Zk(t.op),filters:r}}})(n):ke(54877,{filter:n})}function ex(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,s,a=De.min(),u=De.min(),d=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.gt=e}}function nx(n){const e=Qk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.Dn=new ix}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Cs.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class ix{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $t(ut.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(LT,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Pa(0)}static ur(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LruGarbageCollector",sx=1048576;function mw([n,e],[t,r]){const s=ze(n,t);return s===0?ze(e,r):s}class ox{constructor(e){this.Tr=e,this.buffer=new $t(mw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ax{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(pw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ja(t)?ge(pw,"Ignoring IndexedDB error during garbage collection: ",t):await La(t)}await this.Rr(3e5)}))}}class lx{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Xh.ue);const r=new ox(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(fw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),s=this.params.maximumSequenceNumbersToCollect):s=T,u=Date.now(),this.nthSequenceNumber(e,s)))).next((T=>(r=T,d=Date.now(),this.removeTargets(e,r,t)))).next((T=>(a=T,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(m=Date.now(),ma()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${T} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:T}))))}}function ux(n,e){return new lx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ul(r.mutation,s,$n.empty(),ft.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const s=po();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=xl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=Ni();const u=Fl(),d=(function(){return Fl()})();return t.forEach(((f,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Ns)?a=a.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),Ul(y.mutation,m,y.mutation.getFieldMask(),ft.now())):u.set(m.key,$n.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,y)=>u.set(m,y))),t.forEach(((m,y)=>{var T;return d.set(m,new hx(y,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Fl();let s=new Et(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||$n.empty();y=d.applyToLocalView(m,y),r.set(f,y);const T=(s.get(d.batchId)||Ge()).add(f);s=s.insert(d.batchId,T)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,T=_T();y.forEach((_=>{if(!a.has(_)){const P=CT(t.get(_),r.get(_));P!==null&&T.set(_,P),a=a.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return te.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):te.resolve(po());let d=ql,f=a;return u.next((m=>te.forEach(m,((y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((_=>{f=f.insert(y,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((y=>({batchId:d,changes:yT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let s=xl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=xl();return this.indexManager.getCollectionParents(e,a).next((d=>te.forEach(d,(f=>{const m=(function(T,_){return new du(_,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((T,_)=>{u=u.insert(T,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,dn.newInvalidDocument(y)))}));let d=xl();return u.forEach(((f,m)=>{const y=a.get(f);y!==void 0&&Ul(y.mutation,m,$n.empty(),ft.now()),ed(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yr(s.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:nx(s.bundledQuery),readTime:Yr(s.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.overlays=new Et(Ie.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return te.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=po(),a=t.length+1,u=new Ie(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Et(((m,y)=>m-y));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=po(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=po(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=s)););return te.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Ok(t,r));let a=this.kr.get(t);a===void 0&&(a=Ge(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.qr=new $t(Qt.Qr),this.$r=new $t(Qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Qt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ie(new ut([])),r=new Qt(t,e),s=new Qt(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ie(new ut([])),r=new Qt(t,e),s=new Qt(t,e+1);let a=Ge();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ie.comparator(e.key,t.key)||ze(e.Hr,t.Hr)}static Ur(e,t){return ze(e.Hr,t.Hr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new $t(Qt.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Nk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Qt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Dm:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qt(t,0),s=new Qt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(ze);return t.forEach((s=>{const a=new Qt(s,0),u=new Qt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ie.isDocumentKey(a)||(a=a.child(""));const u=new Qt(new Ie(a),0);let d=new $t(ze);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),te.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(t.mutations,(s=>{const a=new Qt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Qt(t,0),s=this.Yr.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.ni=e,this.docs=(function(){return new Et(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():dn.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ni();const u=t.path,d=new Ie(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||qP(WP(y),r)<=0||(s.has(y.key)||ed(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,s){ke(9500)}ri(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new yx(this)}getSize(e){return te.resolve(this.size)}}class yx extends cx{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.persistence=e,this.ii=new bo((t=>Lm(t)),jm),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new Wm,this.targetCount=0,this._i=Pa.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Pa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),te.waitFor(a).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xh(0),this.ci=!1,this.ci=!0,this.li=new mx,this.referenceDelegate=e(this),this.hi=new _x(this),this.indexManager=new rx,this.remoteDocumentCache=(function(s){return new vx(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new tx(t),this.Ti=new fx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new px,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new gx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new wx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return te.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class wx extends KP{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ai=new Wm,this.Ri=null}static Vi(e){return new qm(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(r=>{const s=Ie.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,De.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ch{constructor(e,t){this.persistence=e,this.gi=new bo((r=>YP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=ux(this,t)}static Vi(e,t){return new Ch(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?te.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,De.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eh(e.data.value)),t}Sr(e,t,r){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ge(),s=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return gb()?8:QP(fn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Ex;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(ma()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(ma()<=qe.DEBUG&&ge("QueryEngine","Query:",ga(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ma()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):te.resolve())}ps(e,t){if(rw(t))return te.resolve(null);let r=Xr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=$p(t,null,"F"),r=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ge(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,$p(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return rw(t)||s.isEqual(De.min())?te.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?te.resolve(null):(ma()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ga(t)),this.vs(e,u,t,HP(s,ql)).next((d=>d)))}))}bs(e,t){let r=new $t(gT(e));return t.forEach(((s,a)=>{ed(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return ma()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",ga(t)),this.gs.getDocumentsMatchingQuery(e,t,Cs.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",Sx=3e8;class Ix{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Et(ze),this.Ms=new bo((a=>Lm(a)),jm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Cx(n,e,t,r){return new Ix(n,e,t,r)}async function FT(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ge();for(const m of s){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function bx(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,y){const T=m.batch,_=T.keys();let P=te.resolve();return _.forEach((O=>{P=P.next((()=>y.getEntry(f,O))).next((D=>{const A=m.docVersions.get(O);nt(A!==null,48541),D.version.compareTo(A)<0&&(T.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),y.addEntry(D)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,T)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ge();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function UT(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Ax(n,e){const t=je(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((y,T)=>{const _=s.get(T);if(!_)return;d.push(t.hi.removeMatchingKeys(a,y.removedDocuments,T).next((()=>t.hi.addMatchingKeys(a,y.addedDocuments,T))));let P=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(rn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):y.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(y.resumeToken,r)),s=s.insert(T,P),(function(D,A,z){return D.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Sx?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(_,P,y)&&d.push(t.hi.updateTargetData(a,P))}));let f=Ni(),m=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(Rx(a,u,e.documentUpdates).next((y=>{f=y.Ls,m=y.ks}))),!r.isEqual(De.min())){const y=t.hi.getLastRemoteSnapshotVersion(a).next((T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(y)}return te.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function Rx(n,e,t){let r=Ge(),s=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=Ni();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(De.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ge(Km,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Px(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Dm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kx(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,te.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new vs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Kp(n,e,t){const r=je(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ja(u))throw u;ge(Km,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function gw(n,e,t){const r=je(n);let s=De.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,y){const T=je(f),_=T.Ms.get(y);return _!==void 0?te.resolve(T.Fs.get(_)):T.hi.getTargetData(m,y)})(r,u,Xr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:De.min(),t?a:Ge()))).next((d=>(xx(r,gk(e),d),{documents:d,qs:a})))))}function xx(n,e,t){let r=n.xs.get(e)||De.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class vw{constructor(){this.activeTargetIds=Tk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nx{constructor(){this.Fo=new vw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="ConnectivityMonitor";class _w{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(yw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Qp(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="RestConnection",Dx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=Qp(),d=this.Go(e,t.toUriEncodedString());ge(lp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),y=Di(m);return this.jo(e,d,f,r,y).then((T=>(ge(lp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Is(lp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",r),T}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ma})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Dx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class Lx extends Vx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=Qp();return new Promise(((d,f)=>{const m=new BE;m.setWithCredentials(!0),m.listenOnce($E.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Zc.NO_ERROR:const T=m.getResponseJson();ge(un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Zc.TIMEOUT:ge(un,`RPC '${e}' ${u} timed out`),f(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const _=m.getStatus();if(ge(un,`RPC '${e}' ${u} failed with status:`,_,"response text:",m.getResponseText()),_>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const O=P==null?void 0:P.error;if(O&&O.status&&O.message){const D=(function(z){const G=z.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(G)>=0?G:ee.UNKNOWN})(O.status);f(new fe(D,O.message))}else f(new fe(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ge(un,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(s);ge(un,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",y,r,15)}))}P_(e,t,r){const s=Qp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=qE(),d=WE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");ge(un,`Creating RPC '${e}' stream ${s}: ${y}`,f);const T=u.createWebChannel(y,f);this.T_(T);let _=!1,P=!1;const O=new Mx({Ho:A=>{P?ge(un,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(_||(ge(un,`Opening RPC '${e}' stream ${s} transport.`),T.open(),_=!0),ge(un,`RPC '${e}' stream ${s} sending:`,A),T.send(A))},Yo:()=>T.close()}),D=(A,z,G)=>{A.listen(z,(q=>{try{G(q)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return D(T,kl.EventType.OPEN,(()=>{P||(ge(un,`RPC '${e}' stream ${s} transport opened.`),O.s_())})),D(T,kl.EventType.CLOSE,(()=>{P||(P=!0,ge(un,`RPC '${e}' stream ${s} transport closed`),O.__(),this.I_(T))})),D(T,kl.EventType.ERROR,(A=>{P||(P=!0,Is(un,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),O.__(new fe(ee.UNAVAILABLE,"The operation could not be completed")))})),D(T,kl.EventType.MESSAGE,(A=>{var z;if(!P){const G=A.data[0];nt(!!G,16349);const q=G,Z=(q==null?void 0:q.error)||((z=q[0])===null||z===void 0?void 0:z.error);if(Z){ge(un,`RPC '${e}' stream ${s} received error:`,Z);const K=Z.status;let J=(function(k){const I=Dt[k];if(I!==void 0)return AT(I)})(K),R=Z.message;J===void 0&&(J=ee.INTERNAL,R="Unknown error status: "+K+" with message "+Z.message),P=!0,O.__(new fe(J,R)),T.close()}else ge(un,`RPC '${e}' stream ${s} received:`,G),O.a_(G)}})),D(d,HE.STAT_EVENT,(A=>{A.stat===Mp.PROXY?ge(un,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Mp.NOPROXY&&ge(un,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){return new zk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="PersistentStream";class BT{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new fe(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ge(ww,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ge(ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jx extends BT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Hk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return De.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Yr(u.readTime):De.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Gp(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=zp(f)?{documents:Gk(a,f)}:{query:Kk(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kT(a,u.resumeToken);const m=Hp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(De.min())>0){d.readTime=Ih(a,u.snapshotVersion.toTimestamp());const m=Hp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=Xk(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Gp(this.serializer),t.removeTarget=e,this.k_(t)}}class Fx extends BT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=qk(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Gp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Wk(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{}class zx extends Ux{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Wp(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(ee.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Wp(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ee.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Bx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class $x{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Ao(this)&&(ge(Eo,"Restarting streams for network reachability change."),await(async function(f){const m=je(f);m.Ia.add(4),await mu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await sd(m)})(this))}))})),this.Aa=new Bx(r,s)}}async function sd(n){if(Ao(n))for(const e of n.da)await e(!0)}async function mu(n){for(const e of n.da)await e(!1)}function $T(n,e){const t=je(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Jm(t)?Ym(t):Fa(t).x_()&&Xm(t,e))}function Qm(n,e){const t=je(n),r=Fa(t);t.Ta.delete(e),r.x_()&&HT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ao(t)&&t.Aa.set("Unknown"))}function Xm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(n).H_(e)}function HT(n,e){n.Ra.$e(e),Fa(n).Y_(e)}function Ym(n){n.Ra=new Lk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Fa(n).start(),n.Aa.aa()}function Jm(n){return Ao(n)&&!Fa(n).M_()&&n.Ta.size>0}function Ao(n){return je(n).Ia.size===0}function WT(n){n.Ra=void 0}async function Hx(n){n.Aa.set("Online")}async function Wx(n){n.Ta.forEach(((e,t)=>{Xm(n,e)}))}async function qx(n,e){WT(n),Jm(n)?(n.Aa.la(e),Ym(n)):n.Aa.set("Unknown")}async function Gx(n,e,t){if(n.Aa.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){ge(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(n,r)}else if(e instanceof rh?n.Ra.Ye(e):e instanceof RT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(De.min()))try{const r=await UT(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ta.get(m);y&&a.Ta.set(m,y.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const y=a.Ta.get(f);if(!y)return;a.Ta.set(f,y.withResumeToken(rn.EMPTY_BYTE_STRING,y.snapshotVersion)),HT(a,f);const T=new vs(y.target,f,m,y.sequenceNumber);Xm(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ge(Eo,"Failed to raise snapshot:",r),await bh(n,r)}}async function bh(n,e,t){if(!ja(e))throw e;n.Ia.add(1),await mu(n),n.Aa.set("Offline"),t||(t=()=>UT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Eo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await sd(n)}))}function qT(n,e){return e().catch((t=>bh(n,t,e)))}async function od(n){const e=je(n),t=Ps(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Dm;for(;Kx(e);)try{const s=await Px(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,Qx(e,s)}catch(s){await bh(e,s)}GT(e)&&KT(e)}function Kx(n){return Ao(n)&&n.Pa.length<10}function Qx(n,e){n.Pa.push(e);const t=Ps(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function GT(n){return Ao(n)&&!Ps(n).M_()&&n.Pa.length>0}function KT(n){Ps(n).start()}async function Xx(n){Ps(n).na()}async function Yx(n){const e=Ps(n);for(const t of n.Pa)e.X_(t.mutations)}async function Jx(n,e,t){const r=n.Pa.shift(),s=Bm.from(r,e,t);await qT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await od(n)}async function Zx(n,e){e&&Ps(n).Z_&&await(async function(r,s){if((function(u){return Vk(u)&&u!==ee.ABORTED})(s.code)){const a=r.Pa.shift();Ps(r).N_(),await qT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await od(r)}})(n,e),GT(n)&&KT(n)}async function Ew(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ge(Eo,"RemoteStore received new credentials");const r=Ao(t);t.Ia.add(3),await mu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await sd(t)}async function eN(n,e){const t=je(n);e?(t.Ia.delete(2),await sd(t)):e||(t.Ia.add(2),await mu(t),t.Aa.set("Unknown"))}function Fa(n){return n.Va||(n.Va=(function(t,r,s){const a=je(t);return a.ia(),new jx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Hx.bind(null,n),e_:Wx.bind(null,n),n_:qx.bind(null,n),J_:Gx.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Jm(n)?Ym(n):n.Aa.set("Unknown")):(await n.Va.stop(),WT(n))}))),n.Va}function Ps(n){return n.ma||(n.ma=(function(t,r,s){const a=je(t);return a.ia(),new Fx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Xx.bind(null,n),n_:Zx.bind(null,n),ea:Yx.bind(null,n),ta:Jx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await od(n)):(await n.ma.stop(),n.Pa.length>0&&(ge(Eo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new Zm(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(n,e){if(xi("AsyncQueue",`${e}: ${n}`),ja(n))return new fe(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=xl(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.fa=new Et(Ie.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ke(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ka{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ka(e,t,Ta.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class nN{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=je(t),a=s.queries;s.queries=Sw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new fe(ee.ABORTED,"Firestore shutting down"))}}function Sw(){return new bo((n=>mT(n)),Zh)}async function QT(n,e){const t=je(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new tN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=eg(u,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&tg(t)}async function XT(n,e){const t=je(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rN(n,e){const t=je(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&tg(t)}function iN(n,e,t){const r=je(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function tg(n){n.Da.forEach((e=>{e.next()}))}var Xp,Iw;(Iw=Xp||(Xp={})).Fa="default",Iw.Cache="cache";class YT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class ZT{constructor(e){this.key=e}}class sN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=gT(e),this.eu=new Ta(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Tw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,T)=>{const _=s.get(y),P=ed(this.query,T)?T:null,O=!!_&&this.mutatedKeys.has(_.key),D=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let A=!1;_&&P?_.data.isEqual(P.data)?O!==D&&(r.track({type:3,doc:P}),A=!0):this.iu(_,P)||(r.track({type:2,doc:P}),A=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(d=!0)):!_&&P?(r.track({type:0,doc:P}),A=!0):_&&!P&&(r.track({type:1,doc:_}),A=!0,(f||m)&&(d=!0)),A&&(P?(u=u.add(P),a=D?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,T)=>(function(P,O){const D=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:A})}};return D(P)-D(O)})(y.type,T.type)||this.Xa(y.doc,T.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ka(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new ZT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new JT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ng="SyncEngine";class oN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aN{constructor(e){this.key=e,this.lu=!1}}class lN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new bo((d=>mT(d)),Zh),this.Tu=new Map,this.Iu=new Set,this.du=new Et(Ie.comparator),this.Eu=new Map,this.Au=new Wm,this.Ru={},this.Vu=new Map,this.mu=Pa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function uN(n,e,t=!0){const r=sS(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await eS(r,e,t,!0),s}async function cN(n,e){const t=sS(n);await eS(t,e,!0,!1)}async function eS(n,e,t,r){const s=await kx(n.localStore,Xr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await hN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&$T(n.remoteStore,s),d}async function hN(n,e,t,r,s){n.gu=(T,_,P)=>(async function(D,A,z,G){let q=A.view.nu(z);q.Ds&&(q=await gw(D.localStore,A.query,!1).then((({documents:R})=>A.view.nu(R,q))));const Z=G&&G.targetChanges.get(A.targetId),K=G&&G.targetMismatches.get(A.targetId)!=null,J=A.view.applyChanges(q,D.isPrimaryClient,Z,K);return bw(D,A.targetId,J._u),J.snapshot})(n,T,_,P);const a=await gw(n.localStore,e,!0),u=new sN(e,a.qs),d=u.nu(a.documents),f=pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);bw(n,t,m._u);const y=new oN(e,t,u);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function dN(n,e,t){const r=je(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!Zh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kp(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Qm(r.remoteStore,s.targetId),Yp(r,s.targetId)})).catch(La)):(Yp(r,s.targetId),await Kp(r.localStore,s.targetId,!0))}async function fN(n,e){const t=je(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(t.remoteStore,r.targetId))}async function pN(n,e,t){const r=EN(n);try{const s=await(function(u,d){const f=je(u),m=ft.now(),y=d.reduce(((P,O)=>P.add(O.key)),Ge());let T,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let O=Ni(),D=Ge();return f.Os.getEntries(P,y).next((A=>{O=A,O.forEach(((z,G)=>{G.isValidDocument()||(D=D.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,O))).next((A=>{T=A;const z=[];for(const G of d){const q=kk(G,T.get(G.key).overlayedDocument);q!=null&&z.push(new Ns(G.key,q,aT(q.value.mapValue),Ar.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,z,d)})).next((A=>{_=A;const z=A.applyToLocalDocumentSet(T,D);return f.documentOverlayCache.saveOverlays(P,A.batchId,z)}))})).then((()=>({batchId:_.batchId,changes:yT(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new Et(ze)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await gu(r,s.changes),await od(r.remoteStore)}catch(s){const a=eg(s,"Failed to persist write");t.reject(a)}}async function tS(n,e){const t=je(n);try{const r=await Ax(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?nt(u.lu,14607):s.removedDocuments.size>0&&(nt(u.lu,42227),u.lu=!1))})),await gu(t,r,e)}catch(r){await La(r)}}function Cw(n,e,t){const r=je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=je(u);f.onlineState=d;let m=!1;f.queries.forEach(((y,T)=>{for(const _ of T.wa)_.va(d)&&(m=!0)})),m&&tg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mN(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new Et(Ie.comparator);u=u.insert(a,dn.newNoDocument(a,De.min()));const d=Ge().add(a),f=new rd(De.min(),new Map,new Et(ze),u,d);await tS(r,f),r.du=r.du.remove(a),r.Eu.delete(e),rg(r)}else await Kp(r.localStore,e,!1).then((()=>Yp(r,e,t))).catch(La)}async function gN(n,e){const t=je(n),r=e.batch.batchId;try{const s=await bx(t.localStore,e);rS(t,r,null),nS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gu(t,s)}catch(s){await La(s)}}async function vN(n,e,t){const r=je(n);try{const s=await(function(u,d){const f=je(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next((T=>(nt(T!==null,37113),y=T.keys(),f.mutationQueue.removeMutationBatch(m,T)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);rS(r,e,t),nS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gu(r,s)}catch(s){await La(s)}}function nS(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function rS(n,e,t){const r=je(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Yp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||iS(n,r)}))}function iS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),rg(n))}function bw(n,e,t){for(const r of t)r instanceof JT?(n.Au.addReference(r.key,e),yN(n,r)):r instanceof ZT?(ge(ng,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||iS(n,r.key)):ke(19791,{yu:r})}function yN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ge(ng,"New document in limbo: "+t),n.Iu.add(r),rg(n))}function rg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ie(ut.fromString(e)),r=n.mu.next();n.Eu.set(r,new aN(t)),n.du=n.du.insert(t,r),$T(n.remoteStore,new vs(Xr(Fm(t.path)),r,"TargetPurposeLimboResolution",Xh.ue))}}async function gu(n,e,t){const r=je(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const T=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,T?"current":"not-current")}if(m){s.push(m);const T=Gm.Es(f.targetId,m);a.push(T)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const y=je(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>te.forEach(m,(_=>te.forEach(_.Is,(P=>y.persistence.referenceDelegate.addReference(T,_.targetId,P))).next((()=>te.forEach(_.ds,(P=>y.persistence.referenceDelegate.removeReference(T,_.targetId,P)))))))))}catch(T){if(!ja(T))throw T;ge(Km,"Failed to update sequence numbers: "+T)}for(const T of m){const _=T.targetId;if(!T.fromCache){const P=y.Fs.get(_),O=P.snapshotVersion,D=P.withLastLimboFreeSnapshotVersion(O);y.Fs=y.Fs.insert(_,D)}}})(r.localStore,a))}async function _N(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ge(ng,"User change. New user:",e.toKey());const r=await FT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new fe(ee.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(t,r.Bs)}}function wN(n,e){const t=je(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let s=Ge();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function sS(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.hu.J_=rN.bind(null,e.eventManager),e.hu.pu=iN.bind(null,e.eventManager),e}function EN(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vN.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Cx(this.persistence,new Tx,e.initialUser,this.serializer)}Du(e){return new jT(qm.Vi,this.serializer)}bu(e){return new Nx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class TN extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nt(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ax(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new jT((r=>Ch.Vi(r,t)),this.serializer)}}class Jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_N.bind(null,this.syncEngine),await eN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nN})()}createDatastore(e){const t=id(e.databaseInfo.databaseId),r=(function(a){return new Lx(a)})(e.databaseInfo);return(function(a,u,d,f){return new zx(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new $x(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cw(this.syncEngine,t,0)),(function(){return _w.C()?new _w:new Ox})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,y){const T=new lN(s,a,u,d,f,m);return y&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=je(s);ge(Eo,"RemoteStore shutting down."),a.Ia.add(5),await mu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class SN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=hn.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ge(ks,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ge(ks,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=eg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cp(n,e){n.asyncQueue.verifyOperationInProgress(),ge(ks,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await FT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Is("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Is("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Aw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IN(n);ge(ks,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ew(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Ew(e.remoteStore,s))),n._onlineComponents=e}async function IN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(ks,"Using user provided OfflineComponentProvider");try{await cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Is("Error using user provided cache. Falling back to memory cache: "+t),await cp(n,new Ah)}}else ge(ks,"Using default OfflineComponentProvider"),await cp(n,new TN(void 0));return n._offlineComponents}async function aS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(ks,"Using user provided OnlineComponentProvider"),await Aw(n,n._uninitializedComponentsProvider._online)):(ge(ks,"Using default OnlineComponentProvider"),await Aw(n,new Jp))),n._onlineComponents}function CN(n){return aS(n).then((e=>e.syncEngine))}async function lS(n){const e=await aS(n),t=e.eventManager;return t.onListen=uN.bind(null,e.syncEngine),t.onUnlisten=dN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fN.bind(null,e.syncEngine),t}function bN(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new oS({next:_=>{y.Ou(),u.enqueueAndForget((()=>XT(a,T)));const P=_.docs.has(d);!P&&_.fromCache?m.reject(new fe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&_.fromCache&&f&&f.source==="server"?m.reject(new fe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),T=new YT(Fm(d.path),y,{includeMetadataChanges:!0,ka:!0});return QT(a,T)})(await lS(n),n.asyncQueue,e,t,r))),r.promise}function AN(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new oS({next:_=>{y.Ou(),u.enqueueAndForget((()=>XT(a,T))),_.fromCache&&f.source==="server"?m.reject(new fe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),T=new YT(d,y,{includeMetadataChanges:!0,ka:!0});return QT(a,T)})(await lS(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="firestore.googleapis.com",Pw=!0;class kw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=Pw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Pw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sx)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new DP;switch(r.type){case"firstParty":return new jP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Rw.get(t);r&&(ge("ComponentProvider","Removing Datastore"),Rw.delete(t),r.terminate())})(this),Promise.resolve()}}function RN(n,e,t,r={}){var s;n=ni(n,ad);const a=Di(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Bh(`https://${f}`),$h("Firestore",!0)),u.host!==cS&&u.host!==f&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!yo(m,d)&&(n._setSettings(m),r.mockUserToken)){let y,T;if(typeof r.mockUserToken=="string")y=r.mockUserToken,T=hn.MOCK_USER;else{y=eE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new fe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new hn(_)}n._authCredentials=new VP(new KE(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class xt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hu(t,xt._jsonSchema))return new xt(e,r||null,new Ie(ut.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Lt("string",xt._jsonSchemaVersion),referencePath:Lt("string")};class Ts extends Ua{constructor(e,t,r){super(e,t,Fm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ie(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function hS(n,e,...t){if(n=ct(n),XE("collection","path",e),n instanceof ad){const r=ut.fromString(e,...t);return $_(r),new Ts(n,null,r)}{if(!(n instanceof xt||n instanceof Ts))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return $_(r),new Ts(n.firestore,null,r)}}function Os(n,e,...t){if(n=ct(n),arguments.length===1&&(e=Om.newId()),XE("doc","path",e),n instanceof ad){const r=ut.fromString(e,...t);return B_(r),new xt(n,null,new Ie(r))}{if(!(n instanceof xt||n instanceof Ts))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return B_(r),new xt(n.firestore,n instanceof Ts?n.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class Nw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zT(this,"async_queue_retry"),this.oc=()=>{const r=up();r&&ge(xw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=up();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=up();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new bi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ja(e))throw e;ge(xw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",Ow(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Zm.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:Ow(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Ow(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class za extends ad{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Nw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nw(e),this._firestoreClient=void 0,await e}}}function PN(n,e){const t=typeof n=="object"?n:Hh(),r=typeof n=="string"?n:_h,s=au(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=ym("firestore");a&&RN(s,...a)}return s}function ig(n){if(n._terminated)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kN(n),n._firestoreClient}function kN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,y){return new ek(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,uS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new SN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(rn.fromBase64String(e))}catch(t){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:Lt("string",rr._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Jr._jsonSchema))return new Jr(e.latitude,e.longitude)}}Jr._jsonSchemaVersion="firestore/geoPoint/1.0",Jr._jsonSchema={type:Lt("string",Jr._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zr(e.vectorValues);throw new fe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zr._jsonSchemaVersion="firestore/vectorValue/1.0",Zr._jsonSchema={type:Lt("string",Zr._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=/^__.*__$/;class NN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class dS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ns(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:n})}}class sg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fS(this.Ec)&&xN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ON{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||id(e)}Dc(e,t,r,s=!1){return new sg({Ec:e,methodName:t,bc:r,path:nn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(n){const e=n._freezeSettings(),t=id(n._databaseId);return new ON(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DN(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);lg("Data must be an object, but it was:",u,r);const d=pS(r,u);let f,m;if(a.merge)f=new $n(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const T of a.mergeFields){const _=Zp(e,T,t);if(!u.contains(_))throw new fe(ee.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gS(y,_)||y.push(_)}f=new $n(y),m=u.fieldTransforms.filter((T=>f.covers(T.field)))}else f=null,m=u.fieldTransforms;return new NN(new On(d),f,m)}class cd extends ud{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class ag extends ud{_toFieldTransform(e){return new bk(e.path,new Xl)}isEqual(e){return e instanceof ag}}function VN(n,e,t,r){const s=n.Dc(1,e,t);lg("Data must be an object, but it was:",s,r);const a=[],u=On.empty();xs(r,((f,m)=>{const y=ug(e,f,t);m=ct(m);const T=s.gc(y);if(m instanceof cd)a.push(y);else{const _=vu(m,T);_!=null&&(a.push(y),u.set(y,_))}}));const d=new $n(a);return new dS(u,d,s.fieldTransforms)}function MN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[Zp(e,r,t)],f=[s];if(a.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)d.push(Zp(e,a[_])),f.push(a[_+1]);const m=[],y=On.empty();for(let _=d.length-1;_>=0;--_)if(!gS(m,d[_])){const P=d[_];let O=f[_];O=ct(O);const D=u.gc(P);if(O instanceof cd)m.push(P);else{const A=vu(O,D);A!=null&&(m.push(P),y.set(P,A))}}const T=new $n(m);return new dS(y,T,u.fieldTransforms)}function LN(n,e,t,r=!1){return vu(t,n.Dc(r?4:3,e))}function vu(n,e){if(mS(n=ct(n)))return lg("Unsupported field value:",e,n),pS(n,e);if(n instanceof ud)return(function(r,s){if(!fS(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=vu(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ft.fromDate(r);return{timestampValue:Ih(s.serializer,a)}}if(r instanceof ft){const a=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(s.serializer,a)}}if(r instanceof Jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:kT(s.serializer,r._byteString)};if(r instanceof xt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Hm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zr)return(function(u,d){return{mapValue:{fields:{[sT]:{stringValue:oT},[wh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Um(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Qh(r)}`)})(n,e)}function pS(n,e){const t={};return ZE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(n,((r,s)=>{const a=vu(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function mS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Jr||n instanceof rr||n instanceof xt||n instanceof ud||n instanceof Zr)}function lg(n,e,t){if(!mS(t)||!YE(t)){const r=Qh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Zp(n,e,t){if((e=ct(e))instanceof ld)return e._internalPath;if(typeof e=="string")return ug(n,e);throw Rh("Field path arguments must be of type string or ",n,!1,void 0,t)}const jN=new RegExp("[~\\*/\\[\\]]");function ug(n,e,t){if(e.search(jN)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new fe(ee.INVALID_ARGUMENT,d+n+f)}function gS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FN extends vS{data(){return super.data()}}function cg(n,e){return typeof e=="string"?ug(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class zN extends hg{}function yS(n,e,...t){let r=[];e instanceof hg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof dg)).length,d=a.filter((f=>f instanceof hd)).length;if(u>1||u>0&&d>0)throw new fe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class hd extends zN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hd(e,t,r)}_apply(e){const t=this._parse(e);return wS(e._query,t),new Ua(e.firestore,e.converter,Bp(e._query,t))}_parse(e){const t=og(e.firestore);return(function(a,u,d,f,m,y,T){let _;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Vw(T,y);const O=[];for(const D of T)O.push(Dw(f,a,D));_={arrayValue:{values:O}}}else _=Dw(f,a,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Vw(T,y),_=LN(d,u,T,y==="in"||y==="not-in");return Mt.create(m,y,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _S(n,e,t){const r=e,s=cg("where",n);return hd._create(s,r,t)}class dg extends hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)wS(u,f),u=Bp(u,f)})(e._query,t),new Ua(e.firestore,e.converter,Bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dw(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new fe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Ie.isDocumentKey(r))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Y_(n,new Ie(r))}if(t instanceof xt)return Y_(n,t._key);throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(t)}.`)}function Vw(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wS(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BN{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xs(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[wh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>kt(u.doubleValue)));return new Zr(a)}convertGeoPoint(e){return new Jr(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const t=bs(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);nt(MT(r),9688,{name:e});const s=new Kl(r.get(1),r.get(3)),a=new Ie(r.popFirst(5));return s.isEqual(t)||xi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class go extends vS{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:Lt("string",go._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class ih extends go{data(e={}){return super.data(e)}}class Sa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ol(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ih(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:HN(d.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){n=ni(n,xt);const e=ni(n.firestore,za);return bN(ig(e),n._key).then((t=>GN(e,n,t)))}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Lt("string",Sa._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class ES extends BN{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function TS(n){n=ni(n,Ua);const e=ni(n.firestore,za),t=ig(e),r=new ES(e);return UN(n._query),AN(t,n._query).then((s=>new Sa(e,r,n,s)))}function fg(n,e,t){n=ni(n,xt);const r=ni(n.firestore,za),s=$N(n.converter,e,t);return pg(r,[DN(og(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ar.none())])}function WN(n,e,t,...r){n=ni(n,xt);const s=ni(n.firestore,za),a=og(s);let u;return u=typeof(e=ct(e))=="string"||e instanceof ld?MN(a,"updateDoc",n._key,e,t,r):VN(a,"updateDoc",n._key,e),pg(s,[u.toMutation(n._key,Ar.exists(!0))])}function qN(n){return pg(ni(n.firestore,za),[new zm(n._key,Ar.none())])}function pg(n,e){return(function(r,s){const a=new bi;return r.asyncQueue.enqueueAndForget((async()=>pN(await CN(r),s,a))),a.promise})(ig(n),e)}function GN(n,e,t){const r=t.docs.get(e._key),s=new ES(n);return new go(n,s,e._key,r,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}function em(){return new ag("serverTimestamp")}(function(e,t=!0){(function(s){Ma=s})(Co),Ss(new Ri("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new za(new MP(r.getProvider("auth-internal")),new FP(u,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(m.options.projectId,y)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ir(L_,j_,e),ir(L_,j_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="type.googleapis.com/google.protobuf.Int64Value",QN="type.googleapis.com/google.protobuf.UInt64Value";function SS(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ph(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ph(e));if(typeof n=="function"||typeof n=="object")return SS(n,e=>Ph(e));throw new Error("Data cannot be encoded in JSON: "+n)}function xa(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case KN:case QN:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>xa(e)):typeof n=="function"||typeof n=="object"?SS(n,e=>xa(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dn extends kr{constructor(e,t,r){super(`${mg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Dn.prototype)}}function XN(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kh(n,e){let t=XN(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Mw[u])return new Dn("internal","internal");t=Mw[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=xa(s))}}catch{}return t==="ok"?null:new Dn(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="us-central1",JN=/^data: (.*?)(?:\n|$)/;function ZN(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Dn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class eO{constructor(e,t,r,s,a=tm,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new YN(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=tm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function tO(n,e,t){const r=Di(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Bh(n.emulatorOrigin),$h("Functions",!0))}function nO(n,e,t){const r=s=>iO(n,e,s,{});return r.stream=(s,a)=>oO(n,e,s,a),r}async function rO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function IS(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function iO(n,e,t,r){const s=n._url(e);return sO(n,s,t,r)}async function sO(n,e,t,r){t=Ph(t);const s={data:t},a=await IS(n,r),u=r.timeout||7e4,d=ZN(u),f=await Promise.race([rO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new Dn("cancelled","Firebase Functions instance was deleted.");const m=kh(f.status,f.json);if(m)throw m;if(!f.json)throw new Dn("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new Dn("internal","Response is missing data field.");return{data:xa(y)}}function oO(n,e,t,r){const s=n._url(e);return aO(n,s,t,r||{})}async function aO(n,e,t,r){var s;t=Ph(t);const a={data:t},u=await IS(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const D=new Dn("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const O=kh(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const y=new Promise((P,O)=>{f=P,m=O});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const P=new Dn("cancelled","Request was cancelled.");m(P)});const T=d.body.getReader(),_=lO(T,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const P=_.getReader();return{async next(){const{value:O,done:D}=await P.read();return{value:O,done:D}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:y}}function lO(n,e,t,r){const s=(u,d)=>{const f=u.match(JN);if(!f)return;const m=f[1];try{const y=JSON.parse(m);if("result"in y){e(xa(y.result));return}if("message"in y){d.enqueue(xa(y.message));return}if("error"in y){const T=kh(0,y);d.error(T),t(T);return}}catch(y){if(y instanceof Dn){d.error(y),t(y);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new Dn("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:y}=await n.read();if(y){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const _=new Dn("cancelled","Request was cancelled");u.error(_),t(_),await n.cancel();return}d+=a.decode(m,{stream:!0});const T=d.split(`
`);d=T.pop()||"";for(const _ of T)_.trim()&&s(_.trim(),u);return f()}catch(m){const y=m instanceof Dn?m:kh(0,null);u.error(y),t(y)}}},cancel(){return n.cancel()}})}const Lw="@firebase/functions",jw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="auth-internal",cO="app-check-internal",hO="messaging-internal";function dO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(uO),u=t.getProvider(hO),d=t.getProvider(cO);return new eO(s,a,u,d,r)};Ss(new Ri(mg,e,"PUBLIC").setMultipleInstances(!0)),ir(Lw,jw,n),ir(Lw,jw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n=Hh(),e=tm){const r=au(ct(n),mg).getImmediate({identifier:e}),s=ym("functions");return s&&pO(r,...s),r}function pO(n,e,t){tO(ct(n),e,t)}function xr(n,e,t){return nO(ct(n),e)}dO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebasestorage.googleapis.com",bS="storageBucket",mO=120*1e3,gO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends kr{constructor(e,t,r=0){super(hp(e),`Firebase Storage: ${t} (${hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var It;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(It||(It={}));function hp(n){return"storage/"+n}function gg(){const n="An unknown error occurred, please check the error payload for server response.";return new Ct(It.UNKNOWN,n)}function vO(n){return new Ct(It.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yO(n){return new Ct(It.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _O(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(It.UNAUTHENTICATED,n)}function wO(){return new Ct(It.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EO(n){return new Ct(It.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function TO(){return new Ct(It.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SO(){return new Ct(It.CANCELED,"User canceled the upload/download.")}function IO(n){return new Ct(It.INVALID_URL,"Invalid URL '"+n+"'.")}function CO(n){return new Ct(It.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bO(){return new Ct(It.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bS+"' property when initializing the app?")}function AO(){return new Ct(It.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RO(){return new Ct(It.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PO(n){return new Ct(It.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function nm(n){return new Ct(It.INVALID_ARGUMENT,n)}function AS(){return new Ct(It.APP_DELETED,"The Firebase app was deleted.")}function kO(n){return new Ct(It.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zl(n,e){return new Ct(It.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bl(n){throw new Ct(It.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=wn.makeFromUrl(e,t)}catch{return new wn(e,"")}if(r.path==="")return r;throw CO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",P=new RegExp(`^https?://${T}/${y}/b/${s}/o${_}`,"i"),O={bucket:1,path:3},D=t===CS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",z=new RegExp(`^https?://${D}/${s}/${A}`,"i"),q=[{regex:d,indices:f,postModify:a},{regex:P,indices:O,postModify:m},{regex:z,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<q.length;Z++){const K=q[Z],J=K.regex.exec(e);if(J){const R=J[K.indices.bucket];let b=J[K.indices.path];b||(b=""),r=new wn(R,b),K.postModify(r);break}}if(r==null)throw IO(e);return r}}class xO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function y(...A){m||(m=!0,e.apply(null,A))}function T(A){s=setTimeout(()=>{s=null,n(P,f())},A)}function _(){a&&clearTimeout(a)}function P(A,...z){if(m){_();return}if(A){_(),y.call(null,A,...z);return}if(f()||u){_(),y.call(null,A,...z);return}r<64&&(r*=2);let q;d===1?(d=2,q=0):q=(r+Math.random())*1e3,T(q)}let O=!1;function D(A){O||(O=!0,_(),!m&&(s!==null?(A||(d=2),clearTimeout(s),T(0)):A||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,D(!0)},t),D}function OO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(n){return n!==void 0}function VO(n){return typeof n=="object"&&!Array.isArray(n)}function vg(n){return typeof n=="string"||n instanceof String}function Fw(n){return yg()&&n instanceof Blob}function yg(){return typeof Blob<"u"}function rm(n,e,t,r){if(r<e)throw nm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function RS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var vo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vo||(vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t,r,s,a,u,d,f,m,y,T,_=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=T,this.retry=_,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,D)=>{this.resolve_=O,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===vo.NO_ERROR,f=a.getStatus();if(!d||MO(f,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===vo.ABORT;r(!1,new zc(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new zc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());DO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=gg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?AS():SO();u(f)}else{const f=TO();u(f)}};this.canceled_?t(!1,new zc(!1,null,!0)):this.backoffId_=NO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function jO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function zO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function BO(n,e,t,r,s,a,u=!0,d=!1){const f=RS(n.urlParams),m=n.url+f,y=Object.assign({},n.headers);return UO(y,e),jO(y,t),FO(y,a),zO(y,r),new LO(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HO(...n){const e=$O();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(yg())return new Blob(n);throw new Ct(It.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(n){if(typeof atob>"u")throw PO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dp{constructor(e,t){this.data=e,this.contentType=t||null}}function GO(n,e){switch(n){case Kr.RAW:return new dp(PS(e));case Kr.BASE64:case Kr.BASE64URL:return new dp(kS(n,e));case Kr.DATA_URL:return new dp(QO(e),XO(e))}throw gg()}function PS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KO(n){let e;try{e=decodeURIComponent(n)}catch{throw zl(Kr.DATA_URL,"Malformed data URL.")}return PS(e)}function kS(n,e){switch(n){case Kr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qO(e)}catch(s){throw s.message.includes("polyfill")?s:zl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw zl(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=YO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function QO(n){const e=new xS(n);return e.base64?kS(Kr.BASE64,e.rest):KO(e.rest)}function XO(n){return new xS(n).contentType}function YO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){let r=0,s="";Fw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Fw(this.data_)){const r=this.data_,s=WO(r,e,t);return s===null?null:new ms(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ms(r,!0)}}static getBlob(...e){if(yg()){const t=e.map(r=>r instanceof ms?r.data_:r);return new ms(HO.apply(null,t))}else{const t=e.map(u=>vg(u)?GO(Kr.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new ms(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n){let e;try{e=JSON.parse(n)}catch{return null}return VO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ZO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function NS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(n,e){return e}class _n{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||eD}}let Bc=null;function tD(n){return!vg(n)||n.length<2?n:NS(n)}function OS(){if(Bc)return Bc;const n=[];n.push(new _n("bucket")),n.push(new _n("generation")),n.push(new _n("metageneration")),n.push(new _n("name","fullPath",!0));function e(a,u){return tD(u)}const t=new _n("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new _n("size");return s.xform=r,n.push(s),n.push(new _n("timeCreated")),n.push(new _n("updated")),n.push(new _n("md5Hash",null,!0)),n.push(new _n("cacheControl",null,!0)),n.push(new _n("contentDisposition",null,!0)),n.push(new _n("contentEncoding",null,!0)),n.push(new _n("contentLanguage",null,!0)),n.push(new _n("contentType",null,!0)),n.push(new _n("metadata","customMetadata",!0)),Bc=n,Bc}function nD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new wn(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function rD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return nD(r,n),r}function DS(n,e,t){const r=_g(e);return r===null?null:rD(n,r,t)}function iD(n,e,t,r){const s=_g(e);if(s===null||!vg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,T=n.fullPath,_="/b/"+u(y)+"/o/"+u(T),P=yu(_,t,r),O=RS({alt:"media",token:m});return P+O})[0]}function sD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="prefixes",zw="items";function oD(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Uw])for(const s of t[Uw]){const a=s.replace(/\/$/,""),u=n._makeStorageReference(new wn(e,a));r.prefixes.push(u)}if(t[zw])for(const s of t[zw]){const a=n._makeStorageReference(new wn(e,s.name));r.items.push(a)}return r}function aD(n,e,t){const r=_g(t);return r===null?null:oD(n,e,r)}class fd{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n){if(!n)throw gg()}function lD(n,e){function t(r,s){const a=DS(n,s,e);return wg(a!==null),a}return t}function uD(n,e){function t(r,s){const a=aD(n,e,s);return wg(a!==null),a}return t}function cD(n,e){function t(r,s){const a=DS(n,s,e);return wg(a!==null),iD(a,s,n.host,n._protocol)}return t}function Eg(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=wO():s=_O():t.getStatus()===402?s=yO(n.bucket):t.getStatus()===403?s=EO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function VS(n){const e=Eg(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=vO(n.path)),a.serverResponse=s.serverResponse,a}return t}function hD(n,e,t,r,s){const a={};e.isRoot?a.prefix="":a.prefix=e.path+"/",t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),s&&(a.maxResults=s);const u=e.bucketOnlyServerUrl(),d=yu(u,n.host,n._protocol),f="GET",m=n.maxOperationRetryTime,y=new fd(d,f,uD(n,e.bucket),m);return y.urlParams=a,y.errorHandler=Eg(e),y}function dD(n,e,t){const r=e.fullServerUrl(),s=yu(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new fd(s,a,cD(n,t),u);return d.errorHandler=VS(e),d}function fD(n,e){const t=e.fullServerUrl(),r=yu(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new fd(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=VS(e),d}function pD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function mD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=pD(null,e)),r}function gD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let q="";for(let Z=0;Z<2;Z++)q=q+Math.random().toString().slice(2);return q}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=mD(e,r,s),y=sD(m,t),T="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,_=`\r
--`+f+"--",P=ms.getBlob(T,r,_);if(P===null)throw AO();const O={name:m.fullPath},D=yu(a,n.host,n._protocol),A="POST",z=n.maxUploadRetryTime,G=new fd(D,A,lD(n,t),z);return G.urlParams=O,G.headers=u,G.body=P.uploadData(),G.errorHandler=Eg(e),G}class vD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw bl("cannot .send() more than once");if(Di(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yD extends vD{initXhr(){this.xhr_.responseType="text"}}function pd(){return new yD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t){this._service=e,t instanceof wn?this._location=t:this._location=wn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new To(e,t)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NS(this._location.path)}get storage(){return this._service}get parent(){const e=JO(this._location.path);if(e===null)return null;const t=new wn(this._location.bucket,e);return new To(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw kO(e)}}function _D(n,e,t){n._throwIfRoot("uploadBytes");const r=gD(n.storage,n._location,OS(),new ms(e,!0),t);return n.storage.makeRequestWithTokens(r,pd).then(s=>({metadata:s,ref:n}))}function wD(n){const e={prefixes:[],items:[]};return MS(n,e).then(()=>e)}async function MS(n,e,t){const s=await ED(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await MS(n,e,s.nextPageToken)}function ED(n,e){e!=null&&typeof e.maxResults=="number"&&rm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pd)}function TD(n){n._throwIfRoot("getDownloadURL");const e=dD(n.storage,n._location,OS());return n.storage.makeRequestWithTokens(e,pd).then(t=>{if(t===null)throw RO();return t})}function SD(n){n._throwIfRoot("deleteObject");const e=fD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pd)}function ID(n,e){const t=ZO(n._location.path,e),r=new wn(n._location.bucket,t);return new To(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n){return/^[A-Za-z]+:\/\//.test(n)}function bD(n,e){return new To(n,e)}function LS(n,e){if(n instanceof Tg){const t=n;if(t._bucket==null)throw bO();const r=new To(t,t._bucket);return e!=null?LS(r,e):r}else return e!==void 0?ID(n,e):n}function AD(n,e){if(e&&CD(e)){if(n instanceof Tg)return bD(n,e);throw nm("To use ref(service, url), the first argument must be a Storage instance.")}else return LS(n,e)}function Bw(n,e){const t=e==null?void 0:e[bS];return t==null?null:wn.makeFromBucketSpec(t,n)}function RD(n,e,t,r={}){n.host=`${e}:${t}`;const s=Di(e);s&&(Bh(`https://${n.host}/b`),$h("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:eE(a,n.app.options.projectId))}class Tg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=CS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mO,this._maxUploadRetryTime=gO,this._requests=new Set,s!=null?this._bucket=wn.makeFromBucketSpec(s,this._host):this._bucket=Bw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=Bw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new To(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new xO(AS());{const u=BO(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const $w="@firebase/storage",Hw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="storage";function PD(n,e,t){return n=ct(n),_D(n,e,t)}function kD(n){return n=ct(n),wD(n)}function xD(n){return n=ct(n),TD(n)}function FS(n){return n=ct(n),SD(n)}function Sg(n,e){return n=ct(n),AD(n,e)}function ND(n=Hh(),e){n=ct(n);const r=au(n,jS).getImmediate({identifier:e}),s=ym("storage");return s&&OD(r,...s),r}function OD(n,e,t,r={}){RD(n,e,t,r)}function DD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Tg(t,r,s,e,Co)}function VD(){Ss(new Ri(jS,DD,"PUBLIC").setMultipleInstances(!0)),ir($w,Hw,""),ir($w,Hw,"esm2017")}VD();const MD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},md=rE(MD),En=NP(md),ii=PN(md),Ig=ND(md),Nr=fO(md,"us-central1");wR(En,PE);xr(Nr,"bootstrapFirstAdmin");xr(Nr,"setUserRole");const LD=xr(Nr,"ensureCoachAccess"),jD=xr(Nr,"acceptCoachTrial"),FD=xr(Nr,"getCoachAccessState"),UD=xr(Nr,"completeClientOnboarding"),zD=xr(Nr,"listCoachesForSupervisor"),BD=xr(Nr,"activateCoachSubscription"),$D=xr(Nr,"renewCoachSubscription"),HD=xr(Nr,"disableCoachSubscription"),WD=xr(Nr,"deleteMyProfile");async function qD(){return(await LD()).data}async function US(){return(await jD()).data}async function Ww(){return(await FD()).data}async function GD(n){return(await UD(n)).data}async function KD(){return(await zD()).data}async function qw(n){return(await BD({uid:n})).data}async function QD(n){return(await $D({uid:n})).data}async function XD(n){return(await HD({uid:n})).data}async function zS(){return(await WD()).data}async function YD(){return En.currentUser?En.currentUser.getIdTokenResult(!0):null}async function BS(n){const e=n??En.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await qh(En),null}throw t}}async function JD(n){const e=n??En.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function $S(){return{createdAt:em(),updatedAt:em()}}function HS(){return{updatedAt:em()}}function Ro(){var e;const n=(e=En.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function WS(n={}){const e=Ro(),t=Os(ii,"users",e);return await fg(t,{uid:e,...$S(),...n},{merge:!0}),t}async function im(n){const e=n??Ro();return dd(Os(ii,"users",e))}async function ZD(n){const e=n??Ro(),t=yS(hS(ii,"users"),_S("assignedCoachId","==",e));return TS(t)}async function qS(n,e){return dd(Os(ii,"users",n,"private",e))}async function e2(n,e){await fg(Os(ii,"users",n,"private","onboarding"),{...e,...HS()},{merge:!0})}async function t2(n){const e=Ro(),t=Os(ii,"plans",n.clientId);return await fg(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...$S()}),t}async function GS(n,e){const t=e??Ro(),r=n==="client"?"clientId":"trainerId",s=yS(hS(ii,"plans"),_S(r,"==",t));return TS(s)}async function n2(n){const e=n??Ro();return dd(Os(ii,"plans",e))}async function r2(n,e){await WN(Os(ii,"plans",n),{...e,...HS()})}async function i2(n){const e=Os(ii,"plans",n),t=await dd(e);if(t.exists()){const r=t.data(),s=a2(r.exercises);await Promise.allSettled(s.map(d=>l2(d)));const a=typeof r.trainerId=="string"?r.trainerId:"",u=typeof r.clientId=="string"?r.clientId:"";a&&u&&await u2(a,u)}await qN(e)}async function s2(n,e){const t=Ro(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=o2(t,n,s);return await PD(a,e,{contentType:e.type||"application/octet-stream"}),xD(a)}function o2(n,e,t){return Sg(Ig,`workout-media/${n}/${e}/${t}`)}function a2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;Gw(r)&&e.add(r),Gw(s)&&e.add(s)}return[...e]}function Gw(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function l2(n){try{await FS(Sg(Ig,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}async function u2(n,e){const t=Sg(Ig,`workout-media/${n}/${e}`);await KS(t)}async function KS(n){try{const{items:e,prefixes:t}=await kD(n);await Promise.allSettled(e.map(r=>FS(r))),await Promise.allSettled(t.map(r=>KS(r)))}catch(e){console.warn("Unable to clear storage folder",{path:n.fullPath,error:e})}}function Ba(){const[n,e]=V.useState(!0),[t,r]=V.useState(En.currentUser),[s,a]=V.useState(null),[u,d]=V.useState(!1);return V.useEffect(()=>bE(En,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await Cg(f);const m=await BS(f);a(m),d(await JD(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await qh(En),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),V.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const sm=new Si;sm.setCustomParameters({prompt:"select_account"});async function Cg(n){(await im(n.uid)).exists()||await WS({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function Kw(){try{const n=await UR(En,sm);return await Cg(n.user),{redirected:!1,user:n.user}}catch(n){if(h2(n))return await qR(En,sm),{redirected:!0,user:null};throw n}}async function c2(){try{const n=await KR(En);return n!=null&&n.user&&await Cg(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await qh(En),null;throw n}}async function Rr(){return qh(En)}function h2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function QS(n){return n.replace(/[^\d]/g,"")}const d2="393405882404".trim(),XS=QS(d2),Sr=XS.length>6;function sh(n,e){const t=QS(e??XS),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function f2(n){return n.map(e=>({id:e.id,...e.data()}))}function Bt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Hr="bw_login_intent";function p2(n){return n==="trainer"||n==="admin"}function m2(){const{user:n,role:e}=Ba(),t=iu(),{showError:r}=Uh(),[s,a]=V.useState(!1),[u,d]=V.useState(""),[f,m]=V.useState(!1),[y,T]=V.useState(!1),[_,P]=V.useState(null),O=V.useRef(0),D=V.useMemo(()=>sh("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);V.useEffect(()=>{async function J(){try{await c2()}catch(R){const b=Bt(R);d(b),r(b)}}J()},[r]);async function A(J=10){if(!n)return!1;for(let R=0;R<J;R+=1){await YD();const b=await BS(n);if(p2(b))return!0;await new Promise(k=>setTimeout(k,500))}return!1}async function z(){if(!n)return;const J=++O.current,R=()=>J!==O.current||y;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await WS({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),R())return;const b=await qD();if(R())return;if(b.isExpired){if(await Rr(),sessionStorage.removeItem(Hr),R())return;P({mode:"expired",access:b});return}if(b.requiresTrialAcceptance){if(R())return;P({mode:"trial",access:b});return}const k=await A();if(R())return;if(!k){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Hr),t("/app/coach",{replace:!0})}catch(b){if(R())return;const k=Bt(b);d(k),r(k)}finally{R()||m(!1)}}V.useEffect(()=>{async function J(){if(!n){m(!1),y||d("");return}if(f||y)return;if(sessionStorage.getItem(Hr)==="coach"){await z();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}J()},[n,e,f,y]),V.useEffect(()=>{y&&(n||(T(!1),t("/auth",{replace:!0})))},[y,n,t]);async function G(){O.current+=1,T(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(Hr),P(null);try{await Rr()}catch(J){d(Bt(J)),T(!1)}}async function q(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const J=await US();if(J.isExpired){await Rr(),sessionStorage.removeItem(Hr),P({mode:"expired",access:J});return}if(!await A()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}P(null),sessionStorage.removeItem(Hr),t("/app/coach",{replace:!0})}catch(J){const R=Bt(J);d(R),r(R)}finally{a(!1)}}async function Z(){a(!0),d(""),P(null);try{if(sessionStorage.setItem(Hr,"client"),(await Kw()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(J){const R=Bt(J);d(R),r(R)}finally{a(!1)}}async function K(){a(!0),d(""),P(null);try{sessionStorage.setItem(Hr,"coach");const J=await Kw();if(J.redirected){d("Ti sto reindirizzando a Google...");return}if(!J.user){d("Accesso non completato. Riprova.");return}await z()}catch(J){const R=Bt(J);d(R),r(R)}finally{a(!1)}}return(_==null?void 0:_.mode)==="trial"?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card fullscreen-gate",children:[E.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),E.jsx("h1",{children:"Prova gratuita 15 giorni"}),E.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),E.jsx("button",{className:"btn",type:"button",disabled:s,onClick:()=>void q(),children:s?"Attivazione...":"Accetta e continua"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void G(),children:"Esci"}),u?E.jsx("p",{className:"message",children:u}):null]})}):(_==null?void 0:_.mode)==="expired"?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card fullscreen-gate",children:[E.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),E.jsx("h1",{children:"Periodo di prova terminato"}),E.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),E.jsx("a",{className:"btn btn-whatsapp",href:D,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{P(null),sessionStorage.removeItem(Hr)},children:"Torna all'accesso"})]})}):n&&e&&sessionStorage.getItem(Hr)!=="coach"?E.jsx(Cr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accedi con Google"}),E.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),E.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void Z(),type:"button",children:s?"Connessione...":"Continua con Google"}),E.jsx("div",{className:"divider"}),E.jsx("h2",{children:"Sei un Coach?"}),E.jsx("p",{className:"hint",children:"Accedi o registrati come coach con Google."}),E.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void K(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach"}),u?E.jsx("p",{className:"message",children:u}):null,E.jsx(YC,{})]})})}function YS({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u,[m,y]=V.useState(!1),T=V.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),_=V.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),P=m?"__more__":a,O=m||!m&&_.some(A=>A.id===a);function D(A,z){const G=(z==="mobile"?P:a)===A.id,q=z==="mobile"?A.mobileLabel??A.label:A.label;return E.jsxs("button",{className:`shell-tab shell-tab-${z} ${G?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(A.id),z==="mobile"&&y(!1)},"aria-current":G?"page":void 0,children:[A.icon?E.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:A.icon}):null,E.jsx("span",{className:"shell-tab-label",children:q})]},`${z}-${A.id}`)}return E.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?E.jsxs("aside",{className:"shell-sidebar desktop-only",children:[E.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),E.jsx("h2",{children:e}),E.jsx("p",{className:"hint",children:t}),E.jsx("nav",{className:"shell-sidebar-nav",children:s.map(A=>D(A,"desktop"))}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Rr(),children:"Esci dal profilo"})]}):null,E.jsxs("section",{className:"shell-main",children:[E.jsxs("section",{className:"hero hero-compact",children:[E.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),E.jsx("h1",{children:e}),E.jsx("p",{className:"hero-sub",children:t}),r,f?null:E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Rr(),children:"Esci dal profilo"})]}),E.jsx("section",{className:"stack app-stack",children:d})]}),E.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?T.map(A=>D(A,"mobile")):E.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[E.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),E.jsx("span",{className:"shell-tab-label",children:"Home"})]}),_.length>0?E.jsxs("button",{className:`shell-tab shell-tab-mobile ${O||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>y(A=>!A),children:[E.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),E.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,E.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Rr(),children:[E.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),E.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&_.length>0?E.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card mobile-more-card",children:[E.jsx("h3",{children:"Altre sezioni"}),E.jsx("div",{className:"mobile-more-list",children:_.map(A=>E.jsxs("button",{className:`step-tab ${a===A.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(A.id),y(!1)},children:[A.icon?`${A.icon} `:"",A.label]},`more-${A.id}`))}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>y(!1),children:"Chiudi"})]})}):null]})}function fp(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Qw(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function Xw(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function g2(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function v2(){const{role:n,user:e}=Ba(),t=iu(),{showError:r}=Uh(),[s,a]=V.useState([]),[u,d]=V.useState(!1),[f,m]=V.useState(!0),[y,T]=V.useState(null),[_,P]=V.useState(null),[O,D]=V.useState("plan"),[A,z]=V.useState(!1),[G,q]=V.useState(!1),Z="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";V.useEffect(()=>{async function I(){if(e)try{const F=(await im(e.uid)).data();if(!(F!=null&&F.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{m(!1)}}I()},[e,t]);async function K(){d(!0);try{const I=(e==null?void 0:e.uid)??"",L=I?await im(I):null,F=(L==null?void 0:L.data())??{},N=I?await qS(I,"onboarding"):null;P((N==null?void 0:N.data())??null);const he=Array.from(new Set([I,(F.uid??"").trim(),(F.clientId??"").trim()].filter(ne=>ne.length>0))),Ue=await Promise.allSettled(he.flatMap(ne=>[GS("client",ne),n2(ne)])),Ve=new Map;for(const ne of Ue){if(ne.status!=="fulfilled")continue;const de=ne.value;if("docs"in de)for(const ae of f2(de.docs))Ve.set(ae.id,ae);else if(de.exists()){const ae={id:de.id,...de.data()};Ve.set(ae.id,ae)}}const Oe=Array.from(Ve.values()).sort((ne,de)=>{const ae=he.includes(ne.id)?0:1,B=he.includes(de.id)?0:1;return ae-B});a(Oe)}catch(I){r(Bt(I))}finally{d(!1)}}V.useEffect(()=>{e&&(n==="client"||n===null)&&K()},[n,e==null?void 0:e.uid]);async function J(){q(!0);try{await zS(),await Rr().catch(()=>{}),t("/auth",{replace:!0})}catch(I){r(Bt(I))}finally{q(!1),z(!1)}}const R=s[0],b=g2(R==null?void 0:R.exercises),k=[{label:"Nome e cognome",value:_==null?void 0:_.fullName},{label:"E-mail",value:(_==null?void 0:_.email)??(e==null?void 0:e.email)},{label:"Telefono",value:_==null?void 0:_.phone},{label:"Et",value:_==null?void 0:_.age},{label:"Sesso",value:_==null?void 0:_.sex},{label:"Altezza",value:_!=null&&_.heightCm?`${_.heightCm} cm`:""},{label:"Peso",value:_!=null&&_.weightKg?`${_.weightKg} kg`:""},{label:"Obiettivo",value:_==null?void 0:_.objectivePrimary}].filter(I=>(I.value??"").toString().trim().length>0);return e?f?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Prepariamo la tua area"}),E.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):E.jsxs(YS,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:O,onSectionChange:I=>D(I),headerAction:E.jsx("div",{className:"mobile-only",children:E.jsx("a",{className:`btn btn-whatsapp ${Sr?"":"btn-disabled"}`.trim(),href:Sr?sh(Z):"#",onClick:I=>{Sr||I.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[O==="plan"?E.jsxs(E.Fragment,{children:[E.jsxs("article",{className:"card desktop-only",children:[E.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),E.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),E.jsx("a",{className:`btn btn-whatsapp ${Sr?"":"btn-disabled"}`.trim(),href:Sr?sh(Z):"#",onClick:I=>{Sr||I.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),Sr?null:E.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}),E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"La tua scheda tecnica"}),R?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"plan-head",children:[E.jsx("p",{className:"hint",children:"Programma attivo"}),E.jsx("h3",{children:R.title})]}),E.jsx("div",{className:"exercise-grid",children:b.map((I,L)=>E.jsxs("article",{className:"exercise-card",children:[E.jsx("p",{className:"exercise-name",children:I.name||`Esercizio ${L+1}`}),E.jsxs("div",{className:"exercise-meta",children:[E.jsxs("span",{children:[I.sets??"-"," serie"]}),E.jsxs("span",{children:[I.reps||"-"," reps"]}),E.jsx("span",{children:I.weight||"Peso libero"})]}),I.mediaUrl?E.jsx("button",{className:"btn-link",type:"button",onClick:()=>T({url:I.mediaUrl,label:I.name||`Esercizio ${L+1}`}),children:fp(I.mediaUrl)||Xw(I.mediaUrl)?"Apri video":Qw(I.mediaUrl)?"Apri immagine":"Apri link"}):E.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${L}`))})]}):E.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,O==="profile"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Profilo e anagrafica"}),k.length>0?E.jsx("div",{className:"client-info-block",children:k.map(I=>E.jsxs("p",{className:"hint",children:[E.jsxs("strong",{children:[I.label,":"]})," ",I.value]},I.label))}):E.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),E.jsx("a",{className:`btn btn-whatsapp ${Sr?"":"btn-disabled"}`.trim(),href:Sr?sh(Z):"#",onClick:I=>{Sr||I.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),Sr?null:E.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."}),E.jsx("div",{className:"divider"}),E.jsx("h3",{children:"Elimina profilo"}),E.jsx("p",{className:"hint",children:"Se elimini il profilo perderai tutti i dati associati al tuo account, in linea con le policy aziendali."}),E.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>z(!0),children:"Elimina il mio profilo"})]}):null,u?E.jsx("p",{className:"message",children:"Caricamento..."}):null,y?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:y.label}),fp(y.url)?E.jsx("iframe",{title:y.label,src:fp(y.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Qw(y.url)?E.jsx("img",{src:y.url,alt:y.label,className:"media-frame media-image"}):Xw(y.url)?E.jsx("video",{src:y.url,controls:!0,className:"media-frame"}):E.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",E.jsx("a",{href:y.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>T(null),children:"Chiudi"})]})}):null,A?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:"Conferma eliminazione profilo"}),E.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente account, anagrafica, scheda e dati collegati."}),E.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:G,onClick:()=>z(!1),children:"Annulla"}),E.jsx("button",{className:"btn btn-danger",type:"button",disabled:G,onClick:()=>void J(),children:G?"Eliminazione...":"Conferma eliminazione"})]})]})}):null]}):E.jsx(Cr,{to:"/auth",replace:!0})}function So(n){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(n)}function y2(n,e){if(So(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(So(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JS(n){var e=y2(n,"string");return So(e)=="symbol"?e:e+""}function Dl(n,e,t){return(e=JS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(t),!0).forEach(function(r){Dl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _2(n){if(Array.isArray(n))return n}function w2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(y){m=!0,s=y}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function om(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ZS(n,e){if(n){if(typeof n=="string")return om(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?om(n,e):void 0}}function E2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ai(n,e){return _2(n)||w2(n,e)||ZS(n,e)||E2()}function T2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Vi(n,e){if(n==null)return{};var t,r,s=T2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var S2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function I2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,y=n.onInputChange,T=n.onMenuClose,_=n.onMenuOpen,P=n.value,O=Vi(n,S2),D=V.useState(d!==void 0?d:t),A=Ai(D,2),z=A[0],G=A[1],q=V.useState(f!==void 0?f:s),Z=Ai(q,2),K=Z[0],J=Z[1],R=V.useState(P!==void 0?P:u),b=Ai(R,2),k=b[0],I=b[1],L=V.useCallback(function(ne,de){typeof m=="function"&&m(ne,de),I(ne)},[m]),F=V.useCallback(function(ne,de){var ae;typeof y=="function"&&(ae=y(ne,de)),G(ae!==void 0?ae:ne)},[y]),N=V.useCallback(function(){typeof _=="function"&&_(),J(!0)},[_]),he=V.useCallback(function(){typeof T=="function"&&T(),J(!1)},[T]),Ue=d!==void 0?d:z,Ve=f!==void 0?f:K,Oe=P!==void 0?P:k;return Ae(Ae({},O),{},{inputValue:Ue,menuIsOpen:Ve,onChange:L,onInputChange:F,onMenuClose:he,onMenuOpen:N,value:Oe})}function Pe(){return Pe=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pe.apply(null,arguments)}function C2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,JS(r.key),r)}}function b2(n,e,t){return e&&Jw(n.prototype,e),t&&Jw(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function am(n,e){return am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},am(n,e)}function A2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&am(n,e)}function xh(n){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xh(n)}function eI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eI=function(){return!!n})()}function R2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function P2(n,e){if(e&&(So(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2(n)}function k2(n){var e=eI();return function(){var t,r=xh(n);if(e){var s=xh(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return P2(this,t)}}function x2(n){if(Array.isArray(n))return om(n)}function N2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function O2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bg(n){return x2(n)||N2(n)||ZS(n)||O2()}function D2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function V2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var M2=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(V2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=D2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),cn="-ms-",Nh="-moz-",Ze="-webkit-",tI="comm",Ag="rule",Rg="decl",L2="@import",nI="@keyframes",j2="@layer",F2=Math.abs,gd=String.fromCharCode,U2=Object.assign;function z2(n,e){return tn(n,0)^45?(((e<<2^tn(n,0))<<2^tn(n,1))<<2^tn(n,2))<<2^tn(n,3):0}function rI(n){return n.trim()}function B2(n,e){return(n=e.exec(n))?n[0]:n}function et(n,e,t){return n.replace(e,t)}function lm(n,e){return n.indexOf(e)}function tn(n,e){return n.charCodeAt(e)|0}function Zl(n,e,t){return n.slice(e,t)}function qr(n){return n.length}function Pg(n){return n.length}function $c(n,e){return e.push(n),n}function $2(n,e){return n.map(e).join("")}var vd=1,Na=1,iI=0,Vn=0,Vt=0,$a="";function yd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:vd,column:Na,length:u,return:""}}function Al(n,e){return U2(yd("",null,null,"",null,null,0),n,{length:-n.length},e)}function H2(){return Vt}function W2(){return Vt=Vn>0?tn($a,--Vn):0,Na--,Vt===10&&(Na=1,vd--),Vt}function Hn(){return Vt=Vn<iI?tn($a,Vn++):0,Na++,Vt===10&&(Na=1,vd++),Vt}function ei(){return tn($a,Vn)}function oh(){return Vn}function _u(n,e){return Zl($a,n,e)}function eu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sI(n){return vd=Na=1,iI=qr($a=n),Vn=0,[]}function oI(n){return $a="",n}function ah(n){return rI(_u(Vn-1,um(n===91?n+2:n===40?n+1:n)))}function q2(n){for(;(Vt=ei())&&Vt<33;)Hn();return eu(n)>2||eu(Vt)>3?"":" "}function G2(n,e){for(;--e&&Hn()&&!(Vt<48||Vt>102||Vt>57&&Vt<65||Vt>70&&Vt<97););return _u(n,oh()+(e<6&&ei()==32&&Hn()==32))}function um(n){for(;Hn();)switch(Vt){case n:return Vn;case 34:case 39:n!==34&&n!==39&&um(Vt);break;case 40:n===41&&um(n);break;case 92:Hn();break}return Vn}function K2(n,e){for(;Hn()&&n+Vt!==57;)if(n+Vt===84&&ei()===47)break;return"/*"+_u(e,Vn-1)+"*"+gd(n===47?n:Hn())}function Q2(n){for(;!eu(ei());)Hn();return _u(n,Vn)}function X2(n){return oI(lh("",null,null,null,[""],n=sI(n),0,[0],n))}function lh(n,e,t,r,s,a,u,d,f){for(var m=0,y=0,T=u,_=0,P=0,O=0,D=1,A=1,z=1,G=0,q="",Z=s,K=a,J=r,R=q;A;)switch(O=G,G=Hn()){case 40:if(O!=108&&tn(R,T-1)==58){lm(R+=et(ah(G),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:R+=ah(G);break;case 9:case 10:case 13:case 32:R+=q2(O);break;case 92:R+=G2(oh()-1,7);continue;case 47:switch(ei()){case 42:case 47:$c(Y2(K2(Hn(),oh()),e,t),f);break;default:R+="/"}break;case 123*D:d[m++]=qr(R)*z;case 125*D:case 59:case 0:switch(G){case 0:case 125:A=0;case 59+y:z==-1&&(R=et(R,/\f/g,"")),P>0&&qr(R)-T&&$c(P>32?e0(R+";",r,t,T-1):e0(et(R," ","")+";",r,t,T-2),f);break;case 59:R+=";";default:if($c(J=Zw(R,e,t,m,y,s,d,q,Z=[],K=[],T),a),G===123)if(y===0)lh(R,e,J,J,Z,a,T,d,K);else switch(_===99&&tn(R,3)===110?100:_){case 100:case 108:case 109:case 115:lh(n,J,J,r&&$c(Zw(n,J,J,0,0,s,d,q,s,Z=[],T),K),s,K,T,d,r?Z:K);break;default:lh(R,J,J,J,[""],K,0,d,K)}}m=y=P=0,D=z=1,q=R="",T=u;break;case 58:T=1+qr(R),P=O;default:if(D<1){if(G==123)--D;else if(G==125&&D++==0&&W2()==125)continue}switch(R+=gd(G),G*D){case 38:z=y>0?1:(R+="\f",-1);break;case 44:d[m++]=(qr(R)-1)*z,z=1;break;case 64:ei()===45&&(R+=ah(Hn())),_=ei(),y=T=qr(q=R+=Q2(oh())),G++;break;case 45:O===45&&qr(R)==2&&(D=0)}}return a}function Zw(n,e,t,r,s,a,u,d,f,m,y){for(var T=s-1,_=s===0?a:[""],P=Pg(_),O=0,D=0,A=0;O<r;++O)for(var z=0,G=Zl(n,T+1,T=F2(D=u[O])),q=n;z<P;++z)(q=rI(D>0?_[z]+" "+G:et(G,/&\f/g,_[z])))&&(f[A++]=q);return yd(n,e,t,s===0?Ag:d,f,m,y)}function Y2(n,e,t){return yd(n,e,t,tI,gd(H2()),Zl(n,2,-2),0)}function e0(n,e,t,r){return yd(n,e,t,Rg,Zl(n,0,r),Zl(n,r+1,-1),r)}function Ia(n,e){for(var t="",r=Pg(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function J2(n,e,t,r){switch(n.type){case j2:if(n.children.length)break;case L2:case Rg:return n.return=n.return||n.value;case tI:return"";case nI:return n.return=n.value+"{"+Ia(n.children,r)+"}";case Ag:n.value=n.props.join(",")}return qr(t=Ia(n.children,r))?n.return=n.value+"{"+t+"}":""}function Z2(n){var e=Pg(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function eV(n){return function(e){e.root||(e=e.return)&&n(e)}}function tV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var nV=function(e,t,r){for(var s=0,a=0;s=a,a=ei(),s===38&&a===12&&(t[r]=1),!eu(a);)Hn();return _u(e,Vn)},rV=function(e,t){var r=-1,s=44;do switch(eu(s)){case 0:s===38&&ei()===12&&(t[r]=1),e[r]+=nV(Vn-1,t,r);break;case 2:e[r]+=ah(s);break;case 4:if(s===44){e[++r]=ei()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=gd(s)}while(s=Hn());return e},iV=function(e,t){return oI(rV(sI(e),t))},t0=new WeakMap,sV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!t0.get(r))&&!s){t0.set(e,!0);for(var a=[],u=iV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var y=0;y<d.length;y++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[y]):d[y]+" "+u[f]}}},oV=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function aI(n,e){switch(z2(n,e)){case 5103:return Ze+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ze+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ze+n+Nh+n+cn+n+n;case 6828:case 4268:return Ze+n+cn+n+n;case 6165:return Ze+n+cn+"flex-"+n+n;case 5187:return Ze+n+et(n,/(\w+).+(:[^]+)/,Ze+"box-$1$2"+cn+"flex-$1$2")+n;case 5443:return Ze+n+cn+"flex-item-"+et(n,/flex-|-self/,"")+n;case 4675:return Ze+n+cn+"flex-line-pack"+et(n,/align-content|flex-|-self/,"")+n;case 5548:return Ze+n+cn+et(n,"shrink","negative")+n;case 5292:return Ze+n+cn+et(n,"basis","preferred-size")+n;case 6060:return Ze+"box-"+et(n,"-grow","")+Ze+n+cn+et(n,"grow","positive")+n;case 4554:return Ze+et(n,/([^-])(transform)/g,"$1"+Ze+"$2")+n;case 6187:return et(et(et(n,/(zoom-|grab)/,Ze+"$1"),/(image-set)/,Ze+"$1"),n,"")+n;case 5495:case 3959:return et(n,/(image-set\([^]*)/,Ze+"$1$`$1");case 4968:return et(et(n,/(.+:)(flex-)?(.*)/,Ze+"box-pack:$3"+cn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ze+n+n;case 4095:case 3583:case 4068:case 2532:return et(n,/(.+)-inline(.+)/,Ze+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qr(n)-1-e>6)switch(tn(n,e+1)){case 109:if(tn(n,e+4)!==45)break;case 102:return et(n,/(.+:)(.+)-([^]+)/,"$1"+Ze+"$2-$3$1"+Nh+(tn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~lm(n,"stretch")?aI(et(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(tn(n,e+1)!==115)break;case 6444:switch(tn(n,qr(n)-3-(~lm(n,"!important")&&10))){case 107:return et(n,":",":"+Ze)+n;case 101:return et(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ze+(tn(n,14)===45?"inline-":"")+"box$3$1"+Ze+"$2$3$1"+cn+"$2box$3")+n}break;case 5936:switch(tn(n,e+11)){case 114:return Ze+n+cn+et(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ze+n+cn+et(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ze+n+cn+et(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ze+n+cn+n+n}return n}var aV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Rg:e.return=aI(e.value,e.length);break;case nI:return Ia([Al(e,{value:et(e.value,"@","@"+Ze)})],s);case Ag:if(e.length)return $2(e.props,function(a){switch(B2(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ia([Al(e,{props:[et(a,/:(read-\w+)/,":"+Nh+"$1")]})],s);case"::placeholder":return Ia([Al(e,{props:[et(a,/:(plac\w+)/,":"+Ze+"input-$1")]}),Al(e,{props:[et(a,/:(plac\w+)/,":"+Nh+"$1")]}),Al(e,{props:[et(a,/:(plac\w+)/,cn+"input-$1")]})],s)}return""})}},lV=[aV],uV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(D){var A=D.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(D),D.setAttribute("data-s",""))})}var s=e.stylisPlugins||lV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(D){for(var A=D.getAttribute("data-emotion").split(" "),z=1;z<A.length;z++)a[A[z]]=!0;d.push(D)});var f,m=[sV,oV];{var y,T=[J2,eV(function(D){y.insert(D)})],_=Z2(m.concat(s,T)),P=function(A){return Ia(X2(A),_)};f=function(A,z,G,q){y=G,P(A?A+"{"+z.styles+"}":z.styles),q&&(O.inserted[z.name]=!0)}}var O={key:t,sheet:new M2({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return O.sheet.hydrate(d),O},pp={exports:{}},tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function cV(){if(n0)return tt;n0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,y=n?Symbol.for("react.forward_ref"):60112,T=n?Symbol.for("react.suspense"):60113,_=n?Symbol.for("react.suspense_list"):60120,P=n?Symbol.for("react.memo"):60115,O=n?Symbol.for("react.lazy"):60116,D=n?Symbol.for("react.block"):60121,A=n?Symbol.for("react.fundamental"):60117,z=n?Symbol.for("react.responder"):60118,G=n?Symbol.for("react.scope"):60119;function q(K){if(typeof K=="object"&&K!==null){var J=K.$$typeof;switch(J){case e:switch(K=K.type,K){case f:case m:case r:case a:case s:case T:return K;default:switch(K=K&&K.$$typeof,K){case d:case y:case O:case P:case u:return K;default:return J}}case t:return J}}}function Z(K){return q(K)===m}return tt.AsyncMode=f,tt.ConcurrentMode=m,tt.ContextConsumer=d,tt.ContextProvider=u,tt.Element=e,tt.ForwardRef=y,tt.Fragment=r,tt.Lazy=O,tt.Memo=P,tt.Portal=t,tt.Profiler=a,tt.StrictMode=s,tt.Suspense=T,tt.isAsyncMode=function(K){return Z(K)||q(K)===f},tt.isConcurrentMode=Z,tt.isContextConsumer=function(K){return q(K)===d},tt.isContextProvider=function(K){return q(K)===u},tt.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===e},tt.isForwardRef=function(K){return q(K)===y},tt.isFragment=function(K){return q(K)===r},tt.isLazy=function(K){return q(K)===O},tt.isMemo=function(K){return q(K)===P},tt.isPortal=function(K){return q(K)===t},tt.isProfiler=function(K){return q(K)===a},tt.isStrictMode=function(K){return q(K)===s},tt.isSuspense=function(K){return q(K)===T},tt.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===r||K===m||K===a||K===s||K===T||K===_||typeof K=="object"&&K!==null&&(K.$$typeof===O||K.$$typeof===P||K.$$typeof===u||K.$$typeof===d||K.$$typeof===y||K.$$typeof===A||K.$$typeof===z||K.$$typeof===G||K.$$typeof===D)},tt.typeOf=q,tt}var r0;function hV(){return r0||(r0=1,pp.exports=cV()),pp.exports}var mp,i0;function dV(){if(i0)return mp;i0=1;var n=hV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(O){return n.isMemo(O)?s:a[O.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,T=Object.getPrototypeOf,_=Object.prototype;function P(O,D,A){if(typeof D!="string"){if(_){var z=T(D);z&&z!==_&&P(O,z,A)}var G=f(D);m&&(G=G.concat(m(D)));for(var q=u(O),Z=u(D),K=0;K<G.length;++K){var J=G[K];if(!t[J]&&!(A&&A[J])&&!(Z&&Z[J])&&!(q&&q[J])){var R=y(D,J);try{d(O,J,R)}catch{}}}}return O}return mp=P,mp}dV();var fV=!0;function pV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var lI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||fV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},mV=function(e,t,r){lI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function gV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var vV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yV=/[A-Z]|^ms/g,_V=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uI=function(e){return e.charCodeAt(1)===45},s0=function(e){return e!=null&&typeof e!="boolean"},gp=tV(function(n){return uI(n)?n:n.replace(yV,"-$&").toLowerCase()}),o0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_V,function(r,s,a){return Gr={name:s,styles:a,next:Gr},s})}return vV[e]!==1&&!uI(e)&&typeof t=="number"&&t!==0?t+"px":t};function tu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Gr={name:s.name,styles:s.styles,next:Gr},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)Gr={name:u.name,styles:u.styles,next:Gr},u=u.next;var d=a.styles+";";return d}return wV(n,e,t)}case"function":{if(n!==void 0){var f=Gr,m=t(n);return Gr=f,tu(n,e,m)}break}}var y=t;return y}function wV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=tu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;s0(d)&&(r+=gp(a)+":"+o0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)s0(u[f])&&(r+=gp(a)+":"+o0(a,u[f])+";");else{var m=tu(n,e,u);switch(a){case"animation":case"animationName":{r+=gp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var a0=/label:\s*([^\s;{]+)\s*(;|$)/g,Gr;function cI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Gr=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=tu(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=tu(t,e,n[d]),r){var f=a;s+=f[d]}a0.lastIndex=0;for(var m="",y;(y=a0.exec(s))!==null;)m+="-"+y[1];var T=gV(s)+m;return{name:T,styles:s,next:Gr}}var EV=function(e){return e()},TV=Cp.useInsertionEffect?Cp.useInsertionEffect:!1,SV=TV||EV,hI=V.createContext(typeof HTMLElement<"u"?uV({key:"css"}):null);hI.Provider;var IV=function(e){return V.forwardRef(function(t,r){var s=V.useContext(hI);return e(t,s,r)})},CV=V.createContext({}),kg={}.hasOwnProperty,cm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bV=function(e,t){var r={};for(var s in t)kg.call(t,s)&&(r[s]=t[s]);return r[cm]=e,r},AV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return lI(t,r,s),SV(function(){return mV(t,r,s)}),null},RV=IV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[cm],a=[r],u="";typeof n.className=="string"?u=pV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=cI(a,void 0,V.useContext(CV));u+=e.key+"-"+d.name;var f={};for(var m in n)kg.call(n,m)&&m!=="css"&&m!==cm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),V.createElement(V.Fragment,null,V.createElement(AV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),V.createElement(s,f))}),PV=RV,Se=function(e,t){var r=arguments;if(t==null||!kg.call(t,"css"))return V.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=PV,a[1]=bV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return V.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Se||(Se={}));function xg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return cI(e)}function kV(){var n=xg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function xV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const NV=Math.min,OV=Math.max,Oh=Math.round,Hc=Math.floor,Dh=n=>({x:n,y:n});function DV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function _d(){return typeof window<"u"}function dI(n){return pI(n)?(n.nodeName||"").toLowerCase():"#document"}function Oi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function fI(n){var e;return(e=(pI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pI(n){return _d()?n instanceof Node||n instanceof Oi(n).Node:!1}function VV(n){return _d()?n instanceof Element||n instanceof Oi(n).Element:!1}function Ng(n){return _d()?n instanceof HTMLElement||n instanceof Oi(n).HTMLElement:!1}function l0(n){return!_d()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Oi(n).ShadowRoot}const MV=new Set(["inline","contents"]);function mI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Og(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!MV.has(s)}function LV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jV=new Set(["html","body","#document"]);function FV(n){return jV.has(dI(n))}function Og(n){return Oi(n).getComputedStyle(n)}function UV(n){if(dI(n)==="html")return n;const e=n.assignedSlot||n.parentNode||l0(n)&&n.host||fI(n);return l0(e)?e.host:e}function gI(n){const e=UV(n);return FV(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ng(e)&&mI(e)?e:gI(e)}function Vh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=gI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=Oi(s);if(a){const d=hm(u);return e.concat(u,u.visualViewport||[],mI(s)?s:[],d&&t?Vh(d):[])}return e.concat(s,Vh(s,[],t))}function hm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function zV(n){const e=Og(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ng(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Oh(t)!==a||Oh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function Dg(n){return VV(n)?n:n.contextElement}function u0(n){const e=Dg(n);if(!Ng(e))return Dh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=zV(e);let u=(a?Oh(t.width):t.width)/r,d=(a?Oh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const BV=Dh(0);function $V(n){const e=Oi(n);return!LV()||!e.visualViewport?BV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function HV(n,e,t){return!1}function c0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=Dg(n);let u=Dh(1);e&&(u=u0(n));const d=HV()?$V(a):Dh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,y=s.width/u.x,T=s.height/u.y;if(a){const _=Oi(a),P=r;let O=_,D=hm(O);for(;D&&r&&P!==O;){const A=u0(D),z=D.getBoundingClientRect(),G=Og(D),q=z.left+(D.clientLeft+parseFloat(G.paddingLeft))*A.x,Z=z.top+(D.clientTop+parseFloat(G.paddingTop))*A.y;f*=A.x,m*=A.y,y*=A.x,T*=A.y,f+=q,m+=Z,O=Oi(D),D=hm(O)}}return DV({width:y,height:T,x:f,y:m})}function vI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function WV(n,e){let t=null,r;const s=fI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:y,top:T,width:_,height:P}=m;if(d||e(),!_||!P)return;const O=Hc(T),D=Hc(s.clientWidth-(y+_)),A=Hc(s.clientHeight-(T+P)),z=Hc(y),q={rootMargin:-O+"px "+-D+"px "+-A+"px "+-z+"px",threshold:OV(0,NV(1,f))||1};let Z=!0;function K(J){const R=J[0].intersectionRatio;if(R!==f){if(!Z)return u();R?u(!1,R):r=setTimeout(()=>{u(!1,1e-7)},1e3)}R===1&&!vI(m,n.getBoundingClientRect())&&u(),Z=!1}try{t=new IntersectionObserver(K,{...q,root:s.ownerDocument})}catch{t=new IntersectionObserver(K,q)}t.observe(n)}return u(!0),a}function qV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Dg(n),y=s||a?[...m?Vh(m):[],...Vh(e)]:[];y.forEach(z=>{s&&z.addEventListener("scroll",t,{passive:!0}),a&&z.addEventListener("resize",t)});const T=m&&d?WV(m,t):null;let _=-1,P=null;u&&(P=new ResizeObserver(z=>{let[G]=z;G&&G.target===m&&P&&(P.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var q;(q=P)==null||q.observe(e)})),t()}),m&&!f&&P.observe(m),P.observe(e));let O,D=f?c0(n):null;f&&A();function A(){const z=c0(n);D&&!vI(D,z)&&t(),D=z,O=requestAnimationFrame(A)}return t(),()=>{var z;y.forEach(G=>{s&&G.removeEventListener("scroll",t),a&&G.removeEventListener("resize",t)}),T==null||T(),(z=P)==null||z.disconnect(),P=null,f&&cancelAnimationFrame(O)}}var dm=V.useLayoutEffect,GV=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Mh=function(){};function KV(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function QV(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(KV(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var h0=function(e){return iM(e)?e.filter(Boolean):So(e)==="object"&&e!==null?[e]:[]},yI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Vi(e,GV);return Ae({},t)},St=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function wd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function XV(n){return wd(n)?window.innerHeight:n.clientHeight}function _I(n){return wd(n)?window.pageYOffset:n.scrollTop}function Lh(n,e){if(wd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function YV(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function JV(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function Wc(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Mh,s=_I(n),a=e-s,u=10,d=0;function f(){d+=u;var m=JV(d,s,a,t);Lh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function d0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Lh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Lh(n,Math.max(e.offsetTop-s,0))}function ZV(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function f0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function eM(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var wI=!1,tM={get passive(){return wI=!0}},qc=typeof window<"u"?window:{};qc.addEventListener&&qc.removeEventListener&&(qc.addEventListener("p",Mh,tM),qc.removeEventListener("p",Mh,!1));var nM=wI;function rM(n){return n!=null}function iM(n){return Array.isArray(n)}function Gc(n,e,t){return n?e:t}var sM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=Ai(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=Ai(d,2),m=f[0],y=f[1];return u[m]=y,u},{})},oM=["children","innerProps"],aM=["children","innerProps"];function lM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=YV(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var y=f.getBoundingClientRect(),T=y.height,_=t.getBoundingClientRect(),P=_.bottom,O=_.height,D=_.top,A=t.offsetParent.getBoundingClientRect(),z=A.top,G=u?window.innerHeight:XV(f),q=_I(f),Z=parseInt(getComputedStyle(t).marginBottom,10),K=parseInt(getComputedStyle(t).marginTop,10),J=z-K,R=G-D,b=J+q,k=T-q-D,I=P-G+q+Z,L=q+D-K,F=160;switch(s){case"auto":case"bottom":if(R>=O)return{placement:"bottom",maxHeight:e};if(k>=O&&!u)return a&&Wc(f,I,F),{placement:"bottom",maxHeight:e};if(!u&&k>=r||u&&R>=r){a&&Wc(f,I,F);var N=u?R-Z:k-Z;return{placement:"bottom",maxHeight:N}}if(s==="auto"||u){var he=e,Ue=u?J:b;return Ue>=r&&(he=Math.min(Ue-Z-d,e)),{placement:"top",maxHeight:he}}if(s==="bottom")return a&&Lh(f,I),{placement:"bottom",maxHeight:e};break;case"top":if(J>=O)return{placement:"top",maxHeight:e};if(b>=O&&!u)return a&&Wc(f,L,F),{placement:"top",maxHeight:e};if(!u&&b>=r||u&&J>=r){var Ve=e;return(!u&&b>=r||u&&J>=r)&&(Ve=u?J-K:b-K),a&&Wc(f,L,F),{placement:"top",maxHeight:Ve}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function uM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var EI=function(e){return e==="auto"?"bottom":e},cM=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return Ae((r={label:"menu"},Dl(r,uM(s),"100%"),Dl(r,"position","absolute"),Dl(r,"width","100%"),Dl(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},TI=V.createContext(null),hM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=V.useContext(TI)||{},y=m.setPortalPlacement,T=V.useRef(null),_=V.useState(s),P=Ai(_,2),O=P[0],D=P[1],A=V.useState(null),z=Ai(A,2),G=z[0],q=z[1],Z=f.spacing.controlHeight;return dm(function(){var K=T.current;if(K){var J=u==="fixed",R=d&&!J,b=lM({maxHeight:s,menuEl:K,minHeight:r,placement:a,shouldScroll:R,isFixedPosition:J,controlHeight:Z});D(b.maxHeight),q(b.placement),y==null||y(b.placement)}},[s,a,u,d,r,y,Z]),t({ref:T,placerProps:Ae(Ae({},e),{},{placement:G||EI(a),maxHeight:O})})},dM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return Se("div",Pe({},St(e,"menu",{menu:!0}),{ref:r},s),t)},fM=dM,pM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return Ae({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},mM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return Se("div",Pe({},St(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},SI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return Ae({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},gM=SI,vM=SI,yM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=Vi(e,oM);return Se("div",Pe({},St(Ae(Ae({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},_M=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=Vi(e,aM);return Se("div",Pe({},St(Ae(Ae({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},wM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},EM=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=V.useRef(null),m=V.useRef(null),y=V.useState(EI(u)),T=Ai(y,2),_=T[0],P=T[1],O=V.useMemo(function(){return{setPortalPlacement:P}},[]),D=V.useState(null),A=Ai(D,2),z=A[0],G=A[1],q=V.useCallback(function(){if(s){var R=ZV(s),b=d==="fixed"?0:window.pageYOffset,k=R[_]+b;(k!==(z==null?void 0:z.offset)||R.left!==(z==null?void 0:z.rect.left)||R.width!==(z==null?void 0:z.rect.width))&&G({offset:k,rect:R})}},[s,d,_,z==null?void 0:z.offset,z==null?void 0:z.rect.left,z==null?void 0:z.rect.width]);dm(function(){q()},[q]);var Z=V.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=qV(s,f.current,q,{elementResize:"ResizeObserver"in window}))},[s,q]);dm(function(){Z()},[Z]);var K=V.useCallback(function(R){f.current=R,Z()},[Z]);if(!t&&d!=="fixed"||!z)return null;var J=Se("div",Pe({ref:K},St(Ae(Ae({},e),{},{offset:z.offset,position:d,rect:z.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Se(TI.Provider,{value:O},t?tC.createPortal(J,t):J)},TM=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},SM=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return Se("div",Pe({},St(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},IM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return Ae({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},CM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return Se("div",Pe({},St(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},bM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},AM=function(e){var t=e.children,r=e.innerProps;return Se("div",Pe({},St(e,"indicatorsContainer",{indicators:!0}),r),t)},p0,RM=["size"],PM=["innerProps","isRtl","size"],kM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},II=function(e){var t=e.size,r=Vi(e,RM);return Se("svg",Pe({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:kM},r))},Vg=function(e){return Se(II,Pe({size:20},e),Se("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},CI=function(e){return Se(II,Pe({size:20},e),Se("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Ae({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},xM=bI,NM=function(e){var t=e.children,r=e.innerProps;return Se("div",Pe({},St(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Se(CI,null))},OM=bI,DM=function(e){var t=e.children,r=e.innerProps;return Se("div",Pe({},St(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Se(Vg,null))},VM=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Ae({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},MM=function(e){var t=e.innerProps;return Se("span",Pe({},t,St(e,"indicatorSeparator",{"indicator-separator":!0})))},LM=kV(p0||(p0=xV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),jM=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return Ae({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},vp=function(e){var t=e.delay,r=e.offset;return Se("span",{css:xg({animation:"".concat(LM," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},FM=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=Vi(e,PM);return Se("div",Pe({},St(Ae(Ae({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Se(vp,{delay:0,offset:r}),Se(vp,{delay:160,offset:!0}),Se(vp,{delay:320,offset:!r}))},UM=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return Ae({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},zM=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return Se("div",Pe({ref:a},St(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},BM=zM,$M=["data"],HM=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},WM=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,y=e.theme,T=e.selectProps;return Se("div",Pe({},St(e,"group",{group:!0}),f),Se(u,Pe({},d,{selectProps:T,theme:y,getStyles:s,getClassNames:a,cx:r}),m),Se("div",null,t))},qM=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return Ae({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},GM=function(e){var t=yI(e);t.data;var r=Vi(t,$M);return Se("div",Pe({},St(e,"groupHeading",{"group-heading":!0}),r))},KM=WM,QM=["innerRef","isDisabled","isHidden","inputClassName"],XM=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return Ae(Ae({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},YM),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},AI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},YM={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ae({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AI)},JM=function(e){return Ae({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},AI)},ZM=function(e){var t=e.cx,r=e.value,s=yI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=Vi(s,QM);return Se("div",Pe({},St(e,"input",{"input-container":!0}),{"data-value":r||""}),Se("input",Pe({className:t({input:!0},f),ref:a,style:JM(d),disabled:u},m)))},eL=ZM,tL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return Ae({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},nL=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return Ae({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},rL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return Ae({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},RI=function(e){var t=e.children,r=e.innerProps;return Se("div",r,t)},iL=RI,sL=RI;function oL(n){var e=n.children,t=n.innerProps;return Se("div",Pe({role:"button"},t),e||Se(Vg,{size:14}))}var aL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,y=r.Label,T=r.Remove;return Se(m,{data:s,innerProps:Ae(Ae({},St(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},Se(y,{data:s,innerProps:Ae({},St(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),Se(T,{data:s,innerProps:Ae(Ae({},St(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},lL=aL,uL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return Ae({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},cL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return Se("div",Pe({},St(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},hL=cL,dL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return Ae({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},fL=function(e){var t=e.children,r=e.innerProps;return Se("div",Pe({},St(e,"placeholder",{placeholder:!0}),r),t)},pL=fL,mL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return Ae({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},gL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return Se("div",Pe({},St(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},vL=gL,yL={ClearIndicator:DM,Control:BM,DropdownIndicator:NM,DownChevron:CI,CrossIcon:Vg,Group:KM,GroupHeading:GM,IndicatorsContainer:AM,IndicatorSeparator:MM,Input:eL,LoadingIndicator:FM,Menu:fM,MenuList:mM,MenuPortal:EM,LoadingMessage:_M,NoOptionsMessage:yM,MultiValue:lL,MultiValueContainer:iL,MultiValueLabel:sL,MultiValueRemove:oL,Option:hL,Placeholder:pL,SelectContainer:SM,SingleValue:vL,ValueContainer:CM},_L=function(e){return Ae(Ae({},yL),e.components)},m0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wL(n,e){return!!(n===e||m0(n)&&m0(e))}function EL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!wL(n[t],e[t]))return!1;return!0}function TL(n,e){e===void 0&&(e=EL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var SL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},IL=function(e){return Se("span",Pe({css:SL},e))},g0=IL,CL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,y=e.isAppleDevice,T=function(D,A){return D&&D.length?"".concat(D.indexOf(A)+1," of ").concat(D.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(T(d,r),".");if(t==="menu"&&y){var _=f?" disabled":"",P="".concat(m?" selected":"").concat(_);return"".concat(u).concat(P,", ").concat(T(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},bL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,y=e.isAppleDevice,T=f.ariaLiveMessages,_=f.getOptionLabel,P=f.inputValue,O=f.isMulti,D=f.isOptionDisabled,A=f.isSearchable,z=f.menuIsOpen,G=f.options,q=f.screenReaderStatus,Z=f.tabSelectsValue,K=f.isLoading,J=f["aria-label"],R=f["aria-live"],b=V.useMemo(function(){return Ae(Ae({},CL),T||{})},[T]),k=V.useMemo(function(){var Ue="";if(t&&b.onChange){var Ve=t.option,Oe=t.options,ne=t.removedValue,de=t.removedValues,ae=t.value,B=function(Me){return Array.isArray(Me)?null:Me},Y=ne||Ve||B(ae),ce=Y?_(Y):"",_e=Oe||de||void 0,Re=_e?_e.map(_):[],me=Ae({isDisabled:Y&&D(Y,d),label:ce,labels:Re},t);Ue=b.onChange(me)}return Ue},[t,b,D,d,_]),I=V.useMemo(function(){var Ue="",Ve=r||s,Oe=!!(r&&d&&d.includes(r));if(Ve&&b.onFocus){var ne={focused:Ve,label:_(Ve),isDisabled:D(Ve,d),isSelected:Oe,options:a,context:Ve===r?"menu":"value",selectValue:d,isAppleDevice:y};Ue=b.onFocus(ne)}return Ue},[r,s,_,D,b,a,d,y]),L=V.useMemo(function(){var Ue="";if(z&&G.length&&!K&&b.onFilter){var Ve=q({count:a.length});Ue=b.onFilter({inputValue:P,resultsMessage:Ve})}return Ue},[a,P,z,b,G,q,K]),F=(t==null?void 0:t.action)==="initial-input-focus",N=V.useMemo(function(){var Ue="";if(b.guidance){var Ve=s?"value":z?"menu":"input";Ue=b.guidance({"aria-label":J,context:Ve,isDisabled:r&&D(r,d),isMulti:O,isSearchable:A,tabSelectsValue:Z,isInitialFocus:F})}return Ue},[J,r,s,O,D,A,z,b,d,Z,F]),he=Se(V.Fragment,null,Se("span",{id:"aria-selection"},k),Se("span",{id:"aria-focused"},I),Se("span",{id:"aria-results"},L),Se("span",{id:"aria-guidance"},N));return Se(V.Fragment,null,Se(g0,{id:m},F&&he),Se(g0,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!F&&he))},AL=bL,fm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],RL=new RegExp("["+fm.map(function(n){return n.letters}).join("")+"]","g"),PI={};for(var yp=0;yp<fm.length;yp++)for(var _p=fm[yp],wp=0;wp<_p.letters.length;wp++)PI[_p.letters[wp]]=_p.base;var kI=function(e){return e.replace(RL,function(t){return PI[t]})},PL=TL(kI),v0=function(e){return e.replace(/^\s+|\s+$/g,"")},kL=function(e){return"".concat(e.label," ").concat(e.value)},xL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=Ae({ignoreCase:!0,ignoreAccents:!0,stringify:kL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,y=f?v0(r):r,T=f?v0(d(t)):d(t);return a&&(y=y.toLowerCase(),T=T.toLowerCase()),u&&(y=PL(y),T=kI(T)),m==="start"?T.substr(0,y.length)===y:T.indexOf(y)>-1}},NL=["innerRef"];function OL(n){var e=n.innerRef,t=Vi(n,NL),r=sM(t,"onExited","in","enter","exit","appear");return Se("input",Pe({ref:e},r,{css:xg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var DL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function VL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=V.useRef(!1),d=V.useRef(!1),f=V.useRef(0),m=V.useRef(null),y=V.useCallback(function(A,z){if(m.current!==null){var G=m.current,q=G.scrollTop,Z=G.scrollHeight,K=G.clientHeight,J=m.current,R=z>0,b=Z-K-q,k=!1;b>z&&u.current&&(r&&r(A),u.current=!1),R&&d.current&&(a&&a(A),d.current=!1),R&&z>b?(t&&!u.current&&t(A),J.scrollTop=Z,k=!0,u.current=!0):!R&&-z>q&&(s&&!d.current&&s(A),J.scrollTop=0,k=!0,d.current=!0),k&&DL(A)}},[t,r,s,a]),T=V.useCallback(function(A){y(A,A.deltaY)},[y]),_=V.useCallback(function(A){f.current=A.changedTouches[0].clientY},[]),P=V.useCallback(function(A){var z=f.current-A.changedTouches[0].clientY;y(A,z)},[y]),O=V.useCallback(function(A){if(A){var z=nM?{passive:!1}:!1;A.addEventListener("wheel",T,z),A.addEventListener("touchstart",_,z),A.addEventListener("touchmove",P,z)}},[P,_,T]),D=V.useCallback(function(A){A&&(A.removeEventListener("wheel",T,!1),A.removeEventListener("touchstart",_,!1),A.removeEventListener("touchmove",P,!1))},[P,_,T]);return V.useEffect(function(){if(e){var A=m.current;return O(A),function(){D(A)}}},[e,O,D]),function(A){m.current=A}}var y0=["boxSizing","height","overflow","paddingRight","position"],_0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function w0(n){n.cancelable&&n.preventDefault()}function E0(n){n.stopPropagation()}function T0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function S0(){return"ontouchstart"in window||navigator.maxTouchPoints}var I0=!!(typeof window<"u"&&window.document&&window.document.createElement),Rl=0,pa={capture:!1,passive:!1};function ML(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=V.useRef({}),a=V.useRef(null),u=V.useCallback(function(f){if(I0){var m=document.body,y=m&&m.style;if(r&&y0.forEach(function(O){var D=y&&y[O];s.current[O]=D}),r&&Rl<1){var T=parseInt(s.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,P=window.innerWidth-_+T||0;Object.keys(_0).forEach(function(O){var D=_0[O];y&&(y[O]=D)}),y&&(y.paddingRight="".concat(P,"px"))}m&&S0()&&(m.addEventListener("touchmove",w0,pa),f&&(f.addEventListener("touchstart",T0,pa),f.addEventListener("touchmove",E0,pa))),Rl+=1}},[r]),d=V.useCallback(function(f){if(I0){var m=document.body,y=m&&m.style;Rl=Math.max(Rl-1,0),r&&Rl<1&&y0.forEach(function(T){var _=s.current[T];y&&(y[T]=_)}),m&&S0()&&(m.removeEventListener("touchmove",w0,pa),f&&(f.removeEventListener("touchstart",T0,pa),f.removeEventListener("touchmove",E0,pa)))}},[r]);return V.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var LL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},jL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function FL(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=VL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),y=ML({isEnabled:t}),T=function(P){m(P),y(P)};return Se(V.Fragment,null,t&&Se("div",{onClick:LL,css:jL}),e(T))}var UL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},zL=function(e){var t=e.name,r=e.onFocus;return Se("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:UL,value:"",onChange:function(){}})},BL=zL;function Mg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function $L(){return Mg(/^iPhone/i)}function xI(){return Mg(/^Mac/i)}function HL(){return Mg(/^iPad/i)||xI()&&navigator.maxTouchPoints>1}function WL(){return $L()||HL()}function qL(){return xI()||WL()}var GL=function(e){return e.label},KL=function(e){return e.label},QL=function(e){return e.value},XL=function(e){return!!e.isDisabled},YL={clearIndicator:OM,container:TM,control:UM,dropdownIndicator:xM,group:HM,groupHeading:qM,indicatorsContainer:bM,indicatorSeparator:VM,input:XM,loadingIndicator:jM,loadingMessage:vM,menu:cM,menuList:pM,menuPortal:wM,multiValue:tL,multiValueLabel:nL,multiValueRemove:rL,noOptionsMessage:gM,option:uL,placeholder:dL,singleValue:mL,valueContainer:IM},JL={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ZL=4,NI=4,e4=38,t4=NI*2,n4={baseUnit:NI,controlHeight:e4,menuGutter:t4},Ep={borderRadius:ZL,colors:JL,spacing:n4},r4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:f0(),captureMenuScroll:!f0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:xL(),formatGroupLabel:GL,getOptionLabel:KL,getOptionValue:QL,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:XL,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!eM(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function C0(n,e,t,r){var s=VI(n,e,t),a=MI(n,e,t),u=DI(n,e),d=jh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function uh(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return C0(n,u,e,d)}).filter(function(u){return A0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=C0(n,t,e,r);return A0(n,a)?a:void 0}).filter(rM)}function OI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,bg(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function b0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,bg(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function i4(n,e){return OI(uh(n,e))}function A0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!jI(n)||!a)&&LI(n,{label:u,value:d,data:s},r)}function s4(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function o4(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Tp=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},DI=function(e,t){return e.getOptionLabel(t)},jh=function(e,t){return e.getOptionValue(t)};function VI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function MI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=jh(n,e);return t.some(function(s){return jh(n,s)===r})}function LI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var jI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},a4=1,FI=(function(n){A2(t,n);var e=k2(t);function t(r){var s;if(C2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var y=s.props,T=y.onChange,_=y.name;m.name=_,s.ariaOnChange(f,m),T(f,m)},s.setValue=function(f,m,y){var T=s.props,_=T.closeMenuOnSelect,P=T.isMulti,O=T.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:O}),_&&(s.setState({inputIsHiddenAfterUpdate:!P}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:y})},s.selectOption=function(f){var m=s.props,y=m.blurInputOnSelect,T=m.isMulti,_=m.name,P=s.state.selectValue,O=T&&s.isOptionSelected(f,P),D=s.isOptionDisabled(f,P);if(O){var A=s.getOptionValue(f);s.setValue(P.filter(function(z){return s.getOptionValue(z)!==A}),"deselect-option",f)}else if(!D)T?s.setValue([].concat(bg(P),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:_});return}y&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,y=s.state.selectValue,T=s.getOptionValue(f),_=y.filter(function(O){return s.getOptionValue(O)!==T}),P=Gc(m,_,_[0]||null);s.onChange(P,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(Gc(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,y=m[m.length-1],T=m.slice(0,m.length-1),_=Gc(f,T,T[0]||null);y&&s.onChange(_,{action:"pop-value",removedValue:y})},s.getFocusedOptionId=function(f){return Tp(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return b0(uh(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return QV.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return DI(s.props,f)},s.getOptionValue=function(f){return jh(s.props,f)},s.getStyles=function(f,m){var y=s.props.unstyled,T=YL[f](m,y);T.boxSizing="border-box";var _=s.props.styles[f];return _?_(T,m):T},s.getClassNames=function(f,m){var y,T;return(y=(T=s.props.classNames)[f])===null||y===void 0?void 0:y.call(T,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return _L(s.props)},s.buildCategorizedOptions=function(){return uh(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return OI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:Ae({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,y=m.isMulti,T=m.menuIsOpen;s.focusInput(),T?(s.setState({inputIsHiddenAfterUpdate:!y}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&wd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,y=m&&m.item(0);y&&(s.initialTouchX=y.clientX,s.initialTouchY=y.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,y=m&&m.item(0);if(y){var T=Math.abs(y.clientX-s.initialTouchX),_=Math.abs(y.clientY-s.initialTouchY),P=5;s.userIsDragging=T>P||_>P}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,y=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(y,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),y=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:y>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return jI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,y=m.isMulti,T=m.backspaceRemovesValue,_=m.escapeClearsValue,P=m.inputValue,O=m.isClearable,D=m.isDisabled,A=m.menuIsOpen,z=m.onKeyDown,G=m.tabSelectsValue,q=m.openMenuOnFocus,Z=s.state,K=Z.focusedOption,J=Z.focusedValue,R=Z.selectValue;if(!D&&!(typeof z=="function"&&(z(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!y||P)return;s.focusValue("previous");break;case"ArrowRight":if(!y||P)return;s.focusValue("next");break;case"Delete":case"Backspace":if(P)return;if(J)s.removeValue(J);else{if(!T)return;y?s.popValue():O&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!A||!G||!K||q&&s.isOptionSelected(K,R))return;s.selectOption(K);break;case"Enter":if(f.keyCode===229)break;if(A){if(!K||s.isComposing)return;s.selectOption(K);break}return;case"Escape":A?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:P}),s.onMenuClose()):O&&_&&s.clearValue();break;case" ":if(P)return;if(!A){s.openMenu("first");break}if(!K)return;s.selectOption(K);break;case"ArrowUp":A?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":A?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!A)return;s.focusOption("pageup");break;case"PageDown":if(!A)return;s.focusOption("pagedown");break;case"Home":if(!A)return;s.focusOption("first");break;case"End":if(!A)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++a4),s.state.selectValue=h0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=Tp(a,u[d])}return s}return b2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&d0(this.menuListRef,this.focusedOptionRef),qL()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(d0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),y=s==="first"?0:m.length-1;if(!this.props.isMulti){var T=m.indexOf(d[0]);T>-1&&(y=T)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[y],focusedOptionId:this.getFocusedOptionId(m[y])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,y=-1;if(u.length){switch(s){case"previous":f===0?y=0:f===-1?y=m:y=f-1;break;case"next":f>-1&&f<m&&(y=f+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:u[y]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ep):Ae(Ae({},Ep),this.props.theme):Ep})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,y=this.setValue,T=this.props,_=T.isMulti,P=T.isRtl,O=T.options,D=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:D,isMulti:_,isRtl:P,options:O,selectOption:m,selectProps:T,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return VI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return MI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return LI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,y=s.form,T=s.menuIsOpen,_=s.required,P=this.getComponents(),O=P.Input,D=this.state,A=D.inputIsHidden,z=D.ariaSelection,G=this.commonProps,q=d||this.getElementId("input"),Z=Ae(Ae(Ae({"aria-autocomplete":"list","aria-expanded":T,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":_,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},T&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?(z==null?void 0:z.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?V.createElement(O,Pe({},G,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:q,innerRef:this.getInputRef,isDisabled:a,isHidden:A,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:y,type:"text",value:f},Z)):V.createElement(OL,Pe({id:q,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Mh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:y,value:""},Z))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,y=a.SingleValue,T=a.Placeholder,_=this.commonProps,P=this.props,O=P.controlShouldRenderValue,D=P.isDisabled,A=P.isMulti,z=P.inputValue,G=P.placeholder,q=this.state,Z=q.selectValue,K=q.focusedValue,J=q.isFocused;if(!this.hasValue()||!O)return z?null:V.createElement(T,Pe({},_,{key:"placeholder",isDisabled:D,isFocused:J,innerProps:{id:this.getElementId("placeholder")}}),G);if(A)return Z.map(function(b,k){var I=b===K,L="".concat(s.getOptionLabel(b),"-").concat(s.getOptionValue(b));return V.createElement(u,Pe({},_,{components:{Container:d,Label:f,Remove:m},isFocused:I,isDisabled:D,key:L,index:k,removeProps:{onClick:function(){return s.removeValue(b)},onTouchEnd:function(){return s.removeValue(b)},onMouseDown:function(N){N.preventDefault()}},data:b}),s.formatOptionLabel(b,"value"))});if(z)return null;var R=Z[0];return V.createElement(y,Pe({},_,{data:R,isDisabled:D}),this.formatOptionLabel(R,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var T={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Pe({},u,{innerProps:T,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!a||!m)return null;var T={"aria-hidden":"true"};return V.createElement(a,Pe({},u,{innerProps:T,isDisabled:f,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return V.createElement(u,Pe({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Pe({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,y=a.MenuPortal,T=a.LoadingMessage,_=a.NoOptionsMessage,P=a.Option,O=this.commonProps,D=this.state.focusedOption,A=this.props,z=A.captureMenuScroll,G=A.inputValue,q=A.isLoading,Z=A.loadingMessage,K=A.minMenuHeight,J=A.maxMenuHeight,R=A.menuIsOpen,b=A.menuPlacement,k=A.menuPosition,I=A.menuPortalTarget,L=A.menuShouldBlockScroll,F=A.menuShouldScrollIntoView,N=A.noOptionsMessage,he=A.onMenuScrollToTop,Ue=A.onMenuScrollToBottom;if(!R)return null;var Ve=function(ce,_e){var Re=ce.type,me=ce.data,Fe=ce.isDisabled,Me=ce.isSelected,Be=ce.label,gt=ce.value,bt=D===me,Wn=Fe?void 0:function(){return s.onOptionHover(me)},vt=Fe?void 0:function(){return s.selectOption(me)},He="".concat(s.getElementId("option"),"-").concat(_e),sr={id:He,onClick:vt,onMouseMove:Wn,onMouseOver:Wn,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:Me};return V.createElement(P,Pe({},O,{innerProps:sr,data:me,isDisabled:Fe,isSelected:Me,key:He,label:Be,type:Re,value:gt,isFocused:bt,innerRef:bt?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(ce.data,"menu"))},Oe;if(this.hasOptions())Oe=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var ce=Y.data,_e=Y.options,Re=Y.index,me="".concat(s.getElementId("group"),"-").concat(Re),Fe="".concat(me,"-heading");return V.createElement(u,Pe({},O,{key:me,data:ce,options:_e,Heading:d,headingProps:{id:Fe,data:Y.data},label:s.formatGroupLabel(Y.data)}),Y.options.map(function(Me){return Ve(Me,"".concat(Re,"-").concat(Me.index))}))}else if(Y.type==="option")return Ve(Y,"".concat(Y.index))});else if(q){var ne=Z({inputValue:G});if(ne===null)return null;Oe=V.createElement(T,O,ne)}else{var de=N({inputValue:G});if(de===null)return null;Oe=V.createElement(_,O,de)}var ae={minMenuHeight:K,maxMenuHeight:J,menuPlacement:b,menuPosition:k,menuShouldScrollIntoView:F},B=V.createElement(hM,Pe({},O,ae),function(Y){var ce=Y.ref,_e=Y.placerProps,Re=_e.placement,me=_e.maxHeight;return V.createElement(f,Pe({},O,ae,{innerRef:ce,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:q,placement:Re}),V.createElement(FL,{captureEnabled:z,onTopArrive:he,onBottomArrive:Ue,lockEnabled:L},function(Fe){return V.createElement(m,Pe({},O,{innerRef:function(Be){s.getMenuListRef(Be),Fe(Be)},innerProps:{role:"listbox","aria-multiselectable":O.isMulti,id:s.getElementId("listbox")},isLoading:q,maxHeight:me,focusedOption:D}),Oe)}))});return I||k==="fixed"?V.createElement(y,Pe({},O,{appendTo:I,controlElement:this.controlRef,menuPlacement:b,menuPosition:k}),B):B}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,y=a.required,T=this.state.selectValue;if(y&&!this.hasValue()&&!d)return V.createElement(BL,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var _=T.map(function(D){return s.getOptionValue(D)}).join(u);return V.createElement("input",{name:m,type:"hidden",value:_})}else{var P=T.length>0?T.map(function(D,A){return V.createElement("input",{key:"i-".concat(A),name:m,type:"hidden",value:s.getOptionValue(D)})}):V.createElement("input",{name:m,type:"hidden",value:""});return V.createElement("div",null,P)}else{var O=T[0]?this.getOptionValue(T[0]):"";return V.createElement("input",{name:m,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,y=a.selectValue,T=this.getFocusableOptions();return V.createElement(AL,Pe({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:y,focusableOptions:T,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,y=m.className,T=m.id,_=m.isDisabled,P=m.menuIsOpen,O=this.state.isFocused,D=this.commonProps=this.getCommonProps();return V.createElement(d,Pe({},D,{className:y,innerProps:{id:T,onKeyDown:this.onKeyDown},isDisabled:_,isFocused:O}),this.renderLiveRegion(),V.createElement(a,Pe({},D,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:_,isFocused:O,menuIsOpen:P}),V.createElement(f,Pe({},D,{isDisabled:_}),this.renderPlaceholderOrValue(),this.renderInput()),V.createElement(u,Pe({},D,{isDisabled:_}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,y=a.isFocused,T=a.prevWasFocused,_=a.instancePrefix,P=s.options,O=s.value,D=s.menuIsOpen,A=s.inputValue,z=s.isMulti,G=h0(O),q={};if(u&&(O!==u.value||P!==u.options||D!==u.menuIsOpen||A!==u.inputValue)){var Z=D?i4(s,G):[],K=D?b0(uh(s,G),"".concat(_,"-option")):[],J=d?s4(a,G):null,R=o4(a,Z),b=Tp(K,R);q={selectValue:G,focusedOption:R,focusedOptionId:b,focusableOptionsWithIds:K,focusedValue:J,clearFocusValueOnUpdate:!1}}var k=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},I=m,L=y&&T;return y&&!L&&(I={value:Gc(z,G,G[0]||null),options:G,action:"initial-input-focus"},L=!T),(m==null?void 0:m.action)==="initial-input-focus"&&(I=null),Ae(Ae(Ae({},q),k),{},{prevProps:s,ariaSelection:I,prevWasFocused:L})}}]),t})(V.Component);FI.defaultProps=r4;var l4=V.forwardRef(function(n,e){var t=I2(n);return V.createElement(FI,Pe({ref:e},t))}),u4=l4;const Pl=["Anagrafica","Stato fisico","Obiettivi","Supporto"];function Le(n){return typeof n=="string"?n:n==null?"":String(n)}function Kc(n){return Le(n.uid).trim()||n.id}function Sp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:Le(t.name),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,weight:Le(t.weight),mediaUrl:Le(t.mediaUrl)}}).filter(e=>!!e):[]}function ot(n){return Le(n).trim()||"Non compilato"}function c4(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function h4(n,e){const t=c4(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function R0(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Ip(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function hs(){return{name:"",sets:3,reps:10,weight:"",mediaUrl:""}}function UI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function P0(n,e){const t=UI(e);return n?{...t,fullName:Le(n.fullName).trim()||t.fullName,age:Le(n.age).trim(),sex:Le(n.sex).trim(),email:Le(n.email).trim()||t.email,phone:Le(n.phone).trim(),discoverySource:Le(n.discoverySource).trim(),heightCm:Le(n.heightCm).trim(),weightKg:Le(n.weightKg).trim(),pastProgram:Le(n.pastProgram).trim(),trainingFrequency:Le(n.trainingFrequency).trim(),workoutDuration:Le(n.workoutDuration).trim(),workoutLocation:Le(n.workoutLocation).trim(),equipment:Le(n.equipment).trim(),trainingTypeHistory:Le(n.trainingTypeHistory).trim(),hasInjuries:Le(n.hasInjuries).trim(),injuryDetails:Le(n.injuryDetails).trim(),objectivePrimary:Le(n.objectivePrimary).trim(),objectiveReason:Le(n.objectiveReason).trim(),expectedTimeline:Le(n.expectedTimeline).trim(),supportPreference:Le(n.supportPreference).trim(),supportPreferenceOther:Le(n.supportPreferenceOther).trim(),investmentRange:Le(n.investmentRange).trim(),whatBlockedSoFar:Le(n.whatBlockedSoFar).trim(),oneThingToImprove:Le(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:Le(n.riskIfNoChange).trim(),readiness:Le(n.readiness).trim(),notes:Le(n.notes).trim()}:t}function d4(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function k0(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function f4(){const{role:n,user:e,isSupervisor:t}=Ba(),r=iu(),{showError:s,showSuccess:a}=Uh(),[u,d]=V.useState([]),[f,m]=V.useState([]),[y,T]=V.useState(!1),[_,P]=V.useState(null),[O,D]=V.useState(!1),[A,z]=V.useState(!1),[G,q]=V.useState(!1),[Z,K]=V.useState(!1),[J,R]=V.useState(!1),[b,k]=V.useState(0),[I,L]=V.useState(UI()),[F,N]=V.useState(null),[he,Ue]=V.useState(null),[Ve,Oe]=V.useState(!1),[ne,de]=V.useState([]),[ae,B]=V.useState(""),[Y,ce]=V.useState(""),[_e,Re]=V.useState("clients"),[me,Fe]=V.useState(""),[Me,Be]=V.useState(""),[gt,bt]=V.useState([hs()]),Wn=F!==null,vt=u.find(M=>Kc(M)===me)??null,He=f.find(M=>M.id===me)??f.find(M=>M.clientId===me),sr=h4(Le(_==null?void 0:_.phone),Le(_==null?void 0:_.fullName)),Mi=u.reduce((M,le)=>{const Te=Le(le.displayName).trim()||Le(le.email).trim()||le.id;return M[Kc(le)]=Te,M[le.id]=Te,M},{}),Li=u.map(M=>({value:Kc(M),label:Le(M.displayName).trim()||Le(M.email)||M.id})),Po=Li.find(M=>M.value===me)??null,si=Math.round((b+1)/Pl.length*100),or=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],qn=ne.filter(M=>M.uid!==(e==null?void 0:e.uid)).filter(M=>!M.isSupervisor).filter(M=>{const le=ae.trim().toLowerCase();return le?M.displayName.toLowerCase().includes(le)||M.email.toLowerCase().includes(le):!0}).sort((M,le)=>{const Te=M.expiresAt?new Date(M.expiresAt).getTime():Number.MAX_SAFE_INTEGER,it=le.expiresAt?new Date(le.expiresAt).getTime():Number.MAX_SAFE_INTEGER;return Te-it});V.useEffect(()=>{!t&&_e==="supervisor"&&Re("clients")},[t,_e]);const Ds=V.useMemo(()=>({control:(M,le)=>({...M,minHeight:48,borderRadius:12,borderColor:le.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:le.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:M=>({...M,borderRadius:12,overflow:"hidden",zIndex:50}),option:(M,le)=>({...M,backgroundColor:le.isSelected?"#ff6a00":le.isFocused?"rgba(255,106,0,0.10)":"#fff",color:le.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);V.useEffect(()=>{async function M(){if(!me){P(null);return}try{const le=await qS(me,"onboarding");P(le.data()??null)}catch{P(null)}}M()},[me]),V.useEffect(()=>{if(!me)return;if(!He){Be(""),bt([hs()]);return}Be(He.title??"");const M=Sp(He.exercises).filter(le=>le.name.trim().length>0);bt(M.length>0?M:[hs()])},[me,He==null?void 0:He.id]),V.useEffect(()=>{He||z(!1)},[He==null?void 0:He.id]);async function Or(){if(n){T(!0);try{const Te=(await ZD(e==null?void 0:e.uid)).docs.map(it=>({id:it.id,...it.data()})).sort((it,Ht)=>{const Us=Le(it.displayName||it.email||it.id).toLowerCase(),yt=Le(Ht.displayName||Ht.email||Ht.id).toLowerCase();return Us.localeCompare(yt)});d(Te),!me&&Te[0]&&Fe(Kc(Te[0]));try{const it=await GS(n);m(it.docs.map(Ht=>({id:Ht.id,...Ht.data()})))}catch(it){m([]),s(Bt(it))}}catch(M){console.error("Coach action failed:",M),s(Bt(M))}finally{T(!1)}}}V.useEffect(()=>{Or()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{!he||he.isSupervisor||he.isExpired&&Rr().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[he==null?void 0:he.status,he==null?void 0:he.isExpired,he==null?void 0:he.isSupervisor]),V.useEffect(()=>{async function M(){if(!(!n||n==="client")){Oe(!0);try{const le=await Ww();Ue(le)}catch(le){s(Bt(le))}finally{Oe(!1)}}}M()},[n,e==null?void 0:e.uid]);async function oi(){if(t)try{const M=await KD();de(M.coaches??[])}catch(M){s(Bt(M))}}V.useEffect(()=>{oi()},[t,e==null?void 0:e.uid]);async function ai(M,le){T(!0);try{await M(),a(le),await Or()}catch(Te){s(Bt(Te))}finally{T(!1)}}function At(){bt(M=>[...M,hs()])}function Rt(M){bt(le=>le.length<=1?le:le.filter((Te,it)=>it!==M))}function ar(M){Tn(M,hs())}function Tn(M,le){bt(Te=>Te.map((it,Ht)=>Ht===M?{...it,...le}:it))}function We(M,le){L(Te=>({...Te,[M]:le}))}function Dr(){if(!He){Be(""),bt([hs()]);return}Be(He.title??"");const M=Sp(He.exercises).filter(le=>le.name.trim().length>0);bt(M.length>0?M:[hs()])}function li(){if(!me){s("Seleziona prima un cliente.");return}const M={name:Le(vt==null?void 0:vt.displayName).trim(),email:Le(vt==null?void 0:vt.email).trim()};L(P0(_,M)),k(0),q(!0)}function Vs(){const M={name:Le(vt==null?void 0:vt.displayName).trim(),email:Le(vt==null?void 0:vt.email).trim()};L(P0(_,M)),k(0),q(!1)}function Ms(){return I.fullName.trim()?I.email.trim()?I.phone.trim()?I.age.trim()?I.sex.trim()?I.heightCm.trim()?I.weightKg.trim()?I.pastProgram.trim()?I.trainingFrequency.trim()?I.workoutDuration.trim()?I.workoutLocation.trim()?I.equipment.trim()?I.objectivePrimary.trim()?I.objectiveReason.trim()?I.expectedTimeline.trim()?I.supportPreference.trim()?I.investmentRange.trim()?I.readiness.trim()?null:"Compila disponibilit a partire.":"Compila fascia investimento.":"Compila supporto preferito.":"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function Ls(){if(!me){s("Seleziona prima un cliente.");return}const M=Ms();if(M){s(M);return}const le={fullName:I.fullName.trim(),age:I.age.trim(),sex:I.sex.trim(),email:I.email.trim(),phone:I.phone.trim(),discoverySource:I.discoverySource.trim(),heightCm:I.heightCm.trim(),weightKg:I.weightKg.trim(),pastProgram:I.pastProgram.trim(),trainingFrequency:I.trainingFrequency.trim(),workoutDuration:I.workoutDuration.trim(),workoutLocation:I.workoutLocation.trim(),equipment:I.equipment.trim(),trainingTypeHistory:I.trainingTypeHistory.trim(),hasInjuries:I.hasInjuries.trim(),injuryDetails:I.injuryDetails.trim(),objectivePrimary:I.objectivePrimary.trim(),objectiveReason:I.objectiveReason.trim(),expectedTimeline:I.expectedTimeline.trim(),supportPreference:I.supportPreference.trim(),supportPreferenceOther:I.supportPreferenceOther.trim(),investmentRange:I.investmentRange.trim(),whatBlockedSoFar:I.whatBlockedSoFar.trim(),oneThingToImprove:I.oneThingToImprove.trim(),importanceScore:Number(I.importanceScore||0),riskIfNoChange:I.riskIfNoChange.trim(),readiness:I.readiness.trim(),goal:I.objectivePrimary.trim(),experienceLevel:I.pastProgram.trim(),trainingDaysPerWeek:d4(I.trainingFrequency),notes:I.notes.trim(),compiledBy:"coach"};T(!0);try{await e2(me,le),P(le),a("Anagrafica cliente salvata con successo."),q(!1)}catch(Te){s(Bt(Te))}finally{T(!1)}}async function js(){const M=Me.trim();if(!M){s("Inserisci un titolo per la scheda.");return}const le=gt.map(Te=>({name:Te.name.trim(),sets:Number(Te.sets)||0,reps:Number(Te.reps)||0,weight:Te.weight.trim(),mediaUrl:Te.mediaUrl.trim()})).filter(Te=>Te.name.length>0);if(le.length===0){s("Aggiungi almeno un esercizio con nome.");return}He?await ai(()=>r2(He.id,{title:M,status:"active",exercises:le}),"Scheda aggiornata con successo."):await ai(()=>t2({clientId:me,title:M,status:"active",exercises:le}),"Scheda creata e subito visibile al cliente."),D(!1)}function Fs(){if(!me){s("Seleziona prima un cliente.");return}Dr(),D(!0)}function ui(){Dr(),D(!1)}async function ji(M,le){if(le){if(!le.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!me){s("Seleziona prima un cliente.");return}N(M);try{const Te=await s2(me,le);Tn(M,{mediaUrl:Te}),a("Media caricato con successo.")}catch(Te){console.error("Media upload failed:",Te),s(Bt(Te))}finally{N(null)}}}async function Fi(){!He||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await ai(()=>i2(He.id),"Scheda eliminata con successo."),Be(""),bt([hs()]),D(!1))}async function pn(M,le){ce(M);try{if(le==="activate"){const Te=ne.find(it=>it.uid===M);(Te==null?void 0:Te.status)==="disabled"?(await qw(M),a("Coach sbloccato con successo.")):(Te==null?void 0:Te.status)==="active_paid"?(await QD(M),a("Abbonamento rinnovato di 1 anno.")):(await qw(M),a("Abbonamento attivato."))}else await XD(M),a("Abbonamento disattivato.");await oi()}catch(Te){s(Bt(Te))}finally{ce("")}}async function Gn(){Oe(!0);try{await US();const M=await Ww();Ue(M),a("Periodo di prova attivato.")}catch(M){s(Bt(M))}finally{Oe(!1)}}async function Ui(){R(!0);try{await zS(),await Rr().catch(()=>{}),r("/auth",{replace:!0})}catch(M){s(Bt(M))}finally{R(!1),K(!1)}}return E.jsxs(YS,{role:n==="trainer"?"trainer":"admin",subtitle:"Flusso diviso per tab: clienti, schede e controllo accessi.",title:"Area Coach",sections:or,activeSection:_e,onSectionChange:M=>Re(M),children:[he!=null&&he.requiresTrialAcceptance?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card fullscreen-gate",children:[E.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),E.jsx("h2",{children:"Prova gratuita 15 giorni"}),E.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),E.jsx("button",{className:"btn",type:"button",disabled:Ve,onClick:()=>void Gn(),children:Ve?"Attivazione...":"Accetta e continua"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Rr().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,_e==="code"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Il tuo codice coach"}),E.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),E.jsx("p",{className:"coach-code",children:(he==null?void 0:he.coachCode)||"Caricamento..."}),Ve?E.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,he!=null&&he.isSupervisor?E.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{className:"hint",children:["Stato accesso: ",E.jsx("strong",{children:(he==null?void 0:he.status)??"non disponibile"}),"  ","Scadenza: ",E.jsx("strong",{children:k0((he==null?void 0:he.expiresAt)??(he==null?void 0:he.trialEndsAt)??(he==null?void 0:he.subscriptionEndsAt))})]}),E.jsx("div",{className:"divider"}),E.jsx("h3",{children:"Elimina profilo"}),E.jsx("p",{className:"hint",children:"Se elimini il profilo coach perderai accesso, abbonamento, clienti associati e tutti i dati collegati."}),E.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>K(!0),children:"Elimina il mio profilo"})]})]}):null,t&&_e==="supervisor"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Gestione coach (Supervisor)"}),E.jsxs("label",{children:["Cerca coach per nome o email",E.jsx("input",{value:ae,onChange:M=>B(M.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),E.jsxs("div",{className:"supervisor-list",children:[qn.map(M=>E.jsxs("article",{className:"supervisor-row",children:[E.jsxs("div",{children:[E.jsx("p",{children:E.jsx("strong",{children:M.displayName||"Coach senza nome"})}),E.jsx("p",{className:"hint",children:M.email}),E.jsxs("p",{className:"hint",children:["Codice: ",M.coachCode||"-"]}),E.jsxs("p",{className:"hint",children:["Stato: ",M.isSupervisor?"supervisor_active":M.status]}),E.jsxs("p",{className:"hint",children:["Scadenza: ",k0(M.expiresAt)]})]}),E.jsxs("div",{className:"supervisor-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:M.isSupervisor||Y===M.uid,onClick:()=>void pn(M.uid,"activate"),children:M.status==="disabled"?"Sblocca":M.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),E.jsx("button",{className:"btn btn-danger",type:"button",disabled:M.isSupervisor||Y===M.uid,onClick:()=>void pn(M.uid,"disable"),children:"Disattiva"})]})]},M.uid)),qn.length===0?E.jsx("article",{className:"supervisor-row",children:E.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,_e==="clients"||_e==="plans"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:_e==="plans"?"Schede tecniche":"Gestione cliente"}),E.jsxs("label",{children:["Clienti registrati",E.jsx(u4,{styles:Ds,options:Li,value:Po,onChange:M=>Fe((M==null?void 0:M.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Or(),children:"Aggiorna lista clienti"}),u.length===0?E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:_e==="plans"?"Nessuna scheda disponibile":"Nessun cliente associato"}),E.jsx("p",{className:"hint",children:_e==="plans"?"Non hai ancora clienti associati, quindi non puoi creare schede. Quando un cliente inserisce il tuo codice coach, troverai qui la sezione per creare il programma.":"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):E.jsxs(E.Fragment,{children:[_e==="clients"?E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:"Anagrafica cliente"}),E.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),E.jsx("button",{className:"btn",type:"button",onClick:li,disabled:y||!me,children:_?"Modifica anagrafica completa":"Compila anagrafica completa"}),sr?E.jsx("a",{className:"btn btn-whatsapp",href:sr,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):E.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Anagrafica"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Nome:"})," ",ot(_==null?void 0:_.fullName)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Et:"})," ",ot(_==null?void 0:_.age)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Sesso:"})," ",ot(_==null?void 0:_.sex)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Email:"})," ",ot(_==null?void 0:_.email)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Telefono:"})," ",ot(_==null?void 0:_.phone)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Come ci ha conosciuto:"})," ",ot(_==null?void 0:_.discoverySource)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Stato fisico e allenamento"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altezza:"})," ",ot(_==null?void 0:_.heightCm)," cm"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Peso:"})," ",ot(_==null?void 0:_.weightKg)," kg"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Esperienza programmi:"})," ",ot((_==null?void 0:_.pastProgram)||(_==null?void 0:_.experienceLevel))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti settimanali:"})," ",ot((_==null?void 0:_.trainingFrequency)||(_==null?void 0:_.trainingDaysPerWeek))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Durata sessione:"})," ",ot(_==null?void 0:_.workoutDuration)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Luogo allenamento:"})," ",ot(_==null?void 0:_.workoutLocation)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Attrezzatura:"})," ",ot(_==null?void 0:_.equipment)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti svolti:"})," ",ot(_==null?void 0:_.trainingTypeHistory)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Infortuni/problemi:"})," ",ot(_==null?void 0:_.hasInjuries)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Dettagli infortuni:"})," ",ot(_==null?void 0:_.injuryDetails)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Obiettivi"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Obiettivo principale:"})," ",ot((_==null?void 0:_.objectivePrimary)||(_==null?void 0:_.goal))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Perch:"})," ",ot(_==null?void 0:_.objectiveReason)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Timeline risultati:"})," ",ot(_==null?void 0:_.expectedTimeline)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",ot((_==null?void 0:_.whatBlockedSoFar)||(_==null?void 0:_.notes))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",ot(_==null?void 0:_.oneThingToImprove)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Importanza obiettivo:"})," ",ot(_==null?void 0:_.importanceScore)," / 10"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Rischio se non cambia:"})," ",ot(_==null?void 0:_.riskIfNoChange)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Supporto e decisione"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Supporto preferito:"})," ",ot(_==null?void 0:_.supportPreference)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altro supporto:"})," ",ot(_==null?void 0:_.supportPreferenceOther)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Fascia investimento:"})," ",ot(_==null?void 0:_.investmentRange)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Disponibilit a partire:"})," ",ot(_==null?void 0:_.readiness)]})]})]}):null,_e==="plans"?E.jsxs(E.Fragment,{children:[me?null:E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:"Seleziona un cliente"}),E.jsx("p",{className:"hint",children:"Scegli un cliente dalla lista in alto per creare o modificare la sua scheda tecnica."})]}),E.jsx("p",{className:"hint",children:He?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),E.jsxs("div",{className:"supervisor-actions",children:[He?E.jsx("button",{className:"btn btn-ghost",disabled:y,onClick:()=>z(!0),type:"button",children:"Visualizza scheda"}):null,E.jsx("button",{className:"btn",disabled:y||!me,onClick:Fs,type:"button",children:He?"Modifica scheda":"Crea scheda"})]}),He?E.jsx("button",{className:"btn btn-danger",disabled:y,onClick:()=>void Fi(),type:"button",children:"Elimina scheda"}):null]}):null]})]}):null,G?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:"Anagrafica completa cliente"}),E.jsxs("p",{className:"hero-sub",children:["Step ",b+1," di ",Pl.length,"  Completamento ",si,"%"]}),E.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:E.jsx("div",{className:"onboarding-progress-bar",style:{width:`${si}%`}})}),E.jsx("div",{className:"step-tabs",children:Pl.map((M,le)=>E.jsx("button",{className:`step-tab ${b===le?"step-tab-active":""}`.trim(),type:"button",onClick:()=>k(le),children:M},M))}),b===0?E.jsxs("div",{className:"modal-grid",children:[E.jsxs("label",{children:["Nome e cognome *",E.jsx("input",{value:I.fullName,onChange:M=>We("fullName",M.target.value)})]}),E.jsxs("label",{children:["Et *",E.jsx("input",{type:"number",min:12,max:99,value:I.age,onChange:M=>We("age",M.target.value)})]}),E.jsxs("label",{children:["Sesso *",E.jsx("input",{value:I.sex,onChange:M=>We("sex",M.target.value)})]}),E.jsxs("label",{children:["E-mail *",E.jsx("input",{type:"email",value:I.email,onChange:M=>We("email",M.target.value)})]}),E.jsxs("label",{children:["Telefono *",E.jsx("input",{type:"tel",value:I.phone,onChange:M=>We("phone",M.target.value)})]}),E.jsxs("label",{children:["Come ci ha conosciuto",E.jsx("input",{value:I.discoverySource,onChange:M=>We("discoverySource",M.target.value)})]})]}):null,b===1?E.jsxs("div",{className:"modal-grid",children:[E.jsxs("label",{children:["Altezza (cm) *",E.jsx("input",{type:"number",min:100,max:250,value:I.heightCm,onChange:M=>We("heightCm",M.target.value)})]}),E.jsxs("label",{children:["Peso (kg) *",E.jsx("input",{type:"number",min:30,max:250,value:I.weightKg,onChange:M=>We("weightKg",M.target.value)})]}),E.jsxs("label",{children:["Programmi precedenti *",E.jsx("input",{value:I.pastProgram,onChange:M=>We("pastProgram",M.target.value),placeholder:"Es. Si con coach online"})]}),E.jsxs("label",{children:["Frequenza allenamenti *",E.jsx("input",{value:I.trainingFrequency,onChange:M=>We("trainingFrequency",M.target.value),placeholder:"Es. 3-4 a settimana"})]}),E.jsxs("label",{children:["Durata allenamento *",E.jsx("input",{value:I.workoutDuration,onChange:M=>We("workoutDuration",M.target.value),placeholder:"Es. 45 minuti"})]}),E.jsxs("label",{children:["Dove si allena *",E.jsx("input",{value:I.workoutLocation,onChange:M=>We("workoutLocation",M.target.value)})]}),E.jsxs("label",{children:["Attrezzatura disponibile *",E.jsx("input",{value:I.equipment,onChange:M=>We("equipment",M.target.value)})]}),E.jsxs("label",{children:["Allenamenti fatti",E.jsx("textarea",{value:I.trainingTypeHistory,onChange:M=>We("trainingTypeHistory",M.target.value)})]}),E.jsxs("label",{children:["Infortuni/problemi",E.jsx("input",{value:I.hasInjuries,onChange:M=>We("hasInjuries",M.target.value),placeholder:"Si/No"})]}),E.jsxs("label",{children:["Dettagli infortuni",E.jsx("textarea",{value:I.injuryDetails,onChange:M=>We("injuryDetails",M.target.value)})]})]}):null,b===2?E.jsxs("div",{className:"modal-grid",children:[E.jsxs("label",{children:["Obiettivo principale *",E.jsx("input",{value:I.objectivePrimary,onChange:M=>We("objectivePrimary",M.target.value)})]}),E.jsxs("label",{children:["Perch questo obiettivo? *",E.jsx("textarea",{value:I.objectiveReason,onChange:M=>We("objectiveReason",M.target.value)})]}),E.jsxs("label",{children:["Timeline risultati *",E.jsx("input",{value:I.expectedTimeline,onChange:M=>We("expectedTimeline",M.target.value)})]}),E.jsxs("label",{children:["Cosa lo ha bloccato",E.jsx("textarea",{value:I.whatBlockedSoFar,onChange:M=>We("whatBlockedSoFar",M.target.value)})]}),E.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",E.jsx("textarea",{value:I.oneThingToImprove,onChange:M=>We("oneThingToImprove",M.target.value)})]}),E.jsxs("label",{children:["Importanza obiettivo (1-10)",E.jsx("input",{type:"number",min:1,max:10,value:I.importanceScore,onChange:M=>We("importanceScore",M.target.value)})]}),E.jsxs("label",{children:["Rischio se non cambia",E.jsx("textarea",{value:I.riskIfNoChange,onChange:M=>We("riskIfNoChange",M.target.value)})]})]}):null,b===3?E.jsxs("div",{className:"modal-grid",children:[E.jsxs("label",{children:["Supporto preferito *",E.jsx("input",{value:I.supportPreference,onChange:M=>We("supportPreference",M.target.value)})]}),E.jsxs("label",{children:["Altro supporto",E.jsx("input",{value:I.supportPreferenceOther,onChange:M=>We("supportPreferenceOther",M.target.value)})]}),E.jsxs("label",{children:["Fascia investimento *",E.jsx("input",{value:I.investmentRange,onChange:M=>We("investmentRange",M.target.value),placeholder:"Es. 150-250"})]}),E.jsxs("label",{children:["Disponibilit a partire *",E.jsx("input",{value:I.readiness,onChange:M=>We("readiness",M.target.value)})]}),E.jsxs("label",{children:["Note coach",E.jsx("textarea",{value:I.notes,onChange:M=>We("notes",M.target.value)})]})]}):null,E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:b===0,onClick:()=>k(M=>Math.max(M-1,0)),children:"Indietro"}),b<Pl.length-1?E.jsx("button",{className:"btn",type:"button",onClick:()=>k(M=>Math.min(M+1,Pl.length-1)),children:"Continua"}):E.jsx("button",{className:"btn",type:"button",onClick:()=>void Ls(),disabled:y,children:y?"Salvataggio...":"Salva anagrafica"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Vs,children:"Chiudi"})]})}):null,O?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:He?"Modifica scheda":"Compila la scheda"}),E.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),E.jsxs("label",{children:["Titolo scheda *",E.jsx("input",{value:Me,onChange:M=>Be(M.target.value),placeholder:"Forza 4 settimane",required:!0})]}),gt.map((M,le)=>E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[E.jsxs("div",{className:"exercise-head",children:[E.jsxs("h2",{children:["Esercizio ",le+1]}),E.jsx("button",{className:"icon-btn",type:"button",onClick:()=>ar(le),"aria-label":`Reset esercizio ${le+1}`,title:"Reset esercizio",children:""})]}),E.jsxs("label",{children:["Nome esercizio",E.jsx("input",{value:M.name,onChange:Te=>Tn(le,{name:Te.target.value}),placeholder:"Es. Squat bilanciere"})]}),E.jsxs("label",{children:["Numero serie",E.jsx("input",{type:"number",min:1,value:M.sets,onChange:Te=>Tn(le,{sets:Number(Te.target.value)})})]}),E.jsxs("label",{children:["Ripetizioni",E.jsx("input",{type:"number",min:1,value:M.reps,onChange:Te=>Tn(le,{reps:Number(Te.target.value)}),placeholder:"10"})]}),E.jsxs("label",{children:["Peso",E.jsx("input",{value:M.weight,onChange:Te=>Tn(le,{weight:Te.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),E.jsxs("label",{children:["URL video (YouTube o link diretto)",E.jsx("input",{value:R0(M.mediaUrl)?M.mediaUrl:"",onChange:Te=>Tn(le,{mediaUrl:Te.target.value}),placeholder:"https://..."})]}),E.jsxs("label",{children:["Oppure carica un'immagine",E.jsx("input",{type:"file",accept:"image/*",onChange:Te=>{var it;return void ji(le,((it=Te.target.files)==null?void 0:it[0])??null)},disabled:F===le}),Ip(M.mediaUrl)?E.jsx("img",{src:M.mediaUrl,alt:`Anteprima esercizio ${le+1}`,className:"exercise-upload-preview"}):null]}),Ip(M.mediaUrl)?E.jsxs("p",{className:"hint",children:["Immagine caricata."," ",E.jsx("button",{className:"btn-link",type:"button",onClick:()=>Tn(le,{mediaUrl:""}),children:"Rimuovi"})]}):null,F===le?E.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Rt(le),children:"Rimuovi esercizio"})]},`exercise-${le}`)),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:At,children:"Aggiungi esercizio"}),E.jsx("button",{className:"btn",type:"button",disabled:y||Wn,onClick:()=>void js(),children:Wn?"Attendi caricamento media...":He?"Salva modifiche":"Salva scheda tecnica"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:ui,children:"Chiudi"})]})}):null,A&&He?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:"Scheda in sola lettura"}),E.jsxs("p",{className:"hint",children:["Cliente: ",Mi[me]||me]}),E.jsxs("div",{className:"plan-head",children:[E.jsx("p",{className:"hint",children:"Titolo programma"}),E.jsx("h3",{children:He.title||"Senza titolo"})]}),E.jsx("div",{className:"exercise-grid",children:Sp(He.exercises).map((M,le)=>E.jsxs("article",{className:"exercise-card",children:[E.jsx("p",{className:"exercise-name",children:M.name||`Esercizio ${le+1}`}),E.jsxs("div",{className:"exercise-meta",children:[E.jsxs("span",{children:[M.sets||"-"," serie"]}),E.jsxs("span",{children:[M.reps||"-"," reps"]}),E.jsx("span",{children:M.weight||"Peso libero"})]}),M.mediaUrl?E.jsx("a",{className:"btn-link",href:M.mediaUrl,target:"_blank",rel:"noreferrer",children:R0(M.mediaUrl)?"Apri video":Ip(M.mediaUrl)?"Apri immagine":"Apri link"}):E.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`preview-ex-${le}`))}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>z(!1),children:"Chiudi"})]})}):null,Z&&!(he!=null&&he.isSupervisor)?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:"Conferma eliminazione profilo coach"}),E.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente dati, abbonamento e associazioni clienti legate al tuo account coach."}),E.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:J,onClick:()=>K(!1),children:"Annulla"}),E.jsx("button",{className:"btn btn-danger",type:"button",disabled:J,onClick:()=>void Ui(),children:J?"Eliminazione...":"Conferma eliminazione"})]})]})}):null,_e==="overview"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Panoramica"}),E.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),E.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),E.jsx("ul",{className:"list",children:f.slice(0,5).map(M=>{var le;return E.jsxs("li",{children:[E.jsx("strong",{children:M.title}),"  ",((le=M.exercises)==null?void 0:le.length)??0," esercizi  cliente ",Mi[M.clientId]||M.clientId]},M.id)})})]}):null,y?E.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function p4(){const{user:n,role:e}=Ba(),t=iu(),{showError:r,showSuccess:s}=Uh(),[a,u]=V.useState(!1),[d,f]=V.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return E.jsx(Cr,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return E.jsx(Cr,{to:"/app/coach",replace:!0});function m(_,P){f(O=>({...O,[_]:P}))}function y(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function T(){const _=y();if(_){r(_);return}u(!0);try{await GD({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(P){r(Bt(P))}finally{u(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),E.jsx("h1",{children:"Completa il tuo profilo"}),E.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),E.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:E.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),E.jsxs("label",{children:["Nome e cognome *",E.jsx("input",{value:d.fullName,onChange:_=>m("fullName",_.target.value),placeholder:"Nome e cognome"})]}),E.jsxs("label",{children:["E-mail *",E.jsx("input",{value:d.email,onChange:_=>m("email",_.target.value),type:"email",placeholder:"nome@esempio.com"})]}),E.jsxs("label",{children:["Numero di telefono *",E.jsx("input",{value:d.phone,onChange:_=>m("phone",_.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),E.jsxs("label",{children:["Codice coach *",E.jsx("input",{value:d.coachCode,onChange:_=>m("coachCode",_.target.value),placeholder:"Es. lorenzobeastly"})]}),E.jsx("button",{className:"btn",disabled:a,type:"button",onClick:()=>void T(),children:a?"Salvataggio...":"Continua"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Rr(),children:"Esci e cambia account"})]})})}function zI(){return E.jsx("main",{className:"page page-center",children:E.jsxs("div",{className:"card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Caricamento in corso"})]})})}class m4 extends V.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Qualcosa non ha funzionato"}),E.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function x0({allow:n,children:e}){const{user:t,role:r,initializing:s}=Ba();return s?E.jsx(zI,{}):t?r?n.includes(r)?e:E.jsx(Cr,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:E.jsx(Cr,{to:"/onboarding",replace:!0}):E.jsx(Cr,{to:"/auth",replace:!0})}function g4(){const{user:n,role:e,initializing:t}=Ba();return t?E.jsx(zI,{}):n?e?E.jsx(Cr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):E.jsx(Cr,{to:"/app/client",replace:!0}):E.jsx(Cr,{to:"/auth",replace:!0})}function v4(){return E.jsx(m4,{children:E.jsxs(qC,{children:[E.jsx(co,{path:"/",element:E.jsx(g4,{})}),E.jsx(co,{path:"/auth",element:E.jsx(m2,{})}),E.jsx(co,{path:"/onboarding",element:E.jsx(p4,{})}),E.jsx(co,{path:"/app/coach",element:E.jsx(x0,{allow:["admin","trainer"],children:E.jsx(f4,{})})}),E.jsx(co,{path:"/app/client",element:E.jsx(x0,{allow:["client"],children:E.jsx(v2,{})})}),E.jsx(co,{path:"*",element:E.jsx(Cr,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});eC.createRoot(document.getElementById("root")).render(E.jsx(O0.StrictMode,{children:E.jsx(JC,{children:E.jsx(QC,{children:E.jsx(v4,{})})})}));
