import{u as y,r as t,j as e,N as h,l as S,b as C,v as z}from"./index-C6aJxY-I.js";import{t as P}from"./firestore-BAizMrXz.js";function k(){const{user:i,role:r}=y(),[n,x]=t.useState((i==null?void 0:i.displayName)??""),[s,b]=t.useState(""),[l,v]=t.useState("beginner"),[c,j]=t.useState(3),[u,f]=t.useState(""),[d,m]=t.useState(!1),[p,o]=t.useState("");if(!i)return e.jsx(h,{to:"/auth",replace:!0});if(r)return e.jsx(h,{to:r==="client"?"/app/client":"/app/coach",replace:!0});const g=i.email??"";async function N(){m(!0),o("");try{await C({displayName:n.trim(),email:g,requestedRole:"client",onboardingStatus:"pending-role",onboardingUpdatedAt:new Date().toISOString()}),await z("onboarding",{goal:s.trim(),experienceLevel:l,trainingDaysPerWeek:c,notes:u.trim()}),o("Perfetto, informazioni salvate. Sei pronto a iniziare.")}catch(a){o(P(a))}finally{m(!1)}}return e.jsx("main",{className:"page page-center",children:e.jsxs("section",{className:"card auth-card",children:[e.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),e.jsx("h1",{children:"Partiamo con i tuoi obiettivi"}),e.jsxs("p",{className:"hero-sub",children:["Completa queste informazioni per iniziare al meglio. Account: ",e.jsx("strong",{children:g})]}),e.jsxs("label",{children:["Come ti chiami?",e.jsx("input",{value:n,onChange:a=>x(a.target.value),placeholder:"Nome e cognome"})]}),e.jsxs("label",{children:["Qual Ã¨ il tuo obiettivo?",e.jsx("input",{value:s,onChange:a=>b(a.target.value),placeholder:"Es. perdere peso, aumentare forza, tonificare"})]}),e.jsxs("label",{children:["Livello di allenamento",e.jsxs("select",{value:l,onChange:a=>v(a.target.value),children:[e.jsx("option",{value:"beginner",children:"Principiante"}),e.jsx("option",{value:"intermediate",children:"Intermedio"}),e.jsx("option",{value:"advanced",children:"Avanzato"})]})]}),e.jsxs("label",{children:["Quanti giorni ti alleni a settimana?",e.jsx("input",{value:c,onChange:a=>j(Number(a.target.value)),type:"number",min:1,max:7})]}),e.jsxs("label",{children:["Informazioni utili",e.jsx("textarea",{value:u,onChange:a=>f(a.target.value),placeholder:"Es. infortuni, orari preferiti, esigenze specifiche"})]}),e.jsx("button",{className:"btn",disabled:d||!n||!s,type:"button",onClick:()=>void N(),children:d?"Salvataggio...":"Continua"}),e.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void S(),children:"Esci e cambia account"}),p?e.jsx("p",{className:"message",children:p}):null]})})}export{k as OnboardingPage};
