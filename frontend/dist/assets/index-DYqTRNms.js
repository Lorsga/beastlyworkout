function oT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ev(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bd={exports:{}},Ka={},$d={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function aT(){if(Jg)return Pe;Jg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,B={};function L(O,W,he){this.props=O,this.context=W,this.refs=B,this.updater=he||b}L.prototype.isReactComponent={},L.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=L.prototype;function se(O,W,he){this.props=O,this.context=W,this.refs=B,this.updater=he||b}var ee=se.prototype=new ie;ee.constructor=se,j(ee,L.prototype),ee.isPureReactComponent=!0;var ue=Array.isArray,Re=Object.prototype.hasOwnProperty,we={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(O,W,he){var Ae,Ie={},Oe=null,Ue=null;if(W!=null)for(Ae in W.ref!==void 0&&(Ue=W.ref),W.key!==void 0&&(Oe=""+W.key),W)Re.call(W,Ae)&&!x.hasOwnProperty(Ae)&&(Ie[Ae]=W[Ae]);var Fe=arguments.length-2;if(Fe===1)Ie.children=he;else if(1<Fe){for(var $e=Array(Fe),Tt=0;Tt<Fe;Tt++)$e[Tt]=arguments[Tt+2];Ie.children=$e}if(O&&O.defaultProps)for(Ae in Fe=O.defaultProps,Fe)Ie[Ae]===void 0&&(Ie[Ae]=Fe[Ae]);return{$$typeof:n,type:O,key:Oe,ref:Ue,props:Ie,_owner:we.current}}function C(O,W){return{$$typeof:n,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function V(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(he){return W[he]})}var M=/\/+/g;function R(O,W){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):W.toString(36)}function Ge(O,W,he,Ae,Ie){var Oe=typeof O;(Oe==="undefined"||Oe==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(Oe){case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=O,Ie=Ie(Ue),O=Ae===""?"."+R(Ue,0):Ae,ue(Ie)?(he="",O!=null&&(he=O.replace(M,"$&/")+"/"),Ge(Ie,W,he,"",function(Tt){return Tt})):Ie!=null&&(N(Ie)&&(Ie=C(Ie,he+(!Ie.key||Ue&&Ue.key===Ie.key?"":(""+Ie.key).replace(M,"$&/")+"/")+O)),W.push(Ie)),1;if(Ue=0,Ae=Ae===""?".":Ae+":",ue(O))for(var Fe=0;Fe<O.length;Fe++){Oe=O[Fe];var $e=Ae+R(Oe,Fe);Ue+=Ge(Oe,W,he,$e,Ie)}else if($e=I(O),typeof $e=="function")for(O=$e.call(O),Fe=0;!(Oe=O.next()).done;)Oe=Oe.value,$e=Ae+R(Oe,Fe++),Ue+=Ge(Oe,W,he,$e,Ie);else if(Oe==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Ue}function it(O,W,he){if(O==null)return O;var Ae=[],Ie=0;return Ge(O,Ae,"","",function(Oe){return W.call(he,Oe,Ie++)}),Ae}function nt(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(he){(O._status===0||O._status===-1)&&(O._status=1,O._result=he)},function(he){(O._status===0||O._status===-1)&&(O._status=2,O._result=he)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var ke={current:null},H={transition:null},te={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:H,ReactCurrentOwner:we};function G(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:it,forEach:function(O,W,he){it(O,function(){W.apply(this,arguments)},he)},count:function(O){var W=0;return it(O,function(){W++}),W},toArray:function(O){return it(O,function(W){return W})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Pe.Component=L,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=se,Pe.StrictMode=i,Pe.Suspense=m,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Pe.act=G,Pe.cloneElement=function(O,W,he){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ae=j({},O.props),Ie=O.key,Oe=O.ref,Ue=O._owner;if(W!=null){if(W.ref!==void 0&&(Oe=W.ref,Ue=we.current),W.key!==void 0&&(Ie=""+W.key),O.type&&O.type.defaultProps)var Fe=O.type.defaultProps;for($e in W)Re.call(W,$e)&&!x.hasOwnProperty($e)&&(Ae[$e]=W[$e]===void 0&&Fe!==void 0?Fe[$e]:W[$e])}var $e=arguments.length-2;if($e===1)Ae.children=he;else if(1<$e){Fe=Array($e);for(var Tt=0;Tt<$e;Tt++)Fe[Tt]=arguments[Tt+2];Ae.children=Fe}return{$$typeof:n,type:O.type,key:Ie,ref:Oe,props:Ae,_owner:Ue}},Pe.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Pe.createElement=S,Pe.createFactory=function(O){var W=S.bind(null,O);return W.type=O,W},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(O){return{$$typeof:f,render:O}},Pe.isValidElement=N,Pe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:nt}},Pe.memo=function(O,W){return{$$typeof:y,type:O,compare:W===void 0?null:W}},Pe.startTransition=function(O){var W=H.transition;H.transition={};try{O()}finally{H.transition=W}},Pe.unstable_act=G,Pe.useCallback=function(O,W){return ke.current.useCallback(O,W)},Pe.useContext=function(O){return ke.current.useContext(O)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(O){return ke.current.useDeferredValue(O)},Pe.useEffect=function(O,W){return ke.current.useEffect(O,W)},Pe.useId=function(){return ke.current.useId()},Pe.useImperativeHandle=function(O,W,he){return ke.current.useImperativeHandle(O,W,he)},Pe.useInsertionEffect=function(O,W){return ke.current.useInsertionEffect(O,W)},Pe.useLayoutEffect=function(O,W){return ke.current.useLayoutEffect(O,W)},Pe.useMemo=function(O,W){return ke.current.useMemo(O,W)},Pe.useReducer=function(O,W,he){return ke.current.useReducer(O,W,he)},Pe.useRef=function(O){return ke.current.useRef(O)},Pe.useState=function(O){return ke.current.useState(O)},Pe.useSyncExternalStore=function(O,W,he){return ke.current.useSyncExternalStore(O,W,he)},Pe.useTransition=function(){return ke.current.useTransition()},Pe.version="18.3.1",Pe}var Yg;function zf(){return Yg||(Yg=1,$d.exports=aT()),$d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function lT(){if(Zg)return Ka;Zg=1;var n=zf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,m,y){var v,T={},I=null,b=null;y!==void 0&&(I=""+y),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(b=m.ref);for(v in m)i.call(m,v)&&!l.hasOwnProperty(v)&&(T[v]=m[v]);if(f&&f.defaultProps)for(v in m=f.defaultProps,m)T[v]===void 0&&(T[v]=m[v]);return{$$typeof:e,type:f,key:I,ref:b,props:T,_owner:o.current}}return Ka.Fragment=t,Ka.jsx=h,Ka.jsxs=h,Ka}var ey;function uT(){return ey||(ey=1,Bd.exports=lT()),Bd.exports}var k=uT(),Q=zf();const tv=ev(Q),cT=oT({__proto__:null,default:tv},[Q]);var Ku={},qd={exports:{}},en={},Wd={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function hT(){return ty||(ty=1,(function(n){function e(H,te){var G=H.length;H.push(te);e:for(;0<G;){var O=G-1>>>1,W=H[O];if(0<o(W,te))H[O]=te,H[G]=W,G=O;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var te=H[0],G=H.pop();if(G!==te){H[0]=G;e:for(var O=0,W=H.length,he=W>>>1;O<he;){var Ae=2*(O+1)-1,Ie=H[Ae],Oe=Ae+1,Ue=H[Oe];if(0>o(Ie,G))Oe<W&&0>o(Ue,Ie)?(H[O]=Ue,H[Oe]=G,O=Oe):(H[O]=Ie,H[Ae]=G,O=Ae);else if(Oe<W&&0>o(Ue,G))H[O]=Ue,H[Oe]=G,O=Oe;else break e}}return te}function o(H,te){var G=H.sortIndex-te.sortIndex;return G!==0?G:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],y=[],v=1,T=null,I=3,b=!1,j=!1,B=!1,L=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(H){for(var te=t(y);te!==null;){if(te.callback===null)i(y);else if(te.startTime<=H)i(y),te.sortIndex=te.expirationTime,e(m,te);else break;te=t(y)}}function ue(H){if(B=!1,ee(H),!j)if(t(m)!==null)j=!0,nt(Re);else{var te=t(y);te!==null&&ke(ue,te.startTime-H)}}function Re(H,te){j=!1,B&&(B=!1,ie(S),S=-1),b=!0;var G=I;try{for(ee(te),T=t(m);T!==null&&(!(T.expirationTime>te)||H&&!V());){var O=T.callback;if(typeof O=="function"){T.callback=null,I=T.priorityLevel;var W=O(T.expirationTime<=te);te=n.unstable_now(),typeof W=="function"?T.callback=W:T===t(m)&&i(m),ee(te)}else i(m);T=t(m)}if(T!==null)var he=!0;else{var Ae=t(y);Ae!==null&&ke(ue,Ae.startTime-te),he=!1}return he}finally{T=null,I=G,b=!1}}var we=!1,x=null,S=-1,C=5,N=-1;function V(){return!(n.unstable_now()-N<C)}function M(){if(x!==null){var H=n.unstable_now();N=H;var te=!0;try{te=x(!0,H)}finally{te?R():(we=!1,x=null)}}else we=!1}var R;if(typeof se=="function")R=function(){se(M)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,it=Ge.port2;Ge.port1.onmessage=M,R=function(){it.postMessage(null)}}else R=function(){L(M,0)};function nt(H){x=H,we||(we=!0,R())}function ke(H,te){S=L(function(){H(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){j||b||(j=!0,nt(Re))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(H){switch(I){case 1:case 2:case 3:var te=3;break;default:te=I}var G=I;I=te;try{return H()}finally{I=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var G=I;I=H;try{return te()}finally{I=G}},n.unstable_scheduleCallback=function(H,te,G){var O=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?O+G:O):G=O,H){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,H={id:v++,callback:te,priorityLevel:H,startTime:G,expirationTime:W,sortIndex:-1},G>O?(H.sortIndex=G,e(y,H),t(m)===null&&H===t(y)&&(B?(ie(S),S=-1):B=!0,ke(ue,G-O))):(H.sortIndex=W,e(m,H),j||b||(j=!0,nt(Re))),H},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(H){var te=I;return function(){var G=I;I=te;try{return H.apply(this,arguments)}finally{I=G}}}})(Hd)),Hd}var ny;function dT(){return ny||(ny=1,Wd.exports=hT()),Wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function fT(){if(ry)return en;ry=1;var n=zf(),e=dT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function I(r){return m.call(T,r)?!0:m.call(v,r)?!1:y.test(r)?T[r]=!0:(v[r]=!0,!1)}function b(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,s,a,c){if(s===null||typeof s>"u"||b(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(r,s,a,c,d,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new B(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];L[s]=new B(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new B(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new B(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new B(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new B(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new B(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new B(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new B(r,5,!1,r.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function se(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ie,se);L[s]=new B(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ie,se);L[s]=new B(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ie,se);L[s]=new B(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new B(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new B(r,1,!1,r.toLowerCase(),null,!0,!0)});function ee(r,s,a,c){var d=L.hasOwnProperty(s)?L[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,a,d,c)&&(a=null),c||d===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ue=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),we=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),H=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var G=Object.assign,O;function W(r){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+r}var he=!1;function Ae(r,s){if(!r||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){c=$}r.call(s.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=c.stack.split(`
`),E=d.length-1,A=g.length-1;1<=E&&0<=A&&d[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(d[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||d[E]!==g[A]){var P=`
`+d[E].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=E&&0<=A);break}}}finally{he=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?W(r):""}function Ie(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=Ae(r.type,!1),r;case 11:return r=Ae(r.type.render,!1),r;case 1:return r=Ae(r.type,!0),r;default:return""}}function Oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case we:return"Portal";case C:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case it:return s=r.displayName||null,s!==null?s:Oe(r.type)||"Memo";case nt:s=r._payload,r=r._init;try{return Oe(r(s))}catch{}}return null}function Ue(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $e(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tt(r){var s=$e(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Er(r){r._valueTracker||(r._valueTracker=Tt(r))}function Os(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=$e(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Gr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Wi(r,s){var a=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Vs(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ea(r,s){s=s.checked,s!=null&&ee(r,"checked",s,!1)}function ta(r,s){ea(r,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?bs(r,s.type,a):s.hasOwnProperty("defaultValue")&&bs(r,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ol(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function bs(r,s,a){(s!=="number"||Gr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var wr=Array.isArray;function Tr(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function na(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ls(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(wr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Fe(a)}}function Ms(r,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function ra(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?gt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ir,ia=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ir.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Kr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gi=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(r){Gi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Hi[s]=Hi[r]})});function sa(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Hi.hasOwnProperty(r)&&Hi[r]?(""+s).trim():s+"px"}function oa(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=sa(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var aa=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function la(r,s){if(s){if(aa[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ua(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Us(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Fs=null,gn=null,Xn=null;function js(r){if(r=Oa(r)){if(typeof Fs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=uu(s),Fs(r.stateNode,r.type,s))}}function Jn(r){gn?Xn?Xn.push(r):Xn=[r]:gn=r}function ca(){if(gn){var r=gn,s=Xn;if(Xn=gn=null,js(r),s)for(r=0;r<s.length;r++)js(s[r])}}function Qi(r,s){return r(s)}function ha(){}var Sr=!1;function da(r,s,a){if(Sr)return r(s,a);Sr=!0;try{return Qi(r,s,a)}finally{Sr=!1,(gn!==null||Xn!==null)&&(ha(),ca())}}function st(r,s){var a=r.stateNode;if(a===null)return null;var c=uu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var zs=!1;if(f)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){zs=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{zs=!1}function Xi(r,s,a,c,d,g,E,A,P){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Y){this.onError(Y)}}var Ji=!1,Bs=null,Nn=!1,fa=null,gh={onError:function(r){Ji=!0,Bs=r}};function $s(r,s,a,c,d,g,E,A,P){Ji=!1,Bs=null,Xi.apply(gh,arguments)}function Vl(r,s,a,c,d,g,E,A,P){if($s.apply(this,arguments),Ji){if(Ji){var $=Bs;Ji=!1,Bs=null}else throw Error(t(198));Nn||(Nn=!0,fa=$)}}function xn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Yi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Dn(r){if(xn(r)!==r)throw Error(t(188))}function bl(r){var s=r.alternate;if(!s){if(s=xn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Dn(d),r;if(g===c)return Dn(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var E=!1,A=d.child;A;){if(A===a){E=!0,a=d,c=g;break}if(A===c){E=!0,c=d,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,c=d;break}if(A===c){E=!0,c=g,a=d;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function pa(r){return r=bl(r),r!==null?qs(r):null}function qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=qs(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,ma=e.unstable_cancelCallback,Ll=e.unstable_shouldYield,yh=e.unstable_requestPaint,qe=e.unstable_now,Ml=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,yn=e.unstable_NormalPriority,ga=e.unstable_LowPriority,Ul=e.unstable_IdlePriority,es=null,an=null;function Fl(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(es,r,void 0,(r.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:zl,ya=Math.log,jl=Math.LN2;function zl(r){return r>>>=0,r===0?32:31-(ya(r)/jl|0)|0}var Hs=64,Gs=4194304;function Xr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ts(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var A=E&~d;A!==0?c=Xr(A):(g&=E,g!==0&&(c=Xr(g)))}else E=a&~d,E!==0?c=Xr(E):g!==0&&(c=Xr(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-$t(s),d=1<<a,c|=r[a],s&=~d;return c}function _h(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ar(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-$t(g),A=1<<E,P=d[E];P===-1?((A&a)===0||(A&c)!==0)&&(d[E]=_h(A,s)):P<=s&&(r.expiredLanes|=A),g&=~A}}function ln(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ns(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function Jr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Yr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-$t(s),r[s]=a}function Be(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-$t(a),g=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~g}}function Zr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-$t(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var De=0;function ei(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Bl,Ks,$l,ql,Wl,_a=!1,Yn=[],Pt=null,On=null,Vn=null,ti=new Map,_n=new Map,Zn=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hl(r,s){switch(r){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":ti.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Gt(r,s,a,c,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Oa(s),s!==null&&Ks(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Eh(r,s,a,c,d){switch(s){case"focusin":return Pt=Gt(Pt,r,s,a,c,d),!0;case"dragenter":return On=Gt(On,r,s,a,c,d),!0;case"mouseover":return Vn=Gt(Vn,r,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return ti.set(g,Gt(ti.get(g)||null,r,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,_n.set(g,Gt(_n.get(g)||null,r,s,a,c,d)),!0}return!1}function Gl(r){var s=as(r.target);if(s!==null){var a=xn(s);if(a!==null){if(s=a.tag,s===13){if(s=Yi(a),s!==null){r.blockedOn=s,Wl(r.priority,function(){$l(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Ki=c,a.target.dispatchEvent(c),Ki=null}else return s=Oa(a),s!==null&&Ks(s),r.blockedOn=a,!1;s.shift()}return!0}function rs(r,s,a){Rr(r)&&a.delete(s)}function Kl(){_a=!1,Pt!==null&&Rr(Pt)&&(Pt=null),On!==null&&Rr(On)&&(On=null),Vn!==null&&Rr(Vn)&&(Vn=null),ti.forEach(rs),_n.forEach(rs)}function bn(r,s){r.blockedOn===s&&(r.blockedOn=null,_a||(_a=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kl)))}function Ln(r){function s(d){return bn(d,r)}if(0<Yn.length){bn(Yn[0],r);for(var a=1;a<Yn.length;a++){var c=Yn[a];c.blockedOn===r&&(c.blockedOn=null)}}for(Pt!==null&&bn(Pt,r),On!==null&&bn(On,r),Vn!==null&&bn(Vn,r),ti.forEach(s),_n.forEach(s),a=0;a<Zn.length;a++)c=Zn[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<Zn.length&&(a=Zn[0],a.blockedOn===null);)Gl(a),a.blockedOn===null&&Zn.shift()}var Cr=ue.ReactCurrentBatchConfig,ni=!0;function Je(r,s,a,c){var d=De,g=Cr.transition;Cr.transition=null;try{De=1,va(r,s,a,c)}finally{De=d,Cr.transition=g}}function wh(r,s,a,c){var d=De,g=Cr.transition;Cr.transition=null;try{De=4,va(r,s,a,c)}finally{De=d,Cr.transition=g}}function va(r,s,a,c){if(ni){var d=Qs(r,s,a,c);if(d===null)Dh(r,s,c,is,a),Hl(r,c);else if(Eh(d,r,s,a,c))c.stopPropagation();else if(Hl(r,c),s&4&&-1<vh.indexOf(r)){for(;d!==null;){var g=Oa(d);if(g!==null&&Bl(g),g=Qs(r,s,a,c),g===null&&Dh(r,s,c,is,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Dh(r,s,c,null,a)}}var is=null;function Qs(r,s,a,c){if(is=null,r=Us(c),r=as(r),r!==null)if(s=xn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Yi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return is=r,null}function Ea(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ml()){case Zi:return 1;case Qr:return 4;case yn:case ga:return 16;case Ul:return 536870912;default:return 16}default:return 16}}var un=null,Xs=null,Kt=null;function wa(){if(Kt)return Kt;var r,s=Xs,a=s.length,c,d="value"in un?un.value:un.textContent,g=d.length;for(r=0;r<a&&s[r]===d[r];r++);var E=a-r;for(c=1;c<=E&&s[a-c]===d[g-c];c++);return Kt=d.slice(r,1<c?1-c:void 0)}function Js(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function er(){return!0}function Ta(){return!1}function kt(r){function s(a,c,d,g,E){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?er:Ta,this.isPropagationStopped=Ta,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),s}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=kt(Mn),tr=G({},Mn,{view:0,detail:0}),Th=kt(tr),Zs,Pr,ri,ss=G({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(Zs=r.screenX-ri.screenX,Pr=r.screenY-ri.screenY):Pr=Zs=0,ri=r),Zs)},movementY:function(r){return"movementY"in r?r.movementY:Pr}}),eo=kt(ss),Ia=G({},ss,{dataTransfer:0}),Ql=kt(Ia),to=G({},tr,{relatedTarget:0}),no=kt(to),Xl=G({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),kr=kt(Xl),Jl=G({},Mn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Yl=kt(Jl),Zl=G({},Mn,{data:0}),Sa=kt(Zl),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=eu[r])?!!s[r]:!1}function nr(){return tu}var u=G({},tr,{key:function(r){if(r.key){var s=ro[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Js(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nr,charCode:function(r){return r.type==="keypress"?Js(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Js(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),p=kt(u),_=G({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=kt(_),U=G({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nr}),q=kt(U),re=G({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=kt(re),_t=G({},ss,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=kt(_t),It=[9,13,27,32],ht=f&&"CompositionEvent"in window,vn=null;f&&"documentMode"in document&&(vn=document.documentMode);var cn=f&&"TextEvent"in window&&!vn,os=f&&(!ht||vn&&8<vn&&11>=vn),io=" ",Wp=!1;function Hp(r,s){switch(r){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function r0(r,s){switch(r){case"compositionend":return Gp(s);case"keypress":return s.which!==32?null:(Wp=!0,io);case"textInput":return r=s.data,r===io&&Wp?null:r;default:return null}}function i0(r,s){if(so)return r==="compositionend"||!ht&&Hp(r,s)?(r=wa(),Kt=Xs=un=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return os&&s.locale!=="ko"?null:s.data;default:return null}}var s0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!s0[r.type]:s==="textarea"}function Qp(r,s,a,c){Jn(c),s=ou(s,"onChange"),0<s.length&&(a=new Ys("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Aa=null,Ra=null;function o0(r){fm(r,0)}function nu(r){var s=co(r);if(Os(s))return r}function a0(r,s){if(r==="change")return s}var Xp=!1;if(f){var Ih;if(f){var Sh="oninput"in document;if(!Sh){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),Sh=typeof Jp.oninput=="function"}Ih=Sh}else Ih=!1;Xp=Ih&&(!document.documentMode||9<document.documentMode)}function Yp(){Aa&&(Aa.detachEvent("onpropertychange",Zp),Ra=Aa=null)}function Zp(r){if(r.propertyName==="value"&&nu(Ra)){var s=[];Qp(s,Ra,r,Us(r)),da(o0,s)}}function l0(r,s,a){r==="focusin"?(Yp(),Aa=s,Ra=a,Aa.attachEvent("onpropertychange",Zp)):r==="focusout"&&Yp()}function u0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return nu(Ra)}function c0(r,s){if(r==="click")return nu(s)}function h0(r,s){if(r==="input"||r==="change")return nu(s)}function d0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:d0;function Ca(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!m.call(s,d)||!Un(r[d],s[d]))return!1}return!0}function em(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function tm(r,s){var a=em(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=em(a)}}function nm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?nm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function rm(){for(var r=window,s=Gr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Gr(r.document)}return s}function Ah(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function f0(r){var s=rm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&nm(a.ownerDocument.documentElement,a)){if(c!==null&&Ah(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!r.extend&&g>c&&(d=c,c=g,g=d),d=tm(a,g);var E=tm(a,c);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),g>c?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var p0=f&&"documentMode"in document&&11>=document.documentMode,oo=null,Rh=null,Pa=null,Ch=!1;function im(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||oo==null||oo!==Gr(c)||(c=oo,"selectionStart"in c&&Ah(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&Ca(Pa,c)||(Pa=c,c=ou(Rh,"onSelect"),0<c.length&&(s=new Ys("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=oo)))}function ru(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var ao={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Ph={},sm={};f&&(sm=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function iu(r){if(Ph[r])return Ph[r];if(!ao[r])return r;var s=ao[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in sm)return Ph[r]=s[a];return r}var om=iu("animationend"),am=iu("animationiteration"),lm=iu("animationstart"),um=iu("transitionend"),cm=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(r,s){cm.set(r,s),l(s,[r])}for(var kh=0;kh<hm.length;kh++){var Nh=hm[kh],m0=Nh.toLowerCase(),g0=Nh[0].toUpperCase()+Nh.slice(1);ii(m0,"on"+g0)}ii(om,"onAnimationEnd"),ii(am,"onAnimationIteration"),ii(lm,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(um,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function dm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,Vl(c,s,void 0,r),r.currentTarget=null}function fm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var E=c.length-1;0<=E;E--){var A=c[E],P=A.instance,$=A.currentTarget;if(A=A.listener,P!==g&&d.isPropagationStopped())break e;dm(d,A,$),g=P}else for(E=0;E<c.length;E++){if(A=c[E],P=A.instance,$=A.currentTarget,A=A.listener,P!==g&&d.isPropagationStopped())break e;dm(d,A,$),g=P}}}if(Nn)throw r=fa,Nn=!1,fa=null,r}function Ke(r,s){var a=s[Uh];a===void 0&&(a=s[Uh]=new Set);var c=r+"__bubble";a.has(c)||(pm(s,r,2,!1),a.add(c))}function xh(r,s,a){var c=0;s&&(c|=4),pm(a,r,c,s)}var su="_reactListening"+Math.random().toString(36).slice(2);function Na(r){if(!r[su]){r[su]=!0,i.forEach(function(a){a!=="selectionchange"&&(y0.has(a)||xh(a,!1,r),xh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[su]||(s[su]=!0,xh("selectionchange",!1,s))}}function pm(r,s,a,c){switch(Ea(s)){case 1:var d=Je;break;case 4:d=wh;break;default:d=va}a=d.bind(null,s,a,r),d=void 0,!zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function Dh(r,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var P=E.tag;if((P===3||P===4)&&(P=E.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;E=E.return}for(;A!==null;){if(E=as(A),E===null)return;if(P=E.tag,P===5||P===6){c=g=E;continue e}A=A.parentNode}}c=c.return}da(function(){var $=g,Y=Us(a),Z=[];e:{var J=cm.get(r);if(J!==void 0){var ae=Ys,de=r;switch(r){case"keypress":if(Js(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":de="focus",ae=no;break;case"focusout":de="blur",ae=no;break;case"beforeblur":case"afterblur":ae=no;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=q;break;case om:case am:case lm:ae=kr;break;case um:ae=ze;break;case"scroll":ae=Th;break;case"wheel":ae=Ve;break;case"copy":case"cut":case"paste":ae=Yl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=w}var fe=(s&4)!==0,ot=!fe&&r==="scroll",F=fe?J!==null?J+"Capture":null:J;fe=[];for(var D=$,z;D!==null;){z=D;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,F!==null&&(ne=st(D,F),ne!=null&&fe.push(xa(D,ne,z)))),ot)break;D=D.return}0<fe.length&&(J=new ae(J,de,null,a,Y),Z.push({event:J,listeners:fe}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",J&&a!==Ki&&(de=a.relatedTarget||a.fromElement)&&(as(de)||de[Nr]))break e;if((ae||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=$,de=de?as(de):null,de!==null&&(ot=xn(de),de!==ot||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=$),ae!==de)){if(fe=eo,ne="onMouseLeave",F="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(fe=w,ne="onPointerLeave",F="onPointerEnter",D="pointer"),ot=ae==null?J:co(ae),z=de==null?J:co(de),J=new fe(ne,D+"leave",ae,a,Y),J.target=ot,J.relatedTarget=z,ne=null,as(Y)===$&&(fe=new fe(F,D+"enter",de,a,Y),fe.target=z,fe.relatedTarget=ot,ne=fe),ot=ne,ae&&de)t:{for(fe=ae,F=de,D=0,z=fe;z;z=lo(z))D++;for(z=0,ne=F;ne;ne=lo(ne))z++;for(;0<D-z;)fe=lo(fe),D--;for(;0<z-D;)F=lo(F),z--;for(;D--;){if(fe===F||F!==null&&fe===F.alternate)break t;fe=lo(fe),F=lo(F)}fe=null}else fe=null;ae!==null&&mm(Z,J,ae,fe,!1),de!==null&&ot!==null&&mm(Z,ot,de,fe,!0)}}e:{if(J=$?co($):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var pe=a0;else if(Kp(J))if(Xp)pe=h0;else{pe=u0;var ge=l0}else(ae=J.nodeName)&&ae.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(pe=c0);if(pe&&(pe=pe(r,$))){Qp(Z,pe,a,Y);break e}ge&&ge(r,J,$),r==="focusout"&&(ge=J._wrapperState)&&ge.controlled&&J.type==="number"&&bs(J,"number",J.value)}switch(ge=$?co($):window,r){case"focusin":(Kp(ge)||ge.contentEditable==="true")&&(oo=ge,Rh=$,Pa=null);break;case"focusout":Pa=Rh=oo=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,im(Z,a,Y);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":im(Z,a,Y)}var ye;if(ht)e:{switch(r){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else so?Hp(r,a)&&(ve="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(os&&a.locale!=="ko"&&(so||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&so&&(ye=wa()):(un=Y,Xs="value"in un?un.value:un.textContent,so=!0)),ge=ou($,ve),0<ge.length&&(ve=new Sa(ve,r,null,a,Y),Z.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=Gp(a),ye!==null&&(ve.data=ye)))),(ye=cn?r0(r,a):i0(r,a))&&($=ou($,"onBeforeInput"),0<$.length&&(Y=new Sa("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:$}),Y.data=ye))}fm(Z,s)})}function xa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function ou(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=st(r,a),g!=null&&c.unshift(xa(r,g,d)),g=st(r,s),g!=null&&c.push(xa(r,g,d))),r=r.return}return c}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function mm(r,s,a,c,d){for(var g=s._reactName,E=[];a!==null&&a!==c;){var A=a,P=A.alternate,$=A.stateNode;if(P!==null&&P===c)break;A.tag===5&&$!==null&&(A=$,d?(P=st(a,g),P!=null&&E.unshift(xa(a,P,A))):d||(P=st(a,g),P!=null&&E.push(xa(a,P,A)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var _0=/\r\n?/g,v0=/\u0000|\uFFFD/g;function gm(r){return(typeof r=="string"?r:""+r).replace(_0,`
`).replace(v0,"")}function au(r,s,a){if(s=gm(s),gm(r)!==s&&a)throw Error(t(425))}function lu(){}var Oh=null,Vh=null;function bh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lh=typeof setTimeout=="function"?setTimeout:void 0,E0=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(r){return ym.resolve(null).then(r).catch(T0)}:Lh;function T0(r){setTimeout(function(){throw r})}function Mh(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),Ln(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Ln(s)}function si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function _m(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var uo=Math.random().toString(36).slice(2),rr="__reactFiber$"+uo,Da="__reactProps$"+uo,Nr="__reactContainer$"+uo,Uh="__reactEvents$"+uo,I0="__reactListeners$"+uo,S0="__reactHandles$"+uo;function as(r){var s=r[rr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Nr]||a[rr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=_m(r);r!==null;){if(a=r[rr])return a;r=_m(r)}return s}r=a,a=r.parentNode}return null}function Oa(r){return r=r[rr]||r[Nr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function uu(r){return r[Da]||null}var Fh=[],ho=-1;function oi(r){return{current:r}}function Qe(r){0>ho||(r.current=Fh[ho],Fh[ho]=null,ho--)}function We(r,s){ho++,Fh[ho]=r.current,r.current=s}var ai={},bt=oi(ai),Qt=oi(!1),ls=ai;function fo(r,s){var a=r.type.contextTypes;if(!a)return ai;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(r){return r=r.childContextTypes,r!=null}function cu(){Qe(Qt),Qe(bt)}function vm(r,s,a){if(bt.current!==ai)throw Error(t(168));We(bt,s),We(Qt,a)}function Em(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Ue(r)||"Unknown",d));return G({},a,c)}function hu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ai,ls=bt.current,We(bt,r),We(Qt,Qt.current),!0}function wm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Em(r,s,ls),c.__reactInternalMemoizedMergedChildContext=r,Qe(Qt),Qe(bt),We(bt,r)):Qe(Qt),We(Qt,a)}var xr=null,du=!1,jh=!1;function Tm(r){xr===null?xr=[r]:xr.push(r)}function A0(r){du=!0,Tm(r)}function li(){if(!jh&&xr!==null){jh=!0;var r=0,s=De;try{var a=xr;for(De=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}xr=null,du=!1}catch(d){throw xr!==null&&(xr=xr.slice(r+1)),Ws(Zi,li),d}finally{De=s,jh=!1}}return null}var po=[],mo=0,fu=null,pu=0,En=[],wn=0,us=null,Dr=1,Or="";function cs(r,s){po[mo++]=pu,po[mo++]=fu,fu=r,pu=s}function Im(r,s,a){En[wn++]=Dr,En[wn++]=Or,En[wn++]=us,us=r;var c=Dr;r=Or;var d=32-$t(c)-1;c&=~(1<<d),a+=1;var g=32-$t(s)+d;if(30<g){var E=d-d%5;g=(c&(1<<E)-1).toString(32),c>>=E,d-=E,Dr=1<<32-$t(s)+d|a<<d|c,Or=g+r}else Dr=1<<g|a<<d|c,Or=r}function zh(r){r.return!==null&&(cs(r,1),Im(r,1,0))}function Bh(r){for(;r===fu;)fu=po[--mo],po[mo]=null,pu=po[--mo],po[mo]=null;for(;r===us;)us=En[--wn],En[wn]=null,Or=En[--wn],En[wn]=null,Dr=En[--wn],En[wn]=null}var hn=null,dn=null,Ye=!1,Fn=null;function Sm(r,s){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Am(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,hn=r,dn=si(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,hn=r,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=us!==null?{id:Dr,overflow:Or}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,hn=r,dn=null,!0):!1;default:return!1}}function $h(r){return(r.mode&1)!==0&&(r.flags&128)===0}function qh(r){if(Ye){var s=dn;if(s){var a=s;if(!Am(r,s)){if($h(r))throw Error(t(418));s=si(a.nextSibling);var c=hn;s&&Am(r,s)?Sm(c,a):(r.flags=r.flags&-4097|2,Ye=!1,hn=r)}}else{if($h(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ye=!1,hn=r}}}function Rm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hn=r}function mu(r){if(r!==hn)return!1;if(!Ye)return Rm(r),Ye=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!bh(r.type,r.memoizedProps)),s&&(s=dn)){if($h(r))throw Cm(),Error(t(418));for(;s;)Sm(r,s),s=si(s.nextSibling)}if(Rm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){dn=si(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}dn=null}}else dn=hn?si(r.stateNode.nextSibling):null;return!0}function Cm(){for(var r=dn;r;)r=si(r.nextSibling)}function go(){dn=hn=null,Ye=!1}function Wh(r){Fn===null?Fn=[r]:Fn.push(r)}var R0=ue.ReactCurrentBatchConfig;function Va(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var A=d.refs;E===null?delete A[g]:A[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function gu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Pm(r){var s=r._init;return s(r._payload)}function km(r){function s(F,D){if(r){var z=F.deletions;z===null?(F.deletions=[D],F.flags|=16):z.push(D)}}function a(F,D){if(!r)return null;for(;D!==null;)s(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=gi(F,D),F.index=0,F.sibling=null,F}function g(F,D,z){return F.index=z,r?(z=F.alternate,z!==null?(z=z.index,z<D?(F.flags|=2,D):z):(F.flags|=2,D)):(F.flags|=1048576,D)}function E(F){return r&&F.alternate===null&&(F.flags|=2),F}function A(F,D,z,ne){return D===null||D.tag!==6?(D=Ld(z,F.mode,ne),D.return=F,D):(D=d(D,z),D.return=F,D)}function P(F,D,z,ne){var pe=z.type;return pe===x?Y(F,D,z.props.children,ne,z.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===nt&&Pm(pe)===D.type)?(ne=d(D,z.props),ne.ref=Va(F,D,z),ne.return=F,ne):(ne=ju(z.type,z.key,z.props,null,F.mode,ne),ne.ref=Va(F,D,z),ne.return=F,ne)}function $(F,D,z,ne){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Md(z,F.mode,ne),D.return=F,D):(D=d(D,z.children||[]),D.return=F,D)}function Y(F,D,z,ne,pe){return D===null||D.tag!==7?(D=_s(z,F.mode,ne,pe),D.return=F,D):(D=d(D,z),D.return=F,D)}function Z(F,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Ld(""+D,F.mode,z),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Re:return z=ju(D.type,D.key,D.props,null,F.mode,z),z.ref=Va(F,null,D),z.return=F,z;case we:return D=Md(D,F.mode,z),D.return=F,D;case nt:var ne=D._init;return Z(F,ne(D._payload),z)}if(wr(D)||te(D))return D=_s(D,F.mode,z,null),D.return=F,D;gu(F,D)}return null}function J(F,D,z,ne){var pe=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:A(F,D,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:return z.key===pe?P(F,D,z,ne):null;case we:return z.key===pe?$(F,D,z,ne):null;case nt:return pe=z._init,J(F,D,pe(z._payload),ne)}if(wr(z)||te(z))return pe!==null?null:Y(F,D,z,ne,null);gu(F,z)}return null}function ae(F,D,z,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(z)||null,A(D,F,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Re:return F=F.get(ne.key===null?z:ne.key)||null,P(D,F,ne,pe);case we:return F=F.get(ne.key===null?z:ne.key)||null,$(D,F,ne,pe);case nt:var ge=ne._init;return ae(F,D,z,ge(ne._payload),pe)}if(wr(ne)||te(ne))return F=F.get(z)||null,Y(D,F,ne,pe,null);gu(D,ne)}return null}function de(F,D,z,ne){for(var pe=null,ge=null,ye=D,ve=D=0,Rt=null;ye!==null&&ve<z.length;ve++){ye.index>ve?(Rt=ye,ye=null):Rt=ye.sibling;var Me=J(F,ye,z[ve],ne);if(Me===null){ye===null&&(ye=Rt);break}r&&ye&&Me.alternate===null&&s(F,ye),D=g(Me,D,ve),ge===null?pe=Me:ge.sibling=Me,ge=Me,ye=Rt}if(ve===z.length)return a(F,ye),Ye&&cs(F,ve),pe;if(ye===null){for(;ve<z.length;ve++)ye=Z(F,z[ve],ne),ye!==null&&(D=g(ye,D,ve),ge===null?pe=ye:ge.sibling=ye,ge=ye);return Ye&&cs(F,ve),pe}for(ye=c(F,ye);ve<z.length;ve++)Rt=ae(ye,F,ve,z[ve],ne),Rt!==null&&(r&&Rt.alternate!==null&&ye.delete(Rt.key===null?ve:Rt.key),D=g(Rt,D,ve),ge===null?pe=Rt:ge.sibling=Rt,ge=Rt);return r&&ye.forEach(function(yi){return s(F,yi)}),Ye&&cs(F,ve),pe}function fe(F,D,z,ne){var pe=te(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var ge=pe=null,ye=D,ve=D=0,Rt=null,Me=z.next();ye!==null&&!Me.done;ve++,Me=z.next()){ye.index>ve?(Rt=ye,ye=null):Rt=ye.sibling;var yi=J(F,ye,Me.value,ne);if(yi===null){ye===null&&(ye=Rt);break}r&&ye&&yi.alternate===null&&s(F,ye),D=g(yi,D,ve),ge===null?pe=yi:ge.sibling=yi,ge=yi,ye=Rt}if(Me.done)return a(F,ye),Ye&&cs(F,ve),pe;if(ye===null){for(;!Me.done;ve++,Me=z.next())Me=Z(F,Me.value,ne),Me!==null&&(D=g(Me,D,ve),ge===null?pe=Me:ge.sibling=Me,ge=Me);return Ye&&cs(F,ve),pe}for(ye=c(F,ye);!Me.done;ve++,Me=z.next())Me=ae(ye,F,ve,Me.value,ne),Me!==null&&(r&&Me.alternate!==null&&ye.delete(Me.key===null?ve:Me.key),D=g(Me,D,ve),ge===null?pe=Me:ge.sibling=Me,ge=Me);return r&&ye.forEach(function(sT){return s(F,sT)}),Ye&&cs(F,ve),pe}function ot(F,D,z,ne){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:e:{for(var pe=z.key,ge=D;ge!==null;){if(ge.key===pe){if(pe=z.type,pe===x){if(ge.tag===7){a(F,ge.sibling),D=d(ge,z.props.children),D.return=F,F=D;break e}}else if(ge.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===nt&&Pm(pe)===ge.type){a(F,ge.sibling),D=d(ge,z.props),D.ref=Va(F,ge,z),D.return=F,F=D;break e}a(F,ge);break}else s(F,ge);ge=ge.sibling}z.type===x?(D=_s(z.props.children,F.mode,ne,z.key),D.return=F,F=D):(ne=ju(z.type,z.key,z.props,null,F.mode,ne),ne.ref=Va(F,D,z),ne.return=F,F=ne)}return E(F);case we:e:{for(ge=z.key;D!==null;){if(D.key===ge)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(F,D.sibling),D=d(D,z.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else s(F,D);D=D.sibling}D=Md(z,F.mode,ne),D.return=F,F=D}return E(F);case nt:return ge=z._init,ot(F,D,ge(z._payload),ne)}if(wr(z))return de(F,D,z,ne);if(te(z))return fe(F,D,z,ne);gu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,z),D.return=F,F=D):(a(F,D),D=Ld(z,F.mode,ne),D.return=F,F=D),E(F)):a(F,D)}return ot}var yo=km(!0),Nm=km(!1),yu=oi(null),_u=null,_o=null,Hh=null;function Gh(){Hh=_o=_u=null}function Kh(r){var s=yu.current;Qe(yu),r._currentValue=s}function Qh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function vo(r,s){_u=r,Hh=_o=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Jt=!0),r.firstContext=null)}function Tn(r){var s=r._currentValue;if(Hh!==r)if(r={context:r,memoizedValue:s,next:null},_o===null){if(_u===null)throw Error(t(308));_o=r,_u.dependencies={lanes:0,firstContext:r}}else _o=_o.next=r;return s}var hs=null;function Xh(r){hs===null?hs=[r]:hs.push(r)}function xm(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Xh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Vr(r,c)}function Vr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ui=!1;function Jh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function br(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ci(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Vr(r,a)}return d=c.interleaved,d===null?(s.next=s,Xh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Vr(r,a)}function vu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Zr(r,a)}}function Om(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Eu(r,s,a,c){var d=r.updateQueue;ui=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var P=A,$=P.next;P.next=null,E===null?g=$:E.next=$,E=P;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==E&&(A===null?Y.firstBaseUpdate=$:A.next=$,Y.lastBaseUpdate=P))}if(g!==null){var Z=d.baseState;E=0,Y=$=P=null,A=g;do{var J=A.lane,ae=A.eventTime;if((c&J)===J){Y!==null&&(Y=Y.next={eventTime:ae,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=r,fe=A;switch(J=s,ae=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){Z=de.call(ae,Z,J);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,J=typeof de=="function"?de.call(ae,Z,J):de,J==null)break e;Z=G({},Z,J);break e;case 2:ui=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,J=d.effects,J===null?d.effects=[A]:J.push(A))}else ae={eventTime:ae,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?($=Y=ae,P=Z):Y=Y.next=ae,E|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;J=A,A=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(Y===null&&(P=Z),d.baseState=P,d.firstBaseUpdate=$,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ps|=E,r.lanes=E,r.memoizedState=Z}}function Vm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ba={},ir=oi(ba),La=oi(ba),Ma=oi(ba);function ds(r){if(r===ba)throw Error(t(174));return r}function Yh(r,s){switch(We(Ma,s),We(La,r),We(ir,ba),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=yt(s,r)}Qe(ir),We(ir,s)}function Eo(){Qe(ir),Qe(La),Qe(Ma)}function bm(r){ds(Ma.current);var s=ds(ir.current),a=yt(s,r.type);s!==a&&(We(La,r),We(ir,a))}function Zh(r){La.current===r&&(Qe(ir),Qe(La))}var Ze=oi(0);function wu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ed=[];function td(){for(var r=0;r<ed.length;r++)ed[r]._workInProgressVersionPrimary=null;ed.length=0}var Tu=ue.ReactCurrentDispatcher,nd=ue.ReactCurrentBatchConfig,fs=0,et=null,vt=null,St=null,Iu=!1,Ua=!1,Fa=0,C0=0;function Lt(){throw Error(t(321))}function rd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Un(r[a],s[a]))return!1;return!0}function id(r,s,a,c,d,g){if(fs=g,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tu.current=r===null||r.memoizedState===null?x0:D0,r=a(c,d),Ua){g=0;do{if(Ua=!1,Fa=0,25<=g)throw Error(t(301));g+=1,St=vt=null,s.updateQueue=null,Tu.current=O0,r=a(c,d)}while(Ua)}if(Tu.current=Ru,s=vt!==null&&vt.next!==null,fs=0,St=vt=et=null,Iu=!1,s)throw Error(t(300));return r}function sd(){var r=Fa!==0;return Fa=0,r}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?et.memoizedState=St=r:St=St.next=r,St}function In(){if(vt===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var s=St===null?et.memoizedState:St.next;if(s!==null)St=s,vt=r;else{if(r===null)throw Error(t(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?et.memoizedState=St=r:St=St.next=r}return St}function ja(r,s){return typeof s=="function"?s(r):s}function od(r){var s=In(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=vt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var A=E=null,P=null,$=g;do{var Y=$.lane;if((fs&Y)===Y)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var Z={lane:Y,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(A=P=Z,E=c):P=P.next=Z,et.lanes|=Y,ps|=Y}$=$.next}while($!==null&&$!==g);P===null?E=c:P.next=A,Un(c,s.memoizedState)||(Jt=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=P,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do g=d.lane,et.lanes|=g,ps|=g,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function ad(r){var s=In(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);Un(g,s.memoizedState)||(Jt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function Lm(){}function Mm(r,s){var a=et,c=In(),d=s(),g=!Un(c.memoizedState,d);if(g&&(c.memoizedState=d,Jt=!0),c=c.queue,ld(jm.bind(null,a,c,r),[r]),c.getSnapshot!==s||g||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,za(9,Fm.bind(null,a,c,d,s),void 0,null),At===null)throw Error(t(349));(fs&30)!==0||Um(a,s,d)}return d}function Um(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Fm(r,s,a,c){s.value=a,s.getSnapshot=c,zm(s)&&Bm(r)}function jm(r,s,a){return a(function(){zm(s)&&Bm(r)})}function zm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Un(r,a)}catch{return!0}}function Bm(r){var s=Vr(r,1);s!==null&&$n(s,r,1,-1)}function $m(r){var s=sr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:r},s.queue=r,r=r.dispatch=N0.bind(null,et,r),[s.memoizedState,r]}function za(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function qm(){return In().memoizedState}function Su(r,s,a,c){var d=sr();et.flags|=r,d.memoizedState=za(1|s,a,void 0,c===void 0?null:c)}function Au(r,s,a,c){var d=In();c=c===void 0?null:c;var g=void 0;if(vt!==null){var E=vt.memoizedState;if(g=E.destroy,c!==null&&rd(c,E.deps)){d.memoizedState=za(s,a,g,c);return}}et.flags|=r,d.memoizedState=za(1|s,a,g,c)}function Wm(r,s){return Su(8390656,8,r,s)}function ld(r,s){return Au(2048,8,r,s)}function Hm(r,s){return Au(4,2,r,s)}function Gm(r,s){return Au(4,4,r,s)}function Km(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Qm(r,s,a){return a=a!=null?a.concat([r]):null,Au(4,4,Km.bind(null,s,r),a)}function ud(){}function Xm(r,s){var a=In();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&rd(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function Jm(r,s){var a=In();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&rd(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function Ym(r,s,a){return(fs&21)===0?(r.baseState&&(r.baseState=!1,Jt=!0),r.memoizedState=a):(Un(a,s)||(a=ns(),et.lanes|=a,ps|=a,r.baseState=!0),s)}function P0(r,s){var a=De;De=a!==0&&4>a?a:4,r(!0);var c=nd.transition;nd.transition={};try{r(!1),s()}finally{De=a,nd.transition=c}}function Zm(){return In().memoizedState}function k0(r,s,a){var c=pi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},eg(r))tg(s,a);else if(a=xm(r,s,a,c),a!==null){var d=Ht();$n(a,r,c,d),ng(a,s,c)}}function N0(r,s,a){var c=pi(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(eg(r))tg(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,a);if(d.hasEagerState=!0,d.eagerState=A,Un(A,E)){var P=s.interleaved;P===null?(d.next=d,Xh(s)):(d.next=P.next,P.next=d),s.interleaved=d;return}}catch{}finally{}a=xm(r,s,d,c),a!==null&&(d=Ht(),$n(a,r,c,d),ng(a,s,c))}}function eg(r){var s=r.alternate;return r===et||s!==null&&s===et}function tg(r,s){Ua=Iu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function ng(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Zr(r,a)}}var Ru={readContext:Tn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},x0={readContext:Tn,useCallback:function(r,s){return sr().memoizedState=[r,s===void 0?null:s],r},useContext:Tn,useEffect:Wm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Su(4194308,4,Km.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Su(4194308,4,r,s)},useInsertionEffect:function(r,s){return Su(4,2,r,s)},useMemo:function(r,s){var a=sr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=sr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=k0.bind(null,et,r),[c.memoizedState,r]},useRef:function(r){var s=sr();return r={current:r},s.memoizedState=r},useState:$m,useDebugValue:ud,useDeferredValue:function(r){return sr().memoizedState=r},useTransition:function(){var r=$m(!1),s=r[0];return r=P0.bind(null,r[1]),sr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=et,d=sr();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),At===null)throw Error(t(349));(fs&30)!==0||Um(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Wm(jm.bind(null,c,g,r),[r]),c.flags|=2048,za(9,Fm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var r=sr(),s=At.identifierPrefix;if(Ye){var a=Or,c=Dr;a=(c&~(1<<32-$t(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Fa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=C0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},D0={readContext:Tn,useCallback:Xm,useContext:Tn,useEffect:ld,useImperativeHandle:Qm,useInsertionEffect:Hm,useLayoutEffect:Gm,useMemo:Jm,useReducer:od,useRef:qm,useState:function(){return od(ja)},useDebugValue:ud,useDeferredValue:function(r){var s=In();return Ym(s,vt.memoizedState,r)},useTransition:function(){var r=od(ja)[0],s=In().memoizedState;return[r,s]},useMutableSource:Lm,useSyncExternalStore:Mm,useId:Zm,unstable_isNewReconciler:!1},O0={readContext:Tn,useCallback:Xm,useContext:Tn,useEffect:ld,useImperativeHandle:Qm,useInsertionEffect:Hm,useLayoutEffect:Gm,useMemo:Jm,useReducer:ad,useRef:qm,useState:function(){return ad(ja)},useDebugValue:ud,useDeferredValue:function(r){var s=In();return vt===null?s.memoizedState=r:Ym(s,vt.memoizedState,r)},useTransition:function(){var r=ad(ja)[0],s=In().memoizedState;return[r,s]},useMutableSource:Lm,useSyncExternalStore:Mm,useId:Zm,unstable_isNewReconciler:!1};function jn(r,s){if(r&&r.defaultProps){s=G({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function cd(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:G({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Cu={isMounted:function(r){return(r=r._reactInternals)?xn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Ht(),d=pi(r),g=br(c,d);g.payload=s,a!=null&&(g.callback=a),s=ci(r,g,d),s!==null&&($n(s,r,d,c),vu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Ht(),d=pi(r),g=br(c,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ci(r,g,d),s!==null&&($n(s,r,d,c),vu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Ht(),c=pi(r),d=br(a,c);d.tag=2,s!=null&&(d.callback=s),s=ci(r,d,c),s!==null&&($n(s,r,c,a),vu(s,r,c))}};function rg(r,s,a,c,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,E):s.prototype&&s.prototype.isPureReactComponent?!Ca(a,c)||!Ca(d,g):!0}function ig(r,s,a){var c=!1,d=ai,g=s.contextType;return typeof g=="object"&&g!==null?g=Tn(g):(d=Xt(s)?ls:bt.current,c=s.contextTypes,g=(c=c!=null)?fo(r,d):ai),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function sg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Cu.enqueueReplaceState(s,s.state,null)}function hd(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Jh(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=Tn(g):(g=Xt(s)?ls:bt.current,d.context=fo(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(cd(r,s,g,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Cu.enqueueReplaceState(d,d.state,null),Eu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function wo(r,s){try{var a="",c=s;do a+=Ie(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function dd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function fd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var V0=typeof WeakMap=="function"?WeakMap:Map;function og(r,s,a){a=br(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Vu||(Vu=!0,Pd=c),fd(r,s)},a}function ag(r,s,a){a=br(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){fd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){fd(r,s),typeof c!="function"&&(di===null?di=new Set([this]):di.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function lg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new V0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=K0.bind(null,r,s,a),s.then(r,r))}function ug(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function cg(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=br(-1,1),s.tag=2,ci(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var b0=ue.ReactCurrentOwner,Jt=!1;function Wt(r,s,a,c){s.child=r===null?Nm(s,null,a,c):yo(s,r.child,a,c)}function hg(r,s,a,c,d){a=a.render;var g=s.ref;return vo(s,d),c=id(r,s,a,c,g,d),a=sd(),r!==null&&!Jt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Lr(r,s,d)):(Ye&&a&&zh(s),s.flags|=1,Wt(r,s,c,d),s.child)}function dg(r,s,a,c,d){if(r===null){var g=a.type;return typeof g=="function"&&!bd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,fg(r,s,g,c,d)):(r=ju(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&d)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ca,a(E,c)&&r.ref===s.ref)return Lr(r,s,d)}return s.flags|=1,r=gi(g,c),r.ref=s.ref,r.return=s,s.child=r}function fg(r,s,a,c,d){if(r!==null){var g=r.memoizedProps;if(Ca(g,c)&&r.ref===s.ref)if(Jt=!1,s.pendingProps=c=g,(r.lanes&d)!==0)(r.flags&131072)!==0&&(Jt=!0);else return s.lanes=r.lanes,Lr(r,s,d)}return pd(r,s,a,c,d)}function pg(r,s,a){var c=s.pendingProps,d=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Io,fn),fn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,We(Io,fn),fn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(Io,fn),fn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,We(Io,fn),fn|=c;return Wt(r,s,d,a),s.child}function mg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function pd(r,s,a,c,d){var g=Xt(a)?ls:bt.current;return g=fo(s,g),vo(s,d),a=id(r,s,a,c,g,d),c=sd(),r!==null&&!Jt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Lr(r,s,d)):(Ye&&c&&zh(s),s.flags|=1,Wt(r,s,a,d),s.child)}function gg(r,s,a,c,d){if(Xt(a)){var g=!0;hu(s)}else g=!1;if(vo(s,d),s.stateNode===null)ku(r,s),ig(s,a,c),hd(s,a,c,d),c=!0;else if(r===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var P=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=Tn($):($=Xt(a)?ls:bt.current,$=fo(s,$));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof E.getSnapshotBeforeUpdate=="function";Z||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||P!==$)&&sg(s,E,c,$),ui=!1;var J=s.memoizedState;E.state=J,Eu(s,c,E,d),P=s.memoizedState,A!==c||J!==P||Qt.current||ui?(typeof Y=="function"&&(cd(s,a,Y,c),P=s.memoizedState),(A=ui||rg(s,a,A,c,J,P,$))?(Z||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),E.props=c,E.state=P,E.context=$,c=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,Dm(r,s),A=s.memoizedProps,$=s.type===s.elementType?A:jn(s.type,A),E.props=$,Z=s.pendingProps,J=E.context,P=a.contextType,typeof P=="object"&&P!==null?P=Tn(P):(P=Xt(a)?ls:bt.current,P=fo(s,P));var ae=a.getDerivedStateFromProps;(Y=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==Z||J!==P)&&sg(s,E,c,P),ui=!1,J=s.memoizedState,E.state=J,Eu(s,c,E,d);var de=s.memoizedState;A!==Z||J!==de||Qt.current||ui?(typeof ae=="function"&&(cd(s,a,ae,c),de=s.memoizedState),($=ui||rg(s,a,$,c,J,de,P)||!1)?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,de,P),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,de,P)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),E.props=c,E.state=de,E.context=P,c=$):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),c=!1)}return md(r,s,a,c,g,d)}function md(r,s,a,c,d,g){mg(r,s);var E=(s.flags&128)!==0;if(!c&&!E)return d&&wm(s,a,!1),Lr(r,s,g);c=s.stateNode,b0.current=s;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&E?(s.child=yo(s,r.child,null,g),s.child=yo(s,null,A,g)):Wt(r,s,A,g),s.memoizedState=c.state,d&&wm(s,a,!0),s.child}function yg(r){var s=r.stateNode;s.pendingContext?vm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&vm(r,s.context,!1),Yh(r,s.containerInfo)}function _g(r,s,a,c,d){return go(),Wh(d),s.flags|=256,Wt(r,s,a,c),s.child}var gd={dehydrated:null,treeContext:null,retryLane:0};function yd(r){return{baseLanes:r,cachePool:null,transitions:null}}function vg(r,s,a){var c=s.pendingProps,d=Ze.current,g=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=r!==null&&r.memoizedState===null?!1:(d&2)!==0),A?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),We(Ze,d&1),r===null)return qh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,r=c.fallback,g?(c=s.mode,g=s.child,E={mode:"hidden",children:E},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=zu(E,c,0,null),r=_s(r,c,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=yd(a),s.memoizedState=gd,r):_d(s,E));if(d=r.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return L0(r,s,E,c,A,d,a);if(g){g=c.fallback,E=s.mode,d=r.child,A=d.sibling;var P={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=gi(d,P),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=gi(A,g):(g=_s(g,E,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,E=r.child.memoizedState,E=E===null?yd(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=gd,c}return g=r.child,r=g.sibling,c=gi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function _d(r,s){return s=zu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Pu(r,s,a,c){return c!==null&&Wh(c),yo(s,r.child,null,a),r=_d(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function L0(r,s,a,c,d,g,E){if(a)return s.flags&256?(s.flags&=-257,c=dd(Error(t(422))),Pu(r,s,E,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,d=s.mode,c=zu({mode:"visible",children:c.children},d,0,null),g=_s(g,d,E,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&yo(s,r.child,null,E),s.child.memoizedState=yd(E),s.memoizedState=gd,g);if((s.mode&1)===0)return Pu(r,s,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=dd(g,c,void 0),Pu(r,s,E,c)}if(A=(E&r.childLanes)!==0,Jt||A){if(c=At,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vr(r,d),$n(c,r,d,-1))}return Vd(),c=dd(Error(t(421))),Pu(r,s,E,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=Q0.bind(null,r),d._reactRetry=s,null):(r=g.treeContext,dn=si(d.nextSibling),hn=s,Ye=!0,Fn=null,r!==null&&(En[wn++]=Dr,En[wn++]=Or,En[wn++]=us,Dr=r.id,Or=r.overflow,us=s),s=_d(s,c.children),s.flags|=4096,s)}function Eg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Qh(r.return,s,a)}function vd(r,s,a,c,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function wg(r,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(Wt(r,s,c.children,a),c=Ze.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Eg(r,a,s);else if(r.tag===19)Eg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(We(Ze,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&wu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),vd(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&wu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}vd(s,!0,a,null,g);break;case"together":vd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ku(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Lr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ps|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=gi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=gi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function M0(r,s,a){switch(s.tag){case 3:yg(s),go();break;case 5:bm(s);break;case 1:Xt(s.type)&&hu(s);break;case 4:Yh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;We(yu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(We(Ze,Ze.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?vg(r,s,a):(We(Ze,Ze.current&1),r=Lr(r,s,a),r!==null?r.sibling:null);We(Ze,Ze.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return wg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Ze,Ze.current),c)break;return null;case 22:case 23:return s.lanes=0,pg(r,s,a)}return Lr(r,s,a)}var Tg,Ed,Ig,Sg;Tg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ed=function(){},Ig=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,ds(ir.current);var g=null;switch(a){case"input":d=Wi(r,d),c=Wi(r,c),g=[];break;case"select":d=G({},d,{value:void 0}),c=G({},c,{value:void 0}),g=[];break;case"textarea":d=na(r,d),c=na(r,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=lu)}la(a,c);var E;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var A=d[$];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var P=c[$];if(A=d!=null?d[$]:void 0,c.hasOwnProperty($)&&P!==A&&(P!=null||A!=null))if($==="style")if(A){for(E in A)!A.hasOwnProperty(E)||P&&P.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in P)P.hasOwnProperty(E)&&A[E]!==P[E]&&(a||(a={}),a[E]=P[E])}else a||(g||(g=[]),g.push($,a)),a=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,A=A?A.__html:void 0,P!=null&&A!==P&&(g=g||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(P!=null&&$==="onScroll"&&Ke("scroll",r),g||A===P||(g=[])):(g=g||[]).push($,P))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},Sg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Ba(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function U0(r,s,a){var c=s.pendingProps;switch(Bh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Xt(s.type)&&cu(),Mt(s),null;case 3:return c=s.stateNode,Eo(),Qe(Qt),Qe(bt),td(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(mu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fn!==null&&(xd(Fn),Fn=null))),Ed(r,s),Mt(s),null;case 5:Zh(s);var d=ds(Ma.current);if(a=s.type,r!==null&&s.stateNode!=null)Ig(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(r=ds(ir.current),mu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[rr]=s,c[Da]=g,r=(s.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<ka.length;d++)Ke(ka[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":Vs(c,g),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ke("invalid",c);break;case"textarea":Ls(c,g),Ke("invalid",c)}la(a,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&au(c.textContent,A,r),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&au(c.textContent,A,r),d=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Ke("scroll",c)}switch(a){case"input":Er(c),Ol(c,g,!0);break;case"textarea":Er(c),ra(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=lu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=E.createElement(a,{is:c.is}):(r=E.createElement(a),a==="select"&&(E=r,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):r=E.createElementNS(r,a),r[rr]=s,r[Da]=c,Tg(r,s,!1,!1),s.stateNode=r;e:{switch(E=ua(a,c),a){case"dialog":Ke("cancel",r),Ke("close",r),d=c;break;case"iframe":case"object":case"embed":Ke("load",r),d=c;break;case"video":case"audio":for(d=0;d<ka.length;d++)Ke(ka[d],r);d=c;break;case"source":Ke("error",r),d=c;break;case"img":case"image":case"link":Ke("error",r),Ke("load",r),d=c;break;case"details":Ke("toggle",r),d=c;break;case"input":Vs(r,c),d=Wi(r,c),Ke("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=G({},c,{value:void 0}),Ke("invalid",r);break;case"textarea":Ls(r,c),d=na(r,c),Ke("invalid",r);break;default:d=c}la(a,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var P=A[g];g==="style"?oa(r,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&ia(r,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Kr(r,P):typeof P=="number"&&Kr(r,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Ke("scroll",r):P!=null&&ee(r,g,P,E))}switch(a){case"input":Er(r),Ol(r,c,!1);break;case"textarea":Er(r),ra(r);break;case"option":c.value!=null&&r.setAttribute("value",""+Fe(c.value));break;case"select":r.multiple=!!c.multiple,g=c.value,g!=null?Tr(r,!!c.multiple,g,!1):c.defaultValue!=null&&Tr(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=lu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(r&&s.stateNode!=null)Sg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ds(Ma.current),ds(ir.current),mu(s)){if(c=s.stateNode,a=s.memoizedProps,c[rr]=s,(g=c.nodeValue!==a)&&(r=hn,r!==null))switch(r.tag){case 3:au(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&au(c.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[rr]=s,s.stateNode=c}return Mt(s),null;case 13:if(Qe(Ze),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ye&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Cm(),go(),s.flags|=98560,g=!1;else if(g=mu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[rr]=s}else go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),g=!1}else Fn!==null&&(xd(Fn),Fn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Ze.current&1)!==0?Et===0&&(Et=3):Vd())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return Eo(),Ed(r,s),r===null&&Na(s.stateNode.containerInfo),Mt(s),null;case 10:return Kh(s.type._context),Mt(s),null;case 17:return Xt(s.type)&&cu(),Mt(s),null;case 19:if(Qe(Ze),g=s.memoizedState,g===null)return Mt(s),null;if(c=(s.flags&128)!==0,E=g.rendering,E===null)if(c)Ba(g,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=wu(r),E!==null){for(s.flags|=128,Ba(g,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,r=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return We(Ze,Ze.current&1|2),s.child}r=r.sibling}g.tail!==null&&qe()>So&&(s.flags|=128,c=!0,Ba(g,!1),s.lanes=4194304)}else{if(!c)if(r=wu(E),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ba(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ye)return Mt(s),null}else 2*qe()-g.renderingStartTime>So&&a!==1073741824&&(s.flags|=128,c=!0,Ba(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=qe(),s.sibling=null,a=Ze.current,We(Ze,c?a&1|2:a&1),s):(Mt(s),null);case 22:case 23:return Od(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(fn&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function F0(r,s){switch(Bh(s),s.tag){case 1:return Xt(s.type)&&cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Eo(),Qe(Qt),Qe(bt),td(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Zh(s),null;case 13:if(Qe(Ze),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Qe(Ze),null;case 4:return Eo(),null;case 10:return Kh(s.type._context),null;case 22:case 23:return Od(),null;case 24:return null;default:return null}}var Nu=!1,Ut=!1,j0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function To(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){rt(r,s,c)}else a.current=null}function wd(r,s,a){try{a()}catch(c){rt(r,s,c)}}var Ag=!1;function z0(r,s){if(Oh=ni,r=rm(),Ah(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,P=-1,$=0,Y=0,Z=r,J=null;t:for(;;){for(var ae;Z!==a||d!==0&&Z.nodeType!==3||(A=E+d),Z!==g||c!==0&&Z.nodeType!==3||(P=E+c),Z.nodeType===3&&(E+=Z.nodeValue.length),(ae=Z.firstChild)!==null;)J=Z,Z=ae;for(;;){if(Z===r)break t;if(J===a&&++$===d&&(A=E),J===g&&++Y===c&&(P=E),(ae=Z.nextSibling)!==null)break;Z=J,J=Z.parentNode}Z=ae}a=A===-1||P===-1?null:{start:A,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vh={focusedElem:r,selectionRange:a},ni=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ot=de.memoizedState,F=s.stateNode,D=F.getSnapshotBeforeUpdate(s.elementType===s.type?fe:jn(s.type,fe),ot);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){rt(s,s.return,ne)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return de=Ag,Ag=!1,de}function $a(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&wd(s,a,g)}d=d.next}while(d!==c)}}function xu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Td(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Rg(r){var s=r.alternate;s!==null&&(r.alternate=null,Rg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[rr],delete s[Da],delete s[Uh],delete s[I0],delete s[S0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Cg(r){return r.tag===5||r.tag===3||r.tag===4}function Pg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Cg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Id(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=lu));else if(c!==4&&(r=r.child,r!==null))for(Id(r,s,a),r=r.sibling;r!==null;)Id(r,s,a),r=r.sibling}function Sd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Sd(r,s,a),r=r.sibling;r!==null;)Sd(r,s,a),r=r.sibling}var Nt=null,zn=!1;function hi(r,s,a){for(a=a.child;a!==null;)kg(r,s,a),a=a.sibling}function kg(r,s,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(es,a)}catch{}switch(a.tag){case 5:Ut||To(a,s);case 6:var c=Nt,d=zn;Nt=null,hi(r,s,a),Nt=c,zn=d,Nt!==null&&(zn?(r=Nt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(zn?(r=Nt,a=a.stateNode,r.nodeType===8?Mh(r.parentNode,a):r.nodeType===1&&Mh(r,a),Ln(r)):Mh(Nt,a.stateNode));break;case 4:c=Nt,d=zn,Nt=a.stateNode.containerInfo,zn=!0,hi(r,s,a),Nt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&wd(a,s,E),d=d.next}while(d!==c)}hi(r,s,a);break;case 1:if(!Ut&&(To(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){rt(a,s,A)}hi(r,s,a);break;case 21:hi(r,s,a);break;case 22:a.mode&1?(Ut=(c=Ut)||a.memoizedState!==null,hi(r,s,a),Ut=c):hi(r,s,a);break;default:hi(r,s,a)}}function Ng(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new j0),s.forEach(function(c){var d=X0.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Bn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=r,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:Nt=A.stateNode,zn=!1;break e;case 3:Nt=A.stateNode.containerInfo,zn=!0;break e;case 4:Nt=A.stateNode.containerInfo,zn=!0;break e}A=A.return}if(Nt===null)throw Error(t(160));kg(g,E,d),Nt=null,zn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch($){rt(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)xg(s,r),s=s.sibling}function xg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bn(s,r),or(r),c&4){try{$a(3,r,r.return),xu(3,r)}catch(fe){rt(r,r.return,fe)}try{$a(5,r,r.return)}catch(fe){rt(r,r.return,fe)}}break;case 1:Bn(s,r),or(r),c&512&&a!==null&&To(a,a.return);break;case 5:if(Bn(s,r),or(r),c&512&&a!==null&&To(a,a.return),r.flags&32){var d=r.stateNode;try{Kr(d,"")}catch(fe){rt(r,r.return,fe)}}if(c&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,A=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&ea(d,g),ua(A,E);var $=ua(A,g);for(E=0;E<P.length;E+=2){var Y=P[E],Z=P[E+1];Y==="style"?oa(d,Z):Y==="dangerouslySetInnerHTML"?ia(d,Z):Y==="children"?Kr(d,Z):ee(d,Y,Z,$)}switch(A){case"input":ta(d,g);break;case"textarea":Ms(d,g);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ae=g.value;ae!=null?Tr(d,!!g.multiple,ae,!1):J!==!!g.multiple&&(g.defaultValue!=null?Tr(d,!!g.multiple,g.defaultValue,!0):Tr(d,!!g.multiple,g.multiple?[]:"",!1))}d[Da]=g}catch(fe){rt(r,r.return,fe)}}break;case 6:if(Bn(s,r),or(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(fe){rt(r,r.return,fe)}}break;case 3:if(Bn(s,r),or(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(fe){rt(r,r.return,fe)}break;case 4:Bn(s,r),or(r);break;case 13:Bn(s,r),or(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Cd=qe())),c&4&&Ng(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(Ut=($=Ut)||Y,Bn(s,r),Ut=$):Bn(s,r),or(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(J=ce,ae=J.child,J.tag){case 0:case 11:case 14:case 15:$a(4,J,J.return);break;case 1:To(J,J.return);var de=J.stateNode;if(typeof de.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){rt(c,a,fe)}}break;case 5:To(J,J.return);break;case 22:if(J.memoizedState!==null){Vg(Z);continue}}ae!==null?(ae.return=J,ce=ae):Vg(Z)}Y=Y.sibling}e:for(Y=null,Z=r;;){if(Z.tag===5){if(Y===null){Y=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=Z.stateNode,P=Z.memoizedProps.style,E=P!=null&&P.hasOwnProperty("display")?P.display:null,A.style.display=sa("display",E))}catch(fe){rt(r,r.return,fe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(fe){rt(r,r.return,fe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Bn(s,r),or(r),c&4&&Ng(r);break;case 21:break;default:Bn(s,r),or(r)}}function or(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Cg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Kr(d,""),c.flags&=-33);var g=Pg(r);Sd(r,g,d);break;case 3:case 4:var E=c.stateNode.containerInfo,A=Pg(r);Id(r,A,E);break;default:throw Error(t(161))}}catch(P){rt(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function B0(r,s,a){ce=r,Dg(r)}function Dg(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var d=ce,g=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||Nu;if(!E){var A=d.alternate,P=A!==null&&A.memoizedState!==null||Ut;A=Nu;var $=Ut;if(Nu=E,(Ut=P)&&!$)for(ce=d;ce!==null;)E=ce,P=E.child,E.tag===22&&E.memoizedState!==null?bg(d):P!==null?(P.return=E,ce=P):bg(d);for(;g!==null;)ce=g,Dg(g),g=g.sibling;ce=d,Nu=A,Ut=$}Og(r)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,ce=g):Og(r)}}function Og(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ut||xu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ut)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:jn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Vm(s,g,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Vm(s,E,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Ln(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||s.flags&512&&Td(s)}catch(J){rt(s,s.return,J)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Vg(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function bg(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{xu(4,s)}catch(P){rt(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(P){rt(s,d,P)}}var g=s.return;try{Td(s)}catch(P){rt(s,g,P)}break;case 5:var E=s.return;try{Td(s)}catch(P){rt(s,E,P)}}}catch(P){rt(s,s.return,P)}if(s===r){ce=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ce=A;break}ce=s.return}}var $0=Math.ceil,Du=ue.ReactCurrentDispatcher,Ad=ue.ReactCurrentOwner,Sn=ue.ReactCurrentBatchConfig,Le=0,At=null,dt=null,xt=0,fn=0,Io=oi(0),Et=0,qa=null,ps=0,Ou=0,Rd=0,Wa=null,Yt=null,Cd=0,So=1/0,Mr=null,Vu=!1,Pd=null,di=null,bu=!1,fi=null,Lu=0,Ha=0,kd=null,Mu=-1,Uu=0;function Ht(){return(Le&6)!==0?qe():Mu!==-1?Mu:Mu=qe()}function pi(r){return(r.mode&1)===0?1:(Le&2)!==0&&xt!==0?xt&-xt:R0.transition!==null?(Uu===0&&(Uu=ns()),Uu):(r=De,r!==0||(r=window.event,r=r===void 0?16:Ea(r.type)),r)}function $n(r,s,a,c){if(50<Ha)throw Ha=0,kd=null,Error(t(185));Yr(r,a,c),((Le&2)===0||r!==At)&&(r===At&&((Le&2)===0&&(Ou|=a),Et===4&&mi(r,xt)),Zt(r,c),a===1&&Le===0&&(s.mode&1)===0&&(So=qe()+500,du&&li()))}function Zt(r,s){var a=r.callbackNode;Ar(r,s);var c=ts(r,r===At?xt:0);if(c===0)a!==null&&ma(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&ma(a),s===1)r.tag===0?A0(Mg.bind(null,r)):Tm(Mg.bind(null,r)),w0(function(){(Le&6)===0&&li()}),a=null;else{switch(ei(c)){case 1:a=Zi;break;case 4:a=Qr;break;case 16:a=yn;break;case 536870912:a=Ul;break;default:a=yn}a=Wg(a,Lg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Lg(r,s){if(Mu=-1,Uu=0,(Le&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Ao()&&r.callbackNode!==a)return null;var c=ts(r,r===At?xt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Fu(r,c);else{s=c;var d=Le;Le|=2;var g=Fg();(At!==r||xt!==s)&&(Mr=null,So=qe()+500,gs(r,s));do try{H0();break}catch(A){Ug(r,A)}while(!0);Gh(),Du.current=g,Le=d,dt!==null?s=0:(At=null,xt=0,s=Et)}if(s!==0){if(s===2&&(d=ln(r),d!==0&&(c=d,s=Nd(r,d))),s===1)throw a=qa,gs(r,0),mi(r,c),Zt(r,qe()),a;if(s===6)mi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!q0(d)&&(s=Fu(r,c),s===2&&(g=ln(r),g!==0&&(c=g,s=Nd(r,g))),s===1))throw a=qa,gs(r,0),mi(r,c),Zt(r,qe()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ys(r,Yt,Mr);break;case 3:if(mi(r,c),(c&130023424)===c&&(s=Cd+500-qe(),10<s)){if(ts(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){Ht(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Lh(ys.bind(null,r,Yt,Mr),s);break}ys(r,Yt,Mr);break;case 4:if(mi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var E=31-$t(c);g=1<<E,E=s[E],E>d&&(d=E),c&=~g}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*$0(c/1960))-c,10<c){r.timeoutHandle=Lh(ys.bind(null,r,Yt,Mr),c);break}ys(r,Yt,Mr);break;case 5:ys(r,Yt,Mr);break;default:throw Error(t(329))}}}return Zt(r,qe()),r.callbackNode===a?Lg.bind(null,r):null}function Nd(r,s){var a=Wa;return r.current.memoizedState.isDehydrated&&(gs(r,s).flags|=256),r=Fu(r,s),r!==2&&(s=Yt,Yt=a,s!==null&&xd(s)),r}function xd(r){Yt===null?Yt=r:Yt.push.apply(Yt,r)}function q0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Un(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mi(r,s){for(s&=~Rd,s&=~Ou,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-$t(s),c=1<<a;r[a]=-1,s&=~c}}function Mg(r){if((Le&6)!==0)throw Error(t(327));Ao();var s=ts(r,0);if((s&1)===0)return Zt(r,qe()),null;var a=Fu(r,s);if(r.tag!==0&&a===2){var c=ln(r);c!==0&&(s=c,a=Nd(r,c))}if(a===1)throw a=qa,gs(r,0),mi(r,s),Zt(r,qe()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ys(r,Yt,Mr),Zt(r,qe()),null}function Dd(r,s){var a=Le;Le|=1;try{return r(s)}finally{Le=a,Le===0&&(So=qe()+500,du&&li())}}function ms(r){fi!==null&&fi.tag===0&&(Le&6)===0&&Ao();var s=Le;Le|=1;var a=Sn.transition,c=De;try{if(Sn.transition=null,De=1,r)return r()}finally{De=c,Sn.transition=a,Le=s,(Le&6)===0&&li()}}function Od(){fn=Io.current,Qe(Io)}function gs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,E0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(Bh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&cu();break;case 3:Eo(),Qe(Qt),Qe(bt),td();break;case 5:Zh(c);break;case 4:Eo();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:Kh(c.type._context);break;case 22:case 23:Od()}a=a.return}if(At=r,dt=r=gi(r.current,null),xt=fn=s,Et=0,qa=null,Rd=Ou=ps=0,Yt=Wa=null,hs!==null){for(s=0;s<hs.length;s++)if(a=hs[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var E=g.next;g.next=d,c.next=E}a.pending=c}hs=null}return r}function Ug(r,s){do{var a=dt;try{if(Gh(),Tu.current=Ru,Iu){for(var c=et.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Iu=!1}if(fs=0,St=vt=et=null,Ua=!1,Fa=0,Ad.current=null,a===null||a.return===null){Et=1,qa=s,dt=null;break}e:{var g=r,E=a.return,A=a,P=s;if(s=xt,A.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,Y=A,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ae=ug(E);if(ae!==null){ae.flags&=-257,cg(ae,E,A,g,s),ae.mode&1&&lg(g,$,s),s=ae,P=$;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(P),s.updateQueue=fe}else de.add(P);break e}else{if((s&1)===0){lg(g,$,s),Vd();break e}P=Error(t(426))}}else if(Ye&&A.mode&1){var ot=ug(E);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),cg(ot,E,A,g,s),Wh(wo(P,A));break e}}g=P=wo(P,A),Et!==4&&(Et=2),Wa===null?Wa=[g]:Wa.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=og(g,P,s);Om(g,F);break e;case 1:A=P;var D=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(di===null||!di.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var ne=ag(g,A,s);Om(g,ne);break e}}g=g.return}while(g!==null)}zg(a)}catch(pe){s=pe,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Fg(){var r=Du.current;return Du.current=Ru,r===null?Ru:r}function Vd(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||(ps&268435455)===0&&(Ou&268435455)===0||mi(At,xt)}function Fu(r,s){var a=Le;Le|=2;var c=Fg();(At!==r||xt!==s)&&(Mr=null,gs(r,s));do try{W0();break}catch(d){Ug(r,d)}while(!0);if(Gh(),Le=a,Du.current=c,dt!==null)throw Error(t(261));return At=null,xt=0,Et}function W0(){for(;dt!==null;)jg(dt)}function H0(){for(;dt!==null&&!Ll();)jg(dt)}function jg(r){var s=qg(r.alternate,r,fn);r.memoizedProps=r.pendingProps,s===null?zg(r):dt=s,Ad.current=null}function zg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=U0(a,s,fn),a!==null){dt=a;return}}else{if(a=F0(a,s),a!==null){a.flags&=32767,dt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=r}while(s!==null);Et===0&&(Et=5)}function ys(r,s,a){var c=De,d=Sn.transition;try{Sn.transition=null,De=1,G0(r,s,a,c)}finally{Sn.transition=d,De=c}return null}function G0(r,s,a,c){do Ao();while(fi!==null);if((Le&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Be(r,g),r===At&&(dt=At=null,xt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||bu||(bu=!0,Wg(yn,function(){return Ao(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Sn.transition,Sn.transition=null;var E=De;De=1;var A=Le;Le|=4,Ad.current=null,z0(r,a),xg(a,r),f0(Vh),ni=!!Oh,Vh=Oh=null,r.current=a,B0(a),yh(),Le=A,De=E,Sn.transition=g}else r.current=a;if(bu&&(bu=!1,fi=r,Lu=d),g=r.pendingLanes,g===0&&(di=null),Fl(a.stateNode),Zt(r,qe()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Vu)throw Vu=!1,r=Pd,Pd=null,r;return(Lu&1)!==0&&r.tag!==0&&Ao(),g=r.pendingLanes,(g&1)!==0?r===kd?Ha++:(Ha=0,kd=r):Ha=0,li(),null}function Ao(){if(fi!==null){var r=ei(Lu),s=Sn.transition,a=De;try{if(Sn.transition=null,De=16>r?16:r,fi===null)var c=!1;else{if(r=fi,fi=null,Lu=0,(Le&6)!==0)throw Error(t(331));var d=Le;for(Le|=4,ce=r.current;ce!==null;){var g=ce,E=g.child;if((ce.flags&16)!==0){var A=g.deletions;if(A!==null){for(var P=0;P<A.length;P++){var $=A[P];for(ce=$;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:$a(8,Y,g)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var J=Y.sibling,ae=Y.return;if(Rg(Y),Y===$){ce=null;break}if(J!==null){J.return=ae,ce=J;break}ce=ae}}}var de=g.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ot=fe.sibling;fe.sibling=null,fe=ot}while(fe!==null)}}ce=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,ce=E;else e:for(;ce!==null;){if(g=ce,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:$a(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ce=F;break e}ce=g.return}}var D=r.current;for(ce=D;ce!==null;){E=ce;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ce=z;else e:for(E=D;ce!==null;){if(A=ce,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:xu(9,A)}}catch(pe){rt(A,A.return,pe)}if(A===E){ce=null;break e}var ne=A.sibling;if(ne!==null){ne.return=A.return,ce=ne;break e}ce=A.return}}if(Le=d,li(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(es,r)}catch{}c=!0}return c}finally{De=a,Sn.transition=s}}return!1}function Bg(r,s,a){s=wo(a,s),s=og(r,s,1),r=ci(r,s,1),s=Ht(),r!==null&&(Yr(r,1,s),Zt(r,s))}function rt(r,s,a){if(r.tag===3)Bg(r,r,a);else for(;s!==null;){if(s.tag===3){Bg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){r=wo(a,r),r=ag(s,r,1),s=ci(s,r,1),r=Ht(),s!==null&&(Yr(s,1,r),Zt(s,r));break}}s=s.return}}function K0(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=Ht(),r.pingedLanes|=r.suspendedLanes&a,At===r&&(xt&a)===a&&(Et===4||Et===3&&(xt&130023424)===xt&&500>qe()-Cd?gs(r,0):Rd|=a),Zt(r,s)}function $g(r,s){s===0&&((r.mode&1)===0?s=1:(s=Gs,Gs<<=1,(Gs&130023424)===0&&(Gs=4194304)));var a=Ht();r=Vr(r,s),r!==null&&(Yr(r,s,a),Zt(r,a))}function Q0(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),$g(r,a)}function X0(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),$g(r,a)}var qg;qg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Qt.current)Jt=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Jt=!1,M0(r,s,a);Jt=(r.flags&131072)!==0}else Jt=!1,Ye&&(s.flags&1048576)!==0&&Im(s,pu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;ku(r,s),r=s.pendingProps;var d=fo(s,bt.current);vo(s,a),d=id(null,s,c,r,d,a);var g=sd();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xt(c)?(g=!0,hu(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Jh(s),d.updater=Cu,s.stateNode=d,d._reactInternals=s,hd(s,c,r,a),s=md(null,s,c,!0,g,a)):(s.tag=0,Ye&&g&&zh(s),Wt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(ku(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=Y0(c),r=jn(c,r),d){case 0:s=pd(null,s,c,r,a);break e;case 1:s=gg(null,s,c,r,a);break e;case 11:s=hg(null,s,c,r,a);break e;case 14:s=dg(null,s,c,jn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:jn(c,d),pd(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:jn(c,d),gg(r,s,c,d,a);case 3:e:{if(yg(s),r===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,d=g.element,Dm(r,s),Eu(s,c,null,a);var E=s.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=wo(Error(t(423)),s),s=_g(r,s,c,a,d);break e}else if(c!==d){d=wo(Error(t(424)),s),s=_g(r,s,c,a,d);break e}else for(dn=si(s.stateNode.containerInfo.firstChild),hn=s,Ye=!0,Fn=null,a=Nm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(go(),c===d){s=Lr(r,s,a);break e}Wt(r,s,c,a)}s=s.child}return s;case 5:return bm(s),r===null&&qh(s),c=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,E=d.children,bh(c,d)?E=null:g!==null&&bh(c,g)&&(s.flags|=32),mg(r,s),Wt(r,s,E,a),s.child;case 6:return r===null&&qh(s),null;case 13:return vg(r,s,a);case 4:return Yh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=yo(s,null,c,a):Wt(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:jn(c,d),hg(r,s,c,d,a);case 7:return Wt(r,s,s.pendingProps,a),s.child;case 8:return Wt(r,s,s.pendingProps.children,a),s.child;case 12:return Wt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,g=s.memoizedProps,E=d.value,We(yu,c._currentValue),c._currentValue=E,g!==null)if(Un(g.value,E)){if(g.children===d.children&&!Qt.current){s=Lr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var P=A.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=br(-1,a&-a),P.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var Y=$.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),$.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),Qh(g.return,a,s),A.lanes|=a;break}P=P.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),Qh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Wt(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,vo(s,a),d=Tn(d),c=c(d),s.flags|=1,Wt(r,s,c,a),s.child;case 14:return c=s.type,d=jn(c,s.pendingProps),d=jn(c.type,d),dg(r,s,c,d,a);case 15:return fg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:jn(c,d),ku(r,s),s.tag=1,Xt(c)?(r=!0,hu(s)):r=!1,vo(s,a),ig(s,c,d),hd(s,c,d,a),md(null,s,c,!0,r,a);case 19:return wg(r,s,a);case 22:return pg(r,s,a)}throw Error(t(156,s.tag))};function Wg(r,s){return Ws(r,s)}function J0(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,s,a,c){return new J0(r,s,a,c)}function bd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Y0(r){if(typeof r=="function")return bd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===it)return 14}return 2}function gi(r,s){var a=r.alternate;return a===null?(a=An(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function ju(r,s,a,c,d,g){var E=2;if(c=r,typeof r=="function")bd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case x:return _s(a.children,d,g,s);case S:E=8,d|=8;break;case C:return r=An(12,a,s,d|2),r.elementType=C,r.lanes=g,r;case R:return r=An(13,a,s,d),r.elementType=R,r.lanes=g,r;case Ge:return r=An(19,a,s,d),r.elementType=Ge,r.lanes=g,r;case ke:return zu(a,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:E=10;break e;case V:E=9;break e;case M:E=11;break e;case it:E=14;break e;case nt:E=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=An(E,a,s,d),s.elementType=r,s.type=c,s.lanes=g,s}function _s(r,s,a,c){return r=An(7,r,c,s),r.lanes=a,r}function zu(r,s,a,c){return r=An(22,r,c,s),r.elementType=ke,r.lanes=a,r.stateNode={isHidden:!1},r}function Ld(r,s,a){return r=An(6,r,null,s),r.lanes=a,r}function Md(r,s,a){return s=An(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Z0(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ud(r,s,a,c,d,g,E,A,P){return r=new Z0(r,s,a,A,P),s===1?(s=1,g===!0&&(s|=8)):s=0,g=An(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(g),r}function eT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function Hg(r){if(!r)return ai;r=r._reactInternals;e:{if(xn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Xt(a))return Em(r,a,s)}return s}function Gg(r,s,a,c,d,g,E,A,P){return r=Ud(a,c,!0,r,d,g,E,A,P),r.context=Hg(null),a=r.current,c=Ht(),d=pi(a),g=br(c,d),g.callback=s??null,ci(a,g,d),r.current.lanes=d,Yr(r,d,c),Zt(r,c),r}function Bu(r,s,a,c){var d=s.current,g=Ht(),E=pi(d);return a=Hg(a),s.context===null?s.context=a:s.pendingContext=a,s=br(g,E),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=ci(d,s,E),r!==null&&($n(r,d,E,g),vu(r,d,E)),E}function $u(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Kg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Fd(r,s){Kg(r,s),(r=r.alternate)&&Kg(r,s)}function tT(){return null}var Qg=typeof reportError=="function"?reportError:function(r){console.error(r)};function jd(r){this._internalRoot=r}qu.prototype.render=jd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Bu(r,s,null,null)},qu.prototype.unmount=jd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ms(function(){Bu(null,r,null,null)}),s[Nr]=null}};function qu(r){this._internalRoot=r}qu.prototype.unstable_scheduleHydration=function(r){if(r){var s=ql();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Zn.length&&s!==0&&s<Zn[a].priority;a++);Zn.splice(a,0,r),a===0&&Gl(r)}};function zd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Wu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Xg(){}function nT(r,s,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var $=$u(E);g.call($)}}var E=Gg(s,c,r,0,null,!1,!1,"",Xg);return r._reactRootContainer=E,r[Nr]=E.current,Na(r.nodeType===8?r.parentNode:r),ms(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var $=$u(P);A.call($)}}var P=Ud(r,0,!1,null,null,!1,!1,"",Xg);return r._reactRootContainer=P,r[Nr]=P.current,Na(r.nodeType===8?r.parentNode:r),ms(function(){Bu(s,P,a,c)}),P}function Hu(r,s,a,c,d){var g=a._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var A=d;d=function(){var P=$u(E);A.call(P)}}Bu(s,E,r,d)}else E=nT(a,s,r,d,c);return $u(E)}Bl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Xr(s.pendingLanes);a!==0&&(Zr(s,a|1),Zt(s,qe()),(Le&6)===0&&(So=qe()+500,li()))}break;case 13:ms(function(){var c=Vr(r,1);if(c!==null){var d=Ht();$n(c,r,1,d)}}),Fd(r,1)}},Ks=function(r){if(r.tag===13){var s=Vr(r,134217728);if(s!==null){var a=Ht();$n(s,r,134217728,a)}Fd(r,134217728)}},$l=function(r){if(r.tag===13){var s=pi(r),a=Vr(r,s);if(a!==null){var c=Ht();$n(a,r,s,c)}Fd(r,s)}},ql=function(){return De},Wl=function(r,s){var a=De;try{return De=r,s()}finally{De=a}},Fs=function(r,s,a){switch(s){case"input":if(ta(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=uu(c);if(!d)throw Error(t(90));Os(c),ta(c,d)}}}break;case"textarea":Ms(r,a);break;case"select":s=a.value,s!=null&&Tr(r,!!a.multiple,s,!1)}},Qi=Dd,ha=ms;var rT={usingClientEntryPoint:!1,Events:[Oa,co,uu,Jn,ca,Dd]},Ga={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iT={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=pa(r),r===null?null:r.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||tT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{es=Gu.inject(iT),an=Gu}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT,en.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zd(s))throw Error(t(200));return eT(r,s,null,a)},en.createRoot=function(r,s){if(!zd(r))throw Error(t(299));var a=!1,c="",d=Qg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Ud(r,1,!1,null,null,a,!1,c,d),r[Nr]=s.current,Na(r.nodeType===8?r.parentNode:r),new jd(s)},en.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=pa(s),r=r===null?null:r.stateNode,r},en.flushSync=function(r){return ms(r)},en.hydrate=function(r,s,a){if(!Wu(s))throw Error(t(200));return Hu(null,r,s,!0,a)},en.hydrateRoot=function(r,s,a){if(!zd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",E=Qg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=Gg(s,null,r,1,a??null,d,!1,g,E),r[Nr]=s.current,Na(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new qu(s)},en.render=function(r,s,a){if(!Wu(s))throw Error(t(200));return Hu(null,r,s,!1,a)},en.unmountComponentAtNode=function(r){if(!Wu(r))throw Error(t(40));return r._reactRootContainer?(ms(function(){Hu(null,null,r,!1,function(){r._reactRootContainer=null,r[Nr]=null})}),!0):!1},en.unstable_batchedUpdates=Dd,en.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Wu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Hu(r,s,a,!1,c)},en.version="18.3.1-next-f1338f8080-20240426",en}var iy;function nv(){if(iy)return qd.exports;iy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qd.exports=fT(),qd.exports}var sy;function pT(){if(sy)return Ku;sy=1;var n=nv();return Ku.createRoot=n.createRoot,Ku.hydrateRoot=n.hydrateRoot,Ku}var mT=pT();const gT=ev(mT);nv();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sl.apply(this,arguments)}var Ti;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ti||(Ti={}));const oy="popstate";function yT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return lf("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:fc(o)}return vT(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _T(){return Math.random().toString(36).substr(2,8)}function ay(n,e){return{usr:n.state,key:n.key,idx:e}}function lf(n,e,t,i){return t===void 0&&(t=null),sl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:t,key:e&&e.key||i||_T()})}function fc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Bo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function vT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=Ti.Pop,m=null,y=v();y==null&&(y=0,h.replaceState(sl({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function T(){f=Ti.Pop;let L=v(),ie=L==null?null:L-y;y=L,m&&m({action:f,location:B.location,delta:ie})}function I(L,ie){f=Ti.Push;let se=lf(B.location,L,ie);y=v()+1;let ee=ay(se,y),ue=B.createHref(se);try{h.pushState(ee,"",ue)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;o.location.assign(ue)}l&&m&&m({action:f,location:B.location,delta:1})}function b(L,ie){f=Ti.Replace;let se=lf(B.location,L,ie);y=v();let ee=ay(se,y),ue=B.createHref(se);h.replaceState(ee,"",ue),l&&m&&m({action:f,location:B.location,delta:0})}function j(L){let ie=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof L=="string"?L:fc(L);return se=se.replace(/ $/,"%20"),ut(ie,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,ie)}let B={get action(){return f},get location(){return n(o,h)},listen(L){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(oy,T),m=L,()=>{o.removeEventListener(oy,T),m=null}},createHref(L){return e(o,L)},createURL:j,encodeLocation(L){let ie=j(L);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:I,replace:b,go(L){return h.go(L)}};return B}var ly;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ly||(ly={}));function ET(n,e,t){return t===void 0&&(t="/"),wT(n,e,t)}function wT(n,e,t,i){let o=typeof e=="string"?Bo(e):e,l=$f(o.pathname||"/",t);if(l==null)return null;let h=rv(n);TT(h);let f=null;for(let m=0;f==null&&m<h.length;++m){let y=VT(l);f=xT(h[m],y)}return f}function rv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(ut(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let y=Ai([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(ut(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),rv(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:kT(y,l.index),routesMeta:v})};return n.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let m of iv(l.path))o(l,h,m)}),e}function iv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=iv(i.join("/")),f=[];return f.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...h),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function TT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const IT=/^:[\w-]+$/,ST=3,AT=2,RT=1,CT=10,PT=-2,uy=n=>n==="*";function kT(n,e){let t=n.split("/"),i=t.length;return t.some(uy)&&(i+=PT),e&&(i+=AT),t.filter(o=>!uy(o)).reduce((o,l)=>o+(IT.test(l)?ST:l===""?RT:CT),i)}function NT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function xT(n,e,t){let{routesMeta:i}=n,o={},l="/",h=[];for(let f=0;f<i.length;++f){let m=i[f],y=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=DT({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},v),I=m.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Ai([l,T.pathname]),pathnameBase:FT(Ai([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=Ai([l,T.pathnameBase]))}return h}function DT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=OT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((y,v,T)=>{let{paramName:I,isOptional:b}=v;if(I==="*"){let B=f[T]||"";h=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const j=f[T];return b&&!j?y[I]=void 0:y[I]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:n}}function OT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Bf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function VT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $f(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const bT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LT=n=>bT.test(n);function MT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Bo(n):n,l;if(t)if(LT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Bf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=cy(t.substring(1),"/"):l=cy(t,e)}else l=e;return{pathname:l,search:jT(i),hash:zT(o)}}function cy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Gd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qf(n,e){let t=UT(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Wf(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Bo(n):(o=sl({},n),ut(!o.pathname||!o.pathname.includes("?"),Gd("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Gd("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Gd("#","search","hash",o)));let l=n===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}f=T>=0?e[T]:"/"}let m=MT(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||v)&&(m.pathname+="/"),m}const Ai=n=>n.join("/").replace(/\/\/+/g,"/"),FT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,zT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sv=["post","put","patch","delete"];new Set(sv);const $T=["get",...sv];new Set($T);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ol.apply(this,arguments)}const Hf=Q.createContext(null),qT=Q.createContext(null),Fi=Q.createContext(null),Mc=Q.createContext(null),ji=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),ov=Q.createContext(null);function WT(n,e){let{relative:t}=e===void 0?{}:e;$o()||ut(!1);let{basename:i,navigator:o}=Q.useContext(Fi),{hash:l,pathname:h,search:f}=lv(n,{relative:t}),m=h;return i!=="/"&&(m=h==="/"?i:Ai([i,h])),o.createHref({pathname:m,search:f,hash:l})}function $o(){return Q.useContext(Mc)!=null}function _l(){return $o()||ut(!1),Q.useContext(Mc).location}function av(n){Q.useContext(Fi).static||Q.useLayoutEffect(n)}function vl(){let{isDataRoute:n}=Q.useContext(ji);return n?iI():HT()}function HT(){$o()||ut(!1);let n=Q.useContext(Hf),{basename:e,future:t,navigator:i}=Q.useContext(Fi),{matches:o}=Q.useContext(ji),{pathname:l}=_l(),h=JSON.stringify(qf(o,t.v7_relativeSplatPath)),f=Q.useRef(!1);return av(()=>{f.current=!0}),Q.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){i.go(y);return}let T=Wf(y,JSON.parse(h),l,v.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Ai([e,T.pathname])),(v.replace?i.replace:i.push)(T,v.state,v)},[e,i,h,l,n])}function lv(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(Fi),{matches:o}=Q.useContext(ji),{pathname:l}=_l(),h=JSON.stringify(qf(o,i.v7_relativeSplatPath));return Q.useMemo(()=>Wf(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function GT(n,e){return KT(n,e)}function KT(n,e,t,i){$o()||ut(!1);let{navigator:o}=Q.useContext(Fi),{matches:l}=Q.useContext(ji),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let y=_l(),v;if(e){var T;let L=typeof e=="string"?Bo(e):e;m==="/"||(T=L.pathname)!=null&&T.startsWith(m)||ut(!1),v=L}else v=y;let I=v.pathname||"/",b=I;if(m!=="/"){let L=m.replace(/^\//,"").split("/");b="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let j=ET(n,{pathname:b}),B=ZT(j&&j.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Ai([m,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:Ai([m,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,i);return e&&B?Q.createElement(Mc.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Ti.Pop}},B):B}function QT(){let n=rI(),e=BT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const XT=Q.createElement(QT,null);class JT extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(ji.Provider,{value:this.props.routeContext},Q.createElement(ov.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(Hf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(ji.Provider,{value:e},i)}function ZT(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);v>=0||ut(!1),h=h.slice(0,Math.min(h.length,v+1))}let m=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let v=0;v<h.length;v++){let T=h[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=v),T.route.id){let{loaderData:I,errors:b}=t,j=T.route.loader&&I[T.route.id]===void 0&&(!b||b[T.route.id]===void 0);if(T.route.lazy||j){m=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,T,I)=>{let b,j=!1,B=null,L=null;t&&(b=f&&T.route.id?f[T.route.id]:void 0,B=T.route.errorElement||XT,m&&(y<0&&I===0?(sI("route-fallback"),j=!0,L=null):y===I&&(j=!0,L=T.route.hydrateFallbackElement||null)));let ie=e.concat(h.slice(0,I+1)),se=()=>{let ee;return b?ee=B:j?ee=L:T.route.Component?ee=Q.createElement(T.route.Component,null):T.route.element?ee=T.route.element:ee=v,Q.createElement(YT,{match:T,routeContext:{outlet:v,matches:ie,isDataRoute:t!=null},children:ee})};return t&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?Q.createElement(JT,{location:t.location,revalidation:t.revalidation,component:B,error:b,children:se(),routeContext:{outlet:null,matches:ie,isDataRoute:!0}}):se()},null)}var uv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(uv||{}),cv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(cv||{});function eI(n){let e=Q.useContext(Hf);return e||ut(!1),e}function tI(n){let e=Q.useContext(qT);return e||ut(!1),e}function nI(n){let e=Q.useContext(ji);return e||ut(!1),e}function hv(n){let e=nI(),t=e.matches[e.matches.length-1];return t.route.id||ut(!1),t.route.id}function rI(){var n;let e=Q.useContext(ov),t=tI(),i=hv();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function iI(){let{router:n}=eI(uv.UseNavigateStable),e=hv(cv.UseNavigateStable),t=Q.useRef(!1);return av(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ol({fromRouteId:e},l)))},[n,e])}const hy={};function sI(n,e,t){hy[n]||(hy[n]=!0)}function oI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Cn(n){let{to:e,replace:t,state:i,relative:o}=n;$o()||ut(!1);let{future:l,static:h}=Q.useContext(Fi),{matches:f}=Q.useContext(ji),{pathname:m}=_l(),y=vl(),v=Wf(e,qf(f,l.v7_relativeSplatPath),m,o==="path"),T=JSON.stringify(v);return Q.useEffect(()=>y(JSON.parse(T),{replace:t,state:i,relative:o}),[y,T,o,t,i]),null}function Es(n){ut(!1)}function aI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ti.Pop,navigator:l,static:h=!1,future:f}=n;$o()&&ut(!1);let m=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:m,navigator:l,static:h,future:ol({v7_relativeSplatPath:!1},f)}),[m,f,l,h]);typeof i=="string"&&(i=Bo(i));let{pathname:v="/",search:T="",hash:I="",state:b=null,key:j="default"}=i,B=Q.useMemo(()=>{let L=$f(v,m);return L==null?null:{location:{pathname:L,search:T,hash:I,state:b,key:j},navigationType:o}},[m,v,T,I,b,j,o]);return B==null?null:Q.createElement(Fi.Provider,{value:y},Q.createElement(Mc.Provider,{children:t,value:B}))}function lI(n){let{children:e,location:t}=n;return GT(uf(e),t)}new Promise(()=>{});function uf(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,uf(i.props.children,l));return}i.type!==Es&&ut(!1),!i.props.index||!i.props.children||ut(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=uf(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cf.apply(this,arguments)}function uI(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function cI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hI(n,e){return n.button===0&&(!e||e==="_self")&&!cI(n)}const dI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fI="6";try{window.__reactRouterVersion=fI}catch{}const pI="startTransition",dy=cT[pI];function mI(n){let{basename:e,children:t,future:i,window:o}=n,l=Q.useRef();l.current==null&&(l.current=yT({window:o,v5Compat:!0}));let h=l.current,[f,m]=Q.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},v=Q.useCallback(T=>{y&&dy?dy(()=>m(T)):m(T)},[m,y]);return Q.useLayoutEffect(()=>h.listen(v),[h,v]),Q.useEffect(()=>oI(i),[i]),Q.createElement(aI,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const gI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_I=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:m,to:y,preventScrollReset:v,viewTransition:T}=e,I=uI(e,dI),{basename:b}=Q.useContext(Fi),j,B=!1;if(typeof y=="string"&&yI.test(y)&&(j=y,gI))try{let ee=new URL(window.location.href),ue=y.startsWith("//")?new URL(ee.protocol+y):new URL(y),Re=$f(ue.pathname,b);ue.origin===ee.origin&&Re!=null?y=Re+ue.search+ue.hash:B=!0}catch{}let L=WT(y,{relative:o}),ie=vI(y,{replace:h,state:f,target:m,preventScrollReset:v,relative:o,viewTransition:T});function se(ee){i&&i(ee),ee.defaultPrevented||ie(ee)}return Q.createElement("a",cf({},I,{href:j||L,onClick:B||l?i:se,ref:t,target:m}))});var fy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fy||(fy={}));var py;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(py||(py={}));function vI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,m=vl(),y=_l(),v=lv(n,{relative:h});return Q.useCallback(T=>{if(hI(T,t)){T.preventDefault();let I=i!==void 0?i:fc(y)===fc(v);m(n,{replace:I,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,m,v,i,o,t,n,l,h,f])}const dv=Q.createContext(null);function EI({children:n}){const[e,t]=Q.useState([]),i=Q.useCallback((l,h)=>{const f=Date.now()+Math.floor(Math.random()*1e3);t(m=>[...m,{id:f,type:l,message:h}]),window.setTimeout(()=>{t(m=>m.filter(y=>y.id!==f))},3200)},[]),o=Q.useMemo(()=>({showSuccess:l=>i("success",l),showError:l=>i("error",l)}),[i]);return k.jsxs(dv.Provider,{value:o,children:[n,k.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(l=>k.jsx("div",{className:`toast toast-${l.type}`,children:l.message},l.id))})]})}function Uc(){const n=Q.useContext(dv);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const wI=()=>{};var my={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},TI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,m=o+2<n.length,y=m?n[o+2]:0,v=l>>2,T=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,b=y&63;m||(b=64,h||(I=64)),i.push(t[v],t[T],t[I],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new II;const I=l<<2|f>>4;if(i.push(I),y!==64){const b=f<<4&240|y>>2;if(i.push(b),T!==64){const j=y<<6&192|T;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class II extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SI=function(n){const e=fv(n);return pv.encodeByteArray(e,!0)},pc=function(n){return SI(n).replace(/\./g,"")},mv=function(n){try{return pv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=()=>AI().__FIREBASE_DEFAULTS__,CI=()=>{if(typeof process>"u"||typeof my>"u")return;const n=my.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mv(n[1]);return e&&JSON.parse(e)},Fc=()=>{try{return wI()||RI()||CI()||PI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gv=n=>{var e,t;return(t=(e=Fc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Gf=n=>{const e=gv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yv=()=>{var n;return(n=Fc())===null||n===void 0?void 0:n.config},_v=n=>{var e;return(e=Fc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jc(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pc(JSON.stringify(t)),pc(JSON.stringify(h)),""].join(".")}const Za={};function NI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?n.emulator.push(e):n.prod.push(e);return n}function xI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let gy=!1;function zc(n,e){if(typeof window>"u"||typeof document>"u"||!zi(window.location.host)||Za[n]===e||Za[n]||gy)return;Za[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=NI().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,b){I.setAttribute("width","24"),I.setAttribute("id",b),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{gy=!0,h()},I}function v(I,b){I.setAttribute("id",b),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=xI(i),b=t("text"),j=document.getElementById(b)||document.createElement("span"),B=t("learnmore"),L=document.getElementById(B)||document.createElement("a"),ie=t("preprendIcon"),se=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ee=I.element;f(ee),v(L,B);const ue=y();m(se,ie),ee.append(se,j,L,ue),document.body.appendChild(ee)}l?(j.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function OI(){var n;const e=(n=Fc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const n=Bt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UI(){return!OI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FI(){try{return typeof indexedDB=="object"}catch{return!1}}function jI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="FirebaseError";class Qn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=zI,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?BI(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Qn(o,f,i)}}function BI(n,e){return n.replace($I,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const $I=/\{\$([^}]+)}/g;function qI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function As(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(yy(l)&&yy(h)){if(!As(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function yy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function WI(n,e){const t=new HI(n,e);return t.subscribe.bind(t)}class HI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");GI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Kd),o.error===void 0&&(o.error=Kd),o.complete===void 0&&(o.complete=Kd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n){return n&&n._delegate?n._delegate:n}class Br{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XI(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QI(n){return n===ws?void 0:n}function XI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ne||(Ne={}));const YI={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},ZI=Ne.INFO,eS={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},tS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=eS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=ZI,this._logHandler=tS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const nS=(n,e)=>e.some(t=>n instanceof t);let _y,vy;function rS(){return _y||(_y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iS(){return vy||(vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,hf=new WeakMap,wv=new WeakMap,Qd=new WeakMap,Qf=new WeakMap;function sS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Ri(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Ev.set(t,n)}).catch(()=>{}),Qf.set(e,n),e}function oS(n){if(hf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});hf.set(n,e)}let df={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aS(n){df=n(df)}function lS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Xd(this),e,...t);return wv.set(i,e.sort?e.sort():[e]),Ri(i)}:iS().includes(n)?function(...e){return n.apply(Xd(this),e),Ri(Ev.get(this))}:function(...e){return Ri(n.apply(Xd(this),e))}}function uS(n){return typeof n=="function"?lS(n):(n instanceof IDBTransaction&&oS(n),nS(n,rS())?new Proxy(n,df):n)}function Ri(n){if(n instanceof IDBRequest)return sS(n);if(Qd.has(n))return Qd.get(n);const e=uS(n);return e!==n&&(Qd.set(n,e),Qf.set(e,n)),e}const Xd=n=>Qf.get(n);function cS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Ri(h);return i&&h.addEventListener("upgradeneeded",m=>{i(Ri(h.result),m.oldVersion,m.newVersion,Ri(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const hS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],Jd=new Map;function Ey(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=dS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||hS.includes(t)))return;const l=async function(h,...f){const m=this.transaction(h,o?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&m.done]))[0]};return Jd.set(e,l),l}aS(n=>({...n,get:(e,t,i)=>Ey(e,t)||n.get(e,t,i),has:(e,t)=>!!Ey(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function pS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",wy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Kf("@firebase/app"),mS="@firebase/app-compat",gS="@firebase/analytics-compat",yS="@firebase/analytics",_S="@firebase/app-check-compat",vS="@firebase/app-check",ES="@firebase/auth",wS="@firebase/auth-compat",TS="@firebase/database",IS="@firebase/data-connect",SS="@firebase/database-compat",AS="@firebase/functions",RS="@firebase/functions-compat",CS="@firebase/installations",PS="@firebase/installations-compat",kS="@firebase/messaging",NS="@firebase/messaging-compat",xS="@firebase/performance",DS="@firebase/performance-compat",OS="@firebase/remote-config",VS="@firebase/remote-config-compat",bS="@firebase/storage",LS="@firebase/storage-compat",MS="@firebase/firestore",US="@firebase/ai",FS="@firebase/firestore-compat",jS="firebase",zS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",BS={[ff]:"fire-core",[mS]:"fire-core-compat",[yS]:"fire-analytics",[gS]:"fire-analytics-compat",[vS]:"fire-app-check",[_S]:"fire-app-check-compat",[ES]:"fire-auth",[wS]:"fire-auth-compat",[TS]:"fire-rtdb",[IS]:"fire-data-connect",[SS]:"fire-rtdb-compat",[AS]:"fire-fn",[RS]:"fire-fn-compat",[CS]:"fire-iid",[PS]:"fire-iid-compat",[kS]:"fire-fcm",[NS]:"fire-fcm-compat",[xS]:"fire-perf",[DS]:"fire-perf-compat",[OS]:"fire-rc",[VS]:"fire-rc-compat",[bS]:"fire-gcs",[LS]:"fire-gcs-compat",[MS]:"fire-fst",[FS]:"fire-fst-compat",[US]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,$S=new Map,mf=new Map;function Ty(n,e){try{n.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xi(n){const e=n.name;if(mf.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,n);for(const t of mc.values())Ty(t,n);for(const t of $S.values())Ty(t,n);return!0}function Tl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new El("app","Firebase",qS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=zS;function Tv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:pf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ci.create("bad-app-name",{appName:String(o)});if(t||(t=yv()),!t)throw Ci.create("no-options");const l=mc.get(o);if(l){if(As(t,l.options)&&As(i,l.config))return l;throw Ci.create("duplicate-app",{appName:o})}const h=new JI(o);for(const m of mf.values())h.addComponent(m);const f=new WS(t,i,h);return mc.set(o,f),f}function Bc(n=pf){const e=mc.get(n);if(!e&&n===pf&&yv())return Tv();if(!e)throw Ci.create("no-app",{appName:n});return e}function Pn(n,e,t){var i;let o=(i=BS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(f.join(" "));return}xi(new Br(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebase-heartbeat-database",GS=1,al="firebase-heartbeat-store";let Yd=null;function Iv(){return Yd||(Yd=cS(HS,GS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ci.create("idb-open",{originalErrorMessage:n.message})})),Yd}async function KS(n){try{const t=(await Iv()).transaction(al),i=await t.objectStore(al).get(Sv(n));return await t.done,i}catch(e){if(e instanceof Qn)$r.warn(e.message);else{const t=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(t.message)}}}async function Iy(n,e){try{const i=(await Iv()).transaction(al,"readwrite");await i.objectStore(al).put(e,Sv(n)),await i.done}catch(t){if(t instanceof Qn)$r.warn(t.message);else{const i=Ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$r.warn(i.message)}}}function Sv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=1024,XS=30;class JS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Sy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>XS){const h=eA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sy(),{heartbeatsToSend:i,unsentEntries:o}=YS(this._heartbeatsCache.heartbeats),l=pc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $r.warn(t),""}}}function Sy(){return new Date().toISOString().substring(0,10)}function YS(n,e=QS){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ay(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ay(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class ZS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FI()?jI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ay(n){return pc(JSON.stringify({version:2,heartbeats:n})).length}function eA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n){xi(new Br("platform-logger",e=>new fS(e),"PRIVATE")),xi(new Br("heartbeat",e=>new JS(e),"PRIVATE")),Pn(ff,wy,n),Pn(ff,wy,"esm2017"),Pn("fire-js","")}tA("");var nA="firebase",rA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(nA,rA,"app");function Xf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function Av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iA=Av,Rv=new El("auth","Firebase",Av());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Kf("@firebase/auth");function sA(n,...e){gc.logLevel<=Ne.WARN&&gc.warn(`Auth (${ks}): ${n}`,...e)}function rc(n,...e){gc.logLevel<=Ne.ERROR&&gc.error(`Auth (${ks}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,...e){throw Yf(n,...e)}function Hn(n,...e){return Yf(n,...e)}function Jf(n,e,t){const i=Object.assign(Object.assign({},iA()),{[e]:t});return new El("auth","Firebase",i).create(e,{appName:n.name})}function Pi(n){return Jf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cv(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&pr(n,"argument-error"),Jf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Rv.create(n,...e)}function Ee(n,e,...t){if(!n)throw Yf(e,...t)}function Fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rc(e),new Error(e)}function qr(n,e){n||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oA(){return Ry()==="http:"||Ry()==="https:"}function Ry(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oA()||bI()||"connection"in navigator)?navigator.onLine:!0}function lA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.shortDelay=e,this.longDelay=t,qr(t>e,"Short delay should be less than long delay!"),this.isMobile=DI()||LI()}get(){return aA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e){qr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hA=new Il(3e4,6e4);function ep(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qo(n,e,t,i,o={}){return kv(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=wl(Object.assign({key:n.config.apiKey},h)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:m},l);return VI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&zi(n.emulatorConfig.host)&&(y.credentials="include"),Pv.fetch()(await Nv(n,n.config.apiHost,t,f),y)})}async function kv(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},uA),e);try{const o=new fA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Qu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qu(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Qu(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw Qu(n,"user-disabled",h);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Jf(n,v,y);pr(n,v)}}catch(o){if(o instanceof Qn)throw o;pr(n,"network-request-failed",{message:String(o)})}}async function dA(n,e,t,i,o={}){const l=await qo(n,e,t,i,o);return"mfaPendingCredential"in l&&pr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Nv(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?Zf(n.config,o):`${n.config.apiScheme}://${o}`;return cA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class fA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),hA.get())})}}function Qu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Hn(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(n,e){return qo(n,"POST","/v1/accounts:delete",e)}async function yc(n,e){return qo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mA(n,e=!1){const t=ct(n),i=await t.getIdToken(e),o=tp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:el(Zd(o.auth_time)),issuedAtTime:el(Zd(o.iat)),expirationTime:el(Zd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Zd(n){return Number(n)*1e3}function tp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=mv(t);return o?JSON.parse(o):(rc("Failed to decode base64 JWT payload"),null)}catch(o){return rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Cy(n){const e=tp(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Qn&&gA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function gA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n){var e;const t=n.auth,i=await n.getIdToken(),o=await ll(n,yc(t,{idToken:i}));Ee(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?xv(l.providerUserInfo):[],f=vA(n.providerData,h),m=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new yf(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function _A(n){const e=ct(n);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function xv(n){return n.map(e=>{var{providerId:t}=e,i=Xf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(n,e){const t=await kv(n,{},async()=>{const i=wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await Nv(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&zi(n.emulatorConfig.host)&&(m.credentials="include"),Pv.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wA(n,e){return qo(n,"POST","/v2/accounts:revokeToken",ep(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Cy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await EA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new No;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new yf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mA(this,e)}reload(){return _A(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await _c(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await ll(this,pA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,m,y,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,j=(h=t.photoURL)!==null&&h!==void 0?h:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,L=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ie=(y=t.createdAt)!==null&&y!==void 0?y:void 0,se=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ee,emailVerified:ue,isAnonymous:Re,providerData:we,stsTokenManager:x}=t;Ee(ee&&x,e,"internal-error");const S=No.fromJSON(this.name,x);Ee(typeof ee=="string",e,"internal-error"),_i(T,e.name),_i(I,e.name),Ee(typeof ue=="boolean",e,"internal-error"),Ee(typeof Re=="boolean",e,"internal-error"),_i(b,e.name),_i(j,e.name),_i(B,e.name),_i(L,e.name),_i(ie,e.name),_i(se,e.name);const C=new qn({uid:ee,auth:e,email:I,emailVerified:ue,displayName:T,isAnonymous:Re,photoURL:j,phoneNumber:b,tenantId:B,stsTokenManager:S,createdAt:ie,lastLoginAt:se});return we&&Array.isArray(we)&&(C.providerData=we.map(N=>Object.assign({},N))),L&&(C._redirectEventId=L),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await _c(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?xv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new No;f.updateFromIdToken(i);const m=new qn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new yf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;function jr(n){qr(n instanceof Function,"Expected a class definition");let e=Py.get(n);return e?(qr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Py.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Dv.type="NONE";const ky=Dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ic(this.userKey,o.apiKey,l),this.fullPersistenceKey=ic("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yc(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(jr(ky),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||jr(ky);const h=ic(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let T;if(typeof v=="string"){const I=await yc(e,{idToken:v}).catch(()=>{});if(!I)break;T=await qn._fromGetAccountInfoResponse(e,I,v)}else T=qn._fromJSON(e,v);y!==l&&(f=T),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new xo(l,e,i):(l=m[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new xo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ov(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uv(e))return"Blackberry";if(Fv(e))return"Webos";if(Vv(e))return"Safari";if((e.includes("chrome/")||bv(e))&&!e.includes("edge/"))return"Chrome";if(Mv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ov(n=Bt()){return/firefox\//i.test(n)}function Vv(n=Bt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bv(n=Bt()){return/crios\//i.test(n)}function Lv(n=Bt()){return/iemobile/i.test(n)}function Mv(n=Bt()){return/android/i.test(n)}function Uv(n=Bt()){return/blackberry/i.test(n)}function Fv(n=Bt()){return/webos/i.test(n)}function np(n=Bt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function TA(n=Bt()){var e;return np(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IA(){return MI()&&document.documentMode===10}function jv(n=Bt()){return np(n)||Mv(n)||Fv(n)||Uv(n)||/windows phone/i.test(n)||Lv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n,e=[]){let t;switch(n){case"Browser":t=Ny(Bt());break;case"Worker":t=`${Ny(Bt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ks}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const m=e(l);h(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(n,e={}){return qo(n,"GET","/v2/passwordPolicy",ep(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=6;class CA{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:RA,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new SA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yc(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(Pi(this));const t=e?ct(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AA(this),t=new CA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await wA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&sA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wo(n){return ct(n)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=WI(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kA(n){rp=n}function NA(n){return rp.loadJS(n)}function xA(){return rp.gapiScript}function DA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n,e){const t=Tl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(As(l,e??{}))return o;pr(o,"already-initialized")}return t.initialize({options:e})}function VA(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(jr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bA(n,e,t){const i=Wo(n);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Bv(e),{host:h,port:f}=LA(e),m=f===null?"":`:${f}`,y={url:`${l}//${h}${m}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(As(y,i.config.emulator)&&As(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,zi(h)?(jc(`${l}//${h}${m}`),zc("Auth",!0)):MA()}function Bv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LA(n){const e=Bv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Dy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Dy(h)}}}function Dy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(n,e){return dA(n,"POST","/v1/accounts:signInWithIdp",ep(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="http://localhost";class Rs extends $v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Xf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Rs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Do(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Do(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends $c{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Sl{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Sl{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Sl{constructor(){super("twitter.com")}static credential(e,t){return Rs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wi.credential(t,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),h=Oy(i);return new bo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Oy(i);return new bo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Oy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Qn{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new vc(e,t,i,o)}}function qv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(n,l,e,i):l})}async function FA(n,e,t=!1){const i=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(n,e,t=!1){const{auth:i}=n;if(nn(i.app))return Promise.reject(Pi(i));const o="reauthenticate";try{const l=await ll(n,qv(i,o,e,n),t);Ee(l.idToken,i,"internal-error");const h=tp(l.idToken);Ee(h,i,"internal-error");const{sub:f}=h;return Ee(n.uid===f,i,"user-mismatch"),bo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(n,e,t=!1){if(nn(n.app))return Promise.reject(Pi(n));const i="signIn",o=await qv(n,i,e),l=await bo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n,e){return ct(n).setPersistence(e)}function Wv(n,e,t,i){return ct(n).onIdTokenChanged(e,t,i)}function $A(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function qc(n){return ct(n).signOut()}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,WA=10;class Gv extends Hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);IA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gv.type="LOCAL";const Kv=Gv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qv.type="SESSION";const Xv=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Wc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),m=await HA(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,m)=>{const y=ip("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function KA(n){ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function QA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JA(){return Jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="firebaseLocalStorageDb",YA=1,wc="firebaseLocalStorage",Zv="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hc(n,e){return n.transaction([wc],e?"readwrite":"readonly").objectStore(wc)}function ZA(){const n=indexedDB.deleteDatabase(Yv);return new Al(n).toPromise()}function _f(){const n=indexedDB.open(Yv,YA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(wc,{keyPath:Zv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(wc)?e(i):(i.close(),await ZA(),e(await _f()))})})}async function Vy(n,e,t){const i=Hc(n,!0).put({[Zv]:e,value:t});return new Al(i).toPromise()}async function e1(n,e){const t=Hc(n,!1).get(e),i=await new Al(t).toPromise();return i===void 0?null:i.value}function by(n,e){const t=Hc(n,!0).delete(e);return new Al(t).toPromise()}const t1=800,n1=3;class eE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>n1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QA(),!this.activeServiceWorker)return;this.sender=new GA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await Vy(e,Ec,"1"),await by(e,Ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>e1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>by(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Hc(o,!1).getAll();return new Al(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eE.type="LOCAL";const r1=eE;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){return e?jr(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends $v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i1(n){return zA(n.auth,new op(n),n.bypassAuthState)}function s1(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),jA(t,new op(n),n.bypassAuthState)}async function o1(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),FA(t,new op(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i1;case"linkViaPopup":case"linkViaRedirect":return o1;case"reauthViaPopup":case"reauthViaRedirect":return s1;default:pr(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Il(2e3,1e4);async function l1(n,e,t){if(nn(n.app))return Promise.reject(Hn(n,"operation-not-supported-in-this-environment"));const i=Wo(n);Cv(n,e,$c);const o=sp(i,t);return new Ts(i,"signInViaPopup",e,o).executeNotNull()}class Ts extends tE{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a1.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="pendingRedirect",sc=new Map;class c1 extends tE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sc.get(this.auth._key());if(!e){try{const i=await h1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sc.set(this.auth._key(),e)}return this.bypassAuthState||sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h1(n,e){const t=rE(e),i=nE(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function d1(n,e){return nE(n)._set(rE(e),"true")}function f1(n,e){sc.set(n._key(),e)}function nE(n){return jr(n._redirectPersistence)}function rE(n){return ic(u1,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n,e,t){return m1(n,e,t)}async function m1(n,e,t){if(nn(n.app))return Promise.reject(Pi(n));const i=Wo(n);Cv(n,e,$c),await i._initializationPromise;const o=sp(i,t);return await d1(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function g1(n,e){return await Wo(n)._initializationPromise,iE(n,e,!1)}async function iE(n,e,t=!1){if(nn(n.app))return Promise.reject(Pi(n));const i=Wo(n),o=sp(i,e),h=await new c1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=600*1e3;class _1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sE(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Hn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ly(e))}saveEventToCache(e){this.cachedEventUids.add(Ly(e)),this.lastProcessedEventTime=Date.now()}}function Ly(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(n,e={}){return qo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T1=/^https?/;async function I1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await E1(n);for(const t of e)try{if(S1(t))return}catch{}pr(n,"unauthorized-domain")}function S1(n){const e=gf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!T1.test(t))return!1;if(w1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new Il(3e4,6e4);function My(){const n=ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R1(n){return new Promise((e,t)=>{var i,o,l;function h(){My(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{My(),t(Hn(n,"network-request-failed"))},timeout:A1.get()})}if(!((o=(i=ur().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)h();else{const f=DA("iframefcb");return ur()[f]=()=>{gapi.load?h():t(Hn(n,"network-request-failed"))},NA(`${xA()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw oc=null,e})}let oc=null;function C1(n){return oc=oc||R1(n),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new Il(5e3,15e3),k1="__/auth/iframe",N1="emulator/auth/iframe",x1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O1(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zf(e,N1):`https://${n.config.authDomain}/${k1}`,i={apiKey:e.apiKey,appName:n.name,v:ks},o=D1.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${wl(i).slice(1)}`}async function V1(n){const e=await C1(n),t=ur().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:O1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Hn(n,"network-request-failed"),f=ur().setTimeout(()=>{l(h)},P1.get());function m(){ur().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L1=500,M1=600,U1="_blank",F1="http://localhost";class Uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j1(n,e,t,i=L1,o=M1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},b1),{width:i.toString(),height:o.toString(),top:l,left:h}),y=Bt().toLowerCase();t&&(f=bv(y)?U1:t),Ov(y)&&(e=e||F1,m.scrollbars="yes");const v=Object.entries(m).reduce((I,[b,j])=>`${I}${b}=${j},`,"");if(TA(y)&&f!=="_self")return z1(e||"",f),new Uy(null);const T=window.open(e||"",f,v);Ee(T,n,"popup-blocked");try{T.focus()}catch{}return new Uy(T)}function z1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__/auth/handler",$1="emulator/auth/handler",q1=encodeURIComponent("fac");async function Fy(n,e,t,i,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ks,eventId:o};if(e instanceof $c){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",qI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Sl){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),y=m?`#${q1}=${encodeURIComponent(m)}`:"";return`${W1(n)}?${wl(f).slice(1)}${y}`}function W1({config:n}){return n.emulator?Zf(n,$1):`https://${n.authDomain}/${B1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="webStorageSupport";class H1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xv,this._completeRedirectFn=iE,this._overrideRedirectResult=f1}async _openPopup(e,t,i,o){var l;qr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Fy(e,t,i,gf(),o);return j1(e,h,ip())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Fy(e,t,i,gf(),o);return KA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(qr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await V1(e),i=new _1(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ef,{type:ef},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[ef];h!==void 0&&t(!!h),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jv()||Vv()||np()}}const G1=H1;var jy="@firebase/auth",zy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X1(n){xi(new Br("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zv(n)},y=new PA(i,o,l,m);return VA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xi(new Br("auth-internal",e=>{const t=Wo(e.getProvider("auth").getImmediate());return(i=>new K1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(jy,zy,Q1(n)),Pn(jy,zy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=300,Y1=_v("authIdTokenMaxAge")||J1;let By=null;const Z1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Y1)return;const o=t==null?void 0:t.token;By!==o&&(By=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eR(n=Bc()){const e=Tl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OA(n,{popupRedirectResolver:G1,persistence:[r1,Kv,Xv]}),i=_v("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=Z1(l.toString());$A(t,h,()=>h(t.currentUser)),Wv(t,f=>h(f))}}const o=gv("auth");return o&&bA(t,`http://${o}`),t}function tR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}kA({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Hn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",tR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X1("Browser");var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,oE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.D=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(N,V,M){for(var R=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)R[Ge-2]=arguments[Ge];return S.prototype[V].apply(N,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,C){C||(C=0);var N=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)N[V]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(V=0;16>V;++V)N[V]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],V=x.g[2];var M=x.g[3],R=S+(M^C&(V^M))+N[0]+3614090360&4294967295;S=C+(R<<7&4294967295|R>>>25),R=M+(V^S&(C^V))+N[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(C^M&(S^C))+N[2]+606105819&4294967295,V=M+(R<<17&4294967295|R>>>15),R=C+(S^V&(M^S))+N[3]+3250441966&4294967295,C=V+(R<<22&4294967295|R>>>10),R=S+(M^C&(V^M))+N[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(V^S&(C^V))+N[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(C^M&(S^C))+N[6]+2821735955&4294967295,V=M+(R<<17&4294967295|R>>>15),R=C+(S^V&(M^S))+N[7]+4249261313&4294967295,C=V+(R<<22&4294967295|R>>>10),R=S+(M^C&(V^M))+N[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(V^S&(C^V))+N[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(C^M&(S^C))+N[10]+4294925233&4294967295,V=M+(R<<17&4294967295|R>>>15),R=C+(S^V&(M^S))+N[11]+2304563134&4294967295,C=V+(R<<22&4294967295|R>>>10),R=S+(M^C&(V^M))+N[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=M+(V^S&(C^V))+N[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(C^M&(S^C))+N[14]+2792965006&4294967295,V=M+(R<<17&4294967295|R>>>15),R=C+(S^V&(M^S))+N[15]+1236535329&4294967295,C=V+(R<<22&4294967295|R>>>10),R=S+(V^M&(C^V))+N[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^V&(S^C))+N[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^C&(M^S))+N[11]+643717713&4294967295,V=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(V^M))+N[0]+3921069994&4294967295,C=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(C^V))+N[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^V&(S^C))+N[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^C&(M^S))+N[15]+3634488961&4294967295,V=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(V^M))+N[4]+3889429448&4294967295,C=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(C^V))+N[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^V&(S^C))+N[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^C&(M^S))+N[3]+4107603335&4294967295,V=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(V^M))+N[8]+1163531501&4294967295,C=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(C^V))+N[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=M+(C^V&(S^C))+N[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^C&(M^S))+N[7]+1735328473&4294967295,V=M+(R<<14&4294967295|R>>>18),R=C+(M^S&(V^M))+N[12]+2368359562&4294967295,C=V+(R<<20&4294967295|R>>>12),R=S+(C^V^M)+N[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^V)+N[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^C)+N[11]+1839030562&4294967295,V=M+(R<<16&4294967295|R>>>16),R=C+(V^M^S)+N[14]+4259657740&4294967295,C=V+(R<<23&4294967295|R>>>9),R=S+(C^V^M)+N[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^V)+N[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^C)+N[7]+4139469664&4294967295,V=M+(R<<16&4294967295|R>>>16),R=C+(V^M^S)+N[10]+3200236656&4294967295,C=V+(R<<23&4294967295|R>>>9),R=S+(C^V^M)+N[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^V)+N[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^C)+N[3]+3572445317&4294967295,V=M+(R<<16&4294967295|R>>>16),R=C+(V^M^S)+N[6]+76029189&4294967295,C=V+(R<<23&4294967295|R>>>9),R=S+(C^V^M)+N[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=M+(S^C^V)+N[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^C)+N[15]+530742520&4294967295,V=M+(R<<16&4294967295|R>>>16),R=C+(V^M^S)+N[2]+3299628645&4294967295,C=V+(R<<23&4294967295|R>>>9),R=S+(V^(C|~M))+N[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~V))+N[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~C))+N[14]+2878612391&4294967295,V=M+(R<<15&4294967295|R>>>17),R=C+(M^(V|~S))+N[5]+4237533241&4294967295,C=V+(R<<21&4294967295|R>>>11),R=S+(V^(C|~M))+N[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~V))+N[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~C))+N[10]+4293915773&4294967295,V=M+(R<<15&4294967295|R>>>17),R=C+(M^(V|~S))+N[1]+2240044497&4294967295,C=V+(R<<21&4294967295|R>>>11),R=S+(V^(C|~M))+N[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~V))+N[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~C))+N[6]+2734768916&4294967295,V=M+(R<<15&4294967295|R>>>17),R=C+(M^(V|~S))+N[13]+1309151649&4294967295,C=V+(R<<21&4294967295|R>>>11),R=S+(V^(C|~M))+N[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=M+(C^(S|~V))+N[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~C))+N[2]+718787259&4294967295,V=M+(R<<15&4294967295|R>>>17),R=C+(M^(V|~S))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+M&4294967295}i.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var C=S-this.blockSize,N=this.B,V=this.h,M=0;M<S;){if(V==0)for(;M<=C;)o(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<S;)if(N[V++]=x.charCodeAt(M++),V==this.blockSize){o(this,N),V=0;break}}else for(;M<S;)if(N[V++]=x[M++],V==this.blockSize){o(this,N),V=0;break}}this.h=V,this.o+=S},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var C=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=C&255,C/=256;for(this.u(x),x=Array(16),S=C=0;4>S;++S)for(var N=0;32>N;N+=8)x[C++]=this.g[S]>>>N&255;return x};function l(x,S){var C=f;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function h(x,S){this.h=S;for(var C=[],N=!0,V=x.length-1;0<=V;V--){var M=x[V]|0;N&&M==S||(C[V]=M,N=!1)}this.g=C}var f={};function m(x){return-128<=x&&128>x?l(x,function(S){return new h([S|0],0>S?-1:0)}):new h([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return L(y(-x));for(var S=[],C=1,N=0;x>=C;N++)S[N]=x/C|0,C*=4294967296;return new h(S,0)}function v(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return L(v(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),N=T,V=0;V<x.length;V+=8){var M=Math.min(8,x.length-V),R=parseInt(x.substring(V,V+M),S);8>M?(M=y(Math.pow(S,M)),N=N.j(M).add(y(R))):(N=N.j(C),N=N.add(y(R)))}return N}var T=m(0),I=m(1),b=m(16777216);n=h.prototype,n.m=function(){if(B(this))return-L(this).m();for(var x=0,S=1,C=0;C<this.g.length;C++){var N=this.i(C);x+=(0<=N?N:4294967296+N)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if(B(this))return"-"+L(this).toString(x);for(var S=y(Math.pow(x,6)),C=this,N="";;){var V=ue(C,S).g;C=ie(C,V.j(S));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=V,j(C))return M+N;for(;6>M.length;)M="0"+M;N=M+N}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function B(x){return x.h==-1}n.l=function(x){return x=ie(this,x),B(x)?-1:j(x)?0:1};function L(x){for(var S=x.g.length,C=[],N=0;N<S;N++)C[N]=~x.g[N];return new h(C,~x.h).add(I)}n.abs=function(){return B(this)?L(this):this},n.add=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],N=0,V=0;V<=S;V++){var M=N+(this.i(V)&65535)+(x.i(V)&65535),R=(M>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);N=R>>>16,M&=65535,R&=65535,C[V]=R<<16|M}return new h(C,C[C.length-1]&-2147483648?-1:0)};function ie(x,S){return x.add(L(S))}n.j=function(x){if(j(this)||j(x))return T;if(B(this))return B(x)?L(this).j(L(x)):L(L(this).j(x));if(B(x))return L(this.j(L(x)));if(0>this.l(b)&&0>x.l(b))return y(this.m()*x.m());for(var S=this.g.length+x.g.length,C=[],N=0;N<2*S;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(var V=0;V<x.g.length;V++){var M=this.i(N)>>>16,R=this.i(N)&65535,Ge=x.i(V)>>>16,it=x.i(V)&65535;C[2*N+2*V]+=R*it,se(C,2*N+2*V),C[2*N+2*V+1]+=M*it,se(C,2*N+2*V+1),C[2*N+2*V+1]+=R*Ge,se(C,2*N+2*V+1),C[2*N+2*V+2]+=M*Ge,se(C,2*N+2*V+2)}for(N=0;N<S;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=S;N<2*S;N++)C[N]=0;return new h(C,0)};function se(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function ee(x,S){this.g=x,this.h=S}function ue(x,S){if(j(S))throw Error("division by zero");if(j(x))return new ee(T,T);if(B(x))return S=ue(L(x),S),new ee(L(S.g),L(S.h));if(B(S))return S=ue(x,L(S)),new ee(L(S.g),S.h);if(30<x.g.length){if(B(x)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var C=I,N=S;0>=N.l(x);)C=Re(C),N=Re(N);var V=we(C,1),M=we(N,1);for(N=we(N,2),C=we(C,2);!j(N);){var R=M.add(N);0>=R.l(x)&&(V=V.add(C),M=R),N=we(N,1),C=we(C,1)}return S=ie(x,V.j(S)),new ee(V,S)}for(V=T;0<=x.l(S);){for(C=Math.max(1,Math.floor(x.m()/S.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),M=y(C),R=M.j(S);B(R)||0<R.l(x);)C-=N,M=y(C),R=M.j(S);j(M)&&(M=I),V=V.add(M),x=ie(x,R)}return new ee(V,x)}n.A=function(x){return ue(this,x).h},n.and=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],N=0;N<S;N++)C[N]=this.i(N)&x.i(N);return new h(C,this.h&x.h)},n.or=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],N=0;N<S;N++)C[N]=this.i(N)|x.i(N);return new h(C,this.h|x.h)},n.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],N=0;N<S;N++)C[N]=this.i(N)^x.i(N);return new h(C,this.h^x.h)};function Re(x){for(var S=x.g.length+1,C=[],N=0;N<S;N++)C[N]=x.i(N)<<1|x.i(N-1)>>>31;return new h(C,x.h)}function we(x,S){var C=S>>5;S%=32;for(var N=x.g.length-C,V=[],M=0;M<N;M++)V[M]=0<S?x.i(M+C)>>>S|x.i(M+C+1)<<32-S:x.i(M+C);return new h(V,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oE=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,ki=h}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aE,Qa,lE,ac,vf,uE,cE,hE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var U=u[w];if(!(U in _))break e;_=_[U]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,w=!1,U={next:function(){if(!w&&_<u.length){var q=_++;return{value:p(q,u[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function T(u,p,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),u.apply(p,U)}}return function(){return u.apply(p,arguments)}}function I(u,p,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function b(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function j(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,U,q){for(var re=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)re[ze-2]=arguments[ze];return p.prototype[U].apply(w,re)}}function B(u){const p=u.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function L(u,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(m(w)){const U=u.length||0,q=w.length||0;u.length=U+q;for(let re=0;re<q;re++)u[U+re]=w[re]}else u.push(w)}}class ie{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function se(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var Re=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function we(u,p,_){for(const w in u)p.call(_,u[w],w,u)}function x(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function S(u){const p={};for(const _ in u)p[_]=u[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,p){let _,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(_ in w)u[_]=w[_];for(let q=0;q<C.length;q++)_=C[q],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function V(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function M(u){f.setTimeout(()=>{throw u},0)}function R(){var u=te;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ge{constructor(){this.h=this.g=null}add(p,_){const w=it.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var it=new ie(()=>new nt,u=>u.reset());class nt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,H=!1,te=new Ge,G=()=>{const u=f.Promise.resolve(void 0);ke=()=>{u.then(O)}};var O=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){M(_)}var p=it;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}H=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u})();function Ie(u,p){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Re){e:{try{ue(p.nodeName);var U=!0;break e}catch{}U=!1}U||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}j(Ie,he);var Oe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(u,p,_,w,U){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=U,this.key=++Fe,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Er(u){this.src=u,this.g={},this.h=0}Er.prototype.add=function(u,p,_,w,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var re=Gr(u,p,w,U);return-1<re?(p=u[re],_||(p.fa=!1)):(p=new $e(p,this.src,q,!!w,U),p.fa=_,u.push(p)),p};function Os(u,p){var _=p.type;if(_ in u.g){var w=u.g[_],U=Array.prototype.indexOf.call(w,p,void 0),q;(q=0<=U)&&Array.prototype.splice.call(w,U,1),q&&(Tt(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Gr(u,p,_,w){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==p&&q.capture==!!_&&q.ha==w)return U}return-1}var Wi="closure_lm_"+(1e6*Math.random()|0),Vs={};function ea(u,p,_,w,U){if(Array.isArray(p)){for(var q=0;q<p.length;q++)ea(u,p[q],_,w,U);return null}return _=ra(_),u&&u[Ue]?u.K(p,_,y(w)?!!w.capture:!1,U):ta(u,p,_,!1,w,U)}function ta(u,p,_,w,U,q){if(!p)throw Error("Invalid event type");var re=y(U)?!!U.capture:!!U,ze=Ls(u);if(ze||(u[Wi]=ze=new Er(u)),_=ze.add(p,_,w,re,q),_.proxy)return _;if(w=Ol(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)Ae||(U=re),U===void 0&&(U=!1),u.addEventListener(p.toString(),w,U);else if(u.attachEvent)u.attachEvent(Tr(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ol(){function u(_){return p.call(u.src,u.listener,_)}const p=na;return u}function bs(u,p,_,w,U){if(Array.isArray(p))for(var q=0;q<p.length;q++)bs(u,p[q],_,w,U);else w=y(w)?!!w.capture:!!w,_=ra(_),u&&u[Ue]?(u=u.i,p=String(p).toString(),p in u.g&&(q=u.g[p],_=Gr(q,_,w,U),-1<_&&(Tt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ls(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Gr(p,_,w,U)),(_=-1<u?p[u]:null)&&wr(_))}function wr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ue])Os(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(Tr(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Ls(p))?(Os(_,u),_.h==0&&(_.src=null,p[Wi]=null)):Tt(u)}}}function Tr(u){return u in Vs?Vs[u]:Vs[u]="on"+u}function na(u,p){if(u.da)u=!0;else{p=new Ie(p,this);var _=u.listener,w=u.ha||u.src;u.fa&&wr(u),u=_.call(w,p)}return u}function Ls(u){return u=u[Wi],u instanceof Er?u:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function ra(u){return typeof u=="function"?u:(u[Ms]||(u[Ms]=function(p){return u.handleEvent(p)}),u[Ms])}function gt(){W.call(this),this.i=new Er(this),this.M=this,this.F=null}j(gt,W),gt.prototype[Ue]=!0,gt.prototype.removeEventListener=function(u,p,_,w){bs(this,u,p,_,w)};function yt(u,p){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new he(p,u);else if(p instanceof he)p.target=p.target||u;else{var U=p;p=new he(w,u),N(p,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var re=p.g=_[q];U=Ir(re,w,!0,p)&&U}if(re=p.g=u,U=Ir(re,w,!0,p)&&U,U=Ir(re,w,!1,p)&&U,_)for(q=0;q<_.length;q++)re=p.g=_[q],U=Ir(re,w,!1,p)&&U}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],w=0;w<_.length;w++)Tt(_[w]);delete u.g[p],u.h--}}this.F=null},gt.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},gt.prototype.L=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function Ir(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,q=0;q<p.length;++q){var re=p[q];if(re&&!re.da&&re.capture==_){var ze=re.listener,_t=re.ha||re.src;re.fa&&Os(u.i,re),U=ze.call(_t,w)!==!1&&U}}return U&&!w.defaultPrevented}function ia(u,p,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Kr(u){u.g=ia(()=>{u.g=null,u.i&&(u.i=!1,Kr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Hi extends W{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(u){W.call(this),this.h=u,this.g={}}j(Gi,W);var sa=[];function oa(u){we(u.g,function(p,_){this.g.hasOwnProperty(_)&&wr(p)},u),u.g={}}Gi.prototype.N=function(){Gi.aa.N.call(this),oa(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var aa=f.JSON.stringify,la=f.JSON.parse,ua=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ki(){}Ki.prototype.h=null;function Us(u){return u.h||(u.h=u.i())}function Fs(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xn(){he.call(this,"d")}j(Xn,he);function js(){he.call(this,"c")}j(js,he);var Jn={},ca=null;function Qi(){return ca=ca||new gt}Jn.La="serverreachability";function ha(u){he.call(this,Jn.La,u)}j(ha,he);function Sr(u){const p=Qi();yt(p,new ha(p))}Jn.STAT_EVENT="statevent";function da(u,p){he.call(this,Jn.STAT_EVENT,u),this.stat=p}j(da,he);function st(u){const p=Qi();yt(p,new da(p,u))}Jn.Ma="timingevent";function zs(u,p){he.call(this,Jn.Ma,u),this.size=p}j(zs,he);function kn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Xi(){this.g=!0}Xi.prototype.xa=function(){this.g=!1};function Ji(u,p,_,w,U,q){u.info(function(){if(u.g)if(q)for(var re="",ze=q.split("&"),_t=0;_t<ze.length;_t++){var Ve=ze[_t].split("=");if(1<Ve.length){var It=Ve[0];Ve=Ve[1];var ht=It.split("_");re=2<=ht.length&&ht[1]=="type"?re+(It+"="+Ve+"&"):re+(It+"=redacted&")}}else re=null;else re=q;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+p+`
`+_+`
`+re})}function Bs(u,p,_,w,U,q,re){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+p+`
`+_+`
`+q+" "+re})}function Nn(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+gh(u,_)+(w?" "+w:"")})}function fa(u,p){u.info(function(){return"TIMEOUT: "+p})}Xi.prototype.info=function(){};function gh(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var re=1;re<U.length;re++)U[re]=""}}}}return aa(_)}catch{return p}}var $s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function Yi(){}j(Yi,Ki),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},xn=new Yi;function Dn(u,p,_,w){this.j=u,this.i=p,this.l=_,this.R=w||1,this.U=new Gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bl}function bl(){this.i=null,this.g="",this.h=!1}var pa={},qs={};function Ws(u,p,_){u.L=1,u.v=Zr(ln(p)),u.m=_,u.P=!0,ma(u,null)}function ma(u,p){u.F=Date.now(),qe(u),u.A=ln(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),ti(_.i,"t",w),u.C=0,_=u.j.J,u.h=new bl,u.g=Zl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Hi(I(u.Y,u,u.g),u.O)),p=u.U,_=u.g,w=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(sa[0]=U.toString()),U=sa);for(var q=0;q<U.length;q++){var re=ea(_,U[q],w||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Sr(),Ji(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Kt(u)==3?p.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const ht=Kt(this.g);var p=this.g.Ba();const vn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||ht!=4||p==7||(p==8||0>=vn?Sr(3):Sr(2)),Zi(this);var _=this.g.Z();this.X=_;t:if(Ll(this)){var w=wa(this.g);u="";var U=w.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Qr(this);var re="";break t}this.h.i=new f.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(q&&p==U-1)});w.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Bs(this.i,this.u,this.A,this.l,this.R,ht,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,_t=this.g;if((ze=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(ze)){var Ve=ze;break t}}Ve=null}if(_=Ve)Nn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ga(this,_);else{this.o=!1,this.s=3,st(12),yn(this),Qr(this);break e}}if(this.P){_=!0;let cn;for(;!this.J&&this.C<re.length;)if(cn=yh(this,re),cn==qs){ht==4&&(this.s=4,st(14),_=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==pa){this.s=4,st(15),Nn(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Nn(this.i,this.l,cn,null),ga(this,cn);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||re.length!=0||this.h.h||(this.s=1,st(16),_=!1),this.o=this.o&&_,!_)Nn(this.i,this.l,re,"[Invalid Chunked Response]"),yn(this),Qr(this);else if(0<re.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Ia(It),It.M=!0,st(11))}}else Nn(this.i,this.l,re,null),ga(this,re);ht==4&&yn(this),this.o&&!this.J&&(ht==4?no(this.j,this):(this.o=!1,qe(this)))}else Js(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),yn(this),Qr(this)}}}catch{}finally{}};function Ll(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function yh(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?qs:(_=Number(p.substring(_,w)),isNaN(_)?pa:(w+=1,w+_>p.length?qs:(p=p.slice(w,w+_),u.C=w+_,p)))}Dn.prototype.cancel=function(){this.J=!0,yn(this)};function qe(u){u.S=Date.now()+u.I,Ml(u,u.I)}function Ml(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kn(I(u.ba,u),p)}function Zi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fa(this.i,this.A),this.L!=2&&(Sr(),st(17)),yn(this),this.s=2,Qr(this)):Ml(this,this.S-u)};function Qr(u){u.j.G==0||u.J||no(u.j,u)}function yn(u){Zi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,oa(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ga(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||$t(_.h,u))){if(!u.K&&$t(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)to(_),Mn(_);else break e;eo(_),st(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=kn(I(_.Za,_),6e3));if(1>=Fl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else kr(_,11)}else if((u.K||_.g==u)&&to(_),!se(p))for(U=_.Da.g.parse(p),p=0;p<U.length;p++){let Ve=U[p];if(_.T=Ve[0],Ve=Ve[1],_.G==2)if(Ve[0]=="c"){_.K=Ve[1],_.ia=Ve[2];const It=Ve[3];It!=null&&(_.la=It,_.j.info("VER="+_.la));const ht=Ve[4];ht!=null&&(_.Aa=ht,_.j.info("SVER="+_.Aa));const vn=Ve[5];vn!=null&&typeof vn=="number"&&0<vn&&(w=1.5*vn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const cn=u.g;if(cn){const os=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var q=w.h;q.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ya(q,q.h),q.h=null))}if(w.D){const io=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(w.ya=io,Be(w.I,w.D,io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var re=u;if(w.qa=Yl(w,w.J?w.ia:null,w.W),re.K){jl(w.h,re);var ze=re,_t=w.L;_t&&(ze.I=_t),ze.B&&(Zi(ze),qe(ze)),w.g=re}else ss(w);0<_.i.length&&tr(_)}else Ve[0]!="stop"&&Ve[0]!="close"||kr(_,7);else _.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?kr(_,7):kt(_):Ve[0]!="noop"&&_.l&&_.l.ta(Ve),_.v=0)}}Sr(4)}catch{}}var Ul=class{constructor(u,p){this.g=u,this.map=p}};function es(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fl(u){return u.h?1:u.g?u.g.size:0}function $t(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ya(u,p){u.g?u.g.add(p):u.h=p}function jl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}es.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return B(u.i)}function Hs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,w=0;w<_;w++)p.push(u[w]);return p}p=[],_=0;for(w in u)p[_++]=u[w];return p}function Gs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const w in u)p[_++]=w;return p}}}function Xr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Gs(u),w=Hs(u),U=w.length,q=0;q<U;q++)p.call(void 0,w[q],_&&_[q],u)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _h(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),U=null;if(0<=w){var q=u[_].substring(0,w);U=u[_].substring(w+1)}else q=u[_];p(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ar(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ar){this.h=u.h,ns(this,u.j),this.o=u.o,this.g=u.g,Jr(this,u.s),this.l=u.l;var p=u.i,_=new Yn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Yr(this,_),this.m=u.m}else u&&(p=String(u).match(ts))?(this.h=!1,ns(this,p[1]||"",!0),this.o=De(p[2]||""),this.g=De(p[3]||"",!0),Jr(this,p[4]),this.l=De(p[5]||"",!0),Yr(this,p[6]||"",!0),this.m=De(p[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}Ar.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ei(p,Ks,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ei(p,Ks,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ei(_,_.charAt(0)=="/"?ql:$l,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ei(_,_a)),u.join("")};function ln(u){return new Ar(u)}function ns(u,p,_){u.j=_?De(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Jr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Yr(u,p,_){p instanceof Yn?(u.i=p,Zn(u.i,u.h)):(_||(p=ei(p,Wl)),u.i=new Yn(p,u.h))}function Be(u,p,_){u.i.set(p,_)}function Zr(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function De(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ei(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Bl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ks=/[#\/\?@]/g,$l=/[#\?:]/g,ql=/[#\?]/g,Wl=/[#\?@]/g,_a=/#/g;function Yn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Pt(u){u.g||(u.g=new Map,u.h=0,u.i&&_h(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Yn.prototype,n.add=function(u,p){Pt(this),this.i=null,u=_n(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function On(u,p){Pt(u),p=_n(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Vn(u,p){return Pt(u),p=_n(u,p),u.g.has(p)}n.forEach=function(u,p){Pt(this),this.g.forEach(function(_,w){_.forEach(function(U){u.call(p,U,w,this)},this)},this)},n.na=function(){Pt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const U=u[w];for(let q=0;q<U.length;q++)_.push(p[w])}return _},n.V=function(u){Pt(this);let p=[];if(typeof u=="string")Vn(this,u)&&(p=p.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},n.set=function(u,p){return Pt(this),this.i=null,u=_n(this,u),Vn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ti(u,p,_){On(u,p),0<_.length&&(u.i=null,u.g.set(_n(u,p),B(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const q=encodeURIComponent(String(w)),re=this.V(w);for(w=0;w<re.length;w++){var U=q;re[w]!==""&&(U+="="+encodeURIComponent(String(re[w]))),u.push(U)}}return this.i=u.join("&")};function _n(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Zn(u,p){p&&!u.j&&(Pt(u),u.i=null,u.g.forEach(function(_,w){var U=w.toLowerCase();w!=U&&(On(this,w),ti(this,U,_))},u)),u.j=p}function vh(u,p){const _=new Xi;if(f.Image){const w=new Image;w.onload=b(Gt,_,"TestLoadImage: loaded",!0,p,w),w.onerror=b(Gt,_,"TestLoadImage: error",!1,p,w),w.onabort=b(Gt,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=b(Gt,_,"TestLoadImage: timeout",!1,p,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function Hl(u,p){const _=new Xi,w=new AbortController,U=setTimeout(()=>{w.abort(),Gt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(q=>{clearTimeout(U),q.ok?Gt(_,"TestPingServer: ok",!0,p):Gt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Gt(_,"TestPingServer: error",!1,p)})}function Gt(u,p,_,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(_)}catch{}}function Eh(){this.g=new ua}function Gl(u,p,_){const w=_||"";try{Xr(u,function(U,q){let re=U;y(U)&&(re=aa(U)),p.push(w+q+"="+encodeURIComponent(re))})}catch(U){throw p.push(w+"type="+encodeURIComponent("_badmap")),U}}function Rr(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Rr,Ki),Rr.prototype.g=function(){return new rs(this.l,this.j)},Rr.prototype.i=(function(u){return function(){return u}})({});function rs(u,p){gt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(rs,gt),n=rs.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ln(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?bn(this):Ln(this),this.readyState==3&&Kl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,bn(this))},n.Qa=function(u){this.g&&(this.response=u,bn(this))},n.ga=function(){this.g&&bn(this)};function bn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ln(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cr(u){let p="";return we(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function ni(u,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Cr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Be(u,p,_))}function Je(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Je,gt);var wh=/^https?$/i,va=["POST","PUT"];n=Je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?Us(this.o):Us(xn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(q){is(this,q);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)_.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())_.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(va,p,void 0))||w||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,re]of _)this.g.setRequestHeader(q,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){is(this,q)}};function is(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Qs(u),un(u)}function Qs(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},n.bb=function(){Ea(this)};function Ea(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)ia(u.Ea,0,u);else if(yt(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=re===0){var U=String(u.D).match(ts)[1]||null;!U&&f.self&&f.self.location&&(U=f.self.location.protocol.slice(0,-1)),w=!wh.test(U?U.toLowerCase():"")}_=w}if(_)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var q=2<Kt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Qs(u)}}finally{un(u)}}}}function un(u,p){if(u.g){Xs(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||yt(u,"ready");try{_.onreadystatechange=w}catch{}}}function Xs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),la(p)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(u){const p={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(se(u[w]))continue;var _=V(u[w]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=p[U]||[];p[U]=q,q.push(_)}x(p,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function er(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Ta(u){this.Aa=0,this.i=[],this.j=new Xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=er("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=er("baseRetryDelayMs",5e3,u),this.cb=er("retryDelaySeedMs",1e4,u),this.Wa=er("forwardChannelMaxRetries",2,u),this.wa=er("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new es(u&&u.concurrentRequestLimit),this.Da=new Eh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ta.prototype,n.la=8,n.G=1,n.connect=function(u,p,_,w){st(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Yl(this,null,this.W),tr(this)};function kt(u){if(Ys(u),u.G==3){var p=u.U++,_=ln(u.I);if(Be(_,"SID",u.K),Be(_,"RID",p),Be(_,"TYPE","terminate"),Pr(u,_),p=new Dn(u,u.j,p),p.L=2,p.v=Zr(ln(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=Zl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),qe(p)}Jl(u)}function Mn(u){u.g&&(Ia(u),u.g.cancel(),u.g=null)}function Ys(u){Mn(u),u.u&&(f.clearTimeout(u.u),u.u=null),to(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function tr(u){if(!an(u.h)&&!u.s){u.s=!0;var p=u.Ga;ke||G(),H||(ke(),H=!0),te.add(p,u),u.B=0}}function Th(u,p){return Fl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kn(I(u.Ga,u,p),Xl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Dn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ri(this,U,p),_=ln(this.I),Be(_,"RID",u),Be(_,"CVER",22),this.D&&Be(_,"X-HTTP-Session-Id",this.D),Pr(this,_),q&&(this.O?p="headers="+encodeURIComponent(String(Cr(q)))+"&"+p:this.m&&ni(_,this.m,q)),ya(this.h,U),this.Ua&&Be(_,"TYPE","init"),this.P?(Be(_,"$req",p),Be(_,"SID","null"),U.T=!0,Ws(U,_,null)):Ws(U,_,p),this.G=2}}else this.G==3&&(u?Zs(this,u):this.i.length==0||an(this.h)||Zs(this))};function Zs(u,p){var _;p?_=p.l:_=u.U++;const w=ln(u.I);Be(w,"SID",u.K),Be(w,"RID",_),Be(w,"AID",u.T),Pr(u,w),u.m&&u.o&&ni(w,u.m,u.o),_=new Dn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ri(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ya(u.h,_),Ws(_,w,p)}function Pr(u,p){u.H&&we(u.H,function(_,w){Be(p,w,_)}),u.l&&Xr({},function(_,w){Be(p,w,_)})}function ri(u,p,_){_=Math.min(u.i.length,_);var w=u.l?I(u.l.Na,u.l,u):null;e:{var U=u.i;let q=-1;for(;;){const re=["count="+_];q==-1?0<_?(q=U[0].g,re.push("ofs="+q)):q=0:re.push("ofs="+q);let ze=!0;for(let _t=0;_t<_;_t++){let Ve=U[_t].g;const It=U[_t].map;if(Ve-=q,0>Ve)q=Math.max(0,U[_t].g-100),ze=!1;else try{Gl(It,re,"req"+Ve+"_")}catch{w&&w(It)}}if(ze){w=re.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,w}function ss(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ke||G(),H||(ke(),H=!0),te.add(p,u),u.v=0}}function eo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kn(I(u.Fa,u),Xl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kn(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Mn(this),Ql(this))};function Ia(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ql(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=ln(u.qa);Be(p,"RID","rpc"),Be(p,"SID",u.K),Be(p,"AID",u.T),Be(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(p,"TO",u.ja),Be(p,"TYPE","xmlhttp"),Pr(u,p),u.m&&u.o&&ni(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Zr(ln(p)),_.m=null,_.P=!0,ma(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Mn(this),eo(this),st(19))};function to(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function no(u,p){var _=null;if(u.g==p){to(u),Ia(u),u.g=null;var w=2}else if($t(u.h,p))_=p.D,jl(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var U=u.B;w=Qi(),yt(w,new zs(w,_)),tr(u)}else ss(u);else if(U=p.s,U==3||U==0&&0<p.X||!(w==1&&Th(u,p)||w==2&&eo(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),U){case 1:kr(u,5);break;case 4:kr(u,10);break;case 3:kr(u,6);break;default:kr(u,2)}}}function Xl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function kr(u,p){if(u.j.info("Error code "+p),p==2){var _=I(u.fb,u),w=u.Xa;const U=!w;w=new Ar(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ns(w,"https"),Zr(w),U?vh(w.toString(),_):Hl(w.toString(),_)}else st(2);u.G=0,u.l&&u.l.sa(p),Jl(u),Ys(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Jl(u){if(u.G=0,u.ka=[],u.l){const p=zl(u.h);(p.length!=0||u.i.length!=0)&&(L(u.ka,p),L(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Yl(u,p,_){var w=_ instanceof Ar?ln(_):new Ar(_);if(w.g!="")p&&(w.g=p+"."+w.g),Jr(w,w.s);else{var U=f.location;w=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var q=new Ar(null);w&&ns(q,w),p&&(q.g=p),U&&Jr(q,U),_&&(q.l=_),w=q}return _=u.D,p=u.ya,_&&p&&Be(w,_,p),Be(w,"VER",u.la),Pr(u,w),w}function Zl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new Rr({eb:_})):new Je(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sa(){}n=Sa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ro(){}ro.prototype.g=function(u,p){return new qt(u,p)};function qt(u,p){gt.call(this),this.g=new Ta(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!se(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!se(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new nr(this)}j(qt,gt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){kt(this.g)},qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=aa(u),u=_);p.i.push(new Ul(p.Ya++,u)),p.G==3&&tr(p)},qt.prototype.N=function(){this.g.l=null,delete this.j,kt(this.g),delete this.g,qt.aa.N.call(this)};function eu(u){Xn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}j(eu,Xn);function tu(){js.call(this),this.status=1}j(tu,js);function nr(u){this.g=u}j(nr,Sa),nr.prototype.ua=function(){yt(this.g,"a")},nr.prototype.ta=function(u){yt(this.g,new eu(u))},nr.prototype.sa=function(u){yt(this.g,new tu)},nr.prototype.ra=function(){yt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,hE=function(){return new ro},cE=function(){return Qi()},uE=Jn,vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,ac=$s,Vl.COMPLETE="complete",lE=Vl,Fs.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Qa=Fs,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,aE=Je}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const qy="@firebase/firestore",Wy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Kf("@firebase/firestore");function Ro(){return Cs.logLevel}function le(n,...e){if(Cs.logLevel<=Ne.DEBUG){const t=e.map(ap);Cs.debug(`Firestore (${Ho}): ${n}`,...t)}}function Wr(n,...e){if(Cs.logLevel<=Ne.ERROR){const t=e.map(ap);Cs.error(`Firestore (${Ho}): ${n}`,...t)}}function Di(n,...e){if(Cs.logLevel<=Ne.WARN){const t=e.map(ap);Cs.warn(`Firestore (${Ho}): ${n}`,...t)}}function ap(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,dE(n,i,t)}function dE(n,e,t){let i=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Wr(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||dE(e,o,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jt.UNAUTHENTICATED)))}shutdown(){}}class rR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class iR{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new zr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new zr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new fE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class sR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=lR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ce(n,e){return n<e?-1:n>e?1:0}function Ef(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ce(i,o);{const l=pE(),h=uR(l.encode(Gy(n,t)),l.encode(Gy(e,t)));return h!==0?h:Ce(i,o)}}t+=i>65535?2:1}return Ce(n.length,e.length)}function Gy(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function uR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ce(n[t],e[t]);return Ce(n.length,e.length)}function Lo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ce(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),o=ar.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):Ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class He extends ar{construct(e,t,i){return new He(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const cR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends ar{construct(e,t,i){return new Ot(e,t,i)}static isValidIdentifier(e){return cR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ky}static keyField(){return new Ot([Ky])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(He.fromString(e))}static fromName(e){return new me(He.fromString(e).popFirst(5))}static empty(){return new me(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(n,e,t){if(!t)throw new oe(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hR(n,e,t,i){if(e===!0&&i===!0)throw new oe(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qy(n){if(!me.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Xy(n){if(me.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gc(n);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Rl(n,e){if(!gE(n))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new oe(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=-62135596800,Yy=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Yy);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jy)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yy}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rl(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:mt("string",Xe._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Xe(0,0))}static max(){return new Te(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;function dR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Oi(o,me.empty(),e)}function fR(n){return new Oi(n.readTime,n.key,ul)}class Oi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oi(Te.min(),me.empty(),ul)}static max(){return new Oi(Te.max(),me.empty(),ul)}}function pR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==mR)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next((v=>{h[y]=v,++f,f===l&&i(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function yR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Kc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function Qc(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function _R(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="";function vR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zy(e)),e=ER(n.get(t),e);return Zy(e)}function ER(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case yE:t+="";break;default:t+=l}}return t}function Zy(n){return n+yE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _E(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Dt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new pn([])}unionWith(e){let t=new wt(Ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vE("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const wR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=wR.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(n.seconds),nanos:at(n.nanos)}}function at(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bi(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="server_timestamp",wE="__type__",TE="__previous_value__",IE="__local_write_time__";function cp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[wE])===null||t===void 0?void 0:t.stringValue)===EE}function Xc(n){const e=n.mapValue.fields[TE];return cp(e)?Xc(e):e}function cl(n){const e=Vi(n.mapValue.fields[IE].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t,i,o,l,h,f,m,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=v}}const Ic="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||Ic}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===Ic}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="__type__",IR="__max__",Yu={mapValue:{}},AE="__vector__",Sc="value";function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cp(n)?4:AR(n)?9007199254740991:SR(n)?10:11:_e(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Vi(o.timestampValue),f=Vi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return bi(o.bytesValue).isEqual(bi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=at(o.doubleValue),f=at(l.doubleValue);return h===f?Tc(h)===Tc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Lo(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(e_(h)!==e_(f))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(f[m]===void 0||!gr(h[m],f[m])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function dl(n,e){return(n.values||[]).find((t=>gr(t,e)))!==void 0}function Mo(n,e){if(n===e)return 0;const t=Li(n),i=Li(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=at(l.integerValue||l.doubleValue),m=at(h.integerValue||h.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return n_(n.timestampValue,e.timestampValue);case 4:return n_(cl(n),cl(e));case 5:return Ef(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=bi(l),m=bi(h);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),m=h.split("/");for(let y=0;y<f.length&&y<m.length;y++){const v=Ce(f[y],m[y]);if(v!==0)return v}return Ce(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ce(at(l.latitude),at(h.latitude));return f!==0?f:Ce(at(l.longitude),at(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return r_(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,m,y,v;const T=l.fields||{},I=h.fields||{},b=(f=T[Sc])===null||f===void 0?void 0:f.arrayValue,j=(m=I[Sc])===null||m===void 0?void 0:m.arrayValue,B=Ce(((y=b==null?void 0:b.values)===null||y===void 0?void 0:y.length)||0,((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:r_(b,j)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Yu.mapValue&&h===Yu.mapValue)return 0;if(l===Yu.mapValue)return 1;if(h===Yu.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=h.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let T=0;T<m.length&&T<v.length;++T){const I=Ef(m[T],v[T]);if(I!==0)return I;const b=Mo(f[m[T]],y[v[T]]);if(b!==0)return b}return Ce(m.length,v.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function n_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);const t=Vi(n),i=Vi(e),o=Ce(t.seconds,i.seconds);return o!==0?o:Ce(t.nanos,i.nanos)}function r_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Mo(t[o],i[o]);if(l)return l}return Ce(t.length,i.length)}function Uo(n){return wf(n)}function wf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Vi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return bi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=wf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${wf(t.fields[h])}`;return o+"}"})(n.mapValue):_e(61005,{value:n})}function lc(n){switch(Li(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xc(n);return e?16+lc(e):16;case 5:return 2*n.stringValue.length;case 6:return bi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+lc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Bi(i.fields,((l,h)=>{o+=l.length+lc(h)})),o})(n.mapValue);default:throw _e(13486,{value:n})}}function i_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tf(n){return!!n&&"integerValue"in n}function hp(n){return!!n&&"arrayValue"in n}function s_(n){return!!n&&"nullValue"in n}function o_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uc(n){return!!n&&"mapValue"in n}function SR(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[SE])===null||t===void 0?void 0:t.stringValue)===AE}function tl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=tl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===IR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Ot.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=tl(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Bi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new rn(tl(this.value))}}function RE(n){const e=[];return Bi(n.fields,((t,i)=>{const o=new Ot([t]);if(uc(i)){const l=RE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new zt(e,0,Te.min(),Te.min(),Te.min(),rn.empty(),0)}static newFoundDocument(e,t,i,o){return new zt(e,1,t,Te.min(),i,o,0)}static newNoDocument(e,t){return new zt(e,2,t,Te.min(),Te.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,Te.min(),Te.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function a_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=me.comparator(me.fromName(h.referenceValue),t.key):i=Mo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function l_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function RR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class pt extends CE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new PR(e,t,i):t==="array-contains"?new xR(e,i):t==="in"?new DR(e,i):t==="not-in"?new OR(e,i):t==="array-contains-any"?new VR(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kR(e,i):new NR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends CE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Kn(e,t)}matches(e){return PE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function PE(n){return n.op==="and"}function kE(n){return CR(n)&&PE(n)}function CR(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function If(n){if(n instanceof pt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(kE(n))return n.filters.map((e=>If(e))).join(",");{const e=n.filters.map((t=>If(t))).join(",");return`${n.op}(${e})`}}function NE(n,e){return n instanceof pt?(function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&gr(i.value,o.value)})(n,e):n instanceof Kn?(function(i,o){return o instanceof Kn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&NE(h,o.filters[f])),!0):!1})(n,e):void _e(19439)}function xE(n){return n instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof Kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(xE).join(" ,")+"}"})(n):"Filter"}class PR extends pt{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class kR extends pt{constructor(e,t){super(e,"in",t),this.keys=DE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class NR extends pt{constructor(e,t){super(e,"not-in",t),this.keys=DE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>me.fromName(i.referenceValue)))}class xR extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&dl(t.arrayValue,this.value)}}class DR extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}}class OR extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dl(this.value.arrayValue,t)}}class VR extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>dl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function u_(n,e=null,t=[],i=[],o=null,l=null,h=null){return new bR(n,e,t,i,o,l,h)}function dp(n){const e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>If(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Uo(i))).join(",")),e.Pe=t}return e.Pe}function fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!l_(n.startAt,e.startAt)&&l_(n.endAt,e.endAt)}function Sf(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function LR(n,e,t,i,o,l,h,f){return new Qo(n,e,t,i,o,l,h,f)}function pp(n){return new Qo(n)}function c_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OE(n){return n.collectionGroup!==null}function nl(n){const e=Se(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new wt(Ot.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new fl(l,i))})),t.has(Ot.keyField().canonicalString())||e.Te.push(new fl(Ot.keyField(),i))}return e.Te}function cr(n){const e=Se(n);return e.Ie||(e.Ie=MR(e,nl(n))),e.Ie}function MR(n,e){if(n.limitType==="F")return u_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fl(o.field,l)}));const t=n.endAt?new Ac(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ac(n.startAt.position,n.startAt.inclusive):null;return u_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Af(n,e){const t=n.filters.concat([e]);return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rf(n,e,t){return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jc(n,e){return fp(cr(n),cr(e))&&n.limitType===e.limitType}function VE(n){return`${dp(cr(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>xE(o))).join(", ")}]`),Qc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(cr(n))}; limitType=${n.limitType})`}function Yc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):me.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of nl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,m){const y=a_(h,f,m);return h.inclusive?y<=0:y<0})(i.startAt,nl(i),o)||i.endAt&&!(function(h,f,m){const y=a_(h,f,m);return h.inclusive?y>=0:y>0})(i.endAt,nl(i),o))})(n,e)}function UR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bE(n){return(e,t)=>{let i=!1;for(const o of nl(n)){const l=FR(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function FR(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(l,h,f){const m=h.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Mo(m,y):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return _E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new tt(me.comparator);function Hr(){return jR}const LE=new tt(me.comparator);function Xa(...n){let e=LE;for(const t of n)e=e.insert(t.key,t);return e}function ME(n){let e=LE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Is(){return rl()}function UE(){return rl()}function rl(){return new Ns((n=>n.toString()),((n,e)=>n.isEqual(e)))}const zR=new tt(me.comparator),BR=new wt(me.comparator);function xe(...n){let e=BR;for(const t of n)e=e.add(t);return e}const $R=new wt(Ce);function qR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function WR(n,e){return _R(e)?FE(e):mp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function HR(n,e,t){return n instanceof pl?(function(o,l){const h={fields:{[wE]:{stringValue:EE},[IE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&cp(l)&&(l=Xc(l)),l&&(h.fields[TE]=l),{mapValue:h}})(t,e):n instanceof ml?zE(n,e):n instanceof gl?BE(n,e):(function(o,l){const h=jE(o,l),f=h_(h)+h_(o.Ee);return Tf(h)&&Tf(o.Ee)?FE(f):mp(o.serializer,f)})(n,e)}function GR(n,e,t){return n instanceof ml?zE(n,e):n instanceof gl?BE(n,e):t}function jE(n,e){return n instanceof Rc?(function(i){return Tf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class pl extends Zc{}class ml extends Zc{constructor(e){super(),this.elements=e}}function zE(n,e){const t=$E(e);for(const i of n.elements)t.some((o=>gr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends Zc{constructor(e){super(),this.elements=e}}function BE(n,e){let t=$E(e);for(const i of n.elements)t=t.filter((o=>!gr(o,i)));return{arrayValue:{values:t}}}class Rc extends Zc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function h_(n){return at(n.integerValue||n.doubleValue)}function $E(n){return hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t){this.field=e,this.transform=t}}function QR(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Lo(i.elements,o.elements,gr):i instanceof Rc&&o instanceof Rc?gr(i.Ee,o.Ee):i instanceof pl&&o instanceof pl})(n.transform,e.transform)}class XR{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class eh{}function qE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new HE(n.key,Gn.none()):new Cl(n.key,n.data,Gn.none());{const t=n.data,i=rn.empty();let o=new wt(Ot.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new $i(n.key,i,new pn(o.toArray()),Gn.none())}}function JR(n,e,t){n instanceof Cl?(function(o,l,h){const f=o.value.clone(),m=f_(o.fieldTransforms,l,h.transformResults);f.setAll(m),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof $i?(function(o,l,h){if(!cc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=f_(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(WE(o)),m.setAll(f),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function il(n,e,t,i){return n instanceof Cl?(function(l,h,f,m){if(!cc(l.precondition,h))return f;const y=l.value.clone(),v=p_(l.fieldTransforms,m,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof $i?(function(l,h,f,m){if(!cc(l.precondition,h))return f;const y=p_(l.fieldTransforms,m,h),v=h.data;return v.setAll(WE(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,h,f){return cc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function YR(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=jE(i.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function d_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Lo(i,o,((l,h)=>QR(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cl extends eh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $i extends eh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function f_(n,e,t){const i=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,GR(h,f,t[o]))}return i}function p_(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,HR(l,h,e))}return i}class HE extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&JR(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=UE();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const m=qE(h,f);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xe())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,i)=>d_(t,i)))&&Lo(this.baseMutations,e.baseMutations,((t,i)=>d_(t,i)))}}class gp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return zR})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new gp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,be;function rC(n){switch(n){case K.OK:return _e(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function GE(n){if(n===void 0)return Wr("GRPC error has no .code"),K.UNKNOWN;switch(n){case ft.OK:return K.OK;case ft.CANCELLED:return K.CANCELLED;case ft.UNKNOWN:return K.UNKNOWN;case ft.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ft.INTERNAL:return K.INTERNAL;case ft.UNAVAILABLE:return K.UNAVAILABLE;case ft.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ft.NOT_FOUND:return K.NOT_FOUND;case ft.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ft.ABORTED:return K.ABORTED;case ft.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ft.DATA_LOSS:return K.DATA_LOSS;default:return _e(39323,{code:n})}}(be=ft||(ft={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new ki([4294967295,4294967295],0);function m_(n){const e=pE().encode(n),t=new oE;return t.update(e),new Uint8Array(t.digest())}function g_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,i],0),new ki([o,l],0)]}class yp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ki.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(ki.fromNumber(i)));return o.compare(iC)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=m_(e),[i,o]=g_(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new yp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=m_(e),[i,o]=g_(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new th(Te.min(),o,new tt(Ce),Hr(),xe())}}class Pl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pl(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class KE{constructor(e,t){this.targetId=e,this.De=t}}class QE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class y_{constructor(){this.ve=0,this.Ce=__(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=xe(),t=xe(),i=xe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:_e(38017,{changeType:l})}})),new Pl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=__()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class sC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=Zu(),this.Je=Zu(),this.He=new tt(Ce)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Sf(l))if(i===0){const h=new me(l.path);this.Xe(t,h,zt.newNoDocument(h,Te.min()))}else je(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),m=f?this.ut(f,e,h):1;if(m!==0){this.rt(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=bi(i).toUint8Array()}catch(m){if(m instanceof vE)return Di("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new yp(h,o,l)}catch(m){return Di(m instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&Sf(f.target)){const m=new me(f.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,zt.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=xe();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((m=>{const y=this.st(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new th(e,t,this.He,this.ze,i);return this.ze=Hr(),this.je=Zu(),this.Je=Zu(),this.He=new tt(Ce),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new y_,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wt(Ce),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wt(Ce),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new y_),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Zu(){return new tt(me.comparator)}function __(){return new tt(me.comparator)}const oC={asc:"ASCENDING",desc:"DESCENDING"},aC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lC={and:"AND",or:"OR"};class uC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cf(n,e){return n.useProto3Json||Qc(e)?e:{value:e}}function Cc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cC(n,e){return Cc(n,e.toTimestamp())}function hr(n){return je(!!n,49232),Te.fromTimestamp((function(t){const i=Vi(t);return new Xe(i.seconds,i.nanos)})(n))}function _p(n,e){return Pf(n,e).canonicalString()}function Pf(n,e){const t=(function(o){return new He(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JE(n){const e=He.fromString(n);return je(nw(e),10190,{key:e.toString()}),e}function kf(n,e){return _p(n.databaseId,e.path)}function tf(n,e){const t=JE(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(ZE(t))}function YE(n,e){return _p(n.databaseId,e)}function hC(n){const e=JE(n);return e.length===4?He.emptyPath():ZE(e)}function Nf(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZE(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function v_(n,e,t){return{name:kf(n,e),fields:t.value.mapValue.fields}}function dC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(je(v===void 0||typeof v=="string",58123),Vt.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Vt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?K.UNKNOWN:GE(y.code);return new oe(v,y.message||"")})(h);t=new QE(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=tf(n,i.document.name),l=hr(i.document.updateTime),h=i.document.createTime?hr(i.document.createTime):Te.min(),f=new rn({mapValue:{fields:i.document.fields}}),m=zt.newFoundDocument(o,l,h,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new hc(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=tf(n,i.document),l=i.readTime?hr(i.readTime):Te.min(),h=zt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new hc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=tf(n,i.document),l=i.removedTargetIds||[];t=new hc([],l,o,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new nC(o,l),f=i.targetId;t=new KE(f,h)}}return t}function fC(n,e){let t;if(e instanceof Cl)t={update:v_(n,e.key,e.value)};else if(e instanceof HE)t={delete:kf(n,e.key)};else if(e instanceof $i)t={update:v_(n,e.key,e.data),updateMask:TC(e.fieldMask)};else{if(!(e instanceof ZR))return _e(16599,{Rt:e.type});t={verify:kf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof pl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ml)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof gl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Rc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw _e(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:cC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(n,e.precondition)),t}function pC(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?hr(o.updateTime):hr(l);return h.isEqual(Te.min())&&(h=hr(l)),new XR(h,o.transformResults||[])})(t,e)))):[]}function mC(n,e){return{documents:[YE(n,e.path)]}}function gC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=YE(n,o);const l=(function(y){if(y.length!==0)return tw(Kn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(I){return{field:Po(I.field),direction:vC(I.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Cf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function yC(n){let e=hC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const I=ew(T);return I instanceof Kn&&kE(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((I=>(function(j){return new fl(ko(j.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let I;return I=typeof T=="object"?T.value:T,Qc(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,b=T.values||[];return new Ac(b,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const I=!T.before,b=T.values||[];return new Ac(b,I)})(t.endAt)),LR(e,o,h,l,f,"F",m,y)}function _C(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ew(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ko(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ko(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ko(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return pt.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kn.create(t.compositeFilter.filters.map((i=>ew(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function vC(n){return oC[n]}function EC(n){return aC[n]}function wC(n){return lC[n]}function Po(n){return{fieldPath:n.canonicalString()}}function ko(n){return Ot.fromServerFormat(n.fieldPath)}function tw(n){return n instanceof pt?(function(t){if(t.op==="=="){if(o_(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(s_(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(o_(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(s_(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:EC(t.op),value:t.value}}})(n):n instanceof Kn?(function(t){const i=t.getFilters().map((o=>tw(o)));return i.length===1?i[0]:{compositeFilter:{op:wC(t.op),filters:i}}})(n):_e(54877,{filter:n})}function TC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,i,o,l=Te.min(),h=Te.min(),f=Vt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.gt=e}}function SC(n){const e=yC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.Dn=new RC}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Oi.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class RC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new wt(He.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new wt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rw=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(rw,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fo(0)}static ur(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="LruGarbageCollector",CC=1048576;function T_([n,e],[t,i]){const o=Ce(n,t);return o===0?Ce(e,i):o}class PC{constructor(e){this.Tr=e,this.buffer=new wt(T_),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();T_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(w_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?le(w_,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Rr(3e5)}))}}class NC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Kc.ue);const i=new PC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(E_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Ro()<=Ne.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function xC(n,e){return new NC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.changes=new Ns((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&il(i.mutation,o,pn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,xe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=xe()){const o=Is();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Xa();return l.forEach(((f,m)=>{h=h.insert(f,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Is();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,xe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Hr();const h=rl(),f=(function(){return rl()})();return t.forEach(((m,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof $i)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),il(v.mutation,y,v.mutation.getFieldMask(),Xe.now())):h.set(y.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>{var T;return f.set(y,new OC(v,(T=h.get(y))!==null&&T!==void 0?T:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=rl();let o=new tt(((h,f)=>h-f)),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((m=>{const y=t.get(m);if(y===null)return;let v=i.get(m)||pn.empty();v=f.applyToLocalView(y,v),i.set(m,v);const T=(o.get(f.batchId)||xe()).add(m);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,v=m.value,T=UE();v.forEach((I=>{if(!l.has(I)){const b=qE(t.get(I),i.get(I));b!==null&&T.set(I,b),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return X.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(Is());let f=ul,m=l;return h.next((y=>X.forEach(y,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(v)?X.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{m=m.insert(v,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,m,y,xe()))).next((v=>({batchId:f,changes:ME(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((i=>{let o=Xa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Xa();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(m=>{const y=(function(T,I){return new Qo(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((T,I)=>{h=h.insert(T,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,zt.newInvalidDocument(v)))}));let f=Xa();return h.forEach(((m,y)=>{const v=l.get(m);v!==void 0&&il(v.mutation,y,pn.empty(),Xe.now()),Yc(t,y)&&(f=f.insert(m,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:SC(o.bundledQuery),readTime:hr(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.overlays=new tt(me.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Is();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=Is(),l=t.length+1,h=new me(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new tt(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=Is(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Is(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return X.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new tC(t,i));let l=this.kr.get(t);l===void 0&&(l=xe(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.qr=new wt(Ct.Qr),this.$r=new wt(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ct(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new me(new He([])),i=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new me(new He([])),i=new Ct(t,e),o=new Ct(t,e+1);let l=xe();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return me.comparator(e.key,t.key)||Ce(e.Hr,t.Hr)}static Ur(e,t){return Ce(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wt(Ct.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new eC(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?up:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new wt(Ce);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),X.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;me.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new me(l),0);let f=new wt(Ce);return this.Yr.forEachWhile((m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(m.Hr)),!0)}),h),X.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return X.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Ct(t,0),o=this.Yr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.ni=e,this.docs=(function(){return new tt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let i=Hr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():zt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Hr();const h=t.path,f=new me(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||pR(fR(v),i)<=0||(o.has(v.key)||Yc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){_e(9500)}ri(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new jC(this)}getSize(e){return X.resolve(this.size)}}class jC extends DC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.persistence=e,this.ii=new Ns((t=>dp(t)),fp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new vp,this.targetCount=0,this._i=Fo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t){this.ai={},this.overlays={},this.ui=new Kc(0),this.ci=!1,this.ci=!0,this.li=new MC,this.referenceDelegate=e(this),this.hi=new zC(this),this.indexManager=new AC,this.remoteDocumentCache=(function(o){return new FC(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new IC(t),this.Ti=new bC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new UC(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new BC(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return X.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class BC extends gR{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Ai=new vp,this.Ri=null}static Vi(e){return new Ep(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,(i=>{const o=me.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pc{constructor(e,t){this.persistence=e,this.gi=new Ns((i=>vR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=xC(this,t)}static Vi(e,t){return new Pc(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return X.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Te.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lc(e.data.value)),t}Sr(e,t,i){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new wp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return UI()?8:yR(Bt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new $C;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Ro()<=Ne.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ro()<=Ne.DEBUG&&le("QueryEngine","Query:",Co(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Ro()<=Ne.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):X.resolve())}ps(e,t){if(c_(t))return X.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Rf(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=xe(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const y=this.bs(t,f);return this.Ds(t,y,h,m.readTime)?this.ps(e,Rf(t,null,"F")):this.vs(e,y,t,m)}))))})))))}ys(e,t,i,o){return c_(t)||o.isEqual(Te.min())?X.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?X.resolve(null):(Ro()<=Ne.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(t)),this.vs(e,h,t,dR(o,ul)).next((f=>f)))}))}bs(e,t){let i=new wt(bE(e));return t.forEach(((o,l)=>{Yc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Ro()<=Ne.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Co(t)),this.gs.getDocumentsMatchingQuery(e,t,Oi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",WC=3e8;class HC{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new tt(Ce),this.Ms=new Ns((l=>dp(l)),fp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function GC(n,e,t,i){return new HC(n,e,t,i)}async function sw(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let m=xe();for(const y of o){h.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((y=>({Bs:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function KC(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,y,v){const T=y.batch,I=T.keys();let b=X.resolve();return I.forEach((j=>{b=b.next((()=>v.getEntry(m,j))).next((B=>{const L=y.docVersions.get(j);je(L!==null,48541),B.version.compareTo(L)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=xe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function ow(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function QC(n,e){const t=Se(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((v,T)=>{const I=o.get(T);if(!I)return;f.push(t.hi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,T))));let b=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(Vt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,i)),o=o.insert(T,b),(function(B,L,ie){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=WC?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(I,b,v)&&f.push(t.hi.updateTargetData(l,b))}));let m=Hr(),y=xe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(XC(l,h,e.documentUpdates).next((v=>{m=v.Ls,y=v.ks}))),!i.isEqual(Te.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return X.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,y))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function XC(n,e,t){let i=xe(),o=xe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=Hr();return t.forEach(((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(f,m.readTime),h=h.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),h=h.insert(f,m)):le(Tp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)})),{Ls:h,ks:o}}))}function JC(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=up),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function YC(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new Ii(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function xf(n,e,t){const i=Se(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ko(h))throw h;le(Tp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function I_(n,e,t){const i=Se(n);let o=Te.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,y,v){const T=Se(m),I=T.Ms.get(v);return I!==void 0?X.resolve(T.Fs.get(I)):T.hi.getTargetData(y,v)})(i,h,cr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:xe()))).next((f=>(ZC(i,UR(e),f),{documents:f,qs:l})))))}function ZC(n,e,t){let i=n.xs.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class S_{constructor(){this.activeTargetIds=qR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eP{constructor(){this.Fo=new S_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new S_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="ConnectivityMonitor";class R_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(A_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(A_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec=null;function Df(){return ec===null?ec=(function(){return 268435456+Math.round(2147483648*Math.random())})():ec++,"0x"+ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="RestConnection",nP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ic?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Df(),f=this.Go(e,t.toUriEncodedString());le(nf,`Sending RPC '${e}' ${h}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:y}=new URL(f),v=zi(y);return this.jo(e,f,m,i,v).then((T=>(le(nf,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Di(nf,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=nP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class sP extends rP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=Df();return new Promise(((f,m)=>{const y=new aE;y.setWithCredentials(!0),y.listenOnce(lE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ac.NO_ERROR:const T=y.getResponseJson();le(Ft,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case ac.TIMEOUT:le(Ft,`RPC '${e}' ${h} timed out`),m(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const I=y.getStatus();if(le(Ft,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const j=b==null?void 0:b.error;if(j&&j.status&&j.message){const B=(function(ie){const se=ie.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(se)>=0?se:K.UNKNOWN})(j.status);m(new oe(B,j.message))}else m(new oe(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new oe(K.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{le(Ft,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);le(Ft,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=Df(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=hE(),f=cE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");le(Ft,`Creating RPC '${e}' stream ${o}: ${v}`,m);const T=h.createWebChannel(v,m);this.T_(T);let I=!1,b=!1;const j=new iP({Ho:L=>{b?le(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(I||(le(Ft,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),le(Ft,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Yo:()=>T.close()}),B=(L,ie,se)=>{L.listen(ie,(ee=>{try{se(ee)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return B(T,Qa.EventType.OPEN,(()=>{b||(le(Ft,`RPC '${e}' stream ${o} transport opened.`),j.s_())})),B(T,Qa.EventType.CLOSE,(()=>{b||(b=!0,le(Ft,`RPC '${e}' stream ${o} transport closed`),j.__(),this.I_(T))})),B(T,Qa.EventType.ERROR,(L=>{b||(b=!0,Di(Ft,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),j.__(new oe(K.UNAVAILABLE,"The operation could not be completed")))})),B(T,Qa.EventType.MESSAGE,(L=>{var ie;if(!b){const se=L.data[0];je(!!se,16349);const ee=se,ue=(ee==null?void 0:ee.error)||((ie=ee[0])===null||ie===void 0?void 0:ie.error);if(ue){le(Ft,`RPC '${e}' stream ${o} received error:`,ue);const Re=ue.status;let we=(function(C){const N=ft[C];if(N!==void 0)return GE(N)})(Re),x=ue.message;we===void 0&&(we=K.INTERNAL,x="Unknown error status: "+Re+" with message "+ue.message),b=!0,j.__(new oe(we,x)),T.close()}else le(Ft,`RPC '${e}' stream ${o} received:`,se),j.a_(se)}})),B(f,uE.STAT_EVENT,(L=>{L.stat===vf.PROXY?le(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===vf.NOPROXY&&le(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.o_()}),0),j}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(n){return new uC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="PersistentStream";class lw{constructor(e,t,i,o,l,h,f,m){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new aw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new oe(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return le(C_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(le(C_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oP extends lw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=dC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?hr(h.readTime):Te.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Nf(this.serializer),t.addTarget=(function(l,h){let f;const m=h.target;if(f=Sf(m)?{documents:mC(l,m)}:{query:gC(l,m).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=XE(l,h.resumeToken);const y=Cf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){f.readTime=Cc(l,h.snapshotVersion.toTimestamp());const y=Cf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=_C(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Nf(this.serializer),t.removeTarget=e,this.k_(t)}}class aP extends lw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=pC(e.writeResults,e.commitTime),i=hr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Nf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>fC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{}class uP extends lP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Pf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(K.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,Pf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(K.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class cP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Wr(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class hP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{xs(this)&&(le(Ps,"Restarting streams for network reachability change."),await(async function(m){const y=Se(m);y.Ia.add(4),await kl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await rh(y)})(this))}))})),this.Aa=new cP(i,o)}}async function rh(n){if(xs(n))for(const e of n.da)await e(!0)}async function kl(n){for(const e of n.da)await e(!1)}function uw(n,e){const t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Rp(t)?Ap(t):Xo(t).x_()&&Sp(t,e))}function Ip(n,e){const t=Se(n),i=Xo(t);t.Ta.delete(e),i.x_()&&cw(t,e),t.Ta.size===0&&(i.x_()?i.B_():xs(t)&&t.Aa.set("Unknown"))}function Sp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(n).H_(e)}function cw(n,e){n.Ra.$e(e),Xo(n).Y_(e)}function Ap(n){n.Ra=new sC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Xo(n).start(),n.Aa.aa()}function Rp(n){return xs(n)&&!Xo(n).M_()&&n.Ta.size>0}function xs(n){return Se(n).Ia.size===0}function hw(n){n.Ra=void 0}async function dP(n){n.Aa.set("Online")}async function fP(n){n.Ta.forEach(((e,t)=>{Sp(n,e)}))}async function pP(n,e){hw(n),Rp(n)?(n.Aa.la(e),Ap(n)):n.Aa.set("Unknown")}async function mP(n,e,t){if(n.Aa.set("Online"),e instanceof QE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))})(n,e)}catch(i){le(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kc(n,i)}else if(e instanceof hc?n.Ra.Ye(e):e instanceof KE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{const i=await ow(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ta.get(y);v&&l.Ta.set(y,v.withResumeToken(m.resumeToken,h))}})),f.targetMismatches.forEach(((m,y)=>{const v=l.Ta.get(m);if(!v)return;l.Ta.set(m,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),cw(l,m);const T=new Ii(v.target,m,y,v.sequenceNumber);Sp(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){le(Ps,"Failed to raise snapshot:",i),await kc(n,i)}}async function kc(n,e,t){if(!Ko(e))throw e;n.Ia.add(1),await kl(n),n.Aa.set("Offline"),t||(t=()=>ow(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Ps,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await rh(n)}))}function dw(n,e){return e().catch((t=>kc(n,t,e)))}async function ih(n){const e=Se(n),t=Mi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:up;for(;gP(e);)try{const o=await JC(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,yP(e,o)}catch(o){await kc(e,o)}fw(e)&&pw(e)}function gP(n){return xs(n)&&n.Pa.length<10}function yP(n,e){n.Pa.push(e);const t=Mi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function fw(n){return xs(n)&&!Mi(n).M_()&&n.Pa.length>0}function pw(n){Mi(n).start()}async function _P(n){Mi(n).na()}async function vP(n){const e=Mi(n);for(const t of n.Pa)e.X_(t.mutations)}async function EP(n,e,t){const i=n.Pa.shift(),o=gp.from(i,e,t);await dw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ih(n)}async function wP(n,e){e&&Mi(n).Z_&&await(async function(i,o){if((function(h){return rC(h)&&h!==K.ABORTED})(o.code)){const l=i.Pa.shift();Mi(i).N_(),await dw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await ih(i)}})(n,e),fw(n)&&pw(n)}async function P_(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),le(Ps,"RemoteStore received new credentials");const i=xs(t);t.Ia.add(3),await kl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await rh(t)}async function TP(n,e){const t=Se(n);e?(t.Ia.delete(2),await rh(t)):e||(t.Ia.add(2),await kl(t),t.Aa.set("Unknown"))}function Xo(n){return n.Va||(n.Va=(function(t,i,o){const l=Se(t);return l.ia(),new oP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:dP.bind(null,n),e_:fP.bind(null,n),n_:pP.bind(null,n),J_:mP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Rp(n)?Ap(n):n.Aa.set("Unknown")):(await n.Va.stop(),hw(n))}))),n.Va}function Mi(n){return n.ma||(n.ma=(function(t,i,o){const l=Se(t);return l.ia(),new aP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:_P.bind(null,n),n_:wP.bind(null,n),ea:vP.bind(null,n),ta:EP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await ih(n)):(await n.ma.stop(),n.Pa.length>0&&(le(Ps,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Cp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Ko(n))return new oe(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Xa(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Oo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.fa=new tt(me.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class jo{constructor(e,t,i,o,l,h,f,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new jo(e,t,Oo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class SP{constructor(){this.queries=N_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Se(t),l=o.queries;o.queries=N_(),l.forEach(((h,f)=>{for(const m of f.wa)m.onError(i)}))})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function N_(){return new Ns((n=>VE(n)),Jc)}async function mw(n,e){const t=Se(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new IP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Pp(h,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&kp(t)}async function gw(n,e){const t=Se(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function AP(n,e){const t=Se(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&kp(t)}function RP(n,e,t){const i=Se(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function kp(n){n.Da.forEach((e=>{e.next()}))}var Of,x_;(x_=Of||(Of={})).Fa="default",x_.Cache="cache";class yw{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class vw{constructor(e){this.key=e}}class CP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=xe(),this.mutatedKeys=xe(),this.Xa=bE(e),this.eu=new Oo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new k_,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const I=o.get(v),b=Yc(this.query,T)?T:null,j=!!I&&this.mutatedKeys.has(I.key),B=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;I&&b?I.data.isEqual(b.data)?j!==B&&(i.track({type:3,doc:b}),L=!0):this.iu(I,b)||(i.track({type:2,doc:b}),L=!0,(m&&this.Xa(b,m)>0||y&&this.Xa(b,y)<0)&&(f=!0)):!I&&b?(i.track({type:0,doc:b}),L=!0):I&&!b&&(i.track({type:1,doc:I}),L=!0,(m||y)&&(f=!0)),L&&(b?(h=h.add(b),l=B?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((v,T)=>(function(b,j){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:L})}};return B(b)-B(j)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,y=m!==this.Ya;return this.Ya=m,h.length!==0||y?{snapshot:new jo(this.query,e.eu,l,h,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new k_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=xe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new vw(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new _w(i))})),t}uu(e){this.Ha=e.qs,this.Za=xe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Np="SyncEngine";class PP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class kP{constructor(e){this.key=e,this.lu=!1}}class NP{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Ns((f=>VE(f)),Jc),this.Tu=new Map,this.Iu=new Set,this.du=new tt(me.comparator),this.Eu=new Map,this.Au=new vp,this.Ru={},this.Vu=new Map,this.mu=Fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function xP(n,e,t=!0){const i=Aw(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await Ew(i,e,t,!0),o}async function DP(n,e){const t=Aw(n);await Ew(t,e,!0,!1)}async function Ew(n,e,t,i){const o=await YC(n.localStore,cr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await OP(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&uw(n.remoteStore,o),f}async function OP(n,e,t,i,o){n.gu=(T,I,b)=>(async function(B,L,ie,se){let ee=L.view.nu(ie);ee.Ds&&(ee=await I_(B.localStore,L.query,!1).then((({documents:x})=>L.view.nu(x,ee))));const ue=se&&se.targetChanges.get(L.targetId),Re=se&&se.targetMismatches.get(L.targetId)!=null,we=L.view.applyChanges(ee,B.isPrimaryClient,ue,Re);return O_(B,L.targetId,we._u),we.snapshot})(n,T,I,b);const l=await I_(n.localStore,e,!0),h=new CP(e,l.qs),f=h.nu(l.documents),m=Pl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,m);O_(n,t,y._u);const v=new PP(e,t,h);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function VP(n,e,t){const i=Se(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Jc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await xf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ip(i.remoteStore,o.targetId),Vf(i,o.targetId)})).catch(Go)):(Vf(i,o.targetId),await xf(i.localStore,o.targetId,!0))}async function bP(n,e){const t=Se(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function LP(n,e,t){const i=$P(n);try{const o=await(function(h,f){const m=Se(h),y=Xe.now(),v=f.reduce(((b,j)=>b.add(j.key)),xe());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let j=Hr(),B=xe();return m.Os.getEntries(b,v).next((L=>{j=L,j.forEach(((ie,se)=>{se.isValidDocument()||(B=B.add(ie))}))})).next((()=>m.localDocuments.getOverlayedDocuments(b,j))).next((L=>{T=L;const ie=[];for(const se of f){const ee=YR(se,T.get(se.key).overlayedDocument);ee!=null&&ie.push(new $i(se.key,ee,RE(ee.value.mapValue),Gn.exists(!0)))}return m.mutationQueue.addMutationBatch(b,y,ie,f)})).next((L=>{I=L;const ie=L.applyToLocalDocumentSet(T,B);return m.documentOverlayCache.saveOverlays(b,L.batchId,ie)}))})).then((()=>({batchId:I.batchId,changes:ME(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,m){let y=h.Ru[h.currentUser.toKey()];y||(y=new tt(Ce)),y=y.insert(f,m),h.Ru[h.currentUser.toKey()]=y})(i,o.batchId,t),await Nl(i,o.changes),await ih(i.remoteStore)}catch(o){const l=Pp(o,"Failed to persist write");t.reject(l)}}async function ww(n,e){const t=Se(n);try{const i=await QC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?je(h.lu,14607):o.removedDocuments.size>0&&(je(h.lu,42227),h.lu=!1))})),await Nl(t,i,e)}catch(i){await Go(i)}}function D_(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const m=Se(h);m.onlineState=f;let y=!1;m.queries.forEach(((v,T)=>{for(const I of T.wa)I.va(f)&&(y=!0)})),y&&kp(m)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MP(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new tt(me.comparator);h=h.insert(l,zt.newNoDocument(l,Te.min()));const f=xe().add(l),m=new th(Te.min(),new Map,new tt(Ce),h,f);await ww(i,m),i.du=i.du.remove(l),i.Eu.delete(e),xp(i)}else await xf(i.localStore,e,!1).then((()=>Vf(i,e,t))).catch(Go)}async function UP(n,e){const t=Se(n),i=e.batch.batchId;try{const o=await KC(t.localStore,e);Iw(t,i,null),Tw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Nl(t,o)}catch(o){await Go(o)}}async function FP(n,e,t){const i=Se(n);try{const o=await(function(h,f){const m=Se(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return m.mutationQueue.lookupMutationBatch(y,f).next((T=>(je(T!==null,37113),v=T.keys(),m.mutationQueue.removeMutationBatch(y,T)))).next((()=>m.mutationQueue.performConsistencyCheck(y))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>m.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);Iw(i,e,t),Tw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Nl(i,o)}catch(o){await Go(o)}}function Tw(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function Iw(n,e,t){const i=Se(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||Sw(n,i)}))}function Sw(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ip(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),xp(n))}function O_(n,e,t){for(const i of t)i instanceof _w?(n.Au.addReference(i.key,e),jP(n,i)):i instanceof vw?(le(Np,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||Sw(n,i.key)):_e(19791,{yu:i})}function jP(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(le(Np,"New document in limbo: "+t),n.Iu.add(i),xp(n))}function xp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new me(He.fromString(e)),i=n.mu.next();n.Eu.set(i,new kP(t)),n.du=n.du.insert(t,i),uw(n.remoteStore,new Ii(cr(pp(t.path)),i,"TargetPurposeLimboResolution",Kc.ue))}}async function Nl(n,e,t){const i=Se(n),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,m)=>{h.push(i.gu(m,e,t).then((y=>{var v;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(y){o.push(y);const T=wp.Es(m.targetId,y);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(m,y){const v=Se(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>X.forEach(y,(I=>X.forEach(I.Is,(b=>v.persistence.referenceDelegate.addReference(T,I.targetId,b))).next((()=>X.forEach(I.ds,(b=>v.persistence.referenceDelegate.removeReference(T,I.targetId,b)))))))))}catch(T){if(!Ko(T))throw T;le(Tp,"Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const b=v.Fs.get(I),j=b.snapshotVersion,B=b.withLastLimboFreeSnapshotVersion(j);v.Fs=v.Fs.insert(I,B)}}})(i.localStore,l))}async function zP(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){le(Np,"User change. New user:",e.toKey());const i=await sw(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new oe(K.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nl(t,i.Bs)}}function BP(n,e){const t=Se(n),i=t.Eu.get(e);if(i&&i.lu)return xe().add(i.key);{let o=xe();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function Aw(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MP.bind(null,e),e.hu.J_=AP.bind(null,e.eventManager),e.hu.pu=RP.bind(null,e.eventManager),e}function $P(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FP.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return GC(this.persistence,new qC,e.initialUser,this.serializer)}Du(e){return new iw(Ep.Vi,this.serializer)}bu(e){return new eP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class qP extends Nc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof Pc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new kC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new iw((i=>Pc.Vi(i,t)),this.serializer)}}class bf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>D_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zP.bind(null,this.syncEngine),await TP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SP})()}createDatastore(e){const t=nh(e.databaseInfo.databaseId),i=(function(l){return new sP(l)})(e.databaseInfo);return(function(l,h,f,m){return new uP(l,h,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new hP(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>D_(this.syncEngine,t,0)),(function(){return R_.C()?new R_:new tP})())}createSyncEngine(e,t){return(function(o,l,h,f,m,y,v){const T=new NP(o,l,h,f,m,y);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Se(o);le(Ps,"RemoteStore shutting down."),l.Ia.add(5),await kl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="FirestoreClient";class WP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=jt.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{le(Ui,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(le(Ui,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function sf(n,e){n.asyncQueue.verifyOperationInProgress(),le(Ui,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await sw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Di("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Di("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function V_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HP(n);le(Ui,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>P_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>P_(e.remoteStore,o))),n._onlineComponents=e}async function HP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Ui,"Using user provided OfflineComponentProvider");try{await sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Di("Error using user provided cache. Falling back to memory cache: "+t),await sf(n,new Nc)}}else le(Ui,"Using default OfflineComponentProvider"),await sf(n,new qP(void 0));return n._offlineComponents}async function Cw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Ui,"Using user provided OnlineComponentProvider"),await V_(n,n._uninitializedComponentsProvider._online)):(le(Ui,"Using default OnlineComponentProvider"),await V_(n,new bf))),n._onlineComponents}function GP(n){return Cw(n).then((e=>e.syncEngine))}async function Pw(n){const e=await Cw(n),t=e.eventManager;return t.onListen=xP.bind(null,e.syncEngine),t.onUnlisten=VP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),t}function KP(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,m,y){const v=new Rw({next:I=>{v.Ou(),h.enqueueAndForget((()=>gw(l,T)));const b=I.docs.has(f);!b&&I.fromCache?y.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&I.fromCache&&m&&m.source==="server"?y.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new yw(pp(f.path),v,{includeMetadataChanges:!0,ka:!0});return mw(l,T)})(await Pw(n),n.asyncQueue,e,t,i))),i.promise}function QP(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,m,y){const v=new Rw({next:I=>{v.Ou(),h.enqueueAndForget((()=>gw(l,T))),I.fromCache&&m.source==="server"?y.reject(new oe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new yw(f,v,{includeMetadataChanges:!0,ka:!0});return mw(l,T)})(await Pw(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firestore.googleapis.com",L_=!0;class M_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nw,this.ssl=L_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:L_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CC)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new nR;switch(i.type){case"firstParty":return new oR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=b_.get(t);i&&(le("ComponentProvider","Removing Datastore"),b_.delete(t),i.terminate())})(this),Promise.resolve()}}function XP(n,e,t,i={}){var o;n=mr(n,sh);const l=zi(e),h=n._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(jc(`https://${m}`),zc("Firestore",!0)),h.host!==Nw&&h.host!==m&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:i});if(!As(y,f)&&(n._setSettings(y),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=jt.MOCK_USER;else{v=vv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new jt(I)}n._authCredentials=new rR(new fE(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rl(t,lt._jsonSchema))return new lt(e,i||null,new me(He.fromString(t.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:mt("string",lt._jsonSchemaVersion),referencePath:mt("string")};class Ni extends Ds{constructor(e,t,i){super(e,t,pp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new me(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function qi(n,e,...t){if(n=ct(n),mE("collection","path",e),n instanceof sh){const i=He.fromString(e,...t);return Xy(i),new Ni(n,null,i)}{if(!(n instanceof lt||n instanceof Ni))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return Xy(i),new Ni(n.firestore,null,i)}}function Jo(n,e,...t){if(n=ct(n),arguments.length===1&&(e=lp.newId()),mE("doc","path",e),n instanceof sh){const i=He.fromString(e,...t);return Qy(i),new lt(n,null,new me(i))}{if(!(n instanceof lt||n instanceof Ni))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return Qy(i),new lt(n.firestore,n instanceof Ni?n.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="AsyncQueue";class F_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new aw(this,"async_queue_retry"),this.oc=()=>{const i=rf();i&&le(U_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=rf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new zr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ko(e))throw e;le(U_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Wr("INTERNAL UNHANDLED ERROR: ",j_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Cp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&_e(47125,{hc:j_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function j_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yo extends sh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new F_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F_(e),this._firestoreClient=void 0,await e}}}function JP(n,e){const t=typeof n=="object"?n:Bc(),i=typeof n=="string"?n:Ic,o=Tl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Gf("firestore");l&&XP(o,...l)}return o}function Dp(n){if(n._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YP(n),n._firestoreClient}function YP(n){var e,t,i;const o=n._freezeSettings(),l=(function(f,m,y,v){return new TR(f,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,kw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new WP(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Vt.fromBase64String(e))}catch(t){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rl(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:mt("string",Rn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(Rl(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:mt("string",dr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rl(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fr(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:mt("string",fr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^__.*__$/;class ek{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class xw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Dw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:n})}}class Op{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Dw(this.Ec)&&ZP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class tk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||nh(e)}Dc(e,t,i,o=!1){return new Op({Ec:e,methodName:t,bc:i,path:Ot.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lh(n){const e=n._freezeSettings(),t=nh(n._databaseId);return new tk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ow(n,e,t,i,o,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);bp("Data must be an object, but it was:",h,i);const f=Vw(i,h);let m,y;if(l.merge)m=new pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const I=Lf(e,T,t);if(!h.contains(I))throw new oe(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Lw(v,I)||v.push(I)}m=new pn(v),y=h.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,y=h.fieldTransforms;return new ek(new rn(f),m,y)}class uh extends ah{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uh}}class Vp extends ah{_toFieldTransform(e){return new KR(e.path,new pl)}isEqual(e){return e instanceof Vp}}function nk(n,e,t,i){const o=n.Dc(1,e,t);bp("Data must be an object, but it was:",o,i);const l=[],h=rn.empty();Bi(i,((m,y)=>{const v=Lp(e,m,t);y=ct(y);const T=o.gc(v);if(y instanceof uh)l.push(v);else{const I=xl(y,T);I!=null&&(l.push(v),h.set(v,I))}}));const f=new pn(l);return new xw(h,f,o.fieldTransforms)}function rk(n,e,t,i,o,l){const h=n.Dc(1,e,t),f=[Lf(e,i,t)],m=[o];if(l.length%2!=0)throw new oe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(Lf(e,l[I])),m.push(l[I+1]);const y=[],v=rn.empty();for(let I=f.length-1;I>=0;--I)if(!Lw(y,f[I])){const b=f[I];let j=m[I];j=ct(j);const B=h.gc(b);if(j instanceof uh)y.push(b);else{const L=xl(j,B);L!=null&&(y.push(b),v.set(b,L))}}const T=new pn(y);return new xw(v,T,h.fieldTransforms)}function ik(n,e,t,i=!1){return xl(t,n.Dc(i?4:3,e))}function xl(n,e){if(bw(n=ct(n)))return bp("Unsupported field value:",e,n),Vw(n,e);if(n instanceof ah)return(function(i,o){if(!Dw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let m=xl(f,o.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Xe.fromDate(i);return{timestampValue:Cc(o.serializer,l)}}if(i instanceof Xe){const l=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cc(o.serializer,l)}}if(i instanceof dr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:XE(o.serializer,i._byteString)};if(i instanceof lt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:_p(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof fr)return(function(h,f){return{mapValue:{fields:{[SE]:{stringValue:AE},[Sc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.wc("VectorValues must only contain numeric values.");return mp(f.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Gc(i)}`)})(n,e)}function Vw(n,e){const t={};return _E(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(n,((i,o)=>{const l=xl(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function bw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof dr||n instanceof Rn||n instanceof lt||n instanceof ah||n instanceof fr)}function bp(n,e,t){if(!bw(t)||!gE(t)){const i=Gc(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Lf(n,e,t){if((e=ct(e))instanceof oh)return e._internalPath;if(typeof e=="string")return Lp(n,e);throw xc("Field path arguments must be of type string or ",n,!1,void 0,t)}const sk=new RegExp("[~\\*/\\[\\]]");function Lp(n,e,t){if(e.search(sk)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new oe(K.INVALID_ARGUMENT,f+n+m)}function Lw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ch("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ok extends Mw{data(){return super.data()}}function ch(n,e){return typeof e=="string"?Lp(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class Uw extends Mp{}function hh(n,e,...t){let i=[];e instanceof Mp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof Up)).length,f=l.filter((m=>m instanceof dh)).length;if(h>1||h>0&&f>0)throw new oe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class dh extends Uw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new dh(e,t,i)}_apply(e){const t=this._parse(e);return Fw(e._query,t),new Ds(e.firestore,e.converter,Af(e._query,t))}_parse(e){const t=lh(e.firestore);return(function(l,h,f,m,y,v,T){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new oe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){B_(T,v);const j=[];for(const B of T)j.push(z_(m,l,B));I={arrayValue:{values:j}}}else I=z_(m,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||B_(T,v),I=ik(f,h,T,v==="in"||v==="not-in");return pt.create(y,v,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fh(n,e,t){const i=e,o=ch("where",n);return dh._create(o,i,t)}class Up extends Mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const m of f)Fw(h,m),h=Af(h,m)})(e._query,t),new Ds(e.firestore,e.converter,Af(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fp extends Uw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fl(l,h)})(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new Qo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function jp(n,e="asc"){const t=e,i=ch("orderBy",n);return Fp._create(i,t)}function z_(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new oe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OE(e)&&t.indexOf("/")!==-1)throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(He.fromString(t));if(!me.isDocumentKey(i))throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return i_(n,new me(i))}if(t instanceof lt)return i_(n,t._key);throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(t)}.`)}function B_(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fw(n,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lk{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Bi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Sc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>at(h.doubleValue)));return new fr(l)}convertGeoPoint(e){return new dr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Xc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=He.fromString(e);je(nw(i),9688,{name:e});const o=new hl(i.get(1),i.get(3)),l=new me(i.popFirst(5));return o.isEqual(t)||Wr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends Mw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ch("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ss._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:mt("string",Ss._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class dc extends Ss{data(e={}){return super.data(e)}}class Vo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new dc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const m=new dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:uk(f.type),doc:m,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n){n=mr(n,lt);const e=mr(n.firestore,Yo);return KP(Dp(e),n._key).then((t=>hk(e,n,t)))}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:mt("string",Vo._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class Bw extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,t)}}function Dl(n){n=mr(n,Ds);const e=mr(n.firestore,Yo),t=Dp(e),i=new Bw(e);return ak(n._query),QP(t,n._query).then((o=>new Vo(e,i,n,o)))}function $w(n,e,t){n=mr(n,lt);const i=mr(n.firestore,Yo),o=jw(n.converter,e,t);return Bp(i,[Ow(lh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Gn.none())])}function ck(n,e,t,...i){n=mr(n,lt);const o=mr(n.firestore,Yo),l=lh(o);let h;return h=typeof(e=ct(e))=="string"||e instanceof oh?rk(l,"updateDoc",n._key,e,t,i):nk(l,"updateDoc",n._key,e),Bp(o,[h.toMutation(n._key,Gn.exists(!0))])}function zp(n,e){const t=mr(n.firestore,Yo),i=Jo(n),o=jw(n.converter,e);return Bp(t,[Ow(lh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Gn.exists(!1))]).then((()=>i))}function Bp(n,e){return(function(i,o){const l=new zr;return i.asyncQueue.enqueueAndForget((async()=>LP(await GP(i),o,l))),l.promise})(Dp(n),e)}function hk(n,e,t){const i=t.docs.get(e._key),o=new Bw(n);return new Ss(n,o,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}function Mf(){return new Vp("serverTimestamp")}(function(e,t=!0){(function(o){Ho=o})(ks),xi(new Br("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new Yo(new iR(i.getProvider("auth-internal")),new aR(h,i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(y.options.projectId,v)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Pn(qy,Wy,e),Pn(qy,Wy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="type.googleapis.com/google.protobuf.Int64Value",fk="type.googleapis.com/google.protobuf.UInt64Value";function qw(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Dc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Dc(e));if(typeof n=="function"||typeof n=="object")return qw(n,e=>Dc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function zo(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case dk:case fk:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>zo(e)):typeof n=="function"||typeof n=="object"?qw(n,e=>zo(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class sn extends Qn{constructor(e,t,i){super(`${$p}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,sn.prototype)}}function pk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Oc(n,e){let t=pk(n),i=t,o;try{const l=e&&e.error;if(l){const h=l.status;if(typeof h=="string"){if(!$_[h])return new sn("internal","internal");t=$_[h],i=h}const f=l.message;typeof f=="string"&&(i=f),o=l.details,o!==void 0&&(o=zo(o))}}catch{}return t==="ok"?null:new sn(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o==null||o.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="us-central1",gk=/^data: (.*?)(?:\n|$)/;function yk(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new sn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class _k{constructor(e,t,i,o,l=Uf,h=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new mk(e,t,i,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(l);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Uf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function vk(n,e,t){const i=zi(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(jc(n.emulatorOrigin),zc("Functions",!0))}function Ek(n,e,t){const i=o=>Tk(n,e,o,{});return i.stream=(o,l)=>Sk(n,e,o,l),i}async function wk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function Ww(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Tk(n,e,t,i){const o=n._url(e);return Ik(n,o,t,i)}async function Ik(n,e,t,i){t=Dc(t);const o={data:t},l=await Ww(n,i),h=i.timeout||7e4,f=yk(h),m=await Promise.race([wk(e,o,l,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new sn("cancelled","Firebase Functions instance was deleted.");const y=Oc(m.status,m.json);if(y)throw y;if(!m.json)throw new sn("internal","Response is not valid JSON object.");let v=m.json.data;if(typeof v>"u"&&(v=m.json.result),typeof v>"u")throw new sn("internal","Response is missing data field.");return{data:zo(v)}}function Sk(n,e,t,i){const o=n._url(e);return Ak(n,o,t,i||{})}async function Ak(n,e,t,i){var o;t=Dc(t);const l={data:t},h=await Ww(n,i);h["Content-Type"]="application/json",h.Accept="text/event-stream";let f;try{f=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:h,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const B=new sn("cancelled","Request was cancelled.");return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}const j=Oc(0,null);return{data:Promise.reject(j),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(j)}}}}}}let m,y;const v=new Promise((b,j)=>{m=b,y=j});(o=i==null?void 0:i.signal)===null||o===void 0||o.addEventListener("abort",()=>{const b=new sn("cancelled","Request was cancelled.");y(b)});const T=f.body.getReader(),I=Rk(T,m,y,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=I.getReader();return{async next(){const{value:j,done:B}=await b.read();return{value:j,done:B}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:v}}function Rk(n,e,t,i){const o=(h,f)=>{const m=h.match(gk);if(!m)return;const y=m[1];try{const v=JSON.parse(y);if("result"in v){e(zo(v.result));return}if("message"in v){f.enqueue(zo(v.message));return}if("error"in v){const T=Oc(0,v);f.error(T),t(T);return}}catch(v){if(v instanceof sn){f.error(v),t(v);return}}},l=new TextDecoder;return new ReadableStream({start(h){let f="";return m();async function m(){if(i!=null&&i.aborted){const y=new sn("cancelled","Request was cancelled");return h.error(y),t(y),Promise.resolve()}try{const{value:y,done:v}=await n.read();if(v){f.trim()&&o(f.trim(),h),h.close();return}if(i!=null&&i.aborted){const I=new sn("cancelled","Request was cancelled");h.error(I),t(I),await n.cancel();return}f+=l.decode(y,{stream:!0});const T=f.split(`
`);f=T.pop()||"";for(const I of T)I.trim()&&o(I.trim(),h);return m()}catch(y){const v=y instanceof sn?y:Oc(0,null);h.error(v),t(v)}}},cancel(){return n.cancel()}})}const q_="@firebase/functions",W_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="auth-internal",Pk="app-check-internal",kk="messaging-internal";function Nk(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(Ck),h=t.getProvider(kk),f=t.getProvider(Pk);return new _k(o,l,h,f,i)};xi(new Br($p,e,"PUBLIC").setMultipleInstances(!0)),Pn(q_,W_,n),Pn(q_,W_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n=Bc(),e=Uf){const i=Tl(ct(n),$p).getImmediate({identifier:e}),o=Gf("functions");return o&&Dk(i,...o),i}function Dk(n,e,t){vk(ct(n),e,t)}function Hw(n,e,t){return Ek(ct(n),e)}Nk();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="firebasestorage.googleapis.com",Ok="storageBucket",Vk=120*1e3,bk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Qn{constructor(e,t,i=0){super(of(e),`Firebase Storage: ${t} (${of(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return of(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yr||(yr={}));function of(n){return"storage/"+n}function Lk(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(yr.UNKNOWN,n)}function Mk(){return new _r(yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Uk(){return new _r(yr.CANCELED,"User canceled the upload/download.")}function Fk(n){return new _r(yr.INVALID_URL,"Invalid URL '"+n+"'.")}function jk(n){return new _r(yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function H_(n){return new _r(yr.INVALID_ARGUMENT,n)}function Kw(){return new _r(yr.APP_DELETED,"The Firebase app was deleted.")}function zk(n){return new _r(yr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Wn.makeFromUrl(e,t)}catch{return new Wn(e,"")}if(i.path==="")return i;throw jk(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const h="(/(.*))?$",f=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function y(ue){ue.path_=decodeURIComponent(ue.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",b=new RegExp(`^https?://${T}/${v}/b/${o}/o${I}`,"i"),j={bucket:1,path:3},B=t===Gw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",ie=new RegExp(`^https?://${B}/${o}/${L}`,"i"),ee=[{regex:f,indices:m,postModify:l},{regex:b,indices:j,postModify:y},{regex:ie,indices:{bucket:1,path:2},postModify:y}];for(let ue=0;ue<ee.length;ue++){const Re=ee[ue],we=Re.regex.exec(e);if(we){const x=we[Re.indices.bucket];let S=we[Re.indices.path];S||(S=""),i=new Wn(x,S),Re.postModify(i);break}}if(i==null)throw Fk(e);return i}}class Bk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n,e,t){let i=1,o=null,l=null,h=!1,f=0;function m(){return f===2}let y=!1;function v(...L){y||(y=!0,e.apply(null,L))}function T(L){o=setTimeout(()=>{o=null,n(b,m())},L)}function I(){l&&clearTimeout(l)}function b(L,...ie){if(y){I();return}if(L){I(),v.call(null,L,...ie);return}if(m()||h){I(),v.call(null,L,...ie);return}i<64&&(i*=2);let ee;f===1?(f=2,ee=0):ee=(i+Math.random())*1e3,T(ee)}let j=!1;function B(L){j||(j=!0,I(),!y&&(o!==null?(L||(f=2),clearTimeout(o),T(0)):L||(f=1)))}return T(0),l=setTimeout(()=>{h=!0,B(!0)},t),B}function qk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return n!==void 0}function G_(n,e,t,i){if(i<e)throw H_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw H_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Hk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Vc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vc||(Vc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t,i,o,l,h,f,m,y,v,T,I=!0,b=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=f,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=T,this.retry=I,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,B)=>{this.resolve_=j,this.reject_=B,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new tc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=f=>{const m=f.loaded,y=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,y)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const f=l.getErrorCode()===Vc.NO_ERROR,m=l.getStatus();if(!f||Gk(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Vc.ABORT;i(!1,new tc(!1,null,v));return}const y=this.successCodes_.indexOf(m)!==-1;i(!0,new tc(y,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());Wk(m)?l(m):l()}catch(m){h(m)}else if(f!==null){const m=Lk();m.serverResponse=f.getErrorText(),this.errorCallback_?h(this.errorCallback_(f,m)):h(m)}else if(o.canceled){const m=this.appDelete_?Kw():Uk();h(m)}else{const m=Mk();h(m)}};this.canceled_?t(!1,new tc(!1,null,!0)):this.backoffId_=$k(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Qk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Xk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Jk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Yk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Zk(n,e,t,i,o,l,h=!0,f=!1){const m=Hk(n.urlParams),y=n.url+m,v=Object.assign({},n.headers);return Jk(v,e),Qk(v,t),Xk(v,l),Yk(v,i),new Kk(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,h,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function tN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this._service=e,t instanceof Wn?this._location=t:this._location=Wn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bc(e,t)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tN(this._location.path)}get storage(){return this._service}get parent(){const e=eN(this._location.path);if(e===null)return null;const t=new Wn(this._location.bucket,e);return new bc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw zk(e)}}function K_(n,e){const t=e==null?void 0:e[Ok];return t==null?null:Wn.makeFromBucketSpec(t,n)}function nN(n,e,t,i={}){n.host=`${e}:${t}`;const o=zi(e);o&&(jc(`https://${n.host}/b`),zc("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:vv(l,n.app.options.projectId))}class rN{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=Gw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vk,this._maxUploadRetryTime=bk,this._requests=new Set,o!=null?this._bucket=Wn.makeFromBucketSpec(o,this._host):this._bucket=K_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=K_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){G_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){G_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bc(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new Bk(Kw());{const h=Zk(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const Q_="@firebase/storage",X_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="storage";function iN(n=Bc(),e){n=ct(n);const i=Tl(n,Qw).getImmediate({identifier:e}),o=Gf("storage");return o&&sN(i,...o),i}function sN(n,e,t,i={}){nN(n,e,t,i)}function oN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new rN(t,i,o,e,ks)}function aN(){xi(new Br(Qw,oN,"PUBLIC").setMultipleInstances(!0)),Pn(Q_,X_,""),Pn(Q_,X_,"esm2017")}aN();const lN={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},ph=Tv(lN),on=eR(ph),mn=JP(ph);iN(ph);const Xw=xk(ph,"us-central1");BA(on,Kv);Hw(Xw,"bootstrapFirstAdmin");const uN=Hw(Xw,"setUserRole");async function cN(n,e){return(await uN({uid:n,role:e})).data}async function J_(){return on.currentUser?on.currentUser.getIdTokenResult(!0):null}async function Ff(n){const e=n??on.currentUser;if(!e)return null;try{const i=(await e.getIdTokenResult()).claims.role;return i==="admin"||i==="trainer"||i==="client"?i:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const l=(await e.getIdTokenResult()).claims.role;return l==="admin"||l==="trainer"||l==="client"?l:null}catch{return await qc(on),null}throw t}}function mh(){return{createdAt:Mf(),updatedAt:Mf()}}function Jw(){return{updatedAt:Mf()}}function vr(){var e;const n=(e=on.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function Lc(n={}){const e=vr(),t=Jo(mn,"users",e);return await $w(t,{uid:e,...mh(),...n},{merge:!0}),t}async function Yw(n){const e=n??vr();return zw(Jo(mn,"users",e))}async function hN(n,e){const t=vr();await $w(Jo(mn,"users",t,"private",n),{...e,...Jw()},{merge:!0})}async function dN(){return Dl(qi(mn,"users"))}async function fN(n,e){return zw(Jo(mn,"users",n,"private",e))}async function pN(n){const e=vr();return zp(qi(mn,"plans"),{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...mh()})}async function Zw(n,e){const t=vr(),i=n==="client"?"clientId":"trainerId",o=hh(qi(mn,"plans"),fh(i,"==",t));return Dl(o)}async function mN(n,e){await ck(Jo(mn,"plans",n),{...e,...Jw()})}async function gN(n){const e=vr();return zp(qi(mn,"workoutLogs"),{trainerId:n.trainerId,clientId:e,sessionDate:n.sessionDate,notes:n.notes??"",durationMinutes:n.durationMinutes??null,trainerFeedback:"",...mh()})}async function yN(n){const e=vr(),t=hh(qi(mn,"workoutLogs"),fh("clientId","==",e),jp("sessionDate","desc"));return Dl(t)}async function _N(n,e){const t=vr(),o=hh(qi(mn,"sessions"),fh("clientId","==",t),jp("startsAt","desc"));return Dl(o)}async function vN(n){const e=vr();return zp(qi(mn,"metrics"),{trainerId:n.trainerId,clientId:e,metricType:n.metricType,value:n.value,unit:n.unit,measuredAt:n.measuredAt,...mh()})}async function EN(n){const e=vr(),t=hh(qi(mn,"metrics"),fh("clientId","==",e),jp("measuredAt","desc"));return Dl(t)}function Zo(){const[n,e]=Q.useState(!0),[t,i]=Q.useState(on.currentUser),[o,l]=Q.useState(null);return Q.useEffect(()=>Wv(on,async h=>{try{if(e(!0),i(h),!h){l(null);return}await qp(h);const f=await Ff(h);l(f)}catch(f){(typeof f=="object"&&f&&"code"in f?String(f.code):"").includes("user-token-expired")&&(await qc(on),i(null)),l(null)}finally{e(!1)}}),[]),Q.useMemo(()=>({initializing:n,user:t,role:o,isAuthenticated:!!t}),[n,t,o])}const jf=new Ur;jf.setCustomParameters({prompt:"select_account"});async function qp(n){(await Yw(n.uid)).exists()||await Lc({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function Y_(){try{const n=await l1(on,jf);return await qp(n.user),{redirected:!1,user:n.user}}catch(n){if(TN(n))return await p1(on,jf),{redirected:!0,user:null};throw n}}async function wN(){try{const n=await g1(on);return n!=null&&n.user&&await qp(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await qc(on),null;throw n}}async function yl(){return qc(on)}function TN(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}const IN=["lrnz.sga@gmail.com"];function e0(n){return n.trim().toLowerCase()}function SN(n){const e=IN.join(",");return new Set(e.split(",").map(e0).filter(Boolean))}const AN=SN();function af(n){return n?AN.has(e0(n)):!1}function nc(n){return n.map(e=>({id:e.id,...e.data()}))}function lr(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const vs="bw_login_intent";function RN(){const{user:n,role:e}=Zo(),t=vl(),{showError:i}=Uc(),[o,l]=Q.useState(!1),[h,f]=Q.useState(""),[m,y]=Q.useState(!1);if(Q.useEffect(()=>{async function I(){try{await wN()}catch(b){const j=lr(b);f(j),i(j)}}I()},[i]),Q.useEffect(()=>{async function I(){if(!(!n||e||sessionStorage.getItem(vs)!=="coach"||!af(n.email))){y(!0),f("Sto preparando il tuo accesso coach...");try{await Lc({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let j=0;j<10;j+=1){await J_();const B=await Ff(n);if(B==="admin"||B==="trainer"){sessionStorage.removeItem(vs),t("/app/coach",{replace:!0});return}await new Promise(L=>setTimeout(L,700))}f("Sto ancora completando laccesso. Riprova tra pochi secondi.")}catch(j){const B=lr(j);f(B),i(B)}finally{y(!1)}}}I()},[n,e,t]),n&&e)return sessionStorage.removeItem(vs),k.jsx(Cn,{to:e==="client"?"/app/client":"/app/coach",replace:!0});if(n&&!e)return sessionStorage.getItem(vs)==="coach"&&af(n.email)?k.jsx("main",{className:"page page-center",children:k.jsxs("section",{className:"card auth-card",children:[k.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),k.jsx("h1",{children:"Accesso Coach"}),k.jsx("p",{className:"hero-sub",children:m?"Attendi un attimo...":"Sto verificando il tuo account."}),h?k.jsx("p",{className:"message",children:h}):null,k.jsx("button",{className:"btn btn-ghost",disabled:m,onClick:()=>void yl(),type:"button",children:"Esci e cambia account"})]})}):k.jsx(Cn,{to:"/app/client",replace:!0});async function v(){l(!0),f("");try{if(sessionStorage.setItem(vs,"client"),(await Y_()).redirected){f("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(I){const b=lr(I);f(b),i(b)}finally{l(!1)}}async function T(){l(!0),f("");try{sessionStorage.setItem(vs,"coach");const I=await Y_();if(I.redirected){f("Ti sto reindirizzando a Google...");return}if(!I.user){f("Accesso non completato. Riprova.");return}if(!af(I.user.email)){await yl(),f("Questo account non  abilitato per larea coach. Usa accesso utente."),i("Questo account non  abilitato per larea coach.");return}await Lc({email:I.user.email??"",displayName:I.user.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let b=0;b<8;b+=1){await J_();const j=await Ff(I.user);if(j==="admin"||j==="trainer"){sessionStorage.removeItem(vs),t("/app/coach",{replace:!0});return}await new Promise(B=>setTimeout(B,700))}f("Sto ancora completando laccesso coach. Riprova tra qualche secondo.")}catch(I){const b=lr(I);f(b),i(b)}finally{l(!1)}}return k.jsx("main",{className:"page page-center",children:k.jsxs("section",{className:"card auth-card",children:[k.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),k.jsx("h1",{children:"Accedi con Google"}),k.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),k.jsx("button",{className:"btn",disabled:o,onClick:()=>void v(),type:"button",children:o?"Connessione...":"Continua con Google"}),k.jsx("div",{className:"divider"}),k.jsx("h2",{children:"Sei un Coach?"}),k.jsx("p",{className:"hint",children:"Usa il tuo account coach per entrare nell'area professionale."}),k.jsx("button",{className:"btn btn-ghost",disabled:o,onClick:()=>void T(),type:"button",children:"Continua come Coach"}),h?k.jsx("p",{className:"message",children:h}):null]})})}function t0({role:n,title:e,subtitle:t,children:i}){return k.jsxs("main",{className:"page",children:[k.jsxs("section",{className:"hero",children:[k.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),k.jsx("h1",{children:e}),k.jsx("p",{className:"hero-sub",children:t}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void yl(),children:"Esci dal profilo"})]}),k.jsx("section",{className:"stack",children:i}),k.jsxs("nav",{className:"mobile-nav",children:[k.jsx(_I,{to:n==="client"?"/app/client":"/app/coach",children:"Home"}),k.jsx("button",{type:"button",onClick:()=>void yl(),children:"Esci"})]})]})}function CN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="string"?t.reps:"",weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function PN(){const{role:n,user:e}=Zo(),t=vl(),{showError:i,showSuccess:o}=Uc(),[l,h]=Q.useState([]),[f,m]=Q.useState([]),[y,v]=Q.useState([]),[T,I]=Q.useState([]),[b,j]=Q.useState(!1),[B,L]=Q.useState(""),[ie,se]=Q.useState(""),[ee,ue]=Q.useState(""),[Re,we]=Q.useState("weight"),[x,S]=Q.useState(0),[C,N]=Q.useState("kg"),[V,M]=Q.useState(""),[R,Ge]=Q.useState(!0);Q.useEffect(()=>{async function G(){if(e)try{const W=(await Yw(e.uid)).data();if(!(W!=null&&W.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{Ge(!1)}}G()},[e,t]);async function it(){var G;j(!0);try{const[O,W,he,Ae]=await Promise.all([Zw("client"),_N("client"),yN(),EN()]),Ie=nc(O.docs);h(Ie),m(nc(W.docs)),v(nc(he.docs)),I(nc(Ae.docs)),!B&&((G=Ie[0])!=null&&G.trainerId)&&L(Ie[0].trainerId)}catch(O){i(lr(O))}finally{j(!1)}}Q.useEffect(()=>{n==="client"&&it()},[n]);const nt=Q.useMemo(()=>[...f].sort((G,O)=>new Date(G.startsAt).getTime()-new Date(O.startsAt).getTime()).find(G=>new Date(G.startsAt).getTime()>Date.now()),[f]),ke=l[0],H=CN(ke==null?void 0:ke.exercises);if(!e)return k.jsx(Cn,{to:"/auth",replace:!0});if(R)return k.jsx("main",{className:"page page-center",children:k.jsxs("section",{className:"card auth-card",children:[k.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),k.jsx("h1",{children:"Prepariamo la tua area"}),k.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})});async function te(G,O){j(!0);try{await G(),o(O),await it()}catch(W){i(lr(W))}finally{j(!1)}}return k.jsxs(t0,{role:"client",subtitle:"Tieni traccia di allenamenti e progressi in modo semplice.",title:"La tua area",children:[k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Riepilogo"}),k.jsxs("p",{className:"hint",children:["Programmi ricevuti: ",l.length]}),k.jsxs("p",{className:"hint",children:["Sessioni prenotate: ",f.length]}),k.jsxs("p",{className:"hint",children:["Allenamenti registrati: ",y.length]}),k.jsxs("p",{className:"hint",children:["Progressi inseriti: ",T.length]}),nt?k.jsxs("p",{className:"message success",children:["Prossima sessione: ",new Date(nt.startsAt).toLocaleString("it-IT")]}):null]}),k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"La tua scheda tecnica"}),ke?k.jsxs(k.Fragment,{children:[k.jsx("p",{className:"hint",children:k.jsx("strong",{children:ke.title})}),k.jsx("ul",{className:"list",children:H.map((G,O)=>k.jsxs("li",{children:[k.jsx("strong",{children:G.name||`Esercizio ${O+1}`}),"  ",G.sets??"-"," serie","  ",G.reps||"-"," reps","  ",G.weight||"-",G.mediaUrl?k.jsxs(k.Fragment,{children:["  ",k.jsx("a",{href:G.mediaUrl,target:"_blank",rel:"noreferrer",children:"Video/Immagine"})]}):null]},`plan-ex-${O}`))})]}):k.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]}),k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Codice Coach"}),k.jsxs("label",{children:["Codice del tuo coach",k.jsx("input",{value:B,onChange:G=>L(G.target.value),placeholder:"Inserisci il codice coach"})]})]}),k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Registra allenamento"}),k.jsxs("label",{children:["Data allenamento",k.jsx("input",{value:ie,onChange:G=>se(G.target.value),type:"date"})]}),k.jsxs("label",{children:["Com' andata?",k.jsx("textarea",{value:ee,onChange:G=>ue(G.target.value),placeholder:"Scrivi come ti sei sentito durante l'allenamento"})]}),k.jsx("button",{className:"btn",disabled:!B||!ie||b,onClick:()=>void te(()=>gN({trainerId:B,sessionDate:ie,notes:ee}),"Allenamento salvato."),type:"button",children:"Salva allenamento"})]}),k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Aggiorna progressi"}),k.jsxs("label",{children:["Tipo di dato",k.jsx("input",{value:Re,onChange:G=>we(G.target.value),placeholder:"Es. peso, massa grassa, frequenza"})]}),k.jsxs("label",{children:["Valore",k.jsx("input",{value:x,onChange:G=>S(Number(G.target.value)),type:"number"})]}),k.jsxs("label",{children:["Unit",k.jsx("input",{value:C,onChange:G=>N(G.target.value),placeholder:"Es. kg, %, bpm"})]}),k.jsxs("label",{children:["Data",k.jsx("input",{value:V,onChange:G=>M(G.target.value),type:"date"})]}),k.jsx("button",{className:"btn",disabled:!B||!V||b,onClick:()=>void te(()=>vN({trainerId:B,metricType:Re,value:x,unit:C,measuredAt:V}),"Progresso salvato."),type:"button",children:"Salva progresso"})]}),k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Ultimi allenamenti"}),k.jsx("ul",{className:"list",children:y.slice(0,5).map(G=>k.jsxs("li",{children:[k.jsx("strong",{children:G.sessionDate}),"  ",G.notes||"Nessuna nota"]},G.id))})]}),b?k.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function Si(n){return typeof n=="string"?n:n==null?"":String(n)}function kN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:Si(t.name),sets:Number(t.sets??3)||3,reps:Si(t.reps)||"10",weight:Si(t.weight),mediaUrl:Si(t.mediaUrl)}}).filter(e=>!!e):[]}function NN(){var nt,ke;const{role:n,user:e}=Zo(),{showError:t,showSuccess:i}=Uc(),[o,l]=Q.useState([]),[h,f]=Q.useState([]),[m,y]=Q.useState(!1),[v,T]=Q.useState(null),[I,b]=Q.useState(!1),[j,B]=Q.useState(""),[L,ie]=Q.useState(""),[se,ee]=Q.useState([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]),[ue,Re]=Q.useState(""),[we,x]=Q.useState("client"),S=h.find(H=>H.clientId===j);Q.useEffect(()=>{async function H(){if(!j){T(null);return}try{const te=await fN(j,"onboarding");T(te.data()??null)}catch{T(null)}}H()},[j]),Q.useEffect(()=>{if(!j)return;if(!S){ie(""),ee([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]);return}ie(S.title??"");const H=kN(S.exercises).filter(te=>te.name.trim().length>0);ee(H.length>0?H:[{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])},[j,S==null?void 0:S.id]);async function C(){var H;if(n){y(!0);try{const O=(await dN()).docs.map(W=>({id:W.id,...W.data()})).filter(W=>W.id!==(e==null?void 0:e.uid)).sort((W,he)=>{const Ae=Si(W.displayName||W.email||W.id).toLowerCase(),Ie=Si(he.displayName||he.email||he.id).toLowerCase();return Ae.localeCompare(Ie)});l(O),!j&&((H=O[0])!=null&&H.id)&&B(O[0].id);try{const W=await Zw(n);f(W.docs.map(he=>({id:he.id,...he.data()})))}catch(W){f([]),t(lr(W))}}catch(te){t(lr(te))}finally{y(!1)}}}Q.useEffect(()=>{C()},[n,e==null?void 0:e.uid]);async function N(H,te){y(!0);try{await H(),i(te),await C()}catch(G){t(lr(G))}finally{y(!1)}}function V(){ee(H=>[...H,{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])}function M(H){ee(te=>te.length<=1?te:te.filter((G,O)=>O!==H))}function R(H,te){ee(G=>G.map((O,W)=>W===H?{...O,...te}:O))}async function Ge(){const H=se.map(te=>({name:te.name.trim(),sets:Number(te.sets)||0,reps:te.reps.trim(),weight:te.weight.trim(),mediaUrl:te.mediaUrl.trim()})).filter(te=>te.name.length>0);if(H.length===0){t("Aggiungi almeno un esercizio con nome.");return}S?await N(()=>mN(S.id,{title:L,status:"active",exercises:H}),"Scheda aggiornata con successo."):await N(()=>pN({clientId:j,title:L,status:"active",exercises:H}),"Scheda creata e subito visibile al cliente."),b(!1)}function it(){if(!j){t("Seleziona prima un cliente.");return}if(!L.trim()){t("Inserisci un titolo per la scheda.");return}b(!0)}return k.jsxs(t0,{role:n==="trainer"?"trainer":"admin",subtitle:"Gestisci clienti, programmi e appuntamenti da un unico posto.",title:"Area Coach",children:[k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Crea scheda cliente"}),k.jsxs("label",{children:["Clienti registrati",k.jsxs("select",{value:j,onChange:H=>B(H.target.value),children:[o.length===0?k.jsx("option",{value:"",children:"Nessun cliente disponibile"}):null,o.map(H=>k.jsx("option",{value:H.id,children:Si(H.displayName).trim()||Si(H.email)||H.id},H.id))]})]}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void C(),children:"Aggiorna lista clienti"}),k.jsxs("label",{children:["Titolo programma",k.jsx("input",{value:L,onChange:H=>ie(H.target.value),placeholder:"Forza 4 settimane"})]}),k.jsx("p",{className:"hint",children:S?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),k.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[k.jsx("h2",{children:"Informazioni del cliente"}),k.jsxs("p",{className:"hint",children:["Obiettivo: ",((nt=v==null?void 0:v.goal)==null?void 0:nt.trim())||"Non disponibile"]}),k.jsxs("p",{className:"hint",children:["Livello: ",(v==null?void 0:v.experienceLevel)||"Non disponibile"]}),k.jsxs("p",{className:"hint",children:["Allenamenti a settimana: ",(v==null?void 0:v.trainingDaysPerWeek)??"Non disponibile"]}),k.jsxs("p",{className:"hint",children:["Note: ",((ke=v==null?void 0:v.notes)==null?void 0:ke.trim())||"Nessuna nota inserita"]})]}),k.jsx("button",{className:"btn",disabled:!j||!L||m,onClick:it,type:"button",children:S?"Modifica scheda":"Crea scheda"})]}),I?k.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:k.jsxs("article",{className:"card modal-card",children:[k.jsx("h2",{children:S?"Modifica scheda":"Compila la scheda"}),k.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),se.map((H,te)=>k.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[k.jsxs("h2",{children:["Esercizio ",te+1]}),k.jsxs("label",{children:["Nome esercizio",k.jsx("input",{value:H.name,onChange:G=>R(te,{name:G.target.value}),placeholder:"Es. Squat bilanciere"})]}),k.jsxs("label",{children:["Numero serie",k.jsx("input",{type:"number",min:1,value:H.sets,onChange:G=>R(te,{sets:Number(G.target.value)})})]}),k.jsxs("label",{children:["Ripetizioni",k.jsx("input",{value:H.reps,onChange:G=>R(te,{reps:G.target.value}),placeholder:"Es. 8-10"})]}),k.jsxs("label",{children:["Peso",k.jsx("input",{value:H.weight,onChange:G=>R(te,{weight:G.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),k.jsxs("label",{children:["URL video o immagine",k.jsx("input",{value:H.mediaUrl,onChange:G=>R(te,{mediaUrl:G.target.value}),placeholder:"https://..."})]}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>M(te),children:"Rimuovi esercizio"})]},`exercise-${te}`)),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:V,children:"Aggiungi esercizio"}),k.jsx("button",{className:"btn",type:"button",disabled:m,onClick:()=>void Ge(),children:S?"Salva modifiche":"Salva scheda tecnica"}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>b(!1),children:"Chiudi"})]})}):null,n==="admin"?k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Gestione accessi"}),k.jsxs("label",{children:["Codice utente",k.jsx("input",{value:ue,onChange:H=>Re(H.target.value),placeholder:"Inserisci il codice utente"})]}),k.jsxs("label",{children:["Profilo accesso",k.jsxs("select",{value:we,onChange:H=>x(H.target.value),children:[k.jsx("option",{value:"admin",children:"Admin"}),k.jsx("option",{value:"trainer",children:"Coach"}),k.jsx("option",{value:"client",children:"Cliente"})]})]}),k.jsx("button",{className:"btn",disabled:!ue||m,onClick:()=>void N(()=>cN(ue,we),"Accesso aggiornato."),type:"button",children:"Aggiorna accesso"})]}):null,k.jsxs("article",{className:"card",children:[k.jsx("h2",{children:"Panoramica"}),k.jsxs("p",{className:"hint",children:["Clienti registrati: ",o.length]}),k.jsxs("p",{className:"hint",children:["Programmi creati: ",h.length]}),k.jsx("ul",{className:"list",children:h.slice(0,5).map(H=>{var te;return k.jsxs("li",{children:[k.jsx("strong",{children:H.title}),"  ",((te=H.exercises)==null?void 0:te.length)??0," esercizi  cliente ",H.clientId]},H.id)})})]}),m?k.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function xN(){const{user:n,role:e}=Zo(),t=vl(),{showError:i,showSuccess:o}=Uc(),[l,h]=Q.useState((n==null?void 0:n.displayName)??""),[f,m]=Q.useState(""),[y,v]=Q.useState("beginner"),[T,I]=Q.useState(3),[b,j]=Q.useState(""),[B,L]=Q.useState(!1);if(!n)return k.jsx(Cn,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return k.jsx(Cn,{to:"/app/coach",replace:!0});const ie=n.email??"";async function se(){L(!0);try{await Lc({displayName:l.trim(),email:ie,role:"client",requestedRole:"client",onboardingStatus:"completed",onboardingCompleted:!0,onboardingUpdatedAt:new Date().toISOString()}),await hN("onboarding",{goal:f.trim(),experienceLevel:y,trainingDaysPerWeek:T,notes:b.trim()}),o("Perfetto, profilo salvato."),t("/app/client",{replace:!0})}catch(ee){i(lr(ee))}finally{L(!1)}}return k.jsx("main",{className:"page page-center",children:k.jsxs("section",{className:"card auth-card",children:[k.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),k.jsx("h1",{children:"Partiamo con i tuoi obiettivi"}),k.jsxs("p",{className:"hero-sub",children:["Completa queste informazioni per iniziare al meglio. Account: ",k.jsx("strong",{children:ie})]}),k.jsxs("label",{children:["Come ti chiami?",k.jsx("input",{value:l,onChange:ee=>h(ee.target.value),placeholder:"Nome e cognome"})]}),k.jsxs("label",{children:["Qual  il tuo obiettivo?",k.jsx("input",{value:f,onChange:ee=>m(ee.target.value),placeholder:"Es. perdere peso, aumentare forza, tonificare"})]}),k.jsxs("label",{children:["Livello di allenamento",k.jsxs("select",{value:y,onChange:ee=>v(ee.target.value),children:[k.jsx("option",{value:"beginner",children:"Principiante"}),k.jsx("option",{value:"intermediate",children:"Intermedio"}),k.jsx("option",{value:"advanced",children:"Avanzato"})]})]}),k.jsxs("label",{children:["Quanti giorni ti alleni a settimana?",k.jsx("input",{value:T,onChange:ee=>I(Number(ee.target.value)),type:"number",min:1,max:7})]}),k.jsxs("label",{children:["Informazioni utili",k.jsx("textarea",{value:b,onChange:ee=>j(ee.target.value),placeholder:"Es. infortuni, orari preferiti, esigenze specifiche"})]}),k.jsx("button",{className:"btn",disabled:B||!l||!f,type:"button",onClick:()=>void se(),children:B?"Salvataggio...":"Continua"}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void yl(),children:"Esci e cambia account"})]})})}function n0(){return k.jsx("main",{className:"page page-center",children:k.jsxs("div",{className:"card",children:[k.jsx("p",{className:"eyebrow",children:"Gym PT"}),k.jsx("h1",{children:"Caricamento in corso"})]})})}class DN extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?k.jsx("main",{className:"page page-center",children:k.jsxs("section",{className:"card auth-card",children:[k.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),k.jsx("h1",{children:"Qualcosa non ha funzionato"}),k.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),k.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function Z_({allow:n,children:e}){const{user:t,role:i,initializing:o}=Zo();return o?k.jsx(n0,{}):t?i?n.includes(i)?e:k.jsx(Cn,{to:i==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:k.jsx(Cn,{to:"/onboarding",replace:!0}):k.jsx(Cn,{to:"/auth",replace:!0})}function ON(){const{user:n,role:e,initializing:t}=Zo();return t?k.jsx(n0,{}):n?e?k.jsx(Cn,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):k.jsx(Cn,{to:"/app/client",replace:!0}):k.jsx(Cn,{to:"/auth",replace:!0})}function VN(){return k.jsx(DN,{children:k.jsxs(lI,{children:[k.jsx(Es,{path:"/",element:k.jsx(ON,{})}),k.jsx(Es,{path:"/auth",element:k.jsx(RN,{})}),k.jsx(Es,{path:"/onboarding",element:k.jsx(xN,{})}),k.jsx(Es,{path:"/app/coach",element:k.jsx(Z_,{allow:["admin","trainer"],children:k.jsx(NN,{})})}),k.jsx(Es,{path:"/app/client",element:k.jsx(Z_,{allow:["client"],children:k.jsx(PN,{})})}),k.jsx(Es,{path:"*",element:k.jsx(Cn,{to:"/",replace:!0})})]})})}gT.createRoot(document.getElementById("root")).render(k.jsx(tv.StrictMode,{children:k.jsx(EI,{children:k.jsx(mI,{children:k.jsx(VN,{})})})}));
