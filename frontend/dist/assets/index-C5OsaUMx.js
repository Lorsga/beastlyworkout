function pC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function G0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ap={exports:{}},Zl={},lp={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function mC(){if(n_)return Qe;n_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=E&&B[E]||B["@@iterator"],typeof B=="function"?B:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,x={};function b(B,U,pe){this.props=B,this.context=U,this.refs=x,this.updater=pe||P}b.prototype.isReactComponent={},b.prototype.setState=function(B,U){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,U,"setState")},b.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function z(){}z.prototype=b.prototype;function Q(B,U,pe){this.props=B,this.context=U,this.refs=x,this.updater=pe||P}var K=Q.prototype=new z;K.constructor=Q,D(K,b.prototype),K.isPureReactComponent=!0;var Z=Array.isArray,W=Object.prototype.hasOwnProperty,ne={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(B,U,pe){var ve,Re={},le=null,je=null;if(U!=null)for(ve in U.ref!==void 0&&(je=U.ref),U.key!==void 0&&(le=""+U.key),U)W.call(U,ve)&&!N.hasOwnProperty(ve)&&(Re[ve]=U[ve]);var Me=arguments.length-2;if(Me===1)Re.children=pe;else if(1<Me){for(var Ge=Array(Me),St=0;St<Me;St++)Ge[St]=arguments[St+2];Re.children=Ge}if(B&&B.defaultProps)for(ve in Me=B.defaultProps,Me)Re[ve]===void 0&&(Re[ve]=Me[ve]);return{$$typeof:n,type:B,key:le,ref:je,props:Re,_owner:ne.current}}function R(B,U){return{$$typeof:n,type:B.type,key:U,ref:B.ref,props:B.props,_owner:B._owner}}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function j(B){var U={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(pe){return U[pe]})}var L=/\/+/g;function k(B,U){return typeof B=="object"&&B!==null&&B.key!=null?j(""+B.key):U.toString(36)}function fe(B,U,pe,ve,Re){var le=typeof B;(le==="undefined"||le==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(le){case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case n:case e:je=!0}}if(je)return je=B,Re=Re(je),B=ve===""?"."+k(je,0):ve,Z(Re)?(pe="",B!=null&&(pe=B.replace(L,"$&/")+"/"),fe(Re,U,pe,"",function(St){return St})):Re!=null&&(V(Re)&&(Re=R(Re,pe+(!Re.key||je&&je.key===Re.key?"":(""+Re.key).replace(L,"$&/")+"/")+B)),U.push(Re)),1;if(je=0,ve=ve===""?".":ve+":",Z(B))for(var Me=0;Me<B.length;Me++){le=B[Me];var Ge=ve+k(le,Me);je+=fe(le,U,pe,Ge,Re)}else if(Ge=w(B),typeof Ge=="function")for(B=Ge.call(B),Me=0;!(le=B.next()).done;)le=le.value,Ge=ve+k(le,Me++),je+=fe(le,U,pe,Ge,Re);else if(le==="object")throw U=String(B),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return je}function be(B,U,pe){if(B==null)return B;var ve=[],Re=0;return fe(B,ve,"","",function(le){return U.call(pe,le,Re++)}),ve}function Ue(B){if(B._status===-1){var U=B._result;U=U(),U.then(function(pe){(B._status===0||B._status===-1)&&(B._status=1,B._result=pe)},function(pe){(B._status===0||B._status===-1)&&(B._status=2,B._result=pe)}),B._status===-1&&(B._status=0,B._result=U)}if(B._status===1)return B._result.default;throw B._result}var Ve={current:null},ae={transition:null},_e={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ne};function de(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:be,forEach:function(B,U,pe){be(B,function(){U.apply(this,arguments)},pe)},count:function(B){var U=0;return be(B,function(){U++}),U},toArray:function(B){return be(B,function(U){return U})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Qe.Component=b,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=Q,Qe.StrictMode=r,Qe.Suspense=f,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Qe.act=de,Qe.cloneElement=function(B,U,pe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ve=D({},B.props),Re=B.key,le=B.ref,je=B._owner;if(U!=null){if(U.ref!==void 0&&(le=U.ref,je=ne.current),U.key!==void 0&&(Re=""+U.key),B.type&&B.type.defaultProps)var Me=B.type.defaultProps;for(Ge in U)W.call(U,Ge)&&!N.hasOwnProperty(Ge)&&(ve[Ge]=U[Ge]===void 0&&Me!==void 0?Me[Ge]:U[Ge])}var Ge=arguments.length-2;if(Ge===1)ve.children=pe;else if(1<Ge){Me=Array(Ge);for(var St=0;St<Ge;St++)Me[St]=arguments[St+2];ve.children=Me}return{$$typeof:n,type:B.type,key:Re,ref:le,props:ve,_owner:je}},Qe.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Qe.createElement=A,Qe.createFactory=function(B){var U=A.bind(null,B);return U.type=B,U},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(B){return{$$typeof:h,render:B}},Qe.isValidElement=V,Qe.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:Ue}},Qe.memo=function(B,U){return{$$typeof:m,type:B,compare:U===void 0?null:U}},Qe.startTransition=function(B){var U=ae.transition;ae.transition={};try{B()}finally{ae.transition=U}},Qe.unstable_act=de,Qe.useCallback=function(B,U){return Ve.current.useCallback(B,U)},Qe.useContext=function(B){return Ve.current.useContext(B)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(B){return Ve.current.useDeferredValue(B)},Qe.useEffect=function(B,U){return Ve.current.useEffect(B,U)},Qe.useId=function(){return Ve.current.useId()},Qe.useImperativeHandle=function(B,U,pe){return Ve.current.useImperativeHandle(B,U,pe)},Qe.useInsertionEffect=function(B,U){return Ve.current.useInsertionEffect(B,U)},Qe.useLayoutEffect=function(B,U){return Ve.current.useLayoutEffect(B,U)},Qe.useMemo=function(B,U){return Ve.current.useMemo(B,U)},Qe.useReducer=function(B,U,pe){return Ve.current.useReducer(B,U,pe)},Qe.useRef=function(B){return Ve.current.useRef(B)},Qe.useState=function(B){return Ve.current.useState(B)},Qe.useSyncExternalStore=function(B,U,pe){return Ve.current.useSyncExternalStore(B,U,pe)},Qe.useTransition=function(){return Ve.current.useTransition()},Qe.version="18.3.1",Qe}var r_;function xm(){return r_||(r_=1,lp.exports=mC()),lp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function gC(){if(i_)return Zl;i_=1;var n=xm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var _,E={},w=null,P=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(E[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)E[_]===void 0&&(E[_]=f[_]);return{$$typeof:e,type:h,key:w,ref:P,props:E,_owner:s.current}}return Zl.Fragment=t,Zl.jsx=u,Zl.jsxs=u,Zl}var s_;function vC(){return s_||(s_=1,ap.exports=gC()),ap.exports}var g=vC(),O=xm();const Q0=G0(O),Fp=pC({__proto__:null,default:Q0},[O]);var Xc={},up={exports:{}},or={},cp={exports:{}},dp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function yC(){return o_||(o_=1,(function(n){function e(ae,_e){var de=ae.length;ae.push(_e);e:for(;0<de;){var B=de-1>>>1,U=ae[B];if(0<s(U,_e))ae[B]=_e,ae[de]=U,de=B;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var _e=ae[0],de=ae.pop();if(de!==_e){ae[0]=de;e:for(var B=0,U=ae.length,pe=U>>>1;B<pe;){var ve=2*(B+1)-1,Re=ae[ve],le=ve+1,je=ae[le];if(0>s(Re,de))le<U&&0>s(je,Re)?(ae[B]=je,ae[le]=de,B=le):(ae[B]=Re,ae[ve]=de,B=ve);else if(le<U&&0>s(je,de))ae[B]=je,ae[le]=de,B=le;else break e}}return _e}function s(ae,_e){var de=ae.sortIndex-_e.sortIndex;return de!==0?de:ae.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,E=null,w=3,P=!1,D=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ae){for(var _e=t(m);_e!==null;){if(_e.callback===null)r(m);else if(_e.startTime<=ae)r(m),_e.sortIndex=_e.expirationTime,e(f,_e);else break;_e=t(m)}}function Z(ae){if(x=!1,K(ae),!D)if(t(f)!==null)D=!0,Ue(W);else{var _e=t(m);_e!==null&&Ve(Z,_e.startTime-ae)}}function W(ae,_e){D=!1,x&&(x=!1,z(A),A=-1),P=!0;var de=w;try{for(K(_e),E=t(f);E!==null&&(!(E.expirationTime>_e)||ae&&!j());){var B=E.callback;if(typeof B=="function"){E.callback=null,w=E.priorityLevel;var U=B(E.expirationTime<=_e);_e=n.unstable_now(),typeof U=="function"?E.callback=U:E===t(f)&&r(f),K(_e)}else r(f);E=t(f)}if(E!==null)var pe=!0;else{var ve=t(m);ve!==null&&Ve(Z,ve.startTime-_e),pe=!1}return pe}finally{E=null,w=de,P=!1}}var ne=!1,N=null,A=-1,R=5,V=-1;function j(){return!(n.unstable_now()-V<R)}function L(){if(N!==null){var ae=n.unstable_now();V=ae;var _e=!0;try{_e=N(!0,ae)}finally{_e?k():(ne=!1,N=null)}}else ne=!1}var k;if(typeof Q=="function")k=function(){Q(L)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,be=fe.port2;fe.port1.onmessage=L,k=function(){be.postMessage(null)}}else k=function(){b(L,0)};function Ue(ae){N=ae,ne||(ne=!0,k())}function Ve(ae,_e){A=b(function(){ae(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){D||P||(D=!0,Ue(W))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(w){case 1:case 2:case 3:var _e=3;break;default:_e=w}var de=w;w=_e;try{return ae()}finally{w=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,_e){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var de=w;w=ae;try{return _e()}finally{w=de}},n.unstable_scheduleCallback=function(ae,_e,de){var B=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?B+de:B):de=B,ae){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=de+U,ae={id:_++,callback:_e,priorityLevel:ae,startTime:de,expirationTime:U,sortIndex:-1},de>B?(ae.sortIndex=de,e(m,ae),t(f)===null&&ae===t(m)&&(x?(z(A),A=-1):x=!0,Ve(Z,de-B))):(ae.sortIndex=U,e(f,ae),D||P||(D=!0,Ue(W))),ae},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(ae){var _e=w;return function(){var de=w;w=_e;try{return ae.apply(this,arguments)}finally{w=de}}}})(dp)),dp}var a_;function _C(){return a_||(a_=1,cp.exports=yC()),cp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function wC(){if(l_)return or;l_=1;var n=xm(),e=_C();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function w(i){return f.call(E,i)?!0:f.call(_,i)?!1:m.test(i)?E[i]=!0:(_[i]=!0,!1)}function P(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,o,l,d){if(o===null||typeof o>"u"||P(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(i,o,l,d,p,y,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=T}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];b[o]=new x(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(z,Q);b[o]=new x(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(z,Q);b[o]=new x(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(z,Q);b[o]=new x(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,o,l,d){var p=b.hasOwnProperty(o)?b[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(D(o,l,p,d)&&(l=null),d||p===null?w(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),ne=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),j=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),ae=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,B;function U(i){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var pe=!1;function ve(i,o){if(!i||pe)return"";pe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var d=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){d=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){d=Y}i()}}catch(Y){if(Y&&d&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),y=d.stack.split(`
`),T=p.length-1,M=y.length-1;1<=T&&0<=M&&p[T]!==y[M];)M--;for(;1<=T&&0<=M;T--,M--)if(p[T]!==y[M]){if(T!==1||M!==1)do if(T--,M--,0>M||p[T]!==y[M]){var F=`
`+p[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=M);break}}}finally{pe=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?U(i):""}function Re(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=ve(i.type,!1),i;case 11:return i=ve(i.type.render,!1),i;case 1:return i=ve(i.type,!0),i;default:return""}}function le(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case ne:return"Portal";case R:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case be:return o=i.displayName||null,o!==null?o:le(i.type)||"Memo";case Ue:o=i._payload,i=i._init;try{return le(i(o))}catch{}}return null}function je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Me(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function St(i){var o=Ge(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,y.call(this,T)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ie(i){i._valueTracker||(i._valueTracker=St(i))}function qe(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Ge(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function ot(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function rt(i,o){var l=o.checked;return de({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function at(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Me(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function zt(i,o){o=o.checked,o!=null&&K(i,"checked",o,!1)}function Pt(i,o){zt(i,o);var l=Me(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Zt(i,o.type,l):o.hasOwnProperty("defaultValue")&&Zt(i,o.type,Me(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function it(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Zt(i,o,l){(o!=="number"||ot(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var pt=Array.isArray;function Vt(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Me(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function et(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dt(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(pt(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Me(l)}}function Hr(i,o){var l=Me(o.value),d=Me(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function qr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Cr,Kr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Cr=Cr||document.createElement("div"),Cr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Cr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function fr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pr=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(i){Pr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Bn[o]=Bn[i]})});function Ar(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Bn.hasOwnProperty(i)&&Bn[i]?(""+o).trim():o+"px"}function zi(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Ar(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var Wn=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gr(i,o){if(o){if(Wn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function $i(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Qr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Rr=null,Vn=null,En=null;function mi(i){if(i=Ll(i)){if(typeof Rr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=dc(o),Rr(i.stateNode,i.type,o))}}function Hn(i){Vn?En?En.push(i):En=[i]:Vn=i}function Ts(){if(Vn){var i=Vn,o=En;if(En=Vn=null,mi(i),o)for(i=0;i<o.length;i++)mi(o[i])}}function Xr(i,o){return i(o)}function Is(){}var xr=!1;function on(i,o,l){if(xr)return i(o,l);xr=!0;try{return Xr(i,o,l)}finally{xr=!1,(Vn!==null||En!==null)&&(Is(),Ts())}}function Ze(i,o){var l=i.stateNode;if(l===null)return null;var d=dc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Be=!1;if(h)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{Be=!1}function Nt(i,o,l,d,p,y,T,M,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(oe){this.onError(oe)}}var gi=!1,qn=null,Kn=!1,Yr=null,ra={onError:function(i){gi=!0,qn=i}};function bs(i,o,l,d,p,y,T,M,F){gi=!1,qn=null,Nt.apply(ra,arguments)}function ia(i,o,l,d,p,y,T,M,F){if(bs.apply(this,arguments),gi){if(gi){var Y=qn;gi=!1,qn=null}else throw Error(t(198));Kn||(Kn=!0,Yr=Y)}}function Gn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Wi(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Qn(i){if(Gn(i)!==i)throw Error(t(188))}function yo(i){var o=i.alternate;if(!o){if(o=Gn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Qn(p),i;if(y===d)return Qn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var T=!1,M=p.child;M;){if(M===l){T=!0,l=p,d=y;break}if(M===d){T=!0,d=p,l=y;break}M=M.sibling}if(!T){for(M=y.child;M;){if(M===l){T=!0,l=y,d=p;break}if(M===d){T=!0,d=y,l=p;break}M=M.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Hi(i){return i=yo(i),i!==null?qi(i):null}function qi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=qi(i);if(o!==null)return o;i=i.sibling}return null}var jn=e.unstable_scheduleCallback,_o=e.unstable_cancelCallback,sa=e.unstable_shouldYield,Sl=e.unstable_requestPaint,We=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,Jr=e.unstable_UserBlockingPriority,Xn=e.unstable_NormalPriority,wo=e.unstable_LowPriority,Eo=e.unstable_IdlePriority,Gi=null,Ln=null;function oa(i){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Gi,i,void 0,(i.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:aa,So=Math.log,To=Math.LN2;function aa(i){return i>>>=0,i===0?32:31-(So(i)/To|0)|0}var Cs=64,Ps=4194304;function vi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qi(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,T=l&268435455;if(T!==0){var M=T&~p;M!==0?d=vi(M):(y&=T,y!==0&&(d=vi(y)))}else T=l&~p,T!==0?d=vi(T):y!==0&&(d=vi(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-hn(o),p=1<<l,d|=i[l],o&=~p;return d}function Tl(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var T=31-hn(y),M=1<<T,F=p[T];F===-1?((M&l)===0||(M&d)!==0)&&(p[T]=Tl(M,o)):F<=o&&(i.expiredLanes|=M),y&=~M}}function fn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Xi(){var i=Cs;return Cs<<=1,(Cs&4194240)===0&&(Cs=64),i}function ei(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function yi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-hn(o),i[o]=l}function vt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-hn(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function _i(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-hn(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var Xe=0;function I(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var X,ee,Ce,He,kr,pr=!1,Nr=[],en=null,Yn=null,Jn=null,As=new Map,Or=new Map,wi=[],jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gu(i,o){switch(i){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":As.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(o.pointerId)}}function Zn(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Ll(o),o!==null&&ee(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Lh(i,o,l,d,p){switch(o){case"focusin":return en=Zn(en,i,o,l,d,p),!0;case"dragenter":return Yn=Zn(Yn,i,o,l,d,p),!0;case"mouseover":return Jn=Zn(Jn,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return As.set(y,Zn(As.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,Or.set(y,Zn(Or.get(y)||null,i,o,l,d,p)),!0}return!1}function Qu(i){var o=Ao(i.target);if(o!==null){var l=Gn(o);if(l!==null){if(o=l.tag,o===13){if(o=Wi(l),o!==null){i.blockedOn=o,kr(i.priority,function(){Ce(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=la(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Bi=d,l.target.dispatchEvent(d),Bi=null}else return o=Ll(l),o!==null&&ee(o),i.blockedOn=l,!1;o.shift()}return!0}function Io(i,o,l){Yi(i)&&l.delete(o)}function Xu(){pr=!1,en!==null&&Yi(en)&&(en=null),Yn!==null&&Yi(Yn)&&(Yn=null),Jn!==null&&Yi(Jn)&&(Jn=null),As.forEach(Io),Or.forEach(Io)}function ti(i,o){i.blockedOn===o&&(i.blockedOn=null,pr||(pr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xu)))}function ni(i){function o(p){return ti(p,i)}if(0<Nr.length){ti(Nr[0],i);for(var l=1;l<Nr.length;l++){var d=Nr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(en!==null&&ti(en,i),Yn!==null&&ti(Yn,i),Jn!==null&&ti(Jn,i),As.forEach(o),Or.forEach(o),l=0;l<wi.length;l++)d=wi[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<wi.length&&(l=wi[0],l.blockedOn===null);)Qu(l),l.blockedOn===null&&wi.shift()}var Ji=Z.ReactCurrentBatchConfig,Rs=!0;function At(i,o,l,d){var p=Xe,y=Ji.transition;Ji.transition=null;try{Xe=1,Il(i,o,l,d)}finally{Xe=p,Ji.transition=y}}function Fh(i,o,l,d){var p=Xe,y=Ji.transition;Ji.transition=null;try{Xe=4,Il(i,o,l,d)}finally{Xe=p,Ji.transition=y}}function Il(i,o,l,d){if(Rs){var p=la(i,o,l,d);if(p===null)Xh(i,o,d,bo,l),Gu(i,d);else if(Lh(p,i,o,l,d))d.stopPropagation();else if(Gu(i,d),o&4&&-1<jh.indexOf(i)){for(;p!==null;){var y=Ll(p);if(y!==null&&X(y),y=la(i,o,l,d),y===null&&Xh(i,o,d,bo,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else Xh(i,o,d,null,l)}}var bo=null;function la(i,o,l,d){if(bo=null,i=Qr(d),i=Ao(i),i!==null)if(o=Gn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Wi(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return bo=i,null}function bl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gt()){case Ki:return 1;case Jr:return 4;case Xn:case wo:return 16;case Eo:return 536870912;default:return 16}default:return 16}}var mr=null,ua=null,er=null;function Cl(){if(er)return er;var i,o=ua,l=o.length,d,p="value"in mr?mr.value:mr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var T=l-i;for(d=1;d<=T&&o[l-d]===p[y-d];d++);return er=p.slice(i,1<d?1-d:void 0)}function ca(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ei(){return!0}function Pl(){return!1}function pn(i){function o(l,d,p,y,T){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(l=i[M],this[M]=l?l(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ei:Pl,this.isPropagationStopped=Pl,this}return de(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),o}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=pn(ri),Si=de({},ri,{view:0,detail:0}),Uh=pn(Si),ha,Zi,xs,Co=de({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==xs&&(xs&&i.type==="mousemove"?(ha=i.screenX-xs.screenX,Zi=i.screenY-xs.screenY):Zi=ha=0,xs=i),ha)},movementY:function(i){return"movementY"in i?i.movementY:Zi}}),fa=pn(Co),Al=de({},Co,{dataTransfer:0}),Yu=pn(Al),pa=de({},Si,{relatedTarget:0}),ma=pn(pa),Ju=de({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),es=pn(Ju),Zu=de({},ri,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ec=pn(Zu),tc=de({},ri,{data:0}),Rl=pn(tc),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=nc[i])?!!o[i]:!1}function Ti(){return rc}var c=de({},Si,{key:function(i){if(i.key){var o=ga[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=pn(c),S=de({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=pn(S),H=de({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),J=pn(H),he=de({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),yt=pn(he),tn=de({},Co,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=pn(tn),an=[9,13,27,32],qt=h&&"CompositionEvent"in window,Dr=null;h&&"documentMode"in document&&(Dr=document.documentMode);var gr=h&&"TextEvent"in window&&!Dr,Po=h&&(!qt||Dr&&8<Dr&&11>=Dr),va=" ",Xg=!1;function Yg(i,o){switch(i){case"keyup":return an.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ya=!1;function db(i,o){switch(i){case"compositionend":return Jg(o);case"keypress":return o.which!==32?null:(Xg=!0,va);case"textInput":return i=o.data,i===va&&Xg?null:i;default:return null}}function hb(i,o){if(ya)return i==="compositionend"||!qt&&Yg(i,o)?(i=Cl(),er=ua=mr=null,ya=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Po&&o.locale!=="ko"?null:o.data;default:return null}}var fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!fb[i.type]:o==="textarea"}function ev(i,o,l,d){Hn(d),o=lc(o,"onChange"),0<o.length&&(l=new da("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var xl=null,kl=null;function pb(i){yv(i,0)}function ic(i){var o=Ta(i);if(qe(o))return i}function mb(i,o){if(i==="change")return o}var tv=!1;if(h){var zh;if(h){var $h="oninput"in document;if(!$h){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),$h=typeof nv.oninput=="function"}zh=$h}else zh=!1;tv=zh&&(!document.documentMode||9<document.documentMode)}function rv(){xl&&(xl.detachEvent("onpropertychange",iv),kl=xl=null)}function iv(i){if(i.propertyName==="value"&&ic(kl)){var o=[];ev(o,kl,i,Qr(i)),on(pb,o)}}function gb(i,o,l){i==="focusin"?(rv(),xl=o,kl=l,xl.attachEvent("onpropertychange",iv)):i==="focusout"&&rv()}function vb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ic(kl)}function yb(i,o){if(i==="click")return ic(o)}function _b(i,o){if(i==="input"||i==="change")return ic(o)}function wb(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ii=typeof Object.is=="function"?Object.is:wb;function Nl(i,o){if(ii(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!ii(i[p],o[p]))return!1}return!0}function sv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ov(i,o){var l=sv(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=sv(l)}}function av(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?av(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function lv(){for(var i=window,o=ot();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=ot(i.document)}return o}function Bh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Eb(i){var o=lv(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&av(l.ownerDocument.documentElement,l)){if(d!==null&&Bh(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=ov(l,y);var T=ov(l,d);p&&T&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Sb=h&&"documentMode"in document&&11>=document.documentMode,_a=null,Wh=null,Ol=null,Hh=!1;function uv(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hh||_a==null||_a!==ot(d)||(d=_a,"selectionStart"in d&&Bh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ol&&Nl(Ol,d)||(Ol=d,d=lc(Wh,"onSelect"),0<d.length&&(o=new da("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=_a)))}function sc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var wa={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},qh={},cv={};h&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function oc(i){if(qh[i])return qh[i];if(!wa[i])return i;var o=wa[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in cv)return qh[i]=o[l];return i}var dv=oc("animationend"),hv=oc("animationiteration"),fv=oc("animationstart"),pv=oc("transitionend"),mv=new Map,gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(i,o){mv.set(i,o),a(o,[i])}for(var Kh=0;Kh<gv.length;Kh++){var Gh=gv[Kh],Tb=Gh.toLowerCase(),Ib=Gh[0].toUpperCase()+Gh.slice(1);ks(Tb,"on"+Ib)}ks(dv,"onAnimationEnd"),ks(hv,"onAnimationIteration"),ks(fv,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(pv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function vv(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,ia(d,o,void 0,i),i.currentTarget=null}function yv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var T=d.length-1;0<=T;T--){var M=d[T],F=M.instance,Y=M.currentTarget;if(M=M.listener,F!==y&&p.isPropagationStopped())break e;vv(p,M,Y),y=F}else for(T=0;T<d.length;T++){if(M=d[T],F=M.instance,Y=M.currentTarget,M=M.listener,F!==y&&p.isPropagationStopped())break e;vv(p,M,Y),y=F}}}if(Kn)throw i=Yr,Kn=!1,Yr=null,i}function It(i,o){var l=o[nf];l===void 0&&(l=o[nf]=new Set);var d=i+"__bubble";l.has(d)||(_v(o,i,2,!1),l.add(d))}function Qh(i,o,l){var d=0;o&&(d|=4),_v(l,i,d,o)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Ml(i){if(!i[ac]){i[ac]=!0,r.forEach(function(l){l!=="selectionchange"&&(bb.has(l)||Qh(l,!1,i),Qh(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ac]||(o[ac]=!0,Qh("selectionchange",!1,o))}}function _v(i,o,l,d){switch(bl(o)){case 1:var p=At;break;case 4:p=Fh;break;default:p=Il}l=p.bind(null,o,l,i),p=void 0,!Be||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Xh(i,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var M=d.stateNode.containerInfo;if(M===p||M.nodeType===8&&M.parentNode===p)break;if(T===4)for(T=d.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;T=T.return}for(;M!==null;){if(T=Ao(M),T===null)return;if(F=T.tag,F===5||F===6){d=y=T;continue e}M=M.parentNode}}d=d.return}on(function(){var Y=y,oe=Qr(l),ue=[];e:{var se=mv.get(i);if(se!==void 0){var ge=da,Se=i;switch(i){case"keypress":if(ca(l)===0)break e;case"keydown":case"keyup":ge=v;break;case"focusin":Se="focus",ge=ma;break;case"focusout":Se="blur",ge=ma;break;case"beforeblur":case"afterblur":ge=ma;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=J;break;case dv:case hv:case fv:ge=es;break;case pv:ge=yt;break;case"scroll":ge=Uh;break;case"wheel":ge=tt;break;case"copy":case"cut":case"paste":ge=ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=C}var Te=(o&4)!==0,$t=!Te&&i==="scroll",q=Te?se!==null?se+"Capture":null:se;Te=[];for(var $=Y,G;$!==null;){G=$;var ce=G.stateNode;if(G.tag===5&&ce!==null&&(G=ce,q!==null&&(ce=Ze($,q),ce!=null&&Te.push(Vl($,ce,G)))),$t)break;$=$.return}0<Te.length&&(se=new ge(se,Se,null,l,oe),ue.push({event:se,listeners:Te}))}}if((o&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",se&&l!==Bi&&(Se=l.relatedTarget||l.fromElement)&&(Ao(Se)||Se[ts]))break e;if((ge||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ge?(Se=l.relatedTarget||l.toElement,ge=Y,Se=Se?Ao(Se):null,Se!==null&&($t=Gn(Se),Se!==$t||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ge=null,Se=Y),ge!==Se)){if(Te=fa,ce="onMouseLeave",q="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Te=C,ce="onPointerLeave",q="onPointerEnter",$="pointer"),$t=ge==null?se:Ta(ge),G=Se==null?se:Ta(Se),se=new Te(ce,$+"leave",ge,l,oe),se.target=$t,se.relatedTarget=G,ce=null,Ao(oe)===Y&&(Te=new Te(q,$+"enter",Se,l,oe),Te.target=G,Te.relatedTarget=$t,ce=Te),$t=ce,ge&&Se)t:{for(Te=ge,q=Se,$=0,G=Te;G;G=Ea(G))$++;for(G=0,ce=q;ce;ce=Ea(ce))G++;for(;0<$-G;)Te=Ea(Te),$--;for(;0<G-$;)q=Ea(q),G--;for(;$--;){if(Te===q||q!==null&&Te===q.alternate)break t;Te=Ea(Te),q=Ea(q)}Te=null}else Te=null;ge!==null&&wv(ue,se,ge,Te,!1),Se!==null&&$t!==null&&wv(ue,$t,Se,Te,!0)}}e:{if(se=Y?Ta(Y):window,ge=se.nodeName&&se.nodeName.toLowerCase(),ge==="select"||ge==="input"&&se.type==="file")var Ie=mb;else if(Zg(se))if(tv)Ie=_b;else{Ie=vb;var xe=gb}else(ge=se.nodeName)&&ge.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ie=yb);if(Ie&&(Ie=Ie(i,Y))){ev(ue,Ie,l,oe);break e}xe&&xe(i,se,Y),i==="focusout"&&(xe=se._wrapperState)&&xe.controlled&&se.type==="number"&&Zt(se,"number",se.value)}switch(xe=Y?Ta(Y):window,i){case"focusin":(Zg(xe)||xe.contentEditable==="true")&&(_a=xe,Wh=Y,Ol=null);break;case"focusout":Ol=Wh=_a=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,uv(ue,l,oe);break;case"selectionchange":if(Sb)break;case"keydown":case"keyup":uv(ue,l,oe)}var ke;if(qt)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ya?Yg(i,l)&&(Le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(Po&&l.locale!=="ko"&&(ya||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ya&&(ke=Cl()):(mr=oe,ua="value"in mr?mr.value:mr.textContent,ya=!0)),xe=lc(Y,Le),0<xe.length&&(Le=new Rl(Le,i,null,l,oe),ue.push({event:Le,listeners:xe}),ke?Le.data=ke:(ke=Jg(l),ke!==null&&(Le.data=ke)))),(ke=gr?db(i,l):hb(i,l))&&(Y=lc(Y,"onBeforeInput"),0<Y.length&&(oe=new Rl("onBeforeInput","beforeinput",null,l,oe),ue.push({event:oe,listeners:Y}),oe.data=ke))}yv(ue,o)})}function Vl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function lc(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Ze(i,l),y!=null&&d.unshift(Vl(i,y,p)),y=Ze(i,o),y!=null&&d.push(Vl(i,y,p))),i=i.return}return d}function Ea(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wv(i,o,l,d,p){for(var y=o._reactName,T=[];l!==null&&l!==d;){var M=l,F=M.alternate,Y=M.stateNode;if(F!==null&&F===d)break;M.tag===5&&Y!==null&&(M=Y,p?(F=Ze(l,y),F!=null&&T.unshift(Vl(l,F,M))):p||(F=Ze(l,y),F!=null&&T.push(Vl(l,F,M)))),l=l.return}T.length!==0&&i.push({event:o,listeners:T})}var Cb=/\r\n?/g,Pb=/\u0000|\uFFFD/g;function Ev(i){return(typeof i=="string"?i:""+i).replace(Cb,`
`).replace(Pb,"")}function uc(i,o,l){if(o=Ev(o),Ev(i)!==o&&l)throw Error(t(425))}function cc(){}var Yh=null,Jh=null;function Zh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,Ab=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,Rb=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(i){return Sv.resolve(null).then(i).catch(xb)}:ef;function xb(i){setTimeout(function(){throw i})}function tf(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),ni(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);ni(o)}function Ns(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Tv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Sa,jl="__reactProps$"+Sa,ts="__reactContainer$"+Sa,nf="__reactEvents$"+Sa,kb="__reactListeners$"+Sa,Nb="__reactHandles$"+Sa;function Ao(i){var o=i[Ii];if(o)return o;for(var l=i.parentNode;l;){if(o=l[ts]||l[Ii]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Tv(i);i!==null;){if(l=i[Ii])return l;i=Tv(i)}return o}i=l,l=i.parentNode}return null}function Ll(i){return i=i[Ii]||i[ts],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ta(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function dc(i){return i[jl]||null}var rf=[],Ia=-1;function Os(i){return{current:i}}function bt(i){0>Ia||(i.current=rf[Ia],rf[Ia]=null,Ia--)}function wt(i,o){Ia++,rf[Ia]=i.current,i.current=o}var Ds={},Tn=Os(Ds),tr=Os(!1),Ro=Ds;function ba(i,o){var l=i.type.contextTypes;if(!l)return Ds;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function nr(i){return i=i.childContextTypes,i!=null}function hc(){bt(tr),bt(Tn)}function Iv(i,o,l){if(Tn.current!==Ds)throw Error(t(168));wt(Tn,o),wt(tr,l)}function bv(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,je(i)||"Unknown",p));return de({},l,d)}function fc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ds,Ro=Tn.current,wt(Tn,i),wt(tr,tr.current),!0}function Cv(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=bv(i,o,Ro),d.__reactInternalMemoizedMergedChildContext=i,bt(tr),bt(Tn),wt(Tn,i)):bt(tr),wt(tr,l)}var ns=null,pc=!1,sf=!1;function Pv(i){ns===null?ns=[i]:ns.push(i)}function Ob(i){pc=!0,Pv(i)}function Ms(){if(!sf&&ns!==null){sf=!0;var i=0,o=Xe;try{var l=ns;for(Xe=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}ns=null,pc=!1}catch(p){throw ns!==null&&(ns=ns.slice(i+1)),jn(Ki,Ms),p}finally{Xe=o,sf=!1}}return null}var Ca=[],Pa=0,mc=null,gc=0,Mr=[],Vr=0,xo=null,rs=1,is="";function ko(i,o){Ca[Pa++]=gc,Ca[Pa++]=mc,mc=i,gc=o}function Av(i,o,l){Mr[Vr++]=rs,Mr[Vr++]=is,Mr[Vr++]=xo,xo=i;var d=rs;i=is;var p=32-hn(d)-1;d&=~(1<<p),l+=1;var y=32-hn(o)+p;if(30<y){var T=p-p%5;y=(d&(1<<T)-1).toString(32),d>>=T,p-=T,rs=1<<32-hn(o)+p|l<<p|d,is=y+i}else rs=1<<y|l<<p|d,is=i}function of(i){i.return!==null&&(ko(i,1),Av(i,1,0))}function af(i){for(;i===mc;)mc=Ca[--Pa],Ca[Pa]=null,gc=Ca[--Pa],Ca[Pa]=null;for(;i===xo;)xo=Mr[--Vr],Mr[Vr]=null,is=Mr[--Vr],Mr[Vr]=null,rs=Mr[--Vr],Mr[Vr]=null}var vr=null,yr=null,Rt=!1,si=null;function Rv(i,o){var l=Ur(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function xv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,vr=i,yr=Ns(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,vr=i,yr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=xo!==null?{id:rs,overflow:is}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Ur(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,vr=i,yr=null,!0):!1;default:return!1}}function lf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function uf(i){if(Rt){var o=yr;if(o){var l=o;if(!xv(i,o)){if(lf(i))throw Error(t(418));o=Ns(l.nextSibling);var d=vr;o&&xv(i,o)?Rv(d,l):(i.flags=i.flags&-4097|2,Rt=!1,vr=i)}}else{if(lf(i))throw Error(t(418));i.flags=i.flags&-4097|2,Rt=!1,vr=i}}}function kv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vr=i}function vc(i){if(i!==vr)return!1;if(!Rt)return kv(i),Rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Zh(i.type,i.memoizedProps)),o&&(o=yr)){if(lf(i))throw Nv(),Error(t(418));for(;o;)Rv(i,o),o=Ns(o.nextSibling)}if(kv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){yr=Ns(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}yr=null}}else yr=vr?Ns(i.stateNode.nextSibling):null;return!0}function Nv(){for(var i=yr;i;)i=Ns(i.nextSibling)}function Aa(){yr=vr=null,Rt=!1}function cf(i){si===null?si=[i]:si.push(i)}var Db=Z.ReactCurrentBatchConfig;function Fl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(T){var M=p.refs;T===null?delete M[y]:M[y]=T},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function yc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Ov(i){var o=i._init;return o(i._payload)}function Dv(i){function o(q,$){if(i){var G=q.deletions;G===null?(q.deletions=[$],q.flags|=16):G.push($)}}function l(q,$){if(!i)return null;for(;$!==null;)o(q,$),$=$.sibling;return null}function d(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function p(q,$){return q=Bs(q,$),q.index=0,q.sibling=null,q}function y(q,$,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<$?(q.flags|=2,$):G):(q.flags|=2,$)):(q.flags|=1048576,$)}function T(q){return i&&q.alternate===null&&(q.flags|=2),q}function M(q,$,G,ce){return $===null||$.tag!==6?($=tp(G,q.mode,ce),$.return=q,$):($=p($,G),$.return=q,$)}function F(q,$,G,ce){var Ie=G.type;return Ie===N?oe(q,$,G.props.children,ce,G.key):$!==null&&($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ue&&Ov(Ie)===$.type)?(ce=p($,G.props),ce.ref=Fl(q,$,G),ce.return=q,ce):(ce=$c(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Fl(q,$,G),ce.return=q,ce)}function Y(q,$,G,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=np(G,q.mode,ce),$.return=q,$):($=p($,G.children||[]),$.return=q,$)}function oe(q,$,G,ce,Ie){return $===null||$.tag!==7?($=Fo(G,q.mode,ce,Ie),$.return=q,$):($=p($,G),$.return=q,$)}function ue(q,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return $=tp(""+$,q.mode,G),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case W:return G=$c($.type,$.key,$.props,null,q.mode,G),G.ref=Fl(q,null,$),G.return=q,G;case ne:return $=np($,q.mode,G),$.return=q,$;case Ue:var ce=$._init;return ue(q,ce($._payload),G)}if(pt($)||_e($))return $=Fo($,q.mode,G,null),$.return=q,$;yc(q,$)}return null}function se(q,$,G,ce){var Ie=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Ie!==null?null:M(q,$,""+G,ce);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case W:return G.key===Ie?F(q,$,G,ce):null;case ne:return G.key===Ie?Y(q,$,G,ce):null;case Ue:return Ie=G._init,se(q,$,Ie(G._payload),ce)}if(pt(G)||_e(G))return Ie!==null?null:oe(q,$,G,ce,null);yc(q,G)}return null}function ge(q,$,G,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return q=q.get(G)||null,M($,q,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case W:return q=q.get(ce.key===null?G:ce.key)||null,F($,q,ce,Ie);case ne:return q=q.get(ce.key===null?G:ce.key)||null,Y($,q,ce,Ie);case Ue:var xe=ce._init;return ge(q,$,G,xe(ce._payload),Ie)}if(pt(ce)||_e(ce))return q=q.get(G)||null,oe($,q,ce,Ie,null);yc($,ce)}return null}function Se(q,$,G,ce){for(var Ie=null,xe=null,ke=$,Le=$=0,cn=null;ke!==null&&Le<G.length;Le++){ke.index>Le?(cn=ke,ke=null):cn=ke.sibling;var lt=se(q,ke,G[Le],ce);if(lt===null){ke===null&&(ke=cn);break}i&&ke&&lt.alternate===null&&o(q,ke),$=y(lt,$,Le),xe===null?Ie=lt:xe.sibling=lt,xe=lt,ke=cn}if(Le===G.length)return l(q,ke),Rt&&ko(q,Le),Ie;if(ke===null){for(;Le<G.length;Le++)ke=ue(q,G[Le],ce),ke!==null&&($=y(ke,$,Le),xe===null?Ie=ke:xe.sibling=ke,xe=ke);return Rt&&ko(q,Le),Ie}for(ke=d(q,ke);Le<G.length;Le++)cn=ge(ke,q,Le,G[Le],ce),cn!==null&&(i&&cn.alternate!==null&&ke.delete(cn.key===null?Le:cn.key),$=y(cn,$,Le),xe===null?Ie=cn:xe.sibling=cn,xe=cn);return i&&ke.forEach(function(Ws){return o(q,Ws)}),Rt&&ko(q,Le),Ie}function Te(q,$,G,ce){var Ie=_e(G);if(typeof Ie!="function")throw Error(t(150));if(G=Ie.call(G),G==null)throw Error(t(151));for(var xe=Ie=null,ke=$,Le=$=0,cn=null,lt=G.next();ke!==null&&!lt.done;Le++,lt=G.next()){ke.index>Le?(cn=ke,ke=null):cn=ke.sibling;var Ws=se(q,ke,lt.value,ce);if(Ws===null){ke===null&&(ke=cn);break}i&&ke&&Ws.alternate===null&&o(q,ke),$=y(Ws,$,Le),xe===null?Ie=Ws:xe.sibling=Ws,xe=Ws,ke=cn}if(lt.done)return l(q,ke),Rt&&ko(q,Le),Ie;if(ke===null){for(;!lt.done;Le++,lt=G.next())lt=ue(q,lt.value,ce),lt!==null&&($=y(lt,$,Le),xe===null?Ie=lt:xe.sibling=lt,xe=lt);return Rt&&ko(q,Le),Ie}for(ke=d(q,ke);!lt.done;Le++,lt=G.next())lt=ge(ke,q,Le,lt.value,ce),lt!==null&&(i&&lt.alternate!==null&&ke.delete(lt.key===null?Le:lt.key),$=y(lt,$,Le),xe===null?Ie=lt:xe.sibling=lt,xe=lt);return i&&ke.forEach(function(fC){return o(q,fC)}),Rt&&ko(q,Le),Ie}function $t(q,$,G,ce){if(typeof G=="object"&&G!==null&&G.type===N&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case W:e:{for(var Ie=G.key,xe=$;xe!==null;){if(xe.key===Ie){if(Ie=G.type,Ie===N){if(xe.tag===7){l(q,xe.sibling),$=p(xe,G.props.children),$.return=q,q=$;break e}}else if(xe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ue&&Ov(Ie)===xe.type){l(q,xe.sibling),$=p(xe,G.props),$.ref=Fl(q,xe,G),$.return=q,q=$;break e}l(q,xe);break}else o(q,xe);xe=xe.sibling}G.type===N?($=Fo(G.props.children,q.mode,ce,G.key),$.return=q,q=$):(ce=$c(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Fl(q,$,G),ce.return=q,q=ce)}return T(q);case ne:e:{for(xe=G.key;$!==null;){if($.key===xe)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){l(q,$.sibling),$=p($,G.children||[]),$.return=q,q=$;break e}else{l(q,$);break}else o(q,$);$=$.sibling}$=np(G,q.mode,ce),$.return=q,q=$}return T(q);case Ue:return xe=G._init,$t(q,$,xe(G._payload),ce)}if(pt(G))return Se(q,$,G,ce);if(_e(G))return Te(q,$,G,ce);yc(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,$!==null&&$.tag===6?(l(q,$.sibling),$=p($,G),$.return=q,q=$):(l(q,$),$=tp(G,q.mode,ce),$.return=q,q=$),T(q)):l(q,$)}return $t}var Ra=Dv(!0),Mv=Dv(!1),_c=Os(null),wc=null,xa=null,df=null;function hf(){df=xa=wc=null}function ff(i){var o=_c.current;bt(_c),i._currentValue=o}function pf(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ka(i,o){wc=i,df=xa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(rr=!0),i.firstContext=null)}function jr(i){var o=i._currentValue;if(df!==i)if(i={context:i,memoizedValue:o,next:null},xa===null){if(wc===null)throw Error(t(308));xa=i,wc.dependencies={lanes:0,firstContext:i}}else xa=xa.next=i;return o}var No=null;function mf(i){No===null?No=[i]:No.push(i)}function Vv(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,mf(o)):(l.next=p.next,p.next=l),o.interleaved=l,ss(i,d)}function ss(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Vs=!1;function gf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function os(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function js(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(st&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,ss(i,l)}return p=d.interleaved,p===null?(o.next=o,mf(d)):(o.next=p.next,p.next=o),d.interleaved=o,ss(i,l)}function Ec(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_i(i,l)}}function Lv(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Sc(i,o,l,d){var p=i.updateQueue;Vs=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,M=p.shared.pending;if(M!==null){p.shared.pending=null;var F=M,Y=F.next;F.next=null,T===null?y=Y:T.next=Y,T=F;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==T&&(M===null?oe.firstBaseUpdate=Y:M.next=Y,oe.lastBaseUpdate=F))}if(y!==null){var ue=p.baseState;T=0,oe=Y=F=null,M=y;do{var se=M.lane,ge=M.eventTime;if((d&se)===se){oe!==null&&(oe=oe.next={eventTime:ge,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Se=i,Te=M;switch(se=o,ge=l,Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){ue=Se.call(ge,ue,se);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,se=typeof Se=="function"?Se.call(ge,ue,se):Se,se==null)break e;ue=de({},ue,se);break e;case 2:Vs=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,se=p.effects,se===null?p.effects=[M]:se.push(M))}else ge={eventTime:ge,lane:se,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(Y=oe=ge,F=ue):oe=oe.next=ge,T|=se;if(M=M.next,M===null){if(M=p.shared.pending,M===null)break;se=M,M=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(oe===null&&(F=ue),p.baseState=F,p.firstBaseUpdate=Y,p.lastBaseUpdate=oe,o=p.shared.interleaved,o!==null){p=o;do T|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Mo|=T,i.lanes=T,i.memoizedState=ue}}function Fv(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Ul={},bi=Os(Ul),zl=Os(Ul),$l=Os(Ul);function Oo(i){if(i===Ul)throw Error(t(174));return i}function vf(i,o){switch(wt($l,o),wt(zl,i),wt(bi,Ul),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Tt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Tt(o,i)}bt(bi),wt(bi,o)}function Na(){bt(bi),bt(zl),bt($l)}function Uv(i){Oo($l.current);var o=Oo(bi.current),l=Tt(o,i.type);o!==l&&(wt(zl,i),wt(bi,l))}function yf(i){zl.current===i&&(bt(bi),bt(zl))}var Ot=Os(0);function Tc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _f=[];function wf(){for(var i=0;i<_f.length;i++)_f[i]._workInProgressVersionPrimary=null;_f.length=0}var Ic=Z.ReactCurrentDispatcher,Ef=Z.ReactCurrentBatchConfig,Do=0,Dt=null,nn=null,ln=null,bc=!1,Bl=!1,Wl=0,Mb=0;function In(){throw Error(t(321))}function Sf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!ii(i[l],o[l]))return!1;return!0}function Tf(i,o,l,d,p,y){if(Do=y,Dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ic.current=i===null||i.memoizedState===null?Fb:Ub,i=l(d,p),Bl){y=0;do{if(Bl=!1,Wl=0,25<=y)throw Error(t(301));y+=1,ln=nn=null,o.updateQueue=null,Ic.current=zb,i=l(d,p)}while(Bl)}if(Ic.current=Ac,o=nn!==null&&nn.next!==null,Do=0,ln=nn=Dt=null,bc=!1,o)throw Error(t(300));return i}function If(){var i=Wl!==0;return Wl=0,i}function Ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Dt.memoizedState=ln=i:ln=ln.next=i,ln}function Lr(){if(nn===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=nn.next;var o=ln===null?Dt.memoizedState:ln.next;if(o!==null)ln=o,nn=i;else{if(i===null)throw Error(t(310));nn=i,i={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},ln===null?Dt.memoizedState=ln=i:ln=ln.next=i}return ln}function Hl(i,o){return typeof o=="function"?o(i):o}function bf(i){var o=Lr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=nn,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var M=T=null,F=null,Y=y;do{var oe=Y.lane;if((Do&oe)===oe)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),d=Y.hasEagerState?Y.eagerState:i(d,Y.action);else{var ue={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(M=F=ue,T=d):F=F.next=ue,Dt.lanes|=oe,Mo|=oe}Y=Y.next}while(Y!==null&&Y!==y);F===null?T=d:F.next=M,ii(d,o.memoizedState)||(rr=!0),o.memoizedState=d,o.baseState=T,o.baseQueue=F,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Dt.lanes|=y,Mo|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Cf(i){var o=Lr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);ii(y,o.memoizedState)||(rr=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function zv(){}function $v(i,o){var l=Dt,d=Lr(),p=o(),y=!ii(d.memoizedState,p);if(y&&(d.memoizedState=p,rr=!0),d=d.queue,Pf(Hv.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||ln!==null&&ln.memoizedState.tag&1){if(l.flags|=2048,ql(9,Wv.bind(null,l,d,p,o),void 0,null),un===null)throw Error(t(349));(Do&30)!==0||Bv(l,o,p)}return p}function Bv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Wv(i,o,l,d){o.value=l,o.getSnapshot=d,qv(o)&&Kv(i)}function Hv(i,o,l){return l(function(){qv(o)&&Kv(i)})}function qv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!ii(i,l)}catch{return!0}}function Kv(i){var o=ss(i,1);o!==null&&ui(o,i,1,-1)}function Gv(i){var o=Ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:i},o.queue=i,i=i.dispatch=Lb.bind(null,Dt,i),[o.memoizedState,i]}function ql(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function Qv(){return Lr().memoizedState}function Cc(i,o,l,d){var p=Ci();Dt.flags|=i,p.memoizedState=ql(1|o,l,void 0,d===void 0?null:d)}function Pc(i,o,l,d){var p=Lr();d=d===void 0?null:d;var y=void 0;if(nn!==null){var T=nn.memoizedState;if(y=T.destroy,d!==null&&Sf(d,T.deps)){p.memoizedState=ql(o,l,y,d);return}}Dt.flags|=i,p.memoizedState=ql(1|o,l,y,d)}function Xv(i,o){return Cc(8390656,8,i,o)}function Pf(i,o){return Pc(2048,8,i,o)}function Yv(i,o){return Pc(4,2,i,o)}function Jv(i,o){return Pc(4,4,i,o)}function Zv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ey(i,o,l){return l=l!=null?l.concat([i]):null,Pc(4,4,Zv.bind(null,o,i),l)}function Af(){}function ty(i,o){var l=Lr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Sf(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function ny(i,o){var l=Lr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Sf(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function ry(i,o,l){return(Do&21)===0?(i.baseState&&(i.baseState=!1,rr=!0),i.memoizedState=l):(ii(l,o)||(l=Xi(),Dt.lanes|=l,Mo|=l,i.baseState=!0),o)}function Vb(i,o){var l=Xe;Xe=l!==0&&4>l?l:4,i(!0);var d=Ef.transition;Ef.transition={};try{i(!1),o()}finally{Xe=l,Ef.transition=d}}function iy(){return Lr().memoizedState}function jb(i,o,l){var d=zs(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},sy(i))oy(o,l);else if(l=Vv(i,o,l,d),l!==null){var p=zn();ui(l,i,d,p),ay(l,o,d)}}function Lb(i,o,l){var d=zs(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(sy(i))oy(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,M=y(T,l);if(p.hasEagerState=!0,p.eagerState=M,ii(M,T)){var F=o.interleaved;F===null?(p.next=p,mf(o)):(p.next=F.next,F.next=p),o.interleaved=p;return}}catch{}finally{}l=Vv(i,o,p,d),l!==null&&(p=zn(),ui(l,i,d,p),ay(l,o,d))}}function sy(i){var o=i.alternate;return i===Dt||o!==null&&o===Dt}function oy(i,o){Bl=bc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function ay(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_i(i,l)}}var Ac={readContext:jr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},Fb={readContext:jr,useCallback:function(i,o){return Ci().memoizedState=[i,o===void 0?null:o],i},useContext:jr,useEffect:Xv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Cc(4194308,4,Zv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Cc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Cc(4,2,i,o)},useMemo:function(i,o){var l=Ci();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=Ci();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=jb.bind(null,Dt,i),[d.memoizedState,i]},useRef:function(i){var o=Ci();return i={current:i},o.memoizedState=i},useState:Gv,useDebugValue:Af,useDeferredValue:function(i){return Ci().memoizedState=i},useTransition:function(){var i=Gv(!1),o=i[0];return i=Vb.bind(null,i[1]),Ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=Dt,p=Ci();if(Rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),un===null)throw Error(t(349));(Do&30)!==0||Bv(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Xv(Hv.bind(null,d,y,i),[i]),d.flags|=2048,ql(9,Wv.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=Ci(),o=un.identifierPrefix;if(Rt){var l=is,d=rs;l=(d&~(1<<32-hn(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Wl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Mb++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Ub={readContext:jr,useCallback:ty,useContext:jr,useEffect:Pf,useImperativeHandle:ey,useInsertionEffect:Yv,useLayoutEffect:Jv,useMemo:ny,useReducer:bf,useRef:Qv,useState:function(){return bf(Hl)},useDebugValue:Af,useDeferredValue:function(i){var o=Lr();return ry(o,nn.memoizedState,i)},useTransition:function(){var i=bf(Hl)[0],o=Lr().memoizedState;return[i,o]},useMutableSource:zv,useSyncExternalStore:$v,useId:iy,unstable_isNewReconciler:!1},zb={readContext:jr,useCallback:ty,useContext:jr,useEffect:Pf,useImperativeHandle:ey,useInsertionEffect:Yv,useLayoutEffect:Jv,useMemo:ny,useReducer:Cf,useRef:Qv,useState:function(){return Cf(Hl)},useDebugValue:Af,useDeferredValue:function(i){var o=Lr();return nn===null?o.memoizedState=i:ry(o,nn.memoizedState,i)},useTransition:function(){var i=Cf(Hl)[0],o=Lr().memoizedState;return[i,o]},useMutableSource:zv,useSyncExternalStore:$v,useId:iy,unstable_isNewReconciler:!1};function oi(i,o){if(i&&i.defaultProps){o=de({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Rf(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:de({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Rc={isMounted:function(i){return(i=i._reactInternals)?Gn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=zn(),p=zs(i),y=os(d,p);y.payload=o,l!=null&&(y.callback=l),o=js(i,y,p),o!==null&&(ui(o,i,p,d),Ec(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=zn(),p=zs(i),y=os(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=js(i,y,p),o!==null&&(ui(o,i,p,d),Ec(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=zn(),d=zs(i),p=os(l,d);p.tag=2,o!=null&&(p.callback=o),o=js(i,p,d),o!==null&&(ui(o,i,d,l),Ec(o,i,d))}};function ly(i,o,l,d,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,T):o.prototype&&o.prototype.isPureReactComponent?!Nl(l,d)||!Nl(p,y):!0}function uy(i,o,l){var d=!1,p=Ds,y=o.contextType;return typeof y=="object"&&y!==null?y=jr(y):(p=nr(o)?Ro:Tn.current,d=o.contextTypes,y=(d=d!=null)?ba(i,p):Ds),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Rc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function cy(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Rc.enqueueReplaceState(o,o.state,null)}function xf(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},gf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=jr(y):(y=nr(o)?Ro:Tn.current,p.context=ba(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Rf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Rc.enqueueReplaceState(p,p.state,null),Sc(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Oa(i,o){try{var l="",d=o;do l+=Re(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function kf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Nf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var $b=typeof WeakMap=="function"?WeakMap:Map;function dy(i,o,l){l=os(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Vc||(Vc=!0,Kf=d),Nf(i,o)},l}function hy(i,o,l){l=os(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Nf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Nf(i,o),typeof d!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),l}function fy(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new $b;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=nC.bind(null,i,o,l),o.then(i,i))}function py(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function my(i,o,l,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=os(-1,1),o.tag=2,js(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var Bb=Z.ReactCurrentOwner,rr=!1;function Un(i,o,l,d){o.child=i===null?Mv(o,null,l,d):Ra(o,i.child,l,d)}function gy(i,o,l,d,p){l=l.render;var y=o.ref;return ka(o,p),d=Tf(i,o,l,d,y,p),l=If(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,as(i,o,p)):(Rt&&l&&of(o),o.flags|=1,Un(i,o,d,p),o.child)}function vy(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!ep(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,yy(i,o,y,d,p)):(i=$c(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Nl,l(T,d)&&i.ref===o.ref)return as(i,o,p)}return o.flags|=1,i=Bs(y,d),i.ref=o.ref,i.return=o,o.child=i}function yy(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(Nl(y,d)&&i.ref===o.ref)if(rr=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(rr=!0);else return o.lanes=i.lanes,as(i,o,p)}return Of(i,o,l,d,p)}function _y(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Ma,_r),_r|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,wt(Ma,_r),_r|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,wt(Ma,_r),_r|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,wt(Ma,_r),_r|=d;return Un(i,o,p,l),o.child}function wy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Of(i,o,l,d,p){var y=nr(l)?Ro:Tn.current;return y=ba(o,y),ka(o,p),l=Tf(i,o,l,d,y,p),d=If(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,as(i,o,p)):(Rt&&d&&of(o),o.flags|=1,Un(i,o,l,p),o.child)}function Ey(i,o,l,d,p){if(nr(l)){var y=!0;fc(o)}else y=!1;if(ka(o,p),o.stateNode===null)kc(i,o),uy(o,l,d),xf(o,l,d,p),d=!0;else if(i===null){var T=o.stateNode,M=o.memoizedProps;T.props=M;var F=T.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=jr(Y):(Y=nr(l)?Ro:Tn.current,Y=ba(o,Y));var oe=l.getDerivedStateFromProps,ue=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function";ue||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==d||F!==Y)&&cy(o,T,d,Y),Vs=!1;var se=o.memoizedState;T.state=se,Sc(o,d,T,p),F=o.memoizedState,M!==d||se!==F||tr.current||Vs?(typeof oe=="function"&&(Rf(o,l,oe,d),F=o.memoizedState),(M=Vs||ly(o,l,M,d,se,F,Y))?(ue||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=F),T.props=d,T.state=F,T.context=Y,d=M):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{T=o.stateNode,jv(i,o),M=o.memoizedProps,Y=o.type===o.elementType?M:oi(o.type,M),T.props=Y,ue=o.pendingProps,se=T.context,F=l.contextType,typeof F=="object"&&F!==null?F=jr(F):(F=nr(l)?Ro:Tn.current,F=ba(o,F));var ge=l.getDerivedStateFromProps;(oe=typeof ge=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==ue||se!==F)&&cy(o,T,d,F),Vs=!1,se=o.memoizedState,T.state=se,Sc(o,d,T,p);var Se=o.memoizedState;M!==ue||se!==Se||tr.current||Vs?(typeof ge=="function"&&(Rf(o,l,ge,d),Se=o.memoizedState),(Y=Vs||ly(o,l,Y,d,se,Se,F)||!1)?(oe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,Se,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,Se,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||M===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Se),T.props=d,T.state=Se,T.context=F,d=Y):(typeof T.componentDidUpdate!="function"||M===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),d=!1)}return Df(i,o,l,d,y,p)}function Df(i,o,l,d,p,y){wy(i,o);var T=(o.flags&128)!==0;if(!d&&!T)return p&&Cv(o,l,!1),as(i,o,y);d=o.stateNode,Bb.current=o;var M=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&T?(o.child=Ra(o,i.child,null,y),o.child=Ra(o,null,M,y)):Un(i,o,M,y),o.memoizedState=d.state,p&&Cv(o,l,!0),o.child}function Sy(i){var o=i.stateNode;o.pendingContext?Iv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Iv(i,o.context,!1),vf(i,o.containerInfo)}function Ty(i,o,l,d,p){return Aa(),cf(p),o.flags|=256,Un(i,o,l,d),o.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function Vf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Iy(i,o,l){var d=o.pendingProps,p=Ot.current,y=!1,T=(o.flags&128)!==0,M;if((M=T)||(M=i!==null&&i.memoizedState===null?!1:(p&2)!==0),M?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),wt(Ot,p&1),i===null)return uf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=d.children,i=d.fallback,y?(d=o.mode,y=o.child,T={mode:"hidden",children:T},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=Bc(T,d,0,null),i=Fo(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Vf(l),o.memoizedState=Mf,i):jf(o,T));if(p=i.memoizedState,p!==null&&(M=p.dehydrated,M!==null))return Wb(i,o,T,d,M,p,l);if(y){y=d.fallback,T=o.mode,p=i.child,M=p.sibling;var F={mode:"hidden",children:d.children};return(T&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=F,o.deletions=null):(d=Bs(p,F),d.subtreeFlags=p.subtreeFlags&14680064),M!==null?y=Bs(M,y):(y=Fo(y,T,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,T=i.child.memoizedState,T=T===null?Vf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=i.childLanes&~l,o.memoizedState=Mf,d}return y=i.child,i=y.sibling,d=Bs(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function jf(i,o){return o=Bc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function xc(i,o,l,d){return d!==null&&cf(d),Ra(o,i.child,null,l),i=jf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Wb(i,o,l,d,p,y,T){if(l)return o.flags&256?(o.flags&=-257,d=kf(Error(t(422))),xc(i,o,T,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=Bc({mode:"visible",children:d.children},p,0,null),y=Fo(y,p,T,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&Ra(o,i.child,null,T),o.child.memoizedState=Vf(T),o.memoizedState=Mf,y);if((o.mode&1)===0)return xc(i,o,T,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var M=d.dgst;return d=M,y=Error(t(419)),d=kf(y,d,void 0),xc(i,o,T,d)}if(M=(T&i.childLanes)!==0,rr||M){if(d=un,d!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,ss(i,p),ui(d,i,p,-1))}return Zf(),d=kf(Error(t(421))),xc(i,o,T,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=rC.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,yr=Ns(p.nextSibling),vr=o,Rt=!0,si=null,i!==null&&(Mr[Vr++]=rs,Mr[Vr++]=is,Mr[Vr++]=xo,rs=i.id,is=i.overflow,xo=o),o=jf(o,d.children),o.flags|=4096,o)}function by(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),pf(i.return,o,l)}function Lf(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Cy(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Un(i,o,d.children,l),d=Ot.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&by(i,l,o);else if(i.tag===19)by(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(wt(Ot,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&Tc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Lf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Tc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Lf(o,!0,l,null,y);break;case"together":Lf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function kc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function as(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Mo|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Bs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Bs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Hb(i,o,l){switch(o.tag){case 3:Sy(o),Aa();break;case 5:Uv(o);break;case 1:nr(o.type)&&fc(o);break;case 4:vf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;wt(_c,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(wt(Ot,Ot.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Iy(i,o,l):(wt(Ot,Ot.current&1),i=as(i,o,l),i!==null?i.sibling:null);wt(Ot,Ot.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return Cy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),wt(Ot,Ot.current),d)break;return null;case 22:case 23:return o.lanes=0,_y(i,o,l)}return as(i,o,l)}var Py,Ff,Ay,Ry;Py=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ff=function(){},Ay=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,Oo(bi.current);var y=null;switch(l){case"input":p=rt(i,p),d=rt(i,d),y=[];break;case"select":p=de({},p,{value:void 0}),d=de({},d,{value:void 0}),y=[];break;case"textarea":p=et(i,p),d=et(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=cc)}Gr(l,d);var T;l=null;for(Y in p)if(!d.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var M=p[Y];for(T in M)M.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in d){var F=d[Y];if(M=p!=null?p[Y]:void 0,d.hasOwnProperty(Y)&&F!==M&&(F!=null||M!=null))if(Y==="style")if(M){for(T in M)!M.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in F)F.hasOwnProperty(T)&&M[T]!==F[T]&&(l||(l={}),l[T]=F[T])}else l||(y||(y=[]),y.push(Y,l)),l=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,M=M?M.__html:void 0,F!=null&&M!==F&&(y=y||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&It("scroll",i),y||M===F||(y=[])):(y=y||[]).push(Y,F))}l&&(y=y||[]).push("style",l);var Y=y;(o.updateQueue=Y)&&(o.flags|=4)}},Ry=function(i,o,l,d){l!==d&&(o.flags|=4)};function Kl(i,o){if(!Rt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function bn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function qb(i,o,l){var d=o.pendingProps;switch(af(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(o),null;case 1:return nr(o.type)&&hc(),bn(o),null;case 3:return d=o.stateNode,Na(),bt(tr),bt(Tn),wf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(vc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,si!==null&&(Xf(si),si=null))),Ff(i,o),bn(o),null;case 5:yf(o);var p=Oo($l.current);if(l=o.type,i!==null&&o.stateNode!=null)Ay(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return bn(o),null}if(i=Oo(bi.current),vc(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[Ii]=o,d[jl]=y,i=(o.mode&1)!==0,l){case"dialog":It("cancel",d),It("close",d);break;case"iframe":case"object":case"embed":It("load",d);break;case"video":case"audio":for(p=0;p<Dl.length;p++)It(Dl[p],d);break;case"source":It("error",d);break;case"img":case"image":case"link":It("error",d),It("load",d);break;case"details":It("toggle",d);break;case"input":at(d,y),It("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},It("invalid",d);break;case"textarea":dt(d,y),It("invalid",d)}Gr(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var M=y[T];T==="children"?typeof M=="string"?d.textContent!==M&&(y.suppressHydrationWarning!==!0&&uc(d.textContent,M,i),p=["children",M]):typeof M=="number"&&d.textContent!==""+M&&(y.suppressHydrationWarning!==!0&&uc(d.textContent,M,i),p=["children",""+M]):s.hasOwnProperty(T)&&M!=null&&T==="onScroll"&&It("scroll",d)}switch(l){case"input":ie(d),it(d,y,!0);break;case"textarea":ie(d),qr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=cc)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=mt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=T.createElement(l,{is:d.is}):(i=T.createElement(l),l==="select"&&(T=i,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):i=T.createElementNS(i,l),i[Ii]=o,i[jl]=d,Py(i,o,!1,!1),o.stateNode=i;e:{switch(T=$i(l,d),l){case"dialog":It("cancel",i),It("close",i),p=d;break;case"iframe":case"object":case"embed":It("load",i),p=d;break;case"video":case"audio":for(p=0;p<Dl.length;p++)It(Dl[p],i);p=d;break;case"source":It("error",i),p=d;break;case"img":case"image":case"link":It("error",i),It("load",i),p=d;break;case"details":It("toggle",i),p=d;break;case"input":at(i,d),p=rt(i,d),It("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=de({},d,{value:void 0}),It("invalid",i);break;case"textarea":dt(i,d),p=et(i,d),It("invalid",i);break;default:p=d}Gr(l,p),M=p;for(y in M)if(M.hasOwnProperty(y)){var F=M[y];y==="style"?zi(i,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Kr(i,F)):y==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&fr(i,F):typeof F=="number"&&fr(i,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?F!=null&&y==="onScroll"&&It("scroll",i):F!=null&&K(i,y,F,T))}switch(l){case"input":ie(i),it(i,d,!1);break;case"textarea":ie(i),qr(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Me(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Vt(i,!!d.multiple,y,!1):d.defaultValue!=null&&Vt(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=cc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return bn(o),null;case 6:if(i&&o.stateNode!=null)Ry(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=Oo($l.current),Oo(bi.current),vc(o)){if(d=o.stateNode,l=o.memoizedProps,d[Ii]=o,(y=d.nodeValue!==l)&&(i=vr,i!==null))switch(i.tag){case 3:uc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&uc(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Ii]=o,o.stateNode=d}return bn(o),null;case 13:if(bt(Ot),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Rt&&yr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Nv(),Aa(),o.flags|=98560,y=!1;else if(y=vc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Ii]=o}else Aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bn(o),y=!1}else si!==null&&(Xf(si),si=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ot.current&1)!==0?rn===0&&(rn=3):Zf())),o.updateQueue!==null&&(o.flags|=4),bn(o),null);case 4:return Na(),Ff(i,o),i===null&&Ml(o.stateNode.containerInfo),bn(o),null;case 10:return ff(o.type._context),bn(o),null;case 17:return nr(o.type)&&hc(),bn(o),null;case 19:if(bt(Ot),y=o.memoizedState,y===null)return bn(o),null;if(d=(o.flags&128)!==0,T=y.rendering,T===null)if(d)Kl(y,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=Tc(i),T!==null){for(o.flags|=128,Kl(y,!1),d=T.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,i=T.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return wt(Ot,Ot.current&1|2),o.child}i=i.sibling}y.tail!==null&&We()>Va&&(o.flags|=128,d=!0,Kl(y,!1),o.lanes=4194304)}else{if(!d)if(i=Tc(T),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Kl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Rt)return bn(o),null}else 2*We()-y.renderingStartTime>Va&&l!==1073741824&&(o.flags|=128,d=!0,Kl(y,!1),o.lanes=4194304);y.isBackwards?(T.sibling=o.child,o.child=T):(l=y.last,l!==null?l.sibling=T:o.child=T,y.last=T)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=We(),o.sibling=null,l=Ot.current,wt(Ot,d?l&1|2:l&1),o):(bn(o),null);case 22:case 23:return Jf(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(_r&1073741824)!==0&&(bn(o),o.subtreeFlags&6&&(o.flags|=8192)):bn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Kb(i,o){switch(af(o),o.tag){case 1:return nr(o.type)&&hc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Na(),bt(tr),bt(Tn),wf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return yf(o),null;case 13:if(bt(Ot),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Aa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return bt(Ot),null;case 4:return Na(),null;case 10:return ff(o.type._context),null;case 22:case 23:return Jf(),null;case 24:return null;default:return null}}var Nc=!1,Cn=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,we=null;function Da(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){jt(i,o,d)}else l.current=null}function Uf(i,o,l){try{l()}catch(d){jt(i,o,d)}}var xy=!1;function Qb(i,o){if(Yh=Rs,i=lv(),Bh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,M=-1,F=-1,Y=0,oe=0,ue=i,se=null;t:for(;;){for(var ge;ue!==l||p!==0&&ue.nodeType!==3||(M=T+p),ue!==y||d!==0&&ue.nodeType!==3||(F=T+d),ue.nodeType===3&&(T+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)se=ue,ue=ge;for(;;){if(ue===i)break t;if(se===l&&++Y===p&&(M=T),se===y&&++oe===d&&(F=T),(ge=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=ge}l=M===-1||F===-1?null:{start:M,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jh={focusedElem:i,selectionRange:l},Rs=!1,we=o;we!==null;)if(o=we,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,we=i;else for(;we!==null;){o=we;try{var Se=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Te=Se.memoizedProps,$t=Se.memoizedState,q=o.stateNode,$=q.getSnapshotBeforeUpdate(o.elementType===o.type?Te:oi(o.type,Te),$t);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){jt(o,o.return,ce)}if(i=o.sibling,i!==null){i.return=o.return,we=i;break}we=o.return}return Se=xy,xy=!1,Se}function Gl(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Uf(o,l,y)}p=p.next}while(p!==d)}}function Oc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function zf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function ky(i){var o=i.alternate;o!==null&&(i.alternate=null,ky(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ii],delete o[jl],delete o[nf],delete o[kb],delete o[Nb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Ny(i){return i.tag===5||i.tag===3||i.tag===4}function Oy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ny(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $f(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=cc));else if(d!==4&&(i=i.child,i!==null))for($f(i,o,l),i=i.sibling;i!==null;)$f(i,o,l),i=i.sibling}function Bf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Bf(i,o,l),i=i.sibling;i!==null;)Bf(i,o,l),i=i.sibling}var mn=null,ai=!1;function Ls(i,o,l){for(l=l.child;l!==null;)Dy(i,o,l),l=l.sibling}function Dy(i,o,l){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Gi,l)}catch{}switch(l.tag){case 5:Cn||Da(l,o);case 6:var d=mn,p=ai;mn=null,Ls(i,o,l),mn=d,ai=p,mn!==null&&(ai?(i=mn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):mn.removeChild(l.stateNode));break;case 18:mn!==null&&(ai?(i=mn,l=l.stateNode,i.nodeType===8?tf(i.parentNode,l):i.nodeType===1&&tf(i,l),ni(i)):tf(mn,l.stateNode));break;case 4:d=mn,p=ai,mn=l.stateNode.containerInfo,ai=!0,Ls(i,o,l),mn=d,ai=p;break;case 0:case 11:case 14:case 15:if(!Cn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Uf(l,o,T),p=p.next}while(p!==d)}Ls(i,o,l);break;case 1:if(!Cn&&(Da(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(M){jt(l,o,M)}Ls(i,o,l);break;case 21:Ls(i,o,l);break;case 22:l.mode&1?(Cn=(d=Cn)||l.memoizedState!==null,Ls(i,o,l),Cn=d):Ls(i,o,l);break;default:Ls(i,o,l)}}function My(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Gb),o.forEach(function(d){var p=iC.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function li(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,T=o,M=T;e:for(;M!==null;){switch(M.tag){case 5:mn=M.stateNode,ai=!1;break e;case 3:mn=M.stateNode.containerInfo,ai=!0;break e;case 4:mn=M.stateNode.containerInfo,ai=!0;break e}M=M.return}if(mn===null)throw Error(t(160));Dy(y,T,p),mn=null,ai=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(Y){jt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Vy(o,i),o=o.sibling}function Vy(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(li(o,i),Pi(i),d&4){try{Gl(3,i,i.return),Oc(3,i)}catch(Te){jt(i,i.return,Te)}try{Gl(5,i,i.return)}catch(Te){jt(i,i.return,Te)}}break;case 1:li(o,i),Pi(i),d&512&&l!==null&&Da(l,l.return);break;case 5:if(li(o,i),Pi(i),d&512&&l!==null&&Da(l,l.return),i.flags&32){var p=i.stateNode;try{fr(p,"")}catch(Te){jt(i,i.return,Te)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,T=l!==null?l.memoizedProps:y,M=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{M==="input"&&y.type==="radio"&&y.name!=null&&zt(p,y),$i(M,T);var Y=$i(M,y);for(T=0;T<F.length;T+=2){var oe=F[T],ue=F[T+1];oe==="style"?zi(p,ue):oe==="dangerouslySetInnerHTML"?Kr(p,ue):oe==="children"?fr(p,ue):K(p,oe,ue,Y)}switch(M){case"input":Pt(p,y);break;case"textarea":Hr(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Vt(p,!!y.multiple,ge,!1):se!==!!y.multiple&&(y.defaultValue!=null?Vt(p,!!y.multiple,y.defaultValue,!0):Vt(p,!!y.multiple,y.multiple?[]:"",!1))}p[jl]=y}catch(Te){jt(i,i.return,Te)}}break;case 6:if(li(o,i),Pi(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Te){jt(i,i.return,Te)}}break;case 3:if(li(o,i),Pi(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ni(o.containerInfo)}catch(Te){jt(i,i.return,Te)}break;case 4:li(o,i),Pi(i);break;case 13:li(o,i),Pi(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(qf=We())),d&4&&My(i);break;case 22:if(oe=l!==null&&l.memoizedState!==null,i.mode&1?(Cn=(Y=Cn)||oe,li(o,i),Cn=Y):li(o,i),Pi(i),d&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!oe&&(i.mode&1)!==0)for(we=i,oe=i.child;oe!==null;){for(ue=we=oe;we!==null;){switch(se=we,ge=se.child,se.tag){case 0:case 11:case 14:case 15:Gl(4,se,se.return);break;case 1:Da(se,se.return);var Se=se.stateNode;if(typeof Se.componentWillUnmount=="function"){d=se,l=se.return;try{o=d,Se.props=o.memoizedProps,Se.state=o.memoizedState,Se.componentWillUnmount()}catch(Te){jt(d,l,Te)}}break;case 5:Da(se,se.return);break;case 22:if(se.memoizedState!==null){Fy(ue);continue}}ge!==null?(ge.return=se,we=ge):Fy(ue)}oe=oe.sibling}e:for(oe=null,ue=i;;){if(ue.tag===5){if(oe===null){oe=ue;try{p=ue.stateNode,Y?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(M=ue.stateNode,F=ue.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,M.style.display=Ar("display",T))}catch(Te){jt(i,i.return,Te)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=Y?"":ue.memoizedProps}catch(Te){jt(i,i.return,Te)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:li(o,i),Pi(i),d&4&&My(i);break;case 21:break;default:li(o,i),Pi(i)}}function Pi(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Ny(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(fr(p,""),d.flags&=-33);var y=Oy(i);Bf(i,y,p);break;case 3:case 4:var T=d.stateNode.containerInfo,M=Oy(i);$f(i,M,T);break;default:throw Error(t(161))}}catch(F){jt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Xb(i,o,l){we=i,jy(i)}function jy(i,o,l){for(var d=(i.mode&1)!==0;we!==null;){var p=we,y=p.child;if(p.tag===22&&d){var T=p.memoizedState!==null||Nc;if(!T){var M=p.alternate,F=M!==null&&M.memoizedState!==null||Cn;M=Nc;var Y=Cn;if(Nc=T,(Cn=F)&&!Y)for(we=p;we!==null;)T=we,F=T.child,T.tag===22&&T.memoizedState!==null?Uy(p):F!==null?(F.return=T,we=F):Uy(p);for(;y!==null;)we=y,jy(y),y=y.sibling;we=p,Nc=M,Cn=Y}Ly(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,we=y):Ly(i)}}function Ly(i){for(;we!==null;){var o=we;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Cn||Oc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Cn)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:oi(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Fv(o,y,d);break;case 3:var T=o.updateQueue;if(T!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Fv(o,T,l)}break;case 5:var M=o.stateNode;if(l===null&&o.flags&4){l=M;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var oe=Y.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&ni(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Cn||o.flags&512&&zf(o)}catch(se){jt(o,o.return,se)}}if(o===i){we=null;break}if(l=o.sibling,l!==null){l.return=o.return,we=l;break}we=o.return}}function Fy(i){for(;we!==null;){var o=we;if(o===i){we=null;break}var l=o.sibling;if(l!==null){l.return=o.return,we=l;break}we=o.return}}function Uy(i){for(;we!==null;){var o=we;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Oc(4,o)}catch(F){jt(o,l,F)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(F){jt(o,p,F)}}var y=o.return;try{zf(o)}catch(F){jt(o,y,F)}break;case 5:var T=o.return;try{zf(o)}catch(F){jt(o,T,F)}}}catch(F){jt(o,o.return,F)}if(o===i){we=null;break}var M=o.sibling;if(M!==null){M.return=o.return,we=M;break}we=o.return}}var Yb=Math.ceil,Dc=Z.ReactCurrentDispatcher,Wf=Z.ReactCurrentOwner,Fr=Z.ReactCurrentBatchConfig,st=0,un=null,Kt=null,gn=0,_r=0,Ma=Os(0),rn=0,Ql=null,Mo=0,Mc=0,Hf=0,Xl=null,ir=null,qf=0,Va=1/0,ls=null,Vc=!1,Kf=null,Fs=null,jc=!1,Us=null,Lc=0,Yl=0,Gf=null,Fc=-1,Uc=0;function zn(){return(st&6)!==0?We():Fc!==-1?Fc:Fc=We()}function zs(i){return(i.mode&1)===0?1:(st&2)!==0&&gn!==0?gn&-gn:Db.transition!==null?(Uc===0&&(Uc=Xi()),Uc):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:bl(i.type)),i)}function ui(i,o,l,d){if(50<Yl)throw Yl=0,Gf=null,Error(t(185));yi(i,l,d),((st&2)===0||i!==un)&&(i===un&&((st&2)===0&&(Mc|=l),rn===4&&$s(i,gn)),sr(i,d),l===1&&st===0&&(o.mode&1)===0&&(Va=We()+500,pc&&Ms()))}function sr(i,o){var l=i.callbackNode;Zr(i,o);var d=Qi(i,i===un?gn:0);if(d===0)l!==null&&_o(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&_o(l),o===1)i.tag===0?Ob($y.bind(null,i)):Pv($y.bind(null,i)),Rb(function(){(st&6)===0&&Ms()}),l=null;else{switch(I(d)){case 1:l=Ki;break;case 4:l=Jr;break;case 16:l=Xn;break;case 536870912:l=Eo;break;default:l=Xn}l=Xy(l,zy.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function zy(i,o){if(Fc=-1,Uc=0,(st&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ja()&&i.callbackNode!==l)return null;var d=Qi(i,i===un?gn:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=zc(i,d);else{o=d;var p=st;st|=2;var y=Wy();(un!==i||gn!==o)&&(ls=null,Va=We()+500,jo(i,o));do try{eC();break}catch(M){By(i,M)}while(!0);hf(),Dc.current=y,st=p,Kt!==null?o=0:(un=null,gn=0,o=rn)}if(o!==0){if(o===2&&(p=fn(i),p!==0&&(d=p,o=Qf(i,p))),o===1)throw l=Ql,jo(i,0),$s(i,d),sr(i,We()),l;if(o===6)$s(i,d);else{if(p=i.current.alternate,(d&30)===0&&!Jb(p)&&(o=zc(i,d),o===2&&(y=fn(i),y!==0&&(d=y,o=Qf(i,y))),o===1))throw l=Ql,jo(i,0),$s(i,d),sr(i,We()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Lo(i,ir,ls);break;case 3:if($s(i,d),(d&130023424)===d&&(o=qf+500-We(),10<o)){if(Qi(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){zn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=ef(Lo.bind(null,i,ir,ls),o);break}Lo(i,ir,ls);break;case 4:if($s(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var T=31-hn(d);y=1<<T,T=o[T],T>p&&(p=T),d&=~y}if(d=p,d=We()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Yb(d/1960))-d,10<d){i.timeoutHandle=ef(Lo.bind(null,i,ir,ls),d);break}Lo(i,ir,ls);break;case 5:Lo(i,ir,ls);break;default:throw Error(t(329))}}}return sr(i,We()),i.callbackNode===l?zy.bind(null,i):null}function Qf(i,o){var l=Xl;return i.current.memoizedState.isDehydrated&&(jo(i,o).flags|=256),i=zc(i,o),i!==2&&(o=ir,ir=l,o!==null&&Xf(o)),i}function Xf(i){ir===null?ir=i:ir.push.apply(ir,i)}function Jb(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!ii(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $s(i,o){for(o&=~Hf,o&=~Mc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-hn(o),d=1<<l;i[l]=-1,o&=~d}}function $y(i){if((st&6)!==0)throw Error(t(327));ja();var o=Qi(i,0);if((o&1)===0)return sr(i,We()),null;var l=zc(i,o);if(i.tag!==0&&l===2){var d=fn(i);d!==0&&(o=d,l=Qf(i,d))}if(l===1)throw l=Ql,jo(i,0),$s(i,o),sr(i,We()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Lo(i,ir,ls),sr(i,We()),null}function Yf(i,o){var l=st;st|=1;try{return i(o)}finally{st=l,st===0&&(Va=We()+500,pc&&Ms())}}function Vo(i){Us!==null&&Us.tag===0&&(st&6)===0&&ja();var o=st;st|=1;var l=Fr.transition,d=Xe;try{if(Fr.transition=null,Xe=1,i)return i()}finally{Xe=d,Fr.transition=l,st=o,(st&6)===0&&Ms()}}function Jf(){_r=Ma.current,bt(Ma)}function jo(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,Ab(l)),Kt!==null)for(l=Kt.return;l!==null;){var d=l;switch(af(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&hc();break;case 3:Na(),bt(tr),bt(Tn),wf();break;case 5:yf(d);break;case 4:Na();break;case 13:bt(Ot);break;case 19:bt(Ot);break;case 10:ff(d.type._context);break;case 22:case 23:Jf()}l=l.return}if(un=i,Kt=i=Bs(i.current,null),gn=_r=o,rn=0,Ql=null,Hf=Mc=Mo=0,ir=Xl=null,No!==null){for(o=0;o<No.length;o++)if(l=No[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,d.next=T}l.pending=d}No=null}return i}function By(i,o){do{var l=Kt;try{if(hf(),Ic.current=Ac,bc){for(var d=Dt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}bc=!1}if(Do=0,ln=nn=Dt=null,Bl=!1,Wl=0,Wf.current=null,l===null||l.return===null){rn=1,Ql=o,Kt=null;break}e:{var y=i,T=l.return,M=l,F=o;if(o=gn,M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,oe=M,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ge=py(T);if(ge!==null){ge.flags&=-257,my(ge,T,M,y,o),ge.mode&1&&fy(y,Y,o),o=ge,F=Y;var Se=o.updateQueue;if(Se===null){var Te=new Set;Te.add(F),o.updateQueue=Te}else Se.add(F);break e}else{if((o&1)===0){fy(y,Y,o),Zf();break e}F=Error(t(426))}}else if(Rt&&M.mode&1){var $t=py(T);if($t!==null){($t.flags&65536)===0&&($t.flags|=256),my($t,T,M,y,o),cf(Oa(F,M));break e}}y=F=Oa(F,M),rn!==4&&(rn=2),Xl===null?Xl=[y]:Xl.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var q=dy(y,F,o);Lv(y,q);break e;case 1:M=F;var $=y.type,G=y.stateNode;if((y.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Fs===null||!Fs.has(G)))){y.flags|=65536,o&=-o,y.lanes|=o;var ce=hy(y,M,o);Lv(y,ce);break e}}y=y.return}while(y!==null)}qy(l)}catch(Ie){o=Ie,Kt===l&&l!==null&&(Kt=l=l.return);continue}break}while(!0)}function Wy(){var i=Dc.current;return Dc.current=Ac,i===null?Ac:i}function Zf(){(rn===0||rn===3||rn===2)&&(rn=4),un===null||(Mo&268435455)===0&&(Mc&268435455)===0||$s(un,gn)}function zc(i,o){var l=st;st|=2;var d=Wy();(un!==i||gn!==o)&&(ls=null,jo(i,o));do try{Zb();break}catch(p){By(i,p)}while(!0);if(hf(),st=l,Dc.current=d,Kt!==null)throw Error(t(261));return un=null,gn=0,rn}function Zb(){for(;Kt!==null;)Hy(Kt)}function eC(){for(;Kt!==null&&!sa();)Hy(Kt)}function Hy(i){var o=Qy(i.alternate,i,_r);i.memoizedProps=i.pendingProps,o===null?qy(i):Kt=o,Wf.current=null}function qy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=qb(l,o,_r),l!==null){Kt=l;return}}else{if(l=Kb(l,o),l!==null){l.flags&=32767,Kt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rn=6,Kt=null;return}}if(o=o.sibling,o!==null){Kt=o;return}Kt=o=i}while(o!==null);rn===0&&(rn=5)}function Lo(i,o,l){var d=Xe,p=Fr.transition;try{Fr.transition=null,Xe=1,tC(i,o,l,d)}finally{Fr.transition=p,Xe=d}return null}function tC(i,o,l,d){do ja();while(Us!==null);if((st&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(vt(i,y),i===un&&(Kt=un=null,gn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||jc||(jc=!0,Xy(Xn,function(){return ja(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Fr.transition,Fr.transition=null;var T=Xe;Xe=1;var M=st;st|=4,Wf.current=null,Qb(i,l),Vy(l,i),Eb(Jh),Rs=!!Yh,Jh=Yh=null,i.current=l,Xb(l),Sl(),st=M,Xe=T,Fr.transition=y}else i.current=l;if(jc&&(jc=!1,Us=i,Lc=p),y=i.pendingLanes,y===0&&(Fs=null),oa(l.stateNode),sr(i,We()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(Vc)throw Vc=!1,i=Kf,Kf=null,i;return(Lc&1)!==0&&i.tag!==0&&ja(),y=i.pendingLanes,(y&1)!==0?i===Gf?Yl++:(Yl=0,Gf=i):Yl=0,Ms(),null}function ja(){if(Us!==null){var i=I(Lc),o=Fr.transition,l=Xe;try{if(Fr.transition=null,Xe=16>i?16:i,Us===null)var d=!1;else{if(i=Us,Us=null,Lc=0,(st&6)!==0)throw Error(t(331));var p=st;for(st|=4,we=i.current;we!==null;){var y=we,T=y.child;if((we.flags&16)!==0){var M=y.deletions;if(M!==null){for(var F=0;F<M.length;F++){var Y=M[F];for(we=Y;we!==null;){var oe=we;switch(oe.tag){case 0:case 11:case 15:Gl(8,oe,y)}var ue=oe.child;if(ue!==null)ue.return=oe,we=ue;else for(;we!==null;){oe=we;var se=oe.sibling,ge=oe.return;if(ky(oe),oe===Y){we=null;break}if(se!==null){se.return=ge,we=se;break}we=ge}}}var Se=y.alternate;if(Se!==null){var Te=Se.child;if(Te!==null){Se.child=null;do{var $t=Te.sibling;Te.sibling=null,Te=$t}while(Te!==null)}}we=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,we=T;else e:for(;we!==null;){if(y=we,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Gl(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,we=q;break e}we=y.return}}var $=i.current;for(we=$;we!==null;){T=we;var G=T.child;if((T.subtreeFlags&2064)!==0&&G!==null)G.return=T,we=G;else e:for(T=$;we!==null;){if(M=we,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Oc(9,M)}}catch(Ie){jt(M,M.return,Ie)}if(M===T){we=null;break e}var ce=M.sibling;if(ce!==null){ce.return=M.return,we=ce;break e}we=M.return}}if(st=p,Ms(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Gi,i)}catch{}d=!0}return d}finally{Xe=l,Fr.transition=o}}return!1}function Ky(i,o,l){o=Oa(l,o),o=dy(i,o,1),i=js(i,o,1),o=zn(),i!==null&&(yi(i,1,o),sr(i,o))}function jt(i,o,l){if(i.tag===3)Ky(i,i,l);else for(;o!==null;){if(o.tag===3){Ky(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Fs===null||!Fs.has(d))){i=Oa(l,i),i=hy(o,i,1),o=js(o,i,1),i=zn(),o!==null&&(yi(o,1,i),sr(o,i));break}}o=o.return}}function nC(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=zn(),i.pingedLanes|=i.suspendedLanes&l,un===i&&(gn&l)===l&&(rn===4||rn===3&&(gn&130023424)===gn&&500>We()-qf?jo(i,0):Hf|=l),sr(i,o)}function Gy(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ps,Ps<<=1,(Ps&130023424)===0&&(Ps=4194304)));var l=zn();i=ss(i,o),i!==null&&(yi(i,o,l),sr(i,l))}function rC(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Gy(i,l)}function iC(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),Gy(i,l)}var Qy;Qy=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||tr.current)rr=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return rr=!1,Hb(i,o,l);rr=(i.flags&131072)!==0}else rr=!1,Rt&&(o.flags&1048576)!==0&&Av(o,gc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;kc(i,o),i=o.pendingProps;var p=ba(o,Tn.current);ka(o,l),p=Tf(null,o,d,i,p,l);var y=If();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nr(d)?(y=!0,fc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,gf(o),p.updater=Rc,o.stateNode=p,p._reactInternals=o,xf(o,d,i,l),o=Df(null,o,d,!0,y,l)):(o.tag=0,Rt&&y&&of(o),Un(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(kc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=oC(d),i=oi(d,i),p){case 0:o=Of(null,o,d,i,l);break e;case 1:o=Ey(null,o,d,i,l);break e;case 11:o=gy(null,o,d,i,l);break e;case 14:o=vy(null,o,d,oi(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:oi(d,p),Of(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:oi(d,p),Ey(i,o,d,p,l);case 3:e:{if(Sy(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,jv(i,o),Sc(o,d,null,l);var T=o.memoizedState;if(d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Oa(Error(t(423)),o),o=Ty(i,o,d,l,p);break e}else if(d!==p){p=Oa(Error(t(424)),o),o=Ty(i,o,d,l,p);break e}else for(yr=Ns(o.stateNode.containerInfo.firstChild),vr=o,Rt=!0,si=null,l=Mv(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Aa(),d===p){o=as(i,o,l);break e}Un(i,o,d,l)}o=o.child}return o;case 5:return Uv(o),i===null&&uf(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,T=p.children,Zh(d,p)?T=null:y!==null&&Zh(d,y)&&(o.flags|=32),wy(i,o),Un(i,o,T,l),o.child;case 6:return i===null&&uf(o),null;case 13:return Iy(i,o,l);case 4:return vf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Ra(o,null,d,l):Un(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:oi(d,p),gy(i,o,d,p,l);case 7:return Un(i,o,o.pendingProps,l),o.child;case 8:return Un(i,o,o.pendingProps.children,l),o.child;case 12:return Un(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,T=p.value,wt(_c,d._currentValue),d._currentValue=T,y!==null)if(ii(y.value,T)){if(y.children===p.children&&!tr.current){o=as(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var M=y.dependencies;if(M!==null){T=y.child;for(var F=M.firstContext;F!==null;){if(F.context===d){if(y.tag===1){F=os(-1,l&-l),F.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),Y.pending=F}}y.lanes|=l,F=y.alternate,F!==null&&(F.lanes|=l),pf(y.return,l,o),M.lanes|=l;break}F=F.next}}else if(y.tag===10)T=y.type===o.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,M=T.alternate,M!==null&&(M.lanes|=l),pf(T,l,o),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===o){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Un(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ka(o,l),p=jr(p),d=d(p),o.flags|=1,Un(i,o,d,l),o.child;case 14:return d=o.type,p=oi(d,o.pendingProps),p=oi(d.type,p),vy(i,o,d,p,l);case 15:return yy(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:oi(d,p),kc(i,o),o.tag=1,nr(d)?(i=!0,fc(o)):i=!1,ka(o,l),uy(o,d,p),xf(o,d,p,l),Df(null,o,d,!0,i,l);case 19:return Cy(i,o,l);case 22:return _y(i,o,l)}throw Error(t(156,o.tag))};function Xy(i,o){return jn(i,o)}function sC(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(i,o,l,d){return new sC(i,o,l,d)}function ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function oC(i){if(typeof i=="function")return ep(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===be)return 14}return 2}function Bs(i,o){var l=i.alternate;return l===null?(l=Ur(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function $c(i,o,l,d,p,y){var T=2;if(d=i,typeof i=="function")ep(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case N:return Fo(l.children,p,y,o);case A:T=8,p|=8;break;case R:return i=Ur(12,l,o,p|2),i.elementType=R,i.lanes=y,i;case k:return i=Ur(13,l,o,p),i.elementType=k,i.lanes=y,i;case fe:return i=Ur(19,l,o,p),i.elementType=fe,i.lanes=y,i;case Ve:return Bc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:T=10;break e;case j:T=9;break e;case L:T=11;break e;case be:T=14;break e;case Ue:T=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Ur(T,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function Fo(i,o,l,d){return i=Ur(7,i,d,o),i.lanes=l,i}function Bc(i,o,l,d){return i=Ur(22,i,d,o),i.elementType=Ve,i.lanes=l,i.stateNode={isHidden:!1},i}function tp(i,o,l){return i=Ur(6,i,null,o),i.lanes=l,i}function np(i,o,l){return o=Ur(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function aC(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ei(0),this.expirationTimes=ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function rp(i,o,l,d,p,y,T,M,F){return i=new aC(i,o,l,M,F),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Ur(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(y),i}function lC(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function Yy(i){if(!i)return Ds;i=i._reactInternals;e:{if(Gn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(nr(l))return bv(i,l,o)}return o}function Jy(i,o,l,d,p,y,T,M,F){return i=rp(l,d,!0,i,p,y,T,M,F),i.context=Yy(null),l=i.current,d=zn(),p=zs(l),y=os(d,p),y.callback=o??null,js(l,y,p),i.current.lanes=p,yi(i,p,d),sr(i,d),i}function Wc(i,o,l,d){var p=o.current,y=zn(),T=zs(p);return l=Yy(l),o.context===null?o.context=l:o.pendingContext=l,o=os(y,T),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=js(p,o,T),i!==null&&(ui(i,p,T,y),Ec(i,p,T)),T}function Hc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Zy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function ip(i,o){Zy(i,o),(i=i.alternate)&&Zy(i,o)}function uC(){return null}var e_=typeof reportError=="function"?reportError:function(i){console.error(i)};function sp(i){this._internalRoot=i}qc.prototype.render=sp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Wc(i,o,null,null)},qc.prototype.unmount=sp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Vo(function(){Wc(null,i,null,null)}),o[ts]=null}};function qc(i){this._internalRoot=i}qc.prototype.unstable_scheduleHydration=function(i){if(i){var o=He();i={blockedOn:null,target:i,priority:o};for(var l=0;l<wi.length&&o!==0&&o<wi[l].priority;l++);wi.splice(l,0,i),l===0&&Qu(i)}};function op(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Kc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function t_(){}function cC(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var Y=Hc(T);y.call(Y)}}var T=Jy(o,d,i,0,null,!1,!1,"",t_);return i._reactRootContainer=T,i[ts]=T.current,Ml(i.nodeType===8?i.parentNode:i),Vo(),T}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var M=d;d=function(){var Y=Hc(F);M.call(Y)}}var F=rp(i,0,!1,null,null,!1,!1,"",t_);return i._reactRootContainer=F,i[ts]=F.current,Ml(i.nodeType===8?i.parentNode:i),Vo(function(){Wc(o,F,l,d)}),F}function Gc(i,o,l,d,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var M=p;p=function(){var F=Hc(T);M.call(F)}}Wc(o,T,i,p)}else T=cC(l,o,i,p,d);return Hc(T)}X=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=vi(o.pendingLanes);l!==0&&(_i(o,l|1),sr(o,We()),(st&6)===0&&(Va=We()+500,Ms()))}break;case 13:Vo(function(){var d=ss(i,1);if(d!==null){var p=zn();ui(d,i,1,p)}}),ip(i,1)}},ee=function(i){if(i.tag===13){var o=ss(i,134217728);if(o!==null){var l=zn();ui(o,i,134217728,l)}ip(i,134217728)}},Ce=function(i){if(i.tag===13){var o=zs(i),l=ss(i,o);if(l!==null){var d=zn();ui(l,i,o,d)}ip(i,o)}},He=function(){return Xe},kr=function(i,o){var l=Xe;try{return Xe=i,o()}finally{Xe=l}},Rr=function(i,o,l){switch(o){case"input":if(Pt(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=dc(d);if(!p)throw Error(t(90));qe(d),Pt(d,p)}}}break;case"textarea":Hr(i,l);break;case"select":o=l.value,o!=null&&Vt(i,!!l.multiple,o,!1)}},Xr=Yf,Is=Vo;var dC={usingClientEntryPoint:!1,Events:[Ll,Ta,dc,Hn,Ts,Yf]},Jl={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hC={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Hi(i),i===null?null:i.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||uC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Gi=Qc.inject(hC),Ln=Qc}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dC,or.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!op(o))throw Error(t(200));return lC(i,o,null,l)},or.createRoot=function(i,o){if(!op(i))throw Error(t(299));var l=!1,d="",p=e_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=rp(i,1,!1,null,null,l,!1,d,p),i[ts]=o.current,Ml(i.nodeType===8?i.parentNode:i),new sp(o)},or.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Hi(o),i=i===null?null:i.stateNode,i},or.flushSync=function(i){return Vo(i)},or.hydrate=function(i,o,l){if(!Kc(o))throw Error(t(200));return Gc(null,i,o,!0,l)},or.hydrateRoot=function(i,o,l){if(!op(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",T=e_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),o=Jy(o,null,i,1,l??null,p,!1,y,T),i[ts]=o.current,Ml(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new qc(o)},or.render=function(i,o,l){if(!Kc(o))throw Error(t(200));return Gc(null,i,o,!1,l)},or.unmountComponentAtNode=function(i){if(!Kc(i))throw Error(t(40));return i._reactRootContainer?(Vo(function(){Gc(null,null,i,!1,function(){i._reactRootContainer=null,i[ts]=null})}),!0):!1},or.unstable_batchedUpdates=Yf,or.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!Kc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Gc(i,o,l,!1,d)},or.version="18.3.1-next-f1338f8080-20240426",or}var u_;function X0(){if(u_)return up.exports;u_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=wC(),up.exports}var c_;function EC(){if(c_)return Xc;c_=1;var n=X0();return Xc.createRoot=n.createRoot,Xc.hydrateRoot=n.hydrateRoot,Xc}var SC=EC();const TC=G0(SC);var IC=X0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yu.apply(this,arguments)}var Js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Js||(Js={}));const d_="popstate";function bC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return Up("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Y0(s)}return PC(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function km(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CC(){return Math.random().toString(36).substr(2,8)}function h_(n,e){return{usr:n.state,key:n.key,idx:e}}function Up(n,e,t,r){return t===void 0&&(t=null),yu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?cl(e):e,{state:t,key:e&&e.key||r||CC()})}function Y0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function cl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function PC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=Js.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(yu({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function E(){h=Js.Pop;let b=_(),z=b==null?null:b-m;m=b,f&&f({action:h,location:x.location,delta:z})}function w(b,z){h=Js.Push;let Q=Up(x.location,b,z);m=_()+1;let K=h_(Q,m),Z=x.createHref(Q);try{u.pushState(K,"",Z)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(Z)}a&&f&&f({action:h,location:x.location,delta:1})}function P(b,z){h=Js.Replace;let Q=Up(x.location,b,z);m=_();let K=h_(Q,m),Z=x.createHref(Q);u.replaceState(K,"",Z),a&&f&&f({action:h,location:x.location,delta:0})}function D(b){let z=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof b=="string"?b:Y0(b);return Q=Q.replace(/ $/,"%20"),Jt(z,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,z)}let x={get action(){return h},get location(){return n(s,u)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(d_,E),f=b,()=>{s.removeEventListener(d_,E),f=null}},createHref(b){return e(s,b)},createURL:D,encodeLocation(b){let z=D(b);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:P,go(b){return u.go(b)}};return x}var f_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(f_||(f_={}));function AC(n,e,t){return t===void 0&&(t="/"),RC(n,e,t)}function RC(n,e,t,r){let s=typeof e=="string"?cl(e):e,a=eE(s.pathname||"/",t);if(a==null)return null;let u=J0(n);xC(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=$C(a);h=FC(u[f],m)}return h}function J0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Jt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Bo([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Jt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),J0(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:jC(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of Z0(a.path))s(a,u,f)}),e}function Z0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=Z0(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function xC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const kC=/^:[\w-]+$/,NC=3,OC=2,DC=1,MC=10,VC=-2,p_=n=>n==="*";function jC(n,e){let t=n.split("/"),r=t.length;return t.some(p_)&&(r+=VC),e&&(r+=OC),t.filter(s=>!p_(s)).reduce((s,a)=>s+(kC.test(a)?NC:a===""?DC:MC),r)}function LC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function FC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=UC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),w=f.route;if(!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:Bo([a,E.pathname]),pathnameBase:KC(Bo([a,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(a=Bo([a,E.pathnameBase]))}return u}function UC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=zC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,_,E)=>{let{paramName:w,isOptional:P}=_;if(w==="*"){let x=h[E]||"";u=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const D=h[E];return P&&!D?m[w]=void 0:m[w]=(D||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function zC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),km(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $C(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return km(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function eE(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const BC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WC=n=>BC.test(n);function HC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?cl(n):n,a;if(t)if(WC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),km(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=m_(t.substring(1),"/"):a=m_(t,e)}else a=e;return{pathname:a,search:GC(r),hash:QC(s)}}function m_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function hp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tE(n,e){let t=qC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function nE(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=cl(n):(s=yu({},n),Jt(!s.pathname||!s.pathname.includes("?"),hp("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),hp("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),hp("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let E=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),E-=1;s.pathname=w.join("/")}h=E>=0?e[E]:"/"}let f=HC(s,h),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Bo=n=>n.join("/").replace(/\/\/+/g,"/"),KC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),GC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function XC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const rE=["post","put","patch","delete"];new Set(rE);const YC=["get",...rE];new Set(YC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_u.apply(this,arguments)}const Nm=O.createContext(null),JC=O.createContext(null),ku=O.createContext(null),nh=O.createContext(null),po=O.createContext({outlet:null,matches:[],isDataRoute:!1}),iE=O.createContext(null);function Nu(){return O.useContext(nh)!=null}function Om(){return Nu()||Jt(!1),O.useContext(nh).location}function sE(n){O.useContext(ku).static||O.useLayoutEffect(n)}function dl(){let{isDataRoute:n}=O.useContext(po);return n?h1():ZC()}function ZC(){Nu()||Jt(!1);let n=O.useContext(Nm),{basename:e,future:t,navigator:r}=O.useContext(ku),{matches:s}=O.useContext(po),{pathname:a}=Om(),u=JSON.stringify(tE(s,t.v7_relativeSplatPath)),h=O.useRef(!1);return sE(()=>{h.current=!0}),O.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let E=nE(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Bo([e,E.pathname])),(_.replace?r.replace:r.push)(E,_.state,_)},[e,r,u,a,n])}function e1(){let{matches:n}=O.useContext(po),e=n[n.length-1];return e?e.params:{}}function t1(n,e){return n1(n,e)}function n1(n,e,t,r){Nu()||Jt(!1);let{navigator:s}=O.useContext(ku),{matches:a}=O.useContext(po),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Om(),_;if(e){var E;let b=typeof e=="string"?cl(e):e;f==="/"||(E=b.pathname)!=null&&E.startsWith(f)||Jt(!1),_=b}else _=m;let w=_.pathname||"/",P=w;if(f!=="/"){let b=f.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let D=AC(n,{pathname:P}),x=a1(D&&D.map(b=>Object.assign({},b,{params:Object.assign({},h,b.params),pathname:Bo([f,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:Bo([f,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,r);return e&&x?O.createElement(nh.Provider,{value:{location:_u({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Js.Pop}},x):x}function r1(){let n=d1(),e=XC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:s},t):null,null)}const i1=O.createElement(r1,null);class s1 extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(po.Provider,{value:this.props.routeContext},O.createElement(iE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function o1(n){let{routeContext:e,match:t,children:r}=n,s=O.useContext(Nm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(po.Provider,{value:e},r)}function a1(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(s=t)==null?void 0:s.errors;if(h!=null){let _=u.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);_>=0||Jt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=_),E.route.id){let{loaderData:w,errors:P}=t,D=E.route.loader&&w[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||D){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,E,w)=>{let P,D=!1,x=null,b=null;t&&(P=h&&E.route.id?h[E.route.id]:void 0,x=E.route.errorElement||i1,f&&(m<0&&w===0?(f1("route-fallback"),D=!0,b=null):m===w&&(D=!0,b=E.route.hydrateFallbackElement||null)));let z=e.concat(u.slice(0,w+1)),Q=()=>{let K;return P?K=x:D?K=b:E.route.Component?K=O.createElement(E.route.Component,null):E.route.element?K=E.route.element:K=_,O.createElement(o1,{match:E,routeContext:{outlet:_,matches:z,isDataRoute:t!=null},children:K})};return t&&(E.route.ErrorBoundary||E.route.errorElement||w===0)?O.createElement(s1,{location:t.location,revalidation:t.revalidation,component:x,error:P,children:Q(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):Q()},null)}var oE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(oE||{}),aE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(aE||{});function l1(n){let e=O.useContext(Nm);return e||Jt(!1),e}function u1(n){let e=O.useContext(JC);return e||Jt(!1),e}function c1(n){let e=O.useContext(po);return e||Jt(!1),e}function lE(n){let e=c1(),t=e.matches[e.matches.length-1];return t.route.id||Jt(!1),t.route.id}function d1(){var n;let e=O.useContext(iE),t=u1(),r=lE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function h1(){let{router:n}=l1(oE.UseNavigateStable),e=lE(aE.UseNavigateStable),t=O.useRef(!1);return sE(()=>{t.current=!0}),O.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,_u({fromRouteId:e},a)))},[n,e])}const g_={};function f1(n,e,t){g_[n]||(g_[n]=!0)}function p1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Tr(n){let{to:e,replace:t,state:r,relative:s}=n;Nu()||Jt(!1);let{future:a,static:u}=O.useContext(ku),{matches:h}=O.useContext(po),{pathname:f}=Om(),m=dl(),_=nE(e,tE(h,a.v7_relativeSplatPath),f,s==="path"),E=JSON.stringify(_);return O.useEffect(()=>m(JSON.parse(E),{replace:t,state:r,relative:s}),[m,E,s,t,r]),null}function Ks(n){Jt(!1)}function m1(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Js.Pop,navigator:a,static:u=!1,future:h}=n;Nu()&&Jt(!1);let f=e.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:a,static:u,future:_u({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=cl(r));let{pathname:_="/",search:E="",hash:w="",state:P=null,key:D="default"}=r,x=O.useMemo(()=>{let b=eE(_,f);return b==null?null:{location:{pathname:b,search:E,hash:w,state:P,key:D},navigationType:s}},[f,_,E,w,P,D,s]);return x==null?null:O.createElement(ku.Provider,{value:m},O.createElement(nh.Provider,{children:t,value:x}))}function g1(n){let{children:e,location:t}=n;return t1(zp(e),t)}new Promise(()=>{});function zp(n,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(n,(r,s)=>{if(!O.isValidElement(r))return;let a=[...e,s];if(r.type===O.Fragment){t.push.apply(t,zp(r.props.children,a));return}r.type!==Ks&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=zp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const v1="6";try{window.__reactRouterVersion=v1}catch{}const y1="startTransition",v_=Fp[y1];function _1(n){let{basename:e,children:t,future:r,window:s}=n,a=O.useRef();a.current==null&&(a.current=bC({window:s,v5Compat:!0}));let u=a.current,[h,f]=O.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},_=O.useCallback(E=>{m&&v_?v_(()=>f(E)):f(E)},[f,m]);return O.useLayoutEffect(()=>u.listen(_),[u,_]),O.useEffect(()=>p1(r),[r]),O.createElement(m1,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:r})}var y_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(y_||(y_={}));var __;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(__||(__={}));function w_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function w1(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function E1(){const[n,e]=O.useState(null),[t,r]=O.useState(!1);O.useEffect(()=>{function h(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",h),()=>window.removeEventListener("beforeinstallprompt",h)},[]);const s=O.useMemo(()=>!w_()&&w1()&&!t&&!n,[t,n]),a=O.useMemo(()=>!w_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:g.jsxs("section",{className:"install-banner","aria-live":"polite",children:[g.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),g.jsxs("div",{className:"install-actions",children:[a?g.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const uE=O.createContext(null);function S1({children:n}){const[e,t]=O.useState([]),r=O.useCallback((a,u)=>{const h=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:h,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==h))},3200)},[]),s=O.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return g.jsxs(uE.Provider,{value:s,children:[n,g.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>g.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function rh(){const n=O.useContext(uE);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const T1=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},I1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|h>>4;let w=(h&15)<<2|m>>6,P=m&63;f||(P=64,u||(w=64)),r.push(t[_],t[E],t[w],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||E==null)throw new b1;const w=a<<2|h>>4;if(r.push(w),m!==64){const P=h<<4&240|m>>2;if(r.push(P),E!==64){const D=m<<6&192|E;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class b1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C1=function(n){const e=cE(n);return dE.encodeByteArray(e,!0)},Cd=function(n){return C1(n).replace(/\./g,"")},hE=function(n){try{return dE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=()=>P1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof E_>"u")return;const n=E_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},x1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hE(n[1]);return e&&JSON.parse(e)},ih=()=>{try{return T1()||A1()||R1()||x1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fE=n=>{var e,t;return(t=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Dm=n=>{const e=fE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pE=()=>{var n;return(n=ih())===null||n===void 0?void 0:n.config},mE=n=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Cd(JSON.stringify(t)),Cd(JSON.stringify(u)),""].join(".")}const du={};function N1(){const n={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?n.emulator.push(e):n.prod.push(e);return n}function O1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let S_=!1;function oh(n,e){if(typeof window>"u"||typeof document>"u"||!Es(window.location.host)||du[n]===e||du[n]||S_)return;du[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=N1().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{S_=!0,u()},w}function _(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=O1(r),P=t("text"),D=document.getElementById(P)||document.createElement("span"),x=t("learnmore"),b=document.getElementById(x)||document.createElement("a"),z=t("preprendIcon"),Q=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;h(K),_(b,x);const Z=m();f(Q,z),K.append(Q,D,b,Z),document.body.appendChild(K)}a?(D.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function M1(){var n;const e=(n=ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function L1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F1(){const n=Nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function U1(){return!M1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z1(){try{return typeof indexedDB=="object"}catch{return!1}}function $1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="FirebaseError";class pi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=B1,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?W1(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new pi(s,h,r)}}function W1(n,e){return n.replace(H1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const H1=/\{\$([^}]+)}/g;function q1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ps(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(T_(a)&&T_(u)){if(!ps(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function T_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function K1(n,e){const t=new G1(n,e);return t.subscribe.bind(t)}class G1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Q1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=fp),s.error===void 0&&(s.error=fp),s.complete===void 0&&(s.complete=fp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class ms{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new k1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J1(e))try{this.getOrInitializeService({instanceIdentifier:Uo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uo){return this.instances.has(e)}getOptions(e=Uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Uo){return this.component?this.component.multipleInstances?e:Uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y1(n){return n===Uo?void 0:n}function J1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new X1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const eP={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},tP=Ye.INFO,nP={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},rP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=nP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const iP=(n,e)=>e.some(t=>n instanceof t);let I_,b_;function sP(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,$p=new WeakMap,yE=new WeakMap,pp=new WeakMap,Vm=new WeakMap;function aP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(eo(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&vE.set(t,n)}).catch(()=>{}),Vm.set(e,n),e}function lP(n){if($p.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return eo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uP(n){Bp=n(Bp)}function cP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(mp(this),e,...t);return yE.set(r,e.sort?e.sort():[e]),eo(r)}:oP().includes(n)?function(...e){return n.apply(mp(this),e),eo(vE.get(this))}:function(...e){return eo(n.apply(mp(this),e))}}function dP(n){return typeof n=="function"?cP(n):(n instanceof IDBTransaction&&lP(n),iP(n,sP())?new Proxy(n,Bp):n)}function eo(n){if(n instanceof IDBRequest)return aP(n);if(pp.has(n))return pp.get(n);const e=dP(n);return e!==n&&(pp.set(n,e),Vm.set(e,n)),e}const mp=n=>Vm.get(n);function hP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=eo(u);return r&&u.addEventListener("upgradeneeded",f=>{r(eo(u.result),f.oldVersion,f.newVersion,eo(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const fP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],gp=new Map;function C_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=pP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fP.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return gp.set(e,a),a}uP(n=>({...n,get:(e,t,r)=>C_(e,t)||n.get(e,t,r),has:(e,t)=>!!C_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function gP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",P_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Mm("@firebase/app"),vP="@firebase/app-compat",yP="@firebase/analytics-compat",_P="@firebase/analytics",wP="@firebase/app-check-compat",EP="@firebase/app-check",SP="@firebase/auth",TP="@firebase/auth-compat",IP="@firebase/database",bP="@firebase/data-connect",CP="@firebase/database-compat",PP="@firebase/functions",AP="@firebase/functions-compat",RP="@firebase/installations",xP="@firebase/installations-compat",kP="@firebase/messaging",NP="@firebase/messaging-compat",OP="@firebase/performance",DP="@firebase/performance-compat",MP="@firebase/remote-config",VP="@firebase/remote-config-compat",jP="@firebase/storage",LP="@firebase/storage-compat",FP="@firebase/firestore",UP="@firebase/ai",zP="@firebase/firestore-compat",$P="firebase",BP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",WP={[Wp]:"fire-core",[vP]:"fire-core-compat",[_P]:"fire-analytics",[yP]:"fire-analytics-compat",[EP]:"fire-app-check",[wP]:"fire-app-check-compat",[SP]:"fire-auth",[TP]:"fire-auth-compat",[IP]:"fire-rtdb",[bP]:"fire-data-connect",[CP]:"fire-rtdb-compat",[PP]:"fire-fn",[AP]:"fire-fn-compat",[RP]:"fire-iid",[xP]:"fire-iid-compat",[kP]:"fire-fcm",[NP]:"fire-fcm-compat",[OP]:"fire-perf",[DP]:"fire-perf-compat",[MP]:"fire-rc",[VP]:"fire-rc-compat",[jP]:"fire-gcs",[LP]:"fire-gcs-compat",[FP]:"fire-fst",[zP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,HP=new Map,qp=new Map;function A_(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function so(n){const e=n.name;if(qp.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;qp.set(e,n);for(const t of Pd.values())A_(t,n);for(const t of HP.values())A_(t,n);return!0}function Mu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ur(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new Ou("app","Firebase",qP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=BP;function _E(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw to.create("bad-app-name",{appName:String(s)});if(t||(t=pE()),!t)throw to.create("no-options");const a=Pd.get(s);if(a){if(ps(t,a.options)&&ps(r,a.config))return a;throw to.create("duplicate-app",{appName:s})}const u=new Z1(s);for(const f of qp.values())u.addComponent(f);const h=new KP(t,r,u);return Pd.set(s,h),h}function ah(n=Hp){const e=Pd.get(n);if(!e&&n===Hp&&pE())return _E();if(!e)throw to.create("no-app",{appName:n});return e}function Br(n,e,t){var r;let s=(r=WP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(h.join(" "));return}so(new ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firebase-heartbeat-database",QP=1,wu="firebase-heartbeat-store";let vp=null;function wE(){return vp||(vp=hP(GP,QP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),vp}async function XP(n){try{const t=(await wE()).transaction(wu),r=await t.objectStore(wu).get(EE(n));return await t.done,r}catch(e){if(e instanceof pi)gs.warn(e.message);else{const t=to.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function R_(n,e){try{const r=(await wE()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,EE(n)),await r.done}catch(t){if(t instanceof pi)gs.warn(t.message);else{const r=to.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(r.message)}}}function EE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1024,JP=30;class ZP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=x_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>JP){const u=nA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=x_(),{heartbeatsToSend:r,unsentEntries:s}=eA(this._heartbeatsCache.heartbeats),a=Cd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return gs.warn(t),""}}}function x_(){return new Date().toISOString().substring(0,10)}function eA(n,e=YP){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),k_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),k_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class tA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z1()?$1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return R_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return R_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function k_(n){return Cd(JSON.stringify({version:2,heartbeats:n})).length}function nA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){so(new ms("platform-logger",e=>new mP(e),"PRIVATE")),so(new ms("heartbeat",e=>new ZP(e),"PRIVATE")),Br(Wp,P_,n),Br(Wp,P_,"esm2017"),Br("fire-js","")}rA("");var iA="firebase",sA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(iA,sA,"app");function jm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oA=SE,TE=new Ou("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Mm("@firebase/auth");function aA(n,...e){Ad.logLevel<=Ye.WARN&&Ad.warn(`Auth (${Yo}): ${n}`,...e)}function dd(n,...e){Ad.logLevel<=Ye.ERROR&&Ad.error(`Auth (${Yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...e){throw Fm(n,...e)}function di(n,...e){return Fm(n,...e)}function Lm(n,e,t){const r=Object.assign(Object.assign({},oA()),{[e]:t});return new Ou("auth","Firebase",r).create(e,{appName:n.name})}function no(n){return Lm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fi(n,"argument-error"),Lm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TE.create(n,...e)}function Fe(n,e,...t){if(!n)throw Fm(e,...t)}function cs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function vs(n,e){n||cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lA(){return N_()==="http:"||N_()==="https:"}function N_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lA()||j1()||"connection"in navigator)?navigator.onLine:!0}function cA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=D1()||L1()}get(){return uA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fA=new Vu(3e4,6e4);function zm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hl(n,e,t,r,s={}){return CE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Du(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return V1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Es(n.emulatorConfig.host)&&(m.credentials="include"),bE.fetch()(await PE(n,n.config.apiHost,t,h),m)})}async function CE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},dA),e);try{const s=new mA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Yc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Yc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Yc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Lm(n,_,m);Fi(n,_)}}catch(s){if(s instanceof pi)throw s;Fi(n,"network-request-failed",{message:String(s)})}}async function pA(n,e,t,r,s={}){const a=await hl(n,e,t,r,s);return"mfaPendingCredential"in a&&Fi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function PE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Um(n.config,s):`${n.config.apiScheme}://${s}`;return hA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class mA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),fA.get())})}}function Yc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=di(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e){return hl(n,"POST","/v1/accounts:delete",e)}async function Rd(n,e){return hl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vA(n,e=!1){const t=Ct(n),r=await t.getIdToken(e),s=$m(r);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:hu(yp(s.auth_time)),issuedAtTime:hu(yp(s.iat)),expirationTime:hu(yp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function yp(n){return Number(n)*1e3}function $m(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const s=hE(t);return s?JSON.parse(s):(dd("Failed to decode base64 JWT payload"),null)}catch(s){return dd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function O_(n){const e=$m(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pi&&yA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function yA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Eu(n,Rd(t,{idToken:r}));Fe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?AE(a.providerUserInfo):[],h=EA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),_=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function wA(n){const e=Ct(n);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AE(n){return n.map(e=>{var{providerId:t}=e,r=jm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(n,e){const t=await CE(n,{},async()=>{const r=Du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await PE(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Es(n.emulatorConfig.host)&&(f.credentials="include"),bE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TA(n,e){return hl(n,"POST","/v2/accounts:revokeToken",zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=O_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await SA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new qa;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _A(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vA(this,e)}reload(){return wA(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(no(this.auth));const e=await this.getIdToken();return await Eu(this,gA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,_;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,D=(u=t.photoURL)!==null&&u!==void 0?u:void 0,x=(h=t.tenantId)!==null&&h!==void 0?h:void 0,b=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,z=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:Z,isAnonymous:W,providerData:ne,stsTokenManager:N}=t;Fe(K&&N,e,"internal-error");const A=qa.fromJSON(this.name,N);Fe(typeof K=="string",e,"internal-error"),Hs(E,e.name),Hs(w,e.name),Fe(typeof Z=="boolean",e,"internal-error"),Fe(typeof W=="boolean",e,"internal-error"),Hs(P,e.name),Hs(D,e.name),Hs(x,e.name),Hs(b,e.name),Hs(z,e.name),Hs(Q,e.name);const R=new ci({uid:K,auth:e,email:w,emailVerified:Z,displayName:E,isAnonymous:W,photoURL:D,phoneNumber:P,tenantId:x,stsTokenManager:A,createdAt:z,lastLoginAt:Q});return ne&&Array.isArray(ne)&&(R.providerData=ne.map(V=>Object.assign({},V))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,t,r=!1){const s=new qa;s.updateFromServerResponse(t);const a=new ci({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?AE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new qa;h.updateFromIdToken(r);const f=new ci({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new Map;function ds(n){vs(n instanceof Function,"Expected a class definition");let e=D_.get(n);return e?(vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,D_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RE.type="NONE";const M_=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ka{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=hd(this.userKey,s.apiKey,a),this.fullPersistenceKey=hd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rd(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ka(ds(M_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ds(M_);const u=hd(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){let E;if(typeof _=="string"){const w=await Rd(e,{idToken:_}).catch(()=>{});if(!w)break;E=await ci._fromGetAccountInfoResponse(e,w,_)}else E=ci._fromJSON(e,_);m!==a&&(h=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ka(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Ka(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ME(e))return"Blackberry";if(VE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||NE(e))&&!e.includes("edge/"))return"Chrome";if(DE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xE(n=Nn()){return/firefox\//i.test(n)}function kE(n=Nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NE(n=Nn()){return/crios\//i.test(n)}function OE(n=Nn()){return/iemobile/i.test(n)}function DE(n=Nn()){return/android/i.test(n)}function ME(n=Nn()){return/blackberry/i.test(n)}function VE(n=Nn()){return/webos/i.test(n)}function Bm(n=Nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IA(n=Nn()){var e;return Bm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bA(){return F1()&&document.documentMode===10}function jE(n=Nn()){return Bm(n)||DE(n)||VE(n)||ME(n)||/windows phone/i.test(n)||OE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n,e=[]){let t;switch(n){case"Browser":t=V_(Nn());break;case"Worker":t=`${V_(Nn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e={}){return hl(n,"GET","/v2/passwordPolicy",zm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=6;class RA{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:AA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new CA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rd(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ur(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(no(this));const t=e?Ct(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(no(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(no(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PA(this),t=new RA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await TA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&aA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fl(n){return Ct(n)}class j_{constructor(e){this.auth=e,this.observer=null,this.addObserver=K1(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kA(n){Wm=n}function NA(n){return Wm.loadJS(n)}function OA(){return Wm.gapiScript}function DA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,e){const t=Mu(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ps(a,e??{}))return s;Fi(s,"already-initialized")}return t.initialize({options:e})}function VA(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jA(n,e,t){const r=fl(n);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=FE(e),{host:u,port:h}=LA(e),f=h===null?"":`:${h}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(ps(m,r.config.emulator)&&ps(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Es(u)?(sh(`${a}//${u}${f}`),oh("Auth",!0)):FA()}function FE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LA(n){const e=FE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:L_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:L_(u)}}}function L_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function FA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e){return pA(n,"POST","/v1/accounts:signInWithIdp",zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="http://localhost";class qo extends UE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=jm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new qo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ga(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ga(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ga(e,t)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Du(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends lh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends ju{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return us.credential(t,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends ju{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends ju{constructor(){super("twitter.com")}static credential(e,t){return qo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ci._fromIdTokenResponse(e,r,s),u=F_(r);return new Za({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=F_(r);return new Za({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function F_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends pi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new kd(e,t,r,s)}}function zE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,a,e,r):a})}async function zA(n,e,t=!1){const r=await Eu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Za._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(n,e,t=!1){const{auth:r}=n;if(ur(r.app))return Promise.reject(no(r));const s="reauthenticate";try{const a=await Eu(n,zE(r,s,e,n),t);Fe(a.idToken,r,"internal-error");const u=$m(a.idToken);Fe(u,r,"internal-error");const{sub:h}=u;return Fe(n.uid===h,r,"user-mismatch"),Za._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n,e,t=!1){if(ur(n.app))return Promise.reject(no(n));const r="signIn",s=await zE(n,r,e),a=await Za._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n,e){return Ct(n).setPersistence(e)}function $E(n,e,t,r){return Ct(n).onIdTokenChanged(e,t,r)}function HA(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}function Su(n){return Ct(n).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,KA=10;class WE extends BE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);bA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KA):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const HE=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends BE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qE.type="SESSION";const KE=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await GA(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Hm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const w=E;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(w.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function XA(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function YA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZA(){return GE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",eR=1,Od="firebaseLocalStorage",XE="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ch(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function tR(){const n=indexedDB.deleteDatabase(QE);return new Lu(n).toPromise()}function Qp(){const n=indexedDB.open(QE,eR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Od,{keyPath:XE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Od)?e(r):(r.close(),await tR(),e(await Qp()))})})}async function U_(n,e,t){const r=ch(n,!0).put({[XE]:e,value:t});return new Lu(r).toPromise()}async function nR(n,e){const t=ch(n,!1).get(e),r=await new Lu(t).toPromise();return r===void 0?null:r.value}function z_(n,e){const t=ch(n,!0).delete(e);return new Lu(t).toPromise()}const rR=800,iR=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>iR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(ZA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YA(),!this.activeServiceWorker)return;this.sender=new QA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await U_(e,Nd,"1"),await z_(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>U_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=ch(s,!1).getAll();return new Lu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const sR=YE;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e){return e?ds(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends UE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oR(n){return BA(n.auth,new Km(n),n.bypassAuthState)}function aR(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),$A(t,new Km(n),n.bypassAuthState)}async function lR(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),zA(t,new Km(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oR;case"linkViaPopup":case"linkViaRedirect":return lR;case"reauthViaPopup":case"reauthViaRedirect":return aR;default:Fi(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Vu(2e3,1e4);async function cR(n,e,t){if(ur(n.app))return Promise.reject(di(n,"operation-not-supported-in-this-environment"));const r=fl(n);IE(n,e,lh);const s=qm(r,t);return new zo(r,"signInViaPopup",e,s).executeNotNull()}class zo extends JE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uR.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="pendingRedirect",fd=new Map;class hR extends JE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fd.get(this.auth._key());if(!e){try{const r=await fR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fR(n,e){const t=eS(e),r=ZE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function pR(n,e){return ZE(n)._set(eS(e),"true")}function mR(n,e){fd.set(n._key(),e)}function ZE(n){return ds(n._redirectPersistence)}function eS(n){return hd(dR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,e,t){return vR(n,e,t)}async function vR(n,e,t){if(ur(n.app))return Promise.reject(no(n));const r=fl(n);IE(n,e,lh),await r._initializationPromise;const s=qm(r,t);return await pR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function yR(n,e){return await fl(n)._initializationPromise,tS(n,e,!1)}async function tS(n,e,t=!1){if(ur(n.app))return Promise.reject(no(n));const r=fl(n),s=qm(r,e),u=await new hR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=600*1e3;class wR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ER(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!nS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_R&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ER(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(n,e={}){return hl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IR=/^https?/;async function bR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SR(n);for(const t of e)try{if(CR(t))return}catch{}Fi(n,"unauthorized-domain")}function CR(n){const e=Kp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!IR.test(t))return!1;if(TR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Vu(3e4,6e4);function B_(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function AR(n){return new Promise((e,t)=>{var r,s,a;function u(){B_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B_(),t(di(n,"network-request-failed"))},timeout:PR.get()})}if(!((s=(r=Oi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Oi().gapi)===null||a===void 0)&&a.load)u();else{const h=DA("iframefcb");return Oi()[h]=()=>{gapi.load?u():t(di(n,"network-request-failed"))},NA(`${OA()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw pd=null,e})}let pd=null;function RR(n){return pd=pd||AR(n),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new Vu(5e3,15e3),kR="__/auth/iframe",NR="emulator/auth/iframe",OR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MR(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Um(e,NR):`https://${n.config.authDomain}/${kR}`,r={apiKey:e.apiKey,appName:n.name,v:Yo},s=DR.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Du(r).slice(1)}`}async function VR(n){const e=await RR(n),t=Oi().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:MR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OR,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=di(n,"network-request-failed"),h=Oi().setTimeout(()=>{a(u)},xR.get());function f(){Oi().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LR=500,FR=600,UR="_blank",zR="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $R(n,e,t,r=LR,s=FR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},jR),{width:r.toString(),height:s.toString(),top:a,left:u}),m=Nn().toLowerCase();t&&(h=NE(m)?UR:t),xE(m)&&(e=e||zR,f.scrollbars="yes");const _=Object.entries(f).reduce((w,[P,D])=>`${w}${P}=${D},`,"");if(IA(m)&&h!=="_self")return BR(e||"",h),new W_(null);const E=window.open(e||"",h,_);Fe(E,n,"popup-blocked");try{E.focus()}catch{}return new W_(E)}function BR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="__/auth/handler",HR="emulator/auth/handler",qR=encodeURIComponent("fac");async function H_(n,e,t,r,s,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yo,eventId:s};if(e instanceof lh){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",q1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof ju){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${qR}=${encodeURIComponent(f)}`:"";return`${KR(n)}?${Du(h).slice(1)}${m}`}function KR({config:n}){return n.emulator?Um(n,HR):`https://${n.authDomain}/${WR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="webStorageSupport";class GR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=tS,this._overrideRedirectResult=mR}async _openPopup(e,t,r,s){var a;vs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await H_(e,t,r,Kp(),s);return $R(e,u,Hm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await H_(e,t,r,Kp(),s);return XA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(vs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await VR(e),r=new wR(e);return t.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_p,{type:_p},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[_p];u!==void 0&&t(!!u),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jE()||kE()||Bm()}}const QR=GR;var q_="@firebase/auth",K_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JR(n){so(new ms("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Fe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LE(n)},m=new xA(r,s,a,f);return VA(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),so(new ms("auth-internal",e=>{const t=fl(e.getProvider("auth").getImmediate());return(r=>new XR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(q_,K_,YR(n)),Br(q_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=300,ex=mE("authIdTokenMaxAge")||ZR;let G_=null;const tx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ex)return;const s=t==null?void 0:t.token;G_!==s&&(G_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nx(n=ah()){const e=Mu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MA(n,{popupRedirectResolver:QR,persistence:[sR,HE,KE]}),r=mE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=tx(a.toString());HA(t,u,()=>u(t.currentUser)),$E(t,h=>u(h))}}const s=fE("auth");return s&&jA(t,`http://${s}`),t}function rx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}kA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=di("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",rx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JR("Browser");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,rS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function R(){}R.prototype=A.prototype,N.D=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(V,j,L){for(var k=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)k[fe-2]=arguments[fe];return A.prototype[j].apply(V,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,A,R){R||(R=0);var V=Array(16);if(typeof A=="string")for(var j=0;16>j;++j)V[j]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(j=0;16>j;++j)V[j]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],j=N.g[2];var L=N.g[3],k=A+(L^R&(j^L))+V[0]+3614090360&4294967295;A=R+(k<<7&4294967295|k>>>25),k=L+(j^A&(R^j))+V[1]+3905402710&4294967295,L=A+(k<<12&4294967295|k>>>20),k=j+(R^L&(A^R))+V[2]+606105819&4294967295,j=L+(k<<17&4294967295|k>>>15),k=R+(A^j&(L^A))+V[3]+3250441966&4294967295,R=j+(k<<22&4294967295|k>>>10),k=A+(L^R&(j^L))+V[4]+4118548399&4294967295,A=R+(k<<7&4294967295|k>>>25),k=L+(j^A&(R^j))+V[5]+1200080426&4294967295,L=A+(k<<12&4294967295|k>>>20),k=j+(R^L&(A^R))+V[6]+2821735955&4294967295,j=L+(k<<17&4294967295|k>>>15),k=R+(A^j&(L^A))+V[7]+4249261313&4294967295,R=j+(k<<22&4294967295|k>>>10),k=A+(L^R&(j^L))+V[8]+1770035416&4294967295,A=R+(k<<7&4294967295|k>>>25),k=L+(j^A&(R^j))+V[9]+2336552879&4294967295,L=A+(k<<12&4294967295|k>>>20),k=j+(R^L&(A^R))+V[10]+4294925233&4294967295,j=L+(k<<17&4294967295|k>>>15),k=R+(A^j&(L^A))+V[11]+2304563134&4294967295,R=j+(k<<22&4294967295|k>>>10),k=A+(L^R&(j^L))+V[12]+1804603682&4294967295,A=R+(k<<7&4294967295|k>>>25),k=L+(j^A&(R^j))+V[13]+4254626195&4294967295,L=A+(k<<12&4294967295|k>>>20),k=j+(R^L&(A^R))+V[14]+2792965006&4294967295,j=L+(k<<17&4294967295|k>>>15),k=R+(A^j&(L^A))+V[15]+1236535329&4294967295,R=j+(k<<22&4294967295|k>>>10),k=A+(j^L&(R^j))+V[1]+4129170786&4294967295,A=R+(k<<5&4294967295|k>>>27),k=L+(R^j&(A^R))+V[6]+3225465664&4294967295,L=A+(k<<9&4294967295|k>>>23),k=j+(A^R&(L^A))+V[11]+643717713&4294967295,j=L+(k<<14&4294967295|k>>>18),k=R+(L^A&(j^L))+V[0]+3921069994&4294967295,R=j+(k<<20&4294967295|k>>>12),k=A+(j^L&(R^j))+V[5]+3593408605&4294967295,A=R+(k<<5&4294967295|k>>>27),k=L+(R^j&(A^R))+V[10]+38016083&4294967295,L=A+(k<<9&4294967295|k>>>23),k=j+(A^R&(L^A))+V[15]+3634488961&4294967295,j=L+(k<<14&4294967295|k>>>18),k=R+(L^A&(j^L))+V[4]+3889429448&4294967295,R=j+(k<<20&4294967295|k>>>12),k=A+(j^L&(R^j))+V[9]+568446438&4294967295,A=R+(k<<5&4294967295|k>>>27),k=L+(R^j&(A^R))+V[14]+3275163606&4294967295,L=A+(k<<9&4294967295|k>>>23),k=j+(A^R&(L^A))+V[3]+4107603335&4294967295,j=L+(k<<14&4294967295|k>>>18),k=R+(L^A&(j^L))+V[8]+1163531501&4294967295,R=j+(k<<20&4294967295|k>>>12),k=A+(j^L&(R^j))+V[13]+2850285829&4294967295,A=R+(k<<5&4294967295|k>>>27),k=L+(R^j&(A^R))+V[2]+4243563512&4294967295,L=A+(k<<9&4294967295|k>>>23),k=j+(A^R&(L^A))+V[7]+1735328473&4294967295,j=L+(k<<14&4294967295|k>>>18),k=R+(L^A&(j^L))+V[12]+2368359562&4294967295,R=j+(k<<20&4294967295|k>>>12),k=A+(R^j^L)+V[5]+4294588738&4294967295,A=R+(k<<4&4294967295|k>>>28),k=L+(A^R^j)+V[8]+2272392833&4294967295,L=A+(k<<11&4294967295|k>>>21),k=j+(L^A^R)+V[11]+1839030562&4294967295,j=L+(k<<16&4294967295|k>>>16),k=R+(j^L^A)+V[14]+4259657740&4294967295,R=j+(k<<23&4294967295|k>>>9),k=A+(R^j^L)+V[1]+2763975236&4294967295,A=R+(k<<4&4294967295|k>>>28),k=L+(A^R^j)+V[4]+1272893353&4294967295,L=A+(k<<11&4294967295|k>>>21),k=j+(L^A^R)+V[7]+4139469664&4294967295,j=L+(k<<16&4294967295|k>>>16),k=R+(j^L^A)+V[10]+3200236656&4294967295,R=j+(k<<23&4294967295|k>>>9),k=A+(R^j^L)+V[13]+681279174&4294967295,A=R+(k<<4&4294967295|k>>>28),k=L+(A^R^j)+V[0]+3936430074&4294967295,L=A+(k<<11&4294967295|k>>>21),k=j+(L^A^R)+V[3]+3572445317&4294967295,j=L+(k<<16&4294967295|k>>>16),k=R+(j^L^A)+V[6]+76029189&4294967295,R=j+(k<<23&4294967295|k>>>9),k=A+(R^j^L)+V[9]+3654602809&4294967295,A=R+(k<<4&4294967295|k>>>28),k=L+(A^R^j)+V[12]+3873151461&4294967295,L=A+(k<<11&4294967295|k>>>21),k=j+(L^A^R)+V[15]+530742520&4294967295,j=L+(k<<16&4294967295|k>>>16),k=R+(j^L^A)+V[2]+3299628645&4294967295,R=j+(k<<23&4294967295|k>>>9),k=A+(j^(R|~L))+V[0]+4096336452&4294967295,A=R+(k<<6&4294967295|k>>>26),k=L+(R^(A|~j))+V[7]+1126891415&4294967295,L=A+(k<<10&4294967295|k>>>22),k=j+(A^(L|~R))+V[14]+2878612391&4294967295,j=L+(k<<15&4294967295|k>>>17),k=R+(L^(j|~A))+V[5]+4237533241&4294967295,R=j+(k<<21&4294967295|k>>>11),k=A+(j^(R|~L))+V[12]+1700485571&4294967295,A=R+(k<<6&4294967295|k>>>26),k=L+(R^(A|~j))+V[3]+2399980690&4294967295,L=A+(k<<10&4294967295|k>>>22),k=j+(A^(L|~R))+V[10]+4293915773&4294967295,j=L+(k<<15&4294967295|k>>>17),k=R+(L^(j|~A))+V[1]+2240044497&4294967295,R=j+(k<<21&4294967295|k>>>11),k=A+(j^(R|~L))+V[8]+1873313359&4294967295,A=R+(k<<6&4294967295|k>>>26),k=L+(R^(A|~j))+V[15]+4264355552&4294967295,L=A+(k<<10&4294967295|k>>>22),k=j+(A^(L|~R))+V[6]+2734768916&4294967295,j=L+(k<<15&4294967295|k>>>17),k=R+(L^(j|~A))+V[13]+1309151649&4294967295,R=j+(k<<21&4294967295|k>>>11),k=A+(j^(R|~L))+V[4]+4149444226&4294967295,A=R+(k<<6&4294967295|k>>>26),k=L+(R^(A|~j))+V[11]+3174756917&4294967295,L=A+(k<<10&4294967295|k>>>22),k=j+(A^(L|~R))+V[2]+718787259&4294967295,j=L+(k<<15&4294967295|k>>>17),k=R+(L^(j|~A))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var R=A-this.blockSize,V=this.B,j=this.h,L=0;L<A;){if(j==0)for(;L<=R;)s(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<A;)if(V[j++]=N.charCodeAt(L++),j==this.blockSize){s(this,V),j=0;break}}else for(;L<A;)if(V[j++]=N[L++],j==this.blockSize){s(this,V),j=0;break}}this.h=j,this.o+=A},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var R=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=R&255,R/=256;for(this.u(N),N=Array(16),A=R=0;4>A;++A)for(var V=0;32>V;V+=8)N[R++]=this.g[A]>>>V&255;return N};function a(N,A){var R=h;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function u(N,A){this.h=A;for(var R=[],V=!0,j=N.length-1;0<=j;j--){var L=N[j]|0;V&&L==A||(R[j]=L,V=!1)}this.g=R}var h={};function f(N){return-128<=N&&128>N?a(N,function(A){return new u([A|0],0>A?-1:0)}):new u([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return b(m(-N));for(var A=[],R=1,V=0;N>=R;V++)A[V]=N/R|0,R*=4294967296;return new u(A,0)}function _(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return b(_(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(A,8)),V=E,j=0;j<N.length;j+=8){var L=Math.min(8,N.length-j),k=parseInt(N.substring(j,j+L),A);8>L?(L=m(Math.pow(A,L)),V=V.j(L).add(m(k))):(V=V.j(R),V=V.add(m(k)))}return V}var E=f(0),w=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(x(this))return-b(this).m();for(var N=0,A=1,R=0;R<this.g.length;R++){var V=this.i(R);N+=(0<=V?V:4294967296+V)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D(this))return"0";if(x(this))return"-"+b(this).toString(N);for(var A=m(Math.pow(N,6)),R=this,V="";;){var j=Z(R,A).g;R=z(R,j.j(A));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=j,D(R))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function D(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function x(N){return N.h==-1}n.l=function(N){return N=z(this,N),x(N)?-1:D(N)?0:1};function b(N){for(var A=N.g.length,R=[],V=0;V<A;V++)R[V]=~N.g[V];return new u(R,~N.h).add(w)}n.abs=function(){return x(this)?b(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],V=0,j=0;j<=A;j++){var L=V+(this.i(j)&65535)+(N.i(j)&65535),k=(L>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);V=k>>>16,L&=65535,k&=65535,R[j]=k<<16|L}return new u(R,R[R.length-1]&-2147483648?-1:0)};function z(N,A){return N.add(b(A))}n.j=function(N){if(D(this)||D(N))return E;if(x(this))return x(N)?b(this).j(b(N)):b(b(this).j(N));if(x(N))return b(this.j(b(N)));if(0>this.l(P)&&0>N.l(P))return m(this.m()*N.m());for(var A=this.g.length+N.g.length,R=[],V=0;V<2*A;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var j=0;j<N.g.length;j++){var L=this.i(V)>>>16,k=this.i(V)&65535,fe=N.i(j)>>>16,be=N.i(j)&65535;R[2*V+2*j]+=k*be,Q(R,2*V+2*j),R[2*V+2*j+1]+=L*be,Q(R,2*V+2*j+1),R[2*V+2*j+1]+=k*fe,Q(R,2*V+2*j+1),R[2*V+2*j+2]+=L*fe,Q(R,2*V+2*j+2)}for(V=0;V<A;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=A;V<2*A;V++)R[V]=0;return new u(R,0)};function Q(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function K(N,A){this.g=N,this.h=A}function Z(N,A){if(D(A))throw Error("division by zero");if(D(N))return new K(E,E);if(x(N))return A=Z(b(N),A),new K(b(A.g),b(A.h));if(x(A))return A=Z(N,b(A)),new K(b(A.g),A.h);if(30<N.g.length){if(x(N)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,V=A;0>=V.l(N);)R=W(R),V=W(V);var j=ne(R,1),L=ne(V,1);for(V=ne(V,2),R=ne(R,2);!D(V);){var k=L.add(V);0>=k.l(N)&&(j=j.add(R),L=k),V=ne(V,1),R=ne(R,1)}return A=z(N,j.j(A)),new K(j,A)}for(j=E;0<=N.l(A);){for(R=Math.max(1,Math.floor(N.m()/A.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=m(R),k=L.j(A);x(k)||0<k.l(N);)R-=V,L=m(R),k=L.j(A);D(L)&&(L=w),j=j.add(L),N=z(N,k)}return new K(j,N)}n.A=function(N){return Z(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)&N.i(V);return new u(R,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)|N.i(V);return new u(R,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)^N.i(V);return new u(R,this.h^N.h)};function W(N){for(var A=N.g.length+1,R=[],V=0;V<A;V++)R[V]=N.i(V)<<1|N.i(V-1)>>>31;return new u(R,N.h)}function ne(N,A){var R=A>>5;A%=32;for(var V=N.g.length-R,j=[],L=0;L<V;L++)j[L]=0<A?N.i(L+R)>>>A|N.i(L+R+1)<<32-A:N.i(L+R);return new u(j,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,ro=u}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iS,su,sS,md,Xp,oS,aS,lS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,S){return c==Array.prototype||c==Object.prototype||(c[v]=S.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var v=0;v<c.length;++v){var S=c[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function s(c,v){if(v)e:{var S=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var H=c[C];if(!(H in S))break e;S=S[H]}c=c[c.length-1],C=S[c],v=v(C),v!=C&&v!=null&&e(S,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var S=0,C=!1,H={next:function(){if(!C&&S<c.length){var J=S++;return{value:v(J,c[J]),done:!1}}return C=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(c){return c||function(){return a(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function m(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,S){return c.call.apply(c.bind,arguments)}function E(c,v,S){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,C),c.apply(v,H)}}return function(){return c.apply(v,arguments)}}function w(c,v,S){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,w.apply(null,arguments)}function P(c,v){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function D(c,v){function S(){}S.prototype=v.prototype,c.aa=v.prototype,c.prototype=new S,c.prototype.constructor=c,c.Qb=function(C,H,J){for(var he=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)he[yt-2]=arguments[yt];return v.prototype[H].apply(C,he)}}function x(c){const v=c.length;if(0<v){const S=Array(v);for(let C=0;C<v;C++)S[C]=c[C];return S}return[]}function b(c,v){for(let S=1;S<arguments.length;S++){const C=arguments[S];if(f(C)){const H=c.length||0,J=C.length||0;c.length=H+J;for(let he=0;he<J;he++)c[H+he]=C[he]}else c.push(C)}}class z{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Q(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var W=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ne(c,v,S){for(const C in c)v.call(S,c[C],C,c)}function N(c,v){for(const S in c)v.call(void 0,c[S],S,c)}function A(c){const v={};for(const S in c)v[S]=c[S];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,v){let S,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(S in C)c[S]=C[S];for(let J=0;J<R.length;J++)S=R[J],Object.prototype.hasOwnProperty.call(C,S)&&(c[S]=C[S])}}function j(c){var v=1;c=c.split(":");const S=[];for(;0<v&&c.length;)S.push(c.shift()),v--;return c.length&&S.push(c.join(":")),S}function L(c){h.setTimeout(()=>{throw c},0)}function k(){var c=_e;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class fe{constructor(){this.h=this.g=null}add(v,S){const C=be.get();C.set(v,S),this.h?this.h.next=C:this.g=C,this.h=C}}var be=new z(()=>new Ue,c=>c.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,ae=!1,_e=new fe,de=()=>{const c=h.Promise.resolve(void 0);Ve=()=>{c.then(B)}};var B=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(S){L(S)}var v=be;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ae=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const S=()=>{};h.addEventListener("test",S,v),h.removeEventListener("test",S,v)}catch{}return c})();function Re(c,v){if(pe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var S=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(W){e:{try{Z(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else S=="mouseover"?v=c.fromElement:S=="mouseout"&&(v=c.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}D(Re,pe);var le={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Ge(c,v,S,C,H){this.listener=c,this.proxy=null,this.src=v,this.type=S,this.capture=!!C,this.ha=H,this.key=++Me,this.da=this.fa=!1}function St(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ie(c){this.src=c,this.g={},this.h=0}ie.prototype.add=function(c,v,S,C,H){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var he=ot(c,v,C,H);return-1<he?(v=c[he],S||(v.fa=!1)):(v=new Ge(v,this.src,J,!!C,H),v.fa=S,c.push(v)),v};function qe(c,v){var S=v.type;if(S in c.g){var C=c.g[S],H=Array.prototype.indexOf.call(C,v,void 0),J;(J=0<=H)&&Array.prototype.splice.call(C,H,1),J&&(St(v),c.g[S].length==0&&(delete c.g[S],c.h--))}}function ot(c,v,S,C){for(var H=0;H<c.length;++H){var J=c[H];if(!J.da&&J.listener==v&&J.capture==!!S&&J.ha==C)return H}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),at={};function zt(c,v,S,C,H){if(Array.isArray(v)){for(var J=0;J<v.length;J++)zt(c,v[J],S,C,H);return null}return S=qr(S),c&&c[je]?c.K(v,S,m(C)?!!C.capture:!1,H):Pt(c,v,S,!1,C,H)}function Pt(c,v,S,C,H,J){if(!v)throw Error("Invalid event type");var he=m(H)?!!H.capture:!!H,yt=dt(c);if(yt||(c[rt]=yt=new ie(c)),S=yt.add(v,S,C,he,J),S.proxy)return S;if(C=it(),S.proxy=C,C.src=c,C.listener=S,c.addEventListener)ve||(H=he),H===void 0&&(H=!1),c.addEventListener(v.toString(),C,H);else if(c.attachEvent)c.attachEvent(Vt(v.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function it(){function c(S){return v.call(c.src,c.listener,S)}const v=et;return c}function Zt(c,v,S,C,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)Zt(c,v[J],S,C,H);else C=m(C)?!!C.capture:!!C,S=qr(S),c&&c[je]?(c=c.i,v=String(v).toString(),v in c.g&&(J=c.g[v],S=ot(J,S,C,H),-1<S&&(St(J[S]),Array.prototype.splice.call(J,S,1),J.length==0&&(delete c.g[v],c.h--)))):c&&(c=dt(c))&&(v=c.g[v.toString()],c=-1,v&&(c=ot(v,S,C,H)),(S=-1<c?v[c]:null)&&pt(S))}function pt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[je])qe(v.i,c);else{var S=c.type,C=c.proxy;v.removeEventListener?v.removeEventListener(S,C,c.capture):v.detachEvent?v.detachEvent(Vt(S),C):v.addListener&&v.removeListener&&v.removeListener(C),(S=dt(v))?(qe(S,c),S.h==0&&(S.src=null,v[rt]=null)):St(c)}}}function Vt(c){return c in at?at[c]:at[c]="on"+c}function et(c,v){if(c.da)c=!0;else{v=new Re(v,this);var S=c.listener,C=c.ha||c.src;c.fa&&pt(c),c=S.call(C,v)}return c}function dt(c){return c=c[rt],c instanceof ie?c:null}var Hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function qr(c){return typeof c=="function"?c:(c[Hr]||(c[Hr]=function(v){return c.handleEvent(v)}),c[Hr])}function mt(){U.call(this),this.i=new ie(this),this.M=this,this.F=null}D(mt,U),mt.prototype[je]=!0,mt.prototype.removeEventListener=function(c,v,S,C){Zt(this,c,v,S,C)};function Tt(c,v){var S,C=c.F;if(C)for(S=[];C;C=C.F)S.push(C);if(c=c.M,C=v.type||v,typeof v=="string")v=new pe(v,c);else if(v instanceof pe)v.target=v.target||c;else{var H=v;v=new pe(C,c),V(v,H)}if(H=!0,S)for(var J=S.length-1;0<=J;J--){var he=v.g=S[J];H=Cr(he,C,!0,v)&&H}if(he=v.g=c,H=Cr(he,C,!0,v)&&H,H=Cr(he,C,!1,v)&&H,S)for(J=0;J<S.length;J++)he=v.g=S[J],H=Cr(he,C,!1,v)&&H}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var S=c.g[v],C=0;C<S.length;C++)St(S[C]);delete c.g[v],c.h--}}this.F=null},mt.prototype.K=function(c,v,S,C){return this.i.add(String(c),v,!1,S,C)},mt.prototype.L=function(c,v,S,C){return this.i.add(String(c),v,!0,S,C)};function Cr(c,v,S,C){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,J=0;J<v.length;++J){var he=v[J];if(he&&!he.da&&he.capture==S){var yt=he.listener,tn=he.ha||he.src;he.fa&&qe(c.i,he),H=yt.call(tn,C)!==!1&&H}}return H&&!C.defaultPrevented}function Kr(c,v,S){if(typeof c=="function")S&&(c=w(c,S));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(c,v||0)}function fr(c){c.g=Kr(()=>{c.g=null,c.i&&(c.i=!1,fr(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Bn extends U{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:fr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(c){U.call(this),this.h=c,this.g={}}D(Pr,U);var Ar=[];function zi(c){ne(c.g,function(v,S){this.g.hasOwnProperty(S)&&pt(v)},c),c.g={}}Pr.prototype.N=function(){Pr.aa.N.call(this),zi(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=h.JSON.stringify,Gr=h.JSON.parse,$i=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Bi(){}Bi.prototype.h=null;function Qr(c){return c.h||(c.h=c.i())}function Rr(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function En(){pe.call(this,"d")}D(En,pe);function mi(){pe.call(this,"c")}D(mi,pe);var Hn={},Ts=null;function Xr(){return Ts=Ts||new mt}Hn.La="serverreachability";function Is(c){pe.call(this,Hn.La,c)}D(Is,pe);function xr(c){const v=Xr();Tt(v,new Is(v))}Hn.STAT_EVENT="statevent";function on(c,v){pe.call(this,Hn.STAT_EVENT,c),this.stat=v}D(on,pe);function Ze(c){const v=Xr();Tt(v,new on(v,c))}Hn.Ma="timingevent";function Be(c,v){pe.call(this,Hn.Ma,c),this.size=v}D(Be,pe);function Sn(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},v)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function gi(c,v,S,C,H,J){c.info(function(){if(c.g)if(J)for(var he="",yt=J.split("&"),tn=0;tn<yt.length;tn++){var tt=yt[tn].split("=");if(1<tt.length){var an=tt[0];tt=tt[1];var qt=an.split("_");he=2<=qt.length&&qt[1]=="type"?he+(an+"="+tt+"&"):he+(an+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+v+`
`+S+`
`+he})}function qn(c,v,S,C,H,J,he){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+v+`
`+S+`
`+J+" "+he})}function Kn(c,v,S,C){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ra(c,S)+(C?" "+C:"")})}function Yr(c,v){c.info(function(){return"TIMEOUT: "+v})}Nt.prototype.info=function(){};function ra(c,v){if(!c.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(c=0;c<S.length;c++)if(Array.isArray(S[c])){var C=S[c];if(!(2>C.length)){var H=C[1];if(Array.isArray(H)&&!(1>H.length)){var J=H[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<H.length;he++)H[he]=""}}}}return Wn(S)}catch{return v}}var bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ia={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function Wi(){}D(Wi,Bi),Wi.prototype.g=function(){return new XMLHttpRequest},Wi.prototype.i=function(){return{}},Gn=new Wi;function Qn(c,v,S,C){this.j=c,this.i=v,this.l=S,this.R=C||1,this.U=new Pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yo}function yo(){this.i=null,this.g="",this.h=!1}var Hi={},qi={};function jn(c,v,S){c.L=1,c.v=_i(fn(v)),c.m=S,c.P=!0,_o(c,null)}function _o(c,v){c.F=Date.now(),We(c),c.A=fn(c.v);var S=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),As(S.i,"t",C),c.C=0,S=c.j.J,c.h=new yo,c.g=tc(c.j,S?v:null,!c.m),0<c.O&&(c.M=new Bn(w(c.Y,c,c.g),c.O)),v=c.U,S=c.g,C=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Ar[0]=H.toString()),H=Ar);for(var J=0;J<H.length;J++){var he=zt(S,H[J],C||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),xr(),gi(c.i,c.u,c.A,c.l,c.R,c.m)}Qn.prototype.ca=function(c){c=c.target;const v=this.M;v&&er(c)==3?v.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{const qt=er(this.g);var v=this.g.Ba();const Dr=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Cl(this.g)))){this.J||qt!=4||v==7||(v==8||0>=Dr?xr(3):xr(2)),Ki(this);var S=this.g.Z();this.X=S;t:if(sa(this)){var C=Cl(this.g);c="";var H=C.length,J=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),Jr(this);var he="";break t}this.h.i=new h.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,c+=this.h.i.decode(C[v],{stream:!(J&&v==H-1)});C.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=S==200,qn(this.i,this.u,this.A,this.l,this.R,qt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,tn=this.g;if((yt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(yt)){var tt=yt;break t}}tt=null}if(S=tt)Kn(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wo(this,S);else{this.o=!1,this.s=3,Ze(12),Xn(this),Jr(this);break e}}if(this.P){S=!0;let gr;for(;!this.J&&this.C<he.length;)if(gr=Sl(this,he),gr==qi){qt==4&&(this.s=4,Ze(14),S=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(gr==Hi){this.s=4,Ze(15),Kn(this.i,this.l,he,"[Invalid Chunk]"),S=!1;break}else Kn(this.i,this.l,gr,null),wo(this,gr);if(sa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||he.length!=0||this.h.h||(this.s=1,Ze(16),S=!1),this.o=this.o&&S,!S)Kn(this.i,this.l,he,"[Invalid Chunked Response]"),Xn(this),Jr(this);else if(0<he.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Al(an),an.M=!0,Ze(11))}}else Kn(this.i,this.l,he,null),wo(this,he);qt==4&&Xn(this),this.o&&!this.J&&(qt==4?ma(this.j,this):(this.o=!1,We(this)))}else ca(this.g),S==400&&0<he.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Xn(this),Jr(this)}}}catch{}finally{}};function sa(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sl(c,v){var S=c.C,C=v.indexOf(`
`,S);return C==-1?qi:(S=Number(v.substring(S,C)),isNaN(S)?Hi:(C+=1,C+S>v.length?qi:(v=v.slice(C,C+S),c.C=C+S,v)))}Qn.prototype.cancel=function(){this.J=!0,Xn(this)};function We(c){c.S=Date.now()+c.I,gt(c,c.I)}function gt(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Sn(w(c.ba,c),v)}function Ki(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Qn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Yr(this.i,this.A),this.L!=2&&(xr(),Ze(17)),Xn(this),this.s=2,Jr(this)):gt(this,this.S-c)};function Jr(c){c.j.G==0||c.J||ma(c.j,c)}function Xn(c){Ki(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,zi(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function wo(c,v){try{var S=c.j;if(S.G!=0&&(S.g==c||hn(S.h,c))){if(!c.K&&hn(S.h,c)&&S.G==3){try{var C=S.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<c.F)pa(S),ri(S);else break e;fa(S),Ze(18)}}else S.za=H[1],0<S.za-S.T&&37500>H[2]&&S.F&&S.v==0&&!S.C&&(S.C=Sn(w(S.Za,S),6e3));if(1>=oa(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else es(S,11)}else if((c.K||S.g==c)&&pa(S),!Q(v))for(H=S.Da.g.parse(v),v=0;v<H.length;v++){let tt=H[v];if(S.T=tt[0],tt=tt[1],S.G==2)if(tt[0]=="c"){S.K=tt[1],S.ia=tt[2];const an=tt[3];an!=null&&(S.la=an,S.j.info("VER="+S.la));const qt=tt[4];qt!=null&&(S.Aa=qt,S.j.info("SVER="+S.Aa));const Dr=tt[5];Dr!=null&&typeof Dr=="number"&&0<Dr&&(C=1.5*Dr,S.L=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const gr=c.g;if(gr){const Po=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var J=C.h;J.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(So(J,J.h),J.h=null))}if(C.D){const va=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(C.ya=va,vt(C.I,C.D,va))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-c.F,S.j.info("Handshake RTT: "+S.R+"ms")),C=S;var he=c;if(C.qa=ec(C,C.J?C.ia:null,C.W),he.K){To(C.h,he);var yt=he,tn=C.L;tn&&(yt.I=tn),yt.B&&(Ki(yt),We(yt)),C.g=he}else Co(C);0<S.i.length&&Si(S)}else tt[0]!="stop"&&tt[0]!="close"||es(S,7);else S.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?es(S,7):pn(S):tt[0]!="noop"&&S.l&&S.l.ta(tt),S.v=0)}}xr(4)}catch{}}var Eo=class{constructor(c,v){this.g=c,this.map=v}};function Gi(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ln(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function oa(c){return c.h?1:c.g?c.g.size:0}function hn(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function So(c,v){c.g?c.g.add(v):c.h=v}function To(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Gi.prototype.cancel=function(){if(this.i=aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function aa(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const S of c.g.values())v=v.concat(S.D);return v}return x(c.i)}function Cs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],S=c.length,C=0;C<S;C++)v.push(c[C]);return v}v=[],S=0;for(C in c)v[S++]=c[C];return v}function Ps(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var S=0;S<c;S++)v.push(S);return v}v=[],S=0;for(const C in c)v[S++]=C;return v}}}function vi(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var S=Ps(c),C=Cs(c),H=C.length,J=0;J<H;J++)v.call(void 0,C[J],S&&S[J],c)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tl(c,v){if(c){c=c.split("&");for(var S=0;S<c.length;S++){var C=c[S].indexOf("="),H=null;if(0<=C){var J=c[S].substring(0,C);H=c[S].substring(C+1)}else J=c[S];v(J,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Zr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Zr){this.h=c.h,Xi(this,c.j),this.o=c.o,this.g=c.g,ei(this,c.s),this.l=c.l;var v=c.i,S=new Nr;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),yi(this,S),this.m=c.m}else c&&(v=String(c).match(Qi))?(this.h=!1,Xi(this,v[1]||"",!0),this.o=Xe(v[2]||""),this.g=Xe(v[3]||"",!0),ei(this,v[4]),this.l=Xe(v[5]||"",!0),yi(this,v[6]||"",!0),this.m=Xe(v[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}Zr.prototype.toString=function(){var c=[],v=this.j;v&&c.push(I(v,ee,!0),":");var S=this.g;return(S||v=="file")&&(c.push("//"),(v=this.o)&&c.push(I(v,ee,!0),"@"),c.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&c.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&c.push("/"),c.push(I(S,S.charAt(0)=="/"?He:Ce,!0))),(S=this.i.toString())&&c.push("?",S),(S=this.m)&&c.push("#",I(S,pr)),c.join("")};function fn(c){return new Zr(c)}function Xi(c,v,S){c.j=S?Xe(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function ei(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function yi(c,v,S){v instanceof Nr?(c.i=v,wi(c.i,c.h)):(S||(v=I(v,kr)),c.i=new Nr(v,c.h))}function vt(c,v,S){c.i.set(v,S)}function _i(c){return vt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xe(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function I(c,v,S){return typeof c=="string"?(c=encodeURI(c).replace(v,X),S&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function X(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ee=/[#\/\?@]/g,Ce=/[#\?:]/g,He=/[#\?]/g,kr=/[#\?@]/g,pr=/#/g;function Nr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function en(c){c.g||(c.g=new Map,c.h=0,c.i&&Tl(c.i,function(v,S){c.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=Nr.prototype,n.add=function(c,v){en(this),this.i=null,c=Or(this,c);var S=this.g.get(c);return S||this.g.set(c,S=[]),S.push(v),this.h+=1,this};function Yn(c,v){en(c),v=Or(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Jn(c,v){return en(c),v=Or(c,v),c.g.has(v)}n.forEach=function(c,v){en(this),this.g.forEach(function(S,C){S.forEach(function(H){c.call(v,H,C,this)},this)},this)},n.na=function(){en(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let C=0;C<v.length;C++){const H=c[C];for(let J=0;J<H.length;J++)S.push(v[C])}return S},n.V=function(c){en(this);let v=[];if(typeof c=="string")Jn(this,c)&&(v=v.concat(this.g.get(Or(this,c))));else{c=Array.from(this.g.values());for(let S=0;S<c.length;S++)v=v.concat(c[S])}return v},n.set=function(c,v){return en(this),this.i=null,c=Or(this,c),Jn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},n.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function As(c,v,S){Yn(c,v),0<S.length&&(c.i=null,c.g.set(Or(c,v),x(S)),c.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var C=v[S];const J=encodeURIComponent(String(C)),he=this.V(C);for(C=0;C<he.length;C++){var H=J;he[C]!==""&&(H+="="+encodeURIComponent(String(he[C]))),c.push(H)}}return this.i=c.join("&")};function Or(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function wi(c,v){v&&!c.j&&(en(c),c.i=null,c.g.forEach(function(S,C){var H=C.toLowerCase();C!=H&&(Yn(this,C),As(this,H,S))},c)),c.j=v}function jh(c,v){const S=new Nt;if(h.Image){const C=new Image;C.onload=P(Zn,S,"TestLoadImage: loaded",!0,v,C),C.onerror=P(Zn,S,"TestLoadImage: error",!1,v,C),C.onabort=P(Zn,S,"TestLoadImage: abort",!1,v,C),C.ontimeout=P(Zn,S,"TestLoadImage: timeout",!1,v,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else v(!1)}function Gu(c,v){const S=new Nt,C=new AbortController,H=setTimeout(()=>{C.abort(),Zn(S,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:C.signal}).then(J=>{clearTimeout(H),J.ok?Zn(S,"TestPingServer: ok",!0,v):Zn(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Zn(S,"TestPingServer: error",!1,v)})}function Zn(c,v,S,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(S)}catch{}}function Lh(){this.g=new $i}function Qu(c,v,S){const C=S||"";try{vi(c,function(H,J){let he=H;m(H)&&(he=Wn(H)),v.push(C+J+"="+encodeURIComponent(he))})}catch(H){throw v.push(C+"type="+encodeURIComponent("_badmap")),H}}function Yi(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Yi,Bi),Yi.prototype.g=function(){return new Io(this.l,this.j)},Yi.prototype.i=(function(c){return function(){return c}})({});function Io(c,v){mt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Io,mt),n=Io.prototype,n.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,ni(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?ti(this):ni(this),this.readyState==3&&Xu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ti(this))},n.Qa=function(c){this.g&&(this.response=c,ti(this))},n.ga=function(){this.g&&ti(this)};function ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ni(c)}n.setRequestHeader=function(c,v){this.u.append(c,v)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,c.push(S[0]+": "+S[1]),S=v.next();return c.join(`\r
`)};function ni(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ji(c){let v="";return ne(c,function(S,C){v+=C,v+=":",v+=S,v+=`\r
`}),v}function Rs(c,v,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=Ji(S),typeof c=="string"?S!=null&&encodeURIComponent(String(S)):vt(c,v,S))}function At(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(At,mt);var Fh=/^https?$/i,Il=["POST","PUT"];n=At.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,v,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?Qr(this.o):Qr(Gn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(J){bo(this,J);return}if(c=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)S.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())S.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(J=>J.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Il,v,void 0))||C||H||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of S)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ua(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){bo(this,J)}};function bo(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,la(c),mr(c)}function la(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bl(this):this.bb())},n.bb=function(){bl(this)};function bl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||er(c)!=4||c.Z()!=2)){if(c.u&&er(c)==4)Kr(c.Ea,0,c);else if(Tt(c,"readystatechange"),er(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var C;if(C=he===0){var H=String(c.D).match(Qi)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),C=!Fh.test(H?H.toLowerCase():"")}S=C}if(S)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var J=2<er(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",la(c)}}finally{mr(c)}}}}function mr(c,v){if(c.g){ua(c);const S=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||Tt(c,"ready");try{S.onreadystatechange=C}catch{}}}function ua(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function er(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Gr(v)}};function Cl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(c){const v={};c=(c.g&&2<=er(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(Q(c[C]))continue;var S=j(c[C]);const H=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const J=v[H]||[];v[H]=J,J.push(S)}N(v,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(c,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[c]||v}function Pl(c){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,c),this.cb=Ei("retryDelaySeedMs",1e4,c),this.Wa=Ei("forwardChannelMaxRetries",2,c),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(c&&c.concurrentRequestLimit),this.Da=new Lh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pl.prototype,n.la=8,n.G=1,n.connect=function(c,v,S,C){Ze(0),this.W=c,this.H=v||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.I=ec(this,null,this.W),Si(this)};function pn(c){if(da(c),c.G==3){var v=c.U++,S=fn(c.I);if(vt(S,"SID",c.K),vt(S,"RID",v),vt(S,"TYPE","terminate"),Zi(c,S),v=new Qn(c,c.j,v),v.L=2,v.v=_i(fn(S)),S=!1,h.navigator&&h.navigator.sendBeacon)try{S=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&h.Image&&(new Image().src=v.v,S=!0),S||(v.g=tc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),We(v)}Zu(c)}function ri(c){c.g&&(Al(c),c.g.cancel(),c.g=null)}function da(c){ri(c),c.u&&(h.clearTimeout(c.u),c.u=null),pa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Si(c){if(!Ln(c.h)&&!c.s){c.s=!0;var v=c.Ga;Ve||de(),ae||(Ve(),ae=!0),_e.add(v,c),c.B=0}}function Uh(c,v){return oa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Sn(w(c.Ga,c,v),Ju(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new Qn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=A(J),V(J,this.S)):J=this.S),this.m!==null||this.O||(H.H=J,J=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=xs(this,H,v),S=fn(this.I),vt(S,"RID",c),vt(S,"CVER",22),this.D&&vt(S,"X-HTTP-Session-Id",this.D),Zi(this,S),J&&(this.O?v="headers="+encodeURIComponent(String(Ji(J)))+"&"+v:this.m&&Rs(S,this.m,J)),So(this.h,H),this.Ua&&vt(S,"TYPE","init"),this.P?(vt(S,"$req",v),vt(S,"SID","null"),H.T=!0,jn(H,S,null)):jn(H,S,v),this.G=2}}else this.G==3&&(c?ha(this,c):this.i.length==0||Ln(this.h)||ha(this))};function ha(c,v){var S;v?S=v.l:S=c.U++;const C=fn(c.I);vt(C,"SID",c.K),vt(C,"RID",S),vt(C,"AID",c.T),Zi(c,C),c.m&&c.o&&Rs(C,c.m,c.o),S=new Qn(c,c.j,S,c.B+1),c.m===null&&(S.H=c.o),v&&(c.i=v.D.concat(c.i)),v=xs(c,S,1e3),S.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),So(c.h,S),jn(S,C,v)}function Zi(c,v){c.H&&ne(c.H,function(S,C){vt(v,C,S)}),c.l&&vi({},function(S,C){vt(v,C,S)})}function xs(c,v,S){S=Math.min(c.i.length,S);var C=c.l?w(c.l.Na,c.l,c):null;e:{var H=c.i;let J=-1;for(;;){const he=["count="+S];J==-1?0<S?(J=H[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let yt=!0;for(let tn=0;tn<S;tn++){let tt=H[tn].g;const an=H[tn].map;if(tt-=J,0>tt)J=Math.max(0,H[tn].g-100),yt=!1;else try{Qu(an,he,"req"+tt+"_")}catch{C&&C(an)}}if(yt){C=he.join("&");break e}}}return c=c.i.splice(0,S),v.D=c,C}function Co(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Ve||de(),ae||(Ve(),ae=!0),_e.add(v,c),c.v=0}}function fa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Sn(w(c.Fa,c),Ju(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Sn(w(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),ri(this),Yu(this))};function Al(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Yu(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=fn(c.qa);vt(v,"RID","rpc"),vt(v,"SID",c.K),vt(v,"AID",c.T),vt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&vt(v,"TO",c.ja),vt(v,"TYPE","xmlhttp"),Zi(c,v),c.m&&c.o&&Rs(v,c.m,c.o),c.L&&(c.g.I=c.L);var S=c.g;c=c.ia,S.L=1,S.v=_i(fn(v)),S.m=null,S.P=!0,_o(S,c)}n.Za=function(){this.C!=null&&(this.C=null,ri(this),fa(this),Ze(19))};function pa(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ma(c,v){var S=null;if(c.g==v){pa(c),Al(c),c.g=null;var C=2}else if(hn(c.h,v))S=v.D,To(c.h,v),C=1;else return;if(c.G!=0){if(v.o)if(C==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var H=c.B;C=Xr(),Tt(C,new Be(C,S)),Si(c)}else Co(c);else if(H=v.s,H==3||H==0&&0<v.X||!(C==1&&Uh(c,v)||C==2&&fa(c)))switch(S&&0<S.length&&(v=c.h,v.i=v.i.concat(S)),H){case 1:es(c,5);break;case 4:es(c,10);break;case 3:es(c,6);break;default:es(c,2)}}}function Ju(c,v){let S=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(S*=2),S*v}function es(c,v){if(c.j.info("Error code "+v),v==2){var S=w(c.fb,c),C=c.Xa;const H=!C;C=new Zr(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xi(C,"https"),_i(C),H?jh(C.toString(),S):Gu(C.toString(),S)}else Ze(2);c.G=0,c.l&&c.l.sa(v),Zu(c),da(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Zu(c){if(c.G=0,c.ka=[],c.l){const v=aa(c.h);(v.length!=0||c.i.length!=0)&&(b(c.ka,v),b(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function ec(c,v,S){var C=S instanceof Zr?fn(S):new Zr(S);if(C.g!="")v&&(C.g=v+"."+C.g),ei(C,C.s);else{var H=h.location;C=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var J=new Zr(null);C&&Xi(J,C),v&&(J.g=v),H&&ei(J,H),S&&(J.l=S),C=J}return S=c.D,v=c.ya,S&&v&&vt(C,S,v),vt(C,"VER",c.la),Zi(c,C),C}function tc(c,v,S){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new At(new Yi({eb:S})):new At(c.pa),v.Ha(c.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rl(){}n=Rl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ga(){}ga.prototype.g=function(c,v){return new Fn(c,v)};function Fn(c,v){mt.call(this),this.g=new Pl(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!Q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ti(this)}D(Fn,mt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){pn(this.g)},Fn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var S={};S.__data__=c,c=S}else this.u&&(S={},S.__data__=Wn(c),c=S);v.i.push(new Eo(v.Ya++,c)),v.G==3&&Si(v)},Fn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,Fn.aa.N.call(this)};function nc(c){En.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const S in v){c=S;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}D(nc,En);function rc(){mi.call(this),this.status=1}D(rc,mi);function Ti(c){this.g=c}D(Ti,Rl),Ti.prototype.ua=function(){Tt(this.g,"a")},Ti.prototype.ta=function(c){Tt(this.g,new nc(c))},Ti.prototype.sa=function(c){Tt(this.g,new rc)},Ti.prototype.ra=function(){Tt(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,lS=function(){return new ga},aS=function(){return Xr()},oS=Hn,Xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,md=bs,ia.COMPLETE="complete",sS=ia,Rr.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,su=Rr,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,iS=At}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore",Y_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Mm("@firebase/firestore");function Ua(){return Ko.logLevel}function ye(n,...e){if(Ko.logLevel<=Ye.DEBUG){const t=e.map(Gm);Ko.debug(`Firestore (${pl}): ${n}`,...t)}}function ys(n,...e){if(Ko.logLevel<=Ye.ERROR){const t=e.map(Gm);Ko.error(`Firestore (${pl}): ${n}`,...t)}}function oo(n,...e){if(Ko.logLevel<=Ye.WARN){const t=e.map(Gm);Ko.warn(`Firestore (${pl}): ${n}`,...t)}}function Gm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uS(n,r,t)}function uS(n,e,t){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ys(r),new Error(r)}function ft(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||uS(e,s,r)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ix{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ox{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new hs,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new cS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class ax{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lx{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ax(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ux{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new J_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cx(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function Yp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ke(r,s);{const a=dS(),u=dx(a.encode(Z_(n,t)),a.encode(Z_(e,t)));return u!==0?u:Ke(r,s)}}t+=r>65535?2:1}return Ke(n.length,e.length)}function Z_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dx(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ke(n[t],e[t]);return Ke(n.length,e.length)}function el(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="__name__";class Ri{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ri.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Ke(e.length,t.length)}static compareSegments(e,t){const r=Ri.isNumericId(e),s=Ri.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ri.extractNumericId(e).compare(Ri.extractNumericId(t)):Yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class Et extends Ri{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const hx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Ri{construct(e,t,r){return new _n(e,t,r)}static isValidIdentifier(e){return hx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ew}static keyField(){return new _n([ew])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new me(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new me(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Et.fromString(e))}static fromName(e){return new Ae(Et.fromString(e).popFirst(5))}static empty(){return new Ae(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(n,e,t){if(!t)throw new me(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fx(n,e,t,r){if(e===!0&&r===!0)throw new me(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tw(n){if(!Ae.isDocumentKey(n))throw new me(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nw(n){if(Ae.isDocumentKey(n))throw new me(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dh(n);throw new me(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Fu(n,e){if(!fS(n))throw new me(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new me(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=-62135596800,iw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iw);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rw)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iw}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Yt("string",_t._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new _t(0,0))}static max(){return new ze(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function px(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new ao(s,Ae.empty(),e)}function mx(n){return new ao(n.readTime,n.key,Tu)}class ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ao(ze.min(),Ae.empty(),Tu)}static max(){return new ao(ze.max(),Ae.empty(),Tu)}}function gx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==vx)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,r)=>{t(e)}))}static reject(e){return new re(((t,r)=>{r(e)}))}static waitFor(e){return new re(((t,r)=>{let s=0,a=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next((s=>s?re.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new re(((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++h,h===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new re(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function _x(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}hh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=-1;function fh(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function wx(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="";function Ex(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sw(e)),e=Sx(n.get(t),e);return sw(e)}function Sx(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case pS:t+="";break;default:t+=a}}return t}function sw(n){return n+pS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zc(this.root,e,this.comparator,!0)}}class Zc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??vn.RED,this.left=s??vn.EMPTY,this.right=a??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new vn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return vn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aw(this.data.getIterator())}getIteratorFrom(e){return new aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new wr([])}unionWith(e){let t=new sn(_n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gS("Invalid base64 string: "+a):a}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const Tx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lo(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=Tx.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uo(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="server_timestamp",yS="__type__",_S="__previous_value__",wS="__local_write_time__";function Ym(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yS])===null||t===void 0?void 0:t.stringValue)===vS}function ph(n){const e=n.mapValue.fields[_S];return Ym(e)?ph(e):e}function Iu(n){const e=lo(n.mapValue.fields[wS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t,r,s,a,u,h,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Md="(default)";class bu{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="__type__",bx="__max__",ed={mapValue:{}},SS="__vector__",Vd="value";function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ym(n)?4:Px(n)?9007199254740991:Cx(n)?10:11:De(28295,{value:n})}function Ui(n,e){if(n===e)return!0;const t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Iu(n).isEqual(Iu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=lo(s.timestampValue),h=lo(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return uo(s.bytesValue).isEqual(uo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Wt(s.geoPointValue.latitude)===Wt(a.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Wt(s.integerValue)===Wt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Wt(s.doubleValue),h=Wt(a.doubleValue);return u===h?Dd(u)===Dd(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return el(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(ow(u)!==ow(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ui(u[f],h[f])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Cu(n,e){return(n.values||[]).find((t=>Ui(t,e)))!==void 0}function tl(n,e){if(n===e)return 0;const t=co(n),r=co(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=Wt(a.integerValue||a.doubleValue),f=Wt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return lw(n.timestampValue,e.timestampValue);case 4:return lw(Iu(n),Iu(e));case 5:return Yp(n.stringValue,e.stringValue);case 6:return(function(a,u){const h=uo(a),f=uo(u);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=Ke(h[m],f[m]);if(_!==0)return _}return Ke(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=Ke(Wt(a.latitude),Wt(u.latitude));return h!==0?h:Ke(Wt(a.longitude),Wt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return uw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,_;const E=a.fields||{},w=u.fields||{},P=(h=E[Vd])===null||h===void 0?void 0:h.arrayValue,D=(f=w[Vd])===null||f===void 0?void 0:f.arrayValue,x=Ke(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0);return x!==0?x:uw(P,D)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===ed.mapValue&&u===ed.mapValue)return 0;if(a===ed.mapValue)return 1;if(u===ed.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const w=Yp(f[E],_[E]);if(w!==0)return w;const P=tl(h[f[E]],m[_[E]]);if(P!==0)return P}return Ke(f.length,_.length)})(n.mapValue,e.mapValue);default:throw De(23264,{le:t})}}function lw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=lo(n),r=lo(e),s=Ke(t.seconds,r.seconds);return s!==0?s:Ke(t.nanos,r.nanos)}function uw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=tl(t[s],r[s]);if(a)return a}return Ke(t.length,r.length)}function nl(n){return Jp(n)}function Jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=lo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return uo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Jp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Jp(t.fields[u])}`;return s+"}"})(n.mapValue):De(61005,{value:n})}function gd(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return uo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+gd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return mo(r.fields,((a,u)=>{s+=a.length+gd(u)})),s})(n.mapValue);default:throw De(13486,{value:n})}}function cw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zp(n){return!!n&&"integerValue"in n}function Jm(n){return!!n&&"arrayValue"in n}function dw(n){return!!n&&"nullValue"in n}function hw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vd(n){return!!n&&"mapValue"in n}function Cx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ES])===null||t===void 0?void 0:t.stringValue)===SS}function fu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Px(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=_n.emptyPath(),r={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=fu(u):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){mo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new cr(fu(this.value))}}function TS(n){const e=[];return mo(n.fields,((t,r)=>{const s=new _n([t]);if(vd(r)){const a=TS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new xn(e,0,ze.min(),ze.min(),ze.min(),cr.empty(),0)}static newFoundDocument(e,t,r,s){return new xn(e,1,t,ze.min(),r,s,0)}static newNoDocument(e,t){return new xn(e,2,t,ze.min(),ze.min(),cr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,ze.min(),ze.min(),cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function fw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ae.comparator(Ae.fromName(u.referenceValue),t.key):r=tl(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function pw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ax(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{}class Xt extends IS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xx(e,t,r):t==="array-contains"?new Ox(e,r):t==="in"?new Dx(e,r):t==="not-in"?new Mx(e,r):t==="array-contains-any"?new Vx(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kx(e,r):new Nx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tl(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends IS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fi(e,t)}matches(e){return bS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function bS(n){return n.op==="and"}function CS(n){return Rx(n)&&bS(n)}function Rx(n){for(const e of n.filters)if(e instanceof fi)return!1;return!0}function em(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+nl(n.value);if(CS(n))return n.filters.map((e=>em(e))).join(",");{const e=n.filters.map((t=>em(t))).join(",");return`${n.op}(${e})`}}function PS(n,e){return n instanceof Xt?(function(r,s){return s instanceof Xt&&r.op===s.op&&r.field.isEqual(s.field)&&Ui(r.value,s.value)})(n,e):n instanceof fi?(function(r,s){return s instanceof fi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,h)=>a&&PS(u,s.filters[h])),!0):!1})(n,e):void De(19439)}function AS(n){return n instanceof Xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(n):n instanceof fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(AS).join(" ,")+"}"})(n):"Filter"}class xx extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class kx extends Xt{constructor(e,t){super(e,"in",t),this.keys=RS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Nx extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=RS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class Ox extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jm(t)&&Cu(t.arrayValue,this.value)}}class Dx extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class Mx extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class Vx extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Cu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.Pe=null}}function mw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new jx(n,e,t,r,s,a,u)}function Zm(n){const e=$e(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>em(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nl(r))).join(",")),e.Pe=t}return e.Pe}function eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ax(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pw(n.startAt,e.startAt)&&pw(n.endAt,e.endAt)}function tm(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Lx(n,e,t,r,s,a,u,h){return new Uu(n,e,t,r,s,a,u,h)}function tg(n){return new Uu(n)}function gw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xS(n){return n.collectionGroup!==null}function pu(n){const e=$e(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new sn(_n.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Ld(a,r))})),t.has(_n.keyField().canonicalString())||e.Te.push(new Ld(_n.keyField(),r))}return e.Te}function Di(n){const e=$e(n);return e.Ie||(e.Ie=Fx(e,pu(n))),e.Ie}function Fx(n,e){if(n.limitType==="F")return mw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Ld(s.field,a)}));const t=n.endAt?new jd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jd(n.startAt.position,n.startAt.inclusive):null;return mw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nm(n,e){const t=n.filters.concat([e]);return new Uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rm(n,e,t){return new Uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mh(n,e){return eg(Di(n),Di(e))&&n.limitType===e.limitType}function kS(n){return`${Zm(Di(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>AS(s))).join(", ")}]`),fh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>nl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>nl(s))).join(",")),`Target(${r})`})(Di(n))}; limitType=${n.limitType})`}function gh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of pu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,h,f){const m=fw(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,pu(r),s)||r.endAt&&!(function(u,h,f){const m=fw(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,pu(r),s))})(n,e)}function Ux(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NS(n){return(e,t)=>{let r=!1;for(const s of pu(n)){const a=zx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zx(n,e,t){const r=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?tl(f,m):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return mS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Mt(Ae.comparator);function _s(){return $x}const OS=new Mt(Ae.comparator);function ou(...n){let e=OS;for(const t of n)e=e.insert(t.key,t);return e}function DS(n){let e=OS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function $o(){return mu()}function MS(){return mu()}function mu(){return new Jo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Bx=new Mt(Ae.comparator),Wx=new sn(Ae.comparator);function Je(...n){let e=Wx;for(const t of n)e=e.add(t);return e}const Hx=new sn(Ke);function qx(){return Hx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function VS(n){return{integerValue:""+n}}function Kx(n,e){return wx(e)?VS(e):ng(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function Gx(n,e,t){return n instanceof Pu?(function(s,a){const u={fields:{[yS]:{stringValue:vS},[wS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Ym(a)&&(a=ph(a)),a&&(u.fields[_S]=a),{mapValue:u}})(t,e):n instanceof rl?LS(n,e):n instanceof il?FS(n,e):(function(s,a){const u=jS(s,a),h=vw(u)+vw(s.Ee);return Zp(u)&&Zp(s.Ee)?VS(h):ng(s.serializer,h)})(n,e)}function Qx(n,e,t){return n instanceof rl?LS(n,e):n instanceof il?FS(n,e):t}function jS(n,e){return n instanceof Fd?(function(r){return Zp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Pu extends vh{}class rl extends vh{constructor(e){super(),this.elements=e}}function LS(n,e){const t=US(e);for(const r of n.elements)t.some((s=>Ui(s,r)))||t.push(r);return{arrayValue:{values:t}}}class il extends vh{constructor(e){super(),this.elements=e}}function FS(n,e){let t=US(e);for(const r of n.elements)t=t.filter((s=>!Ui(s,r)));return{arrayValue:{values:t}}}class Fd extends vh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function vw(n){return Wt(n.integerValue||n.doubleValue)}function US(n){return Jm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.field=e,this.transform=t}}function Xx(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof rl&&s instanceof rl||r instanceof il&&s instanceof il?el(r.elements,s.elements,Ui):r instanceof Fd&&s instanceof Fd?Ui(r.Ee,s.Ee):r instanceof Pu&&s instanceof Pu})(n.transform,e.transform)}class Yx{constructor(e,t){this.version=e,this.transformResults=t}}class Wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yh{}function zS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ig(n.key,Wr.none()):new zu(n.key,n.data,Wr.none());{const t=n.data,r=cr.empty();let s=new sn(_n.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new go(n.key,r,new wr(s.toArray()),Wr.none())}}function Jx(n,e,t){n instanceof zu?(function(s,a,u){const h=s.value.clone(),f=_w(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof go?(function(s,a,u){if(!yd(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=_w(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll($S(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gu(n,e,t,r){return n instanceof zu?(function(a,u,h,f){if(!yd(a.precondition,u))return h;const m=a.value.clone(),_=ww(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof go?(function(a,u,h,f){if(!yd(a.precondition,u))return h;const m=ww(a.fieldTransforms,f,u),_=u.data;return _.setAll($S(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,u,h){return yd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function Zx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=jS(r.transform,s||null);a!=null&&(t===null&&(t=cr.empty()),t.set(r.field,a))}return t||null}function yw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&el(r,s,((a,u)=>Xx(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zu extends yh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class go extends yh{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $S(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function _w(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,Qx(u,h,t[s]))}return r}function ww(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Gx(a,u,e))}return r}class ig extends yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ek extends yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Jx(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MS();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=zS(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,((t,r)=>yw(t,r)))&&el(this.baseMutations,e.baseMutations,((t,r)=>yw(t,r)))}}class sg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return Bx})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new sg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,nt;function ik(n){switch(n){case te.OK:return De(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function BS(n){if(n===void 0)return ys("GRPC error has no .code"),te.UNKNOWN;switch(n){case Gt.OK:return te.OK;case Gt.CANCELLED:return te.CANCELLED;case Gt.UNKNOWN:return te.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return te.INTERNAL;case Gt.UNAVAILABLE:return te.UNAVAILABLE;case Gt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Gt.NOT_FOUND:return te.NOT_FOUND;case Gt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Gt.ABORTED:return te.ABORTED;case Gt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Gt.DATA_LOSS:return te.DATA_LOSS;default:return De(39323,{code:n})}}(nt=Gt||(Gt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new ro([4294967295,4294967295],0);function Ew(n){const e=dS().encode(n),t=new rS;return t.update(e),new Uint8Array(t.digest())}function Sw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ro([t,r],0),new ro([s,a],0)]}class og{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(r<0)throw new au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ro.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(ro.fromNumber(r)));return s.compare(sk)===1&&(s=new ro([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ew(e),[r,s]=Sw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new og(a,s,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.fe===0)return;const t=Ew(e),[r,s]=Sw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _h(ze.min(),s,new Mt(Ke),_s(),Je())}}class $u{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $u(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class WS{constructor(e,t){this.targetId=e,this.De=t}}class HS{constructor(e,t,r=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Tw{constructor(){this.ve=0,this.Ce=Iw(),this.Fe=wn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Je(),t=Je(),r=Je();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:De(38017,{changeType:a})}})),new $u(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Iw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ok{constructor(e){this.We=e,this.Ge=new Map,this.ze=_s(),this.je=td(),this.Je=td(),this.He=new Mt(Ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(tm(a))if(r===0){const u=new Ae(a.path);this.Xe(t,u,xn.newNoDocument(u,ze.min()))}else ft(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const h=this._t(e),f=h?this.ut(h,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=uo(r).toUint8Array()}catch(f){if(f instanceof gS)return oo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new og(u,s,a)}catch(f){return oo(f instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const h=this.st(u);if(h){if(a.current&&tm(h.target)){const f=new Ae(h.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,xn.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Je();this.Je.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new _h(e,t,this.He,this.ze,r);return this.ze=_s(),this.je=td(),this.Je=td(),this.He=new Mt(Ke),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Tw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new sn(Ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new sn(Ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Tw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function td(){return new Mt(Ae.comparator)}function Iw(){return new Mt(Ae.comparator)}const ak={asc:"ASCENDING",desc:"DESCENDING"},lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uk={and:"AND",or:"OR"};class ck{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function im(n,e){return n.useProto3Json||fh(e)?e:{value:e}}function Ud(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dk(n,e){return Ud(n,e.toTimestamp())}function Mi(n){return ft(!!n,49232),ze.fromTimestamp((function(t){const r=lo(t);return new _t(r.seconds,r.nanos)})(n))}function ag(n,e){return sm(n,e).canonicalString()}function sm(n,e){const t=(function(s){return new Et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function KS(n){const e=Et.fromString(n);return ft(JS(e),10190,{key:e.toString()}),e}function om(n,e){return ag(n.databaseId,e.path)}function wp(n,e){const t=KS(e);if(t.get(1)!==n.databaseId.projectId)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(QS(t))}function GS(n,e){return ag(n.databaseId,e)}function hk(n){const e=KS(n);return e.length===4?Et.emptyPath():QS(e)}function am(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QS(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bw(n,e,t){return{name:om(n,e),fields:t.value.mapValue.fields}}function fk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:De(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(ft(_===void 0||typeof _=="string",58123),wn.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),wn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const _=m.code===void 0?te.UNKNOWN:BS(m.code);return new me(_,m.message||"")})(u);t=new HS(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wp(n,r.document.name),a=Mi(r.document.updateTime),u=r.document.createTime?Mi(r.document.createTime):ze.min(),h=new cr({mapValue:{fields:r.document.fields}}),f=xn.newFoundDocument(s,a,u,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new _d(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wp(n,r.document),a=r.readTime?Mi(r.readTime):ze.min(),u=xn.newNoDocument(s,a),h=r.removedTargetIds||[];t=new _d([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wp(n,r.document),a=r.removedTargetIds||[];t=new _d([],a,s,null)}else{if(!("filter"in e))return De(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new rk(s,a),h=r.targetId;t=new WS(h,u)}}return t}function pk(n,e){let t;if(e instanceof zu)t={update:bw(n,e.key,e.value)};else if(e instanceof ig)t={delete:om(n,e.key)};else if(e instanceof go)t={update:bw(n,e.key,e.data),updateMask:Tk(e.fieldMask)};else{if(!(e instanceof ek))return De(16599,{Rt:e.type});t={verify:om(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof Pu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof rl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof il)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Fd)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw De(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:dk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De(27497)})(n,e.precondition)),t}function mk(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Mi(s.updateTime):Mi(a);return u.isEqual(ze.min())&&(u=Mi(a)),new Yx(u,s.transformResults||[])})(t,e)))):[]}function gk(n,e){return{documents:[GS(n,e.path)]}}function vk(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=GS(n,s);const a=(function(m){if(m.length!==0)return YS(fi.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(w){return{field:$a(w.field),direction:wk(w.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=im(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function yk(n){let e=hk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ft(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const w=XS(E);return w instanceof fi&&CS(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((w=>(function(D){return new Ld(Ba(D.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(w)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let w;return w=typeof E=="object"?E.value:E,fh(w)?null:w})(t.limit));let f=null;t.startAt&&(f=(function(E){const w=!!E.before,P=E.values||[];return new jd(P,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const w=!E.before,P=E.values||[];return new jd(P,w)})(t.endAt)),Lx(e,s,u,a,h,"F",f,m)}function _k(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ba(t.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ba(t.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ba(t.unaryFilter.field);return Xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ba(t.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xt.create(Ba(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fi.create(t.compositeFilter.filters.map((r=>XS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function wk(n){return ak[n]}function Ek(n){return lk[n]}function Sk(n){return uk[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ba(n){return _n.fromServerFormat(n.fieldPath)}function YS(n){return n instanceof Xt?(function(t){if(t.op==="=="){if(hw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(dw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(dw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:Ek(t.op),value:t.value}}})(n):n instanceof fi?(function(t){const r=t.getFilters().map((s=>YS(s)));return r.length===1?r[0]:{compositeFilter:{op:Sk(t.op),filters:r}}})(n):De(54877,{filter:n})}function Tk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,r,s,a=ze.min(),u=ze.min(),h=wn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.gt=e}}function bk(n){const e=yk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.Dn=new Pk}addToCollectionParentIndex(e,t){return this.Dn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ao.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Pk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new sn(Et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZS=41943040;class lr{static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(ZS,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new sl(0)}static ur(){return new sl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="LruGarbageCollector",Ak=1048576;function Aw([n,e],[t,r]){const s=Ke(n,t);return s===0?Ke(e,r):s}class Rk{constructor(e){this.Tr=e,this.buffer=new sn(Aw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Aw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ye(Pw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?ye(Pw,"Ignoring IndexedDB error during garbage collection: ",t):await ml(t)}await this.Rr(3e5)}))}}class kk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(hh.ue);const r=new Rk(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Cw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(r=E,h=Date.now(),this.removeTargets(e,r,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(m=Date.now(),Ua()<=Ye.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function Nk(n,e){return new kk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.changes=new Jo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&gu(r.mutation,s,wr.empty(),_t.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const s=$o();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=ou();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=$o();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,s){let a=_s();const u=mu(),h=(function(){return mu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof go)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),gu(_.mutation,m,_.mutation.getFieldMask(),_t.now())):u.set(m.key,wr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var E;return h.set(m,new Dk(_,(E=u.get(m))!==null&&E!==void 0?E:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=mu();let s=new Mt(((u,h)=>u-h)),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||wr.empty();_=h.applyToLocalView(m,_),r.set(f,_);const E=(s.get(h.batchId)||Je()).add(f);s=s.insert(h.batchId,E)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,E=MS();_.forEach((w=>{if(!a.has(w)){const P=zS(t.get(w),r.get(w));P!==null&&E.set(w,P),a=a.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return re.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):re.resolve($o());let h=Tu,f=a;return u.next((m=>re.forEach(m,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{f=f.insert(_,w)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Je()))).next((_=>({batchId:h,changes:DS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((r=>{let s=ou();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=ou();return this.indexManager.getCollectionParents(e,a).next((h=>re.forEach(h,(f=>{const m=(function(E,w){return new Uu(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((E,w)=>{u=u.insert(E,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,xn.newInvalidDocument(_)))}));let h=ou();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&gu(_.mutation,m,wr.empty(),_t.now()),gh(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return re.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Mi(s.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:bk(s.bundledQuery),readTime:Mi(s.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.overlays=new Mt(Ae.comparator),this.kr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$o();return re.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=$o(),a=t.length+1,u=new Ae(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Mt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=$o(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=$o(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>h.set(m,_))),!(h.size()>=s)););return re.resolve(h)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new nk(t,r));let a=this.kr.get(t);a===void 0&&(a=Je(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.qr=new sn(dn.Qr),this.$r=new sn(dn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new dn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new dn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ae(new Et([])),r=new dn(t,e),s=new dn(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ae(new Et([])),r=new dn(t,e),s=new dn(t,e+1);let a=Je();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new dn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ae.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new sn(dn.Qr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new tk(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Yr=this.Yr.add(new dn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Xm:this.er-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new dn(t,0),s=new dn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const h=this.Zr(u.Hr);a.push(h)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(Ke);return t.forEach((s=>{const a=new dn(s,0),u=new dn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(h=>{r=r.add(h.Hr)}))})),re.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ae.isDocumentKey(a)||(a=a.child(""));const u=new dn(new Ae(a),0);let h=new sn(Ke);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.Hr)),!0)}),u),re.resolve(this.ei(h))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return re.forEach(t.mutations,(s=>{const a=new dn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new dn(t,0),s=this.Yr.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.ni=e,this.docs=(function(){return new Mt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():xn.newInvalidDocument(s))})),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=_s();const u=t.path,h=new Ae(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||gx(mx(_),r)<=0||(s.has(_.key)||gh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,r,s){De(9500)}ri(e,t){return re.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new zk(this)}getSize(e){return re.resolve(this.size)}}class zk extends Ok{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),re.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.persistence=e,this.ii=new Jo((t=>Zm(t)),eg),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new lg,this.targetCount=0,this._i=sl.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),re.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new sl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.hr(t),re.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),re.waitFor(a).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.ai={},this.overlays={},this.ui=new hh(0),this.ci=!1,this.ci=!0,this.li=new Lk,this.referenceDelegate=e(this),this.hi=new $k(this),this.indexManager=new Ck,this.remoteDocumentCache=(function(s){return new Uk(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Ik(t),this.Ti=new Vk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Fk(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const s=new Bk(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return re.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class Bk extends yx{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ai=new lg,this.Ri=null}static Vi(e){return new ug(e)}get mi(){if(this.Ri)return this.Ri;throw De(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.mi,(r=>{const s=Ae.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,ze.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return re.or([()=>re.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class zd{constructor(e,t){this.persistence=e,this.gi=new Jo((r=>Ex(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Nk(this,t)}static Vi(e,t){return new zd(e,t)}Ii(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return re.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?re.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((h=>{h||(r++,a.removeEntry(u,ze.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}Sr(e,t,r){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Je(),s=Je();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new cg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return U1()?8:_x(Nn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Wk;return this.ws(e,t,u).next((h=>{if(a.result=h,this.Rs)return this.Ss(e,t,u,h.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ua()<=Ye.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Ua()<=Ye.DEBUG&&ye("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ua()<=Ye.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):re.resolve())}ps(e,t){if(gw(t))return re.resolve(null);let r=Di(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=rm(t,null,"F"),r=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Je(...a);return this.gs.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,h);return this.Ds(t,m,u,f.readTime)?this.ps(e,rm(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return gw(t)||s.isEqual(ze.min())?re.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?re.resolve(null):(Ua()<=Ye.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),za(t)),this.vs(e,u,t,px(s,Tu)).next((h=>h)))}))}bs(e,t){let r=new sn(NS(e));return t.forEach(((s,a)=>{gh(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ua()<=Ye.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",za(t)),this.gs.getDocumentsMatchingQuery(e,t,ao.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",qk=3e8;class Kk{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Mt(Ke),this.Ms=new Jo((a=>Zm(a)),eg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Gk(n,e,t,r){return new Kk(n,e,t,r)}async function tT(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Je();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function Qk(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,_){const E=m.batch,w=E.keys();let P=re.resolve();return w.forEach((D=>{P=P.next((()=>_.getEntry(f,D))).next((x=>{const b=m.docVersions.get(D);ft(b!==null,48541),x.version.compareTo(b)<0&&(E.applyToRemoteDocument(x,m),x.isValidDocument()&&(x.setReadTime(m.commitVersion),_.addEntry(x)))}))})),P.next((()=>h.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Je();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function nT(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Xk(n,e){const t=$e(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const h=[];e.targetChanges.forEach(((_,E)=>{const w=s.get(E);if(!w)return;h.push(t.hi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,E))));let P=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(wn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),s=s.insert(E,P),(function(x,b,z){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=qk?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(w,P,_)&&h.push(t.hi.updateTargetData(a,P))}));let f=_s(),m=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(Yk(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!r.isEqual(ze.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((E=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return re.waitFor(h).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function Yk(n,e,t){let r=Je(),s=Je();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=_s();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ye(dg,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Jk(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Zk(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,re.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new Zs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function lm(n,e,t){const r=$e(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!gl(u))throw u;ye(dg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Rw(n,e,t){const r=$e(n);let s=ze.min(),a=Je();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const E=$e(f),w=E.Ms.get(_);return w!==void 0?re.resolve(E.Fs.get(w)):E.hi.getTargetData(m,_)})(r,u,Di(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:ze.min(),t?a:Je()))).next((h=>(eN(r,Ux(e),h),{documents:h,qs:a})))))}function eN(n,e,t){let r=n.xs.get(e)||ze.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class xw{constructor(){this.activeTargetIds=qx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tN{constructor(){this.Fo=new xw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="ConnectivityMonitor";class Nw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ye(kw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ye(kw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function um(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",rN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Md?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=um(),h=this.Go(e,t.toUriEncodedString());ye(Ep,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(h),_=Es(m);return this.jo(e,h,f,r,_).then((E=>(ye(Ep,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw oo(Ep,`RPC '${e}' ${u} failed with error: `,E,"url: ",h,"request:",r),E}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=rN[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class oN extends iN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=um();return new Promise(((h,f)=>{const m=new iS;m.setWithCredentials(!0),m.listenOnce(sS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case md.NO_ERROR:const E=m.getResponseJson();ye(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case md.TIMEOUT:ye(Pn,`RPC '${e}' ${u} timed out`),f(new me(te.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const w=m.getStatus();if(ye(Pn,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const D=P==null?void 0:P.error;if(D&&D.status&&D.message){const x=(function(z){const Q=z.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Q)>=0?Q:te.UNKNOWN})(D.status);f(new me(x,D.message))}else f(new me(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new me(te.UNAVAILABLE,"Connection failed."));break;default:De(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ye(Pn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ye(Pn,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const s=um(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lS(),h=aS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ye(Pn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const E=u.createWebChannel(_,f);this.T_(E);let w=!1,P=!1;const D=new sN({Ho:b=>{P?ye(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(w||(ye(Pn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),w=!0),ye(Pn,`RPC '${e}' stream ${s} sending:`,b),E.send(b))},Yo:()=>E.close()}),x=(b,z,Q)=>{b.listen(z,(K=>{try{Q(K)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return x(E,su.EventType.OPEN,(()=>{P||(ye(Pn,`RPC '${e}' stream ${s} transport opened.`),D.s_())})),x(E,su.EventType.CLOSE,(()=>{P||(P=!0,ye(Pn,`RPC '${e}' stream ${s} transport closed`),D.__(),this.I_(E))})),x(E,su.EventType.ERROR,(b=>{P||(P=!0,oo(Pn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),D.__(new me(te.UNAVAILABLE,"The operation could not be completed")))})),x(E,su.EventType.MESSAGE,(b=>{var z;if(!P){const Q=b.data[0];ft(!!Q,16349);const K=Q,Z=(K==null?void 0:K.error)||((z=K[0])===null||z===void 0?void 0:z.error);if(Z){ye(Pn,`RPC '${e}' stream ${s} received error:`,Z);const W=Z.status;let ne=(function(R){const V=Gt[R];if(V!==void 0)return BS(V)})(W),N=Z.message;ne===void 0&&(ne=te.INTERNAL,N="Unknown error status: "+W+" with message "+Z.message),P=!0,D.__(new me(ne,N)),E.close()}else ye(Pn,`RPC '${e}' stream ${s} received:`,Q),D.a_(Q)}})),x(h,oS.STAT_EVENT,(b=>{b.stat===Xp.PROXY?ye(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Xp.NOPROXY&&ye(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){return new ck(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="PersistentStream";class iT{constructor(e,t,r,s,a,u,h,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new rT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new me(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ye(Ow,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ye(Ow,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aN extends iT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=fk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ze.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ze.min():u.readTime?Mi(u.readTime):ze.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=am(this.serializer),t.addTarget=(function(a,u){let h;const f=u.target;if(h=tm(f)?{documents:gk(a,f)}:{query:vk(a,f).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=qS(a,u.resumeToken);const m=im(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(ze.min())>0){h.readTime=Ud(a,u.snapshotVersion.toTimestamp());const m=im(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=_k(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=am(this.serializer),t.removeTarget=e,this.k_(t)}}class lN extends iT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=mk(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=am(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>pk(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{}class cN extends uN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,sm(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(te.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Jo(e,sm(t,r),s,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(te.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class dN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ys(t),this._a=!1):ye("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class hN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Zo(this)&&(ye(Go,"Restarting streams for network reachability change."),await(async function(f){const m=$e(f);m.Ia.add(4),await Bu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Eh(m)})(this))}))})),this.Aa=new dN(r,s)}}async function Eh(n){if(Zo(n))for(const e of n.da)await e(!0)}async function Bu(n){for(const e of n.da)await e(!1)}function sT(n,e){const t=$e(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),mg(t)?pg(t):vl(t).x_()&&fg(t,e))}function hg(n,e){const t=$e(n),r=vl(t);t.Ta.delete(e),r.x_()&&oT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Zo(t)&&t.Aa.set("Unknown"))}function fg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(n).H_(e)}function oT(n,e){n.Ra.$e(e),vl(n).Y_(e)}function pg(n){n.Ra=new ok({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.Aa.aa()}function mg(n){return Zo(n)&&!vl(n).M_()&&n.Ta.size>0}function Zo(n){return $e(n).Ia.size===0}function aT(n){n.Ra=void 0}async function fN(n){n.Aa.set("Online")}async function pN(n){n.Ta.forEach(((e,t)=>{fg(n,e)}))}async function mN(n,e){aT(n),mg(n)?(n.Aa.la(e),pg(n)):n.Aa.set("Unknown")}async function gN(n,e,t){if(n.Aa.set("Online"),e instanceof HS&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const h of a.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ta.delete(h),s.Ra.removeTarget(h))})(n,e)}catch(r){ye(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $d(n,r)}else if(e instanceof _d?n.Ra.Ye(e):e instanceof WS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ze.min()))try{const r=await nT(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const h=a.Ra.Pt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(wn.EMPTY_BYTE_STRING,_.snapshotVersion)),oT(a,f);const E=new Zs(_.target,f,m,_.sequenceNumber);fg(a,E)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ye(Go,"Failed to raise snapshot:",r),await $d(n,r)}}async function $d(n,e,t){if(!gl(e))throw e;n.Ia.add(1),await Bu(n),n.Aa.set("Offline"),t||(t=()=>nT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Go,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Eh(n)}))}function lT(n,e){return e().catch((t=>$d(n,t,e)))}async function Sh(n){const e=$e(n),t=ho(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Xm;for(;vN(e);)try{const s=await Jk(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,yN(e,s)}catch(s){await $d(e,s)}uT(e)&&cT(e)}function vN(n){return Zo(n)&&n.Pa.length<10}function yN(n,e){n.Pa.push(e);const t=ho(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uT(n){return Zo(n)&&!ho(n).M_()&&n.Pa.length>0}function cT(n){ho(n).start()}async function _N(n){ho(n).na()}async function wN(n){const e=ho(n);for(const t of n.Pa)e.X_(t.mutations)}async function EN(n,e,t){const r=n.Pa.shift(),s=sg.from(r,e,t);await lT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Sh(n)}async function SN(n,e){e&&ho(n).Z_&&await(async function(r,s){if((function(u){return ik(u)&&u!==te.ABORTED})(s.code)){const a=r.Pa.shift();ho(r).N_(),await lT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Sh(r)}})(n,e),uT(n)&&cT(n)}async function Dw(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),ye(Go,"RemoteStore received new credentials");const r=Zo(t);t.Ia.add(3),await Bu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Eh(t)}async function TN(n,e){const t=$e(n);e?(t.Ia.delete(2),await Eh(t)):e||(t.Ia.add(2),await Bu(t),t.Aa.set("Unknown"))}function vl(n){return n.Va||(n.Va=(function(t,r,s){const a=$e(t);return a.ia(),new aN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:fN.bind(null,n),e_:pN.bind(null,n),n_:mN.bind(null,n),J_:gN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),mg(n)?pg(n):n.Aa.set("Unknown")):(await n.Va.stop(),aT(n))}))),n.Va}function ho(n){return n.ma||(n.ma=(function(t,r,s){const a=$e(t);return a.ia(),new lN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:_N.bind(null,n),n_:SN.bind(null,n),ea:wN.bind(null,n),ta:EN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Sh(n)):(await n.ma.stop(),n.Pa.length>0&&(ye(Go,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new gg(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(n,e){if(ys("AsyncQueue",`${e}: ${n}`),gl(n))return new me(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=ou(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.fa=new Mt(Ae.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):De(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ol{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new ol(e,t,Qa.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class bN{constructor(){this.queries=Vw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=$e(t),a=s.queries;s.queries=Vw(),a.forEach(((u,h)=>{for(const f of h.wa)f.onError(r)}))})(this,new me(te.ABORTED,"Firestore shutting down"))}}function Vw(){return new Jo((n=>kS(n)),mh)}async function dT(n,e){const t=$e(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new IN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=vg(u,`Initialization of query '${za(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&yg(t)}async function hT(n,e){const t=$e(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CN(n,e){const t=$e(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.wa)h.Ca(s)&&(r=!0);u.ya=s}}r&&yg(t)}function PN(n,e,t){const r=$e(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function yg(n){n.Da.forEach((e=>{e.next()}))}var cm,jw;(jw=cm||(cm={})).Fa="default",jw.Cache="cache";class fT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class AN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Je(),this.mutatedKeys=Je(),this.Xa=NS(e),this.eu=new Qa(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Mw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const w=s.get(_),P=gh(this.query,E)?E:null,D=!!w&&this.mutatedKeys.has(w.key),x=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let b=!1;w&&P?w.data.isEqual(P.data)?D!==x&&(r.track({type:3,doc:P}),b=!0):this.iu(w,P)||(r.track({type:2,doc:P}),b=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(h=!0)):!w&&P?(r.track({type:0,doc:P}),b=!0):w&&!P&&(r.track({type:1,doc:w}),b=!0,(f||m)&&(h=!0)),b&&(P?(u=u.add(P),a=x?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:h,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,E)=>(function(P,D){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{At:b})}};return x(P)-x(D)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(r),s=s!=null&&s;const h=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ol(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Mw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Je(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new mT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new pT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Je();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ol.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _g="SyncEngine";class RN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xN{constructor(e){this.key=e,this.lu=!1}}class kN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Jo((h=>kS(h)),mh),this.Tu=new Map,this.Iu=new Set,this.du=new Mt(Ae.comparator),this.Eu=new Map,this.Au=new lg,this.Ru={},this.Vu=new Map,this.mu=sl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function NN(n,e,t=!0){const r=ET(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await gT(r,e,t,!0),s}async function ON(n,e){const t=ET(n);await gT(t,e,!0,!1)}async function gT(n,e,t,r){const s=await Zk(n.localStore,Di(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await DN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&sT(n.remoteStore,s),h}async function DN(n,e,t,r,s){n.gu=(E,w,P)=>(async function(x,b,z,Q){let K=b.view.nu(z);K.Ds&&(K=await Rw(x.localStore,b.query,!1).then((({documents:N})=>b.view.nu(N,K))));const Z=Q&&Q.targetChanges.get(b.targetId),W=Q&&Q.targetMismatches.get(b.targetId)!=null,ne=b.view.applyChanges(K,x.isPrimaryClient,Z,W);return Fw(x,b.targetId,ne._u),ne.snapshot})(n,E,w,P);const a=await Rw(n.localStore,e,!0),u=new AN(e,a.qs),h=u.nu(a.documents),f=$u.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);Fw(n,t,m._u);const _=new RN(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function MN(n,e,t){const r=$e(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!mh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&hg(r.remoteStore,s.targetId),dm(r,s.targetId)})).catch(ml)):(dm(r,s.targetId),await lm(r.localStore,s.targetId,!0))}async function VN(n,e){const t=$e(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hg(t.remoteStore,r.targetId))}async function jN(n,e,t){const r=WN(n);try{const s=await(function(u,h){const f=$e(u),m=_t.now(),_=h.reduce(((P,D)=>P.add(D.key)),Je());let E,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let D=_s(),x=Je();return f.Os.getEntries(P,_).next((b=>{D=b,D.forEach(((z,Q)=>{Q.isValidDocument()||(x=x.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,D))).next((b=>{E=b;const z=[];for(const Q of h){const K=Zx(Q,E.get(Q.key).overlayedDocument);K!=null&&z.push(new go(Q.key,K,TS(K.value.mapValue),Wr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,z,h)})).next((b=>{w=b;const z=b.applyToLocalDocumentSet(E,x);return f.documentOverlayCache.saveOverlays(P,b.batchId,z)}))})).then((()=>({batchId:w.batchId,changes:DS(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,h,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new Mt(Ke)),m=m.insert(h,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await Wu(r,s.changes),await Sh(r.remoteStore)}catch(s){const a=vg(s,"Failed to persist write");t.reject(a)}}async function vT(n,e){const t=$e(n);try{const r=await Xk(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ft(u.lu,14607):s.removedDocuments.size>0&&(ft(u.lu,42227),u.lu=!1))})),await Wu(t,r,e)}catch(r){await ml(r)}}function Lw(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const h=u.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const f=$e(u);f.onlineState=h;let m=!1;f.queries.forEach(((_,E)=>{for(const w of E.wa)w.va(h)&&(m=!0)})),m&&yg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LN(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new Mt(Ae.comparator);u=u.insert(a,xn.newNoDocument(a,ze.min()));const h=Je().add(a),f=new _h(ze.min(),new Map,new Mt(Ke),u,h);await vT(r,f),r.du=r.du.remove(a),r.Eu.delete(e),wg(r)}else await lm(r.localStore,e,!1).then((()=>dm(r,e,t))).catch(ml)}async function FN(n,e){const t=$e(n),r=e.batch.batchId;try{const s=await Qk(t.localStore,e);_T(t,r,null),yT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Wu(t,s)}catch(s){await ml(s)}}async function UN(n,e,t){const r=$e(n);try{const s=await(function(u,h){const f=$e(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next((E=>(ft(E!==null,37113),_=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);_T(r,e,t),yT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Wu(r,s)}catch(s){await ml(s)}}function yT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function _T(n,e,t){const r=$e(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function dm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||wT(n,r)}))}function wT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(hg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),wg(n))}function Fw(n,e,t){for(const r of t)r instanceof pT?(n.Au.addReference(r.key,e),zN(n,r)):r instanceof mT?(ye(_g,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||wT(n,r.key)):De(19791,{yu:r})}function zN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ye(_g,"New document in limbo: "+t),n.Iu.add(r),wg(n))}function wg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ae(Et.fromString(e)),r=n.mu.next();n.Eu.set(r,new xN(t)),n.du=n.du.insert(t,r),sT(n.remoteStore,new Zs(Di(tg(t.path)),r,"TargetPurposeLimboResolution",hh.ue))}}async function Wu(n,e,t){const r=$e(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((h,f)=>{u.push(r.gu(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const E=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=cg.Es(f.targetId,m);a.push(E)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const _=$e(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(m,(w=>re.forEach(w.Is,(P=>_.persistence.referenceDelegate.addReference(E,w.targetId,P))).next((()=>re.forEach(w.ds,(P=>_.persistence.referenceDelegate.removeReference(E,w.targetId,P)))))))))}catch(E){if(!gl(E))throw E;ye(dg,"Failed to update sequence numbers: "+E)}for(const E of m){const w=E.targetId;if(!E.fromCache){const P=_.Fs.get(w),D=P.snapshotVersion,x=P.withLastLimboFreeSnapshotVersion(D);_.Fs=_.Fs.insert(w,x)}}})(r.localStore,a))}async function $N(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){ye(_g,"User change. New user:",e.toKey());const r=await tT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((h=>{h.forEach((f=>{f.reject(new me(te.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wu(t,r.Bs)}}function BN(n,e){const t=$e(n),r=t.Eu.get(e);if(r&&r.lu)return Je().add(r.key);{let s=Je();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const h=t.Pu.get(u);s=s.unionWith(h.view.tu)}return s}}function ET(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LN.bind(null,e),e.hu.J_=CN.bind(null,e.eventManager),e.hu.pu=PN.bind(null,e.eventManager),e}function WN(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UN.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Gk(this.persistence,new Hk,e.initialUser,this.serializer)}Du(e){return new eT(ug.Vi,this.serializer)}bu(e){return new tN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class HN extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xk(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new eT((r=>zd.Vi(r,t)),this.serializer)}}class hm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$N.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bN})()}createDatastore(e){const t=wh(e.databaseInfo.databaseId),r=(function(a){return new oN(a)})(e.databaseInfo);return(function(a,u,h,f){return new cN(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,h){return new hN(r,s,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Lw(this.syncEngine,t,0)),(function(){return Nw.C()?new Nw:new nN})())}createSyncEngine(e,t){return(function(s,a,u,h,f,m,_){const E=new kN(s,a,u,h,f,m);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=$e(s);ye(Go,"RemoteStore shutting down."),a.Ia.add(5),await Bu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hm.provider={build:()=>new hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class qN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ye(fo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ye(fo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Tp(n,e){n.asyncQueue.verifyOperationInProgress(),ye(fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await tT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{oo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ye("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{oo("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Uw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KN(n);ye(fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Dw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Dw(e.remoteStore,s))),n._onlineComponents=e}async function KN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(fo,"Using user provided OfflineComponentProvider");try{await Tp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;oo("Error using user provided cache. Falling back to memory cache: "+t),await Tp(n,new Bd)}}else ye(fo,"Using default OfflineComponentProvider"),await Tp(n,new HN(void 0));return n._offlineComponents}async function TT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(fo,"Using user provided OnlineComponentProvider"),await Uw(n,n._uninitializedComponentsProvider._online)):(ye(fo,"Using default OnlineComponentProvider"),await Uw(n,new hm))),n._onlineComponents}function GN(n){return TT(n).then((e=>e.syncEngine))}async function IT(n){const e=await TT(n),t=e.eventManager;return t.onListen=NN.bind(null,e.syncEngine),t.onUnlisten=MN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ON.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VN.bind(null,e.syncEngine),t}function QN(n,e,t={}){const r=new hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new ST({next:w=>{_.Ou(),u.enqueueAndForget((()=>hT(a,E)));const P=w.docs.has(h);!P&&w.fromCache?m.reject(new me(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&w.fromCache&&f&&f.source==="server"?m.reject(new me(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),E=new fT(tg(h.path),_,{includeMetadataChanges:!0,ka:!0});return dT(a,E)})(await IT(n),n.asyncQueue,e,t,r))),r.promise}function XN(n,e,t={}){const r=new hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new ST({next:w=>{_.Ou(),u.enqueueAndForget((()=>hT(a,E))),w.fromCache&&f.source==="server"?m.reject(new me(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),E=new fT(h,_,{includeMetadataChanges:!0,ka:!0});return dT(a,E)})(await IT(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firestore.googleapis.com",$w=!0;class Bw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CT,this.ssl=$w}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ak)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ix;switch(r.type){case"firstParty":return new lx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=zw.get(t);r&&(ye("ComponentProvider","Removing Datastore"),zw.delete(t),r.terminate())})(this),Promise.resolve()}}function YN(n,e,t,r={}){var s;n=hi(n,Th);const a=Es(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(sh(`https://${f}`),oh("Firestore",!0)),u.host!==CT&&u.host!==f&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!ps(m,h)&&(n._setSettings(m),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=Rn.MOCK_USER;else{_=gE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new me(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Rn(w)}n._authCredentials=new sx(new cS(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yl(this.firestore,e,this._query)}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fu(t,Ht._jsonSchema))return new Ht(e,r||null,new Ae(Et.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Yt("string",Ht._jsonSchemaVersion),referencePath:Yt("string")};class io extends yl{constructor(e,t,r){super(e,t,tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ae(e))}withConverter(e){return new io(this.firestore,e,this._path)}}function Wd(n,e,...t){if(n=Ct(n),hS("collection","path",e),n instanceof Th){const r=Et.fromString(e,...t);return nw(r),new io(n,null,r)}{if(!(n instanceof Ht||n instanceof io))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return nw(r),new io(n.firestore,null,r)}}function br(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=Qm.newId()),hS("doc","path",e),n instanceof Th){const r=Et.fromString(e,...t);return tw(r),new Ht(n,null,new Ae(r))}{if(!(n instanceof Ht||n instanceof io))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return tw(r),new Ht(n.firestore,n instanceof io?n.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="AsyncQueue";class Hw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new rT(this,"async_queue_retry"),this.oc=()=>{const r=Sp();r&&ye(Ww,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new hs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!gl(e))throw e;ye(Ww,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,ys("INTERNAL UNHANDLED ERROR: ",qw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=gg.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&De(47125,{hc:qw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function qw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ea extends Th{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Hw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hw(e),this._firestoreClient=void 0,await e}}}function JN(n,e){const t=typeof n=="object"?n:ah(),r=typeof n=="string"?n:Md,s=Mu(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Dm("firestore");a&&YN(s,...a)}return s}function Eg(n){if(n._terminated)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZN(n),n._firestoreClient}function ZN(n){var e,t,r;const s=n._freezeSettings(),a=(function(h,f,m,_){return new Ix(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,bT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new qN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(wn.fromBase64String(e))}catch(t){throw new me(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $r(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fu(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:Yt("string",$r._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Fu(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Yt("string",Vi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fu(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ji(e.vectorValues);throw new me(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:Yt("string",ji._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=/^__.*__$/;class tO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}class PT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new go(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ec:n})}}class bh{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Hd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(AT(this.Ec)&&eO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wh(e)}Dc(e,t,r,s=!1){return new bh({Ec:e,methodName:t,bc:r,path:_n.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ch(n){const e=n._freezeSettings(),t=wh(n._databaseId);return new nO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RT(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);bg("Data must be an object, but it was:",u,r);const h=kT(r,u);let f,m;if(a.merge)f=new wr(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const w=fm(e,E,t);if(!u.contains(w))throw new me(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OT(_,w)||_.push(w)}f=new wr(_),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new tO(new cr(h),f,m)}class Hu extends _l{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}function xT(n,e,t){return new bh({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sg extends _l{_toFieldTransform(e){return new rg(e.path,new Pu)}isEqual(e){return e instanceof Sg}}class Tg extends _l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=xT(this,e,!0),r=this.vc.map((a=>ta(a,t))),s=new rl(r);return new rg(e.path,s)}isEqual(e){return e instanceof Tg&&ps(this.vc,e.vc)}}class Ig extends _l{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=xT(this,e,!0),r=this.vc.map((a=>ta(a,t))),s=new il(r);return new rg(e.path,s)}isEqual(e){return e instanceof Ig&&ps(this.vc,e.vc)}}function rO(n,e,t,r){const s=n.Dc(1,e,t);bg("Data must be an object, but it was:",s,r);const a=[],u=cr.empty();mo(r,((f,m)=>{const _=Cg(e,f,t);m=Ct(m);const E=s.gc(_);if(m instanceof Hu)a.push(_);else{const w=ta(m,E);w!=null&&(a.push(_),u.set(_,w))}}));const h=new wr(a);return new PT(u,h,s.fieldTransforms)}function iO(n,e,t,r,s,a){const u=n.Dc(1,e,t),h=[fm(e,r,t)],f=[s];if(a.length%2!=0)throw new me(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)h.push(fm(e,a[w])),f.push(a[w+1]);const m=[],_=cr.empty();for(let w=h.length-1;w>=0;--w)if(!OT(m,h[w])){const P=h[w];let D=f[w];D=Ct(D);const x=u.gc(P);if(D instanceof Hu)m.push(P);else{const b=ta(D,x);b!=null&&(m.push(P),_.set(P,b))}}const E=new wr(m);return new PT(_,E,u.fieldTransforms)}function sO(n,e,t,r=!1){return ta(t,n.Dc(r?4:3,e))}function ta(n,e){if(NT(n=Ct(n)))return bg("Unsupported field value:",e,n),kT(n,e);if(n instanceof _l)return(function(r,s){if(!AT(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const h of r){let f=ta(h,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:Ud(s.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ud(s.serializer,a)}}if(r instanceof Vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:qS(s.serializer,r._byteString)};if(r instanceof Ht){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ji)return(function(u,h){return{mapValue:{fields:{[ES]:{stringValue:SS},[Vd]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return ng(h.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${dh(r)}`)})(n,e)}function kT(n,e){const t={};return mS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(n,((r,s)=>{const a=ta(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function NT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Vi||n instanceof $r||n instanceof Ht||n instanceof _l||n instanceof ji)}function bg(n,e,t){if(!NT(t)||!fS(t)){const r=dh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function fm(n,e,t){if((e=Ct(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return Cg(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const oO=new RegExp("[~\\*/\\[\\]]");function Cg(n,e,t){if(e.search(oO)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ih(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new me(te.INVALID_ARGUMENT,h+n+f)}function OT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aO extends DT{data(){return super.data()}}function Pg(n,e){return typeof e=="string"?Cg(n,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class uO extends Ag{}function pm(n,e,...t){let r=[];e instanceof Ag&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Rg)).length,h=a.filter((f=>f instanceof Ph)).length;if(u>1||u>0&&h>0)throw new me(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ph extends uO{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ph(e,t,r)}_apply(e){const t=this._parse(e);return MT(e._query,t),new yl(e.firestore,e.converter,nm(e._query,t))}_parse(e){const t=Ch(e.firestore);return(function(a,u,h,f,m,_,E){let w;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Gw(E,_);const D=[];for(const x of E)D.push(Kw(f,a,x));w={arrayValue:{values:D}}}else w=Kw(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Gw(E,_),w=sO(h,u,E,_==="in"||_==="not-in");return Xt.create(m,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mm(n,e,t){const r=e,s=Pg("where",n);return Ph._create(s,r,t)}class Rg extends Ag{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:fi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)MT(u,f),u=nm(u,f)})(e._query,t),new yl(e.firestore,e.converter,nm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Kw(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new me(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xS(e)&&t.indexOf("/")!==-1)throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!Ae.isDocumentKey(r))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cw(n,new Ae(r))}if(t instanceof Ht)return cw(n,t._key);throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(t)}.`)}function Gw(n,e){if(!Array.isArray(n)||n.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MT(n,e){const t=(function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cO{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return mo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Vd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Wt(u.doubleValue)));return new ji(a)}convertGeoPoint(e){return new Vi(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ph(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=lo(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);ft(JS(r),9688,{name:e});const s=new bu(r.get(1),r.get(3)),a=new Ae(r.popFirst(5));return s.isEqual(t)||ys(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends DT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:Yt("string",Wo._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class wd extends Wo{data(e={}){return super.data(e)}}class Xa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new lu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wd(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const f=new wd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new wd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:dO(h.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){n=hi(n,Ht);const e=hi(n.firestore,ea);return QN(Eg(e),n._key).then((t=>pO(e,n,t)))}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:Yt("string",Xa._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class jT extends cO{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function LT(n){n=hi(n,yl);const e=hi(n.firestore,ea),t=Eg(e),r=new jT(e);return lO(n._query),XN(t,n._query).then((s=>new Xa(e,r,n,s)))}function xg(n,e,t){n=hi(n,Ht);const r=hi(n.firestore,ea),s=VT(n.converter,e,t);return Rh(r,[RT(Ch(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Wr.none())])}function Ah(n,e,t,...r){n=hi(n,Ht);const s=hi(n.firestore,ea),a=Ch(s);let u;return u=typeof(e=Ct(e))=="string"||e instanceof Ih?iO(a,"updateDoc",n._key,e,t,r):rO(a,"updateDoc",n._key,e),Rh(s,[u.toMutation(n._key,Wr.exists(!0))])}function hO(n){return Rh(hi(n.firestore,ea),[new ig(n._key,Wr.none())])}function fO(n,e){const t=hi(n.firestore,ea),r=br(n),s=VT(n.converter,e);return Rh(t,[RT(Ch(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Wr.exists(!1))]).then((()=>r))}function Rh(n,e){return(function(r,s){const a=new hs;return r.asyncQueue.enqueueAndForget((async()=>jN(await GN(r),s,a))),a.promise})(Eg(n),e)}function pO(n,e,t){const r=t.docs.get(e._key),s=new jT(n);return new Wo(n,s,e._key,r,new lu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(){return new Hu("deleteField")}function al(){return new Sg("serverTimestamp")}function FT(...n){return new Tg("arrayUnion",n)}function gO(...n){return new Ig("arrayRemove",n)}(function(e,t=!0){(function(s){pl=s})(Yo),so(new ms("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new ea(new ox(r.getProvider("auth-internal")),new ux(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new me(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Br(X_,Y_,e),Br(X_,Y_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="type.googleapis.com/google.protobuf.Int64Value",yO="type.googleapis.com/google.protobuf.UInt64Value";function UT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function qd(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>qd(e));if(typeof n=="function"||typeof n=="object")return UT(n,e=>qd(e));throw new Error("Data cannot be encoded in JSON: "+n)}function ll(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case vO:case yO:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>ll(e)):typeof n=="function"||typeof n=="object"?UT(n,e=>ll(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dr extends pi{constructor(e,t,r){super(`${kg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,dr.prototype)}}function _O(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Kd(n,e){let t=_O(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Qw[u])return new dr("internal","internal");t=Qw[u],r=u}const h=a.message;typeof h=="string"&&(r=h),s=a.details,s!==void 0&&(s=ll(s))}}catch{}return t==="ok"?null:new dr(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ur(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="us-central1",EO=/^data: (.*?)(?:\n|$)/;function SO(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new dr("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class TO{constructor(e,t,r,s,a=gm,u=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new wO(e,t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=gm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function IO(n,e,t){const r=Es(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(sh(n.emulatorOrigin),oh("Functions",!0))}function bO(n,e,t){const r=s=>PO(n,e,s,{});return r.stream=(s,a)=>RO(n,e,s,a),r}async function CO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function zT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function PO(n,e,t,r){const s=n._url(e);return AO(n,s,t,r)}async function AO(n,e,t,r){t=qd(t);const s={data:t},a=await zT(n,r),u=r.timeout||7e4,h=SO(u),f=await Promise.race([CO(e,s,a,n.fetchImpl),h.promise,n.cancelAllRequests]);if(h.cancel(),!f)throw new dr("cancelled","Firebase Functions instance was deleted.");const m=Kd(f.status,f.json);if(m)throw m;if(!f.json)throw new dr("internal","Response is not valid JSON object.");let _=f.json.data;if(typeof _>"u"&&(_=f.json.result),typeof _>"u")throw new dr("internal","Response is missing data field.");return{data:ll(_)}}function RO(n,e,t,r){const s=n._url(e);return xO(n,s,t,r||{})}async function xO(n,e,t,r){var s;t=qd(t);const a={data:t},u=await zT(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let h;try{h=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const x=new dr("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const D=Kd(0,null);return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}let f,m;const _=new Promise((P,D)=>{f=P,m=D});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const P=new dr("cancelled","Request was cancelled.");m(P)});const E=h.body.getReader(),w=kO(E,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const P=w.getReader();return{async next(){const{value:D,done:x}=await P.read();return{value:D,done:x}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function kO(n,e,t,r){const s=(u,h)=>{const f=u.match(EO);if(!f)return;const m=f[1];try{const _=JSON.parse(m);if("result"in _){e(ll(_.result));return}if("message"in _){h.enqueue(ll(_.message));return}if("error"in _){const E=Kd(0,_);h.error(E),t(E);return}}catch(_){if(_ instanceof dr){h.error(_),t(_);return}}},a=new TextDecoder;return new ReadableStream({start(u){let h="";return f();async function f(){if(r!=null&&r.aborted){const m=new dr("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){h.trim()&&s(h.trim(),u),u.close();return}if(r!=null&&r.aborted){const w=new dr("cancelled","Request was cancelled");u.error(w),t(w),await n.cancel();return}h+=a.decode(m,{stream:!0});const E=h.split(`
`);h=E.pop()||"";for(const w of E)w.trim()&&s(w.trim(),u);return f()}catch(m){const _=m instanceof dr?m:Kd(0,null);u.error(_),t(_)}}},cancel(){return n.cancel()}})}const Xw="@firebase/functions",Yw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="auth-internal",OO="app-check-internal",DO="messaging-internal";function MO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(NO),u=t.getProvider(DO),h=t.getProvider(OO);return new TO(s,a,u,h,r)};so(new ms(kg,e,"PUBLIC").setMultipleInstances(!0)),Br(Xw,Yw,n),Br(Xw,Yw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n=ah(),e=gm){const r=Mu(Ct(n),kg).getImmediate({identifier:e}),s=Dm("functions");return s&&jO(r,...s),r}function jO(n,e,t){IO(Ct(n),e,t)}function Dn(n,e,t){return bO(Ct(n),e)}MO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebasestorage.googleapis.com",BT="storageBucket",LO=120*1e3,FO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut extends pi{constructor(e,t,r=0){super(Ip(e),`Firebase Storage: ${t} (${Ip(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ft;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ft||(Ft={}));function Ip(n){return"storage/"+n}function Ng(){const n="An unknown error occurred, please check the error payload for server response.";return new Ut(Ft.UNKNOWN,n)}function UO(n){return new Ut(Ft.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function zO(n){return new Ut(Ft.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $O(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ut(Ft.UNAUTHENTICATED,n)}function BO(){return new Ut(Ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WO(n){return new Ut(Ft.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function HO(){return new Ut(Ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qO(){return new Ut(Ft.CANCELED,"User canceled the upload/download.")}function KO(n){return new Ut(Ft.INVALID_URL,"Invalid URL '"+n+"'.")}function GO(n){return new Ut(Ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function QO(){return new Ut(Ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BT+"' property when initializing the app?")}function XO(){return new Ut(Ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YO(){return new Ut(Ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JO(n){return new Ut(Ft.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vm(n){return new Ut(Ft.INVALID_ARGUMENT,n)}function WT(){return new Ut(Ft.APP_DELETED,"The Firebase app was deleted.")}function ZO(n){return new Ut(Ft.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vu(n,e){return new Ut(Ft.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function eu(n){throw new Ut(Ft.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Er.makeFromUrl(e,t)}catch{return new Er(e,"")}if(r.path==="")return r;throw GO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",P=new RegExp(`^https?://${E}/${_}/b/${s}/o${w}`,"i"),D={bucket:1,path:3},x=t===$T?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",z=new RegExp(`^https?://${x}/${s}/${b}`,"i"),K=[{regex:h,indices:f,postModify:a},{regex:P,indices:D,postModify:m},{regex:z,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<K.length;Z++){const W=K[Z],ne=W.regex.exec(e);if(ne){const N=ne[W.indices.bucket];let A=ne[W.indices.path];A||(A=""),r=new Er(N,A),W.postModify(r);break}}if(r==null)throw KO(e);return r}}class eD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n,e,t){let r=1,s=null,a=null,u=!1,h=0;function f(){return h===2}let m=!1;function _(...b){m||(m=!0,e.apply(null,b))}function E(b){s=setTimeout(()=>{s=null,n(P,f())},b)}function w(){a&&clearTimeout(a)}function P(b,...z){if(m){w();return}if(b){w(),_.call(null,b,...z);return}if(f()||u){w(),_.call(null,b,...z);return}r<64&&(r*=2);let K;h===1?(h=2,K=0):K=(r+Math.random())*1e3,E(K)}let D=!1;function x(b){D||(D=!0,w(),!m&&(s!==null?(b||(h=2),clearTimeout(s),E(0)):b||(h=1)))}return E(0),a=setTimeout(()=>{u=!0,x(!0)},t),x}function nD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){return n!==void 0}function iD(n){return typeof n=="object"&&!Array.isArray(n)}function Og(n){return typeof n=="string"||n instanceof String}function Jw(n){return Dg()&&n instanceof Blob}function Dg(){return typeof Blob<"u"}function Zw(n,e,t,r){if(r<e)throw vm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw vm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function HT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ho;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ho||(Ho={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t,r,s,a,u,h,f,m,_,E,w=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=E,this.retry=w,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,x)=>{this.resolve_=D,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new rd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===Ho.NO_ERROR,f=a.getStatus();if(!h||sD(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Ho.ABORT;r(!1,new rd(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new rd(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());rD(f)?a(f):a()}catch(f){u(f)}else if(h!==null){const f=Ng();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(s.canceled){const f=this.appDelete_?WT():qO();u(f)}else{const f=HO();u(f)}};this.canceled_?t(!1,new rd(!1,null,!0)):this.backoffId_=tD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function aD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function cD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dD(n,e,t,r,s,a,u=!0,h=!1){const f=HT(n.urlParams),m=n.url+f,_=Object.assign({},n.headers);return uD(_,e),aD(_,t),lD(_,a),cD(_,r),new oD(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fD(...n){const e=hD();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Dg())return new Blob(n);throw new Ut(Ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n){if(typeof atob>"u")throw JO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bp{constructor(e,t){this.data=e,this.contentType=t||null}}function gD(n,e){switch(n){case Ni.RAW:return new bp(qT(e));case Ni.BASE64:case Ni.BASE64URL:return new bp(KT(n,e));case Ni.DATA_URL:return new bp(yD(e),_D(e))}throw Ng()}function qT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function vD(n){let e;try{e=decodeURIComponent(n)}catch{throw vu(Ni.DATA_URL,"Malformed data URL.")}return qT(e)}function KT(n,e){switch(n){case Ni.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw vu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ni.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw vu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=mD(e)}catch(s){throw s.message.includes("polyfill")?s:vu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class GT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw vu(Ni.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=wD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yD(n){const e=new GT(n);return e.base64?KT(Ni.BASE64,e.rest):vD(e.rest)}function _D(n){return new GT(n).contentType}function wD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t){let r=0,s="";Jw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jw(this.data_)){const r=this.data_,s=pD(r,e,t);return s===null?null:new Ys(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ys(r,!0)}}static getBlob(...e){if(Dg()){const t=e.map(r=>r instanceof Ys?r.data_:r);return new Ys(fD.apply(null,t))}else{const t=e.map(u=>Og(u)?gD(Ni.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)s[a++]=u[h]}),new Ys(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n){let e;try{e=JSON.parse(n)}catch{return null}return iD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function XT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(n,e){return e}class $n{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||TD}}let id=null;function ID(n){return!Og(n)||n.length<2?n:XT(n)}function YT(){if(id)return id;const n=[];n.push(new $n("bucket")),n.push(new $n("generation")),n.push(new $n("metageneration")),n.push(new $n("name","fullPath",!0));function e(a,u){return ID(u)}const t=new $n("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new $n("size");return s.xform=r,n.push(s),n.push(new $n("timeCreated")),n.push(new $n("updated")),n.push(new $n("md5Hash",null,!0)),n.push(new $n("cacheControl",null,!0)),n.push(new $n("contentDisposition",null,!0)),n.push(new $n("contentEncoding",null,!0)),n.push(new $n("contentLanguage",null,!0)),n.push(new $n("contentType",null,!0)),n.push(new $n("metadata","customMetadata",!0)),id=n,id}function bD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new Er(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function CD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return bD(r,n),r}function JT(n,e,t){const r=QT(e);return r===null?null:CD(n,r,t)}function PD(n,e,t,r){const s=QT(e);if(s===null||!Og(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,E=n.fullPath,w="/b/"+u(_)+"/o/"+u(E),P=xh(w,t,r),D=HT({alt:"media",token:m});return P+D})[0]}function AD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Mg{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(n){if(!n)throw Ng()}function RD(n,e){function t(r,s){const a=JT(n,s,e);return ZT(a!==null),a}return t}function xD(n,e){function t(r,s){const a=JT(n,s,e);return ZT(a!==null),PD(a,s,n.host,n._protocol)}return t}function eI(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=BO():s=$O():t.getStatus()===402?s=zO(n.bucket):t.getStatus()===403?s=WO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function tI(n){const e=eI(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=UO(n.path)),a.serverResponse=s.serverResponse,a}return t}function kD(n,e,t){const r=e.fullServerUrl(),s=xh(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,h=new Mg(s,a,xD(n,t),u);return h.errorHandler=tI(e),h}function ND(n,e){const t=e.fullServerUrl(),r=xh(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const h=new Mg(r,s,u,a);return h.successCodes=[200,204],h.errorHandler=tI(e),h}function OD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function DD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=OD(null,e)),r}function MD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let K="";for(let Z=0;Z<2;Z++)K=K+Math.random().toString().slice(2);return K}const f=h();u["Content-Type"]="multipart/related; boundary="+f;const m=DD(e,r,s),_=AD(m,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,w=`\r
--`+f+"--",P=Ys.getBlob(E,r,w);if(P===null)throw XO();const D={name:m.fullPath},x=xh(a,n.host,n._protocol),b="POST",z=n.maxUploadRetryTime,Q=new Mg(x,b,RD(n,t),z);return Q.urlParams=D,Q.headers=u,Q.body=P.uploadData(),Q.errorHandler=eI(e),Q}class VD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ho.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ho.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ho.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw eu("cannot .send() more than once");if(Es(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class jD extends VD{initXhr(){this.xhr_.responseType="text"}}function Vg(){return new jD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this._service=e,t instanceof Er?this._location=t:this._location=Er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qo(e,t)}get root(){const e=new Er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XT(this._location.path)}get storage(){return this._service}get parent(){const e=ED(this._location.path);if(e===null)return null;const t=new Er(this._location.bucket,e);return new Qo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ZO(e)}}function LD(n,e,t){n._throwIfRoot("uploadBytes");const r=MD(n.storage,n._location,YT(),new Ys(e,!0),t);return n.storage.makeRequestWithTokens(r,Vg).then(s=>({metadata:s,ref:n}))}function FD(n){n._throwIfRoot("getDownloadURL");const e=kD(n.storage,n._location,YT());return n.storage.makeRequestWithTokens(e,Vg).then(t=>{if(t===null)throw YO();return t})}function UD(n){n._throwIfRoot("deleteObject");const e=ND(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Vg)}function zD(n,e){const t=SD(n._location.path,e),r=new Er(n._location.bucket,t);return new Qo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){return/^[A-Za-z]+:\/\//.test(n)}function BD(n,e){return new Qo(n,e)}function nI(n,e){if(n instanceof jg){const t=n;if(t._bucket==null)throw QO();const r=new Qo(t,t._bucket);return e!=null?nI(r,e):r}else return e!==void 0?zD(n,e):n}function WD(n,e){if(e&&$D(e)){if(n instanceof jg)return BD(n,e);throw vm("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(n,e)}function e0(n,e){const t=e==null?void 0:e[BT];return t==null?null:Er.makeFromBucketSpec(t,n)}function HD(n,e,t,r={}){n.host=`${e}:${t}`;const s=Es(e);s&&(sh(`https://${n.host}/b`),oh("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:gE(a,n.app.options.projectId))}class jg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=$T,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LO,this._maxUploadRetryTime=FO,this._requests=new Set,s!=null?this._bucket=Er.makeFromBucketSpec(s,this._host):this._bucket=e0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Er.makeFromBucketSpec(this._url,e):this._bucket=e0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new eD(WT());{const u=dD(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const t0="@firebase/storage",n0="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="storage";function qD(n,e,t){return n=Ct(n),LD(n,e,t)}function KD(n){return n=Ct(n),FD(n)}function GD(n){return n=Ct(n),UD(n)}function iI(n,e){return n=Ct(n),WD(n,e)}function QD(n=ah(),e){n=Ct(n);const r=Mu(n,rI).getImmediate({identifier:e}),s=Dm("storage");return s&&XD(r,...s),r}function XD(n,e,t,r={}){HD(n,e,t,r)}function YD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new jg(t,r,s,e,Yo)}function JD(){so(new ms(rI,YD,"PUBLIC").setMultipleInstances(!0)),Br(t0,n0,""),Br(t0,n0,"esm2017")}JD();const ZD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},kh=_E(ZD),kn=nx(kh),On=JN(kh),sI=QD(kh),Mn=VO(kh,"us-central1");WA(kn,HE);Dn(Mn,"bootstrapFirstAdmin");Dn(Mn,"setUserRole");const e2=Dn(Mn,"ensureCoachAccess"),t2=Dn(Mn,"acceptCoachTrial"),n2=Dn(Mn,"getCoachAccessState"),r2=Dn(Mn,"completeClientOnboarding"),i2=Dn(Mn,"listCoachesForSupervisor"),s2=Dn(Mn,"activateCoachSubscription"),o2=Dn(Mn,"renewCoachSubscription"),a2=Dn(Mn,"disableCoachSubscription"),l2=Dn(Mn,"deleteMyProfile"),u2=Dn(Mn,"updateMyCoachPhone"),c2=Dn(Mn,"getMyAssignedPlans"),d2=Dn(Mn,"updateMyPlanExerciseWeight"),h2=Dn(Mn,"syncPlanWeightOverridesForCoach"),f2=Dn(Mn,"syncMyPlanWeightOverrides");async function p2(){return(await e2()).data}async function oI(){return(await t2()).data}async function r0(){return(await n2()).data}async function m2(n){return(await r2(n)).data}async function g2(){return(await i2()).data}async function i0(n){return(await s2({uid:n})).data}async function v2(n){return(await o2({uid:n})).data}async function y2(n){return(await a2({uid:n})).data}async function aI(){return(await l2()).data}async function _2(n){return(await u2({phone:n})).data}async function w2(){return(await c2()).data}async function s0(n,e,t){return(await d2({planId:n,exerciseIndex:e,weightKg:t})).data}async function E2(n){return(await h2({planId:n})).data}async function S2(){return(await f2()).data}async function T2(){return kn.currentUser?kn.currentUser.getIdTokenResult(!0):null}async function lI(n){const e=n??kn.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await Su(kn),null}throw t}}async function I2(n){const e=n??kn.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function uI(){return{createdAt:al(),updatedAt:al()}}function wl(){return{updatedAt:al()}}function vo(){var e;const n=(e=kn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}const b2=1920,C2=700*1024,P2=.88,o0=.62,A2=.06;function R2(n){return n==="image/png"||n==="image/webp"?"image/webp":"image/jpeg"}function x2(n){return n==="image/webp"?"webp":n==="image/jpeg"?"jpg":"bin"}async function k2(n){if(typeof createImageBitmap=="function"){const r=await createImageBitmap(n);return{width:r.width,height:r.height,draw:(s,a,u)=>s.drawImage(r,0,0,a,u),cleanup:()=>r.close()}}const e=URL.createObjectURL(n),t=await new Promise((r,s)=>{const a=new Image;a.onload=()=>r(a),a.onerror=()=>s(new Error("image-load-failed")),a.src=e});return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,draw:(r,s,a)=>r.drawImage(t,0,0,s,a),cleanup:()=>URL.revokeObjectURL(e)}}async function a0(n,e,t){return new Promise(r=>{n.toBlob(s=>r(s),e,t)})}async function N2(n){if(!n.type.startsWith("image/")||n.type==="image/gif"||n.type==="image/svg+xml"||n.size<=450*1024)return n;const e=await k2(n);try{const t=Math.min(1,b2/Math.max(e.width,e.height)),r=Math.max(1,Math.round(e.width*t)),s=Math.max(1,Math.round(e.height*t)),a=document.createElement("canvas");a.width=r,a.height=s;const u=a.getContext("2d");if(!u)return n;e.draw(u,r,s);const h=R2(n.type);let f=P2,m=await a0(a,h,f);if(!m)return n;for(;m.size>C2&&f>o0;){f=Math.max(o0,f-A2);const P=await a0(a,h,f);if(!P)break;m=P}if(m.size>=n.size)return n;const _=n.name.lastIndexOf("."),E=_>0?n.name.slice(0,_):n.name,w=x2(h);return new File([m],`${E}.${w}`,{type:h,lastModified:Date.now()})}catch{return n}finally{e.cleanup()}}async function ym(n={}){const e=vo(),t=br(On,"users",e);return await xg(t,{uid:e,...uI(),...n},{merge:!0}),t}async function Ya(n){const e=n??vo();return qu(br(On,"users",e))}async function cI(n){const e=n??vo(),t=pm(Wd(On,"users"),mm("assignedCoachId","==",e));return LT(t)}async function dI(n,e){return qu(br(On,"users",n,"private",e))}async function O2(){const n=vo();return qu(br(On,"users",n,"private","planWeights"))}async function D2(n,e,t){const r=vo();await xg(br(On,"users",r,"private","planWeights"),{weights:{[n]:{[String(e)]:t}},...wl()},{merge:!0})}async function M2(n,e){await xg(br(On,"users",n,"private","onboarding"),{...e,...wl()},{merge:!0})}async function l0(n){const e=vo();return await fO(Wd(On,"plans"),{trainerId:e,clientId:n.clientId??"",status:n.status,title:n.title,warmup:n.warmup??"",description:n.description??"",kind:n.kind??"series_reps",notes:n.notes??"",assignedClientIds:n.assignedClientIds??[],exercises:n.exercises,clientNotes:"",lastViewedAt:null,...uI()})}async function hI(n,e){const t=e??vo(),r=n==="client"?pm(Wd(On,"plans"),mm("assignedClientIds","array-contains",t)):pm(Wd(On,"plans"),mm("trainerId","==",t));return LT(r)}async function V2(n,e){await Ah(br(On,"plans",n),{assignedClientIds:FT(e),[`assignmentDetails.${e}`]:{mode:"permanent",weeks:null,expiresAt:null,assignedAt:al()},...wl()})}async function u0(n,e,t,r){const s=r?new Date(r):new Date,a=Number.isNaN(s.getTime())?new Date:s,u=t&&t>0?{mode:"timed",weeks:t,startsAt:_t.fromDate(a),expiresAt:_t.fromDate(new Date(a.getTime()+t*7*24*60*60*1e3)),assignedAt:al()}:{mode:"permanent",weeks:null,startsAt:null,expiresAt:null,assignedAt:al()};await Ah(br(On,"plans",n),{assignedClientIds:FT(e),[`assignmentDetails.${e}`]:u,...wl()})}async function j2(n,e){await Ah(br(On,"plans",n),{assignedClientIds:gO(e),[`assignmentDetails.${e}`]:mO(),...wl()})}async function L2(n){return qu(br(On,"plans",n))}async function F2(n,e){await Ah(br(On,"plans",n),{...e,...wl()})}async function U2(n){const e=br(On,"plans",n),t=await qu(e);if(t.exists()){const r=t.data(),s=B2(r.exercises);await Promise.allSettled(s.map(a=>W2(a)))}await hO(e)}async function z2(n,e){const t=vo(),r=await N2(e),s=r.name.replace(/[^a-zA-Z0-9._-]/g,"_"),a=`${Date.now()}-${s}`,u=$2(t,n,a);return await qD(u,r,{contentType:r.type||"application/octet-stream"}),KD(u)}function $2(n,e,t){return iI(sI,`workout-media/${n}/${e}/${t}`)}function B2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;c0(r)&&e.add(r),c0(s)&&e.add(s)}return[...e]}function c0(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function W2(n){try{await GD(iI(sI,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}function na(){const[n,e]=O.useState(!0),[t,r]=O.useState(kn.currentUser),[s,a]=O.useState(null),[u,h]=O.useState(!1);return O.useEffect(()=>$E(kn,async f=>{try{if(e(!0),r(f),!f){a(null),h(!1);return}await Lg(f);const m=await lI(f);a(m),h(await I2(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await Su(kn),r(null)),a(null),h(!1)}finally{e(!1)}}),[]),O.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const _m=new us;_m.setCustomParameters({prompt:"select_account"});async function Lg(n){(await Ya(n.uid)).exists()||await ym({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function d0(){try{const n=await cR(kn,_m);return await Lg(n.user),{redirected:!1,user:n.user}}catch(n){if(q2(n)){if(K2()){const e=new Error("Google redirect non supportato in questo browser.");throw e.code="auth/redirect-unavailable",e}return await gR(kn,_m),{redirected:!0,user:null}}throw n}}async function H2(){try{const n=await yR(kn);return n!=null&&n.user&&await Lg(n.user),n}catch(n){const e=typeof n=="object"&&n&&"code"in n?String(n.code):"";if(e.includes("user-token-expired"))return await Su(kn),null;if(e.includes("missing-initial-state"))return await Su(kn).catch(()=>{}),null;throw n}}async function Sr(){return Su(kn)}function q2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function K2(){var a;if(typeof window>"u"||typeof navigator>"u")return!1;const n=navigator.userAgent||"";if(!(/iPad|iPhone|iPod/i.test(n)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1))return!1;const t=navigator,r=((a=window.matchMedia)==null?void 0:a.call(window,"(display-mode: standalone)").matches)||t.standalone===!0,s=/(FBAN|FBAV|Instagram|Line|Twitter|MicroMessenger|wv)/i.test(n);return r||s}function fI(n){return n.replace(/[^\d]/g,"")}const G2="393405882404".trim(),pI=fI(G2);pI.length>6;function mI(n,e){const t=fI(e??pI),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function Q2(n){return n.map(e=>({id:e.id,...e.data()}))}function kt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("redirect-unavailable")?"Su iPhone apri il link in Safari (non dentro app esterne) e riprova con Google.":e.includes("missing-initial-state")?"Sessione Google non valida su questo browser. Apri il sito in Safari e riprova.":e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const zr="bw_login_intent";function X2(n){return n==="trainer"||n==="admin"}function Y2(){const{user:n,role:e}=na(),t=dl(),{showError:r}=rh(),[s,a]=O.useState(!1),[u,h]=O.useState(""),[f,m]=O.useState(!1),[_,E]=O.useState(!1),[w,P]=O.useState(null),[D,x]=O.useState(null),[b,z]=O.useState(!1),Q=O.useRef(0),K=O.useMemo(()=>mI("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);O.useEffect(()=>{async function j(){try{await H2()}catch(L){const k=kt(L);h(k),r(k)}}j()},[r]);async function Z(j=10){if(!n)return!1;for(let L=0;L<j;L+=1){await T2();const k=await lI(n);if(X2(k))return!0;await new Promise(fe=>setTimeout(fe,500))}return!1}async function W(){if(!n)return;const j=++Q.current,L=()=>j!==Q.current||_;m(!0),h("Sto preparando il tuo accesso coach...");try{if(await ym({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),L())return;const k=await p2();if(L())return;const be=(await Ya(n.uid)).data();if(!(typeof(be==null?void 0:be.phone)=="string"?be.phone.trim():"")){x({access:k,phone:""}),m(!1),h("");return}if(k.isExpired){if(await Sr(),sessionStorage.removeItem(zr),L())return;P({mode:"expired",access:k});return}if(k.requiresTrialAcceptance){if(L())return;P({mode:"trial",access:k});return}const Ve=await Z();if(L())return;if(!Ve){h("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(zr),t("/app/coach",{replace:!0})}catch(k){if(L())return;const fe=kt(k);h(fe),r(fe)}finally{L()||m(!1)}}async function ne(){if(!D||!n)return;const j=D.phone.replace(/[^\d+]/g,"").trim();if(j.length<8){h("Inserisci un numero WhatsApp valido.");return}z(!0),h("Salvo il tuo numero e completo la registrazione coach...");try{await ym({phone:j});const L=D.access;if(x(null),L.isExpired){await Sr(),sessionStorage.removeItem(zr),P({mode:"expired",access:L});return}if(L.requiresTrialAcceptance){P({mode:"trial",access:L});return}if(!await Z()){h("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(zr),t("/app/coach",{replace:!0})}catch(L){const k=kt(L);h(k),r(k)}finally{z(!1)}}O.useEffect(()=>{async function j(){if(!n){m(!1),_||h("");return}if(f||_||D)return;if(sessionStorage.getItem(zr)==="coach"){await W();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}j()},[n,e,f,_,D]),O.useEffect(()=>{_&&(n||(E(!1),t("/auth",{replace:!0})))},[_,n,t]);async function N(){Q.current+=1,E(!0),m(!1),h("Uscita in corso..."),sessionStorage.removeItem(zr),P(null),x(null);try{await Sr()}catch(j){h(kt(j)),E(!1)}}async function A(){a(!0),h("Sto attivando il tuo periodo di prova...");try{const j=await oI();if(j.isExpired){await Sr(),sessionStorage.removeItem(zr),P({mode:"expired",access:j});return}if(!await Z()){h("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}P(null),sessionStorage.removeItem(zr),t("/app/coach",{replace:!0})}catch(j){const L=kt(j);h(L),r(L)}finally{a(!1)}}async function R(){a(!0),h(""),P(null);try{if(sessionStorage.setItem(zr,"client"),(await d0()).redirected){h("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(j){const L=kt(j);h(L),r(L)}finally{a(!1)}}async function V(){a(!0),h(""),P(null);try{sessionStorage.setItem(zr,"coach");const j=await d0();if(j.redirected){h("Ti sto reindirizzando a Google...");return}if(!j.user){h("Accesso non completato. Riprova.");return}await W()}catch(j){const L=kt(j);h(L),r(L)}finally{a(!1)}}return(w==null?void 0:w.mode)==="trial"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void N(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:s,onClick:()=>void A(),children:s?"Attivazione...":"Accetta e continua"})]})]})}):(w==null?void 0:w.mode)==="expired"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Periodo di prova terminato"}),g.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{P(null),sessionStorage.removeItem(zr)},children:"Torna all'accesso"}),g.jsx("a",{className:"btn btn-whatsapp btn-primary",href:K,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"})]})]})}):D?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Registrazione Coach"}),g.jsx("h1",{children:"Inserisci numero WhatsApp"}),g.jsx("p",{className:"hero-sub",children:"Ultimo step obbligatorio: questo numero verr condiviso ai clienti associati al tuo codice coach."}),g.jsxs("label",{children:["Numero di telefono / WhatsApp *",g.jsx("input",{type:"tel",placeholder:"Es. 3405882404",value:D.phone,onChange:j=>x(L=>L&&{...L,phone:j.target.value})})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:b,onClick:()=>void N(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:b,onClick:()=>void ne(),children:b?"Salvataggio...":"Continua"})]}),u?g.jsx("p",{className:"message",children:u}):null]})}):n&&e&&sessionStorage.getItem(zr)!=="coach"?g.jsx(Tr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h2",{children:"Accesso Cliente"}),g.jsx("p",{className:"hint",children:"Se usi la piattaforma per ricevere e seguire la tua scheda tecnica, entra da qui."}),g.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void R(),type:"button",children:s?"Connessione...":"Continua come Cliente"}),g.jsx("div",{className:"divider"}),g.jsx("h2",{children:"Accesso Coach / Supervisor"}),g.jsx("p",{className:"hint",children:"Se devi gestire clienti e schede, accedi da qui. Se  il primo accesso, verr avviata la registrazione coach."}),g.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void V(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach/Supervisor"}),u?g.jsx("p",{className:"message",children:u}):null,g.jsx(E1,{})]})})}function gI({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:h}){const f=s.length>0&&!!u,[m,_]=O.useState(!1),E=O.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),w=O.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),P=m?"__more__":a,D=m||!m&&w.some(b=>b.id===a);function x(b,z){const Q=(z==="mobile"?P:a)===b.id,K=z==="mobile"?b.mobileLabel??b.label:b.label;return g.jsxs("button",{className:`shell-tab shell-tab-${z} ${Q?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(b.id),z==="mobile"&&_(!1)},"aria-current":Q?"page":void 0,children:[b.icon?g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:b.icon}):null,g.jsx("span",{className:"shell-tab-label",children:K})]},`${z}-${b.id}`)}return g.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?g.jsxs("aside",{className:"shell-sidebar desktop-only",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h2",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hint",children:t}):null,g.jsx("nav",{className:"shell-sidebar-nav",children:s.map(b=>x(b,"desktop"))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Sr(),children:"Esci dal profilo"})]}):null,g.jsxs("section",{className:"shell-main",children:[g.jsxs("section",{className:"hero hero-compact",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h1",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hero-sub",children:t}):null,r,f?null:g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Sr(),children:"Esci dal profilo"})]}),g.jsx("section",{className:"stack app-stack",children:h})]}),g.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?E.map(b=>x(b,"mobile")):g.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Home"})]}),w.length>0?g.jsxs("button",{className:`shell-tab shell-tab-mobile ${D||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>_(b=>!b),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,g.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Sr(),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&w.length>0?g.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",onClick:b=>b.currentTarget===b.target&&_(!1),children:g.jsxs("article",{className:"card mobile-more-card",onClick:b=>b.stopPropagation(),children:[g.jsx("h3",{children:"Altre sezioni"}),g.jsx("div",{className:"mobile-more-list",children:w.map(b=>g.jsxs("button",{className:`step-tab ${a===b.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(b.id),_(!1)},children:[b.icon?`${b.icon} `:"",b.label]},`more-${b.id}`))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>_(!1),children:"Chiudi"})]})}):null]})}function wm(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Em(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function vI(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Cp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number((typeof t.weight=="string"?t.weight:"").replace(/[^\d.-]/g,"")),s=typeof t.advancedMethod=="string"?t.advancedMethod.trim():"",a=s==="rest_pause"||s==="drop_set"?s:"",u=typeof t.advancedMethodNotes=="string"?t.advancedMethodNotes:"",h=typeof t.restPauseNotes=="string"?t.restPauseNotes:a==="rest_pause"?u:"",f=typeof t.dropSetNotes=="string"?t.dropSetNotes:a==="drop_set"?u:"",m=typeof t.mediaUrl=="string"?t.mediaUrl.trim():"",_=typeof t.videoUrl=="string"?t.videoUrl.trim():"",E=typeof t.imageUrl=="string"?t.imageUrl.trim():"",w=_||(wm(m)||vI(m)?m:""),P=E||(Em(m)?m:"");return{name:typeof t.name=="string"?t.name:"",notes:typeof t.notes=="string"?t.notes:"",advancedMethod:a,advancedMethodNotes:u,restPauseNotes:h,dropSetNotes:f,sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,workValue:typeof t.workValue=="number"?t.workValue:Number(t.workValue??t.reps??0)||0,weightKg:typeof t.weightKg=="number"?t.weightKg:Number(t.weightKg??r??0)||0,restSeconds:typeof t.restSeconds=="number"?t.restSeconds:Number(t.restSeconds??0)||0,videoUrl:w,imageUrl:P,mediaUrl:m||w||P}}).filter(e=>!!e):[]}function h0(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function J2(n){n.currentTarget.select()}function Z2(n){return n?n==="0"?"0":n.replace(/^0+(?=\d)/,""):""}function eM(n,e){const r=(n.clientWeightOverrides&&typeof n.clientWeightOverrides=="object"?n.clientWeightOverrides:{})[e];if(!r||typeof r!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const s=n.exercises.map((a,u)=>{if(!a||typeof a!="object")return a;const h=r[String(u)];return Number.isFinite(Number(h))?{...a,weightKg:Number(h)}:a});return{...n,exercises:s}}function tM(n,e){const t=e[n.id];if(!t||typeof t!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const r=n.exercises.map((s,a)=>{if(!s||typeof s!="object")return s;const u=t[String(a)];return Number.isFinite(Number(u))?{...s,weightKg:Number(u)}:s});return{...n,exercises:r}}function nM(){const{role:n,user:e}=na(),t=dl(),{showError:r,showSuccess:s}=rh(),[a,u]=O.useState([]),[h,f]=O.useState(!1),[m,_]=O.useState(!0),[E,w]=O.useState(null),[P,D]=O.useState(!1),[x,b]=O.useState(null),[z,Q]=O.useState("plan"),[K,Z]=O.useState(""),[W,ne]=O.useState(!1),[N,A]=O.useState(!1),[R,V]=O.useState(""),[j,L]=O.useState({}),[k,fe]=O.useState({}),[be,Ue]=O.useState(""),[Ve,ae]=O.useState(""),_e="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";O.useEffect(()=>{async function ie(){if(e)try{const ot=(await Ya(e.uid)).data();if(!(ot!=null&&ot.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{_(!1)}}ie()},[e,t]);async function de(){f(!0);try{const ie=(e==null?void 0:e.uid)??"";if(!ie){u([]),Z("");return}const qe=ie?await Ya(ie):null,ot=(qe==null?void 0:qe.data())??{},rt=ie?await dI(ie,"onboarding"):null;try{await S2()}catch{}const at=ie?await O2():null,Pt=((at==null?void 0:at.data())??{}).weights??{};L(Pt),b((rt==null?void 0:rt.data())??null);let it=h0(ot.assignedCoachPhone??"");if(!it&&ot.assignedCoachId)try{const dt=(await Ya(ot.assignedCoachId)).data();it=h0(typeof(dt==null?void 0:dt.phone)=="string"?dt.phone:"")}catch{it=""}V(it);const Zt=new Map;let pt=!1;try{const et=await w2();if(et!=null&&et.ok&&Array.isArray(et.plans))for(const dt of et.plans)Zt.set(dt.id,dt)}catch{pt=!0}if(pt)try{const et=await hI("client",ie);for(const dt of Q2(et.docs))Zt.set(dt.id,dt)}catch(et){r(`Errore caricamento schede: ${kt(et)}`)}const Vt=Array.from(Zt.values()).map(et=>eM(et,ie)).map(et=>tM(et,Pt)).sort((et,dt)=>{const Hr=new Date(String(et.updatedAt??"")).getTime()||0;return(new Date(String(dt.updatedAt??"")).getTime()||0)-Hr});u(Vt),Vt.length>0&&Object.keys(Pt).length>0&&B(Vt,Pt),Vt.length>0?Z(et=>et&&Vt.some(dt=>dt.id===et)?et:Vt[0].id):Z("")}catch(ie){r(kt(ie))}finally{f(!1)}}async function B(ie,qe){const ot=new Set(ie.map(at=>at.id)),rt=[];for(const[at,zt]of Object.entries(qe))if(ot.has(at)&&!(!zt||typeof zt!="object"))for(const[Pt,it]of Object.entries(zt)){const Zt=Number(Pt),pt=Number(it);!Number.isInteger(Zt)||Zt<0||!Number.isFinite(pt)||pt<0||rt.push(s0(at,Zt,pt))}rt.length!==0&&await Promise.allSettled(rt)}O.useEffect(()=>{e&&(n==="client"||n===null)&&de()},[n,e==null?void 0:e.uid]);async function U(){A(!0);try{await aI(),await Sr().catch(()=>{}),t("/auth",{replace:!0})}catch(ie){r(kt(ie))}finally{A(!1),ne(!1)}}function pe(ie,qe){w({url:ie,label:qe}),D(Em(ie))}const ve=a.find(ie=>ie.id===K)??a[0],Re=Cp(ve==null?void 0:ve.exercises),le=R.length>6,je=le?mI(_e,R):"#",Me=[{label:"Nome e cognome",value:x==null?void 0:x.fullName},{label:"E-mail",value:(x==null?void 0:x.email)??(e==null?void 0:e.email)},{label:"Telefono",value:x==null?void 0:x.phone},{label:"Et",value:x==null?void 0:x.age},{label:"Sesso",value:x==null?void 0:x.sex},{label:"Altezza",value:x!=null&&x.heightCm?`${x.heightCm} cm`:""},{label:"Peso",value:x!=null&&x.weightKg?`${x.weightKg} kg`:""},{label:"Obiettivo",value:x==null?void 0:x.objectivePrimary}].filter(ie=>(ie.value??"").toString().trim().length>0);O.useEffect(()=>{const ie={};for(const qe of a)Cp(qe.exercises).forEach((rt,at)=>{ie[`${qe.id}:${at}`]=String(rt.weightKg||0)});fe(ie)},[a]);async function Ge(ie,qe,ot){const rt=`${ie}:${qe}`,at=(k[rt]??String(ot)).trim();if(!at){r("Inserisci un peso valido (numero >= 0).");return}const zt=Number(at);if(!Number.isFinite(zt)||zt<0){r("Inserisci un peso valido (numero >= 0).");return}Ue(rt);try{try{await D2(ie,qe,zt)}catch{}L(Pt=>({...Pt,[ie]:{...Pt[ie]??{},[String(qe)]:zt}})),await s0(ie,qe,zt),u(Pt=>Pt.map(it=>{if(it.id!==ie)return it;const pt=Cp(it.exercises).map((Vt,et)=>et===qe?{...Vt,weightKg:zt}:Vt);return{...it,exercises:pt}})),fe(Pt=>({...Pt,[rt]:String(zt)})),ae(""),s("Peso aggiornato.")}catch(Pt){r(kt(Pt))}finally{Ue("")}}function St(ie,qe,ot){const rt=`${ie}:${qe}`;fe(at=>({...at,[rt]:at[rt]??String(ot||0)})),ae(rt)}return e?m?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Prepariamo la tua area"}),g.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):g.jsxs(gI,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:z,onSectionChange:ie=>Q(ie),headerAction:g.jsx("div",{className:"mobile-only",children:g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:je,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[z==="plan"?g.jsxs(g.Fragment,{children:[g.jsxs("article",{className:"card desktop-only",children:[g.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),g.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:je,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),le?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."})]}),g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"La tua scheda tecnica"}),ve?g.jsxs(g.Fragment,{children:[a.length>1?g.jsxs("label",{children:["Scegli scheda",g.jsx("select",{value:ve.id,onChange:ie=>Z(ie.target.value),children:a.map(ie=>g.jsx("option",{value:ie.id,children:ie.title||"Scheda senza titolo"},ie.id))})]}):null,g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Programma attivo"}),g.jsx("h3",{children:ve.title})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:ve.kind==="circuit"?"Circuito":"Serie e reps"})]}),(ve.warmup??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",ve.warmup]})}):null,(ve.notes??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",ve.notes]})}):null,g.jsx("div",{className:"exercise-grid",children:Re.map((ie,qe)=>g.jsxs("article",{className:"exercise-card",children:[g.jsx("p",{className:"exercise-name",children:ie.name||`Esercizio ${qe+1}`}),g.jsxs("div",{className:"exercise-meta",children:[ve.kind==="circuit"?g.jsxs("span",{children:[ie.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[ie.sets??"-"," serie"]}),g.jsxs("span",{children:[ie.reps||"-"," reps"]})]}),g.jsxs("span",{children:[ie.weightKg||0," kg"]}),g.jsxs("span",{children:[ie.restSeconds||0," sec recupero"]})]}),ie.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",ie.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,ie.advancedMethod&&(ie.advancedMethod==="rest_pause"?ie.restPauseNotes:ie.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",ie.advancedMethod==="rest_pause"?ie.restPauseNotes:ie.dropSetNotes]}):null,(()=>{const ot=`${ve.id}:${qe}`,rt=Ve===ot,at=be===ot;return rt?g.jsxs("div",{className:"exercise-weight-edit-row",children:[g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",onFocus:J2,value:k[ot]??String(ie.weightKg||0),onChange:zt=>fe(Pt=>({...Pt,[ot]:Z2(zt.target.value)}))})]}),g.jsxs("div",{className:"exercise-weight-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:at,onClick:()=>ae(""),children:"Annulla"}),g.jsx("button",{className:"btn",type:"button",disabled:at,onClick:()=>void Ge(ve.id,qe,ie.weightKg||0),children:at?"Salvataggio...":"Salva"})]})]}):g.jsxs("div",{className:"exercise-weight-readonly",children:[g.jsxs("div",{children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:"Peso (kg)"})}),g.jsx("p",{className:"exercise-weight-value",children:ie.weightKg||0})]}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica peso esercizio",title:"Modifica peso",onClick:()=>St(ve.id,qe,ie.weightKg||0),children:""})]})})(),ie.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",ie.notes]}):null,ie.videoUrl||ie.imageUrl?g.jsxs(g.Fragment,{children:[ie.videoUrl?g.jsx("button",{className:"btn-link",type:"button",onClick:()=>pe(ie.videoUrl,ie.name||`Esercizio ${qe+1}`),children:"Apri video"}):null,ie.imageUrl?g.jsx("button",{className:"btn-link",type:"button",onClick:()=>pe(ie.imageUrl,ie.name||`Esercizio ${qe+1}`),children:"Apri immagine"}):null]}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${qe}`))})]}):g.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,z==="profile"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Profilo e anagrafica"}),Me.length>0?g.jsx("div",{className:"client-info-block",children:Me.map(ie=>g.jsxs("p",{className:"hint",children:[g.jsxs("strong",{children:[ie.label,":"]})," ",ie.value]},ie.label))}):g.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:je,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),le?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo perderai tutti i dati associati al tuo account, in linea con le policy aziendali."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>ne(!0),children:"Elimina il mio profilo"})]}):null,h?g.jsx("section",{className:"modal-overlay",role:"status","aria-live":"polite","aria-label":"Caricamento in corso",children:g.jsxs("article",{className:"card loading-overlay-card",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("p",{className:"hint",children:"Caricamento scheda..."})]})}):null,E?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ie=>{ie.currentTarget===ie.target&&(w(null),D(!1))},children:g.jsxs("article",{className:"card modal-card",onClick:ie=>ie.stopPropagation(),children:[g.jsx("h2",{children:E.label}),wm(E.url)?g.jsx("iframe",{title:E.label,src:wm(E.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Em(E.url)?g.jsxs(g.Fragment,{children:[P?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:E.url,alt:E.label,className:"media-frame media-image",style:{display:P?"none":"block"},onLoad:()=>D(!1),onError:()=>D(!1)})]}):vI(E.url)?g.jsx("video",{src:E.url,controls:!0,className:"media-frame"}):g.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",g.jsx("a",{href:E.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{w(null),D(!1)},children:"Chiudi"})]})}):null,W?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ie=>ie.currentTarget===ie.target&&ne(!1),children:g.jsxs("article",{className:"card modal-card",onClick:ie=>ie.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente account, anagrafica, scheda e dati collegati."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:N,onClick:()=>ne(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:N,onClick:()=>void U(),children:N?"Eliminazione...":"Conferma eliminazione"})]})]})}):null]}):g.jsx(Tr,{to:"/auth",replace:!0})}function Xo(n){"@babel/helpers - typeof";return Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(n)}function rM(n,e){if(Xo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Xo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yI(n){var e=rM(n,"string");return Xo(e)=="symbol"?e:e+""}function uu(n,e,t){return(e=yI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f0(Object(t),!0).forEach(function(r){uu(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iM(n){if(Array.isArray(n))return n}function sM(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,h=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(h.push(r.value),h.length!==e);f=!0);}catch(_){m=!0,s=_}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return h}}function Sm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function _I(n,e){if(n){if(typeof n=="string")return Sm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Sm(n,e):void 0}}function oM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(n,e){return iM(n)||sM(n,e)||_I(n,e)||oM()}function aM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Ss(n,e){if(n==null)return{};var t,r,s=aM(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var lM=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function uM(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,h=n.inputValue,f=n.menuIsOpen,m=n.onChange,_=n.onInputChange,E=n.onMenuClose,w=n.onMenuOpen,P=n.value,D=Ss(n,lM),x=O.useState(h!==void 0?h:t),b=fs(x,2),z=b[0],Q=b[1],K=O.useState(f!==void 0?f:s),Z=fs(K,2),W=Z[0],ne=Z[1],N=O.useState(P!==void 0?P:u),A=fs(N,2),R=A[0],V=A[1],j=O.useCallback(function(ae,_e){typeof m=="function"&&m(ae,_e),V(ae)},[m]),L=O.useCallback(function(ae,_e){var de;typeof _=="function"&&(de=_(ae,_e)),Q(de!==void 0?de:ae)},[_]),k=O.useCallback(function(){typeof w=="function"&&w(),ne(!0)},[w]),fe=O.useCallback(function(){typeof E=="function"&&E(),ne(!1)},[E]),be=h!==void 0?h:z,Ue=f!==void 0?f:W,Ve=P!==void 0?P:R;return Ne(Ne({},D),{},{inputValue:be,menuIsOpen:Ue,onChange:j,onInputChange:L,onMenuClose:fe,onMenuOpen:k,value:Ve})}function Oe(){return Oe=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oe.apply(null,arguments)}function cM(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function p0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,yI(r.key),r)}}function dM(n,e,t){return e&&p0(n.prototype,e),t&&p0(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Tm(n,e){return Tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Tm(n,e)}function hM(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Tm(n,e)}function Gd(n){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gd(n)}function wI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wI=function(){return!!n})()}function fM(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pM(n,e){if(e&&(Xo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fM(n)}function mM(n){var e=wI();return function(){var t,r=Gd(n);if(e){var s=Gd(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return pM(this,t)}}function gM(n){if(Array.isArray(n))return Sm(n)}function vM(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fg(n){return gM(n)||vM(n)||_I(n)||yM()}function _M(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function wM(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var EM=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wM(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=_M(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),An="-ms-",Qd="-moz-",ut="-webkit-",EI="comm",Ug="rule",zg="decl",SM="@import",SI="@keyframes",TM="@layer",IM=Math.abs,Nh=String.fromCharCode,bM=Object.assign;function CM(n,e){return yn(n,0)^45?(((e<<2^yn(n,0))<<2^yn(n,1))<<2^yn(n,2))<<2^yn(n,3):0}function TI(n){return n.trim()}function PM(n,e){return(n=e.exec(n))?n[0]:n}function ct(n,e,t){return n.replace(e,t)}function Im(n,e){return n.indexOf(e)}function yn(n,e){return n.charCodeAt(e)|0}function Au(n,e,t){return n.slice(e,t)}function xi(n){return n.length}function $g(n){return n.length}function sd(n,e){return e.push(n),n}function AM(n,e){return n.map(e).join("")}var Oh=1,ul=1,II=0,hr=0,Qt=0,El="";function Dh(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:Oh,column:ul,length:u,return:""}}function tu(n,e){return bM(Dh("",null,null,"",null,null,0),n,{length:-n.length},e)}function RM(){return Qt}function xM(){return Qt=hr>0?yn(El,--hr):0,ul--,Qt===10&&(ul=1,Oh--),Qt}function Ir(){return Qt=hr<II?yn(El,hr++):0,ul++,Qt===10&&(ul=1,Oh++),Qt}function Li(){return yn(El,hr)}function Ed(){return hr}function Ku(n,e){return Au(El,n,e)}function Ru(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bI(n){return Oh=ul=1,II=xi(El=n),hr=0,[]}function CI(n){return El="",n}function Sd(n){return TI(Ku(hr-1,bm(n===91?n+2:n===40?n+1:n)))}function kM(n){for(;(Qt=Li())&&Qt<33;)Ir();return Ru(n)>2||Ru(Qt)>3?"":" "}function NM(n,e){for(;--e&&Ir()&&!(Qt<48||Qt>102||Qt>57&&Qt<65||Qt>70&&Qt<97););return Ku(n,Ed()+(e<6&&Li()==32&&Ir()==32))}function bm(n){for(;Ir();)switch(Qt){case n:return hr;case 34:case 39:n!==34&&n!==39&&bm(Qt);break;case 40:n===41&&bm(n);break;case 92:Ir();break}return hr}function OM(n,e){for(;Ir()&&n+Qt!==57;)if(n+Qt===84&&Li()===47)break;return"/*"+Ku(e,hr-1)+"*"+Nh(n===47?n:Ir())}function DM(n){for(;!Ru(Li());)Ir();return Ku(n,hr)}function MM(n){return CI(Td("",null,null,null,[""],n=bI(n),0,[0],n))}function Td(n,e,t,r,s,a,u,h,f){for(var m=0,_=0,E=u,w=0,P=0,D=0,x=1,b=1,z=1,Q=0,K="",Z=s,W=a,ne=r,N=K;b;)switch(D=Q,Q=Ir()){case 40:if(D!=108&&yn(N,E-1)==58){Im(N+=ct(Sd(Q),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:N+=Sd(Q);break;case 9:case 10:case 13:case 32:N+=kM(D);break;case 92:N+=NM(Ed()-1,7);continue;case 47:switch(Li()){case 42:case 47:sd(VM(OM(Ir(),Ed()),e,t),f);break;default:N+="/"}break;case 123*x:h[m++]=xi(N)*z;case 125*x:case 59:case 0:switch(Q){case 0:case 125:b=0;case 59+_:z==-1&&(N=ct(N,/\f/g,"")),P>0&&xi(N)-E&&sd(P>32?g0(N+";",r,t,E-1):g0(ct(N," ","")+";",r,t,E-2),f);break;case 59:N+=";";default:if(sd(ne=m0(N,e,t,m,_,s,h,K,Z=[],W=[],E),a),Q===123)if(_===0)Td(N,e,ne,ne,Z,a,E,h,W);else switch(w===99&&yn(N,3)===110?100:w){case 100:case 108:case 109:case 115:Td(n,ne,ne,r&&sd(m0(n,ne,ne,0,0,s,h,K,s,Z=[],E),W),s,W,E,h,r?Z:W);break;default:Td(N,ne,ne,ne,[""],W,0,h,W)}}m=_=P=0,x=z=1,K=N="",E=u;break;case 58:E=1+xi(N),P=D;default:if(x<1){if(Q==123)--x;else if(Q==125&&x++==0&&xM()==125)continue}switch(N+=Nh(Q),Q*x){case 38:z=_>0?1:(N+="\f",-1);break;case 44:h[m++]=(xi(N)-1)*z,z=1;break;case 64:Li()===45&&(N+=Sd(Ir())),w=Li(),_=E=xi(K=N+=DM(Ed())),Q++;break;case 45:D===45&&xi(N)==2&&(x=0)}}return a}function m0(n,e,t,r,s,a,u,h,f,m,_){for(var E=s-1,w=s===0?a:[""],P=$g(w),D=0,x=0,b=0;D<r;++D)for(var z=0,Q=Au(n,E+1,E=IM(x=u[D])),K=n;z<P;++z)(K=TI(x>0?w[z]+" "+Q:ct(Q,/&\f/g,w[z])))&&(f[b++]=K);return Dh(n,e,t,s===0?Ug:h,f,m,_)}function VM(n,e,t){return Dh(n,e,t,EI,Nh(RM()),Au(n,2,-2),0)}function g0(n,e,t,r){return Dh(n,e,t,zg,Au(n,0,r),Au(n,r+1,-1),r)}function Ja(n,e){for(var t="",r=$g(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function jM(n,e,t,r){switch(n.type){case TM:if(n.children.length)break;case SM:case zg:return n.return=n.return||n.value;case EI:return"";case SI:return n.return=n.value+"{"+Ja(n.children,r)+"}";case Ug:n.value=n.props.join(",")}return xi(t=Ja(n.children,r))?n.return=n.value+"{"+t+"}":""}function LM(n){var e=$g(n);return function(t,r,s,a){for(var u="",h=0;h<e;h++)u+=n[h](t,r,s,a)||"";return u}}function FM(n){return function(e){e.root||(e=e.return)&&n(e)}}function UM(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var zM=function(e,t,r){for(var s=0,a=0;s=a,a=Li(),s===38&&a===12&&(t[r]=1),!Ru(a);)Ir();return Ku(e,hr)},$M=function(e,t){var r=-1,s=44;do switch(Ru(s)){case 0:s===38&&Li()===12&&(t[r]=1),e[r]+=zM(hr-1,t,r);break;case 2:e[r]+=Sd(s);break;case 4:if(s===44){e[++r]=Li()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Nh(s)}while(s=Ir());return e},BM=function(e,t){return CI($M(bI(e),t))},v0=new WeakMap,WM=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!v0.get(r))&&!s){v0.set(e,!0);for(var a=[],u=BM(t,a),h=r.props,f=0,m=0;f<u.length;f++)for(var _=0;_<h.length;_++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,h[_]):h[_]+" "+u[f]}}},HM=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function PI(n,e){switch(CM(n,e)){case 5103:return ut+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ut+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ut+n+Qd+n+An+n+n;case 6828:case 4268:return ut+n+An+n+n;case 6165:return ut+n+An+"flex-"+n+n;case 5187:return ut+n+ct(n,/(\w+).+(:[^]+)/,ut+"box-$1$2"+An+"flex-$1$2")+n;case 5443:return ut+n+An+"flex-item-"+ct(n,/flex-|-self/,"")+n;case 4675:return ut+n+An+"flex-line-pack"+ct(n,/align-content|flex-|-self/,"")+n;case 5548:return ut+n+An+ct(n,"shrink","negative")+n;case 5292:return ut+n+An+ct(n,"basis","preferred-size")+n;case 6060:return ut+"box-"+ct(n,"-grow","")+ut+n+An+ct(n,"grow","positive")+n;case 4554:return ut+ct(n,/([^-])(transform)/g,"$1"+ut+"$2")+n;case 6187:return ct(ct(ct(n,/(zoom-|grab)/,ut+"$1"),/(image-set)/,ut+"$1"),n,"")+n;case 5495:case 3959:return ct(n,/(image-set\([^]*)/,ut+"$1$`$1");case 4968:return ct(ct(n,/(.+:)(flex-)?(.*)/,ut+"box-pack:$3"+An+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ut+n+n;case 4095:case 3583:case 4068:case 2532:return ct(n,/(.+)-inline(.+)/,ut+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xi(n)-1-e>6)switch(yn(n,e+1)){case 109:if(yn(n,e+4)!==45)break;case 102:return ct(n,/(.+:)(.+)-([^]+)/,"$1"+ut+"$2-$3$1"+Qd+(yn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Im(n,"stretch")?PI(ct(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(yn(n,e+1)!==115)break;case 6444:switch(yn(n,xi(n)-3-(~Im(n,"!important")&&10))){case 107:return ct(n,":",":"+ut)+n;case 101:return ct(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ut+(yn(n,14)===45?"inline-":"")+"box$3$1"+ut+"$2$3$1"+An+"$2box$3")+n}break;case 5936:switch(yn(n,e+11)){case 114:return ut+n+An+ct(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ut+n+An+ct(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ut+n+An+ct(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ut+n+An+n+n}return n}var qM=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case zg:e.return=PI(e.value,e.length);break;case SI:return Ja([tu(e,{value:ct(e.value,"@","@"+ut)})],s);case Ug:if(e.length)return AM(e.props,function(a){switch(PM(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ja([tu(e,{props:[ct(a,/:(read-\w+)/,":"+Qd+"$1")]})],s);case"::placeholder":return Ja([tu(e,{props:[ct(a,/:(plac\w+)/,":"+ut+"input-$1")]}),tu(e,{props:[ct(a,/:(plac\w+)/,":"+Qd+"$1")]}),tu(e,{props:[ct(a,/:(plac\w+)/,An+"input-$1")]})],s)}return""})}},KM=[qM],GM=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(x){var b=x.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var s=e.stylisPlugins||KM,a={},u,h=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(x){for(var b=x.getAttribute("data-emotion").split(" "),z=1;z<b.length;z++)a[b[z]]=!0;h.push(x)});var f,m=[WM,HM];{var _,E=[jM,FM(function(x){_.insert(x)})],w=LM(m.concat(s,E)),P=function(b){return Ja(MM(b),w)};f=function(b,z,Q,K){_=Q,P(b?b+"{"+z.styles+"}":z.styles),K&&(D.inserted[z.name]=!0)}}var D={key:t,sheet:new EM({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return D.sheet.hydrate(h),D},Pp={exports:{}},ht={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function QM(){if(y0)return ht;y0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,E=n?Symbol.for("react.suspense"):60113,w=n?Symbol.for("react.suspense_list"):60120,P=n?Symbol.for("react.memo"):60115,D=n?Symbol.for("react.lazy"):60116,x=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,z=n?Symbol.for("react.responder"):60118,Q=n?Symbol.for("react.scope"):60119;function K(W){if(typeof W=="object"&&W!==null){var ne=W.$$typeof;switch(ne){case e:switch(W=W.type,W){case f:case m:case r:case a:case s:case E:return W;default:switch(W=W&&W.$$typeof,W){case h:case _:case D:case P:case u:return W;default:return ne}}case t:return ne}}}function Z(W){return K(W)===m}return ht.AsyncMode=f,ht.ConcurrentMode=m,ht.ContextConsumer=h,ht.ContextProvider=u,ht.Element=e,ht.ForwardRef=_,ht.Fragment=r,ht.Lazy=D,ht.Memo=P,ht.Portal=t,ht.Profiler=a,ht.StrictMode=s,ht.Suspense=E,ht.isAsyncMode=function(W){return Z(W)||K(W)===f},ht.isConcurrentMode=Z,ht.isContextConsumer=function(W){return K(W)===h},ht.isContextProvider=function(W){return K(W)===u},ht.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===e},ht.isForwardRef=function(W){return K(W)===_},ht.isFragment=function(W){return K(W)===r},ht.isLazy=function(W){return K(W)===D},ht.isMemo=function(W){return K(W)===P},ht.isPortal=function(W){return K(W)===t},ht.isProfiler=function(W){return K(W)===a},ht.isStrictMode=function(W){return K(W)===s},ht.isSuspense=function(W){return K(W)===E},ht.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===r||W===m||W===a||W===s||W===E||W===w||typeof W=="object"&&W!==null&&(W.$$typeof===D||W.$$typeof===P||W.$$typeof===u||W.$$typeof===h||W.$$typeof===_||W.$$typeof===b||W.$$typeof===z||W.$$typeof===Q||W.$$typeof===x)},ht.typeOf=K,ht}var _0;function XM(){return _0||(_0=1,Pp.exports=QM()),Pp.exports}var Ap,w0;function YM(){if(w0)return Ap;w0=1;var n=XM(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(D){return n.isMemo(D)?s:a[D.$$typeof]||e}var h=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,w=Object.prototype;function P(D,x,b){if(typeof x!="string"){if(w){var z=E(x);z&&z!==w&&P(D,z,b)}var Q=f(x);m&&(Q=Q.concat(m(x)));for(var K=u(D),Z=u(x),W=0;W<Q.length;++W){var ne=Q[W];if(!t[ne]&&!(b&&b[ne])&&!(Z&&Z[ne])&&!(K&&K[ne])){var N=_(x,ne);try{h(D,ne,N)}catch{}}}}return D}return Ap=P,Ap}YM();var JM=!0;function ZM(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var AI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||JM===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},eV=function(e,t,r){AI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function tV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var nV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rV=/[A-Z]|^ms/g,iV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RI=function(e){return e.charCodeAt(1)===45},E0=function(e){return e!=null&&typeof e!="boolean"},Rp=UM(function(n){return RI(n)?n:n.replace(rV,"-$&").toLowerCase()}),S0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(iV,function(r,s,a){return ki={name:s,styles:a,next:ki},s})}return nV[e]!==1&&!RI(e)&&typeof t=="number"&&t!==0?t+"px":t};function xu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return ki={name:s.name,styles:s.styles,next:ki},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)ki={name:u.name,styles:u.styles,next:ki},u=u.next;var h=a.styles+";";return h}return sV(n,e,t)}case"function":{if(n!==void 0){var f=ki,m=t(n);return ki=f,xu(n,e,m)}break}}var _=t;return _}function sV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=xu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var h=u;E0(h)&&(r+=Rp(a)+":"+S0(a,h)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)E0(u[f])&&(r+=Rp(a)+":"+S0(a,u[f])+";");else{var m=xu(n,e,u);switch(a){case"animation":case"animationName":{r+=Rp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var T0=/label:\s*([^\s;{]+)\s*(;|$)/g,ki;function xI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";ki=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=xu(t,e,a);else{var u=a;s+=u[0]}for(var h=1;h<n.length;h++)if(s+=xu(t,e,n[h]),r){var f=a;s+=f[h]}T0.lastIndex=0;for(var m="",_;(_=T0.exec(s))!==null;)m+="-"+_[1];var E=tV(s)+m;return{name:E,styles:s,next:ki}}var oV=function(e){return e()},aV=Fp.useInsertionEffect?Fp.useInsertionEffect:!1,lV=aV||oV,kI=O.createContext(typeof HTMLElement<"u"?GM({key:"css"}):null);kI.Provider;var uV=function(e){return O.forwardRef(function(t,r){var s=O.useContext(kI);return e(t,s,r)})},cV=O.createContext({}),Bg={}.hasOwnProperty,Cm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dV=function(e,t){var r={};for(var s in t)Bg.call(t,s)&&(r[s]=t[s]);return r[Cm]=e,r},hV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return AI(t,r,s),lV(function(){return eV(t,r,s)}),null},fV=uV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[Cm],a=[r],u="";typeof n.className=="string"?u=ZM(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var h=xI(a,void 0,O.useContext(cV));u+=e.key+"-"+h.name;var f={};for(var m in n)Bg.call(n,m)&&m!=="css"&&m!==Cm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),O.createElement(O.Fragment,null,O.createElement(hV,{cache:e,serialized:h,isStringTag:typeof s=="string"}),O.createElement(s,f))}),pV=fV,Pe=function(e,t){var r=arguments;if(t==null||!Bg.call(t,"css"))return O.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=pV,a[1]=dV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return O.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Pe||(Pe={}));function Wg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return xI(e)}function mV(){var n=Wg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function gV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const vV=Math.min,yV=Math.max,Xd=Math.round,od=Math.floor,Yd=n=>({x:n,y:n});function _V(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Mh(){return typeof window<"u"}function NI(n){return DI(n)?(n.nodeName||"").toLowerCase():"#document"}function ws(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function OI(n){var e;return(e=(DI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function DI(n){return Mh()?n instanceof Node||n instanceof ws(n).Node:!1}function wV(n){return Mh()?n instanceof Element||n instanceof ws(n).Element:!1}function Hg(n){return Mh()?n instanceof HTMLElement||n instanceof ws(n).HTMLElement:!1}function I0(n){return!Mh()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ws(n).ShadowRoot}const EV=new Set(["inline","contents"]);function MI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=qg(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!EV.has(s)}function SV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TV=new Set(["html","body","#document"]);function IV(n){return TV.has(NI(n))}function qg(n){return ws(n).getComputedStyle(n)}function bV(n){if(NI(n)==="html")return n;const e=n.assignedSlot||n.parentNode||I0(n)&&n.host||OI(n);return I0(e)?e.host:e}function VI(n){const e=bV(n);return IV(e)?n.ownerDocument?n.ownerDocument.body:n.body:Hg(e)&&MI(e)?e:VI(e)}function Jd(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=VI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=ws(s);if(a){const h=Pm(u);return e.concat(u,u.visualViewport||[],MI(s)?s:[],h&&t?Jd(h):[])}return e.concat(s,Jd(s,[],t))}function Pm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function CV(n){const e=qg(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Hg(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,h=Xd(t)!==a||Xd(r)!==u;return h&&(t=a,r=u),{width:t,height:r,$:h}}function Kg(n){return wV(n)?n:n.contextElement}function b0(n){const e=Kg(n);if(!Hg(e))return Yd(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=CV(e);let u=(a?Xd(t.width):t.width)/r,h=(a?Xd(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!h||!Number.isFinite(h))&&(h=1),{x:u,y:h}}const PV=Yd(0);function AV(n){const e=ws(n);return!SV()||!e.visualViewport?PV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RV(n,e,t){return!1}function C0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=Kg(n);let u=Yd(1);e&&(u=b0(n));const h=RV()?AV(a):Yd(0);let f=(s.left+h.x)/u.x,m=(s.top+h.y)/u.y,_=s.width/u.x,E=s.height/u.y;if(a){const w=ws(a),P=r;let D=w,x=Pm(D);for(;x&&r&&P!==D;){const b=b0(x),z=x.getBoundingClientRect(),Q=qg(x),K=z.left+(x.clientLeft+parseFloat(Q.paddingLeft))*b.x,Z=z.top+(x.clientTop+parseFloat(Q.paddingTop))*b.y;f*=b.x,m*=b.y,_*=b.x,E*=b.y,f+=K,m+=Z,D=ws(x),x=Pm(D)}}return _V({width:_,height:E,x:f,y:m})}function jI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function xV(n,e){let t=null,r;const s=OI(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function u(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:_,top:E,width:w,height:P}=m;if(h||e(),!w||!P)return;const D=od(E),x=od(s.clientWidth-(_+w)),b=od(s.clientHeight-(E+P)),z=od(_),K={rootMargin:-D+"px "+-x+"px "+-b+"px "+-z+"px",threshold:yV(0,vV(1,f))||1};let Z=!0;function W(ne){const N=ne[0].intersectionRatio;if(N!==f){if(!Z)return u();N?u(!1,N):r=setTimeout(()=>{u(!1,1e-7)},1e3)}N===1&&!jI(m,n.getBoundingClientRect())&&u(),Z=!1}try{t=new IntersectionObserver(W,{...K,root:s.ownerDocument})}catch{t=new IntersectionObserver(W,K)}t.observe(n)}return u(!0),a}function kV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Kg(n),_=s||a?[...m?Jd(m):[],...Jd(e)]:[];_.forEach(z=>{s&&z.addEventListener("scroll",t,{passive:!0}),a&&z.addEventListener("resize",t)});const E=m&&h?xV(m,t):null;let w=-1,P=null;u&&(P=new ResizeObserver(z=>{let[Q]=z;Q&&Q.target===m&&P&&(P.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var K;(K=P)==null||K.observe(e)})),t()}),m&&!f&&P.observe(m),P.observe(e));let D,x=f?C0(n):null;f&&b();function b(){const z=C0(n);x&&!jI(x,z)&&t(),x=z,D=requestAnimationFrame(b)}return t(),()=>{var z;_.forEach(Q=>{s&&Q.removeEventListener("scroll",t),a&&Q.removeEventListener("resize",t)}),E==null||E(),(z=P)==null||z.disconnect(),P=null,f&&cancelAnimationFrame(D)}}var Am=O.useLayoutEffect,NV=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Zd=function(){};function OV(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function DV(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(OV(n,u)));return a.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var P0=function(e){return BV(e)?e.filter(Boolean):Xo(e)==="object"&&e!==null?[e]:[]},LI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Ss(e,NV);return Ne({},t)},Lt=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,h=e.className;return{css:a(t,e),className:s(r??{},u(t,e),h)}};function Vh(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function MV(n){return Vh(n)?window.innerHeight:n.clientHeight}function FI(n){return Vh(n)?window.pageYOffset:n.scrollTop}function eh(n,e){if(Vh(n)){window.scrollTo(0,e);return}n.scrollTop=e}function VV(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function jV(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function ad(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Zd,s=FI(n),a=e-s,u=10,h=0;function f(){h+=u;var m=jV(h,s,a,t);eh(n,m),h<t?window.requestAnimationFrame(f):r(n)}f()}function A0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?eh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&eh(n,Math.max(e.offsetTop-s,0))}function LV(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function R0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function FV(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var UI=!1,UV={get passive(){return UI=!0}},ld=typeof window<"u"?window:{};ld.addEventListener&&ld.removeEventListener&&(ld.addEventListener("p",Zd,UV),ld.removeEventListener("p",Zd,!1));var zV=UI;function $V(n){return n!=null}function BV(n){return Array.isArray(n)}function ud(n,e,t){return n?e:t}var WV=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var h=fs(u,1),f=h[0];return!r.includes(f)});return a.reduce(function(u,h){var f=fs(h,2),m=f[0],_=f[1];return u[m]=_,u},{})},HV=["children","innerProps"],qV=["children","innerProps"];function KV(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,h=n.controlHeight,f=VV(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var _=f.getBoundingClientRect(),E=_.height,w=t.getBoundingClientRect(),P=w.bottom,D=w.height,x=w.top,b=t.offsetParent.getBoundingClientRect(),z=b.top,Q=u?window.innerHeight:MV(f),K=FI(f),Z=parseInt(getComputedStyle(t).marginBottom,10),W=parseInt(getComputedStyle(t).marginTop,10),ne=z-W,N=Q-x,A=ne+K,R=E-K-x,V=P-Q+K+Z,j=K+x-W,L=160;switch(s){case"auto":case"bottom":if(N>=D)return{placement:"bottom",maxHeight:e};if(R>=D&&!u)return a&&ad(f,V,L),{placement:"bottom",maxHeight:e};if(!u&&R>=r||u&&N>=r){a&&ad(f,V,L);var k=u?N-Z:R-Z;return{placement:"bottom",maxHeight:k}}if(s==="auto"||u){var fe=e,be=u?ne:A;return be>=r&&(fe=Math.min(be-Z-h,e)),{placement:"top",maxHeight:fe}}if(s==="bottom")return a&&eh(f,V),{placement:"bottom",maxHeight:e};break;case"top":if(ne>=D)return{placement:"top",maxHeight:e};if(A>=D&&!u)return a&&ad(f,j,L),{placement:"top",maxHeight:e};if(!u&&A>=r||u&&ne>=r){var Ue=e;return(!u&&A>=r||u&&ne>=r)&&(Ue=u?ne-W:A-W),a&&ad(f,j,L),{placement:"top",maxHeight:Ue}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function GV(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var zI=function(e){return e==="auto"?"bottom":e},QV=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,h=a.spacing,f=a.colors;return Ne((r={label:"menu"},uu(r,GV(s),"100%"),uu(r,"position","absolute"),uu(r,"width","100%"),uu(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},$I=O.createContext(null),XV=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,h=e.menuShouldScrollIntoView,f=e.theme,m=O.useContext($I)||{},_=m.setPortalPlacement,E=O.useRef(null),w=O.useState(s),P=fs(w,2),D=P[0],x=P[1],b=O.useState(null),z=fs(b,2),Q=z[0],K=z[1],Z=f.spacing.controlHeight;return Am(function(){var W=E.current;if(W){var ne=u==="fixed",N=h&&!ne,A=KV({maxHeight:s,menuEl:W,minHeight:r,placement:a,shouldScroll:N,isFixedPosition:ne,controlHeight:Z});x(A.maxHeight),K(A.placement),_==null||_(A.placement)}},[s,a,u,h,r,_,Z]),t({ref:E,placerProps:Ne(Ne({},e),{},{placement:Q||zI(a),maxHeight:D})})},YV=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return Pe("div",Oe({},Lt(e,"menu",{menu:!0}),{ref:r},s),t)},JV=YV,ZV=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return Ne({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},ej=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return Pe("div",Oe({},Lt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},BI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return Ne({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},tj=BI,nj=BI,rj=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=Ss(e,HV);return Pe("div",Oe({},Lt(Ne(Ne({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},ij=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=Ss(e,qV);return Pe("div",Oe({},Lt(Ne(Ne({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},sj=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},oj=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,h=e.menuPosition,f=O.useRef(null),m=O.useRef(null),_=O.useState(zI(u)),E=fs(_,2),w=E[0],P=E[1],D=O.useMemo(function(){return{setPortalPlacement:P}},[]),x=O.useState(null),b=fs(x,2),z=b[0],Q=b[1],K=O.useCallback(function(){if(s){var N=LV(s),A=h==="fixed"?0:window.pageYOffset,R=N[w]+A;(R!==(z==null?void 0:z.offset)||N.left!==(z==null?void 0:z.rect.left)||N.width!==(z==null?void 0:z.rect.width))&&Q({offset:R,rect:N})}},[s,h,w,z==null?void 0:z.offset,z==null?void 0:z.rect.left,z==null?void 0:z.rect.width]);Am(function(){K()},[K]);var Z=O.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=kV(s,f.current,K,{elementResize:"ResizeObserver"in window}))},[s,K]);Am(function(){Z()},[Z]);var W=O.useCallback(function(N){f.current=N,Z()},[Z]);if(!t&&h!=="fixed"||!z)return null;var ne=Pe("div",Oe({ref:W},Lt(Ne(Ne({},e),{},{offset:z.offset,position:h,rect:z.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Pe($I.Provider,{value:D},t?IC.createPortal(ne,t):ne)},aj=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},lj=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return Pe("div",Oe({},Lt(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},uj=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return Ne({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},cj=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return Pe("div",Oe({},Lt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},dj=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},hj=function(e){var t=e.children,r=e.innerProps;return Pe("div",Oe({},Lt(e,"indicatorsContainer",{indicators:!0}),r),t)},x0,fj=["size"],pj=["innerProps","isRtl","size"],mj={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},WI=function(e){var t=e.size,r=Ss(e,fj);return Pe("svg",Oe({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:mj},r))},Gg=function(e){return Pe(WI,Oe({size:20},e),Pe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},HI=function(e){return Pe(WI,Oe({size:20},e),Pe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},qI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Ne({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},gj=qI,vj=function(e){var t=e.children,r=e.innerProps;return Pe("div",Oe({},Lt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Pe(HI,null))},yj=qI,_j=function(e){var t=e.children,r=e.innerProps;return Pe("div",Oe({},Lt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Pe(Gg,null))},wj=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Ne({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},Ej=function(e){var t=e.innerProps;return Pe("span",Oe({},t,Lt(e,"indicatorSeparator",{"indicator-separator":!0})))},Sj=mV(x0||(x0=gV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Tj=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,h=a.spacing.baseUnit;return Ne({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:h*2})},xp=function(e){var t=e.delay,r=e.offset;return Pe("span",{css:Wg({animation:"".concat(Sj," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ij=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=Ss(e,pj);return Pe("div",Oe({},Lt(Ne(Ne({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Pe(xp,{delay:0,offset:r}),Pe(xp,{delay:160,offset:!0}),Pe(xp,{delay:320,offset:!r}))},bj=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,h=a.borderRadius,f=a.spacing;return Ne({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},Cj=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,h=e.menuIsOpen;return Pe("div",Oe({ref:a},Lt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":h}),u,{"aria-disabled":r||void 0}),t)},Pj=Cj,Aj=["data"],Rj=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},xj=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,h=e.headingProps,f=e.innerProps,m=e.label,_=e.theme,E=e.selectProps;return Pe("div",Oe({},Lt(e,"group",{group:!0}),f),Pe(u,Oe({},h,{selectProps:E,theme:_,getStyles:s,getClassNames:a,cx:r}),m),Pe("div",null,t))},kj=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return Ne({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},Nj=function(e){var t=LI(e);t.data;var r=Ss(t,Aj);return Pe("div",Oe({},Lt(e,"groupHeading",{"group-heading":!0}),r))},Oj=xj,Dj=["innerRef","isDisabled","isHidden","inputClassName"],Mj=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,h=a.colors;return Ne(Ne({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},Vj),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:h.neutral80})},KI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Vj={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ne({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},KI)},jj=function(e){return Ne({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},KI)},Lj=function(e){var t=e.cx,r=e.value,s=LI(e),a=s.innerRef,u=s.isDisabled,h=s.isHidden,f=s.inputClassName,m=Ss(s,Dj);return Pe("div",Oe({},Lt(e,"input",{"input-container":!0}),{"data-value":r||""}),Pe("input",Oe({className:t({input:!0},f),ref:a,style:jj(h),disabled:u},m)))},Fj=Lj,Uj=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return Ne({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},zj=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return Ne({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},$j=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,h=e.isFocused;return Ne({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:h?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},GI=function(e){var t=e.children,r=e.innerProps;return Pe("div",r,t)},Bj=GI,Wj=GI;function Hj(n){var e=n.children,t=n.innerProps;return Pe("div",Oe({role:"button"},t),e||Pe(Gg,{size:14}))}var qj=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,h=e.removeProps,f=e.selectProps,m=r.Container,_=r.Label,E=r.Remove;return Pe(m,{data:s,innerProps:Ne(Ne({},Lt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},Pe(_,{data:s,innerProps:Ne({},Lt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),Pe(E,{data:s,innerProps:Ne(Ne({},Lt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},h),selectProps:f}))},Kj=qj,Gj=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,h=u.spacing,f=u.colors;return Ne({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},Qj=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,h=e.innerProps;return Pe("div",Oe({},Lt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},h),t)},Xj=Qj,Yj=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return Ne({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Jj=function(e){var t=e.children,r=e.innerProps;return Pe("div",Oe({},Lt(e,"placeholder",{placeholder:!0}),r),t)},Zj=Jj,eL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return Ne({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},tL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return Pe("div",Oe({},Lt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},nL=tL,rL={ClearIndicator:_j,Control:Pj,DropdownIndicator:vj,DownChevron:HI,CrossIcon:Gg,Group:Oj,GroupHeading:Nj,IndicatorsContainer:hj,IndicatorSeparator:Ej,Input:Fj,LoadingIndicator:Ij,Menu:JV,MenuList:ej,MenuPortal:oj,LoadingMessage:ij,NoOptionsMessage:rj,MultiValue:Kj,MultiValueContainer:Bj,MultiValueLabel:Wj,MultiValueRemove:Hj,Option:Xj,Placeholder:Zj,SelectContainer:lj,SingleValue:nL,ValueContainer:cj},iL=function(e){return Ne(Ne({},rL),e.components)},k0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function sL(n,e){return!!(n===e||k0(n)&&k0(e))}function oL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!sL(n[t],e[t]))return!1;return!0}function aL(n,e){e===void 0&&(e=oL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var lL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},uL=function(e){return Pe("span",Oe({css:lL},e))},N0=uL,cL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,h=e.selectValue,f=e.isDisabled,m=e.isSelected,_=e.isAppleDevice,E=function(x,b){return x&&x.length?"".concat(x.indexOf(b)+1," of ").concat(x.length):""};if(t==="value"&&h)return"value ".concat(u," focused, ").concat(E(h,r),".");if(t==="menu"&&_){var w=f?" disabled":"",P="".concat(m?" selected":"").concat(w);return"".concat(u).concat(P,", ").concat(E(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},dL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,h=e.selectValue,f=e.selectProps,m=e.id,_=e.isAppleDevice,E=f.ariaLiveMessages,w=f.getOptionLabel,P=f.inputValue,D=f.isMulti,x=f.isOptionDisabled,b=f.isSearchable,z=f.menuIsOpen,Q=f.options,K=f.screenReaderStatus,Z=f.tabSelectsValue,W=f.isLoading,ne=f["aria-label"],N=f["aria-live"],A=O.useMemo(function(){return Ne(Ne({},cL),E||{})},[E]),R=O.useMemo(function(){var be="";if(t&&A.onChange){var Ue=t.option,Ve=t.options,ae=t.removedValue,_e=t.removedValues,de=t.value,B=function(Me){return Array.isArray(Me)?null:Me},U=ae||Ue||B(de),pe=U?w(U):"",ve=Ve||_e||void 0,Re=ve?ve.map(w):[],le=Ne({isDisabled:U&&x(U,h),label:pe,labels:Re},t);be=A.onChange(le)}return be},[t,A,x,h,w]),V=O.useMemo(function(){var be="",Ue=r||s,Ve=!!(r&&h&&h.includes(r));if(Ue&&A.onFocus){var ae={focused:Ue,label:w(Ue),isDisabled:x(Ue,h),isSelected:Ve,options:a,context:Ue===r?"menu":"value",selectValue:h,isAppleDevice:_};be=A.onFocus(ae)}return be},[r,s,w,x,A,a,h,_]),j=O.useMemo(function(){var be="";if(z&&Q.length&&!W&&A.onFilter){var Ue=K({count:a.length});be=A.onFilter({inputValue:P,resultsMessage:Ue})}return be},[a,P,z,A,Q,K,W]),L=(t==null?void 0:t.action)==="initial-input-focus",k=O.useMemo(function(){var be="";if(A.guidance){var Ue=s?"value":z?"menu":"input";be=A.guidance({"aria-label":ne,context:Ue,isDisabled:r&&x(r,h),isMulti:D,isSearchable:b,tabSelectsValue:Z,isInitialFocus:L})}return be},[ne,r,s,D,x,b,z,A,h,Z,L]),fe=Pe(O.Fragment,null,Pe("span",{id:"aria-selection"},R),Pe("span",{id:"aria-focused"},V),Pe("span",{id:"aria-results"},j),Pe("span",{id:"aria-guidance"},k));return Pe(O.Fragment,null,Pe(N0,{id:m},L&&fe),Pe(N0,{"aria-live":N,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!L&&fe))},hL=dL,Rm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],fL=new RegExp("["+Rm.map(function(n){return n.letters}).join("")+"]","g"),QI={};for(var kp=0;kp<Rm.length;kp++)for(var Np=Rm[kp],Op=0;Op<Np.letters.length;Op++)QI[Np.letters[Op]]=Np.base;var XI=function(e){return e.replace(fL,function(t){return QI[t]})},pL=aL(XI),O0=function(e){return e.replace(/^\s+|\s+$/g,"")},mL=function(e){return"".concat(e.label," ").concat(e.value)},gL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=Ne({ignoreCase:!0,ignoreAccents:!0,stringify:mL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,h=s.stringify,f=s.trim,m=s.matchFrom,_=f?O0(r):r,E=f?O0(h(t)):h(t);return a&&(_=_.toLowerCase(),E=E.toLowerCase()),u&&(_=pL(_),E=XI(E)),m==="start"?E.substr(0,_.length)===_:E.indexOf(_)>-1}},vL=["innerRef"];function yL(n){var e=n.innerRef,t=Ss(n,vL),r=WV(t,"onExited","in","enter","exit","appear");return Pe("input",Oe({ref:e},r,{css:Wg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var _L=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function wL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=O.useRef(!1),h=O.useRef(!1),f=O.useRef(0),m=O.useRef(null),_=O.useCallback(function(b,z){if(m.current!==null){var Q=m.current,K=Q.scrollTop,Z=Q.scrollHeight,W=Q.clientHeight,ne=m.current,N=z>0,A=Z-W-K,R=!1;A>z&&u.current&&(r&&r(b),u.current=!1),N&&h.current&&(a&&a(b),h.current=!1),N&&z>A?(t&&!u.current&&t(b),ne.scrollTop=Z,R=!0,u.current=!0):!N&&-z>K&&(s&&!h.current&&s(b),ne.scrollTop=0,R=!0,h.current=!0),R&&_L(b)}},[t,r,s,a]),E=O.useCallback(function(b){_(b,b.deltaY)},[_]),w=O.useCallback(function(b){f.current=b.changedTouches[0].clientY},[]),P=O.useCallback(function(b){var z=f.current-b.changedTouches[0].clientY;_(b,z)},[_]),D=O.useCallback(function(b){if(b){var z=zV?{passive:!1}:!1;b.addEventListener("wheel",E,z),b.addEventListener("touchstart",w,z),b.addEventListener("touchmove",P,z)}},[P,w,E]),x=O.useCallback(function(b){b&&(b.removeEventListener("wheel",E,!1),b.removeEventListener("touchstart",w,!1),b.removeEventListener("touchmove",P,!1))},[P,w,E]);return O.useEffect(function(){if(e){var b=m.current;return D(b),function(){x(b)}}},[e,D,x]),function(b){m.current=b}}var D0=["boxSizing","height","overflow","paddingRight","position"],M0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function V0(n){n.cancelable&&n.preventDefault()}function j0(n){n.stopPropagation()}function L0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function F0(){return"ontouchstart"in window||navigator.maxTouchPoints}var U0=!!(typeof window<"u"&&window.document&&window.document.createElement),nu=0,La={capture:!1,passive:!1};function EL(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=O.useRef({}),a=O.useRef(null),u=O.useCallback(function(f){if(U0){var m=document.body,_=m&&m.style;if(r&&D0.forEach(function(D){var x=_&&_[D];s.current[D]=x}),r&&nu<1){var E=parseInt(s.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,P=window.innerWidth-w+E||0;Object.keys(M0).forEach(function(D){var x=M0[D];_&&(_[D]=x)}),_&&(_.paddingRight="".concat(P,"px"))}m&&F0()&&(m.addEventListener("touchmove",V0,La),f&&(f.addEventListener("touchstart",L0,La),f.addEventListener("touchmove",j0,La))),nu+=1}},[r]),h=O.useCallback(function(f){if(U0){var m=document.body,_=m&&m.style;nu=Math.max(nu-1,0),r&&nu<1&&D0.forEach(function(E){var w=s.current[E];_&&(_[E]=w)}),m&&F0()&&(m.removeEventListener("touchmove",V0,La),f&&(f.removeEventListener("touchstart",L0,La),f.removeEventListener("touchmove",j0,La)))}},[r]);return O.useEffect(function(){if(e){var f=a.current;return u(f),function(){h(f)}}},[e,u,h]),function(f){a.current=f}}var SL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},TL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function IL(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,h=n.onTopArrive,f=n.onTopLeave,m=wL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:h,onTopLeave:f}),_=EL({isEnabled:t}),E=function(P){m(P),_(P)};return Pe(O.Fragment,null,t&&Pe("div",{onClick:SL,css:TL}),e(E))}var bL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},CL=function(e){var t=e.name,r=e.onFocus;return Pe("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:bL,value:"",onChange:function(){}})},PL=CL;function Qg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function AL(){return Qg(/^iPhone/i)}function YI(){return Qg(/^Mac/i)}function RL(){return Qg(/^iPad/i)||YI()&&navigator.maxTouchPoints>1}function xL(){return AL()||RL()}function kL(){return YI()||xL()}var NL=function(e){return e.label},OL=function(e){return e.label},DL=function(e){return e.value},ML=function(e){return!!e.isDisabled},VL={clearIndicator:yj,container:aj,control:bj,dropdownIndicator:gj,group:Rj,groupHeading:kj,indicatorsContainer:dj,indicatorSeparator:wj,input:Mj,loadingIndicator:Tj,loadingMessage:nj,menu:QV,menuList:ZV,menuPortal:sj,multiValue:Uj,multiValueLabel:zj,multiValueRemove:$j,noOptionsMessage:tj,option:Gj,placeholder:Yj,singleValue:eL,valueContainer:uj},jL={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},LL=4,JI=4,FL=38,UL=JI*2,zL={baseUnit:JI,controlHeight:FL,menuGutter:UL},Dp={borderRadius:LL,colors:jL,spacing:zL},$L={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:R0(),captureMenuScroll:!R0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:gL(),formatGroupLabel:NL,getOptionLabel:OL,getOptionValue:DL,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:ML,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!FV(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function z0(n,e,t,r){var s=tb(n,e,t),a=nb(n,e,t),u=eb(n,e),h=th(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:h,index:r}}function Id(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,h){return z0(n,u,e,h)}).filter(function(u){return B0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=z0(n,t,e,r);return B0(n,a)?a:void 0}).filter($V)}function ZI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Fg(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function $0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Fg(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function BL(n,e){return ZI(Id(n,e))}function B0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,h=e.value;return(!ib(n)||!a)&&rb(n,{label:u,value:h,data:s},r)}function WL(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function HL(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Mp=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},eb=function(e,t){return e.getOptionLabel(t)},th=function(e,t){return e.getOptionValue(t)};function tb(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function nb(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=th(n,e);return t.some(function(s){return th(n,s)===r})}function rb(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var ib=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},qL=1,sb=(function(n){hM(t,n);var e=mM(t);function t(r){var s;if(cM(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var _=s.props,E=_.onChange,w=_.name;m.name=w,s.ariaOnChange(f,m),E(f,m)},s.setValue=function(f,m,_){var E=s.props,w=E.closeMenuOnSelect,P=E.isMulti,D=E.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:D}),w&&(s.setState({inputIsHiddenAfterUpdate:!P}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:_})},s.selectOption=function(f){var m=s.props,_=m.blurInputOnSelect,E=m.isMulti,w=m.name,P=s.state.selectValue,D=E&&s.isOptionSelected(f,P),x=s.isOptionDisabled(f,P);if(D){var b=s.getOptionValue(f);s.setValue(P.filter(function(z){return s.getOptionValue(z)!==b}),"deselect-option",f)}else if(!x)E?s.setValue([].concat(Fg(P),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:w});return}_&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,_=s.state.selectValue,E=s.getOptionValue(f),w=_.filter(function(D){return s.getOptionValue(D)!==E}),P=ud(m,w,w[0]||null);s.onChange(P,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(ud(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,_=m[m.length-1],E=m.slice(0,m.length-1),w=ud(f,E,E[0]||null);_&&s.onChange(w,{action:"pop-value",removedValue:_})},s.getFocusedOptionId=function(f){return Mp(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return $0(Id(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return DV.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return eb(s.props,f)},s.getOptionValue=function(f){return th(s.props,f)},s.getStyles=function(f,m){var _=s.props.unstyled,E=VL[f](m,_);E.boxSizing="border-box";var w=s.props.styles[f];return w?w(E,m):E},s.getClassNames=function(f,m){var _,E;return(_=(E=s.props.classNames)[f])===null||_===void 0?void 0:_.call(E,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return iL(s.props)},s.buildCategorizedOptions=function(){return Id(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return ZI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:Ne({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,_=m.isMulti,E=m.menuIsOpen;s.focusInput(),E?(s.setState({inputIsHiddenAfterUpdate:!_}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Vh(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,_=m&&m.item(0);_&&(s.initialTouchX=_.clientX,s.initialTouchY=_.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,_=m&&m.item(0);if(_){var E=Math.abs(_.clientX-s.initialTouchX),w=Math.abs(_.clientY-s.initialTouchY),P=5;s.userIsDragging=E>P||w>P}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,_=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(_,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),_=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:_>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return ib(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,_=m.isMulti,E=m.backspaceRemovesValue,w=m.escapeClearsValue,P=m.inputValue,D=m.isClearable,x=m.isDisabled,b=m.menuIsOpen,z=m.onKeyDown,Q=m.tabSelectsValue,K=m.openMenuOnFocus,Z=s.state,W=Z.focusedOption,ne=Z.focusedValue,N=Z.selectValue;if(!x&&!(typeof z=="function"&&(z(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!_||P)return;s.focusValue("previous");break;case"ArrowRight":if(!_||P)return;s.focusValue("next");break;case"Delete":case"Backspace":if(P)return;if(ne)s.removeValue(ne);else{if(!E)return;_?s.popValue():D&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!b||!Q||!W||K&&s.isOptionSelected(W,N))return;s.selectOption(W);break;case"Enter":if(f.keyCode===229)break;if(b){if(!W||s.isComposing)return;s.selectOption(W);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:P}),s.onMenuClose()):D&&w&&s.clearValue();break;case" ":if(P)return;if(!b){s.openMenu("first");break}if(!W)return;s.selectOption(W);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++qL),s.state.selectValue=P0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),h=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[h],s.state.focusedOptionId=Mp(a,u[h])}return s}return dM(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&A0(this.menuListRef,this.focusedOptionRef),kL()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,h=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&h&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(A0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,h=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),_=s==="first"?0:m.length-1;if(!this.props.isMulti){var E=m.indexOf(h[0]);E>-1&&(_=E)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[_],focusedOptionId:this.getFocusedOptionId(m[_])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,h=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(h);h||(f=-1);var m=u.length-1,_=-1;if(u.length){switch(s){case"previous":f===0?_=0:f===-1?_=m:_=f-1;break;case"next":f>-1&&f<m&&(_=f+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:u[_]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var f=0,m=h.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:h.length-1:s==="down"?f=(m+1)%h.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>h.length-1&&(f=h.length-1)):s==="last"&&(f=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Dp):Ne(Ne({},Dp),this.props.theme):Dp})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,h=this.getClassNames,f=this.getValue,m=this.selectOption,_=this.setValue,E=this.props,w=E.isMulti,P=E.isRtl,D=E.options,x=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:h,getValue:f,hasValue:x,isMulti:w,isRtl:P,options:D,selectOption:m,selectProps:E,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return tb(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return nb(this.props,s,a)}},{key:"filterOption",value:function(s,a){return rb(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:h})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,h=s.inputId,f=s.inputValue,m=s.tabIndex,_=s.form,E=s.menuIsOpen,w=s.required,P=this.getComponents(),D=P.Input,x=this.state,b=x.inputIsHidden,z=x.ariaSelection,Q=this.commonProps,K=h||this.getElementId("input"),Z=Ne(Ne(Ne({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?(z==null?void 0:z.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?O.createElement(D,Oe({},Q,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:K,innerRef:this.getInputRef,isDisabled:a,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:_,type:"text",value:f},Z)):O.createElement(yL,Oe({id:K,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Zd,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:_,value:""},Z))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,h=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,_=a.SingleValue,E=a.Placeholder,w=this.commonProps,P=this.props,D=P.controlShouldRenderValue,x=P.isDisabled,b=P.isMulti,z=P.inputValue,Q=P.placeholder,K=this.state,Z=K.selectValue,W=K.focusedValue,ne=K.isFocused;if(!this.hasValue()||!D)return z?null:O.createElement(E,Oe({},w,{key:"placeholder",isDisabled:x,isFocused:ne,innerProps:{id:this.getElementId("placeholder")}}),Q);if(b)return Z.map(function(A,R){var V=A===W,j="".concat(s.getOptionLabel(A),"-").concat(s.getOptionValue(A));return O.createElement(u,Oe({},w,{components:{Container:h,Label:f,Remove:m},isFocused:V,isDisabled:x,key:j,index:R,removeProps:{onClick:function(){return s.removeValue(A)},onTouchEnd:function(){return s.removeValue(A)},onMouseDown:function(k){k.preventDefault()}},data:A}),s.formatOptionLabel(A,"value"))});if(z)return null;var N=Z[0];return O.createElement(_,Oe({},w,{data:N,isDisabled:x}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,h=this.props,f=h.isDisabled,m=h.isLoading,_=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(a,Oe({},u,{innerProps:E,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,h=this.props,f=h.isDisabled,m=h.isLoading,_=this.state.isFocused;if(!a||!m)return null;var E={"aria-hidden":"true"};return O.createElement(a,Oe({},u,{innerProps:E,isDisabled:f,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var h=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return O.createElement(u,Oe({},h,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,h=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(a,Oe({},u,{innerProps:m,isDisabled:h,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,h=a.GroupHeading,f=a.Menu,m=a.MenuList,_=a.MenuPortal,E=a.LoadingMessage,w=a.NoOptionsMessage,P=a.Option,D=this.commonProps,x=this.state.focusedOption,b=this.props,z=b.captureMenuScroll,Q=b.inputValue,K=b.isLoading,Z=b.loadingMessage,W=b.minMenuHeight,ne=b.maxMenuHeight,N=b.menuIsOpen,A=b.menuPlacement,R=b.menuPosition,V=b.menuPortalTarget,j=b.menuShouldBlockScroll,L=b.menuShouldScrollIntoView,k=b.noOptionsMessage,fe=b.onMenuScrollToTop,be=b.onMenuScrollToBottom;if(!N)return null;var Ue=function(pe,ve){var Re=pe.type,le=pe.data,je=pe.isDisabled,Me=pe.isSelected,Ge=pe.label,St=pe.value,ie=x===le,qe=je?void 0:function(){return s.onOptionHover(le)},ot=je?void 0:function(){return s.selectOption(le)},rt="".concat(s.getElementId("option"),"-").concat(ve),at={id:rt,onClick:ot,onMouseMove:qe,onMouseOver:qe,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:Me};return O.createElement(P,Oe({},D,{innerProps:at,data:le,isDisabled:je,isSelected:Me,key:rt,label:Ge,type:Re,value:St,isFocused:ie,innerRef:ie?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(pe.data,"menu"))},Ve;if(this.hasOptions())Ve=this.getCategorizedOptions().map(function(U){if(U.type==="group"){var pe=U.data,ve=U.options,Re=U.index,le="".concat(s.getElementId("group"),"-").concat(Re),je="".concat(le,"-heading");return O.createElement(u,Oe({},D,{key:le,data:pe,options:ve,Heading:h,headingProps:{id:je,data:U.data},label:s.formatGroupLabel(U.data)}),U.options.map(function(Me){return Ue(Me,"".concat(Re,"-").concat(Me.index))}))}else if(U.type==="option")return Ue(U,"".concat(U.index))});else if(K){var ae=Z({inputValue:Q});if(ae===null)return null;Ve=O.createElement(E,D,ae)}else{var _e=k({inputValue:Q});if(_e===null)return null;Ve=O.createElement(w,D,_e)}var de={minMenuHeight:W,maxMenuHeight:ne,menuPlacement:A,menuPosition:R,menuShouldScrollIntoView:L},B=O.createElement(XV,Oe({},D,de),function(U){var pe=U.ref,ve=U.placerProps,Re=ve.placement,le=ve.maxHeight;return O.createElement(f,Oe({},D,de,{innerRef:pe,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:K,placement:Re}),O.createElement(IL,{captureEnabled:z,onTopArrive:fe,onBottomArrive:be,lockEnabled:j},function(je){return O.createElement(m,Oe({},D,{innerRef:function(Ge){s.getMenuListRef(Ge),je(Ge)},innerProps:{role:"listbox","aria-multiselectable":D.isMulti,id:s.getElementId("listbox")},isLoading:K,maxHeight:le,focusedOption:x}),Ve)}))});return V||R==="fixed"?O.createElement(_,Oe({},D,{appendTo:V,controlElement:this.controlRef,menuPlacement:A,menuPosition:R}),B):B}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,h=a.isDisabled,f=a.isMulti,m=a.name,_=a.required,E=this.state.selectValue;if(_&&!this.hasValue()&&!h)return O.createElement(PL,{name:m,onFocus:this.onValueInputFocus});if(!(!m||h))if(f)if(u){var w=E.map(function(x){return s.getOptionValue(x)}).join(u);return O.createElement("input",{name:m,type:"hidden",value:w})}else{var P=E.length>0?E.map(function(x,b){return O.createElement("input",{key:"i-".concat(b),name:m,type:"hidden",value:s.getOptionValue(x)})}):O.createElement("input",{name:m,type:"hidden",value:""});return O.createElement("div",null,P)}else{var D=E[0]?this.getOptionValue(E[0]):"";return O.createElement("input",{name:m,type:"hidden",value:D})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,h=a.focusedOption,f=a.focusedValue,m=a.isFocused,_=a.selectValue,E=this.getFocusableOptions();return O.createElement(hL,Oe({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:h,focusedValue:f,isFocused:m,selectValue:_,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,h=s.SelectContainer,f=s.ValueContainer,m=this.props,_=m.className,E=m.id,w=m.isDisabled,P=m.menuIsOpen,D=this.state.isFocused,x=this.commonProps=this.getCommonProps();return O.createElement(h,Oe({},x,{className:_,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:D}),this.renderLiveRegion(),O.createElement(a,Oe({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:D,menuIsOpen:P}),O.createElement(f,Oe({},x,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),O.createElement(u,Oe({},x,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,h=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,_=a.isFocused,E=a.prevWasFocused,w=a.instancePrefix,P=s.options,D=s.value,x=s.menuIsOpen,b=s.inputValue,z=s.isMulti,Q=P0(D),K={};if(u&&(D!==u.value||P!==u.options||x!==u.menuIsOpen||b!==u.inputValue)){var Z=x?BL(s,Q):[],W=x?$0(Id(s,Q),"".concat(w,"-option")):[],ne=h?WL(a,Q):null,N=HL(a,Z),A=Mp(W,N);K={selectValue:Q,focusedOption:N,focusedOptionId:A,focusableOptionsWithIds:W,focusedValue:ne,clearFocusValueOnUpdate:!1}}var R=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},V=m,j=_&&E;return _&&!j&&(V={value:ud(z,Q,Q[0]||null),options:Q,action:"initial-input-focus"},j=!E),(m==null?void 0:m.action)==="initial-input-focus"&&(V=null),Ne(Ne(Ne({},K),R),{},{prevProps:s,ariaSelection:V,prevWasFocused:j})}}]),t})(O.Component);sb.defaultProps=$L;var KL=O.forwardRef(function(n,e){var t=uM(n);return O.createElement(sb,Oe({ref:e},t))}),W0=KL;const ru=["Anagrafica","Stato fisico","Obiettivi"];function Ee(n){return typeof n=="string"?n:n==null?"":String(n)}function cd(n){const e=Ee(n.id).trim(),t=Ee(n.uid).trim();return e||t}function Wa(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number(Ee(t.weight).replace(/[^\d.-]/g,"")),s=Ee(t.advancedMethod).trim(),a=s==="rest_pause"||s==="drop_set"?s:"",u=Ee(t.advancedMethodNotes),h=Ee(t.restPauseNotes),f=Ee(t.dropSetNotes),m=Ee(t.mediaUrl).trim(),_=Ee(t.videoUrl).trim(),E=Ee(t.imageUrl).trim(),w=_||(ob(m)?m:""),P=E||(bd(m)?m:"");return{name:Ee(t.name),notes:Ee(t.notes),advancedMethod:a,advancedMethodNotes:u,restPauseNotes:h||(a==="rest_pause"?u:""),dropSetNotes:f||(a==="drop_set"?u:""),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,workValue:Number(t.workValue??t.reps??10)||10,weightKg:Number(t.weightKg??r??0)||0,restSeconds:Number(t.restSeconds??60)||60,videoUrl:w,imageUrl:P,mediaUrl:m||w||P}}).filter(e=>!!e):[]}function xt(n){return Ee(n).trim()||"Non compilato"}function GL(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function QL(n,e){const t=GL(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function ob(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function bd(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function qs(){return{name:"",notes:"",advancedMethod:"",advancedMethodNotes:"",restPauseNotes:"",dropSetNotes:"",sets:3,reps:10,workValue:10,weightKg:0,restSeconds:60,videoUrl:"",imageUrl:"",mediaUrl:""}}function XL(n){return n.name.trim().length>0||n.notes.trim().length>0||n.advancedMethod.trim().length>0||n.advancedMethodNotes.trim().length>0||n.restPauseNotes.trim().length>0||n.dropSetNotes.trim().length>0||n.videoUrl.trim().length>0||n.imageUrl.trim().length>0||n.mediaUrl.trim().length>0||Number(n.sets||0)!==3||Number(n.reps||0)!==10||Number(n.workValue||0)!==10||Number(n.weightKg||0)>0||Number(n.restSeconds||0)!==60}function Ai(n){n.currentTarget.select()}function Ha(n){return n?n==="0"?"0":n.replace(/^0+(?=\d)/,""):""}function iu(n){const e=Ha(n);if(!e)return"";const t=Number(e);return Number.isFinite(t)?t:""}function ab(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function H0(n,e){const t=ab(e);return n?{...t,fullName:Ee(n.fullName).trim()||t.fullName,age:Ee(n.age).trim(),sex:Ee(n.sex).trim(),email:Ee(n.email).trim()||t.email,phone:Ee(n.phone).trim(),discoverySource:Ee(n.discoverySource).trim(),heightCm:Ee(n.heightCm).trim(),weightKg:Ee(n.weightKg).trim(),pastProgram:Ee(n.pastProgram).trim(),trainingFrequency:Ee(n.trainingFrequency).trim(),workoutDuration:Ee(n.workoutDuration).trim(),workoutLocation:Ee(n.workoutLocation).trim(),equipment:Ee(n.equipment).trim(),trainingTypeHistory:Ee(n.trainingTypeHistory).trim(),hasInjuries:Ee(n.hasInjuries).trim(),injuryDetails:Ee(n.injuryDetails).trim(),objectivePrimary:Ee(n.objectivePrimary).trim(),objectiveReason:Ee(n.objectiveReason).trim(),expectedTimeline:Ee(n.expectedTimeline).trim(),supportPreference:Ee(n.supportPreference).trim(),supportPreferenceOther:Ee(n.supportPreferenceOther).trim(),investmentRange:Ee(n.investmentRange).trim(),whatBlockedSoFar:Ee(n.whatBlockedSoFar).trim(),oneThingToImprove:Ee(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:Ee(n.riskIfNoChange).trim(),readiness:Ee(n.readiness).trim(),notes:Ee(n.notes).trim()}:t}function YL(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function Fa(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function Vp(n){if(!n)return null;if(typeof n=="string"){const e=new Date(n);return Number.isNaN(e.getTime())?null:e.toISOString()}if(n instanceof Date)return Number.isNaN(n.getTime())?null:n.toISOString();if(typeof n=="object"&&n&&"toDate"in n&&typeof n.toDate=="function"){const e=n.toDate();return Number.isNaN(e.getTime())?null:e.toISOString()}return null}function q0(n){return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function K0(n){switch(n){case"trial_pending":return"Prova da attivare";case"trial_active":return"Prova attiva";case"active_paid":return"Abbonamento attivo";case"expired":return"Scaduto";case"disabled":return"Disattivato";case"supervisor_active":return"Supervisor attivo";default:return"Non disponibile"}}function cu(n){if(!n)return null;const e=new Date(n).getTime();return Number.isNaN(e)?null:e}function jp(n){return n.status==="trial_active"?n.trialEndsAt??n.expiresAt??n.subscriptionEndsAt??null:n.status==="active_paid"?n.subscriptionEndsAt??n.expiresAt??n.trialEndsAt??null:n.expiresAt??n.trialEndsAt??n.subscriptionEndsAt??null}function JL(n,e){if(n==="expired")return{label:"Scaduto",tone:"danger"};const t=cu(e);if(!t)return null;const r=Date.now();if(t<=r)return{label:"Scaduto",tone:"danger"};const s=10080*60*1e3;return t-r<=s?{label:"In scadenza",tone:"warning"}:null}function ZL(n){var r;const e={},t=n.clientWeightOverrides;if(t&&typeof t=="object"){for(const[s,a]of Object.entries(t))if(!(!a||typeof a!="object"))for(const[u,h]of Object.entries(a)){const f=Number(h);!Number.isFinite(f)||f<0||(e[s]=e[s]??{},e[s][u]=f)}}for(const[s,a]of Object.entries(n)){if(!s.startsWith("clientWeightOverrides."))continue;const[,u,h]=s.split(".");if(!u||h==null||((r=e[u])==null?void 0:r[h])!==void 0)continue;const f=Number(a);!Number.isFinite(f)||f<0||(e[u]=e[u]??{},e[u][h]=f)}return e}function lb(n,e){const t=ZL(n);if(Object.keys(t).length===0)return[];const r=Wa(n.exercises),s=[];for(const[a,u]of Object.entries(t)){if(!u||typeof u!="object")continue;const h=[];for(const[f,m]of Object.entries(u)){const _=Number(f);if(!Number.isInteger(_)||_<0||_>=r.length)continue;const E=Number(m);if(!Number.isFinite(E))continue;const w=r[_],P=Number(w.weightKg||0);if(E===P)continue;const D=w.name.trim()||`Esercizio ${_+1}`;h.push(`${D}: ${P} kg -> ${E} kg`)}h.length!==0&&s.push({clientId:a,clientLabel:e[a]||a,lines:h})}return s}function e4(n,e){return lb(n,e).reduce((t,r)=>t+r.lines.length,0)}function t4(){const{role:n,user:e,isSupervisor:t}=na(),r=dl(),{showError:s,showSuccess:a}=rh(),[u,h]=O.useState([]),[f,m]=O.useState([]),[_,E]=O.useState(!1),[w,P]=O.useState(null),[D,x]=O.useState(!1),[b,z]=O.useState(!1),[Q,K]=O.useState(!1),[Z,W]=O.useState({}),[ne,N]=O.useState(!1),[A,R]=O.useState(!1),[V,j]=O.useState(!1),[L,k]=O.useState(""),[fe,be]=O.useState(""),[Ue,Ve]=O.useState(!1),[ae,_e]=O.useState(!1),[de,B]=O.useState(0),[U,pe]=O.useState(ab()),[ve,Re]=O.useState(null),[le,je]=O.useState(null),[Me,Ge]=O.useState(!1),[St,ie]=O.useState([]),[qe,ot]=O.useState(""),[rt,at]=O.useState(""),[zt,Pt]=O.useState(""),[it,Zt]=O.useState("clients"),[pt,Vt]=O.useState(""),[et,dt]=O.useState(""),[Hr,qr]=O.useState(!1),[mt,Tt]=O.useState("series_reps"),[Cr,Kr]=O.useState(""),[fr,Bn]=O.useState(""),[Pr,Ar]=O.useState(""),[zi,Wn]=O.useState([qs()]),[Gr,$i]=O.useState([]),[Bi,Qr]=O.useState(!1),[Rr,Vn]=O.useState(""),[En,mi]=O.useState("permanent"),[Hn,Ts]=O.useState("4"),[Xr,Is]=O.useState(q0(new Date)),xr=ve!==null,on=u.find(I=>cd(I)===pt)??null,Ze=[...f].sort((I,X)=>{const ee=cu(Ee(I.createdAt))??0;return(cu(Ee(X.createdAt))??0)-ee}),Be=Ze.find(I=>I.id===et)??null,Sn=D?Be:null,Nt=b?Be:null,gi=QL(Ee(w==null?void 0:w.phone),Ee(w==null?void 0:w.fullName)),qn=u.reduce((I,X)=>{const ee=Ee(X.displayName).trim()||Ee(X.email).trim()||X.id;return I[cd(X)]=ee,I[X.id]=ee,I},{}),Kn=Nt?lb(Nt,qn):[],Yr=u.map(I=>({value:cd(I),label:Ee(I.displayName).trim()||Ee(I.email)||I.id})),ra=Be?Yr.filter(I=>!(Be.assignedClientIds??[]).includes(I.value)):Yr,bs=Yr.filter(I=>Gr.includes(I.value)),ia=Yr.find(I=>I.value===pt)??null,Gn=Math.round((de+1)/ru.length*100),Wi=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],Qn=St.filter(I=>I.uid!==(e==null?void 0:e.uid)).filter(I=>!I.isSupervisor).filter(I=>{const X=qe.trim().toLowerCase();return X?I.displayName.toLowerCase().includes(X)||I.email.toLowerCase().includes(X):!0}).sort((I,X)=>{const ee=cu(jp(I))??Number.MAX_SAFE_INTEGER,Ce=cu(jp(X))??Number.MAX_SAFE_INTEGER;return ee-Ce});O.useEffect(()=>{!t&&it==="supervisor"&&Zt("clients")},[t,it]),O.useEffect(()=>{const I=window.location.hash.replace(/^#/,"");(I==="code"||I==="clients"||I==="plans"||I==="overview"||I==="supervisor")&&Zt(I)},[]),O.useEffect(()=>{const I=`#${it}`;window.location.hash!==I&&window.history.replaceState(null,"",`${window.location.pathname}${window.location.search}${I}`)},[it]);const yo=O.useMemo(()=>({control:(I,X)=>({...I,minHeight:48,borderRadius:12,borderColor:X.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:X.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:I=>({...I,borderRadius:12,overflow:"hidden",zIndex:50}),option:(I,X)=>({...I,backgroundColor:X.isSelected?"#ff6a00":X.isFocused?"rgba(255,106,0,0.10)":"#fff",color:X.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);O.useEffect(()=>{async function I(){if(!pt){P(null);return}try{const X=await dI(pt,"onboarding");P(X.data()??null)}catch{P(null)}}I()},[pt]),O.useEffect(()=>{var I;!et&&Ze.length>0&&!Hr&&dt(Ze[0].id),et&&!Ze.some(X=>X.id===et)&&dt(((I=Ze[0])==null?void 0:I.id)??"")},[et,Hr,Ze.map(I=>I.id).join("|")]),O.useEffect(()=>{Be||z(!1)},[Be==null?void 0:Be.id]),O.useEffect(()=>{b||W({})},[b,Be==null?void 0:Be.id]);async function Hi(){if(n){E(!0);try{const ee=(await cI(e==null?void 0:e.uid)).docs.map(Ce=>({id:Ce.id,...Ce.data()})).sort((Ce,He)=>{const kr=Ee(Ce.displayName||Ce.email||Ce.id).toLowerCase(),pr=Ee(He.displayName||He.email||He.id).toLowerCase();return kr.localeCompare(pr)});h(ee),!pt&&ee[0]&&Vt(cd(ee[0]));try{const Ce=await hI(n);m(Ce.docs.map(He=>({id:He.id,...He.data()})))}catch(Ce){m([]),s(kt(Ce))}}catch(I){console.error("Coach action failed:",I),s(kt(I))}finally{E(!1)}}}O.useEffect(()=>{Hi()},[n,e==null?void 0:e.uid]),O.useEffect(()=>{!le||le.isSupervisor||le.isExpired&&Sr().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[le==null?void 0:le.status,le==null?void 0:le.isExpired,le==null?void 0:le.isSupervisor]),O.useEffect(()=>{async function I(){if(!(!n||n==="client")){Ge(!0);try{const X=await r0();je(X)}catch(X){s(kt(X))}finally{Ge(!1)}}}I()},[n,e==null?void 0:e.uid]),O.useEffect(()=>{async function I(){if(e!=null&&e.uid)try{const ee=(await Ya(e.uid)).data(),Ce=Ee(ee==null?void 0:ee.phone).trim();k(Ce),be(Ce)}catch{k(""),be("")}}I()},[e==null?void 0:e.uid]);async function qi(){if(t)try{const I=await g2();ie(I.coaches??[])}catch(I){s(kt(I))}}O.useEffect(()=>{qi()},[t,e==null?void 0:e.uid]);async function jn(I,X){E(!0);try{const ee=await I();return a(X),await Hi(),ee}catch(ee){s(kt(ee))}finally{E(!1)}}function _o(){Wn(I=>[...I,qs()])}function sa(I){Wn(X=>X.length<=1?X:X.filter((ee,Ce)=>Ce!==I))}function Sl(I){We(I,qs())}function We(I,X){Wn(ee=>ee.map((Ce,He)=>He===I?{...Ce,...X}:Ce))}function gt(I,X){pe(ee=>({...ee,[I]:X}))}function Ki(){if(!Be){Tt("series_reps"),Kr(""),Bn(""),Ar(""),Wn([qs()]);return}Tt(Be.kind==="circuit"?"circuit":"series_reps"),Kr(Be.title??""),Bn(Ee(Be.warmup)),Ar(Ee(Be.notes));const I=Wa(Be.exercises).filter(X=>X.name.trim().length>0);Wn(I.length>0?I:[qs()])}function Jr(I){if(I===mt)return;if(zi.some(ee=>XL(ee))||Pr.trim().length>0||fr.trim().length>0){if(!window.confirm("Cambiando categoria di allenamento, i dati inseriti in questa scheda verranno cancellati. Vuoi continuare?"))return;Wn([qs()]),Ar(""),Bn("")}Tt(I)}function Xn(){const I=document.body;let X=!1;const ee=()=>{X||(X=!0,I.classList.remove("print-plan-only"))};I.classList.add("print-plan-only"),window.addEventListener("afterprint",ee,{once:!0}),window.setTimeout(()=>{window.print()},80),window.setTimeout(ee,12e3)}function wo(){if(!pt){s("Seleziona prima un cliente.");return}const I={name:Ee(on==null?void 0:on.displayName).trim(),email:Ee(on==null?void 0:on.email).trim()};pe(H0(w,I)),B(0),N(!0)}function Eo(){const I={name:Ee(on==null?void 0:on.displayName).trim(),email:Ee(on==null?void 0:on.email).trim()};pe(H0(w,I)),B(0),N(!1)}function Gi(){return U.fullName.trim()?U.email.trim()?U.phone.trim()?U.age.trim()?U.sex.trim()?U.heightCm.trim()?U.weightKg.trim()?U.pastProgram.trim()?U.trainingFrequency.trim()?U.workoutDuration.trim()?U.workoutLocation.trim()?U.equipment.trim()?U.objectivePrimary.trim()?U.objectiveReason.trim()?U.expectedTimeline.trim()?null:"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function Ln(){if(!pt){s("Seleziona prima un cliente.");return}const I=Gi();if(I){s(I);return}const X={fullName:U.fullName.trim(),age:U.age.trim(),sex:U.sex.trim(),email:U.email.trim(),phone:U.phone.trim(),discoverySource:U.discoverySource.trim(),heightCm:U.heightCm.trim(),weightKg:U.weightKg.trim(),pastProgram:U.pastProgram.trim(),trainingFrequency:U.trainingFrequency.trim(),workoutDuration:U.workoutDuration.trim(),workoutLocation:U.workoutLocation.trim(),equipment:U.equipment.trim(),trainingTypeHistory:U.trainingTypeHistory.trim(),hasInjuries:U.hasInjuries.trim(),injuryDetails:U.injuryDetails.trim(),objectivePrimary:U.objectivePrimary.trim(),objectiveReason:U.objectiveReason.trim(),expectedTimeline:U.expectedTimeline.trim(),supportPreference:U.supportPreference.trim(),supportPreferenceOther:U.supportPreferenceOther.trim(),investmentRange:U.investmentRange.trim(),whatBlockedSoFar:U.whatBlockedSoFar.trim(),oneThingToImprove:U.oneThingToImprove.trim(),importanceScore:Number(U.importanceScore||0),riskIfNoChange:U.riskIfNoChange.trim(),readiness:U.readiness.trim(),goal:U.objectivePrimary.trim(),experienceLevel:U.pastProgram.trim(),trainingDaysPerWeek:YL(U.trainingFrequency),notes:U.notes.trim(),compiledBy:"coach"};E(!0);try{await M2(pt,X),P(X),a("Anagrafica cliente salvata con successo."),N(!1)}catch(ee){s(kt(ee))}finally{E(!1)}}async function oa(){const I=Cr.trim();if(!I){s("Inserisci un titolo per la scheda.");return}const X=zi.map(ee=>({name:ee.name.trim(),notes:ee.notes.trim(),advancedMethod:ee.advancedMethod||"",restPauseNotes:ee.restPauseNotes.trim(),dropSetNotes:ee.dropSetNotes.trim(),advancedMethodNotes:ee.advancedMethod==="rest_pause"?ee.restPauseNotes.trim():ee.advancedMethod==="drop_set"?ee.dropSetNotes.trim():"",sets:mt==="series_reps"&&Number(ee.sets)||0,reps:mt==="series_reps"&&Number(ee.reps)||0,workValue:mt==="circuit"&&Number(ee.workValue)||0,weightKg:Number(ee.weightKg)||0,restSeconds:Number(ee.restSeconds)||0,videoUrl:ee.videoUrl.trim(),imageUrl:ee.imageUrl.trim(),mediaUrl:(ee.videoUrl||ee.imageUrl||ee.mediaUrl).trim()})).filter(ee=>ee.name.length>0);if(X.length===0){s("Aggiungi almeno un esercizio con nome.");return}if(Sn)await jn(()=>F2(Sn.id,{title:I,kind:mt,warmup:fr.trim(),notes:Pr.trim(),status:"active",exercises:X}),"Scheda aggiornata con successo."),dt(Sn.id);else{const ee=await jn(()=>l0({title:I,kind:mt,warmup:fr.trim(),notes:Pr.trim(),status:"active",exercises:X}),"Scheda creata.");ee!=null&&ee.id&&dt(ee.id)}qr(!1),x(!1)}function hn(){qr(!0),dt(""),Tt("series_reps"),Kr(""),Bn(""),Ar(""),Wn([qs()]),x(!0)}function So(I){const X=Ze.find(Ce=>Ce.id===I);if(!X)return;qr(!1),dt(X.id),Tt(X.kind==="circuit"?"circuit":"series_reps"),Kr(X.title??""),Bn(Ee(X.warmup)),Ar(Ee(X.notes));const ee=Wa(X.exercises).filter(Ce=>Ce.name.trim().length>0);Wn(ee.length>0?ee:[qs()]),x(!0)}function To(){qr(!1),Ki(),x(!1)}async function aa(I,X){if(X){if(!X.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}Re(I);try{const ee=(Be==null?void 0:Be.id)||(e==null?void 0:e.uid)||"coach-draft",Ce=await z2(ee,X);We(I,{imageUrl:Ce,mediaUrl:Ce}),a("Media caricato con successo.")}catch(ee){console.error("Media upload failed:",ee),s(kt(ee))}finally{Re(null)}}}async function Cs(I){const X=Ze.find(Ce=>Ce.id===I);!X||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await jn(()=>U2(X.id),"Scheda eliminata con successo."),dt(Ce=>Ce===X.id?"":Ce),x(!1),z(!1))}async function Ps(I){const X=Ze.find(He=>He.id===I);if(!X)return;const ee=Wa(X.exercises).map(He=>({name:He.name,notes:He.notes,advancedMethod:He.advancedMethod,advancedMethodNotes:He.advancedMethodNotes,restPauseNotes:He.restPauseNotes,dropSetNotes:He.dropSetNotes,sets:He.sets,reps:He.reps,workValue:He.workValue,weightKg:He.weightKg,restSeconds:He.restSeconds,videoUrl:He.videoUrl,imageUrl:He.imageUrl,mediaUrl:He.mediaUrl})),Ce=await jn(()=>l0({title:`${X.title||"Scheda"} (Copia)`,kind:X.kind==="circuit"?"circuit":"series_reps",notes:Ee(X.notes),status:X.status==="archived"?"draft":"active",exercises:ee}),"Scheda duplicata.");Ce!=null&&Ce.id&&dt(Ce.id)}async function vi(){if(!Be){s("Seleziona prima una scheda.");return}if(Gr.length===0){s("Seleziona almeno un cliente da assegnare.");return}await jn(()=>Promise.all(Gr.map(I=>V2(Be.id,I))),Gr.length===1?"Scheda assegnata al cliente.":"Scheda assegnata ai clienti selezionati."),$i([])}async function Qi(I){Be&&await jn(()=>j2(Be.id,I),"Assegnazione rimossa.")}function Tl(I,X){var Yn;const ee=(Yn=I.assignmentDetails)==null?void 0:Yn[X];if(!ee||ee.mode!=="timed")return{label:"Permanente",tone:"success"};const Ce=Vp(ee.startsAt),He=Vp(ee.expiresAt);if(!He)return{label:"Permanente",tone:"success"};if(Ce){const Jn=new Date(Ce).getTime();if(!Number.isNaN(Jn)&&Jn>Date.now())return{label:`Inizia il ${Fa(Ce)}`,tone:"warning"}}const kr=new Date(He).getTime();if(Number.isNaN(kr))return{label:"Permanente",tone:"success"};const pr=Date.now();if(kr<=pr)return{label:"Scaduta",tone:"danger"};const Nr=10080*60*1e3,en=kr-pr<=Nr?"warning":"success";return{label:`Scade il ${Fa(He)}`,tone:en}}function Zr(I){var pr;if(!Be)return;const X=(pr=Be.assignmentDetails)==null?void 0:pr[I],ee=(X==null?void 0:X.mode)==="timed",Ce=typeof(X==null?void 0:X.weeks)=="number"&&X.weeks>0?X.weeks:4,He=Vp(X==null?void 0:X.startsAt),kr=He?new Date(He):new Date;Vn(I),mi(ee?"timed":"permanent"),Ts(String(Ce)),Is(q0(kr)),Qr(!0)}function fn(){if(En!=="timed")return null;const I=Number(Hn);if(!Number.isFinite(I)||I<1)return null;const X=new Date(Xr);if(Number.isNaN(X.getTime()))return null;const ee=new Date(X.getTime()+I*7*24*60*60*1e3);return{from:Fa(X.toISOString()),to:Fa(ee.toISOString())}}async function Xi(){if(!(!Be||!Rr)){if(En==="timed"){const I=Number(Hn);if(!Number.isFinite(I)||I<1){s("Inserisci un numero settimane valido.");return}const X=new Date(Xr);if(Number.isNaN(X.getTime())){s("Seleziona una data di inizio valida.");return}await jn(()=>u0(Be.id,Rr,I,X.toISOString()),"Durata assegnazione aggiornata.")}else await jn(()=>u0(Be.id,Rr,null,null),"Assegnazione impostata come permanente.");Qr(!1),Vn("")}}async function ei(I,X){at(I);try{if(X==="activate"){const ee=St.find(Ce=>Ce.uid===I);(ee==null?void 0:ee.status)==="disabled"?(await i0(I),a("Coach sbloccato con successo.")):(ee==null?void 0:ee.status)==="active_paid"?(await v2(I),a("Abbonamento rinnovato di 1 anno.")):(await i0(I),a("Abbonamento attivato."))}else await y2(I),a("Abbonamento disattivato.");await qi()}catch(ee){s(kt(ee))}finally{at("")}}async function yi(){Ge(!0);try{await oI();const I=await r0();je(I),a("Periodo di prova attivato.")}catch(I){s(kt(I))}finally{Ge(!1)}}async function vt(){j(!0);try{await aI(),await Sr().catch(()=>{}),r("/auth",{replace:!0})}catch(I){s(kt(I))}finally{j(!1),R(!1)}}async function _i(){const I=fe.replace(/[^\d+]/g,"").trim();if(I.length<8){s("Inserisci un numero WhatsApp valido.");return}_e(!0);try{const X=await _2(I);k(X.phone),be(X.phone),Ve(!1),a("Numero aggiornato. I clienti associati useranno subito il nuovo contatto.")}catch(X){s(kt(X))}finally{_e(!1)}}async function Xe(){const I=Ee(le==null?void 0:le.coachCode).trim();if(!I){s("Codice coach non disponibile.");return}try{await navigator.clipboard.writeText(I),a("Codice coach copiato.")}catch{s("Copia non riuscita. Copia manualmente il codice.")}}return g.jsxs(gI,{role:n==="trainer"?"trainer":"admin",subtitle:"",title:"Area Coach",sections:Wi,activeSection:it,onSectionChange:I=>Zt(I),children:[le!=null&&le.requiresTrialAcceptance?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>{I.currentTarget===I.target&&Sr().finally(()=>r("/auth",{replace:!0}))},children:g.jsxs("article",{className:"card modal-card fullscreen-gate",onClick:I=>I.stopPropagation(),children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h2",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),g.jsx("button",{className:"btn",type:"button",disabled:Me,onClick:()=>void yi(),children:Me?"Attivazione...":"Accetta e continua"}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Sr().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,it==="code"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Il tuo codice coach"}),g.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),g.jsxs("div",{className:"coach-code-wrap",children:[g.jsx("p",{className:"coach-code",children:(le==null?void 0:le.coachCode)||"Caricamento..."}),g.jsx("button",{className:"icon-btn coach-copy-btn",type:"button","aria-label":"Copia codice coach",title:"Copia codice coach",onClick:()=>void Xe(),children:""})]}),Me?g.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,g.jsxs("div",{className:"client-info-block",children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:"Numero WhatsApp coach"}),Ue?null:g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica numero coach",title:"Modifica numero coach",onClick:()=>Ve(!0),children:""})]}),Ue?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Numero telefono / WhatsApp",g.jsx("input",{type:"tel",value:fe,onChange:I=>be(I.target.value),placeholder:"Es. 3405882404"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:ae,onClick:()=>{be(L),Ve(!1)},children:"Annulla"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:ae,onClick:()=>void _i(),children:ae?"Salvataggio...":"Salva"})]})]}):g.jsx("p",{className:"hint",children:g.jsx("strong",{children:L||"Non configurato"})})]}),le!=null&&le.isSupervisor?g.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"hint",children:["Stato accesso: ",g.jsx("strong",{children:K0(le==null?void 0:le.status)}),"  ","Scadenza: ",g.jsx("strong",{children:Fa((le==null?void 0:le.expiresAt)??(le==null?void 0:le.trialEndsAt)??(le==null?void 0:le.subscriptionEndsAt))})]}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo coach perderai accesso, abbonamento, clienti associati e tutti i dati collegati."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>R(!0),children:"Elimina il mio profilo"})]})]}):null,t&&it==="supervisor"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Gestione coach (Supervisor)"}),g.jsxs("label",{children:["Cerca coach per nome o email",g.jsx("input",{value:qe,onChange:I=>ot(I.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),g.jsxs("div",{className:"supervisor-list",children:[Qn.map(I=>{const X=jp(I),ee=JL(I.status,X);return g.jsxs("article",{className:"supervisor-row",children:[g.jsxs("div",{children:[g.jsx("p",{children:g.jsx("strong",{children:I.displayName||"Coach senza nome"})}),g.jsx("p",{className:"hint",children:I.email}),g.jsxs("p",{className:"hint",children:["Codice: ",I.coachCode||"-"]}),g.jsxs("p",{className:"hint",children:["Stato: ",K0(I.isSupervisor?"supervisor_active":I.status)]}),g.jsxs("p",{className:"hint",children:["Scadenza: ",Fa(X)]}),ee?g.jsx("span",{className:`status-chip status-chip-${ee.tone}`.trim(),children:ee.label}):null]}),g.jsxs("div",{className:"supervisor-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void ei(I.uid,"activate"),children:I.status==="disabled"?"Sblocca":I.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void ei(I.uid,"disable"),children:"Disattiva"})]})]},I.uid)}),Qn.length===0?g.jsx("article",{className:"supervisor-row",children:g.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,it==="clients"||it==="plans"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:it==="plans"?"Schede tecniche":"Gestione cliente"}),it==="clients"?g.jsxs("label",{children:["Clienti registrati",g.jsx(W0,{styles:yo,options:Yr,value:ia,onChange:I=>Vt((I==null?void 0:I.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}):null,it!=="plans"?g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Hi(),children:"Aggiorna dati"}):null,it==="clients"&&u.length===0?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Nessun cliente associato"}),g.jsx("p",{className:"hint",children:"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):g.jsxs(g.Fragment,{children:[it==="clients"?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Anagrafica cliente"}),g.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),g.jsx("button",{className:"btn",type:"button",onClick:wo,disabled:_||!pt,children:w?"Modifica anagrafica completa":"Compila anagrafica completa"}),gi?g.jsx("a",{className:"btn btn-whatsapp",href:gi,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):g.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Anagrafica"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Nome:"})," ",xt(w==null?void 0:w.fullName)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Et:"})," ",xt(w==null?void 0:w.age)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Sesso:"})," ",xt(w==null?void 0:w.sex)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Email:"})," ",xt(w==null?void 0:w.email)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Telefono:"})," ",xt(w==null?void 0:w.phone)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Come ci ha conosciuto:"})," ",xt(w==null?void 0:w.discoverySource)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Stato fisico e allenamento"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Altezza:"})," ",xt(w==null?void 0:w.heightCm)," cm"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Peso:"})," ",xt(w==null?void 0:w.weightKg)," kg"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Esperienza programmi:"})," ",xt((w==null?void 0:w.pastProgram)||(w==null?void 0:w.experienceLevel))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti settimanali:"})," ",xt((w==null?void 0:w.trainingFrequency)||(w==null?void 0:w.trainingDaysPerWeek))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Durata sessione:"})," ",xt(w==null?void 0:w.workoutDuration)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Luogo allenamento:"})," ",xt(w==null?void 0:w.workoutLocation)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Attrezzatura:"})," ",xt(w==null?void 0:w.equipment)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti svolti:"})," ",xt(w==null?void 0:w.trainingTypeHistory)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Infortuni/problemi:"})," ",xt(w==null?void 0:w.hasInjuries)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Dettagli infortuni:"})," ",xt(w==null?void 0:w.injuryDetails)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Obiettivi"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Obiettivo principale:"})," ",xt((w==null?void 0:w.objectivePrimary)||(w==null?void 0:w.goal))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Perch:"})," ",xt(w==null?void 0:w.objectiveReason)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Timeline risultati:"})," ",xt(w==null?void 0:w.expectedTimeline)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",xt(w==null?void 0:w.whatBlockedSoFar)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",xt(w==null?void 0:w.oneThingToImprove)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Importanza obiettivo:"})," ",xt(w==null?void 0:w.importanceScore)," / 10"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Rischio se non cambia:"})," ",xt(w==null?void 0:w.riskIfNoChange)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",xt(w==null?void 0:w.notes)]})]})]}):null,it==="plans"?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"hint",children:Ze.length>0?`Hai ${Ze.length} scheda/e create: puoi modificarle, eliminarle o assegnarle ai clienti.`:"Non hai ancora schede create: inizia con una nuova scheda."}),g.jsx("div",{className:"supervisor-actions",children:g.jsx("button",{className:"btn",disabled:_,onClick:hn,type:"button",children:"Crea nuova scheda"})}),Ze.length>0?g.jsx("div",{className:"plan-carousel",children:Ze.map(I=>g.jsxs("article",{className:"card plan-card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:I.title||"Scheda senza titolo"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Duplica scheda",title:"Duplica scheda",onClick:()=>void Ps(I.id),children:""})]}),g.jsxs("p",{className:"hint",children:["Tipo: ",I.kind==="circuit"?"Circuito":"Serie e reps"]}),g.jsxs("p",{className:"hint",children:["Esercizi: ",Wa(I.exercises).length]}),g.jsxs("p",{className:"hint",children:["Assegnata a: ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]}),g.jsxs("p",{className:"hint",children:["Modifiche peso clienti: ",e4(I,qn)]}),g.jsxs("div",{className:"plan-card-actions",children:[g.jsx("button",{className:"btn btn-ghost",disabled:_,onClick:()=>r(`/app/coach/plan/${I.id}/preview`),type:"button",children:"Visualizza"}),g.jsx("button",{className:"btn",disabled:_,onClick:()=>So(I.id),type:"button",children:"Modifica"}),g.jsx("button",{className:"btn btn-danger",disabled:_,onClick:()=>void Cs(I.id),type:"button",children:"Elimina"})]})]},I.id))}):g.jsx("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:g.jsx("p",{className:"hint",children:"Nessuna scheda creata al momento."})})]}):null]})]}):null,ne?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&Eo(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Anagrafica completa cliente"}),g.jsxs("p",{className:"hero-sub",children:["Step ",de+1," di ",ru.length,"  Completamento ",Gn,"%"]}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:`${Gn}%`}})}),g.jsx("div",{className:"step-tabs",children:ru.map((I,X)=>g.jsx("button",{className:`step-tab ${de===X?"step-tab-active":""}`.trim(),type:"button",onClick:()=>B(X),children:I},I))}),de===0?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:U.fullName,onChange:I=>gt("fullName",I.target.value)})]}),g.jsxs("label",{children:["Et *",g.jsx("input",{type:"number",min:12,max:99,onFocus:Ai,value:U.age,onChange:I=>gt("age",Ha(I.target.value))})]}),g.jsxs("label",{children:["Sesso *",g.jsx("input",{value:U.sex,onChange:I=>gt("sex",I.target.value)})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{type:"email",value:U.email,onChange:I=>gt("email",I.target.value)})]}),g.jsxs("label",{children:["Telefono *",g.jsx("input",{type:"tel",value:U.phone,onChange:I=>gt("phone",I.target.value)})]}),g.jsxs("label",{children:["Come ci ha conosciuto",g.jsx("input",{value:U.discoverySource,onChange:I=>gt("discoverySource",I.target.value)})]})]}):null,de===1?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Altezza (cm) *",g.jsx("input",{type:"number",min:100,max:250,onFocus:Ai,value:U.heightCm,onChange:I=>gt("heightCm",Ha(I.target.value))})]}),g.jsxs("label",{children:["Peso (kg) *",g.jsx("input",{type:"number",min:30,max:250,onFocus:Ai,value:U.weightKg,onChange:I=>gt("weightKg",Ha(I.target.value))})]}),g.jsxs("label",{children:["Programmi precedenti *",g.jsx("input",{value:U.pastProgram,onChange:I=>gt("pastProgram",I.target.value),placeholder:"Es. Si con coach online"})]}),g.jsxs("label",{children:["Frequenza allenamenti *",g.jsx("input",{value:U.trainingFrequency,onChange:I=>gt("trainingFrequency",I.target.value),placeholder:"Es. 3-4 a settimana"})]}),g.jsxs("label",{children:["Durata allenamento *",g.jsx("input",{value:U.workoutDuration,onChange:I=>gt("workoutDuration",I.target.value),placeholder:"Es. 45 minuti"})]}),g.jsxs("label",{children:["Dove si allena *",g.jsx("input",{value:U.workoutLocation,onChange:I=>gt("workoutLocation",I.target.value)})]}),g.jsxs("label",{children:["Attrezzatura disponibile *",g.jsx("input",{value:U.equipment,onChange:I=>gt("equipment",I.target.value)})]}),g.jsxs("label",{children:["Allenamenti fatti",g.jsx("textarea",{value:U.trainingTypeHistory,onChange:I=>gt("trainingTypeHistory",I.target.value)})]}),g.jsxs("label",{children:["Infortuni/problemi",g.jsx("input",{value:U.hasInjuries,onChange:I=>gt("hasInjuries",I.target.value),placeholder:"Si/No"})]}),g.jsxs("label",{children:["Dettagli infortuni",g.jsx("textarea",{value:U.injuryDetails,onChange:I=>gt("injuryDetails",I.target.value)})]})]}):null,de===2?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Obiettivo principale *",g.jsx("input",{value:U.objectivePrimary,onChange:I=>gt("objectivePrimary",I.target.value)})]}),g.jsxs("label",{children:["Perch questo obiettivo? *",g.jsx("textarea",{value:U.objectiveReason,onChange:I=>gt("objectiveReason",I.target.value)})]}),g.jsxs("label",{children:["Timeline risultati *",g.jsx("input",{value:U.expectedTimeline,onChange:I=>gt("expectedTimeline",I.target.value)})]}),g.jsxs("label",{children:["Cosa lo ha bloccato",g.jsx("textarea",{value:U.whatBlockedSoFar,onChange:I=>gt("whatBlockedSoFar",I.target.value)})]}),g.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",g.jsx("textarea",{value:U.oneThingToImprove,onChange:I=>gt("oneThingToImprove",I.target.value)})]}),g.jsxs("label",{children:["Importanza obiettivo (1-10)",g.jsx("input",{type:"number",min:1,max:10,onFocus:Ai,value:U.importanceScore,onChange:I=>gt("importanceScore",Ha(I.target.value))})]}),g.jsxs("label",{children:["Rischio se non cambia",g.jsx("textarea",{value:U.riskIfNoChange,onChange:I=>gt("riskIfNoChange",I.target.value)})]}),g.jsxs("label",{children:["Note coach (opzionale)",g.jsx("textarea",{value:U.notes,onChange:I=>gt("notes",I.target.value)})]})]}):null,g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:de===0,onClick:()=>B(I=>Math.max(I-1,0)),children:"Indietro"}),de<ru.length-1?g.jsx("button",{className:"btn",type:"button",onClick:()=>B(I=>Math.min(I+1,ru.length-1)),children:"Continua"}):g.jsx("button",{className:"btn",type:"button",onClick:()=>void Ln(),disabled:_,children:_?"Salvataggio...":"Salva"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Eo,children:"Chiudi"})]})}):null,D?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&To(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:Sn?"Modifica scheda":"Compila la scheda"}),g.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),g.jsxs("div",{className:"step-tabs plan-kind-tabs",children:[g.jsx("button",{className:`step-tab ${mt==="series_reps"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>Jr("series_reps"),children:"Serie e reps"}),g.jsx("button",{className:`step-tab ${mt==="circuit"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>Jr("circuit"),children:"Circuito"})]}),g.jsxs("label",{children:["Titolo scheda *",g.jsx("input",{value:Cr,onChange:I=>Kr(I.target.value),placeholder:"Forza 4 settimane",required:!0})]}),g.jsxs("label",{children:["Riscaldamento (opzionale)",g.jsx("textarea",{value:fr,onChange:I=>Bn(I.target.value),placeholder:"Es. 8-10 min mobilit, attivazione scapole, squat a corpo libero..."})]}),g.jsxs("label",{children:["Note (opzionale)",g.jsx("textarea",{value:Pr,onChange:I=>Ar(I.target.value),placeholder:"Note utili per il cliente"})]}),zi.map((I,X)=>g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("h2",{children:["Esercizio ",X+1]}),g.jsx("button",{className:"icon-btn",type:"button",onClick:()=>Sl(X),"aria-label":`Reset esercizio ${X+1}`,title:"Reset esercizio",children:""})]}),g.jsxs("label",{children:["Nome esercizio",g.jsx("input",{value:I.name,onChange:ee=>We(X,{name:ee.target.value}),placeholder:"Es. Squat bilanciere"})]}),g.jsxs("label",{children:["Note esercizio",g.jsx("textarea",{value:I.notes,onChange:ee=>We(X,{notes:ee.target.value}),placeholder:"Note utili per questo esercizio"})]}),g.jsxs("div",{className:"exercise-fields-inline",children:[mt==="series_reps"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Serie",g.jsx("input",{type:"number",min:0,inputMode:"numeric",onFocus:Ai,value:I.sets,onChange:ee=>We(X,{sets:iu(ee.target.value)})})]}),g.jsxs("label",{children:["Ripetizioni",g.jsx("input",{type:"number",min:0,inputMode:"numeric",onFocus:Ai,value:I.reps,onChange:ee=>We(X,{reps:iu(ee.target.value)})})]})]}):g.jsxs("label",{children:["Reps/tempo di lavoro",g.jsx("input",{type:"number",min:0,inputMode:"numeric",onFocus:Ai,value:I.workValue,onChange:ee=>We(X,{workValue:iu(ee.target.value)})})]}),g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",onFocus:Ai,value:I.weightKg,onChange:ee=>We(X,{weightKg:iu(ee.target.value)})})]}),g.jsxs("label",{children:["Recupero (sec)",g.jsx("input",{type:"number",min:0,inputMode:"numeric",onFocus:Ai,value:I.restSeconds,onChange:ee=>We(X,{restSeconds:iu(ee.target.value)})})]})]}),g.jsxs("div",{className:"exercise-method-toggle",children:[g.jsx("p",{className:"hint",children:"Metodo opzionale"}),g.jsxs("div",{className:"exercise-method-toggle-row",children:[g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="rest_pause"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>We(X,I.advancedMethod==="rest_pause"?{advancedMethod:""}:{advancedMethod:"rest_pause"}),children:"Rest Pause"}),g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="drop_set"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>We(X,I.advancedMethod==="drop_set"?{advancedMethod:""}:{advancedMethod:"drop_set"}),children:"Drop set"})]})]}),I.advancedMethod?g.jsxs("label",{children:[I.advancedMethod==="rest_pause"?"Note Rest Pause":"Note Drop set",g.jsx("textarea",{value:I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes,onChange:ee=>We(X,I.advancedMethod==="rest_pause"?{restPauseNotes:ee.target.value,advancedMethodNotes:ee.target.value}:{dropSetNotes:ee.target.value,advancedMethodNotes:ee.target.value}),placeholder:"Inserisci indicazioni per il cliente"})]}):null,g.jsxs("label",{children:["URL video (YouTube o link diretto)",g.jsx("input",{value:I.videoUrl,onChange:ee=>We(X,{videoUrl:ee.target.value,mediaUrl:ee.target.value||I.imageUrl}),placeholder:"https://..."})]}),g.jsxs("label",{children:["Carica un'immagine (puoi tenerla insieme al video)",g.jsx("input",{type:"file",accept:"image/*",onChange:ee=>{var Ce;return void aa(X,((Ce=ee.target.files)==null?void 0:Ce[0])??null)},disabled:ve===X}),bd(I.imageUrl)?g.jsx("img",{src:I.imageUrl,alt:`Anteprima esercizio ${X+1}`,className:"exercise-upload-preview"}):null]}),bd(I.imageUrl)?g.jsxs("p",{className:"hint",children:["Immagine caricata."," ",g.jsx("button",{className:"btn-link",type:"button",onClick:()=>We(X,{imageUrl:"",mediaUrl:I.videoUrl}),children:"Rimuovi"})]}):null,ve===X?g.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>sa(X),children:"Rimuovi esercizio"})]},`exercise-${X}`)),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:_o,children:"Aggiungi esercizio"}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:To,children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||xr,onClick:()=>void oa(),children:xr?"Attendi caricamento media...":"Salva"})]})]})}):null,b&&Nt?g.jsx("section",{id:"plan-print-modal",className:"modal-overlay preview-modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&z(!1),children:g.jsxs("article",{className:"card modal-card print-sheet preview-modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("div",{className:"preview-head-main",children:[g.jsx("button",{className:"icon-btn mobile-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>z(!1),children:""}),g.jsx("h2",{children:"Scheda"})]}),g.jsxs("div",{className:"preview-head-actions screen-only",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:u.length===0,onClick:()=>{$i([]),K(!0)},children:"Assegna"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Stampa scheda",title:"Stampa scheda",onClick:()=>void Xn(),children:""}),g.jsx("button",{className:"icon-btn desktop-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>z(!1),children:""})]})]}),g.jsxs("p",{className:"hint",children:["Clienti assegnati:"," ",g.jsx("strong",{children:Array.isArray(Nt.assignedClientIds)&&Nt.assignedClientIds.length>0?Nt.assignedClientIds.map(I=>qn[I]||I).join(", "):"Nessuno"})]}),g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Titolo programma"}),g.jsx("h3",{children:Nt.title||"Senza titolo"})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:Nt.kind==="circuit"?"Circuito":"Serie e reps"})]}),Ee(Nt.warmup).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",Ee(Nt.warmup)]})}):null,Ee(Nt.notes).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",Ee(Nt.notes)]})}):null,Kn.length>0?g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Feedback peso cliente"}),g.jsx("p",{className:"hint",children:"Mostrato solo quando un cliente cambia il peso rispetto alla scheda base."}),Kn.map(I=>g.jsxs("div",{className:"divider-block",children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:I.clientLabel})}),g.jsx("ul",{className:"list",children:I.lines.map(X=>g.jsx("li",{children:X},`${I.clientId}-${X}`))})]},`weight-feedback-${I.clientId}`))]}):null,g.jsx("div",{className:"exercise-grid",children:Wa(Nt.exercises).map((I,X)=>g.jsx("article",{className:"exercise-card",children:(()=>{const ee=`${Nt.id}-${X}`,Ce=Z[ee]!==!1;return g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"exercise-name",children:I.name||`Esercizio ${X+1}`}),g.jsxs("div",{className:"exercise-meta",children:[Nt.kind==="circuit"?g.jsxs("span",{children:[I.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[I.sets||"-"," serie"]}),g.jsxs("span",{children:[I.reps||"-"," reps"]})]}),g.jsxs("span",{children:[I.weightKg||0," kg"]}),g.jsxs("span",{children:[I.restSeconds||0," sec recupero"]})]}),I.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",I.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,I.advancedMethod&&(I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes]}):null,I.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",I.notes]}):null,I.imageUrl||I.videoUrl?g.jsxs(g.Fragment,{children:[bd(I.imageUrl)?g.jsxs(g.Fragment,{children:[Ce?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:I.imageUrl,alt:`Media esercizio ${X+1}`,className:"exercise-upload-preview",style:{display:Ce?"none":"block"},onLoad:()=>W(He=>({...He,[ee]:!1})),onError:()=>W(He=>({...He,[ee]:!1}))})]}):null,ob(I.videoUrl)?g.jsxs(g.Fragment,{children:[g.jsx("a",{className:"btn-link screen-only",href:I.videoUrl,target:"_blank",rel:"noreferrer",children:"Apri video"}),g.jsxs("a",{className:"hint print-only print-video-link",href:I.videoUrl,target:"_blank",rel:"noreferrer",children:["URL video: ",I.videoUrl]})]}):null]}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]})})()},`preview-ex-${X}`))})]})}):null,Q&&Be?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&K(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h2",{children:"Gestisci assegnazioni"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Chiudi gestione assegnazioni",title:"Chiudi",onClick:()=>K(!1),children:""})]}),g.jsxs("p",{className:"hint",children:["Scheda: ",Be.title||"Scheda senza titolo"]}),g.jsxs("label",{children:["Clienti",g.jsx(W0,{styles:yo,options:ra,value:bs,onChange:I=>$i(I.map(X=>X.value)),placeholder:ra.length===0?"Tutti i clienti sono gi assegnati":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1})]}),g.jsx("div",{className:"action-row-split",children:g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||Gr.length===0,onClick:()=>void vi(),children:"Assegna"})}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Clienti assegnati"}),Array.isArray(Be.assignedClientIds)&&Be.assignedClientIds.length>0?g.jsx("ul",{className:"assigned-client-list",children:Be.assignedClientIds.map(I=>{const X=Tl(Be,I);return g.jsxs("li",{className:"assigned-client-item",children:[g.jsxs("div",{children:[g.jsx("span",{className:"assigned-client-name",children:qn[I]||I}),g.jsx("span",{className:`assignment-status assignment-status-${X.tone}`.trim(),children:X.label})]}),g.jsxs("div",{className:"assigned-client-actions",children:[g.jsx("button",{className:"icon-btn assigned-client-time-btn",type:"button","aria-label":`Imposta durata ${qn[I]||I}`,title:"Imposta durata",disabled:_,onClick:()=>Zr(I),children:""}),g.jsx("button",{className:"icon-btn icon-btn-danger assigned-client-remove-btn",type:"button","aria-label":`Rimuovi ${qn[I]||I}`,title:"Rimuovi cliente",disabled:_,onClick:()=>void Qi(I),children:""})]})]},I)})}):g.jsx("p",{className:"hint",children:"Nessun cliente assegnato a questa scheda."})]})]})}):null,Bi&&Be?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&Qr(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Durata assegnazione"}),g.jsxs("p",{className:"hint",children:["Cliente: ",g.jsx("strong",{children:qn[Rr]||Rr})]}),g.jsxs("div",{className:"step-tabs",children:[g.jsx("button",{className:`step-tab ${En==="permanent"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>mi("permanent"),children:"Permanente"}),g.jsx("button",{className:`step-tab ${En==="timed"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>mi("timed"),children:"A tempo"})]}),En==="timed"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Data inizio",g.jsx("input",{type:"date",value:Xr,onChange:I=>Is(I.target.value)})]}),g.jsxs("label",{children:["Settimane",g.jsx("input",{type:"number",min:1,step:1,onFocus:Ai,value:Hn,onChange:I=>Ts(Ha(I.target.value))})]}),fn()?g.jsxs("p",{className:"hint",children:["Disponibile dal ",g.jsx("strong",{children:fn().from})," al ",g.jsx("strong",{children:fn().to})]}):null]}):g.jsx("p",{className:"hint",children:"La scheda rester sempre disponibile finch non rimuovi l'assegnazione."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Qr(!1),children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_,onClick:()=>void Xi(),children:"Salva"})]})]})}):null,A&&!(le!=null&&le.isSupervisor)?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&R(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo coach"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente dati, abbonamento e associazioni clienti legate al tuo account coach."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:V,onClick:()=>R(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:V,onClick:()=>void vt(),children:V?"Eliminazione...":"Conferma eliminazione"})]})]})}):null,it==="overview"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Panoramica"}),g.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),g.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),g.jsx("ul",{className:"list",children:f.slice(0,5).map(I=>{var X;return g.jsxs("li",{children:[g.jsx("strong",{children:I.title}),"  ",((X=I.exercises)==null?void 0:X.length)??0," esercizi  assegnata a ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]},I.id)})})]}):null,_?g.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function Bt(n){return typeof n=="string"?n:n==null?"":String(n)}function ar(n){return n.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function n4(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function r4(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function ub(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number(Bt(t.weight).replace(/[^\d.-]/g,"")),s=Bt(t.advancedMethod).trim(),a=s==="rest_pause"||s==="drop_set"?s:"",u=Bt(t.advancedMethodNotes),h=Bt(t.restPauseNotes),f=Bt(t.dropSetNotes),m=Bt(t.mediaUrl).trim(),_=Bt(t.videoUrl).trim(),E=Bt(t.imageUrl).trim(),w=_||(n4(m)?m:""),P=E||(r4(m)?m:"");return{name:Bt(t.name),notes:Bt(t.notes),advancedMethod:a,restPauseNotes:h||(a==="rest_pause"?u:""),dropSetNotes:f||(a==="drop_set"?u:""),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,workValue:Number(t.workValue??t.reps??10)||10,weightKg:Number(t.weightKg??r??0)||0,restSeconds:Number(t.restSeconds??60)||60,videoUrl:w,imageUrl:P}}).filter(e=>!!e):[]}function i4(n,e){const t=n.clientWeightOverrides&&typeof n.clientWeightOverrides=="object"?n.clientWeightOverrides:{},r=ub(n.exercises),s=[];for(const[a,u]of Object.entries(t)){if(!u||typeof u!="object")continue;const h=[];for(const[f,m]of Object.entries(u)){const _=Number(f);if(!Number.isInteger(_)||_<0||_>=r.length)continue;const E=Number(m);if(!Number.isFinite(E))continue;const w=r[_],P=Number(w.weightKg||0);if(E===P)continue;const D=w.name.trim()||`Esercizio ${_+1}`;h.push(`${D}: ${P} kg -> ${E} kg`)}h.length!==0&&s.push({clientId:a,clientLabel:e[a]||a,lines:h})}return s}function s4(){const{user:n,role:e}=na(),t=dl(),{planId:r=""}=e1(),[s,a]=O.useState(!0),[u,h]=O.useState(""),[f,m]=O.useState(null),[_,E]=O.useState([]),[w,P]=O.useState(!0),[D,x]=O.useState(0),[b,z]=O.useState(!1);O.useEffect(()=>{async function R(){if(!(!r||!n)){a(!0),h("");try{await E2(r).catch(()=>{});const[V,j]=await Promise.all([L2(r),cI(n.uid)]);if(!V.exists()){h("Scheda non trovata.");return}m({id:V.id,...V.data()}),E(j.docs.map(L=>({id:L.id,...L.data()})))}catch(V){h(kt(V))}finally{a(!1)}}}R()},[r,n==null?void 0:n.uid]);const Q=O.useMemo(()=>_.reduce((R,V)=>{const j=Bt(V.displayName).trim()||Bt(V.email).trim()||V.id,L=Bt(V.uid).trim()||V.id;return R[L]=j,R[V.id]=j,R},{}),[_]),K=O.useMemo(()=>ub(f==null?void 0:f.exercises),[f==null?void 0:f.exercises]),Z=O.useMemo(()=>K.map(R=>R.imageUrl).filter(R=>!!R),[K]);if(O.useEffect(()=>{if(Z.length===0){P(!0),x(0);return}let R=!1;P(!1),x(Z.length);let V=0;const j=()=>{if(V+=1,R)return;const k=Math.max(Z.length-V,0);x(k),k===0&&P(!0)},L=Z.map(k=>{const fe=new Image,be=()=>{fe.onload=null,fe.onerror=null,j()};fe.onload=be,fe.onerror=be,fe.src=k;const Ue=window.setTimeout(be,9e3);return()=>window.clearTimeout(Ue)});return()=>{R=!0,L.forEach(k=>k())}},[Z]),!n)return g.jsx(Tr,{to:"/auth",replace:!0});if(e==="client")return g.jsx(Tr,{to:"/app/client",replace:!0});if(s)return g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card print-sheet",style:{width:"min(900px, 100%)"},children:[g.jsx("p",{className:"eyebrow",children:"Scheda"}),g.jsx("h1",{children:"Caricamento in corso..."})]})});if(u||!f)return g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card print-sheet",style:{width:"min(900px, 100%)"},children:[g.jsx("h1",{children:"Impossibile aprire la scheda"}),g.jsx("p",{className:"hero-sub",children:u||"Qualcosa non ha funzionato."}),g.jsx("button",{className:"btn btn-ghost screen-only",type:"button",onClick:()=>t("/app/coach#plans"),children:"Torna all'area coach"})]})});const W=f,ne=i4(f,Q),N=Array.isArray(W.assignedClientIds)&&W.assignedClientIds.length>0?W.assignedClientIds.map(R=>Q[R]||R).join(", "):"Nessuno";function A(){z(!0);const R=window.location.href,V=window.open("","_blank");if(!V){z(!1),window.print();return}const j=ne.length>0?`
      <section class="block">
        <h3>Feedback peso cliente</h3>
        ${ne.map(fe=>`
          <div class="sub">
            <p><strong>${ar(fe.clientLabel)}</strong></p>
            <ul>
              ${fe.lines.map(be=>`<li>${ar(be)}</li>`).join("")}
            </ul>
          </div>`).join("")}
      </section>`:"",L=K.map((fe,be)=>`
      <article class="exercise">
        <h4>${ar(fe.name||`Esercizio ${be+1}`)}</h4>
        <p class="meta">${W.kind==="circuit"?`${fe.workValue||"-"} reps/tempo`:`${fe.sets||"-"} serie  ${fe.reps||"-"} reps`}  ${fe.weightKg||0} kg  ${fe.restSeconds||0} sec recupero</p>
        ${fe.advancedMethod?`<p><strong>Metodo:</strong> ${fe.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"}</p>`:""}
        ${fe.advancedMethod&&(fe.advancedMethod==="rest_pause"?fe.restPauseNotes:fe.dropSetNotes).trim()?`<p><strong>Note metodo:</strong> ${ar(fe.advancedMethod==="rest_pause"?fe.restPauseNotes:fe.dropSetNotes)}</p>`:""}
        ${fe.notes.trim()?`<p><strong>Note:</strong> ${ar(fe.notes)}</p>`:""}
        ${fe.imageUrl?`<img src="${ar(fe.imageUrl)}" alt="Media esercizio ${be+1}" />`:""}
        ${fe.videoUrl?`<p><a href="${ar(fe.videoUrl)}" target="_blank" rel="noreferrer">URL video: ${ar(fe.videoUrl)}</a></p>`:""}
      </article>`).join(""),k=`<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>${ar(W.title||"Scheda")}</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 16px; color: #111; }
    h1, h2, h3, h4 { margin: 0 0 8px; }
    .block { border: 1px solid #e5e5e5; border-radius: 12px; padding: 12px; margin: 10px 0; }
    .sub { border-top: 1px solid #eee; margin-top: 8px; padding-top: 8px; }
    .exercise { border: 1px solid #e5e5e5; border-radius: 12px; padding: 12px; margin: 10px 0; break-inside: avoid; }
    .meta { color: #444; margin: 4px 0 8px; }
    img { display: block; width: 100%; max-height: 260px; object-fit: cover; border-radius: 10px; margin-top: 8px; }
    a { color: #b31217; }
    @media print { body { margin: 10mm; } }
  </style>
</head>
<body>
  <h1>Scheda</h1>
  <p><strong>Clienti assegnati:</strong> ${ar(N)}</p>
  <div class="block">
    <p><strong>Titolo programma:</strong> ${ar(W.title||"Senza titolo")}</p>
    <p><strong>Tipo scheda:</strong> ${ar(W.kind==="circuit"?"Circuito":"Serie e reps")}</p>
    ${Bt(W.warmup).trim()?`<p><strong>Riscaldamento:</strong> ${ar(Bt(W.warmup))}</p>`:""}
    ${Bt(W.notes).trim()?`<p><strong>Note coach:</strong> ${ar(Bt(W.notes))}</p>`:""}
  </div>
  ${j}
  ${L}
  <script>
    window.addEventListener('load', function () {
      setTimeout(function () { window.print(); }, 100);
    });
    window.addEventListener('afterprint', function () {
      setTimeout(function () {
        try { window.close(); } catch (e) {}
        if (!window.closed) {
          window.location.replace(${JSON.stringify(R)});
        }
      }, 200);
    });
  <\/script>
</body>
</html>`;V.document.open(),V.document.write(k),V.document.close(),setTimeout(()=>z(!1),600)}return g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card print-sheet",style:{width:"min(900px, 100%)"},children:[g.jsxs("div",{className:"exercise-head screen-only",children:[g.jsxs("div",{className:"preview-head-main",children:[g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Indietro",title:"Indietro",onClick:()=>t("/app/coach#plans"),children:""}),g.jsx("h2",{children:"Scheda"})]}),g.jsx("div",{className:"preview-head-actions",children:g.jsx("button",{className:"icon-btn btn-inline-loading",type:"button","aria-label":"Stampa scheda",title:w?"Stampa scheda":"Attendi caricamento immagini",onClick:()=>{!w||b||A()},disabled:!w||b,children:!w||b?g.jsx("span",{className:"spinner","aria-hidden":"true"}):""})})]}),w?null:g.jsxs("p",{className:"hint screen-only",children:["Carico immagini per la stampa... (",D," rimanenti)"]}),b?g.jsx("p",{className:"hint screen-only",children:"Apro anteprima di stampa..."}):null,g.jsxs("p",{className:"hint",children:["Clienti assegnati: ",g.jsx("strong",{children:N})]}),g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Titolo programma"}),g.jsx("h3",{children:W.title||"Senza titolo"})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:W.kind==="circuit"?"Circuito":"Serie e reps"})]}),Bt(W.warmup).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",Bt(W.warmup)]})}):null,Bt(W.notes).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",Bt(W.notes)]})}):null,ne.length>0?g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Feedback peso cliente"}),ne.map(R=>g.jsxs("div",{className:"divider-block",children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:R.clientLabel})}),g.jsx("ul",{className:"list",children:R.lines.map(V=>g.jsx("li",{children:V},`${R.clientId}-${V}`))})]},`weight-feedback-${R.clientId}`))]}):null,g.jsx("div",{className:"exercise-grid",children:K.map((R,V)=>g.jsxs("article",{className:"exercise-card",children:[g.jsx("p",{className:"exercise-name",children:R.name||`Esercizio ${V+1}`}),g.jsxs("div",{className:"exercise-meta",children:[W.kind==="circuit"?g.jsxs("span",{children:[R.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[R.sets||"-"," serie"]}),g.jsxs("span",{children:[R.reps||"-"," reps"]})]}),g.jsxs("span",{children:[R.weightKg||0," kg"]}),g.jsxs("span",{children:[R.restSeconds||0," sec recupero"]})]}),R.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",R.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,R.advancedMethod&&(R.advancedMethod==="rest_pause"?R.restPauseNotes:R.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",R.advancedMethod==="rest_pause"?R.restPauseNotes:R.dropSetNotes]}):null,R.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",R.notes]}):null,R.imageUrl?g.jsx("img",{src:R.imageUrl,alt:`Media esercizio ${V+1}`,className:"exercise-upload-preview"}):null,R.videoUrl?g.jsxs("a",{className:"hint print-video-link",href:R.videoUrl,target:"_blank",rel:"noreferrer",children:["URL video: ",R.videoUrl]}):null]},`print-ex-${V}`))})]})})}function o4(){const{user:n,role:e}=na(),t=dl(),{showError:r,showSuccess:s}=rh(),[a,u]=O.useState(!1),[h,f]=O.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return g.jsx(Tr,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return g.jsx(Tr,{to:"/app/coach",replace:!0});function m(w,P){f(D=>({...D,[w]:P}))}function _(){return h.fullName.trim()?h.email.trim()?h.phone.trim()?h.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function E(){const w=_();if(w){r(w);return}u(!0);try{await m2({fullName:h.fullName.trim(),email:h.email.trim(),phone:h.phone.trim(),coachCode:h.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(P){r(kt(P))}finally{u(!1)}}return g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),g.jsx("h1",{children:"Completa il tuo profilo"}),g.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:h.fullName,onChange:w=>m("fullName",w.target.value),placeholder:"Nome e cognome"})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{value:h.email,onChange:w=>m("email",w.target.value),type:"email",placeholder:"nome@esempio.com"})]}),g.jsxs("label",{children:["Numero di telefono *",g.jsx("input",{value:h.phone,onChange:w=>m("phone",w.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),g.jsxs("label",{children:["Codice coach *",g.jsx("input",{value:h.coachCode,onChange:w=>m("coachCode",w.target.value),placeholder:"Es. lorenzobeastly"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Sr(),children:"Esci e cambia account"}),g.jsx("button",{className:"btn btn-primary",disabled:a,type:"button",onClick:()=>void E(),children:a?"Salvataggio...":"Continua"})]})]})})}function cb(){return g.jsx("main",{className:"page page-center",children:g.jsxs("div",{className:"card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Caricamento in corso"})]})})}class a4 extends O.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Qualcosa non ha funzionato"}),g.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function Lp({allow:n,children:e}){const{user:t,role:r,initializing:s}=na();return s?g.jsx(cb,{}):t?r?n.includes(r)?e:g.jsx(Tr,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:g.jsx(Tr,{to:"/onboarding",replace:!0}):g.jsx(Tr,{to:"/auth",replace:!0})}function l4(){const{user:n,role:e,initializing:t}=na();return t?g.jsx(cb,{}):n?e?g.jsx(Tr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx(Tr,{to:"/app/client",replace:!0}):g.jsx(Tr,{to:"/auth",replace:!0})}function u4(){return g.jsx(a4,{children:g.jsxs(g1,{children:[g.jsx(Ks,{path:"/",element:g.jsx(l4,{})}),g.jsx(Ks,{path:"/auth",element:g.jsx(Y2,{})}),g.jsx(Ks,{path:"/onboarding",element:g.jsx(o4,{})}),g.jsx(Ks,{path:"/app/coach",element:g.jsx(Lp,{allow:["admin","trainer"],children:g.jsx(t4,{})})}),g.jsx(Ks,{path:"/app/coach/plan/:planId/preview",element:g.jsx(Lp,{allow:["admin","trainer"],children:g.jsx(s4,{})})}),g.jsx(Ks,{path:"/app/client",element:g.jsx(Lp,{allow:["client"],children:g.jsx(nM,{})})}),g.jsx(Ks,{path:"*",element:g.jsx(Tr,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});TC.createRoot(document.getElementById("root")).render(g.jsx(Q0.StrictMode,{children:g.jsx(S1,{children:g.jsx(_1,{children:g.jsx(u4,{})})})}));
