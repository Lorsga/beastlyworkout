function $1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function x0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kf={exports:{}},Cl={},Qf={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function H1(){if(zy)return Be;zy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function _(H){return H===null||typeof H!="object"?null:(H=E&&H[E]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function A(H,Z,ce){this.props=H,this.context=Z,this.refs=O,this.updater=ce||R}A.prototype.isReactComponent={},A.prototype.setState=function(H,Z){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Z,"setState")},A.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=A.prototype;function G(H,Z,ce){this.props=H,this.context=Z,this.refs=O,this.updater=ce||R}var Q=G.prototype=new $;Q.constructor=G,N(Q,A.prototype),Q.isPureReactComponent=!0;var j=Array.isArray,B=Object.prototype.hasOwnProperty,J={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function I(H,Z,ce){var Ce,Ee={},ke=null,Ie=null;if(Z!=null)for(Ce in Z.ref!==void 0&&(Ie=Z.ref),Z.key!==void 0&&(ke=""+Z.key),Z)B.call(Z,Ce)&&!b.hasOwnProperty(Ce)&&(Ee[Ce]=Z[Ce]);var ye=arguments.length-2;if(ye===1)Ee.children=ce;else if(1<ye){for(var Ge=Array(ye),yt=0;yt<ye;yt++)Ge[yt]=arguments[yt+2];Ee.children=Ge}if(H&&H.defaultProps)for(Ce in ye=H.defaultProps,ye)Ee[Ce]===void 0&&(Ee[Ce]=ye[Ce]);return{$$typeof:n,type:H,key:ke,ref:Ie,props:Ee,_owner:J.current}}function P(H,Z){return{$$typeof:n,type:H.type,key:Z,ref:H.ref,props:H.props,_owner:H._owner}}function D(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function L(H){var Z={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ce){return Z[ce]})}var z=/\/+/g;function k(H,Z){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):Z.toString(36)}function Fe(H,Z,ce,Ce,Ee){var ke=typeof H;(ke==="undefined"||ke==="boolean")&&(H=null);var Ie=!1;if(H===null)Ie=!0;else switch(ke){case"string":case"number":Ie=!0;break;case"object":switch(H.$$typeof){case n:case e:Ie=!0}}if(Ie)return Ie=H,Ee=Ee(Ie),H=Ce===""?"."+k(Ie,0):Ce,j(Ee)?(ce="",H!=null&&(ce=H.replace(z,"$&/")+"/"),Fe(Ee,Z,ce,"",function(yt){return yt})):Ee!=null&&(D(Ee)&&(Ee=P(Ee,ce+(!Ee.key||Ie&&Ie.key===Ee.key?"":(""+Ee.key).replace(z,"$&/")+"/")+H)),Z.push(Ee)),1;if(Ie=0,Ce=Ce===""?".":Ce+":",j(H))for(var ye=0;ye<H.length;ye++){ke=H[ye];var Ge=Ce+k(ke,ye);Ie+=Fe(ke,Z,ce,Ge,Ee)}else if(Ge=_(H),typeof Ge=="function")for(H=Ge.call(H),ye=0;!(ke=H.next()).done;)ke=ke.value,Ge=Ce+k(ke,ye++),Ie+=Fe(ke,Z,ce,Ge,Ee);else if(ke==="object")throw Z=String(H),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ie}function De(H,Z,ce){if(H==null)return H;var Ce=[],Ee=0;return Fe(H,Ce,"","",function(ke){return Z.call(ce,ke,Ee++)}),Ce}function Ue(H){if(H._status===-1){var Z=H._result;Z=Z(),Z.then(function(ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=ce)},function(ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=ce)}),H._status===-1&&(H._status=0,H._result=Z)}if(H._status===1)return H._result.default;throw H._result}var je={current:null},re={transition:null},me={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:re,ReactCurrentOwner:J};function se(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:De,forEach:function(H,Z,ce){De(H,function(){Z.apply(this,arguments)},ce)},count:function(H){var Z=0;return De(H,function(){Z++}),Z},toArray:function(H){return De(H,function(Z){return Z})||[]},only:function(H){if(!D(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Be.Component=A,Be.Fragment=t,Be.Profiler=s,Be.PureComponent=G,Be.StrictMode=r,Be.Suspense=f,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Be.act=se,Be.cloneElement=function(H,Z,ce){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ce=N({},H.props),Ee=H.key,ke=H.ref,Ie=H._owner;if(Z!=null){if(Z.ref!==void 0&&(ke=Z.ref,Ie=J.current),Z.key!==void 0&&(Ee=""+Z.key),H.type&&H.type.defaultProps)var ye=H.type.defaultProps;for(Ge in Z)B.call(Z,Ge)&&!b.hasOwnProperty(Ge)&&(Ce[Ge]=Z[Ge]===void 0&&ye!==void 0?ye[Ge]:Z[Ge])}var Ge=arguments.length-2;if(Ge===1)Ce.children=ce;else if(1<Ge){ye=Array(Ge);for(var yt=0;yt<Ge;yt++)ye[yt]=arguments[yt+2];Ce.children=ye}return{$$typeof:n,type:H.type,key:Ee,ref:ke,props:Ce,_owner:Ie}},Be.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},Be.createElement=I,Be.createFactory=function(H){var Z=I.bind(null,H);return Z.type=H,Z},Be.createRef=function(){return{current:null}},Be.forwardRef=function(H){return{$$typeof:d,render:H}},Be.isValidElement=D,Be.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:Ue}},Be.memo=function(H,Z){return{$$typeof:m,type:H,compare:Z===void 0?null:Z}},Be.startTransition=function(H){var Z=re.transition;re.transition={};try{H()}finally{re.transition=Z}},Be.unstable_act=se,Be.useCallback=function(H,Z){return je.current.useCallback(H,Z)},Be.useContext=function(H){return je.current.useContext(H)},Be.useDebugValue=function(){},Be.useDeferredValue=function(H){return je.current.useDeferredValue(H)},Be.useEffect=function(H,Z){return je.current.useEffect(H,Z)},Be.useId=function(){return je.current.useId()},Be.useImperativeHandle=function(H,Z,ce){return je.current.useImperativeHandle(H,Z,ce)},Be.useInsertionEffect=function(H,Z){return je.current.useInsertionEffect(H,Z)},Be.useLayoutEffect=function(H,Z){return je.current.useLayoutEffect(H,Z)},Be.useMemo=function(H,Z){return je.current.useMemo(H,Z)},Be.useReducer=function(H,Z,ce){return je.current.useReducer(H,Z,ce)},Be.useRef=function(H){return je.current.useRef(H)},Be.useState=function(H){return je.current.useState(H)},Be.useSyncExternalStore=function(H,Z,ce){return je.current.useSyncExternalStore(H,Z,ce)},Be.useTransition=function(){return je.current.useTransition()},Be.version="18.3.1",Be}var By;function dm(){return By||(By=1,Qf.exports=H1()),Qf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function W1(){if($y)return Cl;$y=1;var n=dm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var y,E={},_=null,R=null;m!==void 0&&(_=""+m),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(R=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(E[y]=f[y]);if(d&&d.defaultProps)for(y in f=d.defaultProps,f)E[y]===void 0&&(E[y]=f[y]);return{$$typeof:e,type:d,key:_,ref:R,props:E,_owner:s.current}}return Cl.Fragment=t,Cl.jsx=u,Cl.jsxs=u,Cl}var Hy;function q1(){return Hy||(Hy=1,Kf.exports=W1()),Kf.exports}var T=q1(),M=dm();const N0=x0(M),Sp=$1({__proto__:null,default:N0},[M]);var Dc={},Xf={exports:{}},An={},Yf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function G1(){return Wy||(Wy=1,(function(n){function e(re,me){var se=re.length;re.push(me);e:for(;0<se;){var H=se-1>>>1,Z=re[H];if(0<s(Z,me))re[H]=me,re[se]=Z,se=H;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var me=re[0],se=re.pop();if(se!==me){re[0]=se;e:for(var H=0,Z=re.length,ce=Z>>>1;H<ce;){var Ce=2*(H+1)-1,Ee=re[Ce],ke=Ce+1,Ie=re[ke];if(0>s(Ee,se))ke<Z&&0>s(Ie,Ee)?(re[H]=Ie,re[ke]=se,H=ke):(re[H]=Ee,re[Ce]=se,H=Ce);else if(ke<Z&&0>s(Ie,se))re[H]=Ie,re[ke]=se,H=ke;else break e}}return me}function s(re,me){var se=re.sortIndex-me.sortIndex;return se!==0?se:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,E=null,_=3,R=!1,N=!1,O=!1,A=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(re){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=re)r(m),me.sortIndex=me.expirationTime,e(f,me);else break;me=t(m)}}function j(re){if(O=!1,Q(re),!N)if(t(f)!==null)N=!0,Ue(B);else{var me=t(m);me!==null&&je(j,me.startTime-re)}}function B(re,me){N=!1,O&&(O=!1,$(I),I=-1),R=!0;var se=_;try{for(Q(me),E=t(f);E!==null&&(!(E.expirationTime>me)||re&&!L());){var H=E.callback;if(typeof H=="function"){E.callback=null,_=E.priorityLevel;var Z=H(E.expirationTime<=me);me=n.unstable_now(),typeof Z=="function"?E.callback=Z:E===t(f)&&r(f),Q(me)}else r(f);E=t(f)}if(E!==null)var ce=!0;else{var Ce=t(m);Ce!==null&&je(j,Ce.startTime-me),ce=!1}return ce}finally{E=null,_=se,R=!1}}var J=!1,b=null,I=-1,P=5,D=-1;function L(){return!(n.unstable_now()-D<P)}function z(){if(b!==null){var re=n.unstable_now();D=re;var me=!0;try{me=b(!0,re)}finally{me?k():(J=!1,b=null)}}else J=!1}var k;if(typeof G=="function")k=function(){G(z)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,De=Fe.port2;Fe.port1.onmessage=z,k=function(){De.postMessage(null)}}else k=function(){A(z,0)};function Ue(re){b=re,J||(J=!0,k())}function je(re,me){I=A(function(){re(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){N||R||(N=!0,Ue(B))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(_){case 1:case 2:case 3:var me=3;break;default:me=_}var se=_;_=me;try{return re()}finally{_=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=_;_=re;try{return me()}finally{_=se}},n.unstable_scheduleCallback=function(re,me,se){var H=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?H+se:H):se=H,re){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=se+Z,re={id:y++,callback:me,priorityLevel:re,startTime:se,expirationTime:Z,sortIndex:-1},se>H?(re.sortIndex=se,e(m,re),t(f)===null&&re===t(m)&&(O?($(I),I=-1):O=!0,je(j,se-H))):(re.sortIndex=Z,e(f,re),N||R||(N=!0,Ue(B))),re},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(re){var me=_;return function(){var se=_;_=me;try{return re.apply(this,arguments)}finally{_=se}}}})(Jf)),Jf}var qy;function K1(){return qy||(qy=1,Yf.exports=G1()),Yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function Q1(){if(Gy)return An;Gy=1;var n=dm(),e=K1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},E={};function _(i){return f.call(E,i)?!0:f.call(y,i)?!1:m.test(i)?E[i]=!0:(y[i]=!0,!1)}function R(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,o,l,h){if(o===null||typeof o>"u"||R(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function O(i,o,l,h,p,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new O(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function G(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace($,G);A[o]=new O(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace($,G);A[o]=new O(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace($,G);A[o]=new O(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function Q(i,o,l,h){var p=A.hasOwnProperty(o)?A[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(N(o,l,p,h)&&(l=null),h||p===null?_(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),J=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var se=Object.assign,H;function Z(i){if(H===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var ce=!1;function Ce(i,o){if(!i||ce)return"";ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var h=X}Reflect.construct(i,[],o)}else{try{o.call()}catch(X){h=X}i.call(o.prototype)}else{try{throw Error()}catch(X){h=X}i()}}catch(X){if(X&&h&&typeof X.stack=="string"){for(var p=X.stack.split(`
`),v=h.stack.split(`
`),S=p.length-1,x=v.length-1;1<=S&&0<=x&&p[S]!==v[x];)x--;for(;1<=S&&0<=x;S--,x--)if(p[S]!==v[x]){if(S!==1||x!==1)do if(S--,x--,0>x||p[S]!==v[x]){var V=`
`+p[S].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=S&&0<=x);break}}}finally{ce=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Z(i):""}function Ee(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function ke(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case J:return"Portal";case P:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case D:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case De:return o=i.displayName||null,o!==null?o:ke(i.type)||"Memo";case Ue:o=i._payload,i=i._init;try{return ke(i(o))}catch{}}return null}function Ie(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ye(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function yt(i){var o=Ge(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function hn(i){i._valueTracker||(i._valueTracker=yt(i))}function nr(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Ge(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function On(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function $n(i,o){var l=o.checked;return se({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function rr(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=ye(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function xs(i,o){o=o.checked,o!=null&&Q(i,"checked",o,!1)}function ii(i,o){xs(i,o);var l=ye(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Pr(i,o.type,l):o.hasOwnProperty("defaultValue")&&Pr(i,o.type,ye(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ns(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Pr(i,o,l){(o!=="number"||On(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var ir=Array.isArray;function sr(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+ye(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Os(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dn(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(ir(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:ye(l)}}function We(i,o){var l=ye(o.value),h=ye(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function Vi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function St(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?St(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var or,Ds=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=or.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function kr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oi=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(i){oi.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),si[o]=si[i]})});function Vs(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||si.hasOwnProperty(i)&&si[i]?(""+o).trim():o+"px"}function Ms(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Vs(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Mi=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ls(i,o){if(o){if(Mi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function F(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var le=null;function we(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var nt=null,Ct=null,Hn=null;function Li(i){if(i=cl(i)){if(typeof nt!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Qu(o),nt(i.stateNode,i.type,o))}}function xr(i){Ct?Hn?Hn.push(i):Hn=[i]:Ct=i}function za(){if(Ct){var i=Ct,o=Hn;if(Hn=Ct=null,Li(i),o)for(i=0;i<o.length;i++)Li(o[i])}}function Fs(i,o){return i(o)}function Ba(){}var ai=!1;function $a(i,o,l){if(ai)return i(o,l);ai=!0;try{return Fs(i,o,l)}finally{ai=!1,(Ct!==null||Hn!==null)&&(Ba(),za())}}function bt(i,o){var l=i.stateNode;if(l===null)return null;var h=Qu(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Ao=!1;if(d)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Ao=!1}function js(i,o,l,h,p,v,S,x,V){var X=Array.prototype.slice.call(arguments,3);try{o.apply(l,X)}catch(ie){this.onError(ie)}}var Us=!1,Ro=null,lr=!1,Ha=null,Ed={onError:function(i){Us=!0,Ro=i}};function Po(i,o,l,h,p,v,S,x,V){Us=!1,Ro=null,js.apply(Ed,arguments)}function wu(i,o,l,h,p,v,S,x,V){if(Po.apply(this,arguments),Us){if(Us){var X=Ro;Us=!1,Ro=null}else throw Error(t(198));lr||(lr=!0,Ha=X)}}function ur(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function zs(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function cr(i){if(ur(i)!==i)throw Error(t(188))}function Eu(i){var o=i.alternate;if(!o){if(o=ur(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return cr(p),i;if(v===h)return cr(p),o;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=v;else{for(var S=!1,x=p.child;x;){if(x===l){S=!0,l=p,h=v;break}if(x===h){S=!0,h=p,l=v;break}x=x.sibling}if(!S){for(x=v.child;x;){if(x===l){S=!0,l=v,h=p;break}if(x===h){S=!0,h=v,l=p;break}x=x.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Wa(i){return i=Eu(i),i!==null?ko(i):null}function ko(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=ko(i);if(o!==null)return o;i=i.sibling}return null}var xo=e.unstable_scheduleCallback,qa=e.unstable_cancelCallback,Tu=e.unstable_shouldYield,Td=e.unstable_requestPaint,ot=e.unstable_now,Su=e.unstable_getCurrentPriorityLevel,Bs=e.unstable_ImmediatePriority,Fi=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Iu=e.unstable_IdlePriority,$s=null,Dn=null;function Cu(i){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot($s,i,void 0,(i.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Au,Ka=Math.log,bu=Math.LN2;function Au(i){return i>>>=0,i===0?32:31-(Ka(i)/bu|0)|0}var No=64,Oo=4194304;function ji(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Hs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,v=i.pingedLanes,S=l&268435455;if(S!==0){var x=S&~p;x!==0?h=ji(x):(v&=S,v!==0&&(h=ji(v)))}else S=l&~p,S!==0?h=ji(S):v!==0&&(h=ji(v));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,v=o&-o,p>=v||p===16&&(v&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-fn(o),p=1<<l,h|=i[l],o&=~p;return h}function Sd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-fn(v),x=1<<S,V=p[S];V===-1?((x&l)===0||(x&h)!==0)&&(p[S]=Sd(x,o)):V<=o&&(i.expiredLanes|=x),v&=~x}}function Vn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ws(){var i=No;return No<<=1,(No&4194240)===0&&(No=64),i}function Ui(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function zi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-fn(o),i[o]=l}function it(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-fn(l),v=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~v}}function Bi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-fn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var qe=0;function $i(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ru,Do,Pu,ku,xu,Qa=!1,Nr=[],qt=null,hr=null,dr=null,Hi=new Map,qn=new Map,Or=[],Id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(i,o){switch(i){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Hi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":qn.delete(o.pointerId)}}function wn(i,o,l,h,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},o!==null&&(o=cl(o),o!==null&&Do(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Cd(i,o,l,h,p){switch(o){case"focusin":return qt=wn(qt,i,o,l,h,p),!0;case"dragenter":return hr=wn(hr,i,o,l,h,p),!0;case"mouseover":return dr=wn(dr,i,o,l,h,p),!0;case"pointerover":var v=p.pointerId;return Hi.set(v,wn(Hi.get(v)||null,i,o,l,h,p)),!0;case"gotpointercapture":return v=p.pointerId,qn.set(v,wn(qn.get(v)||null,i,o,l,h,p)),!0}return!1}function Ou(i){var o=Xs(i.target);if(o!==null){var l=ur(o);if(l!==null){if(o=l.tag,o===13){if(o=zs(l),o!==null){i.blockedOn=o,xu(i.priority,function(){Pu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ui(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Vo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);le=h,l.target.dispatchEvent(h),le=null}else return o=cl(l),o!==null&&Do(o),i.blockedOn=l,!1;o.shift()}return!0}function qs(i,o,l){ui(i)&&l.delete(o)}function Du(){Qa=!1,qt!==null&&ui(qt)&&(qt=null),hr!==null&&ui(hr)&&(hr=null),dr!==null&&ui(dr)&&(dr=null),Hi.forEach(qs),qn.forEach(qs)}function fr(i,o){i.blockedOn===o&&(i.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Du)))}function pr(i){function o(p){return fr(p,i)}if(0<Nr.length){fr(Nr[0],i);for(var l=1;l<Nr.length;l++){var h=Nr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(qt!==null&&fr(qt,i),hr!==null&&fr(hr,i),dr!==null&&fr(dr,i),Hi.forEach(o),qn.forEach(o),l=0;l<Or.length;l++)h=Or[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<Or.length&&(l=Or[0],l.blockedOn===null);)Ou(l),l.blockedOn===null&&Or.shift()}var ci=j.ReactCurrentBatchConfig,Wi=!0;function ft(i,o,l,h){var p=qe,v=ci.transition;ci.transition=null;try{qe=1,Xa(i,o,l,h)}finally{qe=p,ci.transition=v}}function bd(i,o,l,h){var p=qe,v=ci.transition;ci.transition=null;try{qe=4,Xa(i,o,l,h)}finally{qe=p,ci.transition=v}}function Xa(i,o,l,h){if(Wi){var p=Vo(i,o,l,h);if(p===null)Ld(i,o,h,Gs,l),Nu(i,h);else if(Cd(p,i,o,l,h))h.stopPropagation();else if(Nu(i,h),o&4&&-1<Id.indexOf(i)){for(;p!==null;){var v=cl(p);if(v!==null&&Ru(v),v=Vo(i,o,l,h),v===null&&Ld(i,o,h,Gs,l),v===p)break;p=v}p!==null&&h.stopPropagation()}else Ld(i,o,h,null,l)}}var Gs=null;function Vo(i,o,l,h){if(Gs=null,i=we(h),i=Xs(i),i!==null)if(o=ur(i),o===null)i=null;else if(l=o.tag,l===13){if(i=zs(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Gs=i,null}function Ya(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Su()){case Bs:return 1;case Fi:return 4;case Wn:case Ga:return 16;case Iu:return 536870912;default:return 16}default:return 16}}var Mn=null,Mo=null,En=null;function Ja(){if(En)return En;var i,o=Mo,l=o.length,h,p="value"in Mn?Mn.value:Mn.textContent,v=p.length;for(i=0;i<l&&o[i]===p[i];i++);var S=l-i;for(h=1;h<=S&&o[l-h]===p[v-h];h++);return En=p.slice(i,1<h?1-h:void 0)}function Lo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Dr(){return!0}function Za(){return!1}function Gt(i){function o(l,h,p,v,S){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Dr:Za,this.isPropagationStopped=Za,this}return se(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),o}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=Gt(mr),Vr=se({},mr,{view:0,detail:0}),Ad=Gt(Vr),jo,hi,qi,Ks=se({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qi&&(qi&&i.type==="mousemove"?(jo=i.screenX-qi.screenX,hi=i.screenY-qi.screenY):hi=jo=0,qi=i),jo)},movementY:function(i){return"movementY"in i?i.movementY:hi}}),Uo=Gt(Ks),el=se({},Ks,{dataTransfer:0}),Vu=Gt(el),zo=se({},Vr,{relatedTarget:0}),Bo=Gt(zo),Mu=se({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),di=Gt(Mu),Lu=se({},mr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Fu=Gt(Lu),ju=se({},mr,{data:0}),tl=Gt(ju),$o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Uu[i])?!!o[i]:!1}function Mr(){return zu}var c=se({},Vr,{key:function(i){if(i.key){var o=$o[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Lo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(i){return i.type==="keypress"?Lo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Gt(c),w=se({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Gt(w),W=se({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Y=Gt(W),ue=se({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rt=Gt(ue),Lt=se({},Ks,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=Gt(Lt),zt=[9,13,27,32],kt=d&&"CompositionEvent"in window,Gn=null;d&&"documentMode"in document&&(Gn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Gn,Qs=d&&(!kt||Gn&&8<Gn&&11>=Gn),Ho=" ",Vg=!1;function Mg(i,o){switch(i){case"keyup":return zt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Wo=!1;function UI(i,o){switch(i){case"compositionend":return Lg(o);case"keypress":return o.which!==32?null:(Vg=!0,Ho);case"textInput":return i=o.data,i===Ho&&Vg?null:i;default:return null}}function zI(i,o){if(Wo)return i==="compositionend"||!kt&&Mg(i,o)?(i=Ja(),En=Mo=Mn=null,Wo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Qs&&o.locale!=="ko"?null:o.data;default:return null}}var BI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!BI[i.type]:o==="textarea"}function jg(i,o,l,h){xr(h),o=qu(o,"onChange"),0<o.length&&(l=new Fo("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var nl=null,rl=null;function $I(i){rv(i,0)}function Bu(i){var o=Xo(i);if(nr(o))return i}function HI(i,o){if(i==="change")return o}var Ug=!1;if(d){var Rd;if(d){var Pd="oninput"in document;if(!Pd){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Pd=typeof zg.oninput=="function"}Rd=Pd}else Rd=!1;Ug=Rd&&(!document.documentMode||9<document.documentMode)}function Bg(){nl&&(nl.detachEvent("onpropertychange",$g),rl=nl=null)}function $g(i){if(i.propertyName==="value"&&Bu(rl)){var o=[];jg(o,rl,i,we(i)),$a($I,o)}}function WI(i,o,l){i==="focusin"?(Bg(),nl=o,rl=l,nl.attachEvent("onpropertychange",$g)):i==="focusout"&&Bg()}function qI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bu(rl)}function GI(i,o){if(i==="click")return Bu(o)}function KI(i,o){if(i==="input"||i==="change")return Bu(o)}function QI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var gr=typeof Object.is=="function"?Object.is:QI;function il(i,o){if(gr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!gr(i[p],o[p]))return!1}return!0}function Hg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wg(i,o){var l=Hg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hg(l)}}function qg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?qg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Gg(){for(var i=window,o=On();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=On(i.document)}return o}function kd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function XI(i){var o=Gg(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&qg(l.ownerDocument.documentElement,l)){if(h!==null&&kd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!i.extend&&v>h&&(p=h,h=v,v=p),p=Wg(l,v);var S=Wg(l,h);p&&S&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),v>h?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var YI=d&&"documentMode"in document&&11>=document.documentMode,qo=null,xd=null,sl=null,Nd=!1;function Kg(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nd||qo==null||qo!==On(h)||(h=qo,"selectionStart"in h&&kd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sl&&il(sl,h)||(sl=h,h=qu(xd,"onSelect"),0<h.length&&(o=new Fo("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=qo)))}function $u(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Go={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},Od={},Qg={};d&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Hu(i){if(Od[i])return Od[i];if(!Go[i])return i;var o=Go[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Qg)return Od[i]=o[l];return i}var Xg=Hu("animationend"),Yg=Hu("animationiteration"),Jg=Hu("animationstart"),Zg=Hu("transitionend"),ev=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(i,o){ev.set(i,o),a(o,[i])}for(var Dd=0;Dd<tv.length;Dd++){var Vd=tv[Dd],JI=Vd.toLowerCase(),ZI=Vd[0].toUpperCase()+Vd.slice(1);Gi(JI,"on"+ZI)}Gi(Xg,"onAnimationEnd"),Gi(Yg,"onAnimationIteration"),Gi(Jg,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Zg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function nv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,wu(h,o,void 0,i),i.currentTarget=null}function rv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var v=void 0;if(o)for(var S=h.length-1;0<=S;S--){var x=h[S],V=x.instance,X=x.currentTarget;if(x=x.listener,V!==v&&p.isPropagationStopped())break e;nv(p,x,X),v=V}else for(S=0;S<h.length;S++){if(x=h[S],V=x.instance,X=x.currentTarget,x=x.listener,V!==v&&p.isPropagationStopped())break e;nv(p,x,X),v=V}}}if(lr)throw i=Ha,lr=!1,Ha=null,i}function ct(i,o){var l=o[$d];l===void 0&&(l=o[$d]=new Set);var h=i+"__bubble";l.has(h)||(iv(o,i,2,!1),l.add(h))}function Md(i,o,l){var h=0;o&&(h|=4),iv(l,i,h,o)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function al(i){if(!i[Wu]){i[Wu]=!0,r.forEach(function(l){l!=="selectionchange"&&(e1.has(l)||Md(l,!1,i),Md(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Wu]||(o[Wu]=!0,Md("selectionchange",!1,o))}}function iv(i,o,l,h){switch(Ya(o)){case 1:var p=ft;break;case 4:p=bd;break;default:p=Xa}l=p.bind(null,o,l,i),p=void 0,!Ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Ld(i,o,l,h,p){var v=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var x=h.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(S===4)for(S=h.return;S!==null;){var V=S.tag;if((V===3||V===4)&&(V=S.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;S=S.return}for(;x!==null;){if(S=Xs(x),S===null)return;if(V=S.tag,V===5||V===6){h=v=S;continue e}x=x.parentNode}}h=h.return}$a(function(){var X=v,ie=we(l),oe=[];e:{var ne=ev.get(i);if(ne!==void 0){var de=Fo,ge=i;switch(i){case"keypress":if(Lo(l)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":ge="focus",de=Bo;break;case"focusout":ge="blur",de=Bo;break;case"beforeblur":case"afterblur":de=Bo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Y;break;case Xg:case Yg:case Jg:de=di;break;case Zg:de=rt;break;case"scroll":de=Ad;break;case"wheel":de=Ke;break;case"copy":case"cut":case"paste":de=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=C}var ve=(o&4)!==0,At=!ve&&i==="scroll",q=ve?ne!==null?ne+"Capture":null:ne;ve=[];for(var U=X,K;U!==null;){K=U;var ae=K.stateNode;if(K.tag===5&&ae!==null&&(K=ae,q!==null&&(ae=bt(U,q),ae!=null&&ve.push(ll(U,ae,K)))),At)break;U=U.return}0<ve.length&&(ne=new de(ne,ge,null,l,ie),oe.push({event:ne,listeners:ve}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",ne&&l!==le&&(ge=l.relatedTarget||l.fromElement)&&(Xs(ge)||ge[fi]))break e;if((de||ne)&&(ne=ie.window===ie?ie:(ne=ie.ownerDocument)?ne.defaultView||ne.parentWindow:window,de?(ge=l.relatedTarget||l.toElement,de=X,ge=ge?Xs(ge):null,ge!==null&&(At=ur(ge),ge!==At||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=X),de!==ge)){if(ve=Uo,ae="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ve=C,ae="onPointerLeave",q="onPointerEnter",U="pointer"),At=de==null?ne:Xo(de),K=ge==null?ne:Xo(ge),ne=new ve(ae,U+"leave",de,l,ie),ne.target=At,ne.relatedTarget=K,ae=null,Xs(ie)===X&&(ve=new ve(q,U+"enter",ge,l,ie),ve.target=K,ve.relatedTarget=At,ae=ve),At=ae,de&&ge)t:{for(ve=de,q=ge,U=0,K=ve;K;K=Ko(K))U++;for(K=0,ae=q;ae;ae=Ko(ae))K++;for(;0<U-K;)ve=Ko(ve),U--;for(;0<K-U;)q=Ko(q),K--;for(;U--;){if(ve===q||q!==null&&ve===q.alternate)break t;ve=Ko(ve),q=Ko(q)}ve=null}else ve=null;de!==null&&sv(oe,ne,de,ve,!1),ge!==null&&At!==null&&sv(oe,At,ge,ve,!0)}}e:{if(ne=X?Xo(X):window,de=ne.nodeName&&ne.nodeName.toLowerCase(),de==="select"||de==="input"&&ne.type==="file")var _e=HI;else if(Fg(ne))if(Ug)_e=KI;else{_e=qI;var be=WI}else(de=ne.nodeName)&&de.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(_e=GI);if(_e&&(_e=_e(i,X))){jg(oe,_e,l,ie);break e}be&&be(i,ne,X),i==="focusout"&&(be=ne._wrapperState)&&be.controlled&&ne.type==="number"&&Pr(ne,"number",ne.value)}switch(be=X?Xo(X):window,i){case"focusin":(Fg(be)||be.contentEditable==="true")&&(qo=be,xd=X,sl=null);break;case"focusout":sl=xd=qo=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Kg(oe,l,ie);break;case"selectionchange":if(YI)break;case"keydown":case"keyup":Kg(oe,l,ie)}var Ae;if(kt)e:{switch(i){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Wo?Mg(i,l)&&(Ne="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ne="onCompositionStart");Ne&&(Qs&&l.locale!=="ko"&&(Wo||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Wo&&(Ae=Ja()):(Mn=ie,Mo="value"in Mn?Mn.value:Mn.textContent,Wo=!0)),be=qu(X,Ne),0<be.length&&(Ne=new tl(Ne,i,null,l,ie),oe.push({event:Ne,listeners:be}),Ae?Ne.data=Ae:(Ae=Lg(l),Ae!==null&&(Ne.data=Ae)))),(Ae=Ln?UI(i,l):zI(i,l))&&(X=qu(X,"onBeforeInput"),0<X.length&&(ie=new tl("onBeforeInput","beforeinput",null,l,ie),oe.push({event:ie,listeners:X}),ie.data=Ae))}rv(oe,o)})}function ll(i,o,l){return{instance:i,listener:o,currentTarget:l}}function qu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=bt(i,l),v!=null&&h.unshift(ll(i,v,p)),v=bt(i,o),v!=null&&h.push(ll(i,v,p))),i=i.return}return h}function Ko(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function sv(i,o,l,h,p){for(var v=o._reactName,S=[];l!==null&&l!==h;){var x=l,V=x.alternate,X=x.stateNode;if(V!==null&&V===h)break;x.tag===5&&X!==null&&(x=X,p?(V=bt(l,v),V!=null&&S.unshift(ll(l,V,x))):p||(V=bt(l,v),V!=null&&S.push(ll(l,V,x)))),l=l.return}S.length!==0&&i.push({event:o,listeners:S})}var t1=/\r\n?/g,n1=/\u0000|\uFFFD/g;function ov(i){return(typeof i=="string"?i:""+i).replace(t1,`
`).replace(n1,"")}function Gu(i,o,l){if(o=ov(o),ov(i)!==o&&l)throw Error(t(425))}function Ku(){}var Fd=null,jd=null;function Ud(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,r1=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(i){return av.resolve(null).then(i).catch(s1)}:zd;function s1(i){setTimeout(function(){throw i})}function Bd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),pr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);pr(o)}function Ki(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function lv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Qo,ul="__reactProps$"+Qo,fi="__reactContainer$"+Qo,$d="__reactEvents$"+Qo,o1="__reactListeners$"+Qo,a1="__reactHandles$"+Qo;function Xs(i){var o=i[Lr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[fi]||l[Lr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=lv(i);i!==null;){if(l=i[Lr])return l;i=lv(i)}return o}i=l,l=i.parentNode}return null}function cl(i){return i=i[Lr]||i[fi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Xo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Qu(i){return i[ul]||null}var Hd=[],Yo=-1;function Qi(i){return{current:i}}function ht(i){0>Yo||(i.current=Hd[Yo],Hd[Yo]=null,Yo--)}function at(i,o){Yo++,Hd[Yo]=i.current,i.current=o}var Xi={},tn=Qi(Xi),Tn=Qi(!1),Ys=Xi;function Jo(i,o){var l=i.type.contextTypes;if(!l)return Xi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=o[v];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function Sn(i){return i=i.childContextTypes,i!=null}function Xu(){ht(Tn),ht(tn)}function uv(i,o,l){if(tn.current!==Xi)throw Error(t(168));at(tn,o),at(Tn,l)}function cv(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Ie(i)||"Unknown",p));return se({},l,h)}function Yu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Xi,Ys=tn.current,at(tn,i),at(Tn,Tn.current),!0}function hv(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=cv(i,o,Ys),h.__reactInternalMemoizedMergedChildContext=i,ht(Tn),ht(tn),at(tn,i)):ht(Tn),at(Tn,l)}var pi=null,Ju=!1,Wd=!1;function dv(i){pi===null?pi=[i]:pi.push(i)}function l1(i){Ju=!0,dv(i)}function Yi(){if(!Wd&&pi!==null){Wd=!0;var i=0,o=qe;try{var l=pi;for(qe=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}pi=null,Ju=!1}catch(p){throw pi!==null&&(pi=pi.slice(i+1)),xo(Bs,Yi),p}finally{qe=o,Wd=!1}}return null}var Zo=[],ea=0,Zu=null,ec=0,Kn=[],Qn=0,Js=null,mi=1,gi="";function Zs(i,o){Zo[ea++]=ec,Zo[ea++]=Zu,Zu=i,ec=o}function fv(i,o,l){Kn[Qn++]=mi,Kn[Qn++]=gi,Kn[Qn++]=Js,Js=i;var h=mi;i=gi;var p=32-fn(h)-1;h&=~(1<<p),l+=1;var v=32-fn(o)+p;if(30<v){var S=p-p%5;v=(h&(1<<S)-1).toString(32),h>>=S,p-=S,mi=1<<32-fn(o)+p|l<<p|h,gi=v+i}else mi=1<<v|l<<p|h,gi=i}function qd(i){i.return!==null&&(Zs(i,1),fv(i,1,0))}function Gd(i){for(;i===Zu;)Zu=Zo[--ea],Zo[ea]=null,ec=Zo[--ea],Zo[ea]=null;for(;i===Js;)Js=Kn[--Qn],Kn[Qn]=null,gi=Kn[--Qn],Kn[Qn]=null,mi=Kn[--Qn],Kn[Qn]=null}var Fn=null,jn=null,pt=!1,vr=null;function pv(i,o){var l=Zn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function mv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Fn=i,jn=Ki(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Fn=i,jn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Js!==null?{id:mi,overflow:gi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Zn(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Fn=i,jn=null,!0):!1;default:return!1}}function Kd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Qd(i){if(pt){var o=jn;if(o){var l=o;if(!mv(i,o)){if(Kd(i))throw Error(t(418));o=Ki(l.nextSibling);var h=Fn;o&&mv(i,o)?pv(h,l):(i.flags=i.flags&-4097|2,pt=!1,Fn=i)}}else{if(Kd(i))throw Error(t(418));i.flags=i.flags&-4097|2,pt=!1,Fn=i}}}function gv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Fn=i}function tc(i){if(i!==Fn)return!1;if(!pt)return gv(i),pt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ud(i.type,i.memoizedProps)),o&&(o=jn)){if(Kd(i))throw vv(),Error(t(418));for(;o;)pv(i,o),o=Ki(o.nextSibling)}if(gv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){jn=Ki(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}jn=null}}else jn=Fn?Ki(i.stateNode.nextSibling):null;return!0}function vv(){for(var i=jn;i;)i=Ki(i.nextSibling)}function ta(){jn=Fn=null,pt=!1}function Xd(i){vr===null?vr=[i]:vr.push(i)}var u1=j.ReactCurrentBatchConfig;function hl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var x=p.refs;S===null?delete x[v]:x[v]=S},o._stringRef=v,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function nc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function yv(i){var o=i._init;return o(i._payload)}function _v(i){function o(q,U){if(i){var K=q.deletions;K===null?(q.deletions=[U],q.flags|=16):K.push(U)}}function l(q,U){if(!i)return null;for(;U!==null;)o(q,U),U=U.sibling;return null}function h(q,U){for(q=new Map;U!==null;)U.key!==null?q.set(U.key,U):q.set(U.index,U),U=U.sibling;return q}function p(q,U){return q=ss(q,U),q.index=0,q.sibling=null,q}function v(q,U,K){return q.index=K,i?(K=q.alternate,K!==null?(K=K.index,K<U?(q.flags|=2,U):K):(q.flags|=2,U)):(q.flags|=1048576,U)}function S(q){return i&&q.alternate===null&&(q.flags|=2),q}function x(q,U,K,ae){return U===null||U.tag!==6?(U=Bf(K,q.mode,ae),U.return=q,U):(U=p(U,K),U.return=q,U)}function V(q,U,K,ae){var _e=K.type;return _e===b?ie(q,U,K.props.children,ae,K.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ue&&yv(_e)===U.type)?(ae=p(U,K.props),ae.ref=hl(q,U,K),ae.return=q,ae):(ae=bc(K.type,K.key,K.props,null,q.mode,ae),ae.ref=hl(q,U,K),ae.return=q,ae)}function X(q,U,K,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=$f(K,q.mode,ae),U.return=q,U):(U=p(U,K.children||[]),U.return=q,U)}function ie(q,U,K,ae,_e){return U===null||U.tag!==7?(U=ao(K,q.mode,ae,_e),U.return=q,U):(U=p(U,K),U.return=q,U)}function oe(q,U,K){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Bf(""+U,q.mode,K),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case B:return K=bc(U.type,U.key,U.props,null,q.mode,K),K.ref=hl(q,null,U),K.return=q,K;case J:return U=$f(U,q.mode,K),U.return=q,U;case Ue:var ae=U._init;return oe(q,ae(U._payload),K)}if(ir(U)||me(U))return U=ao(U,q.mode,K,null),U.return=q,U;nc(q,U)}return null}function ne(q,U,K,ae){var _e=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return _e!==null?null:x(q,U,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case B:return K.key===_e?V(q,U,K,ae):null;case J:return K.key===_e?X(q,U,K,ae):null;case Ue:return _e=K._init,ne(q,U,_e(K._payload),ae)}if(ir(K)||me(K))return _e!==null?null:ie(q,U,K,ae,null);nc(q,K)}return null}function de(q,U,K,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(K)||null,x(U,q,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case B:return q=q.get(ae.key===null?K:ae.key)||null,V(U,q,ae,_e);case J:return q=q.get(ae.key===null?K:ae.key)||null,X(U,q,ae,_e);case Ue:var be=ae._init;return de(q,U,K,be(ae._payload),_e)}if(ir(ae)||me(ae))return q=q.get(K)||null,ie(U,q,ae,_e,null);nc(U,ae)}return null}function ge(q,U,K,ae){for(var _e=null,be=null,Ae=U,Ne=U=0,Ht=null;Ae!==null&&Ne<K.length;Ne++){Ae.index>Ne?(Ht=Ae,Ae=null):Ht=Ae.sibling;var Ye=ne(q,Ae,K[Ne],ae);if(Ye===null){Ae===null&&(Ae=Ht);break}i&&Ae&&Ye.alternate===null&&o(q,Ae),U=v(Ye,U,Ne),be===null?_e=Ye:be.sibling=Ye,be=Ye,Ae=Ht}if(Ne===K.length)return l(q,Ae),pt&&Zs(q,Ne),_e;if(Ae===null){for(;Ne<K.length;Ne++)Ae=oe(q,K[Ne],ae),Ae!==null&&(U=v(Ae,U,Ne),be===null?_e=Ae:be.sibling=Ae,be=Ae);return pt&&Zs(q,Ne),_e}for(Ae=h(q,Ae);Ne<K.length;Ne++)Ht=de(Ae,q,Ne,K[Ne],ae),Ht!==null&&(i&&Ht.alternate!==null&&Ae.delete(Ht.key===null?Ne:Ht.key),U=v(Ht,U,Ne),be===null?_e=Ht:be.sibling=Ht,be=Ht);return i&&Ae.forEach(function(os){return o(q,os)}),pt&&Zs(q,Ne),_e}function ve(q,U,K,ae){var _e=me(K);if(typeof _e!="function")throw Error(t(150));if(K=_e.call(K),K==null)throw Error(t(151));for(var be=_e=null,Ae=U,Ne=U=0,Ht=null,Ye=K.next();Ae!==null&&!Ye.done;Ne++,Ye=K.next()){Ae.index>Ne?(Ht=Ae,Ae=null):Ht=Ae.sibling;var os=ne(q,Ae,Ye.value,ae);if(os===null){Ae===null&&(Ae=Ht);break}i&&Ae&&os.alternate===null&&o(q,Ae),U=v(os,U,Ne),be===null?_e=os:be.sibling=os,be=os,Ae=Ht}if(Ye.done)return l(q,Ae),pt&&Zs(q,Ne),_e;if(Ae===null){for(;!Ye.done;Ne++,Ye=K.next())Ye=oe(q,Ye.value,ae),Ye!==null&&(U=v(Ye,U,Ne),be===null?_e=Ye:be.sibling=Ye,be=Ye);return pt&&Zs(q,Ne),_e}for(Ae=h(q,Ae);!Ye.done;Ne++,Ye=K.next())Ye=de(Ae,q,Ne,Ye.value,ae),Ye!==null&&(i&&Ye.alternate!==null&&Ae.delete(Ye.key===null?Ne:Ye.key),U=v(Ye,U,Ne),be===null?_e=Ye:be.sibling=Ye,be=Ye);return i&&Ae.forEach(function(B1){return o(q,B1)}),pt&&Zs(q,Ne),_e}function At(q,U,K,ae){if(typeof K=="object"&&K!==null&&K.type===b&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case B:e:{for(var _e=K.key,be=U;be!==null;){if(be.key===_e){if(_e=K.type,_e===b){if(be.tag===7){l(q,be.sibling),U=p(be,K.props.children),U.return=q,q=U;break e}}else if(be.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ue&&yv(_e)===be.type){l(q,be.sibling),U=p(be,K.props),U.ref=hl(q,be,K),U.return=q,q=U;break e}l(q,be);break}else o(q,be);be=be.sibling}K.type===b?(U=ao(K.props.children,q.mode,ae,K.key),U.return=q,q=U):(ae=bc(K.type,K.key,K.props,null,q.mode,ae),ae.ref=hl(q,U,K),ae.return=q,q=ae)}return S(q);case J:e:{for(be=K.key;U!==null;){if(U.key===be)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){l(q,U.sibling),U=p(U,K.children||[]),U.return=q,q=U;break e}else{l(q,U);break}else o(q,U);U=U.sibling}U=$f(K,q.mode,ae),U.return=q,q=U}return S(q);case Ue:return be=K._init,At(q,U,be(K._payload),ae)}if(ir(K))return ge(q,U,K,ae);if(me(K))return ve(q,U,K,ae);nc(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,U!==null&&U.tag===6?(l(q,U.sibling),U=p(U,K),U.return=q,q=U):(l(q,U),U=Bf(K,q.mode,ae),U.return=q,q=U),S(q)):l(q,U)}return At}var na=_v(!0),wv=_v(!1),rc=Qi(null),ic=null,ra=null,Yd=null;function Jd(){Yd=ra=ic=null}function Zd(i){var o=rc.current;ht(rc),i._currentValue=o}function ef(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function ia(i,o){ic=i,Yd=ra=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(In=!0),i.firstContext=null)}function Xn(i){var o=i._currentValue;if(Yd!==i)if(i={context:i,memoizedValue:o,next:null},ra===null){if(ic===null)throw Error(t(308));ra=i,ic.dependencies={lanes:0,firstContext:i}}else ra=ra.next=i;return o}var eo=null;function tf(i){eo===null?eo=[i]:eo.push(i)}function Ev(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,tf(o)):(l.next=p.next,p.next=l),o.interleaved=l,vi(i,h)}function vi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ji=!1;function nf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Zi(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Xe&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,vi(i,l)}return p=h.interleaved,p===null?(o.next=o,tf(h)):(o.next=p.next,p.next=o),h.interleaved=o,vi(i,l)}function sc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Bi(i,l)}}function Sv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?p=v=o:v=v.next=o}else p=v=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function oc(i,o,l,h){var p=i.updateQueue;Ji=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var V=x,X=V.next;V.next=null,S===null?v=X:S.next=X,S=V;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,x=ie.lastBaseUpdate,x!==S&&(x===null?ie.firstBaseUpdate=X:x.next=X,ie.lastBaseUpdate=V))}if(v!==null){var oe=p.baseState;S=0,ie=X=V=null,x=v;do{var ne=x.lane,de=x.eventTime;if((h&ne)===ne){ie!==null&&(ie=ie.next={eventTime:de,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ge=i,ve=x;switch(ne=o,de=l,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){oe=ge.call(de,oe,ne);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,ne=typeof ge=="function"?ge.call(de,oe,ne):ge,ne==null)break e;oe=se({},oe,ne);break e;case 2:Ji=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,ne=p.effects,ne===null?p.effects=[x]:ne.push(x))}else de={eventTime:de,lane:ne,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ie===null?(X=ie=de,V=oe):ie=ie.next=de,S|=ne;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;ne=x,x=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);if(ie===null&&(V=oe),p.baseState=V,p.firstBaseUpdate=X,p.lastBaseUpdate=ie,o=p.shared.interleaved,o!==null){p=o;do S|=p.lane,p=p.next;while(p!==o)}else v===null&&(p.shared.lanes=0);ro|=S,i.lanes=S,i.memoizedState=oe}}function Iv(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var dl={},Fr=Qi(dl),fl=Qi(dl),pl=Qi(dl);function to(i){if(i===dl)throw Error(t(174));return i}function rf(i,o){switch(at(pl,o),at(fl,i),at(Fr,dl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:It(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=It(o,i)}ht(Fr),at(Fr,o)}function sa(){ht(Fr),ht(fl),ht(pl)}function Cv(i){to(pl.current);var o=to(Fr.current),l=It(o,i.type);o!==l&&(at(fl,i),at(Fr,l))}function sf(i){fl.current===i&&(ht(Fr),ht(fl))}var mt=Qi(0);function ac(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var of=[];function af(){for(var i=0;i<of.length;i++)of[i]._workInProgressVersionPrimary=null;of.length=0}var lc=j.ReactCurrentDispatcher,lf=j.ReactCurrentBatchConfig,no=0,gt=null,Ft=null,Bt=null,uc=!1,ml=!1,gl=0,c1=0;function nn(){throw Error(t(321))}function uf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!gr(i[l],o[l]))return!1;return!0}function cf(i,o,l,h,p,v){if(no=v,gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,lc.current=i===null||i.memoizedState===null?p1:m1,i=l(h,p),ml){v=0;do{if(ml=!1,gl=0,25<=v)throw Error(t(301));v+=1,Bt=Ft=null,o.updateQueue=null,lc.current=g1,i=l(h,p)}while(ml)}if(lc.current=dc,o=Ft!==null&&Ft.next!==null,no=0,Bt=Ft=gt=null,uc=!1,o)throw Error(t(300));return i}function hf(){var i=gl!==0;return gl=0,i}function jr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?gt.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function Yn(){if(Ft===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Ft.next;var o=Bt===null?gt.memoizedState:Bt.next;if(o!==null)Bt=o,Ft=i;else{if(i===null)throw Error(t(310));Ft=i,i={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Bt===null?gt.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}function vl(i,o){return typeof o=="function"?o(i):o}function df(i){var o=Yn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Ft,p=h.baseQueue,v=l.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}h.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,h=h.baseState;var x=S=null,V=null,X=v;do{var ie=X.lane;if((no&ie)===ie)V!==null&&(V=V.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),h=X.hasEagerState?X.eagerState:i(h,X.action);else{var oe={lane:ie,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};V===null?(x=V=oe,S=h):V=V.next=oe,gt.lanes|=ie,ro|=ie}X=X.next}while(X!==null&&X!==v);V===null?S=h:V.next=x,gr(h,o.memoizedState)||(In=!0),o.memoizedState=h,o.baseState=S,o.baseQueue=V,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do v=p.lane,gt.lanes|=v,ro|=v,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function ff(i){var o=Yn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,v=o.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do v=i(v,S.action),S=S.next;while(S!==p);gr(v,o.memoizedState)||(In=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,h]}function bv(){}function Av(i,o){var l=gt,h=Yn(),p=o(),v=!gr(h.memoizedState,p);if(v&&(h.memoizedState=p,In=!0),h=h.queue,pf(kv.bind(null,l,h,i),[i]),h.getSnapshot!==o||v||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,yl(9,Pv.bind(null,l,h,p,o),void 0,null),$t===null)throw Error(t(349));(no&30)!==0||Rv(l,o,p)}return p}function Rv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=gt.updateQueue,o===null?(o={lastEffect:null,stores:null},gt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Pv(i,o,l,h){o.value=l,o.getSnapshot=h,xv(o)&&Nv(i)}function kv(i,o,l){return l(function(){xv(o)&&Nv(i)})}function xv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!gr(i,l)}catch{return!0}}function Nv(i){var o=vi(i,1);o!==null&&Er(o,i,1,-1)}function Ov(i){var o=jr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:i},o.queue=i,i=i.dispatch=f1.bind(null,gt,i),[o.memoizedState,i]}function yl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=gt.updateQueue,o===null?(o={lastEffect:null,stores:null},gt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Dv(){return Yn().memoizedState}function cc(i,o,l,h){var p=jr();gt.flags|=i,p.memoizedState=yl(1|o,l,void 0,h===void 0?null:h)}function hc(i,o,l,h){var p=Yn();h=h===void 0?null:h;var v=void 0;if(Ft!==null){var S=Ft.memoizedState;if(v=S.destroy,h!==null&&uf(h,S.deps)){p.memoizedState=yl(o,l,v,h);return}}gt.flags|=i,p.memoizedState=yl(1|o,l,v,h)}function Vv(i,o){return cc(8390656,8,i,o)}function pf(i,o){return hc(2048,8,i,o)}function Mv(i,o){return hc(4,2,i,o)}function Lv(i,o){return hc(4,4,i,o)}function Fv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function jv(i,o,l){return l=l!=null?l.concat([i]):null,hc(4,4,Fv.bind(null,o,i),l)}function mf(){}function Uv(i,o){var l=Yn();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function zv(i,o){var l=Yn();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Bv(i,o,l){return(no&21)===0?(i.baseState&&(i.baseState=!1,In=!0),i.memoizedState=l):(gr(l,o)||(l=Ws(),gt.lanes|=l,ro|=l,i.baseState=!0),o)}function h1(i,o){var l=qe;qe=l!==0&&4>l?l:4,i(!0);var h=lf.transition;lf.transition={};try{i(!1),o()}finally{qe=l,lf.transition=h}}function $v(){return Yn().memoizedState}function d1(i,o,l){var h=rs(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Hv(i))Wv(o,l);else if(l=Ev(i,o,l,h),l!==null){var p=gn();Er(l,i,h,p),qv(l,o,h)}}function f1(i,o,l){var h=rs(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Hv(i))Wv(o,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,x=v(S,l);if(p.hasEagerState=!0,p.eagerState=x,gr(x,S)){var V=o.interleaved;V===null?(p.next=p,tf(o)):(p.next=V.next,V.next=p),o.interleaved=p;return}}catch{}finally{}l=Ev(i,o,p,h),l!==null&&(p=gn(),Er(l,i,h,p),qv(l,o,h))}}function Hv(i){var o=i.alternate;return i===gt||o!==null&&o===gt}function Wv(i,o){ml=uc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function qv(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Bi(i,l)}}var dc={readContext:Xn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},p1={readContext:Xn,useCallback:function(i,o){return jr().memoizedState=[i,o===void 0?null:o],i},useContext:Xn,useEffect:Vv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,cc(4194308,4,Fv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return cc(4194308,4,i,o)},useInsertionEffect:function(i,o){return cc(4,2,i,o)},useMemo:function(i,o){var l=jr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=jr();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=d1.bind(null,gt,i),[h.memoizedState,i]},useRef:function(i){var o=jr();return i={current:i},o.memoizedState=i},useState:Ov,useDebugValue:mf,useDeferredValue:function(i){return jr().memoizedState=i},useTransition:function(){var i=Ov(!1),o=i[0];return i=h1.bind(null,i[1]),jr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=gt,p=jr();if(pt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),$t===null)throw Error(t(349));(no&30)!==0||Rv(h,o,l)}p.memoizedState=l;var v={value:l,getSnapshot:o};return p.queue=v,Vv(kv.bind(null,h,v,i),[i]),h.flags|=2048,yl(9,Pv.bind(null,h,v,l,o),void 0,null),l},useId:function(){var i=jr(),o=$t.identifierPrefix;if(pt){var l=gi,h=mi;l=(h&~(1<<32-fn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=gl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=c1++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},m1={readContext:Xn,useCallback:Uv,useContext:Xn,useEffect:pf,useImperativeHandle:jv,useInsertionEffect:Mv,useLayoutEffect:Lv,useMemo:zv,useReducer:df,useRef:Dv,useState:function(){return df(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=Yn();return Bv(o,Ft.memoizedState,i)},useTransition:function(){var i=df(vl)[0],o=Yn().memoizedState;return[i,o]},useMutableSource:bv,useSyncExternalStore:Av,useId:$v,unstable_isNewReconciler:!1},g1={readContext:Xn,useCallback:Uv,useContext:Xn,useEffect:pf,useImperativeHandle:jv,useInsertionEffect:Mv,useLayoutEffect:Lv,useMemo:zv,useReducer:ff,useRef:Dv,useState:function(){return ff(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=Yn();return Ft===null?o.memoizedState=i:Bv(o,Ft.memoizedState,i)},useTransition:function(){var i=ff(vl)[0],o=Yn().memoizedState;return[i,o]},useMutableSource:bv,useSyncExternalStore:Av,useId:$v,unstable_isNewReconciler:!1};function yr(i,o){if(i&&i.defaultProps){o=se({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function gf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:se({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fc={isMounted:function(i){return(i=i._reactInternals)?ur(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=gn(),p=rs(i),v=yi(h,p);v.payload=o,l!=null&&(v.callback=l),o=Zi(i,v,p),o!==null&&(Er(o,i,p,h),sc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=gn(),p=rs(i),v=yi(h,p);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Zi(i,v,p),o!==null&&(Er(o,i,p,h),sc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=gn(),h=rs(i),p=yi(l,h);p.tag=2,o!=null&&(p.callback=o),o=Zi(i,p,h),o!==null&&(Er(o,i,h,l),sc(o,i,h))}};function Gv(i,o,l,h,p,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,S):o.prototype&&o.prototype.isPureReactComponent?!il(l,h)||!il(p,v):!0}function Kv(i,o,l){var h=!1,p=Xi,v=o.contextType;return typeof v=="object"&&v!==null?v=Xn(v):(p=Sn(o)?Ys:tn.current,h=o.contextTypes,v=(h=h!=null)?Jo(i,p):Xi),o=new o(l,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=fc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=v),o}function Qv(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&fc.enqueueReplaceState(o,o.state,null)}function vf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},nf(i);var v=o.contextType;typeof v=="object"&&v!==null?p.context=Xn(v):(v=Sn(o)?Ys:tn.current,p.context=Jo(i,v)),p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(gf(i,o,v,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&fc.enqueueReplaceState(p,p.state,null),oc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function oa(i,o){try{var l="",h=o;do l+=Ee(h),h=h.return;while(h);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:p,digest:null}}function yf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function _f(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var v1=typeof WeakMap=="function"?WeakMap:Map;function Xv(i,o,l){l=yi(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){wc||(wc=!0,Df=h),_f(i,o)},l}function Yv(i,o,l){l=yi(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){_f(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){_f(i,o),typeof h!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function Jv(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new v1;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=x1.bind(null,i,o,l),o.then(i,i))}function Zv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function ey(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=yi(-1,1),o.tag=2,Zi(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var y1=j.ReactCurrentOwner,In=!1;function mn(i,o,l,h){o.child=i===null?wv(o,null,l,h):na(o,i.child,l,h)}function ty(i,o,l,h,p){l=l.render;var v=o.ref;return ia(o,p),h=cf(i,o,l,h,v,p),l=hf(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_i(i,o,p)):(pt&&l&&qd(o),o.flags|=1,mn(i,o,h,p),o.child)}function ny(i,o,l,h,p){if(i===null){var v=l.type;return typeof v=="function"&&!zf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,ry(i,o,v,h,p)):(i=bc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,(i.lanes&p)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:il,l(S,h)&&i.ref===o.ref)return _i(i,o,p)}return o.flags|=1,i=ss(v,h),i.ref=o.ref,i.return=o,o.child=i}function ry(i,o,l,h,p){if(i!==null){var v=i.memoizedProps;if(il(v,h)&&i.ref===o.ref)if(In=!1,o.pendingProps=h=v,(i.lanes&p)!==0)(i.flags&131072)!==0&&(In=!0);else return o.lanes=i.lanes,_i(i,o,p)}return wf(i,o,l,h,p)}function iy(i,o,l){var h=o.pendingProps,p=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(la,Un),Un|=l;else{if((l&1073741824)===0)return i=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,at(la,Un),Un|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,at(la,Un),Un|=h}else v!==null?(h=v.baseLanes|l,o.memoizedState=null):h=l,at(la,Un),Un|=h;return mn(i,o,p,l),o.child}function sy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function wf(i,o,l,h,p){var v=Sn(l)?Ys:tn.current;return v=Jo(o,v),ia(o,p),l=cf(i,o,l,h,v,p),h=hf(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_i(i,o,p)):(pt&&h&&qd(o),o.flags|=1,mn(i,o,l,p),o.child)}function oy(i,o,l,h,p){if(Sn(l)){var v=!0;Yu(o)}else v=!1;if(ia(o,p),o.stateNode===null)mc(i,o),Kv(o,l,h),vf(o,l,h,p),h=!0;else if(i===null){var S=o.stateNode,x=o.memoizedProps;S.props=x;var V=S.context,X=l.contextType;typeof X=="object"&&X!==null?X=Xn(X):(X=Sn(l)?Ys:tn.current,X=Jo(o,X));var ie=l.getDerivedStateFromProps,oe=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function";oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==h||V!==X)&&Qv(o,S,h,X),Ji=!1;var ne=o.memoizedState;S.state=ne,oc(o,h,S,p),V=o.memoizedState,x!==h||ne!==V||Tn.current||Ji?(typeof ie=="function"&&(gf(o,l,ie,h),V=o.memoizedState),(x=Ji||Gv(o,l,x,h,ne,V,X))?(oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=V),S.props=h,S.state=V,S.context=X,h=x):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{S=o.stateNode,Tv(i,o),x=o.memoizedProps,X=o.type===o.elementType?x:yr(o.type,x),S.props=X,oe=o.pendingProps,ne=S.context,V=l.contextType,typeof V=="object"&&V!==null?V=Xn(V):(V=Sn(l)?Ys:tn.current,V=Jo(o,V));var de=l.getDerivedStateFromProps;(ie=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==oe||ne!==V)&&Qv(o,S,h,V),Ji=!1,ne=o.memoizedState,S.state=ne,oc(o,h,S,p);var ge=o.memoizedState;x!==oe||ne!==ge||Tn.current||Ji?(typeof de=="function"&&(gf(o,l,de,h),ge=o.memoizedState),(X=Ji||Gv(o,l,X,h,ne,ge,V)||!1)?(ie||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ge,V),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ge,V)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ge),S.props=h,S.state=ge,S.context=V,h=X):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),h=!1)}return Ef(i,o,l,h,v,p)}function Ef(i,o,l,h,p,v){sy(i,o);var S=(o.flags&128)!==0;if(!h&&!S)return p&&hv(o,l,!1),_i(i,o,v);h=o.stateNode,y1.current=o;var x=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&S?(o.child=na(o,i.child,null,v),o.child=na(o,null,x,v)):mn(i,o,x,v),o.memoizedState=h.state,p&&hv(o,l,!0),o.child}function ay(i){var o=i.stateNode;o.pendingContext?uv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&uv(i,o.context,!1),rf(i,o.containerInfo)}function ly(i,o,l,h,p){return ta(),Xd(p),o.flags|=256,mn(i,o,l,h),o.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function Sf(i){return{baseLanes:i,cachePool:null,transitions:null}}function uy(i,o,l){var h=o.pendingProps,p=mt.current,v=!1,S=(o.flags&128)!==0,x;if((x=S)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),at(mt,p&1),i===null)return Qd(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=h.children,i=h.fallback,v?(h=o.mode,v=o.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ac(S,h,0,null),i=ao(i,h,l,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=Sf(l),o.memoizedState=Tf,i):If(o,S));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return _1(i,o,S,h,x,p,l);if(v){v=h.fallback,S=o.mode,p=i.child,x=p.sibling;var V={mode:"hidden",children:h.children};return(S&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=V,o.deletions=null):(h=ss(p,V),h.subtreeFlags=p.subtreeFlags&14680064),x!==null?v=ss(x,v):(v=ao(v,S,l,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,S=i.child.memoizedState,S=S===null?Sf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~l,o.memoizedState=Tf,h}return v=i.child,i=v.sibling,h=ss(v,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function If(i,o){return o=Ac({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function pc(i,o,l,h){return h!==null&&Xd(h),na(o,i.child,null,l),i=If(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function _1(i,o,l,h,p,v,S){if(l)return o.flags&256?(o.flags&=-257,h=yf(Error(t(422))),pc(i,o,S,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=h.fallback,p=o.mode,h=Ac({mode:"visible",children:h.children},p,0,null),v=ao(v,p,S,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,(o.mode&1)!==0&&na(o,i.child,null,S),o.child.memoizedState=Sf(S),o.memoizedState=Tf,v);if((o.mode&1)===0)return pc(i,o,S,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var x=h.dgst;return h=x,v=Error(t(419)),h=yf(v,h,void 0),pc(i,o,S,h)}if(x=(S&i.childLanes)!==0,In||x){if(h=$t,h!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,vi(i,p),Er(h,i,p,-1))}return Uf(),h=yf(Error(t(421))),pc(i,o,S,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=N1.bind(null,i),p._reactRetry=o,null):(i=v.treeContext,jn=Ki(p.nextSibling),Fn=o,pt=!0,vr=null,i!==null&&(Kn[Qn++]=mi,Kn[Qn++]=gi,Kn[Qn++]=Js,mi=i.id,gi=i.overflow,Js=o),o=If(o,h.children),o.flags|=4096,o)}function cy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ef(i.return,o,l)}function Cf(i,o,l,h,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=p)}function hy(i,o,l){var h=o.pendingProps,p=h.revealOrder,v=h.tail;if(mn(i,o,h.children,l),h=mt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&cy(i,l,o);else if(i.tag===19)cy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(at(mt,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&ac(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Cf(o,!1,p,l,v);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&ac(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Cf(o,!0,l,null,v);break;case"together":Cf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function mc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function _i(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ro|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=ss(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=ss(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function w1(i,o,l){switch(o.tag){case 3:ay(o),ta();break;case 5:Cv(o);break;case 1:Sn(o.type)&&Yu(o);break;case 4:rf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;at(rc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(at(mt,mt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?uy(i,o,l):(at(mt,mt.current&1),i=_i(i,o,l),i!==null?i.sibling:null);at(mt,mt.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return hy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),at(mt,mt.current),h)break;return null;case 22:case 23:return o.lanes=0,iy(i,o,l)}return _i(i,o,l)}var dy,bf,fy,py;dy=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},bf=function(){},fy=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,to(Fr.current);var v=null;switch(l){case"input":p=$n(i,p),h=$n(i,h),v=[];break;case"select":p=se({},p,{value:void 0}),h=se({},h,{value:void 0}),v=[];break;case"textarea":p=Os(i,p),h=Os(i,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Ku)}Ls(l,h);var S;l=null;for(X in p)if(!h.hasOwnProperty(X)&&p.hasOwnProperty(X)&&p[X]!=null)if(X==="style"){var x=p[X];for(S in x)x.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?v||(v=[]):(v=v||[]).push(X,null));for(X in h){var V=h[X];if(x=p!=null?p[X]:void 0,h.hasOwnProperty(X)&&V!==x&&(V!=null||x!=null))if(X==="style")if(x){for(S in x)!x.hasOwnProperty(S)||V&&V.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in V)V.hasOwnProperty(S)&&x[S]!==V[S]&&(l||(l={}),l[S]=V[S])}else l||(v||(v=[]),v.push(X,l)),l=V;else X==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,x=x?x.__html:void 0,V!=null&&x!==V&&(v=v||[]).push(X,V)):X==="children"?typeof V!="string"&&typeof V!="number"||(v=v||[]).push(X,""+V):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(V!=null&&X==="onScroll"&&ct("scroll",i),v||x===V||(v=[])):(v=v||[]).push(X,V))}l&&(v=v||[]).push("style",l);var X=v;(o.updateQueue=X)&&(o.flags|=4)}},py=function(i,o,l,h){l!==h&&(o.flags|=4)};function _l(i,o){if(!pt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function rn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function E1(i,o,l){var h=o.pendingProps;switch(Gd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(o),null;case 1:return Sn(o.type)&&Xu(),rn(o),null;case 3:return h=o.stateNode,sa(),ht(Tn),ht(tn),af(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(tc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vr!==null&&(Lf(vr),vr=null))),bf(i,o),rn(o),null;case 5:sf(o);var p=to(pl.current);if(l=o.type,i!==null&&o.stateNode!=null)fy(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return rn(o),null}if(i=to(Fr.current),tc(o)){h=o.stateNode,l=o.type;var v=o.memoizedProps;switch(h[Lr]=o,h[ul]=v,i=(o.mode&1)!==0,l){case"dialog":ct("cancel",h),ct("close",h);break;case"iframe":case"object":case"embed":ct("load",h);break;case"video":case"audio":for(p=0;p<ol.length;p++)ct(ol[p],h);break;case"source":ct("error",h);break;case"img":case"image":case"link":ct("error",h),ct("load",h);break;case"details":ct("toggle",h);break;case"input":rr(h,v),ct("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},ct("invalid",h);break;case"textarea":dn(h,v),ct("invalid",h)}Ls(l,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var x=v[S];S==="children"?typeof x=="string"?h.textContent!==x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&ct("scroll",h)}switch(l){case"input":hn(h),Ns(h,v,!0);break;case"textarea":hn(h),Vi(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Ku)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=St(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=S.createElement(l,{is:h.is}):(i=S.createElement(l),l==="select"&&(S=i,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):i=S.createElementNS(i,l),i[Lr]=o,i[ul]=h,dy(i,o,!1,!1),o.stateNode=i;e:{switch(S=F(l,h),l){case"dialog":ct("cancel",i),ct("close",i),p=h;break;case"iframe":case"object":case"embed":ct("load",i),p=h;break;case"video":case"audio":for(p=0;p<ol.length;p++)ct(ol[p],i);p=h;break;case"source":ct("error",i),p=h;break;case"img":case"image":case"link":ct("error",i),ct("load",i),p=h;break;case"details":ct("toggle",i),p=h;break;case"input":rr(i,h),p=$n(i,h),ct("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=se({},h,{value:void 0}),ct("invalid",i);break;case"textarea":dn(i,h),p=Os(i,h),ct("invalid",i);break;default:p=h}Ls(l,p),x=p;for(v in x)if(x.hasOwnProperty(v)){var V=x[v];v==="style"?Ms(i,V):v==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ds(i,V)):v==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&kr(i,V):typeof V=="number"&&kr(i,""+V):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?V!=null&&v==="onScroll"&&ct("scroll",i):V!=null&&Q(i,v,V,S))}switch(l){case"input":hn(i),Ns(i,h,!1);break;case"textarea":hn(i),Vi(i);break;case"option":h.value!=null&&i.setAttribute("value",""+ye(h.value));break;case"select":i.multiple=!!h.multiple,v=h.value,v!=null?sr(i,!!h.multiple,v,!1):h.defaultValue!=null&&sr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ku)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return rn(o),null;case 6:if(i&&o.stateNode!=null)py(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=to(pl.current),to(Fr.current),tc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Lr]=o,(v=h.nodeValue!==l)&&(i=Fn,i!==null))switch(i.tag){case 3:Gu(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gu(h.nodeValue,l,(i.mode&1)!==0)}v&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Lr]=o,o.stateNode=h}return rn(o),null;case 13:if(ht(mt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(pt&&jn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)vv(),ta(),o.flags|=98560,v=!1;else if(v=tc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Lr]=o}else ta(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;rn(o),v=!1}else vr!==null&&(Lf(vr),vr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(mt.current&1)!==0?jt===0&&(jt=3):Uf())),o.updateQueue!==null&&(o.flags|=4),rn(o),null);case 4:return sa(),bf(i,o),i===null&&al(o.stateNode.containerInfo),rn(o),null;case 10:return Zd(o.type._context),rn(o),null;case 17:return Sn(o.type)&&Xu(),rn(o),null;case 19:if(ht(mt),v=o.memoizedState,v===null)return rn(o),null;if(h=(o.flags&128)!==0,S=v.rendering,S===null)if(h)_l(v,!1);else{if(jt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ac(i),S!==null){for(o.flags|=128,_l(v,!1),h=S.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)v=l,i=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return at(mt,mt.current&1|2),o.child}i=i.sibling}v.tail!==null&&ot()>ua&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304)}else{if(!h)if(i=ac(S),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),_l(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!pt)return rn(o),null}else 2*ot()-v.renderingStartTime>ua&&l!==1073741824&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ot(),o.sibling=null,l=mt.current,at(mt,h?l&1|2:l&1),o):(rn(o),null);case 22:case 23:return jf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Un&1073741824)!==0&&(rn(o),o.subtreeFlags&6&&(o.flags|=8192)):rn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function T1(i,o){switch(Gd(o),o.tag){case 1:return Sn(o.type)&&Xu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return sa(),ht(Tn),ht(tn),af(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return sf(o),null;case 13:if(ht(mt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ta()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ht(mt),null;case 4:return sa(),null;case 10:return Zd(o.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var gc=!1,sn=!1,S1=typeof WeakSet=="function"?WeakSet:Set,pe=null;function aa(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){_t(i,o,h)}else l.current=null}function Af(i,o,l){try{l()}catch(h){_t(i,o,h)}}var my=!1;function I1(i,o){if(Fd=Wi,i=Gg(),kd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,x=-1,V=-1,X=0,ie=0,oe=i,ne=null;t:for(;;){for(var de;oe!==l||p!==0&&oe.nodeType!==3||(x=S+p),oe!==v||h!==0&&oe.nodeType!==3||(V=S+h),oe.nodeType===3&&(S+=oe.nodeValue.length),(de=oe.firstChild)!==null;)ne=oe,oe=de;for(;;){if(oe===i)break t;if(ne===l&&++X===p&&(x=S),ne===v&&++ie===h&&(V=S),(de=oe.nextSibling)!==null)break;oe=ne,ne=oe.parentNode}oe=de}l=x===-1||V===-1?null:{start:x,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(jd={focusedElem:i,selectionRange:l},Wi=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,At=ge.memoizedState,q=o.stateNode,U=q.getSnapshotBeforeUpdate(o.elementType===o.type?ve:yr(o.type,ve),At);q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){_t(o,o.return,ae)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=my,my=!1,ge}function wl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var v=p.destroy;p.destroy=void 0,v!==void 0&&Af(o,l,v)}p=p.next}while(p!==h)}}function vc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Rf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function gy(i){var o=i.alternate;o!==null&&(i.alternate=null,gy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Lr],delete o[ul],delete o[$d],delete o[o1],delete o[a1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function vy(i){return i.tag===5||i.tag===3||i.tag===4}function yy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ku));else if(h!==4&&(i=i.child,i!==null))for(Pf(i,o,l),i=i.sibling;i!==null;)Pf(i,o,l),i=i.sibling}function kf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(kf(i,o,l),i=i.sibling;i!==null;)kf(i,o,l),i=i.sibling}var Kt=null,_r=!1;function es(i,o,l){for(l=l.child;l!==null;)_y(i,o,l),l=l.sibling}function _y(i,o,l){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount($s,l)}catch{}switch(l.tag){case 5:sn||aa(l,o);case 6:var h=Kt,p=_r;Kt=null,es(i,o,l),Kt=h,_r=p,Kt!==null&&(_r?(i=Kt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Kt.removeChild(l.stateNode));break;case 18:Kt!==null&&(_r?(i=Kt,l=l.stateNode,i.nodeType===8?Bd(i.parentNode,l):i.nodeType===1&&Bd(i,l),pr(i)):Bd(Kt,l.stateNode));break;case 4:h=Kt,p=_r,Kt=l.stateNode.containerInfo,_r=!0,es(i,o,l),Kt=h,_r=p;break;case 0:case 11:case 14:case 15:if(!sn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Af(l,o,S),p=p.next}while(p!==h)}es(i,o,l);break;case 1:if(!sn&&(aa(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(x){_t(l,o,x)}es(i,o,l);break;case 21:es(i,o,l);break;case 22:l.mode&1?(sn=(h=sn)||l.memoizedState!==null,es(i,o,l),sn=h):es(i,o,l);break;default:es(i,o,l)}}function wy(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new S1),o.forEach(function(h){var p=O1.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function wr(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var v=i,S=o,x=S;e:for(;x!==null;){switch(x.tag){case 5:Kt=x.stateNode,_r=!1;break e;case 3:Kt=x.stateNode.containerInfo,_r=!0;break e;case 4:Kt=x.stateNode.containerInfo,_r=!0;break e}x=x.return}if(Kt===null)throw Error(t(160));_y(v,S,p),Kt=null,_r=!1;var V=p.alternate;V!==null&&(V.return=null),p.return=null}catch(X){_t(p,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ey(o,i),o=o.sibling}function Ey(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(wr(o,i),Ur(i),h&4){try{wl(3,i,i.return),vc(3,i)}catch(ve){_t(i,i.return,ve)}try{wl(5,i,i.return)}catch(ve){_t(i,i.return,ve)}}break;case 1:wr(o,i),Ur(i),h&512&&l!==null&&aa(l,l.return);break;case 5:if(wr(o,i),Ur(i),h&512&&l!==null&&aa(l,l.return),i.flags&32){var p=i.stateNode;try{kr(p,"")}catch(ve){_t(i,i.return,ve)}}if(h&4&&(p=i.stateNode,p!=null)){var v=i.memoizedProps,S=l!==null?l.memoizedProps:v,x=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{x==="input"&&v.type==="radio"&&v.name!=null&&xs(p,v),F(x,S);var X=F(x,v);for(S=0;S<V.length;S+=2){var ie=V[S],oe=V[S+1];ie==="style"?Ms(p,oe):ie==="dangerouslySetInnerHTML"?Ds(p,oe):ie==="children"?kr(p,oe):Q(p,ie,oe,X)}switch(x){case"input":ii(p,v);break;case"textarea":We(p,v);break;case"select":var ne=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var de=v.value;de!=null?sr(p,!!v.multiple,de,!1):ne!==!!v.multiple&&(v.defaultValue!=null?sr(p,!!v.multiple,v.defaultValue,!0):sr(p,!!v.multiple,v.multiple?[]:"",!1))}p[ul]=v}catch(ve){_t(i,i.return,ve)}}break;case 6:if(wr(o,i),Ur(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,v=i.memoizedProps;try{p.nodeValue=v}catch(ve){_t(i,i.return,ve)}}break;case 3:if(wr(o,i),Ur(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{pr(o.containerInfo)}catch(ve){_t(i,i.return,ve)}break;case 4:wr(o,i),Ur(i);break;case 13:wr(o,i),Ur(i),p=i.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Of=ot())),h&4&&wy(i);break;case 22:if(ie=l!==null&&l.memoizedState!==null,i.mode&1?(sn=(X=sn)||ie,wr(o,i),sn=X):wr(o,i),Ur(i),h&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!ie&&(i.mode&1)!==0)for(pe=i,ie=i.child;ie!==null;){for(oe=pe=ie;pe!==null;){switch(ne=pe,de=ne.child,ne.tag){case 0:case 11:case 14:case 15:wl(4,ne,ne.return);break;case 1:aa(ne,ne.return);var ge=ne.stateNode;if(typeof ge.componentWillUnmount=="function"){h=ne,l=ne.return;try{o=h,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(ve){_t(h,l,ve)}}break;case 5:aa(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Iy(oe);continue}}de!==null?(de.return=ne,pe=de):Iy(oe)}ie=ie.sibling}e:for(ie=null,oe=i;;){if(oe.tag===5){if(ie===null){ie=oe;try{p=oe.stateNode,X?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(x=oe.stateNode,V=oe.memoizedProps.style,S=V!=null&&V.hasOwnProperty("display")?V.display:null,x.style.display=Vs("display",S))}catch(ve){_t(i,i.return,ve)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=X?"":oe.memoizedProps}catch(ve){_t(i,i.return,ve)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:wr(o,i),Ur(i),h&4&&wy(i);break;case 21:break;default:wr(o,i),Ur(i)}}function Ur(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(vy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(kr(p,""),h.flags&=-33);var v=yy(i);kf(i,v,p);break;case 3:case 4:var S=h.stateNode.containerInfo,x=yy(i);Pf(i,x,S);break;default:throw Error(t(161))}}catch(V){_t(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function C1(i,o,l){pe=i,Ty(i)}function Ty(i,o,l){for(var h=(i.mode&1)!==0;pe!==null;){var p=pe,v=p.child;if(p.tag===22&&h){var S=p.memoizedState!==null||gc;if(!S){var x=p.alternate,V=x!==null&&x.memoizedState!==null||sn;x=gc;var X=sn;if(gc=S,(sn=V)&&!X)for(pe=p;pe!==null;)S=pe,V=S.child,S.tag===22&&S.memoizedState!==null?Cy(p):V!==null?(V.return=S,pe=V):Cy(p);for(;v!==null;)pe=v,Ty(v),v=v.sibling;pe=p,gc=x,sn=X}Sy(i)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,pe=v):Sy(i)}}function Sy(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:sn||vc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!sn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:yr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Iv(o,v,h);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Iv(o,S,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var ie=X.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&pr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||o.flags&512&&Rf(o)}catch(ne){_t(o,o.return,ne)}}if(o===i){pe=null;break}if(l=o.sibling,l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Iy(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Cy(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{vc(4,o)}catch(V){_t(o,l,V)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(V){_t(o,p,V)}}var v=o.return;try{Rf(o)}catch(V){_t(o,v,V)}break;case 5:var S=o.return;try{Rf(o)}catch(V){_t(o,S,V)}}}catch(V){_t(o,o.return,V)}if(o===i){pe=null;break}var x=o.sibling;if(x!==null){x.return=o.return,pe=x;break}pe=o.return}}var b1=Math.ceil,yc=j.ReactCurrentDispatcher,xf=j.ReactCurrentOwner,Jn=j.ReactCurrentBatchConfig,Xe=0,$t=null,xt=null,Qt=0,Un=0,la=Qi(0),jt=0,El=null,ro=0,_c=0,Nf=0,Tl=null,Cn=null,Of=0,ua=1/0,wi=null,wc=!1,Df=null,ts=null,Ec=!1,ns=null,Tc=0,Sl=0,Vf=null,Sc=-1,Ic=0;function gn(){return(Xe&6)!==0?ot():Sc!==-1?Sc:Sc=ot()}function rs(i){return(i.mode&1)===0?1:(Xe&2)!==0&&Qt!==0?Qt&-Qt:u1.transition!==null?(Ic===0&&(Ic=Ws()),Ic):(i=qe,i!==0||(i=window.event,i=i===void 0?16:Ya(i.type)),i)}function Er(i,o,l,h){if(50<Sl)throw Sl=0,Vf=null,Error(t(185));zi(i,l,h),((Xe&2)===0||i!==$t)&&(i===$t&&((Xe&2)===0&&(_c|=l),jt===4&&is(i,Qt)),bn(i,h),l===1&&Xe===0&&(o.mode&1)===0&&(ua=ot()+500,Ju&&Yi()))}function bn(i,o){var l=i.callbackNode;li(i,o);var h=Hs(i,i===$t?Qt:0);if(h===0)l!==null&&qa(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&qa(l),o===1)i.tag===0?l1(Ay.bind(null,i)):dv(Ay.bind(null,i)),i1(function(){(Xe&6)===0&&Yi()}),l=null;else{switch($i(h)){case 1:l=Bs;break;case 4:l=Fi;break;case 16:l=Wn;break;case 536870912:l=Iu;break;default:l=Wn}l=Vy(l,by.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function by(i,o){if(Sc=-1,Ic=0,(Xe&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ca()&&i.callbackNode!==l)return null;var h=Hs(i,i===$t?Qt:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Cc(i,h);else{o=h;var p=Xe;Xe|=2;var v=Py();($t!==i||Qt!==o)&&(wi=null,ua=ot()+500,so(i,o));do try{P1();break}catch(x){Ry(i,x)}while(!0);Jd(),yc.current=v,Xe=p,xt!==null?o=0:($t=null,Qt=0,o=jt)}if(o!==0){if(o===2&&(p=Vn(i),p!==0&&(h=p,o=Mf(i,p))),o===1)throw l=El,so(i,0),is(i,h),bn(i,ot()),l;if(o===6)is(i,h);else{if(p=i.current.alternate,(h&30)===0&&!A1(p)&&(o=Cc(i,h),o===2&&(v=Vn(i),v!==0&&(h=v,o=Mf(i,v))),o===1))throw l=El,so(i,0),is(i,h),bn(i,ot()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:oo(i,Cn,wi);break;case 3:if(is(i,h),(h&130023424)===h&&(o=Of+500-ot(),10<o)){if(Hs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){gn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=zd(oo.bind(null,i,Cn,wi),o);break}oo(i,Cn,wi);break;case 4:if(is(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var S=31-fn(h);v=1<<S,S=o[S],S>p&&(p=S),h&=~v}if(h=p,h=ot()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*b1(h/1960))-h,10<h){i.timeoutHandle=zd(oo.bind(null,i,Cn,wi),h);break}oo(i,Cn,wi);break;case 5:oo(i,Cn,wi);break;default:throw Error(t(329))}}}return bn(i,ot()),i.callbackNode===l?by.bind(null,i):null}function Mf(i,o){var l=Tl;return i.current.memoizedState.isDehydrated&&(so(i,o).flags|=256),i=Cc(i,o),i!==2&&(o=Cn,Cn=l,o!==null&&Lf(o)),i}function Lf(i){Cn===null?Cn=i:Cn.push.apply(Cn,i)}function A1(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],v=p.getSnapshot;p=p.value;try{if(!gr(v(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function is(i,o){for(o&=~Nf,o&=~_c,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-fn(o),h=1<<l;i[l]=-1,o&=~h}}function Ay(i){if((Xe&6)!==0)throw Error(t(327));ca();var o=Hs(i,0);if((o&1)===0)return bn(i,ot()),null;var l=Cc(i,o);if(i.tag!==0&&l===2){var h=Vn(i);h!==0&&(o=h,l=Mf(i,h))}if(l===1)throw l=El,so(i,0),is(i,o),bn(i,ot()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,oo(i,Cn,wi),bn(i,ot()),null}function Ff(i,o){var l=Xe;Xe|=1;try{return i(o)}finally{Xe=l,Xe===0&&(ua=ot()+500,Ju&&Yi())}}function io(i){ns!==null&&ns.tag===0&&(Xe&6)===0&&ca();var o=Xe;Xe|=1;var l=Jn.transition,h=qe;try{if(Jn.transition=null,qe=1,i)return i()}finally{qe=h,Jn.transition=l,Xe=o,(Xe&6)===0&&Yi()}}function jf(){Un=la.current,ht(la)}function so(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,r1(l)),xt!==null)for(l=xt.return;l!==null;){var h=l;switch(Gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Xu();break;case 3:sa(),ht(Tn),ht(tn),af();break;case 5:sf(h);break;case 4:sa();break;case 13:ht(mt);break;case 19:ht(mt);break;case 10:Zd(h.type._context);break;case 22:case 23:jf()}l=l.return}if($t=i,xt=i=ss(i.current,null),Qt=Un=o,jt=0,El=null,Nf=_c=ro=0,Cn=Tl=null,eo!==null){for(o=0;o<eo.length;o++)if(l=eo[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,v=l.pending;if(v!==null){var S=v.next;v.next=p,h.next=S}l.pending=h}eo=null}return i}function Ry(i,o){do{var l=xt;try{if(Jd(),lc.current=dc,uc){for(var h=gt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}uc=!1}if(no=0,Bt=Ft=gt=null,ml=!1,gl=0,xf.current=null,l===null||l.return===null){jt=1,El=o,xt=null;break}e:{var v=i,S=l.return,x=l,V=o;if(o=Qt,x.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var X=V,ie=x,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var ne=ie.alternate;ne?(ie.updateQueue=ne.updateQueue,ie.memoizedState=ne.memoizedState,ie.lanes=ne.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var de=Zv(S);if(de!==null){de.flags&=-257,ey(de,S,x,v,o),de.mode&1&&Jv(v,X,o),o=de,V=X;var ge=o.updateQueue;if(ge===null){var ve=new Set;ve.add(V),o.updateQueue=ve}else ge.add(V);break e}else{if((o&1)===0){Jv(v,X,o),Uf();break e}V=Error(t(426))}}else if(pt&&x.mode&1){var At=Zv(S);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),ey(At,S,x,v,o),Xd(oa(V,x));break e}}v=V=oa(V,x),jt!==4&&(jt=2),Tl===null?Tl=[v]:Tl.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var q=Xv(v,V,o);Sv(v,q);break e;case 1:x=V;var U=v.type,K=v.stateNode;if((v.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(ts===null||!ts.has(K)))){v.flags|=65536,o&=-o,v.lanes|=o;var ae=Yv(v,x,o);Sv(v,ae);break e}}v=v.return}while(v!==null)}xy(l)}catch(_e){o=_e,xt===l&&l!==null&&(xt=l=l.return);continue}break}while(!0)}function Py(){var i=yc.current;return yc.current=dc,i===null?dc:i}function Uf(){(jt===0||jt===3||jt===2)&&(jt=4),$t===null||(ro&268435455)===0&&(_c&268435455)===0||is($t,Qt)}function Cc(i,o){var l=Xe;Xe|=2;var h=Py();($t!==i||Qt!==o)&&(wi=null,so(i,o));do try{R1();break}catch(p){Ry(i,p)}while(!0);if(Jd(),Xe=l,yc.current=h,xt!==null)throw Error(t(261));return $t=null,Qt=0,jt}function R1(){for(;xt!==null;)ky(xt)}function P1(){for(;xt!==null&&!Tu();)ky(xt)}function ky(i){var o=Dy(i.alternate,i,Un);i.memoizedProps=i.pendingProps,o===null?xy(i):xt=o,xf.current=null}function xy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=E1(l,o,Un),l!==null){xt=l;return}}else{if(l=T1(l,o),l!==null){l.flags&=32767,xt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{jt=6,xt=null;return}}if(o=o.sibling,o!==null){xt=o;return}xt=o=i}while(o!==null);jt===0&&(jt=5)}function oo(i,o,l){var h=qe,p=Jn.transition;try{Jn.transition=null,qe=1,k1(i,o,l,h)}finally{Jn.transition=p,qe=h}return null}function k1(i,o,l,h){do ca();while(ns!==null);if((Xe&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(it(i,v),i===$t&&(xt=$t=null,Qt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ec||(Ec=!0,Vy(Wn,function(){return ca(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Jn.transition,Jn.transition=null;var S=qe;qe=1;var x=Xe;Xe|=4,xf.current=null,I1(i,l),Ey(l,i),XI(jd),Wi=!!Fd,jd=Fd=null,i.current=l,C1(l),Td(),Xe=x,qe=S,Jn.transition=v}else i.current=l;if(Ec&&(Ec=!1,ns=i,Tc=p),v=i.pendingLanes,v===0&&(ts=null),Cu(l.stateNode),bn(i,ot()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(wc)throw wc=!1,i=Df,Df=null,i;return(Tc&1)!==0&&i.tag!==0&&ca(),v=i.pendingLanes,(v&1)!==0?i===Vf?Sl++:(Sl=0,Vf=i):Sl=0,Yi(),null}function ca(){if(ns!==null){var i=$i(Tc),o=Jn.transition,l=qe;try{if(Jn.transition=null,qe=16>i?16:i,ns===null)var h=!1;else{if(i=ns,ns=null,Tc=0,(Xe&6)!==0)throw Error(t(331));var p=Xe;for(Xe|=4,pe=i.current;pe!==null;){var v=pe,S=v.child;if((pe.flags&16)!==0){var x=v.deletions;if(x!==null){for(var V=0;V<x.length;V++){var X=x[V];for(pe=X;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:wl(8,ie,v)}var oe=ie.child;if(oe!==null)oe.return=ie,pe=oe;else for(;pe!==null;){ie=pe;var ne=ie.sibling,de=ie.return;if(gy(ie),ie===X){pe=null;break}if(ne!==null){ne.return=de,pe=ne;break}pe=de}}}var ge=v.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var At=ve.sibling;ve.sibling=null,ve=At}while(ve!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,pe=S;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:wl(9,v,v.return)}var q=v.sibling;if(q!==null){q.return=v.return,pe=q;break e}pe=v.return}}var U=i.current;for(pe=U;pe!==null;){S=pe;var K=S.child;if((S.subtreeFlags&2064)!==0&&K!==null)K.return=S,pe=K;else e:for(S=U;pe!==null;){if(x=pe,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:vc(9,x)}}catch(_e){_t(x,x.return,_e)}if(x===S){pe=null;break e}var ae=x.sibling;if(ae!==null){ae.return=x.return,pe=ae;break e}pe=x.return}}if(Xe=p,Yi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot($s,i)}catch{}h=!0}return h}finally{qe=l,Jn.transition=o}}return!1}function Ny(i,o,l){o=oa(l,o),o=Xv(i,o,1),i=Zi(i,o,1),o=gn(),i!==null&&(zi(i,1,o),bn(i,o))}function _t(i,o,l){if(i.tag===3)Ny(i,i,l);else for(;o!==null;){if(o.tag===3){Ny(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ts===null||!ts.has(h))){i=oa(l,i),i=Yv(o,i,1),o=Zi(o,i,1),i=gn(),o!==null&&(zi(o,1,i),bn(o,i));break}}o=o.return}}function x1(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=gn(),i.pingedLanes|=i.suspendedLanes&l,$t===i&&(Qt&l)===l&&(jt===4||jt===3&&(Qt&130023424)===Qt&&500>ot()-Of?so(i,0):Nf|=l),bn(i,o)}function Oy(i,o){o===0&&((i.mode&1)===0?o=1:(o=Oo,Oo<<=1,(Oo&130023424)===0&&(Oo=4194304)));var l=gn();i=vi(i,o),i!==null&&(zi(i,o,l),bn(i,l))}function N1(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Oy(i,l)}function O1(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),Oy(i,l)}var Dy;Dy=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Tn.current)In=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return In=!1,w1(i,o,l);In=(i.flags&131072)!==0}else In=!1,pt&&(o.flags&1048576)!==0&&fv(o,ec,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;mc(i,o),i=o.pendingProps;var p=Jo(o,tn.current);ia(o,l),p=cf(null,o,h,i,p,l);var v=hf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(h)?(v=!0,Yu(o)):v=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,nf(o),p.updater=fc,o.stateNode=p,p._reactInternals=o,vf(o,h,i,l),o=Ef(null,o,h,!0,v,l)):(o.tag=0,pt&&v&&qd(o),mn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(mc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=V1(h),i=yr(h,i),p){case 0:o=wf(null,o,h,i,l);break e;case 1:o=oy(null,o,h,i,l);break e;case 11:o=ty(null,o,h,i,l);break e;case 14:o=ny(null,o,h,yr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:yr(h,p),wf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:yr(h,p),oy(i,o,h,p,l);case 3:e:{if(ay(o),i===null)throw Error(t(387));h=o.pendingProps,v=o.memoizedState,p=v.element,Tv(i,o),oc(o,h,null,l);var S=o.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){p=oa(Error(t(423)),o),o=ly(i,o,h,l,p);break e}else if(h!==p){p=oa(Error(t(424)),o),o=ly(i,o,h,l,p);break e}else for(jn=Ki(o.stateNode.containerInfo.firstChild),Fn=o,pt=!0,vr=null,l=wv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ta(),h===p){o=_i(i,o,l);break e}mn(i,o,h,l)}o=o.child}return o;case 5:return Cv(o),i===null&&Qd(o),h=o.type,p=o.pendingProps,v=i!==null?i.memoizedProps:null,S=p.children,Ud(h,p)?S=null:v!==null&&Ud(h,v)&&(o.flags|=32),sy(i,o),mn(i,o,S,l),o.child;case 6:return i===null&&Qd(o),null;case 13:return uy(i,o,l);case 4:return rf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=na(o,null,h,l):mn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:yr(h,p),ty(i,o,h,p,l);case 7:return mn(i,o,o.pendingProps,l),o.child;case 8:return mn(i,o,o.pendingProps.children,l),o.child;case 12:return mn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,v=o.memoizedProps,S=p.value,at(rc,h._currentValue),h._currentValue=S,v!==null)if(gr(v.value,S)){if(v.children===p.children&&!Tn.current){o=_i(i,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var x=v.dependencies;if(x!==null){S=v.child;for(var V=x.firstContext;V!==null;){if(V.context===h){if(v.tag===1){V=yi(-1,l&-l),V.tag=2;var X=v.updateQueue;if(X!==null){X=X.shared;var ie=X.pending;ie===null?V.next=V:(V.next=ie.next,ie.next=V),X.pending=V}}v.lanes|=l,V=v.alternate,V!==null&&(V.lanes|=l),ef(v.return,l,o),x.lanes|=l;break}V=V.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,x=S.alternate,x!==null&&(x.lanes|=l),ef(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}mn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,ia(o,l),p=Xn(p),h=h(p),o.flags|=1,mn(i,o,h,l),o.child;case 14:return h=o.type,p=yr(h,o.pendingProps),p=yr(h.type,p),ny(i,o,h,p,l);case 15:return ry(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:yr(h,p),mc(i,o),o.tag=1,Sn(h)?(i=!0,Yu(o)):i=!1,ia(o,l),Kv(o,h,p),vf(o,h,p,l),Ef(null,o,h,!0,i,l);case 19:return hy(i,o,l);case 22:return iy(i,o,l)}throw Error(t(156,o.tag))};function Vy(i,o){return xo(i,o)}function D1(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(i,o,l,h){return new D1(i,o,l,h)}function zf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function V1(i){if(typeof i=="function")return zf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===De)return 14}return 2}function ss(i,o){var l=i.alternate;return l===null?(l=Zn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function bc(i,o,l,h,p,v){var S=2;if(h=i,typeof i=="function")zf(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case b:return ao(l.children,p,v,o);case I:S=8,p|=8;break;case P:return i=Zn(12,l,o,p|2),i.elementType=P,i.lanes=v,i;case k:return i=Zn(13,l,o,p),i.elementType=k,i.lanes=v,i;case Fe:return i=Zn(19,l,o,p),i.elementType=Fe,i.lanes=v,i;case je:return Ac(l,p,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:S=10;break e;case L:S=9;break e;case z:S=11;break e;case De:S=14;break e;case Ue:S=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Zn(S,l,o,p),o.elementType=i,o.type=h,o.lanes=v,o}function ao(i,o,l,h){return i=Zn(7,i,h,o),i.lanes=l,i}function Ac(i,o,l,h){return i=Zn(22,i,h,o),i.elementType=je,i.lanes=l,i.stateNode={isHidden:!1},i}function Bf(i,o,l){return i=Zn(6,i,null,o),i.lanes=l,i}function $f(i,o,l){return o=Zn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function M1(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Hf(i,o,l,h,p,v,S,x,V){return i=new M1(i,o,l,x,V),o===1?(o=1,v===!0&&(o|=8)):o=0,v=Zn(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(v),i}function L1(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function My(i){if(!i)return Xi;i=i._reactInternals;e:{if(ur(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(Sn(l))return cv(i,l,o)}return o}function Ly(i,o,l,h,p,v,S,x,V){return i=Hf(l,h,!0,i,p,v,S,x,V),i.context=My(null),l=i.current,h=gn(),p=rs(l),v=yi(h,p),v.callback=o??null,Zi(l,v,p),i.current.lanes=p,zi(i,p,h),bn(i,h),i}function Rc(i,o,l,h){var p=o.current,v=gn(),S=rs(p);return l=My(l),o.context===null?o.context=l:o.pendingContext=l,o=yi(v,S),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Zi(p,o,S),i!==null&&(Er(i,p,S,v),sc(i,p,S)),S}function Pc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Fy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Wf(i,o){Fy(i,o),(i=i.alternate)&&Fy(i,o)}function F1(){return null}var jy=typeof reportError=="function"?reportError:function(i){console.error(i)};function qf(i){this._internalRoot=i}kc.prototype.render=qf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Rc(i,o,null,null)},kc.prototype.unmount=qf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;io(function(){Rc(null,i,null,null)}),o[fi]=null}};function kc(i){this._internalRoot=i}kc.prototype.unstable_scheduleHydration=function(i){if(i){var o=ku();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Or.length&&o!==0&&o<Or[l].priority;l++);Or.splice(l,0,i),l===0&&Ou(i)}};function Gf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function j1(i,o,l,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var X=Pc(S);v.call(X)}}var S=Ly(o,h,i,0,null,!1,!1,"",Uy);return i._reactRootContainer=S,i[fi]=S.current,al(i.nodeType===8?i.parentNode:i),io(),S}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var x=h;h=function(){var X=Pc(V);x.call(X)}}var V=Hf(i,0,!1,null,null,!1,!1,"",Uy);return i._reactRootContainer=V,i[fi]=V.current,al(i.nodeType===8?i.parentNode:i),io(function(){Rc(o,V,l,h)}),V}function Nc(i,o,l,h,p){var v=l._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var x=p;p=function(){var V=Pc(S);x.call(V)}}Rc(o,S,i,p)}else S=j1(l,o,i,p,h);return Pc(S)}Ru=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ji(o.pendingLanes);l!==0&&(Bi(o,l|1),bn(o,ot()),(Xe&6)===0&&(ua=ot()+500,Yi()))}break;case 13:io(function(){var h=vi(i,1);if(h!==null){var p=gn();Er(h,i,1,p)}}),Wf(i,1)}},Do=function(i){if(i.tag===13){var o=vi(i,134217728);if(o!==null){var l=gn();Er(o,i,134217728,l)}Wf(i,134217728)}},Pu=function(i){if(i.tag===13){var o=rs(i),l=vi(i,o);if(l!==null){var h=gn();Er(l,i,o,h)}Wf(i,o)}},ku=function(){return qe},xu=function(i,o){var l=qe;try{return qe=i,o()}finally{qe=l}},nt=function(i,o,l){switch(o){case"input":if(ii(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=Qu(h);if(!p)throw Error(t(90));nr(h),ii(h,p)}}}break;case"textarea":We(i,l);break;case"select":o=l.value,o!=null&&sr(i,!!l.multiple,o,!1)}},Fs=Ff,Ba=io;var U1={usingClientEntryPoint:!1,Events:[cl,Xo,Qu,xr,za,Ff]},Il={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z1={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wa(i),i===null?null:i.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||F1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{$s=Oc.inject(z1),Dn=Oc}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1,An.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(o))throw Error(t(200));return L1(i,o,null,l)},An.createRoot=function(i,o){if(!Gf(i))throw Error(t(299));var l=!1,h="",p=jy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Hf(i,1,!1,null,null,l,!1,h,p),i[fi]=o.current,al(i.nodeType===8?i.parentNode:i),new qf(o)},An.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wa(o),i=i===null?null:i.stateNode,i},An.flushSync=function(i){return io(i)},An.hydrate=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!0,l)},An.hydrateRoot=function(i,o,l){if(!Gf(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,v="",S=jy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=Ly(o,null,i,1,l??null,p,!1,v,S),i[fi]=o.current,al(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new kc(o)},An.render=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!1,l)},An.unmountComponentAtNode=function(i){if(!xc(i))throw Error(t(40));return i._reactRootContainer?(io(function(){Nc(null,null,i,!1,function(){i._reactRootContainer=null,i[fi]=null})}),!0):!1},An.unstable_batchedUpdates=Ff,An.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nc(i,o,l,!1,h)},An.version="18.3.1-next-f1338f8080-20240426",An}var Ky;function O0(){if(Ky)return Xf.exports;Ky=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xf.exports=Q1(),Xf.exports}var Qy;function X1(){if(Qy)return Dc;Qy=1;var n=O0();return Dc.createRoot=n.createRoot,Dc.hydrateRoot=n.hydrateRoot,Dc}var Y1=X1();const J1=x0(Y1);var Z1=O0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bl.apply(this,arguments)}var fs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(fs||(fs={}));const Xy="popstate";function eC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Ip("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:D0(s)}return nC(e,t,null,n)}function Mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tC(){return Math.random().toString(36).substr(2,8)}function Yy(n,e){return{usr:n.state,key:n.key,idx:e}}function Ip(n,e,t,r){return t===void 0&&(t=null),Bl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ka(e):e,{state:t,key:e&&e.key||r||tC()})}function D0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ka(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function nC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=fs.Pop,f=null,m=y();m==null&&(m=0,u.replaceState(Bl({},u.state,{idx:m}),""));function y(){return(u.state||{idx:null}).idx}function E(){d=fs.Pop;let A=y(),$=A==null?null:A-m;m=A,f&&f({action:d,location:O.location,delta:$})}function _(A,$){d=fs.Push;let G=Ip(O.location,A,$);m=y()+1;let Q=Yy(G,m),j=O.createHref(G);try{u.pushState(Q,"",j)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(j)}a&&f&&f({action:d,location:O.location,delta:1})}function R(A,$){d=fs.Replace;let G=Ip(O.location,A,$);m=y();let Q=Yy(G,m),j=O.createHref(G);u.replaceState(Q,"",j),a&&f&&f({action:d,location:O.location,delta:0})}function N(A){let $=s.location.origin!=="null"?s.location.origin:s.location.href,G=typeof A=="string"?A:D0(A);return G=G.replace(/ $/,"%20"),Mt($,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,$)}let O={get action(){return d},get location(){return n(s,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Xy,E),f=A,()=>{s.removeEventListener(Xy,E),f=null}},createHref(A){return e(s,A)},createURL:N,encodeLocation(A){let $=N(A);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:_,replace:R,go(A){return u.go(A)}};return O}var Jy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Jy||(Jy={}));function rC(n,e,t){return t===void 0&&(t="/"),iC(n,e,t)}function iC(n,e,t,r){let s=typeof e=="string"?ka(e):e,a=L0(s.pathname||"/",t);if(a==null)return null;let u=V0(n);sC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=vC(a);d=pC(u[f],m)}return d}function V0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Mt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=fo([r,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(Mt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),V0(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:dC(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of M0(a.path))s(a,u,f)}),e}function M0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=M0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function sC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const oC=/^:[\w-]+$/,aC=3,lC=2,uC=1,cC=10,hC=-2,Zy=n=>n==="*";function dC(n,e){let t=n.split("/"),r=t.length;return t.some(Zy)&&(r+=hC),e&&(r+=lC),t.filter(s=>!Zy(s)).reduce((s,a)=>s+(oC.test(a)?aC:a===""?uC:cC),r)}function fC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",E=mC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),_=f.route;if(!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:fo([a,E.pathname]),pathnameBase:TC(fo([a,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(a=fo([a,E.pathnameBase]))}return u}function mC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,y,E)=>{let{paramName:_,isOptional:R}=y;if(_==="*"){let O=d[E]||"";u=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const N=d[E];return R&&!N?m[_]=void 0:m[_]=(N||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function gC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),fm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function L0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_C=n=>yC.test(n);function wC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ka(n):n,a;if(t)if(_C(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),fm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=e_(t.substring(1),"/"):a=e_(t,e)}else a=e;return{pathname:a,search:SC(r),hash:IC(s)}}function e_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function F0(n,e){let t=EC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function j0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=ka(n):(s=Bl({},n),Mt(!s.pathname||!s.pathname.includes("?"),Zf("?","pathname","search",s)),Mt(!s.pathname||!s.pathname.includes("#"),Zf("#","pathname","hash",s)),Mt(!s.search||!s.search.includes("#"),Zf("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),E-=1;s.pathname=_.join("/")}d=E>=0?e[E]:"/"}let f=wC(s,d),m=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}const fo=n=>n.join("/").replace(/\/\/+/g,"/"),TC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const U0=["post","put","patch","delete"];new Set(U0);const bC=["get",...U0];new Set(bC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$l.apply(this,arguments)}const pm=M.createContext(null),AC=M.createContext(null),nu=M.createContext(null),jh=M.createContext(null),To=M.createContext({outlet:null,matches:[],isDataRoute:!1}),z0=M.createContext(null);function ru(){return M.useContext(jh)!=null}function mm(){return ru()||Mt(!1),M.useContext(jh).location}function B0(n){M.useContext(nu).static||M.useLayoutEffect(n)}function iu(){let{isDataRoute:n}=M.useContext(To);return n?UC():RC()}function RC(){ru()||Mt(!1);let n=M.useContext(pm),{basename:e,future:t,navigator:r}=M.useContext(nu),{matches:s}=M.useContext(To),{pathname:a}=mm(),u=JSON.stringify(F0(s,t.v7_relativeSplatPath)),d=M.useRef(!1);return B0(()=>{d.current=!0}),M.useCallback(function(m,y){if(y===void 0&&(y={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let E=j0(m,JSON.parse(u),a,y.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:fo([e,E.pathname])),(y.replace?r.replace:r.push)(E,y.state,y)},[e,r,u,a,n])}function PC(n,e){return kC(n,e)}function kC(n,e,t,r){ru()||Mt(!1);let{navigator:s}=M.useContext(nu),{matches:a}=M.useContext(To),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=mm(),y;if(e){var E;let A=typeof e=="string"?ka(e):e;f==="/"||(E=A.pathname)!=null&&E.startsWith(f)||Mt(!1),y=A}else y=m;let _=y.pathname||"/",R=_;if(f!=="/"){let A=f.replace(/^\//,"").split("/");R="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=rC(n,{pathname:R}),O=VC(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:fo([f,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:fo([f,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,t,r);return e&&O?M.createElement(jh.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:fs.Pop}},O):O}function xC(){let n=jC(),e=CC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,null)}const NC=M.createElement(xC,null);class OC extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(To.Provider,{value:this.props.routeContext},M.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DC(n){let{routeContext:e,match:t,children:r}=n,s=M.useContext(pm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(To.Provider,{value:e},r)}function VC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let y=u.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);y>=0||Mt(!1),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<u.length;y++){let E=u[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:_,errors:R}=t,N=E.route.loader&&_[E.route.id]===void 0&&(!R||R[E.route.id]===void 0);if(E.route.lazy||N){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((y,E,_)=>{let R,N=!1,O=null,A=null;t&&(R=d&&E.route.id?d[E.route.id]:void 0,O=E.route.errorElement||NC,f&&(m<0&&_===0?(zC("route-fallback"),N=!0,A=null):m===_&&(N=!0,A=E.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,_+1)),G=()=>{let Q;return R?Q=O:N?Q=A:E.route.Component?Q=M.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=y,M.createElement(DC,{match:E,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:Q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||_===0)?M.createElement(OC,{location:t.location,revalidation:t.revalidation,component:O,error:R,children:G(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):G()},null)}var $0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})($0||{}),H0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(H0||{});function MC(n){let e=M.useContext(pm);return e||Mt(!1),e}function LC(n){let e=M.useContext(AC);return e||Mt(!1),e}function FC(n){let e=M.useContext(To);return e||Mt(!1),e}function W0(n){let e=FC(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function jC(){var n;let e=M.useContext(z0),t=LC(),r=W0();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function UC(){let{router:n}=MC($0.UseNavigateStable),e=W0(H0.UseNavigateStable),t=M.useRef(!1);return B0(()=>{t.current=!0}),M.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$l({fromRouteId:e},a)))},[n,e])}const t_={};function zC(n,e,t){t_[n]||(t_[n]=!0)}function BC(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ir(n){let{to:e,replace:t,state:r,relative:s}=n;ru()||Mt(!1);let{future:a,static:u}=M.useContext(nu),{matches:d}=M.useContext(To),{pathname:f}=mm(),m=iu(),y=j0(e,F0(d,a.v7_relativeSplatPath),f,s==="path"),E=JSON.stringify(y);return M.useEffect(()=>m(JSON.parse(E),{replace:t,state:r,relative:s}),[m,E,s,t,r]),null}function lo(n){Mt(!1)}function $C(n){let{basename:e="/",children:t=null,location:r,navigationType:s=fs.Pop,navigator:a,static:u=!1,future:d}=n;ru()&&Mt(!1);let f=e.replace(/^\/*/,"/"),m=M.useMemo(()=>({basename:f,navigator:a,static:u,future:$l({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=ka(r));let{pathname:y="/",search:E="",hash:_="",state:R=null,key:N="default"}=r,O=M.useMemo(()=>{let A=L0(y,f);return A==null?null:{location:{pathname:A,search:E,hash:_,state:R,key:N},navigationType:s}},[f,y,E,_,R,N,s]);return O==null?null:M.createElement(nu.Provider,{value:m},M.createElement(jh.Provider,{children:t,value:O}))}function HC(n){let{children:e,location:t}=n;return PC(Cp(e),t)}new Promise(()=>{});function Cp(n,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(n,(r,s)=>{if(!M.isValidElement(r))return;let a=[...e,s];if(r.type===M.Fragment){t.push.apply(t,Cp(r.props.children,a));return}r.type!==lo&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Cp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const WC="6";try{window.__reactRouterVersion=WC}catch{}const qC="startTransition",n_=Sp[qC];function GC(n){let{basename:e,children:t,future:r,window:s}=n,a=M.useRef();a.current==null&&(a.current=eC({window:s,v5Compat:!0}));let u=a.current,[d,f]=M.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},y=M.useCallback(E=>{m&&n_?n_(()=>f(E)):f(E)},[f,m]);return M.useLayoutEffect(()=>u.listen(y),[u,y]),M.useEffect(()=>BC(r),[r]),M.createElement($C,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var r_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(r_||(r_={}));var i_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(i_||(i_={}));function s_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function KC(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function QC(){const[n,e]=M.useState(null),[t,r]=M.useState(!1);M.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=M.useMemo(()=>!s_()&&KC()&&!t&&!n,[t,n]),a=M.useMemo(()=>!s_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:T.jsxs("section",{className:"install-banner","aria-live":"polite",children:[T.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),T.jsxs("div",{className:"install-actions",children:[a?T.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const q0=M.createContext(null);function XC({children:n}){const[e,t]=M.useState([]),r=M.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=M.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return T.jsxs(q0.Provider,{value:s,children:[n,T.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>T.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Uh(){const n=M.useContext(q0);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const YC=()=>{};var o_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},JC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},K0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,y=a>>2,E=(a&3)<<4|d>>4;let _=(d&15)<<2|m>>6,R=m&63;f||(R=64,u||(_=64)),r.push(t[y],t[E],t[_],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(G0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new ZC;const _=a<<2|d>>4;if(r.push(_),m!==64){const R=d<<4&240|m>>2;if(r.push(R),E!==64){const N=m<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eb=function(n){const e=G0(n);return K0.encodeByteArray(e,!0)},ch=function(n){return eb(n).replace(/\./g,"")},Q0=function(n){try{return K0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=()=>tb().__FIREBASE_DEFAULTS__,rb=()=>{if(typeof process>"u"||typeof o_>"u")return;const n=o_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ib=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Q0(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return YC()||nb()||rb()||ib()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},X0=n=>{var e,t;return(t=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},gm=n=>{const e=X0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Y0=()=>{var n;return(n=zh())===null||n===void 0?void 0:n.config},J0=n=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ch(JSON.stringify(t)),ch(JSON.stringify(u)),""].join(".")}const Vl={};function ob(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?n.emulator.push(e):n.prod.push(e);return n}function ab(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let a_=!1;function $h(n,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||Vl[n]===e||Vl[n]||a_)return;Vl[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=ob().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{a_=!0,u()},_}function y(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function E(){const _=ab(r),R=t("text"),N=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),A=document.getElementById(O)||document.createElement("a"),$=t("preprendIcon"),G=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const Q=_.element;d(Q),y(A,O);const j=m();f(G,$),Q.append(G,N,A,j),document.body.appendChild(Q)}a?(N.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function ub(){var n;const e=(n=zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fb(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pb(){return!ub()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mb(){try{return typeof indexedDB=="object"}catch{return!1}}function gb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="FirebaseError";class Rr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vb,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?yb(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Rr(s,d,r)}}function yb(n,e){return n.replace(_b,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _b=/\{\$([^}]+)}/g;function wb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(l_(a)&&l_(u)){if(!go(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function l_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eb(n,e){const t=new Tb(n,e);return t.subscribe.bind(t)}class Tb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Sb(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ep),s.error===void 0&&(s.error=ep),s.complete===void 0&&(s.complete=ep);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class Ai{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bb(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cb(n){return n===uo?void 0:n}function bb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ib(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const Rb={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Pb=$e.INFO,kb={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},xb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=kb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=Pb,this._logHandler=xb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const Nb=(n,e)=>e.some(t=>n instanceof t);let u_,c_;function Ob(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Db(){return c_||(c_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,bp=new WeakMap,tE=new WeakMap,tp=new WeakMap,ym=new WeakMap;function Vb(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ms(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&eE.set(t,n)}).catch(()=>{}),ym.set(e,n),e}function Mb(n){if(bp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});bp.set(n,e)}let Ap={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Lb(n){Ap=n(Ap)}function Fb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(np(this),e,...t);return tE.set(r,e.sort?e.sort():[e]),ms(r)}:Db().includes(n)?function(...e){return n.apply(np(this),e),ms(eE.get(this))}:function(...e){return ms(n.apply(np(this),e))}}function jb(n){return typeof n=="function"?Fb(n):(n instanceof IDBTransaction&&Mb(n),Nb(n,Ob())?new Proxy(n,Ap):n)}function ms(n){if(n instanceof IDBRequest)return Vb(n);if(tp.has(n))return tp.get(n);const e=jb(n);return e!==n&&(tp.set(n,e),ym.set(e,n)),e}const np=n=>ym.get(n);function Ub(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=ms(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ms(u.result),f.oldVersion,f.newVersion,ms(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const zb=["get","getKey","getAll","getAllKeys","count"],Bb=["put","add","delete","clear"],rp=new Map;function h_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Bb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zb.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return rp.set(e,a),a}Lb(n=>({...n,get:(e,t,r)=>h_(e,t)||n.get(e,t,r),has:(e,t)=>!!h_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Hb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rp="@firebase/app",d_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new vm("@firebase/app"),Wb="@firebase/app-compat",qb="@firebase/analytics-compat",Gb="@firebase/analytics",Kb="@firebase/app-check-compat",Qb="@firebase/app-check",Xb="@firebase/auth",Yb="@firebase/auth-compat",Jb="@firebase/database",Zb="@firebase/data-connect",eA="@firebase/database-compat",tA="@firebase/functions",nA="@firebase/functions-compat",rA="@firebase/installations",iA="@firebase/installations-compat",sA="@firebase/messaging",oA="@firebase/messaging-compat",aA="@firebase/performance",lA="@firebase/performance-compat",uA="@firebase/remote-config",cA="@firebase/remote-config-compat",hA="@firebase/storage",dA="@firebase/storage-compat",fA="@firebase/firestore",pA="@firebase/ai",mA="@firebase/firestore-compat",gA="firebase",vA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",yA={[Rp]:"fire-core",[Wb]:"fire-core-compat",[Gb]:"fire-analytics",[qb]:"fire-analytics-compat",[Qb]:"fire-app-check",[Kb]:"fire-app-check-compat",[Xb]:"fire-auth",[Yb]:"fire-auth-compat",[Jb]:"fire-rtdb",[Zb]:"fire-data-connect",[eA]:"fire-rtdb-compat",[tA]:"fire-fn",[nA]:"fire-fn-compat",[rA]:"fire-iid",[iA]:"fire-iid-compat",[sA]:"fire-fcm",[oA]:"fire-fcm-compat",[aA]:"fire-perf",[lA]:"fire-perf-compat",[uA]:"fire-rc",[cA]:"fire-rc-compat",[hA]:"fire-gcs",[dA]:"fire-gcs-compat",[fA]:"fire-fst",[mA]:"fire-fst-compat",[pA]:"fire-vertex","fire-js":"fire-js",[gA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,_A=new Map,kp=new Map;function f_(n,e){try{n.container.addComponent(e)}catch(t){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ws(n){const e=n.name;if(kp.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,n);for(const t of hh.values())f_(t,n);for(const t of _A.values())f_(t,n);return!0}function au(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new su("app","Firebase",wA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=vA;function nE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw gs.create("bad-app-name",{appName:String(s)});if(t||(t=Y0()),!t)throw gs.create("no-options");const a=hh.get(s);if(a){if(go(t,a.options)&&go(r,a.config))return a;throw gs.create("duplicate-app",{appName:s})}const u=new Ab(s);for(const f of kp.values())u.addComponent(f);const d=new EA(t,r,u);return hh.set(s,d),d}function Hh(n=Pp){const e=hh.get(n);if(!e&&n===Pp&&Y0())return nE();if(!e)throw gs.create("no-app",{appName:n});return e}function tr(n,e,t){var r;let s=(r=yA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(d.join(" "));return}ws(new Ai(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebase-heartbeat-database",SA=1,Hl="firebase-heartbeat-store";let ip=null;function rE(){return ip||(ip=Ub(TA,SA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hl)}catch(t){console.warn(t)}}}}).catch(n=>{throw gs.create("idb-open",{originalErrorMessage:n.message})})),ip}async function IA(n){try{const t=(await rE()).transaction(Hl),r=await t.objectStore(Hl).get(iE(n));return await t.done,r}catch(e){if(e instanceof Rr)Ri.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(t.message)}}}async function p_(n,e){try{const r=(await rE()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,iE(n)),await r.done}catch(t){if(t instanceof Rr)Ri.warn(t.message);else{const r=gs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ri.warn(r.message)}}}function iE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,bA=30;class AA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=m_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>bA){const u=kA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=m_(),{heartbeatsToSend:r,unsentEntries:s}=RA(this._heartbeatsCache.heartbeats),a=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ri.warn(t),""}}}function m_(){return new Date().toISOString().substring(0,10)}function RA(n,e=CA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),g_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),g_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mb()?gb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return p_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return p_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g_(n){return ch(JSON.stringify({version:2,heartbeats:n})).length}function kA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){ws(new Ai("platform-logger",e=>new $b(e),"PRIVATE")),ws(new Ai("heartbeat",e=>new AA(e),"PRIVATE")),tr(Rp,d_,n),tr(Rp,d_,"esm2017"),tr("fire-js","")}xA("");var NA="firebase",OA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(NA,OA,"app");function _m(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DA=sE,oE=new su("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new vm("@firebase/auth");function VA(n,...e){dh.logLevel<=$e.WARN&&dh.warn(`Auth (${So}): ${n}`,...e)}function Qc(n,...e){dh.logLevel<=$e.ERROR&&dh.error(`Auth (${So}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(n,...e){throw Em(n,...e)}function Cr(n,...e){return Em(n,...e)}function wm(n,e,t){const r=Object.assign(Object.assign({},DA()),{[e]:t});return new su("auth","Firebase",r).create(e,{appName:n.name})}function vs(n){return wm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(n,"argument-error"),wm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Em(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oE.create(n,...e)}function Oe(n,e,...t){if(!n)throw Em(e,...t)}function Ti(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qc(e),new Error(e)}function Pi(n,e){n||Ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function MA(){return v_()==="http:"||v_()==="https:"}function v_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MA()||hb()||"connection"in navigator)?navigator.onLine:!0}function FA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pi(t>e,"Short delay should be less than long delay!"),this.isMobile=lb()||db()}get(){return LA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e){Pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zA=new lu(3e4,6e4);function Sm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xa(n,e,t,r,s={}){return uE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=ou(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return cb()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Oi(n.emulatorConfig.host)&&(m.credentials="include"),lE.fetch()(await cE(n,n.config.apiHost,t,d),m)})}async function uE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},jA),e);try{const s=new $A(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Vc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Vc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Vc(n,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw wm(n,y,m);Jr(n,y)}}catch(s){if(s instanceof Rr)throw s;Jr(n,"network-request-failed",{message:String(s)})}}async function BA(n,e,t,r,s={}){const a=await xa(n,e,t,r,s);return"mfaPendingCredential"in a&&Jr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function cE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Tm(n.config,s):`${n.config.apiScheme}://${s}`;return UA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class $A{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),zA.get())})}}function Vc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Cr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e){return xa(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WA(n,e=!1){const t=ut(n),r=await t.getIdToken(e),s=Im(r);Oe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Ml(sp(s.auth_time)),issuedAtTime:Ml(sp(s.iat)),expirationTime:Ml(sp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function sp(n){return Number(n)*1e3}function Im(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Q0(t);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function y_(n){const e=Im(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Rr&&qA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function qA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Wl(n,fh(t,{idToken:r}));Oe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?hE(a.providerUserInfo):[],d=QA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),y=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Np(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,E)}async function KA(n){const e=ut(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hE(n){return n.map(e=>{var{providerId:t}=e,r=_m(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(n,e){const t=await uE(n,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await cE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&Oi(n.emulatorConfig.host)&&(f.credentials="include"),lE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YA(n,e){return xa(n,"POST","/v2/accounts:revokeToken",Sm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=y_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await XA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new ga;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Oe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Oe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ga,this.toJSON())}_performRefresh(){return Ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=_m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Np(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WA(this,e)}reload(){return KA(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await Wl(this,HA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,y;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,O=(d=t.tenantId)!==null&&d!==void 0?d:void 0,A=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,$=(m=t.createdAt)!==null&&m!==void 0?m:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:j,isAnonymous:B,providerData:J,stsTokenManager:b}=t;Oe(Q&&b,e,"internal-error");const I=ga.fromJSON(this.name,b);Oe(typeof Q=="string",e,"internal-error"),as(E,e.name),as(_,e.name),Oe(typeof j=="boolean",e,"internal-error"),Oe(typeof B=="boolean",e,"internal-error"),as(R,e.name),as(N,e.name),as(O,e.name),as(A,e.name),as($,e.name),as(G,e.name);const P=new Sr({uid:Q,auth:e,email:_,emailVerified:j,displayName:E,isAnonymous:B,photoURL:N,phoneNumber:R,tenantId:O,stsTokenManager:I,createdAt:$,lastLoginAt:G});return J&&Array.isArray(J)&&(P.providerData=J.map(D=>Object.assign({},D))),A&&(P._redirectEventId=A),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new ga;s.updateFromServerResponse(t);const a=new Sr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Oe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?hE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new ga;d.updateFromIdToken(r);const f=new Sr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Np(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function Si(n){Pi(n instanceof Function,"Expected a class definition");let e=__.get(n);return e?(Pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,__.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dE.type="NONE";const w_=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n,e,t){return`firebase:${n}:${e}:${t}`}class va{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Xc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xc("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?Sr._fromGetAccountInfoResponse(this.auth,t,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new va(Si(w_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Si(w_);const u=Xc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(u);if(y){let E;if(typeof y=="string"){const _=await fh(e,{idToken:y}).catch(()=>{});if(!_)break;E=await Sr._fromGetAccountInfoResponse(e,_,y)}else E=Sr._fromJSON(e,y);m!==a&&(d=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new va(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new va(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(_E(e))return"Webos";if(pE(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(vE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fE(n=cn()){return/firefox\//i.test(n)}function pE(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(n=cn()){return/crios\//i.test(n)}function gE(n=cn()){return/iemobile/i.test(n)}function vE(n=cn()){return/android/i.test(n)}function yE(n=cn()){return/blackberry/i.test(n)}function _E(n=cn()){return/webos/i.test(n)}function Cm(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JA(n=cn()){var e;return Cm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZA(){return fb()&&document.documentMode===10}function wE(n=cn()){return Cm(n)||vE(n)||_E(n)||yE(n)||/windows phone/i.test(n)||gE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(n,e=[]){let t;switch(n){case"Browser":t=E_(cn());break;case"Worker":t=`${E_(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${So}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e={}){return xa(n,"GET","/v2/passwordPolicy",Sm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=6;class rR{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:nR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T_(this),this.idTokenSubscription=new T_(this),this.beforeStateQueue=new eR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await va.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(vs(this));const t=e?ut(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tR(this),t=new rR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await YA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await va.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&VA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Na(n){return ut(n)}class T_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Eb(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sR(n){bm=n}function oR(n){return bm.loadJS(n)}function aR(){return bm.gapiScript}function lR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(n,e){const t=au(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(go(a,e??{}))return s;Jr(s,"already-initialized")}return t.initialize({options:e})}function cR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hR(n,e,t){const r=Na(n);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=TE(e),{host:u,port:d}=dR(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},y=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(go(m,r.config.emulator)&&go(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Oi(u)?(Bh(`${a}//${u}${f}`),$h("Auth",!0)):fR()}function TE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dR(n){const e=TE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:S_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:S_(u)}}}function S_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e){return BA(n,"POST","/v1/accounts:signInWithIdp",Sm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="http://localhost";class vo extends SE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=_m(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new vo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ya(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ya(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ya(e,t)}buildRequest(){const e={requestUri:pR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Wh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends uu{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ei.credential(t,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends uu{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends uu{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Sr._fromIdTokenResponse(e,r,s),u=I_(r);return new Ta({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=I_(r);return new Ta({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function I_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Rr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new mh(e,t,r,s)}}function IE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,a,e,r):a})}async function mR(n,e,t=!1){const r=await Wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e,t=!1){const{auth:r}=n;if(Pn(r.app))return Promise.reject(vs(r));const s="reauthenticate";try{const a=await Wl(n,IE(r,s,e,n),t);Oe(a.idToken,r,"internal-error");const u=Im(a.idToken);Oe(u,r,"internal-error");const{sub:d}=u;return Oe(n.uid===d,r,"user-mismatch"),Ta._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e,t=!1){if(Pn(n.app))return Promise.reject(vs(n));const r="signIn",s=await IE(n,r,e),a=await Ta._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e){return ut(n).setPersistence(e)}function CE(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function _R(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function qh(n){return ut(n).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=1e3,ER=10;class AE extends bE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);ZA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ER):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},wR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const RE=AE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends bE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}PE.type="SESSION";const kE=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await TR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Am("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const _=E;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(_.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function IR(n){qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function CR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function AR(){return xE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",RR=1,vh="firebaseLocalStorage",OE="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function PR(){const n=indexedDB.deleteDatabase(NE);return new cu(n).toPromise()}function Op(){const n=indexedDB.open(NE,RR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:OE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await PR(),e(await Op()))})})}async function C_(n,e,t){const r=Kh(n,!0).put({[OE]:e,value:t});return new cu(r).toPromise()}async function kR(n,e){const t=Kh(n,!1).get(e),r=await new cu(t).toPromise();return r===void 0?null:r.value}function b_(n,e){const t=Kh(n,!0).delete(e);return new cu(t).toPromise()}const xR=800,NR=3;class DE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(AR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await CR(),!this.activeServiceWorker)return;this.sender=new SR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await C_(e,gh,"1"),await b_(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>C_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>kR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>b_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Kh(s,!1).getAll();return new cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DE.type="LOCAL";const OR=DE;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){return e?Si(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends SE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DR(n){return vR(n.auth,new Pm(n),n.bypassAuthState)}function VR(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),gR(t,new Pm(n),n.bypassAuthState)}async function MR(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),mR(t,new Pm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return MR;case"reauthViaPopup":case"reauthViaRedirect":return VR;default:Jr(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new lu(2e3,1e4);async function FR(n,e,t){if(Pn(n.app))return Promise.reject(Cr(n,"operation-not-supported-in-this-environment"));const r=Na(n);aE(n,e,Wh);const s=Rm(r,t);return new co(r,"signInViaPopup",e,s).executeNotNull()}class co extends VE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LR.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="pendingRedirect",Yc=new Map;class UR extends VE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const r=await zR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zR(n,e){const t=LE(e),r=ME(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function BR(n,e){return ME(n)._set(LE(e),"true")}function $R(n,e){Yc.set(n._key(),e)}function ME(n){return Si(n._redirectPersistence)}function LE(n){return Xc(jR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n,e,t){return WR(n,e,t)}async function WR(n,e,t){if(Pn(n.app))return Promise.reject(vs(n));const r=Na(n);aE(n,e,Wh),await r._initializationPromise;const s=Rm(r,t);return await BR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function qR(n,e){return await Na(n)._initializationPromise,FE(n,e,!1)}async function FE(n,e,t=!1){if(Pn(n.app))return Promise.reject(vs(n));const r=Na(n),s=Rm(r,e),u=await new UR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=600*1e3;class KR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GR&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,e={}){return xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JR=/^https?/;async function ZR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XR(n);for(const t of e)try{if(eP(t))return}catch{}Jr(n,"unauthorized-domain")}function eP(n){const e=xp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!JR.test(t))return!1;if(YR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new lu(3e4,6e4);function R_(){const n=qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nP(n){return new Promise((e,t)=>{var r,s,a;function u(){R_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R_(),t(Cr(n,"network-request-failed"))},timeout:tP.get()})}if(!((s=(r=qr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=qr().gapi)===null||a===void 0)&&a.load)u();else{const d=lR("iframefcb");return qr()[d]=()=>{gapi.load?u():t(Cr(n,"network-request-failed"))},oR(`${aR()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function rP(n){return Jc=Jc||nP(n),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new lu(5e3,15e3),sP="__/auth/iframe",oP="emulator/auth/iframe",aP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uP(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tm(e,oP):`https://${n.config.authDomain}/${sP}`,r={apiKey:e.apiKey,appName:n.name,v:So},s=lP.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ou(r).slice(1)}`}async function cP(n){const e=await rP(n),t=qr().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:uP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aP,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=Cr(n,"network-request-failed"),d=qr().setTimeout(()=>{a(u)},iP.get());function f(){qr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dP=500,fP=600,pP="_blank",mP="http://localhost";class P_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gP(n,e,t,r=dP,s=fP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},hP),{width:r.toString(),height:s.toString(),top:a,left:u}),m=cn().toLowerCase();t&&(d=mE(m)?pP:t),fE(m)&&(e=e||mP,f.scrollbars="yes");const y=Object.entries(f).reduce((_,[R,N])=>`${_}${R}=${N},`,"");if(JA(m)&&d!=="_self")return vP(e||"",d),new P_(null);const E=window.open(e||"",d,y);Oe(E,n,"popup-blocked");try{E.focus()}catch{}return new P_(E)}function vP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="__/auth/handler",_P="emulator/auth/handler",wP=encodeURIComponent("fac");async function k_(n,e,t,r,s,a){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:So,eventId:s};if(e instanceof Wh){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",wb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof uu){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),m=f?`#${wP}=${encodeURIComponent(f)}`:"";return`${EP(n)}?${ou(d).slice(1)}${m}`}function EP({config:n}){return n.emulator?Tm(n,_P):`https://${n.authDomain}/${yP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class TP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kE,this._completeRedirectFn=FE,this._overrideRedirectResult=$R}async _openPopup(e,t,r,s){var a;Pi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await k_(e,t,r,xp(),s);return gP(e,u,Am())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await k_(e,t,r,xp(),s);return IR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Pi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await cP(e),r=new KR(e);return t.register("authEvent",s=>(Oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(op,{type:op},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[op];u!==void 0&&t(!!u),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wE()||pE()||Cm()}}const SP=TP;var x_="@firebase/auth",N_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bP(n){ws(new Ai("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Oe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(n)},m=new iR(r,s,a,f);return cR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ws(new Ai("auth-internal",e=>{const t=Na(e.getProvider("auth").getImmediate());return(r=>new IP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(x_,N_,CP(n)),tr(x_,N_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=300,RP=J0("authIdTokenMaxAge")||AP;let O_=null;const PP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RP)return;const s=t==null?void 0:t.token;O_!==s&&(O_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kP(n=Hh()){const e=au(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uR(n,{popupRedirectResolver:SP,persistence:[OR,RE,kE]}),r=J0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=PP(a.toString());_R(t,u,()=>u(t.currentUser)),CE(t,d=>u(d))}}const s=X0("auth");return s&&hR(t,`http://${s}`),t}function xP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Cr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",xP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bP("Browser");var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,UE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,I){function P(){}P.prototype=I.prototype,b.D=I.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(D,L,z){for(var k=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)k[Fe-2]=arguments[Fe];return I.prototype[L].apply(D,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,I,P){P||(P=0);var D=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)D[L]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(L=0;16>L;++L)D[L]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=b.g[0],P=b.g[1],L=b.g[2];var z=b.g[3],k=I+(z^P&(L^z))+D[0]+3614090360&4294967295;I=P+(k<<7&4294967295|k>>>25),k=z+(L^I&(P^L))+D[1]+3905402710&4294967295,z=I+(k<<12&4294967295|k>>>20),k=L+(P^z&(I^P))+D[2]+606105819&4294967295,L=z+(k<<17&4294967295|k>>>15),k=P+(I^L&(z^I))+D[3]+3250441966&4294967295,P=L+(k<<22&4294967295|k>>>10),k=I+(z^P&(L^z))+D[4]+4118548399&4294967295,I=P+(k<<7&4294967295|k>>>25),k=z+(L^I&(P^L))+D[5]+1200080426&4294967295,z=I+(k<<12&4294967295|k>>>20),k=L+(P^z&(I^P))+D[6]+2821735955&4294967295,L=z+(k<<17&4294967295|k>>>15),k=P+(I^L&(z^I))+D[7]+4249261313&4294967295,P=L+(k<<22&4294967295|k>>>10),k=I+(z^P&(L^z))+D[8]+1770035416&4294967295,I=P+(k<<7&4294967295|k>>>25),k=z+(L^I&(P^L))+D[9]+2336552879&4294967295,z=I+(k<<12&4294967295|k>>>20),k=L+(P^z&(I^P))+D[10]+4294925233&4294967295,L=z+(k<<17&4294967295|k>>>15),k=P+(I^L&(z^I))+D[11]+2304563134&4294967295,P=L+(k<<22&4294967295|k>>>10),k=I+(z^P&(L^z))+D[12]+1804603682&4294967295,I=P+(k<<7&4294967295|k>>>25),k=z+(L^I&(P^L))+D[13]+4254626195&4294967295,z=I+(k<<12&4294967295|k>>>20),k=L+(P^z&(I^P))+D[14]+2792965006&4294967295,L=z+(k<<17&4294967295|k>>>15),k=P+(I^L&(z^I))+D[15]+1236535329&4294967295,P=L+(k<<22&4294967295|k>>>10),k=I+(L^z&(P^L))+D[1]+4129170786&4294967295,I=P+(k<<5&4294967295|k>>>27),k=z+(P^L&(I^P))+D[6]+3225465664&4294967295,z=I+(k<<9&4294967295|k>>>23),k=L+(I^P&(z^I))+D[11]+643717713&4294967295,L=z+(k<<14&4294967295|k>>>18),k=P+(z^I&(L^z))+D[0]+3921069994&4294967295,P=L+(k<<20&4294967295|k>>>12),k=I+(L^z&(P^L))+D[5]+3593408605&4294967295,I=P+(k<<5&4294967295|k>>>27),k=z+(P^L&(I^P))+D[10]+38016083&4294967295,z=I+(k<<9&4294967295|k>>>23),k=L+(I^P&(z^I))+D[15]+3634488961&4294967295,L=z+(k<<14&4294967295|k>>>18),k=P+(z^I&(L^z))+D[4]+3889429448&4294967295,P=L+(k<<20&4294967295|k>>>12),k=I+(L^z&(P^L))+D[9]+568446438&4294967295,I=P+(k<<5&4294967295|k>>>27),k=z+(P^L&(I^P))+D[14]+3275163606&4294967295,z=I+(k<<9&4294967295|k>>>23),k=L+(I^P&(z^I))+D[3]+4107603335&4294967295,L=z+(k<<14&4294967295|k>>>18),k=P+(z^I&(L^z))+D[8]+1163531501&4294967295,P=L+(k<<20&4294967295|k>>>12),k=I+(L^z&(P^L))+D[13]+2850285829&4294967295,I=P+(k<<5&4294967295|k>>>27),k=z+(P^L&(I^P))+D[2]+4243563512&4294967295,z=I+(k<<9&4294967295|k>>>23),k=L+(I^P&(z^I))+D[7]+1735328473&4294967295,L=z+(k<<14&4294967295|k>>>18),k=P+(z^I&(L^z))+D[12]+2368359562&4294967295,P=L+(k<<20&4294967295|k>>>12),k=I+(P^L^z)+D[5]+4294588738&4294967295,I=P+(k<<4&4294967295|k>>>28),k=z+(I^P^L)+D[8]+2272392833&4294967295,z=I+(k<<11&4294967295|k>>>21),k=L+(z^I^P)+D[11]+1839030562&4294967295,L=z+(k<<16&4294967295|k>>>16),k=P+(L^z^I)+D[14]+4259657740&4294967295,P=L+(k<<23&4294967295|k>>>9),k=I+(P^L^z)+D[1]+2763975236&4294967295,I=P+(k<<4&4294967295|k>>>28),k=z+(I^P^L)+D[4]+1272893353&4294967295,z=I+(k<<11&4294967295|k>>>21),k=L+(z^I^P)+D[7]+4139469664&4294967295,L=z+(k<<16&4294967295|k>>>16),k=P+(L^z^I)+D[10]+3200236656&4294967295,P=L+(k<<23&4294967295|k>>>9),k=I+(P^L^z)+D[13]+681279174&4294967295,I=P+(k<<4&4294967295|k>>>28),k=z+(I^P^L)+D[0]+3936430074&4294967295,z=I+(k<<11&4294967295|k>>>21),k=L+(z^I^P)+D[3]+3572445317&4294967295,L=z+(k<<16&4294967295|k>>>16),k=P+(L^z^I)+D[6]+76029189&4294967295,P=L+(k<<23&4294967295|k>>>9),k=I+(P^L^z)+D[9]+3654602809&4294967295,I=P+(k<<4&4294967295|k>>>28),k=z+(I^P^L)+D[12]+3873151461&4294967295,z=I+(k<<11&4294967295|k>>>21),k=L+(z^I^P)+D[15]+530742520&4294967295,L=z+(k<<16&4294967295|k>>>16),k=P+(L^z^I)+D[2]+3299628645&4294967295,P=L+(k<<23&4294967295|k>>>9),k=I+(L^(P|~z))+D[0]+4096336452&4294967295,I=P+(k<<6&4294967295|k>>>26),k=z+(P^(I|~L))+D[7]+1126891415&4294967295,z=I+(k<<10&4294967295|k>>>22),k=L+(I^(z|~P))+D[14]+2878612391&4294967295,L=z+(k<<15&4294967295|k>>>17),k=P+(z^(L|~I))+D[5]+4237533241&4294967295,P=L+(k<<21&4294967295|k>>>11),k=I+(L^(P|~z))+D[12]+1700485571&4294967295,I=P+(k<<6&4294967295|k>>>26),k=z+(P^(I|~L))+D[3]+2399980690&4294967295,z=I+(k<<10&4294967295|k>>>22),k=L+(I^(z|~P))+D[10]+4293915773&4294967295,L=z+(k<<15&4294967295|k>>>17),k=P+(z^(L|~I))+D[1]+2240044497&4294967295,P=L+(k<<21&4294967295|k>>>11),k=I+(L^(P|~z))+D[8]+1873313359&4294967295,I=P+(k<<6&4294967295|k>>>26),k=z+(P^(I|~L))+D[15]+4264355552&4294967295,z=I+(k<<10&4294967295|k>>>22),k=L+(I^(z|~P))+D[6]+2734768916&4294967295,L=z+(k<<15&4294967295|k>>>17),k=P+(z^(L|~I))+D[13]+1309151649&4294967295,P=L+(k<<21&4294967295|k>>>11),k=I+(L^(P|~z))+D[4]+4149444226&4294967295,I=P+(k<<6&4294967295|k>>>26),k=z+(P^(I|~L))+D[11]+3174756917&4294967295,z=I+(k<<10&4294967295|k>>>22),k=L+(I^(z|~P))+D[2]+718787259&4294967295,L=z+(k<<15&4294967295|k>>>17),k=P+(z^(L|~I))+D[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(L+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+L&4294967295,b.g[3]=b.g[3]+z&4294967295}r.prototype.u=function(b,I){I===void 0&&(I=b.length);for(var P=I-this.blockSize,D=this.B,L=this.h,z=0;z<I;){if(L==0)for(;z<=P;)s(this,b,z),z+=this.blockSize;if(typeof b=="string"){for(;z<I;)if(D[L++]=b.charCodeAt(z++),L==this.blockSize){s(this,D),L=0;break}}else for(;z<I;)if(D[L++]=b[z++],L==this.blockSize){s(this,D),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;var P=8*this.o;for(I=b.length-8;I<b.length;++I)b[I]=P&255,P/=256;for(this.u(b),b=Array(16),I=P=0;4>I;++I)for(var D=0;32>D;D+=8)b[P++]=this.g[I]>>>D&255;return b};function a(b,I){var P=d;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=I(b)}function u(b,I){this.h=I;for(var P=[],D=!0,L=b.length-1;0<=L;L--){var z=b[L]|0;D&&z==I||(P[L]=z,D=!1)}this.g=P}var d={};function f(b){return-128<=b&&128>b?a(b,function(I){return new u([I|0],0>I?-1:0)}):new u([b|0],0>b?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return E;if(0>b)return A(m(-b));for(var I=[],P=1,D=0;b>=P;D++)I[D]=b/P|0,P*=4294967296;return new u(I,0)}function y(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return A(y(b.substring(1),I));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(I,8)),D=E,L=0;L<b.length;L+=8){var z=Math.min(8,b.length-L),k=parseInt(b.substring(L,L+z),I);8>z?(z=m(Math.pow(I,z)),D=D.j(z).add(m(k))):(D=D.j(P),D=D.add(m(k)))}return D}var E=f(0),_=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(O(this))return-A(this).m();for(var b=0,I=1,P=0;P<this.g.length;P++){var D=this.i(P);b+=(0<=D?D:4294967296+D)*I,I*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N(this))return"0";if(O(this))return"-"+A(this).toString(b);for(var I=m(Math.pow(b,6)),P=this,D="";;){var L=j(P,I).g;P=$(P,L.j(I));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=L,N(P))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function N(b){if(b.h!=0)return!1;for(var I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function O(b){return b.h==-1}n.l=function(b){return b=$(this,b),O(b)?-1:N(b)?0:1};function A(b){for(var I=b.g.length,P=[],D=0;D<I;D++)P[D]=~b.g[D];return new u(P,~b.h).add(_)}n.abs=function(){return O(this)?A(this):this},n.add=function(b){for(var I=Math.max(this.g.length,b.g.length),P=[],D=0,L=0;L<=I;L++){var z=D+(this.i(L)&65535)+(b.i(L)&65535),k=(z>>>16)+(this.i(L)>>>16)+(b.i(L)>>>16);D=k>>>16,z&=65535,k&=65535,P[L]=k<<16|z}return new u(P,P[P.length-1]&-2147483648?-1:0)};function $(b,I){return b.add(A(I))}n.j=function(b){if(N(this)||N(b))return E;if(O(this))return O(b)?A(this).j(A(b)):A(A(this).j(b));if(O(b))return A(this.j(A(b)));if(0>this.l(R)&&0>b.l(R))return m(this.m()*b.m());for(var I=this.g.length+b.g.length,P=[],D=0;D<2*I;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var L=0;L<b.g.length;L++){var z=this.i(D)>>>16,k=this.i(D)&65535,Fe=b.i(L)>>>16,De=b.i(L)&65535;P[2*D+2*L]+=k*De,G(P,2*D+2*L),P[2*D+2*L+1]+=z*De,G(P,2*D+2*L+1),P[2*D+2*L+1]+=k*Fe,G(P,2*D+2*L+1),P[2*D+2*L+2]+=z*Fe,G(P,2*D+2*L+2)}for(D=0;D<I;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=I;D<2*I;D++)P[D]=0;return new u(P,0)};function G(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function Q(b,I){this.g=b,this.h=I}function j(b,I){if(N(I))throw Error("division by zero");if(N(b))return new Q(E,E);if(O(b))return I=j(A(b),I),new Q(A(I.g),A(I.h));if(O(I))return I=j(b,A(I)),new Q(A(I.g),I.h);if(30<b.g.length){if(O(b)||O(I))throw Error("slowDivide_ only works with positive integers.");for(var P=_,D=I;0>=D.l(b);)P=B(P),D=B(D);var L=J(P,1),z=J(D,1);for(D=J(D,2),P=J(P,2);!N(D);){var k=z.add(D);0>=k.l(b)&&(L=L.add(P),z=k),D=J(D,1),P=J(P,1)}return I=$(b,L.j(I)),new Q(L,I)}for(L=E;0<=b.l(I);){for(P=Math.max(1,Math.floor(b.m()/I.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=m(P),k=z.j(I);O(k)||0<k.l(b);)P-=D,z=m(P),k=z.j(I);N(z)&&(z=_),L=L.add(z),b=$(b,k)}return new Q(L,b)}n.A=function(b){return j(this,b).h},n.and=function(b){for(var I=Math.max(this.g.length,b.g.length),P=[],D=0;D<I;D++)P[D]=this.i(D)&b.i(D);return new u(P,this.h&b.h)},n.or=function(b){for(var I=Math.max(this.g.length,b.g.length),P=[],D=0;D<I;D++)P[D]=this.i(D)|b.i(D);return new u(P,this.h|b.h)},n.xor=function(b){for(var I=Math.max(this.g.length,b.g.length),P=[],D=0;D<I;D++)P[D]=this.i(D)^b.i(D);return new u(P,this.h^b.h)};function B(b){for(var I=b.g.length+1,P=[],D=0;D<I;D++)P[D]=b.i(D)<<1|b.i(D-1)>>>31;return new u(P,b.h)}function J(b,I){var P=I>>5;I%=32;for(var D=b.g.length-P,L=[],z=0;z<D;z++)L[z]=0<I?b.i(z+P)>>>I|b.i(z+P+1)<<32-I:b.i(z+P);return new u(L,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,ys=u}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zE,kl,BE,Zc,Dp,$E,HE,WE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var w=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var W=c[C];if(!(W in w))break e;w=w[W]}c=c[c.length-1],C=w[c],g=g(C),g!=C&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,C=!1,W={next:function(){if(!C&&w<c.length){var Y=w++;return{value:g(Y,c[Y]),done:!1}}return C=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,w){return c.call.apply(c.bind,arguments)}function E(c,g,w){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,C),c.apply(g,W)}}return function(){return c.apply(g,arguments)}}function _(c,g,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,_.apply(null,arguments)}function R(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function N(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(C,W,Y){for(var ue=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ue[rt-2]=arguments[rt];return g.prototype[W].apply(C,ue)}}function O(c){const g=c.length;if(0<g){const w=Array(g);for(let C=0;C<g;C++)w[C]=c[C];return w}return[]}function A(c,g){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(f(C)){const W=c.length||0,Y=C.length||0;c.length=W+Y;for(let ue=0;ue<Y;ue++)c[W+ue]=C[ue]}else c.push(C)}}class ${constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var B=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function J(c,g,w){for(const C in c)g.call(w,c[C],C,c)}function b(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function I(c){const g={};for(const w in c)g[w]=c[w];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let w,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(w in C)c[w]=C[w];for(let Y=0;Y<P.length;Y++)w=P[Y],Object.prototype.hasOwnProperty.call(C,w)&&(c[w]=C[w])}}function L(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function z(c){d.setTimeout(()=>{throw c},0)}function k(){var c=me;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Fe{constructor(){this.h=this.g=null}add(g,w){const C=De.get();C.set(g,w),this.h?this.h.next=C:this.g=C,this.h=C}}var De=new $(()=>new Ue,c=>c.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let je,re=!1,me=new Fe,se=()=>{const c=d.Promise.resolve(void 0);je=()=>{c.then(H)}};var H=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(w){z(w)}var g=De;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}re=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,g),d.removeEventListener("test",w,g)}catch{}return c})();function Ee(c,g){if(ce.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(B){e:{try{j(g.nodeName);var W=!0;break e}catch{}W=!1}W||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ke[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ee.aa.h.call(this)}}N(Ee,ce);var ke={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Ge(c,g,w,C,W){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!C,this.ha=W,this.key=++ye,this.da=this.fa=!1}function yt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function hn(c){this.src=c,this.g={},this.h=0}hn.prototype.add=function(c,g,w,C,W){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var ue=On(c,g,C,W);return-1<ue?(g=c[ue],w||(g.fa=!1)):(g=new Ge(g,this.src,Y,!!C,W),g.fa=w,c.push(g)),g};function nr(c,g){var w=g.type;if(w in c.g){var C=c.g[w],W=Array.prototype.indexOf.call(C,g,void 0),Y;(Y=0<=W)&&Array.prototype.splice.call(C,W,1),Y&&(yt(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function On(c,g,w,C){for(var W=0;W<c.length;++W){var Y=c[W];if(!Y.da&&Y.listener==g&&Y.capture==!!w&&Y.ha==C)return W}return-1}var $n="closure_lm_"+(1e6*Math.random()|0),rr={};function xs(c,g,w,C,W){if(Array.isArray(g)){for(var Y=0;Y<g.length;Y++)xs(c,g[Y],w,C,W);return null}return w=Vi(w),c&&c[Ie]?c.K(g,w,m(C)?!!C.capture:!1,W):ii(c,g,w,!1,C,W)}function ii(c,g,w,C,W,Y){if(!g)throw Error("Invalid event type");var ue=m(W)?!!W.capture:!!W,rt=dn(c);if(rt||(c[$n]=rt=new hn(c)),w=rt.add(g,w,C,ue,Y),w.proxy)return w;if(C=Ns(),w.proxy=C,C.src=c,C.listener=w,c.addEventListener)Ce||(W=ue),W===void 0&&(W=!1),c.addEventListener(g.toString(),C,W);else if(c.attachEvent)c.attachEvent(sr(g.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ns(){function c(w){return g.call(c.src,c.listener,w)}const g=Os;return c}function Pr(c,g,w,C,W){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Pr(c,g[Y],w,C,W);else C=m(C)?!!C.capture:!!C,w=Vi(w),c&&c[Ie]?(c=c.i,g=String(g).toString(),g in c.g&&(Y=c.g[g],w=On(Y,w,C,W),-1<w&&(yt(Y[w]),Array.prototype.splice.call(Y,w,1),Y.length==0&&(delete c.g[g],c.h--)))):c&&(c=dn(c))&&(g=c.g[g.toString()],c=-1,g&&(c=On(g,w,C,W)),(w=-1<c?g[c]:null)&&ir(w))}function ir(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ie])nr(g.i,c);else{var w=c.type,C=c.proxy;g.removeEventListener?g.removeEventListener(w,C,c.capture):g.detachEvent?g.detachEvent(sr(w),C):g.addListener&&g.removeListener&&g.removeListener(C),(w=dn(g))?(nr(w,c),w.h==0&&(w.src=null,g[$n]=null)):yt(c)}}}function sr(c){return c in rr?rr[c]:rr[c]="on"+c}function Os(c,g){if(c.da)c=!0;else{g=new Ee(g,this);var w=c.listener,C=c.ha||c.src;c.fa&&ir(c),c=w.call(C,g)}return c}function dn(c){return c=c[$n],c instanceof hn?c:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(c){return typeof c=="function"?c:(c[We]||(c[We]=function(g){return c.handleEvent(g)}),c[We])}function St(){Z.call(this),this.i=new hn(this),this.M=this,this.F=null}N(St,Z),St.prototype[Ie]=!0,St.prototype.removeEventListener=function(c,g,w,C){Pr(this,c,g,w,C)};function It(c,g){var w,C=c.F;if(C)for(w=[];C;C=C.F)w.push(C);if(c=c.M,C=g.type||g,typeof g=="string")g=new ce(g,c);else if(g instanceof ce)g.target=g.target||c;else{var W=g;g=new ce(C,c),D(g,W)}if(W=!0,w)for(var Y=w.length-1;0<=Y;Y--){var ue=g.g=w[Y];W=or(ue,C,!0,g)&&W}if(ue=g.g=c,W=or(ue,C,!0,g)&&W,W=or(ue,C,!1,g)&&W,w)for(Y=0;Y<w.length;Y++)ue=g.g=w[Y],W=or(ue,C,!1,g)&&W}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],C=0;C<w.length;C++)yt(w[C]);delete c.g[g],c.h--}}this.F=null},St.prototype.K=function(c,g,w,C){return this.i.add(String(c),g,!1,w,C)},St.prototype.L=function(c,g,w,C){return this.i.add(String(c),g,!0,w,C)};function or(c,g,w,C){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var W=!0,Y=0;Y<g.length;++Y){var ue=g[Y];if(ue&&!ue.da&&ue.capture==w){var rt=ue.listener,Lt=ue.ha||ue.src;ue.fa&&nr(c.i,ue),W=rt.call(Lt,C)!==!1&&W}}return W&&!C.defaultPrevented}function Ds(c,g,w){if(typeof c=="function")w&&(c=_(c,w));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function kr(c){c.g=Ds(()=>{c.g=null,c.i&&(c.i=!1,kr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class si extends Z{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:kr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(c){Z.call(this),this.h=c,this.g={}}N(oi,Z);var Vs=[];function Ms(c){J(c.g,function(g,w){this.g.hasOwnProperty(w)&&ir(g)},c),c.g={}}oi.prototype.N=function(){oi.aa.N.call(this),Ms(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=d.JSON.stringify,Ls=d.JSON.parse,F=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function le(){}le.prototype.h=null;function we(c){return c.h||(c.h=c.i())}function nt(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){ce.call(this,"d")}N(Hn,ce);function Li(){ce.call(this,"c")}N(Li,ce);var xr={},za=null;function Fs(){return za=za||new St}xr.La="serverreachability";function Ba(c){ce.call(this,xr.La,c)}N(Ba,ce);function ai(c){const g=Fs();It(g,new Ba(g))}xr.STAT_EVENT="statevent";function $a(c,g){ce.call(this,xr.STAT_EVENT,c),this.stat=g}N($a,ce);function bt(c){const g=Fs();It(g,new $a(g,c))}xr.Ma="timingevent";function Ao(c,g){ce.call(this,xr.Ma,c),this.size=g}N(Ao,ce);function ar(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function Us(c,g,w,C,W,Y){c.info(function(){if(c.g)if(Y)for(var ue="",rt=Y.split("&"),Lt=0;Lt<rt.length;Lt++){var Ke=rt[Lt].split("=");if(1<Ke.length){var zt=Ke[0];Ke=Ke[1];var kt=zt.split("_");ue=2<=kt.length&&kt[1]=="type"?ue+(zt+"="+Ke+"&"):ue+(zt+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+g+`
`+w+`
`+ue})}function Ro(c,g,w,C,W,Y,ue){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+g+`
`+w+`
`+Y+" "+ue})}function lr(c,g,w,C){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ed(c,w)+(C?" "+C:"")})}function Ha(c,g){c.info(function(){return"TIMEOUT: "+g})}js.prototype.info=function(){};function Ed(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var C=w[c];if(!(2>C.length)){var W=C[1];if(Array.isArray(W)&&!(1>W.length)){var Y=W[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<W.length;ue++)W[ue]=""}}}}return Mi(w)}catch{return g}}var Po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function zs(){}N(zs,le),zs.prototype.g=function(){return new XMLHttpRequest},zs.prototype.i=function(){return{}},ur=new zs;function cr(c,g,w,C){this.j=c,this.i=g,this.l=w,this.R=C||1,this.U=new oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Wa={},ko={};function xo(c,g,w){c.L=1,c.v=Bi(Vn(g)),c.m=w,c.P=!0,qa(c,null)}function qa(c,g){c.F=Date.now(),ot(c),c.A=Vn(c.v);var w=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Hi(w.i,"t",C),c.C=0,w=c.j.J,c.h=new Eu,c.g=ju(c.j,w?g:null,!c.m),0<c.O&&(c.M=new si(_(c.Y,c,c.g),c.O)),g=c.U,w=c.g,C=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Vs[0]=W.toString()),W=Vs);for(var Y=0;Y<W.length;Y++){var ue=xs(w,W[Y],C||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),ai(),Us(c.i,c.u,c.A,c.l,c.R,c.m)}cr.prototype.ca=function(c){c=c.target;const g=this.M;g&&En(c)==3?g.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{const kt=En(this.g);var g=this.g.Ba();const Gn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||kt!=4||g==7||(g==8||0>=Gn?ai(3):ai(2)),Bs(this);var w=this.g.Z();this.X=w;t:if(Tu(this)){var C=Ja(this.g);c="";var W=C.length,Y=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Fi(this);var ue="";break t}this.h.i=new d.TextDecoder}for(g=0;g<W;g++)this.h.h=!0,c+=this.h.i.decode(C[g],{stream:!(Y&&g==W-1)});C.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=w==200,Ro(this.i,this.u,this.A,this.l,this.R,kt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Lt=this.g;if((rt=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(rt)){var Ke=rt;break t}}Ke=null}if(w=Ke)lr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,bt(12),Wn(this),Fi(this);break e}}if(this.P){w=!0;let Ln;for(;!this.J&&this.C<ue.length;)if(Ln=Td(this,ue),Ln==ko){kt==4&&(this.s=4,bt(14),w=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==Wa){this.s=4,bt(15),lr(this.i,this.l,ue,"[Invalid Chunk]"),w=!1;break}else lr(this.i,this.l,Ln,null),Ga(this,Ln);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ue.length!=0||this.h.h||(this.s=1,bt(16),w=!1),this.o=this.o&&w,!w)lr(this.i,this.l,ue,"[Invalid Chunked Response]"),Wn(this),Fi(this);else if(0<ue.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),el(zt),zt.M=!0,bt(11))}}else lr(this.i,this.l,ue,null),Ga(this,ue);kt==4&&Wn(this),this.o&&!this.J&&(kt==4?Bo(this.j,this):(this.o=!1,ot(this)))}else Lo(this.g),w==400&&0<ue.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Wn(this),Fi(this)}}}catch{}finally{}};function Tu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Td(c,g){var w=c.C,C=g.indexOf(`
`,w);return C==-1?ko:(w=Number(g.substring(w,C)),isNaN(w)?Wa:(C+=1,C+w>g.length?ko:(g=g.slice(C,C+w),c.C=C+w,g)))}cr.prototype.cancel=function(){this.J=!0,Wn(this)};function ot(c){c.S=Date.now()+c.I,Su(c,c.I)}function Su(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ar(_(c.ba,c),g)}function Bs(c){c.B&&(d.clearTimeout(c.B),c.B=null)}cr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ha(this.i,this.A),this.L!=2&&(ai(),bt(17)),Wn(this),this.s=2,Fi(this)):Su(this,this.S-c)};function Fi(c){c.j.G==0||c.J||Bo(c.j,c)}function Wn(c){Bs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ms(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ga(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||fn(w.h,c))){if(!c.K&&fn(w.h,c)&&w.G==3){try{var C=w.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)zo(w),mr(w);else break e;Uo(w),bt(18)}}else w.za=W[1],0<w.za-w.T&&37500>W[2]&&w.F&&w.v==0&&!w.C&&(w.C=ar(_(w.Za,w),6e3));if(1>=Cu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else di(w,11)}else if((c.K||w.g==c)&&zo(w),!G(g))for(W=w.Da.g.parse(g),g=0;g<W.length;g++){let Ke=W[g];if(w.T=Ke[0],Ke=Ke[1],w.G==2)if(Ke[0]=="c"){w.K=Ke[1],w.ia=Ke[2];const zt=Ke[3];zt!=null&&(w.la=zt,w.j.info("VER="+w.la));const kt=Ke[4];kt!=null&&(w.Aa=kt,w.j.info("SVER="+w.Aa));const Gn=Ke[5];Gn!=null&&typeof Gn=="number"&&0<Gn&&(C=1.5*Gn,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Ln=c.g;if(Ln){const Qs=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var Y=C.h;Y.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ka(Y,Y.h),Y.h=null))}if(C.D){const Ho=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(C.ya=Ho,it(C.I,C.D,Ho))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var ue=c;if(C.qa=Fu(C,C.J?C.ia:null,C.W),ue.K){bu(C.h,ue);var rt=ue,Lt=C.L;Lt&&(rt.I=Lt),rt.B&&(Bs(rt),ot(rt)),C.g=ue}else Ks(C);0<w.i.length&&Vr(w)}else Ke[0]!="stop"&&Ke[0]!="close"||di(w,7);else w.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?di(w,7):Gt(w):Ke[0]!="noop"&&w.l&&w.l.ta(Ke),w.v=0)}}ai(4)}catch{}}var Iu=class{constructor(c,g){this.g=c,this.map=g}};function $s(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cu(c){return c.h?1:c.g?c.g.size:0}function fn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ka(c,g){c.g?c.g.add(g):c.h=g}function bu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}$s.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return O(c.i)}function No(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,C=0;C<w;C++)g.push(c[C]);return g}g=[],w=0;for(C in c)g[w++]=c[C];return g}function Oo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const C in c)g[w++]=C;return g}}}function ji(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=Oo(c),C=No(c),W=C.length,Y=0;Y<W;Y++)g.call(void 0,C[Y],w&&w[Y],c)}var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var C=c[w].indexOf("="),W=null;if(0<=C){var Y=c[w].substring(0,C);W=c[w].substring(C+1)}else Y=c[w];g(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof li){this.h=c.h,Ws(this,c.j),this.o=c.o,this.g=c.g,Ui(this,c.s),this.l=c.l;var g=c.i,w=new Nr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),zi(this,w),this.m=c.m}else c&&(g=String(c).match(Hs))?(this.h=!1,Ws(this,g[1]||"",!0),this.o=qe(g[2]||""),this.g=qe(g[3]||"",!0),Ui(this,g[4]),this.l=qe(g[5]||"",!0),zi(this,g[6]||"",!0),this.m=qe(g[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}li.prototype.toString=function(){var c=[],g=this.j;g&&c.push($i(g,Do,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push($i(g,Do,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push($i(w,w.charAt(0)=="/"?ku:Pu,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",$i(w,Qa)),c.join("")};function Vn(c){return new li(c)}function Ws(c,g,w){c.j=w?qe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ui(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function zi(c,g,w){g instanceof Nr?(c.i=g,Or(c.i,c.h)):(w||(g=$i(g,xu)),c.i=new Nr(g,c.h))}function it(c,g,w){c.i.set(g,w)}function Bi(c){return it(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function $i(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Ru),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ru(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Do=/[#\/\?@]/g,Pu=/[#\?:]/g,ku=/[#\?]/g,xu=/[#\?@]/g,Qa=/#/g;function Nr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function qt(c){c.g||(c.g=new Map,c.h=0,c.i&&Sd(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=Nr.prototype,n.add=function(c,g){qt(this),this.i=null,c=qn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function hr(c,g){qt(c),g=qn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function dr(c,g){return qt(c),g=qn(c,g),c.g.has(g)}n.forEach=function(c,g){qt(this),this.g.forEach(function(w,C){w.forEach(function(W){c.call(g,W,C,this)},this)},this)},n.na=function(){qt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let C=0;C<g.length;C++){const W=c[C];for(let Y=0;Y<W.length;Y++)w.push(g[C])}return w},n.V=function(c){qt(this);let g=[];if(typeof c=="string")dr(this,c)&&(g=g.concat(this.g.get(qn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return qt(this),this.i=null,c=qn(this,c),dr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Hi(c,g,w){hr(c,g),0<w.length&&(c.i=null,c.g.set(qn(c,g),O(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var C=g[w];const Y=encodeURIComponent(String(C)),ue=this.V(C);for(C=0;C<ue.length;C++){var W=Y;ue[C]!==""&&(W+="="+encodeURIComponent(String(ue[C]))),c.push(W)}}return this.i=c.join("&")};function qn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Or(c,g){g&&!c.j&&(qt(c),c.i=null,c.g.forEach(function(w,C){var W=C.toLowerCase();C!=W&&(hr(this,C),Hi(this,W,w))},c)),c.j=g}function Id(c,g){const w=new js;if(d.Image){const C=new Image;C.onload=R(wn,w,"TestLoadImage: loaded",!0,g,C),C.onerror=R(wn,w,"TestLoadImage: error",!1,g,C),C.onabort=R(wn,w,"TestLoadImage: abort",!1,g,C),C.ontimeout=R(wn,w,"TestLoadImage: timeout",!1,g,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else g(!1)}function Nu(c,g){const w=new js,C=new AbortController,W=setTimeout(()=>{C.abort(),wn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:C.signal}).then(Y=>{clearTimeout(W),Y.ok?wn(w,"TestPingServer: ok",!0,g):wn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(W),wn(w,"TestPingServer: error",!1,g)})}function wn(c,g,w,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(w)}catch{}}function Cd(){this.g=new F}function Ou(c,g,w){const C=w||"";try{ji(c,function(W,Y){let ue=W;m(W)&&(ue=Mi(W)),g.push(C+Y+"="+encodeURIComponent(ue))})}catch(W){throw g.push(C+"type="+encodeURIComponent("_badmap")),W}}function ui(c){this.l=c.Ub||null,this.j=c.eb||!1}N(ui,le),ui.prototype.g=function(){return new qs(this.l,this.j)},ui.prototype.i=(function(c){return function(){return c}})({});function qs(c,g){St.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(qs,St),n=qs.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,pr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Du(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Du(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?fr(this):pr(this),this.readyState==3&&Du(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,fr(this))},n.Qa=function(c){this.g&&(this.response=c,fr(this))},n.ga=function(){this.g&&fr(this)};function fr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,pr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ci(c){let g="";return J(c,function(w,C){g+=C,g+=":",g+=w,g+=`\r
`}),g}function Wi(c,g,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=ci(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):it(c,g,w))}function ft(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ft,St);var bd=/^https?$/i,Xa=["POST","PUT"];n=ft.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?we(this.o):we(ur),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Y){Gs(this,Y);return}if(c=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)w.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Y of C.keys())w.set(Y,C.get(Y));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xa,g,void 0))||C||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of w)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mo(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Gs(this,Y)}};function Gs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Vo(c),Mn(c)}function Vo(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),Mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(c){if(c.h&&typeof u<"u"&&(!c.v[1]||En(c)!=4||c.Z()!=2)){if(c.u&&En(c)==4)Ds(c.Ea,0,c);else if(It(c,"readystatechange"),En(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var C;if(C=ue===0){var W=String(c.D).match(Hs)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),C=!bd.test(W?W.toLowerCase():"")}w=C}if(w)It(c,"complete"),It(c,"success");else{c.m=6;try{var Y=2<En(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",Vo(c)}}finally{Mn(c)}}}}function Mn(c,g){if(c.g){Mo(c);const w=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||It(c,"ready");try{w.onreadystatechange=C}catch{}}}function Mo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function En(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ls(g)}};function Ja(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(c){const g={};c=(c.g&&2<=En(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(G(c[C]))continue;var w=L(c[C]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=g[W]||[];g[W]=Y,Y.push(w)}b(g,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Za(c){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,c),this.cb=Dr("retryDelaySeedMs",1e4,c),this.Wa=Dr("forwardChannelMaxRetries",2,c),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $s(c&&c.concurrentRequestLimit),this.Da=new Cd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,C){bt(0),this.W=c,this.H=g||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Fu(this,null,this.W),Vr(this)};function Gt(c){if(Fo(c),c.G==3){var g=c.U++,w=Vn(c.I);if(it(w,"SID",c.K),it(w,"RID",g),it(w,"TYPE","terminate"),hi(c,w),g=new cr(c,c.j,g),g.L=2,g.v=Bi(Vn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=g.v,w=!0),w||(g.g=ju(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ot(g)}Lu(c)}function mr(c){c.g&&(el(c),c.g.cancel(),c.g=null)}function Fo(c){mr(c),c.u&&(d.clearTimeout(c.u),c.u=null),zo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Vr(c){if(!Dn(c.h)&&!c.s){c.s=!0;var g=c.Ga;je||se(),re||(je(),re=!0),me.add(g,c),c.B=0}}function Ad(c,g){return Cu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ar(_(c.Ga,c,g),Mu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new cr(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=I(Y),D(Y,this.S)):Y=this.S),this.m!==null||this.O||(W.H=Y,Y=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=qi(this,W,g),w=Vn(this.I),it(w,"RID",c),it(w,"CVER",22),this.D&&it(w,"X-HTTP-Session-Id",this.D),hi(this,w),Y&&(this.O?g="headers="+encodeURIComponent(String(ci(Y)))+"&"+g:this.m&&Wi(w,this.m,Y)),Ka(this.h,W),this.Ua&&it(w,"TYPE","init"),this.P?(it(w,"$req",g),it(w,"SID","null"),W.T=!0,xo(W,w,null)):xo(W,w,g),this.G=2}}else this.G==3&&(c?jo(this,c):this.i.length==0||Dn(this.h)||jo(this))};function jo(c,g){var w;g?w=g.l:w=c.U++;const C=Vn(c.I);it(C,"SID",c.K),it(C,"RID",w),it(C,"AID",c.T),hi(c,C),c.m&&c.o&&Wi(C,c.m,c.o),w=new cr(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=qi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ka(c.h,w),xo(w,C,g)}function hi(c,g){c.H&&J(c.H,function(w,C){it(g,C,w)}),c.l&&ji({},function(w,C){it(g,C,w)})}function qi(c,g,w){w=Math.min(c.i.length,w);var C=c.l?_(c.l.Na,c.l,c):null;e:{var W=c.i;let Y=-1;for(;;){const ue=["count="+w];Y==-1?0<w?(Y=W[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let rt=!0;for(let Lt=0;Lt<w;Lt++){let Ke=W[Lt].g;const zt=W[Lt].map;if(Ke-=Y,0>Ke)Y=Math.max(0,W[Lt].g-100),rt=!1;else try{Ou(zt,ue,"req"+Ke+"_")}catch{C&&C(zt)}}if(rt){C=ue.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,C}function Ks(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;je||se(),re||(je(),re=!0),me.add(g,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ar(_(c.Fa,c),Mu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ar(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),mr(this),Vu(this))};function el(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Vu(c){c.g=new cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Vn(c.qa);it(g,"RID","rpc"),it(g,"SID",c.K),it(g,"AID",c.T),it(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&it(g,"TO",c.ja),it(g,"TYPE","xmlhttp"),hi(c,g),c.m&&c.o&&Wi(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Bi(Vn(g)),w.m=null,w.P=!0,qa(w,c)}n.Za=function(){this.C!=null&&(this.C=null,mr(this),Uo(this),bt(19))};function zo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Bo(c,g){var w=null;if(c.g==g){zo(c),el(c),c.g=null;var C=2}else if(fn(c.h,g))w=g.D,bu(c.h,g),C=1;else return;if(c.G!=0){if(g.o)if(C==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var W=c.B;C=Fs(),It(C,new Ao(C,w)),Vr(c)}else Ks(c);else if(W=g.s,W==3||W==0&&0<g.X||!(C==1&&Ad(c,g)||C==2&&Uo(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),W){case 1:di(c,5);break;case 4:di(c,10);break;case 3:di(c,6);break;default:di(c,2)}}}function Mu(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function di(c,g){if(c.j.info("Error code "+g),g==2){var w=_(c.fb,c),C=c.Xa;const W=!C;C=new li(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ws(C,"https"),Bi(C),W?Id(C.toString(),w):Nu(C.toString(),w)}else bt(2);c.G=0,c.l&&c.l.sa(g),Lu(c),Fo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Lu(c){if(c.G=0,c.ka=[],c.l){const g=Au(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function Fu(c,g,w){var C=w instanceof li?Vn(w):new li(w);if(C.g!="")g&&(C.g=g+"."+C.g),Ui(C,C.s);else{var W=d.location;C=W.protocol,g=g?g+"."+W.hostname:W.hostname,W=+W.port;var Y=new li(null);C&&Ws(Y,C),g&&(Y.g=g),W&&Ui(Y,W),w&&(Y.l=w),C=Y}return w=c.D,g=c.ya,w&&g&&it(C,w,g),it(C,"VER",c.la),hi(c,C),C}function ju(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ft(new ui({eb:w})):new ft(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tl(){}n=tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $o(){}$o.prototype.g=function(c,g){return new pn(c,g)};function pn(c,g){St.call(this),this.g=new Za(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!G(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!G(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Mr(this)}N(pn,St),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Gt(this.g)},pn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Mi(c),c=w);g.i.push(new Iu(g.Ya++,c)),g.G==3&&Vr(g)},pn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,pn.aa.N.call(this)};function Uu(c){Hn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(Uu,Hn);function zu(){Li.call(this),this.status=1}N(zu,Li);function Mr(c){this.g=c}N(Mr,tl),Mr.prototype.ua=function(){It(this.g,"a")},Mr.prototype.ta=function(c){It(this.g,new Uu(c))},Mr.prototype.sa=function(c){It(this.g,new zu)},Mr.prototype.ra=function(){It(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,WE=function(){return new $o},HE=function(){return Fs()},$E=xr,Dp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,Zc=Po,wu.COMPLETE="complete",BE=wu,nt.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",St.prototype.listen=St.prototype.K,kl=nt,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,zE=ft}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const V_="@firebase/firestore",M_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new vm("@firebase/firestore");function da(){return yo.logLevel}function fe(n,...e){if(yo.logLevel<=$e.DEBUG){const t=e.map(km);yo.debug(`Firestore (${Oa}): ${n}`,...t)}}function ki(n,...e){if(yo.logLevel<=$e.ERROR){const t=e.map(km);yo.error(`Firestore (${Oa}): ${n}`,...t)}}function Es(n,...e){if(yo.logLevel<=$e.WARN){const t=e.map(km);yo.warn(`Firestore (${Oa}): ${n}`,...t)}}function km(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qE(n,r,t)}function qE(n,e,t){let r=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ki(r),new Error(r)}function tt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||qE(e,s,r)}function Le(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class OP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class DP{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ii,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ii)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new GE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class VP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new VP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new L_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=FP(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Vp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ze(r,s);{const a=KE(),u=jP(a.encode(F_(n,t)),a.encode(F_(e,t)));return u!==0?u:ze(r,s)}}t+=r>65535?2:1}return ze(n.length,e.length)}function F_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function jP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ze(n[t],e[t]);return ze(n.length,e.length)}function Sa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__name__";class Br{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Br.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return ze(e.length,t.length)}static compareSegments(e,t){const r=Br.isNumericId(e),s=Br.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class lt extends Br{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const UP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Br{construct(e,t,r){return new Zt(e,t,r)}static isValidIdentifier(e){return UP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j_}static keyField(){return new Zt([j_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(lt.fromString(e))}static fromName(e){return new Se(lt.fromString(e).popFirst(5))}static empty(){return new Se(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zP(n,e,t,r){if(e===!0&&r===!0)throw new he(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U_(n){if(!Se.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function z_(n){if(Se.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function Zr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qh(n);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function hu(n,e){if(!XE(n))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new he(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=-62135596800,$_=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*$_);return new dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B_)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$_}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Vt("string",dt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new dt(0,0))}static max(){return new Ve(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function BP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new Ts(s,Se.empty(),e)}function $P(n){return new Ts(n.readTime,n.key,ql)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(Ve.min(),Se.empty(),ql)}static max(){return new Ts(Ve.max(),Se.empty(),ql)}}function HP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==WP)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((s=>s?te.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((y=>{u[m]=y,++d,d===a&&r(u)}),(y=>s(y)))}}))}static doWhile(e,t){return new te(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function GP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Xh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=-1;function Yh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function KP(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="";function QP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=H_(e)),e=XP(n.get(t),e);return H_(e)}function XP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case YE:t+="";break;default:t+=a}}return t}function H_(n){return n+YE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Yt.RED,this.left=s??Yt.EMPTY,this.right=a??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Yt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Yt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Ut(Zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZE("Invalid base64 string: "+a):a}})(e);return new en(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const YP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=YP.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Is(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="server_timestamp",tT="__type__",nT="__previous_value__",rT="__local_write_time__";function Om(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tT])===null||t===void 0?void 0:t.stringValue)===eT}function Jh(n){const e=n.mapValue.fields[nT];return Om(e)?Jh(e):e}function Gl(n){const e=Ss(n.mapValue.fields[rT].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,r,s,a,u,d,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const _h="(default)";class Kl{constructor(e,t){this.projectId=e,this.database=t||_h}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="__type__",ZP="__max__",Fc={mapValue:{}},sT="__vector__",wh="value";function Cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Om(n)?4:tk(n)?9007199254740991:ek(n)?10:11:xe(28295,{value:n})}function ei(n,e){if(n===e)return!0;const t=Cs(n);if(t!==Cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gl(n).isEqual(Gl(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Ss(s.timestampValue),d=Ss(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Is(s.bytesValue).isEqual(Is(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Rt(s.geoPointValue.latitude)===Rt(a.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Rt(s.integerValue)===Rt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Rt(s.doubleValue),d=Rt(a.doubleValue);return u===d?yh(u)===yh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(W_(u)!==W_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ei(u[f],d[f])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function Ql(n,e){return(n.values||[]).find((t=>ei(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=Cs(n),r=Cs(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Rt(a.integerValue||a.doubleValue),f=Rt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return G_(n.timestampValue,e.timestampValue);case 4:return G_(Gl(n),Gl(e));case 5:return Vp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Is(a),f=Is(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=ze(d[m],f[m]);if(y!==0)return y}return ze(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ze(Rt(a.latitude),Rt(u.latitude));return d!==0?d:ze(Rt(a.longitude),Rt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return K_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,y;const E=a.fields||{},_=u.fields||{},R=(d=E[wh])===null||d===void 0?void 0:d.arrayValue,N=(f=_[wh])===null||f===void 0?void 0:f.arrayValue,O=ze(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return O!==0?O:K_(R,N)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Fc.mapValue&&u===Fc.mapValue)return 0;if(a===Fc.mapValue)return 1;if(u===Fc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const _=Vp(f[E],y[E]);if(_!==0)return _;const R=Ia(d[f[E]],m[y[E]]);if(R!==0)return R}return ze(f.length,y.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{le:t})}}function G_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Ss(n),r=Ss(e),s=ze(t.seconds,r.seconds);return s!==0?s:ze(t.nanos,r.nanos)}function K_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ia(t[s],r[s]);if(a)return a}return ze(t.length,r.length)}function Ca(n){return Mp(n)}function Mp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ss(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Is(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Mp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Mp(t.fields[u])}`;return s+"}"})(n.mapValue):xe(61005,{value:n})}function eh(n){switch(Cs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(n);return e?16+eh(e):16;case 5:return 2*n.stringValue.length;case 6:return Is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+eh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Rs(r.fields,((a,u)=>{s+=a.length+eh(u)})),s})(n.mapValue);default:throw xe(13486,{value:n})}}function Q_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lp(n){return!!n&&"integerValue"in n}function Dm(n){return!!n&&"arrayValue"in n}function X_(n){return!!n&&"nullValue"in n}function Y_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function ek(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iT])===null||t===void 0?void 0:t.stringValue)===sT}function Ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ll(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=Zt.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=Ll(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Rs(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new kn(Ll(this.value))}}function oT(n){const e=[];return Rs(n.fields,((t,r)=>{const s=new Zt([t]);if(th(r)){const a=oT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Ve.min(),Ve.min(),Ve.min(),kn.empty(),0)}static newFoundDocument(e,t,r,s){return new un(e,1,t,Ve.min(),r,s,0)}static newNoDocument(e,t){return new un(e,2,t,Ve.min(),Ve.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Ve.min(),Ve.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function J_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Se.comparator(Se.fromName(u.referenceValue),t.key):r=Ia(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Z_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ei(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t="asc"){this.field=e,this.dir=t}}function nk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{}class Dt extends aT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ik(e,t,r):t==="array-contains"?new ak(e,r):t==="in"?new lk(e,r):t==="not-in"?new uk(e,r):t==="array-contains-any"?new ck(e,r):new Dt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sk(e,r):new ok(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&Cs(this.value)===Cs(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends aT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ar(e,t)}matches(e){return lT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lT(n){return n.op==="and"}function uT(n){return rk(n)&&lT(n)}function rk(n){for(const e of n.filters)if(e instanceof Ar)return!1;return!0}function Fp(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Ca(n.value);if(uT(n))return n.filters.map((e=>Fp(e))).join(",");{const e=n.filters.map((t=>Fp(t))).join(",");return`${n.op}(${e})`}}function cT(n,e){return n instanceof Dt?(function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&ei(r.value,s.value)})(n,e):n instanceof Ar?(function(r,s){return s instanceof Ar&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&cT(u,s.filters[d])),!0):!1})(n,e):void xe(19439)}function hT(n){return n instanceof Dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ca(t.value)}`})(n):n instanceof Ar?(function(t){return t.op.toString()+" {"+t.getFilters().map(hT).join(" ,")+"}"})(n):"Filter"}class ik extends Dt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class sk extends Dt{constructor(e,t){super(e,"in",t),this.keys=dT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ok extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=dT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Se.fromName(r.referenceValue)))}class ak extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dm(t)&&Ql(t.arrayValue,this.value)}}class lk extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ql(this.value.arrayValue,t)}}class uk extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ql(this.value.arrayValue,t)}}class ck extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ql(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function ew(n,e=null,t=[],r=[],s=null,a=null,u=null){return new hk(n,e,t,r,s,a,u)}function Vm(n){const e=Le(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Fp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ca(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ca(r))).join(",")),e.Pe=t}return e.Pe}function Mm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Z_(n.startAt,e.startAt)&&Z_(n.endAt,e.endAt)}function jp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function dk(n,e,t,r,s,a,u,d){return new du(n,e,t,r,s,a,u,d)}function Lm(n){return new du(n)}function tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fT(n){return n.collectionGroup!==null}function Fl(n){const e=Le(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ut(Zt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Th(a,r))})),t.has(Zt.keyField().canonicalString())||e.Te.push(new Th(Zt.keyField(),r))}return e.Te}function Gr(n){const e=Le(n);return e.Ie||(e.Ie=fk(e,Fl(n))),e.Ie}function fk(n,e){if(n.limitType==="F")return ew(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Th(s.field,a)}));const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return ew(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Up(n,e){const t=n.filters.concat([e]);return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zp(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zh(n,e){return Mm(Gr(n),Gr(e))&&n.limitType===e.limitType}function pT(n){return`${Vm(Gr(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>hT(s))).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ca(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ca(s))).join(",")),`Target(${r})`})(Gr(n))}; limitType=${n.limitType})`}function ed(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Se.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Fl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=J_(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,Fl(r),s)||r.endAt&&!(function(u,d,f){const m=J_(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,Fl(r),s))})(n,e)}function pk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mT(n){return(e,t)=>{let r=!1;for(const s of Fl(n)){const a=mk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function mk(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Ia(f,m):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new vt(Se.comparator);function xi(){return gk}const gT=new vt(Se.comparator);function xl(...n){let e=gT;for(const t of n)e=e.insert(t.key,t);return e}function vT(n){let e=gT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ho(){return jl()}function yT(){return jl()}function jl(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const vk=new vt(Se.comparator),yk=new Ut(Se.comparator);function He(...n){let e=yk;for(const t of n)e=e.add(t);return e}const _k=new Ut(ze);function wk(){return _k}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function _T(n){return{integerValue:""+n}}function Ek(n,e){return KP(e)?_T(e):Fm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function Tk(n,e,t){return n instanceof Xl?(function(s,a){const u={fields:{[tT]:{stringValue:eT},[rT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Om(a)&&(a=Jh(a)),a&&(u.fields[nT]=a),{mapValue:u}})(t,e):n instanceof Yl?ET(n,e):n instanceof Jl?TT(n,e):(function(s,a){const u=wT(s,a),d=nw(u)+nw(s.Ee);return Lp(u)&&Lp(s.Ee)?_T(d):Fm(s.serializer,d)})(n,e)}function Sk(n,e,t){return n instanceof Yl?ET(n,e):n instanceof Jl?TT(n,e):t}function wT(n,e){return n instanceof Sh?(function(r){return Lp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Xl extends td{}class Yl extends td{constructor(e){super(),this.elements=e}}function ET(n,e){const t=ST(e);for(const r of n.elements)t.some((s=>ei(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Jl extends td{constructor(e){super(),this.elements=e}}function TT(n,e){let t=ST(e);for(const r of n.elements)t=t.filter((s=>!ei(s,r)));return{arrayValue:{values:t}}}class Sh extends td{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function nw(n){return Rt(n.integerValue||n.doubleValue)}function ST(n){return Dm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.field=e,this.transform=t}}function Ck(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Jl&&s instanceof Jl?Sa(r.elements,s.elements,ei):r instanceof Sh&&s instanceof Sh?ei(r.Ee,s.Ee):r instanceof Xl&&s instanceof Xl})(n.transform,e.transform)}class bk{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class nd{}function IT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jm(n.key,br.none()):new fu(n.key,n.data,br.none());{const t=n.data,r=kn.empty();let s=new Ut(Zt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ps(n.key,r,new zn(s.toArray()),br.none())}}function Ak(n,e,t){n instanceof fu?(function(s,a,u){const d=s.value.clone(),f=iw(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ps?(function(s,a,u){if(!nh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=iw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(CT(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ul(n,e,t,r){return n instanceof fu?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=a.value.clone(),y=sw(a.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ps?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=sw(a.fieldTransforms,f,u),y=u.data;return y.setAll(CT(a)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,u,d){return nh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function Rk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=wT(r.transform,s||null);a!=null&&(t===null&&(t=kn.empty()),t.set(r.field,a))}return t||null}function rw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Sa(r,s,((a,u)=>Ck(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends nd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ps extends nd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function iw(n,e,t){const r=new Map;tt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Sk(u,d,t[s]))}return r}function sw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Tk(a,u,e))}return r}class jm extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pk extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Ak(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yT();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=IT(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((t,r)=>rw(t,r)))&&Sa(this.baseMutations,e.baseMutations,((t,r)=>rw(t,r)))}}class Um{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){tt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return vk})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Um(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Qe;function Ok(n){switch(n){case ee.OK:return xe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function bT(n){if(n===void 0)return ki("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Nt.OK:return ee.OK;case Nt.CANCELLED:return ee.CANCELLED;case Nt.UNKNOWN:return ee.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ee.INTERNAL;case Nt.UNAVAILABLE:return ee.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ee.NOT_FOUND;case Nt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Nt.ABORTED:return ee.ABORTED;case Nt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Nt.DATA_LOSS:return ee.DATA_LOSS;default:return xe(39323,{code:n})}}(Qe=Nt||(Nt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new ys([4294967295,4294967295],0);function ow(n){const e=KE().encode(n),t=new UE;return t.update(e),new Uint8Array(t.digest())}function aw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ys([t,r],0),new ys([s,a],0)]}class zm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nl(`Invalid padding: ${t}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ys.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(ys.fromNumber(r)));return s.compare(Dk)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=ow(e),[r,s]=aw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new zm(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=ow(e),[r,s]=aw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rd(Ve.min(),s,new vt(ze),xi(),He())}}class pu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pu(r,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class AT{constructor(e,t){this.targetId=e,this.De=t}}class RT{constructor(e,t,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class lw{constructor(){this.ve=0,this.Ce=uw(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=He(),t=He(),r=He();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:xe(38017,{changeType:a})}})),new pu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=uw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Vk{constructor(e){this.We=e,this.Ge=new Map,this.ze=xi(),this.je=jc(),this.Je=jc(),this.He=new vt(ze)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(jp(a))if(r===0){const u=new Se(a.path);this.Xe(t,u,un.newNoDocument(u,Ve.min()))}else tt(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=Is(r).toUint8Array()}catch(f){if(f instanceof ZE)return Es("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new zm(u,s,a)}catch(f){return Es(f instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&jp(d.target)){const f=new Se(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,un.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=He();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new rd(e,t,this.He,this.ze,r);return this.ze=xi(),this.je=jc(),this.Je=jc(),this.He=new vt(ze),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new lw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(ze),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function jc(){return new vt(Se.comparator)}function uw(){return new vt(Se.comparator)}const Mk={asc:"ASCENDING",desc:"DESCENDING"},Lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fk={and:"AND",or:"OR"};class jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bp(n,e){return n.useProto3Json||Yh(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Uk(n,e){return Ih(n,e.toTimestamp())}function Kr(n){return tt(!!n,49232),Ve.fromTimestamp((function(t){const r=Ss(t);return new dt(r.seconds,r.nanos)})(n))}function Bm(n,e){return $p(n,e).canonicalString()}function $p(n,e){const t=(function(s){return new lt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kT(n){const e=lt.fromString(n);return tt(VT(e),10190,{key:e.toString()}),e}function Hp(n,e){return Bm(n.databaseId,e.path)}function ap(n,e){const t=kT(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(NT(t))}function xT(n,e){return Bm(n.databaseId,e)}function zk(n){const e=kT(n);return e.length===4?lt.emptyPath():NT(e)}function Wp(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NT(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function cw(n,e,t){return{name:Hp(n,e),fields:t.value.mapValue.fields}}function Bk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:xe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(tt(y===void 0||typeof y=="string",58123),en.fromBase64String(y||"")):(tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),en.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const y=m.code===void 0?ee.UNKNOWN:bT(m.code);return new he(y,m.message||"")})(u);t=new RT(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ap(n,r.document.name),a=Kr(r.document.updateTime),u=r.document.createTime?Kr(r.document.createTime):Ve.min(),d=new kn({mapValue:{fields:r.document.fields}}),f=un.newFoundDocument(s,a,u,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new rh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ap(n,r.document),a=r.readTime?Kr(r.readTime):Ve.min(),u=un.newNoDocument(s,a),d=r.removedTargetIds||[];t=new rh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ap(n,r.document),a=r.removedTargetIds||[];t=new rh([],a,s,null)}else{if(!("filter"in e))return xe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Nk(s,a),d=r.targetId;t=new AT(d,u)}}return t}function $k(n,e){let t;if(e instanceof fu)t={update:cw(n,e.key,e.value)};else if(e instanceof jm)t={delete:Hp(n,e.key)};else if(e instanceof Ps)t={update:cw(n,e.key,e.data),updateMask:Jk(e.fieldMask)};else{if(!(e instanceof Pk))return xe(16599,{Rt:e.type});t={verify:Hp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Jl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw xe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Uk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)})(n,e.precondition)),t}function Hk(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Kr(s.updateTime):Kr(a);return u.isEqual(Ve.min())&&(u=Kr(a)),new bk(u,s.transformResults||[])})(t,e)))):[]}function Wk(n,e){return{documents:[xT(n,e.path)]}}function qk(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xT(n,s);const a=(function(m){if(m.length!==0)return DT(Ar.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((y=>(function(_){return{field:pa(_.field),direction:Qk(_.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Bp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function Gk(n){let e=zk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){tt(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(E){const _=OT(E);return _ instanceof Ar&&uT(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((_=>(function(N){return new Th(ma(N.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let _;return _=typeof E=="object"?E.value:E,Yh(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(E){const _=!!E.before,R=E.values||[];return new Eh(R,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const _=!E.before,R=E.values||[];return new Eh(R,_)})(t.endAt)),dk(e,s,u,a,d,"F",f,m)}function Kk(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ma(t.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ma(t.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ma(t.unaryFilter.field);return Dt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ma(t.unaryFilter.field);return Dt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dt.create(ma(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ar.create(t.compositeFilter.filters.map((r=>OT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function Qk(n){return Mk[n]}function Xk(n){return Lk[n]}function Yk(n){return Fk[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ma(n){return Zt.fromServerFormat(n.fieldPath)}function DT(n){return n instanceof Dt?(function(t){if(t.op==="=="){if(Y_(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(X_(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y_(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(X_(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:Xk(t.op),value:t.value}}})(n):n instanceof Ar?(function(t){const r=t.getFilters().map((s=>DT(s)));return r.length===1?r[0]:{compositeFilter:{op:Yk(t.op),filters:r}}})(n):xe(54877,{filter:n})}function Jk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,r,s,a=Ve.min(),u=Ve.min(),d=en.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.gt=e}}function ex(n){const e=Gk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Dn=new nx}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ts.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class nx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ut(lt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ut(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MT=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(MT,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ba(0)}static ur(){return new ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="LruGarbageCollector",rx=1048576;function fw([n,e],[t,r]){const s=ze(n,t);return s===0?ze(e,r):s}class ix{constructor(e){this.Tr=e,this.buffer=new Ut(fw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(dw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?fe(dw,"Ignoring IndexedDB error during garbage collection: ",t):await Da(t)}await this.Rr(3e5)}))}}class ox{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Xh.ue);const r=new ix(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(hw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(m=Date.now(),da()<=$e.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function ax(n,e){return new ox(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ul(r.mutation,s,zn.empty(),dt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,He()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=He()){const s=ho();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=xl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,He())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=xi();const u=jl(),d=(function(){return jl()})();return t.forEach(((f,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Ps)?a=a.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),Ul(y.mutation,m,y.mutation.getFieldMask(),dt.now())):u.set(m.key,zn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,y)=>u.set(m,y))),t.forEach(((m,y)=>{var E;return d.set(m,new ux(y,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=jl();let s=new vt(((u,d)=>u-d)),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||zn.empty();y=d.applyToLocalView(m,y),r.set(f,y);const E=(s.get(d.batchId)||He()).add(f);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,E=yT();y.forEach((_=>{if(!a.has(_)){const R=IT(t.get(_),r.get(_));R!==null&&E.set(_,R),a=a.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return te.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):te.resolve(ho());let d=ql,f=a;return u.next((m=>te.forEach(m,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((_=>{f=f.insert(y,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,He()))).next((y=>({batchId:d,changes:vT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let s=xl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=xl();return this.indexManager.getCollectionParents(e,a).next((d=>te.forEach(d,(f=>{const m=(function(E,_){return new du(_,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((E,_)=>{u=u.insert(E,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,un.newInvalidDocument(y)))}));let d=xl();return u.forEach(((f,m)=>{const y=a.get(f);y!==void 0&&Ul(y.mutation,m,zn.empty(),dt.now()),ed(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Kr(s.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:ex(s.bundledQuery),readTime:Kr(s.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.overlays=new vt(Se.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return te.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=ho(),a=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new vt(((m,y)=>m-y));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=ho(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=ho(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=s)););return te.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new xk(t,r));let a=this.kr.get(t);a===void 0&&(a=He(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.qr=new Ut(Wt.Qr),this.$r=new Ut(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Wt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Se(new lt([])),r=new Wt(t,e),s=new Wt(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Se(new lt([])),r=new Wt(t,e),s=new Wt(t,e+1);let a=He();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Wt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Se.comparator(e.key,t.key)||ze(e.Hr,t.Hr)}static Ur(e,t){return ze(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Wt.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new kk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Wt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Nm:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),s=new Wt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(ze);return t.forEach((s=>{const a=new Wt(s,0),u=new Wt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Se.isDocumentKey(a)||(a=a.child(""));const u=new Wt(new Se(a),0);let d=new Ut(ze);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),te.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){tt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(t.mutations,(s=>{const a=new Wt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Wt(t,0),s=this.Yr.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.ni=e,this.docs=(function(){return new vt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():un.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=xi();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||HP($P(y),r)<=0||(s.has(y.key)||ed(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,s){xe(9500)}ri(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new gx(this)}getSize(e){return te.resolve(this.size)}}class gx extends lx{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.persistence=e,this.ii=new Io((t=>Vm(t)),Mm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new $m,this.targetCount=0,this._i=ba.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ba(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),te.waitFor(a).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xh(0),this.ci=!1,this.ci=!0,this.li=new fx,this.referenceDelegate=e(this),this.hi=new vx(this),this.indexManager=new tx,this.remoteDocumentCache=(function(s){return new mx(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Zk(t),this.Ti=new hx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new px(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new yx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return te.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class yx extends qP{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Ai=new $m,this.Ri=null}static Vi(e){return new Hm(e)}get mi(){if(this.Ri)return this.Ri;throw xe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(r=>{const s=Se.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,Ve.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ch{constructor(e,t){this.persistence=e,this.gi=new Io((r=>QP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=ax(this,t)}static Vi(e,t){return new Ch(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?te.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Ve.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eh(e.data.value)),t}Sr(e,t,r){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=He(),s=He();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Wm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return pb()?8:GP(cn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new _x;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(da()<=$e.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(da()<=$e.DEBUG&&fe("QueryEngine","Query:",fa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(da()<=$e.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):te.resolve())}ps(e,t){if(tw(t))return te.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=zp(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=He(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,zp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return tw(t)||s.isEqual(Ve.min())?te.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?te.resolve(null):(da()<=$e.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fa(t)),this.vs(e,u,t,BP(s,ql)).next((d=>d)))}))}bs(e,t){let r=new Ut(mT(e));return t.forEach(((s,a)=>{ed(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return da()<=$e.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",fa(t)),this.gs.getDocumentsMatchingQuery(e,t,Ts.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LocalStore",Ex=3e8;class Tx{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new vt(ze),this.Ms=new Io((a=>Vm(a)),Mm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Sx(n,e,t,r){return new Tx(n,e,t,r)}async function FT(n,e){const t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=He();for(const m of s){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Ix(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,y){const E=m.batch,_=E.keys();let R=te.resolve();return _.forEach((N=>{R=R.next((()=>y.getEntry(f,N))).next((O=>{const A=m.docVersions.get(N);tt(A!==null,48541),O.version.compareTo(A)<0&&(E.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),y.addEntry(O)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=He();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function jT(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Cx(n,e){const t=Le(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((y,E)=>{const _=s.get(E);if(!_)return;d.push(t.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>t.hi.addMatchingKeys(a,y.addedDocuments,E))));let R=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(en.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),s=s.insert(E,R),(function(O,A,$){return O.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Ex?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(_,R,y)&&d.push(t.hi.updateTargetData(a,R))}));let f=xi(),m=He();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(bx(a,u,e.documentUpdates).next((y=>{f=y.Ls,m=y.ks}))),!r.isEqual(Ve.min())){const y=t.hi.getLastRemoteSnapshotVersion(a).next((E=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(y)}return te.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function bx(n,e,t){let r=He(),s=He();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=xi();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ve.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):fe(qm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Ax(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Nm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Rx(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,te.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new ps(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function qp(n,e,t){const r=Le(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Va(u))throw u;fe(qm,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function pw(n,e,t){const r=Le(n);let s=Ve.min(),a=He();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,y){const E=Le(f),_=E.Ms.get(y);return _!==void 0?te.resolve(E.Fs.get(_)):E.hi.getTargetData(m,y)})(r,u,Gr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:Ve.min(),t?a:He()))).next((d=>(Px(r,pk(e),d),{documents:d,qs:a})))))}function Px(n,e,t){let r=n.xs.get(e)||Ve.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class mw{constructor(){this.activeTargetIds=wk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kx{constructor(){this.Fo=new mw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new mw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="ConnectivityMonitor";class vw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(gw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(gw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Gp(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="RestConnection",Nx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ox{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=Gp(),d=this.Go(e,t.toUriEncodedString());fe(lp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),y=Oi(m);return this.jo(e,d,f,r,y).then((E=>(fe(lp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Es(lp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",r),E}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Nx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class Vx extends Ox{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=Gp();return new Promise(((d,f)=>{const m=new zE;m.setWithCredentials(!0),m.listenOnce(BE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Zc.NO_ERROR:const E=m.getResponseJson();fe(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Zc.TIMEOUT:fe(on,`RPC '${e}' ${u} timed out`),f(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const _=m.getStatus();if(fe(on,`RPC '${e}' ${u} failed with status:`,_,"response text:",m.getResponseText()),_>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const N=R==null?void 0:R.error;if(N&&N.status&&N.message){const O=(function($){const G=$.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(G)>=0?G:ee.UNKNOWN})(N.status);f(new he(O,N.message))}else f(new he(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new he(ee.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{fe(on,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(s);fe(on,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",y,r,15)}))}P_(e,t,r){const s=Gp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=WE(),d=HE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");fe(on,`Creating RPC '${e}' stream ${s}: ${y}`,f);const E=u.createWebChannel(y,f);this.T_(E);let _=!1,R=!1;const N=new Dx({Ho:A=>{R?fe(on,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(_||(fe(on,`Opening RPC '${e}' stream ${s} transport.`),E.open(),_=!0),fe(on,`RPC '${e}' stream ${s} sending:`,A),E.send(A))},Yo:()=>E.close()}),O=(A,$,G)=>{A.listen($,(Q=>{try{G(Q)}catch(j){setTimeout((()=>{throw j}),0)}}))};return O(E,kl.EventType.OPEN,(()=>{R||(fe(on,`RPC '${e}' stream ${s} transport opened.`),N.s_())})),O(E,kl.EventType.CLOSE,(()=>{R||(R=!0,fe(on,`RPC '${e}' stream ${s} transport closed`),N.__(),this.I_(E))})),O(E,kl.EventType.ERROR,(A=>{R||(R=!0,Es(on,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),N.__(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),O(E,kl.EventType.MESSAGE,(A=>{var $;if(!R){const G=A.data[0];tt(!!G,16349);const Q=G,j=(Q==null?void 0:Q.error)||(($=Q[0])===null||$===void 0?void 0:$.error);if(j){fe(on,`RPC '${e}' stream ${s} received error:`,j);const B=j.status;let J=(function(P){const D=Nt[P];if(D!==void 0)return bT(D)})(B),b=j.message;J===void 0&&(J=ee.INTERNAL,b="Unknown error status: "+B+" with message "+j.message),R=!0,N.__(new he(J,b)),E.close()}else fe(on,`RPC '${e}' stream ${s} received:`,G),N.a_(G)}})),O(d,$E.STAT_EVENT,(A=>{A.stat===Dp.PROXY?fe(on,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Dp.NOPROXY&&fe(on,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){return new jk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="PersistentStream";class zT{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new UT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new he(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return fe(yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(fe(yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mx extends zT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Bk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ve.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Kr(u.readTime):Ve.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Wp(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=jp(f)?{documents:Wk(a,f)}:{query:qk(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=PT(a,u.resumeToken);const m=Bp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ve.min())>0){d.readTime=Ih(a,u.snapshotVersion.toTimestamp());const m=Bp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=Kk(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Wp(this.serializer),t.removeTarget=e,this.k_(t)}}class Lx extends zT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Hk(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Wp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>$k(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{}class jx extends Fx{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,$p(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ee.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,$p(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Ux{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ki(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class zx{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Co(this)&&(fe(_o,"Restarting streams for network reachability change."),await(async function(f){const m=Le(f);m.Ia.add(4),await mu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await sd(m)})(this))}))})),this.Aa=new Ux(r,s)}}async function sd(n){if(Co(n))for(const e of n.da)await e(!0)}async function mu(n){for(const e of n.da)await e(!1)}function BT(n,e){const t=Le(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Xm(t)?Qm(t):Ma(t).x_()&&Km(t,e))}function Gm(n,e){const t=Le(n),r=Ma(t);t.Ta.delete(e),r.x_()&&$T(t,e),t.Ta.size===0&&(r.x_()?r.B_():Co(t)&&t.Aa.set("Unknown"))}function Km(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).H_(e)}function $T(n,e){n.Ra.$e(e),Ma(n).Y_(e)}function Qm(n){n.Ra=new Vk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Aa.aa()}function Xm(n){return Co(n)&&!Ma(n).M_()&&n.Ta.size>0}function Co(n){return Le(n).Ia.size===0}function HT(n){n.Ra=void 0}async function Bx(n){n.Aa.set("Online")}async function $x(n){n.Ta.forEach(((e,t)=>{Km(n,e)}))}async function Hx(n,e){HT(n),Xm(n)?(n.Aa.la(e),Qm(n)):n.Aa.set("Unknown")}async function Wx(n,e,t){if(n.Aa.set("Online"),e instanceof RT&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){fe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(n,r)}else if(e instanceof rh?n.Ra.Ye(e):e instanceof AT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ve.min()))try{const r=await jT(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ta.get(m);y&&a.Ta.set(m,y.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const y=a.Ta.get(f);if(!y)return;a.Ta.set(f,y.withResumeToken(en.EMPTY_BYTE_STRING,y.snapshotVersion)),$T(a,f);const E=new ps(y.target,f,m,y.sequenceNumber);Km(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){fe(_o,"Failed to raise snapshot:",r),await bh(n,r)}}async function bh(n,e,t){if(!Va(e))throw e;n.Ia.add(1),await mu(n),n.Aa.set("Offline"),t||(t=()=>jT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(_o,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await sd(n)}))}function WT(n,e){return e().catch((t=>bh(n,t,e)))}async function od(n){const e=Le(n),t=bs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Nm;for(;qx(e);)try{const s=await Ax(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,Gx(e,s)}catch(s){await bh(e,s)}qT(e)&&GT(e)}function qx(n){return Co(n)&&n.Pa.length<10}function Gx(n,e){n.Pa.push(e);const t=bs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function qT(n){return Co(n)&&!bs(n).M_()&&n.Pa.length>0}function GT(n){bs(n).start()}async function Kx(n){bs(n).na()}async function Qx(n){const e=bs(n);for(const t of n.Pa)e.X_(t.mutations)}async function Xx(n,e,t){const r=n.Pa.shift(),s=Um.from(r,e,t);await WT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await od(n)}async function Yx(n,e){e&&bs(n).Z_&&await(async function(r,s){if((function(u){return Ok(u)&&u!==ee.ABORTED})(s.code)){const a=r.Pa.shift();bs(r).N_(),await WT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await od(r)}})(n,e),qT(n)&&GT(n)}async function _w(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),fe(_o,"RemoteStore received new credentials");const r=Co(t);t.Ia.add(3),await mu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await sd(t)}async function Jx(n,e){const t=Le(n);e?(t.Ia.delete(2),await sd(t)):e||(t.Ia.add(2),await mu(t),t.Aa.set("Unknown"))}function Ma(n){return n.Va||(n.Va=(function(t,r,s){const a=Le(t);return a.ia(),new Mx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Bx.bind(null,n),e_:$x.bind(null,n),n_:Hx.bind(null,n),J_:Wx.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Xm(n)?Qm(n):n.Aa.set("Unknown")):(await n.Va.stop(),HT(n))}))),n.Va}function bs(n){return n.ma||(n.ma=(function(t,r,s){const a=Le(t);return a.ia(),new Lx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Kx.bind(null,n),n_:Yx.bind(null,n),ea:Qx.bind(null,n),ta:Xx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await od(n)):(await n.ma.stop(),n.Pa.length>0&&(fe(_o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new Ym(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(n,e){if(ki("AsyncQueue",`${e}: ${n}`),Va(n))return new he(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=xl(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new _a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.fa=new vt(Se.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):xe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Aa{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Aa(e,t,_a.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class eN{constructor(){this.queries=Ew(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=Le(t),a=s.queries;s.queries=Ew(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function Ew(){return new Io((n=>pT(n)),Zh)}async function KT(n,e){const t=Le(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new Zx,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=Jm(u,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Zm(t)}async function QT(n,e){const t=Le(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tN(n,e){const t=Le(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&Zm(t)}function nN(n,e,t){const r=Le(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function Zm(n){n.Da.forEach((e=>{e.next()}))}var Kp,Tw;(Tw=Kp||(Kp={})).Fa="default",Tw.Cache="cache";class XT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class rN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=He(),this.mutatedKeys=He(),this.Xa=mT(e),this.eu=new _a(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new ww,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const _=s.get(y),R=ed(this.query,E)?E:null,N=!!_&&this.mutatedKeys.has(_.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let A=!1;_&&R?_.data.isEqual(R.data)?N!==O&&(r.track({type:3,doc:R}),A=!0):this.iu(_,R)||(r.track({type:2,doc:R}),A=!0,(f&&this.Xa(R,f)>0||m&&this.Xa(R,m)<0)&&(d=!0)):!_&&R?(r.track({type:0,doc:R}),A=!0):_&&!R&&(r.track({type:1,doc:_}),A=!0,(f||m)&&(d=!0)),A&&(R?(u=u.add(R),a=O?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,E)=>(function(R,N){const O=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{At:A})}};return O(R)-O(N)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new Aa(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ww,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=He(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new JT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new YT(r))})),t}uu(e){this.Ha=e.qs,this.Za=He();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Aa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const eg="SyncEngine";class iN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sN{constructor(e){this.key=e,this.lu=!1}}class oN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Io((d=>pT(d)),Zh),this.Tu=new Map,this.Iu=new Set,this.du=new vt(Se.comparator),this.Eu=new Map,this.Au=new $m,this.Ru={},this.Vu=new Map,this.mu=ba.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function aN(n,e,t=!0){const r=iS(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await ZT(r,e,t,!0),s}async function lN(n,e){const t=iS(n);await ZT(t,e,!0,!1)}async function ZT(n,e,t,r){const s=await Rx(n.localStore,Gr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await uN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&BT(n.remoteStore,s),d}async function uN(n,e,t,r,s){n.gu=(E,_,R)=>(async function(O,A,$,G){let Q=A.view.nu($);Q.Ds&&(Q=await pw(O.localStore,A.query,!1).then((({documents:b})=>A.view.nu(b,Q))));const j=G&&G.targetChanges.get(A.targetId),B=G&&G.targetMismatches.get(A.targetId)!=null,J=A.view.applyChanges(Q,O.isPrimaryClient,j,B);return Iw(O,A.targetId,J._u),J.snapshot})(n,E,_,R);const a=await pw(n.localStore,e,!0),u=new rN(e,a.qs),d=u.nu(a.documents),f=pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Iw(n,t,m._u);const y=new iN(e,t,u);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function cN(n,e,t){const r=Le(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!Zh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qp(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Gm(r.remoteStore,s.targetId),Qp(r,s.targetId)})).catch(Da)):(Qp(r,s.targetId),await qp(r.localStore,s.targetId,!0))}async function hN(n,e){const t=Le(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gm(t.remoteStore,r.targetId))}async function dN(n,e,t){const r=_N(n);try{const s=await(function(u,d){const f=Le(u),m=dt.now(),y=d.reduce(((R,N)=>R.add(N.key)),He());let E,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let N=xi(),O=He();return f.Os.getEntries(R,y).next((A=>{N=A,N.forEach((($,G)=>{G.isValidDocument()||(O=O.add($))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,N))).next((A=>{E=A;const $=[];for(const G of d){const Q=Rk(G,E.get(G.key).overlayedDocument);Q!=null&&$.push(new Ps(G.key,Q,oT(Q.value.mapValue),br.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,$,d)})).next((A=>{_=A;const $=A.applyToLocalDocumentSet(E,O);return f.documentOverlayCache.saveOverlays(R,A.batchId,$)}))})).then((()=>({batchId:_.batchId,changes:vT(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new vt(ze)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await gu(r,s.changes),await od(r.remoteStore)}catch(s){const a=Jm(s,"Failed to persist write");t.reject(a)}}async function eS(n,e){const t=Le(n);try{const r=await Cx(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?tt(u.lu,14607):s.removedDocuments.size>0&&(tt(u.lu,42227),u.lu=!1))})),await gu(t,r,e)}catch(r){await Da(r)}}function Sw(n,e,t){const r=Le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=Le(u);f.onlineState=d;let m=!1;f.queries.forEach(((y,E)=>{for(const _ of E.wa)_.va(d)&&(m=!0)})),m&&Zm(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fN(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new vt(Se.comparator);u=u.insert(a,un.newNoDocument(a,Ve.min()));const d=He().add(a),f=new rd(Ve.min(),new Map,new vt(ze),u,d);await eS(r,f),r.du=r.du.remove(a),r.Eu.delete(e),tg(r)}else await qp(r.localStore,e,!1).then((()=>Qp(r,e,t))).catch(Da)}async function pN(n,e){const t=Le(n),r=e.batch.batchId;try{const s=await Ix(t.localStore,e);nS(t,r,null),tS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gu(t,s)}catch(s){await Da(s)}}async function mN(n,e,t){const r=Le(n);try{const s=await(function(u,d){const f=Le(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next((E=>(tt(E!==null,37113),y=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);nS(r,e,t),tS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gu(r,s)}catch(s){await Da(s)}}function tS(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function nS(n,e,t){const r=Le(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Qp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||rS(n,r)}))}function rS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),tg(n))}function Iw(n,e,t){for(const r of t)r instanceof YT?(n.Au.addReference(r.key,e),gN(n,r)):r instanceof JT?(fe(eg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||rS(n,r.key)):xe(19791,{yu:r})}function gN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(fe(eg,"New document in limbo: "+t),n.Iu.add(r),tg(n))}function tg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Se(lt.fromString(e)),r=n.mu.next();n.Eu.set(r,new sN(t)),n.du=n.du.insert(t,r),BT(n.remoteStore,new ps(Gr(Lm(t.path)),r,"TargetPurposeLimboResolution",Xh.ue))}}async function gu(n,e,t){const r=Le(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const E=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Wm.Es(f.targetId,m);a.push(E)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const y=Le(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(m,(_=>te.forEach(_.Is,(R=>y.persistence.referenceDelegate.addReference(E,_.targetId,R))).next((()=>te.forEach(_.ds,(R=>y.persistence.referenceDelegate.removeReference(E,_.targetId,R)))))))))}catch(E){if(!Va(E))throw E;fe(qm,"Failed to update sequence numbers: "+E)}for(const E of m){const _=E.targetId;if(!E.fromCache){const R=y.Fs.get(_),N=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(N);y.Fs=y.Fs.insert(_,O)}}})(r.localStore,a))}async function vN(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){fe(eg,"User change. New user:",e.toKey());const r=await FT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new he(ee.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(t,r.Bs)}}function yN(n,e){const t=Le(n),r=t.Eu.get(e);if(r&&r.lu)return He().add(r.key);{let s=He();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function iS(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fN.bind(null,e),e.hu.J_=tN.bind(null,e.eventManager),e.hu.pu=nN.bind(null,e.eventManager),e}function _N(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mN.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Sx(this.persistence,new wx,e.initialUser,this.serializer)}Du(e){return new LT(Hm.Vi,this.serializer)}bu(e){return new kx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class wN extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){tt(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new LT((r=>Ch.Vi(r,t)),this.serializer)}}class Xp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await Jx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eN})()}createDatastore(e){const t=id(e.databaseInfo.databaseId),r=(function(a){return new Vx(a)})(e.databaseInfo);return(function(a,u,d,f){return new jx(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new zx(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Sw(this.syncEngine,t,0)),(function(){return vw.C()?new vw:new xx})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,y){const E=new oN(s,a,u,d,f,m);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Le(s);fe(_o,"RemoteStore shutting down."),a.Ia.add(5),await mu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Xp.provider={build:()=>new Xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="FirestoreClient";class EN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{fe(As,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(fe(As,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Jm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cp(n,e){n.asyncQueue.verifyOperationInProgress(),fe(As,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await FT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Es("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Es("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Cw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await TN(n);fe(As,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>_w(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>_w(e.remoteStore,s))),n._onlineComponents=e}async function TN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(As,"Using user provided OfflineComponentProvider");try{await cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Es("Error using user provided cache. Falling back to memory cache: "+t),await cp(n,new Ah)}}else fe(As,"Using default OfflineComponentProvider"),await cp(n,new wN(void 0));return n._offlineComponents}async function oS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(As,"Using user provided OnlineComponentProvider"),await Cw(n,n._uninitializedComponentsProvider._online)):(fe(As,"Using default OnlineComponentProvider"),await Cw(n,new Xp))),n._onlineComponents}function SN(n){return oS(n).then((e=>e.syncEngine))}async function aS(n){const e=await oS(n),t=e.eventManager;return t.onListen=aN.bind(null,e.syncEngine),t.onUnlisten=cN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hN.bind(null,e.syncEngine),t}function IN(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new sS({next:_=>{y.Ou(),u.enqueueAndForget((()=>QT(a,E)));const R=_.docs.has(d);!R&&_.fromCache?m.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&f&&f.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),E=new XT(Lm(d.path),y,{includeMetadataChanges:!0,ka:!0});return KT(a,E)})(await aS(n),n.asyncQueue,e,t,r))),r.promise}function CN(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new sS({next:_=>{y.Ou(),u.enqueueAndForget((()=>QT(a,E))),_.fromCache&&f.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),E=new XT(d,y,{includeMetadataChanges:!0,ka:!0});return KT(a,E)})(await aS(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firestore.googleapis.com",Aw=!0;class Rw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uS,this.ssl=Aw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Aw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rx)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new NP;switch(r.type){case"firstParty":return new MP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bw.get(t);r&&(fe("ComponentProvider","Removing Datastore"),bw.delete(t),r.terminate())})(this),Promise.resolve()}}function bN(n,e,t,r={}){var s;n=Zr(n,ad);const a=Oi(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Bh(`https://${f}`),$h("Firestore",!0)),u.host!==uS&&u.host!==f&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!go(m,d)&&(n._setSettings(m),r.mockUserToken)){let y,E;if(typeof r.mockUserToken=="string")y=r.mockUserToken,E=ln.MOCK_USER;else{y=Z0(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(_)}n._authCredentials=new OP(new GE(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class Pt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hu(t,Pt._jsonSchema))return new Pt(e,r||null,new Se(lt.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Vt("string",Pt._jsonSchemaVersion),referencePath:Vt("string")};class _s extends La{constructor(e,t,r){super(e,t,Lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Se(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function cS(n,e,...t){if(n=ut(n),QE("collection","path",e),n instanceof ad){const r=lt.fromString(e,...t);return z_(r),new _s(n,null,r)}{if(!(n instanceof Pt||n instanceof _s))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return z_(r),new _s(n.firestore,null,r)}}function ks(n,e,...t){if(n=ut(n),arguments.length===1&&(e=xm.newId()),QE("doc","path",e),n instanceof ad){const r=lt.fromString(e,...t);return U_(r),new Pt(n,null,new Se(r))}{if(!(n instanceof Pt||n instanceof _s))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return U_(r),new Pt(n.firestore,n instanceof _s?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="AsyncQueue";class kw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new UT(this,"async_queue_retry"),this.oc=()=>{const r=up();r&&fe(Pw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=up();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=up();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ii;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;fe(Pw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,ki("INTERNAL UNHANDLED ERROR: ",xw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Ym.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&xe(47125,{hc:xw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function xw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Fa extends ad{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new kw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kw(e),this._firestoreClient=void 0,await e}}}function AN(n,e){const t=typeof n=="object"?n:Hh(),r=typeof n=="string"?n:_h,s=au(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=gm("firestore");a&&bN(s,...a)}return s}function ng(n){if(n._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RN(n),n._firestoreClient}function RN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,y){return new JP(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,lS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new EN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(en.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new er(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Vt("string",er._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Vt("string",Qr._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xr(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xr._jsonSchemaVersion="firestore/vectorValue/1.0",Xr._jsonSchema={type:Vt("string",Xr._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class kN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class hS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ec:n})}}class rg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(dS(this.Ec)&&PN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class xN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||id(e)}Dc(e,t,r,s=!1){return new rg({Ec:e,methodName:t,bc:r,path:Zt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ig(n){const e=n._freezeSettings(),t=id(n._databaseId);return new xN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NN(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);og("Data must be an object, but it was:",u,r);const d=fS(r,u);let f,m;if(a.merge)f=new zn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const _=Yp(e,E,t);if(!u.contains(_))throw new he(ee.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);mS(y,_)||y.push(_)}f=new zn(y),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new kN(new kn(d),f,m)}class cd extends ud{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class sg extends ud{_toFieldTransform(e){return new Ik(e.path,new Xl)}isEqual(e){return e instanceof sg}}function ON(n,e,t,r){const s=n.Dc(1,e,t);og("Data must be an object, but it was:",s,r);const a=[],u=kn.empty();Rs(r,((f,m)=>{const y=ag(e,f,t);m=ut(m);const E=s.gc(y);if(m instanceof cd)a.push(y);else{const _=vu(m,E);_!=null&&(a.push(y),u.set(y,_))}}));const d=new zn(a);return new hS(u,d,s.fieldTransforms)}function DN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[Yp(e,r,t)],f=[s];if(a.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)d.push(Yp(e,a[_])),f.push(a[_+1]);const m=[],y=kn.empty();for(let _=d.length-1;_>=0;--_)if(!mS(m,d[_])){const R=d[_];let N=f[_];N=ut(N);const O=u.gc(R);if(N instanceof cd)m.push(R);else{const A=vu(N,O);A!=null&&(m.push(R),y.set(R,A))}}const E=new zn(m);return new hS(y,E,u.fieldTransforms)}function VN(n,e,t,r=!1){return vu(t,n.Dc(r?4:3,e))}function vu(n,e){if(pS(n=ut(n)))return og("Unsupported field value:",e,n),fS(n,e);if(n instanceof ud)return(function(r,s){if(!dS(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=vu(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ek(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=dt.fromDate(r);return{timestampValue:Ih(s.serializer,a)}}if(r instanceof dt){const a=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(s.serializer,a)}}if(r instanceof Qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof er)return{bytesValue:PT(s.serializer,r._byteString)};if(r instanceof Pt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xr)return(function(u,d){return{mapValue:{fields:{[iT]:{stringValue:sT},[wh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Fm(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Qh(r)}`)})(n,e)}function fS(n,e){const t={};return JE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(n,((r,s)=>{const a=vu(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function pS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Qr||n instanceof er||n instanceof Pt||n instanceof ud||n instanceof Xr)}function og(n,e,t){if(!pS(t)||!XE(t)){const r=Qh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Yp(n,e,t){if((e=ut(e))instanceof ld)return e._internalPath;if(typeof e=="string")return ag(n,e);throw Rh("Field path arguments must be of type string or ",n,!1,void 0,t)}const MN=new RegExp("[~\\*/\\[\\]]");function ag(n,e,t){if(e.search(MN)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new he(ee.INVALID_ARGUMENT,d+n+f)}function mS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LN extends gS{data(){return super.data()}}function lg(n,e){return typeof e=="string"?ag(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class jN extends ug{}function vS(n,e,...t){let r=[];e instanceof ug&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof cg)).length,d=a.filter((f=>f instanceof hd)).length;if(u>1||u>0&&d>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class hd extends jN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hd(e,t,r)}_apply(e){const t=this._parse(e);return _S(e._query,t),new La(e.firestore,e.converter,Up(e._query,t))}_parse(e){const t=ig(e.firestore);return(function(a,u,d,f,m,y,E){let _;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Ow(E,y);const N=[];for(const O of E)N.push(Nw(f,a,O));_={arrayValue:{values:N}}}else _=Nw(f,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Ow(E,y),_=VN(d,u,E,y==="in"||y==="not-in");return Dt.create(m,y,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yS(n,e,t){const r=e,s=lg("where",n);return hd._create(s,r,t)}class cg extends ug{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)_S(u,f),u=Up(u,f)})(e._query,t),new La(e.firestore,e.converter,Up(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Nw(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fT(e)&&t.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(lt.fromString(t));if(!Se.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Q_(n,new Se(r))}if(t instanceof Pt)return Q_(n,t._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(t)}.`)}function Ow(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _S(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UN{convertValue(e,t="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rs(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[wh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Rt(u.doubleValue)));return new Xr(a)}convertGeoPoint(e){return new Qr(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const t=Ss(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);tt(VT(r),9688,{name:e});const s=new Kl(r.get(1),r.get(3)),a=new Se(r.popFirst(5));return s.isEqual(t)||ki(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends gS{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:Vt("string",po._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class ih extends po{data(e={}){return super.data(e)}}class wa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ol(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ih(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:BN(d.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){n=Zr(n,Pt);const e=Zr(n.firestore,Fa);return IN(ng(e),n._key).then((t=>WN(e,n,t)))}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:Vt("string",wa._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class wS extends UN{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}function ES(n){n=Zr(n,La);const e=Zr(n.firestore,Fa),t=ng(e),r=new wS(e);return FN(n._query),CN(t,n._query).then((s=>new wa(e,r,n,s)))}function hg(n,e,t){n=Zr(n,Pt);const r=Zr(n.firestore,Fa),s=zN(n.converter,e,t);return dg(r,[NN(ig(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,br.none())])}function $N(n,e,t,...r){n=Zr(n,Pt);const s=Zr(n.firestore,Fa),a=ig(s);let u;return u=typeof(e=ut(e))=="string"||e instanceof ld?DN(a,"updateDoc",n._key,e,t,r):ON(a,"updateDoc",n._key,e),dg(s,[u.toMutation(n._key,br.exists(!0))])}function HN(n){return dg(Zr(n.firestore,Fa),[new jm(n._key,br.none())])}function dg(n,e){return(function(r,s){const a=new Ii;return r.asyncQueue.enqueueAndForget((async()=>dN(await SN(r),s,a))),a.promise})(ng(n),e)}function WN(n,e,t){const r=t.docs.get(e._key),s=new wS(n);return new po(n,s,e._key,r,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}function Jp(){return new sg("serverTimestamp")}(function(e,t=!0){(function(s){Oa=s})(So),ws(new Ai("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Fa(new DP(r.getProvider("auth-internal")),new LP(u,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(m.options.projectId,y)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),tr(V_,M_,e),tr(V_,M_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="type.googleapis.com/google.protobuf.Int64Value",GN="type.googleapis.com/google.protobuf.UInt64Value";function TS(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ph(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ph(e));if(typeof n=="function"||typeof n=="object")return TS(n,e=>Ph(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ra(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case qN:case GN:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ra(e)):typeof n=="function"||typeof n=="object"?TS(n,e=>Ra(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xn extends Rr{constructor(e,t,r){super(`${fg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,xn.prototype)}}function KN(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kh(n,e){let t=KN(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Dw[u])return new xn("internal","internal");t=Dw[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=Ra(s))}}catch{}return t==="ok"?null:new xn(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="us-central1",XN=/^data: (.*?)(?:\n|$)/;function YN(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new xn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class JN{constructor(e,t,r,s,a=Zp,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new QN(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Zp}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function ZN(n,e,t){const r=Oi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Bh(n.emulatorOrigin),$h("Functions",!0))}function eO(n,e,t){const r=s=>nO(n,e,s,{});return r.stream=(s,a)=>iO(n,e,s,a),r}async function tO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function SS(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function nO(n,e,t,r){const s=n._url(e);return rO(n,s,t,r)}async function rO(n,e,t,r){t=Ph(t);const s={data:t},a=await SS(n,r),u=r.timeout||7e4,d=YN(u),f=await Promise.race([tO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new xn("cancelled","Firebase Functions instance was deleted.");const m=kh(f.status,f.json);if(m)throw m;if(!f.json)throw new xn("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new xn("internal","Response is missing data field.");return{data:Ra(y)}}function iO(n,e,t,r){const s=n._url(e);return sO(n,s,t,r||{})}async function sO(n,e,t,r){var s;t=Ph(t);const a={data:t},u=await SS(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const O=new xn("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const N=kh(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,m;const y=new Promise((R,N)=>{f=R,m=N});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const R=new xn("cancelled","Request was cancelled.");m(R)});const E=d.body.getReader(),_=oO(E,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const R=_.getReader();return{async next(){const{value:N,done:O}=await R.read();return{value:N,done:O}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:y}}function oO(n,e,t,r){const s=(u,d)=>{const f=u.match(XN);if(!f)return;const m=f[1];try{const y=JSON.parse(m);if("result"in y){e(Ra(y.result));return}if("message"in y){d.enqueue(Ra(y.message));return}if("error"in y){const E=kh(0,y);d.error(E),t(E);return}}catch(y){if(y instanceof xn){d.error(y),t(y);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new xn("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:y}=await n.read();if(y){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const _=new xn("cancelled","Request was cancelled");u.error(_),t(_),await n.cancel();return}d+=a.decode(m,{stream:!0});const E=d.split(`
`);d=E.pop()||"";for(const _ of E)_.trim()&&s(_.trim(),u);return f()}catch(m){const y=m instanceof xn?m:kh(0,null);u.error(y),t(y)}}},cancel(){return n.cancel()}})}const Vw="@firebase/functions",Mw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="auth-internal",lO="app-check-internal",uO="messaging-internal";function cO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(aO),u=t.getProvider(uO),d=t.getProvider(lO);return new JN(s,a,u,d,r)};ws(new Ai(fg,e,"PUBLIC").setMultipleInstances(!0)),tr(Vw,Mw,n),tr(Vw,Mw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n=Hh(),e=Zp){const r=au(ut(n),fg).getImmediate({identifier:e}),s=gm("functions");return s&&dO(r,...s),r}function dO(n,e,t){ZN(ut(n),e,t)}function ti(n,e,t){return eO(ut(n),e)}cO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firebasestorage.googleapis.com",CS="storageBucket",fO=120*1e3,pO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Rr{constructor(e,t,r=0){super(hp(e),`Firebase Storage: ${t} (${hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function hp(n){return"storage/"+n}function pg(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(Et.UNKNOWN,n)}function mO(n){return new Tt(Et.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function gO(n){return new Tt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(Et.UNAUTHENTICATED,n)}function yO(){return new Tt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _O(n){return new Tt(Et.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function wO(){return new Tt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EO(){return new Tt(Et.CANCELED,"User canceled the upload/download.")}function TO(n){return new Tt(Et.INVALID_URL,"Invalid URL '"+n+"'.")}function SO(n){return new Tt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function IO(){return new Tt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CS+"' property when initializing the app?")}function CO(){return new Tt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bO(){return new Tt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AO(n){return new Tt(Et.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function em(n){return new Tt(Et.INVALID_ARGUMENT,n)}function bS(){return new Tt(Et.APP_DELETED,"The Firebase app was deleted.")}function RO(n){return new Tt(Et.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zl(n,e){return new Tt(Et.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bl(n){throw new Tt(Et.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yn.makeFromUrl(e,t)}catch{return new yn(e,"")}if(r.path==="")return r;throw SO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(j){j.path_=decodeURIComponent(j.path)}const y="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${y}/b/${s}/o${_}`,"i"),N={bucket:1,path:3},O=t===IS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",$=new RegExp(`^https?://${O}/${s}/${A}`,"i"),Q=[{regex:d,indices:f,postModify:a},{regex:R,indices:N,postModify:m},{regex:$,indices:{bucket:1,path:2},postModify:m}];for(let j=0;j<Q.length;j++){const B=Q[j],J=B.regex.exec(e);if(J){const b=J[B.indices.bucket];let I=J[B.indices.path];I||(I=""),r=new yn(b,I),B.postModify(r);break}}if(r==null)throw TO(e);return r}}class PO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function y(...A){m||(m=!0,e.apply(null,A))}function E(A){s=setTimeout(()=>{s=null,n(R,f())},A)}function _(){a&&clearTimeout(a)}function R(A,...$){if(m){_();return}if(A){_(),y.call(null,A,...$);return}if(f()||u){_(),y.call(null,A,...$);return}r<64&&(r*=2);let Q;d===1?(d=2,Q=0):Q=(r+Math.random())*1e3,E(Q)}let N=!1;function O(A){N||(N=!0,_(),!m&&(s!==null?(A||(d=2),clearTimeout(s),E(0)):A||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,O(!0)},t),O}function xO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n){return n!==void 0}function OO(n){return typeof n=="object"&&!Array.isArray(n)}function mg(n){return typeof n=="string"||n instanceof String}function Lw(n){return gg()&&n instanceof Blob}function gg(){return typeof Blob<"u"}function tm(n,e,t,r){if(r<e)throw em(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw em(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function AS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var mo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mo||(mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t,r,s,a,u,d,f,m,y,E,_=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=E,this.retry=_,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,O)=>{this.resolve_=N,this.reject_=O,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===mo.NO_ERROR,f=a.getStatus();if(!d||DO(f,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===mo.ABORT;r(!1,new zc(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new zc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());NO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=pg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?bS():EO();u(f)}else{const f=wO();u(f)}};this.canceled_?t(!1,new zc(!1,null,!0)):this.backoffId_=kO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function MO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function LO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function UO(n,e,t,r,s,a,u=!0,d=!1){const f=AS(n.urlParams),m=n.url+f,y=Object.assign({},n.headers);return FO(y,e),MO(y,t),LO(y,a),jO(y,r),new VO(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BO(...n){const e=zO();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(gg())return new Blob(n);throw new Tt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $O(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(n){if(typeof atob>"u")throw AO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dp{constructor(e,t){this.data=e,this.contentType=t||null}}function WO(n,e){switch(n){case Wr.RAW:return new dp(RS(e));case Wr.BASE64:case Wr.BASE64URL:return new dp(PS(n,e));case Wr.DATA_URL:return new dp(GO(e),KO(e))}throw pg()}function RS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qO(n){let e;try{e=decodeURIComponent(n)}catch{throw zl(Wr.DATA_URL,"Malformed data URL.")}return RS(e)}function PS(n,e){switch(n){case Wr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=HO(e)}catch(s){throw s.message.includes("polyfill")?s:zl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class kS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw zl(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=QO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GO(n){const e=new kS(n);return e.base64?PS(Wr.BASE64,e.rest):qO(e.rest)}function KO(n){return new kS(n).contentType}function QO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){let r=0,s="";Lw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Lw(this.data_)){const r=this.data_,s=$O(r,e,t);return s===null?null:new ds(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ds(r,!0)}}static getBlob(...e){if(gg()){const t=e.map(r=>r instanceof ds?r.data_:r);return new ds(BO.apply(null,t))}else{const t=e.map(u=>mg(u)?WO(Wr.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new ds(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n){let e;try{e=JSON.parse(n)}catch{return null}return OO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function YO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function xS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n,e){return e}class vn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||JO}}let Bc=null;function ZO(n){return!mg(n)||n.length<2?n:xS(n)}function NS(){if(Bc)return Bc;const n=[];n.push(new vn("bucket")),n.push(new vn("generation")),n.push(new vn("metageneration")),n.push(new vn("name","fullPath",!0));function e(a,u){return ZO(u)}const t=new vn("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new vn("size");return s.xform=r,n.push(s),n.push(new vn("timeCreated")),n.push(new vn("updated")),n.push(new vn("md5Hash",null,!0)),n.push(new vn("cacheControl",null,!0)),n.push(new vn("contentDisposition",null,!0)),n.push(new vn("contentEncoding",null,!0)),n.push(new vn("contentLanguage",null,!0)),n.push(new vn("contentType",null,!0)),n.push(new vn("metadata","customMetadata",!0)),Bc=n,Bc}function eD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new yn(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function tD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return eD(r,n),r}function OS(n,e,t){const r=vg(e);return r===null?null:tD(n,r,t)}function nD(n,e,t,r){const s=vg(e);if(s===null||!mg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,E=n.fullPath,_="/b/"+u(y)+"/o/"+u(E),R=yu(_,t,r),N=AS({alt:"media",token:m});return R+N})[0]}function rD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="prefixes",jw="items";function iD(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Fw])for(const s of t[Fw]){const a=s.replace(/\/$/,""),u=n._makeStorageReference(new yn(e,a));r.prefixes.push(u)}if(t[jw])for(const s of t[jw]){const a=n._makeStorageReference(new yn(e,s.name));r.items.push(a)}return r}function sD(n,e,t){const r=vg(t);return r===null?null:iD(n,e,r)}class fd{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n){if(!n)throw pg()}function oD(n,e){function t(r,s){const a=OS(n,s,e);return yg(a!==null),a}return t}function aD(n,e){function t(r,s){const a=sD(n,e,s);return yg(a!==null),a}return t}function lD(n,e){function t(r,s){const a=OS(n,s,e);return yg(a!==null),nD(a,s,n.host,n._protocol)}return t}function _g(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=yO():s=vO():t.getStatus()===402?s=gO(n.bucket):t.getStatus()===403?s=_O(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function DS(n){const e=_g(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=mO(n.path)),a.serverResponse=s.serverResponse,a}return t}function uD(n,e,t,r,s){const a={};e.isRoot?a.prefix="":a.prefix=e.path+"/",t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),s&&(a.maxResults=s);const u=e.bucketOnlyServerUrl(),d=yu(u,n.host,n._protocol),f="GET",m=n.maxOperationRetryTime,y=new fd(d,f,aD(n,e.bucket),m);return y.urlParams=a,y.errorHandler=_g(e),y}function cD(n,e,t){const r=e.fullServerUrl(),s=yu(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new fd(s,a,lD(n,t),u);return d.errorHandler=DS(e),d}function hD(n,e){const t=e.fullServerUrl(),r=yu(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new fd(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=DS(e),d}function dD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function fD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=dD(null,e)),r}function pD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let Q="";for(let j=0;j<2;j++)Q=Q+Math.random().toString().slice(2);return Q}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=fD(e,r,s),y=rD(m,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,_=`\r
--`+f+"--",R=ds.getBlob(E,r,_);if(R===null)throw CO();const N={name:m.fullPath},O=yu(a,n.host,n._protocol),A="POST",$=n.maxUploadRetryTime,G=new fd(O,A,oD(n,t),$);return G.urlParams=N,G.headers=u,G.body=R.uploadData(),G.errorHandler=_g(e),G}class mD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw bl("cannot .send() more than once");if(Oi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gD extends mD{initXhr(){this.xhr_.responseType="text"}}function pd(){return new gD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this._service=e,t instanceof yn?this._location=t:this._location=yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wo(e,t)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xS(this._location.path)}get storage(){return this._service}get parent(){const e=XO(this._location.path);if(e===null)return null;const t=new yn(this._location.bucket,e);return new wo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RO(e)}}function vD(n,e,t){n._throwIfRoot("uploadBytes");const r=pD(n.storage,n._location,NS(),new ds(e,!0),t);return n.storage.makeRequestWithTokens(r,pd).then(s=>({metadata:s,ref:n}))}function yD(n){const e={prefixes:[],items:[]};return VS(n,e).then(()=>e)}async function VS(n,e,t){const s=await _D(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await VS(n,e,s.nextPageToken)}function _D(n,e){e!=null&&typeof e.maxResults=="number"&&tm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=uD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pd)}function wD(n){n._throwIfRoot("getDownloadURL");const e=cD(n.storage,n._location,NS());return n.storage.makeRequestWithTokens(e,pd).then(t=>{if(t===null)throw bO();return t})}function ED(n){n._throwIfRoot("deleteObject");const e=hD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pd)}function TD(n,e){const t=YO(n._location.path,e),r=new yn(n._location.bucket,t);return new wo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){return/^[A-Za-z]+:\/\//.test(n)}function ID(n,e){return new wo(n,e)}function MS(n,e){if(n instanceof wg){const t=n;if(t._bucket==null)throw IO();const r=new wo(t,t._bucket);return e!=null?MS(r,e):r}else return e!==void 0?TD(n,e):n}function CD(n,e){if(e&&SD(e)){if(n instanceof wg)return ID(n,e);throw em("To use ref(service, url), the first argument must be a Storage instance.")}else return MS(n,e)}function Uw(n,e){const t=e==null?void 0:e[CS];return t==null?null:yn.makeFromBucketSpec(t,n)}function bD(n,e,t,r={}){n.host=`${e}:${t}`;const s=Oi(e);s&&(Bh(`https://${n.host}/b`),$h("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:Z0(a,n.app.options.projectId))}class wg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=IS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fO,this._maxUploadRetryTime=pO,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=Uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new PO(bS());{const u=UO(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const zw="@firebase/storage",Bw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="storage";function AD(n,e,t){return n=ut(n),vD(n,e,t)}function RD(n){return n=ut(n),yD(n)}function PD(n){return n=ut(n),wD(n)}function FS(n){return n=ut(n),ED(n)}function Eg(n,e){return n=ut(n),CD(n,e)}function kD(n=Hh(),e){n=ut(n);const r=au(n,LS).getImmediate({identifier:e}),s=gm("storage");return s&&xD(r,...s),r}function xD(n,e,t,r={}){bD(n,e,t,r)}function ND(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new wg(t,r,s,e,So)}function OD(){ws(new Ai(LS,ND,"PUBLIC").setMultipleInstances(!0)),tr(zw,Bw,""),tr(zw,Bw,"esm2017")}OD();const DD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},md=nE(DD),_n=kP(md),ni=AN(md),Tg=kD(md),ri=hO(md,"us-central1");yR(_n,RE);ti(ri,"bootstrapFirstAdmin");ti(ri,"setUserRole");const VD=ti(ri,"ensureCoachAccess"),MD=ti(ri,"acceptCoachTrial"),LD=ti(ri,"getCoachAccessState"),FD=ti(ri,"completeClientOnboarding"),jD=ti(ri,"listCoachesForSupervisor"),UD=ti(ri,"activateCoachSubscription"),zD=ti(ri,"renewCoachSubscription"),BD=ti(ri,"disableCoachSubscription");async function $D(){return(await VD()).data}async function jS(){return(await MD()).data}async function $w(){return(await LD()).data}async function HD(n){return(await FD(n)).data}async function WD(){return(await jD()).data}async function Hw(n){return(await UD({uid:n})).data}async function qD(n){return(await zD({uid:n})).data}async function GD(n){return(await BD({uid:n})).data}async function KD(){return _n.currentUser?_n.currentUser.getIdTokenResult(!0):null}async function US(n){const e=n??_n.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await qh(_n),null}throw t}}async function QD(n){const e=n??_n.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function zS(){return{createdAt:Jp(),updatedAt:Jp()}}function BS(){return{updatedAt:Jp()}}function bo(){var e;const n=(e=_n.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function $S(n={}){const e=bo(),t=ks(ni,"users",e);return await hg(t,{uid:e,...zS(),...n},{merge:!0}),t}async function nm(n){const e=n??bo();return dd(ks(ni,"users",e))}async function XD(n){const e=n??bo(),t=vS(cS(ni,"users"),yS("assignedCoachId","==",e));return ES(t)}async function HS(n,e){return dd(ks(ni,"users",n,"private",e))}async function YD(n,e){await hg(ks(ni,"users",n,"private","onboarding"),{...e,...BS()},{merge:!0})}async function JD(n){const e=bo(),t=ks(ni,"plans",n.clientId);return await hg(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...zS()}),t}async function WS(n,e){const t=e??bo(),r=n==="client"?"clientId":"trainerId",s=vS(cS(ni,"plans"),yS(r,"==",t));return ES(s)}async function ZD(n){const e=n??bo();return dd(ks(ni,"plans",e))}async function e2(n,e){await $N(ks(ni,"plans",n),{...e,...BS()})}async function t2(n){const e=ks(ni,"plans",n),t=await dd(e);if(t.exists()){const r=t.data(),s=i2(r.exercises);await Promise.allSettled(s.map(d=>s2(d)));const a=typeof r.trainerId=="string"?r.trainerId:"",u=typeof r.clientId=="string"?r.clientId:"";a&&u&&await o2(a,u)}await HN(e)}async function n2(n,e){const t=bo(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=r2(t,n,s);return await AD(a,e,{contentType:e.type||"application/octet-stream"}),PD(a)}function r2(n,e,t){return Eg(Tg,`workout-media/${n}/${e}/${t}`)}function i2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;Ww(r)&&e.add(r),Ww(s)&&e.add(s)}return[...e]}function Ww(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function s2(n){try{await FS(Eg(Tg,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}async function o2(n,e){const t=Eg(Tg,`workout-media/${n}/${e}`);await qS(t)}async function qS(n){try{const{items:e,prefixes:t}=await RD(n);await Promise.allSettled(e.map(r=>FS(r))),await Promise.allSettled(t.map(r=>qS(r)))}catch(e){console.warn("Unable to clear storage folder",{path:n.fullPath,error:e})}}function ja(){const[n,e]=M.useState(!0),[t,r]=M.useState(_n.currentUser),[s,a]=M.useState(null),[u,d]=M.useState(!1);return M.useEffect(()=>CE(_n,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await Sg(f);const m=await US(f);a(m),d(await QD(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await qh(_n),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),M.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const rm=new Ei;rm.setCustomParameters({prompt:"select_account"});async function Sg(n){(await nm(n.uid)).exists()||await $S({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function qw(){try{const n=await FR(_n,rm);return await Sg(n.user),{redirected:!1,user:n.user}}catch(n){if(l2(n))return await HR(_n,rm),{redirected:!0,user:null};throw n}}async function a2(){try{const n=await qR(_n);return n!=null&&n.user&&await Sg(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await qh(_n),null;throw n}}async function Ci(){return qh(_n)}function l2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function GS(n){return n.replace(/[^\d]/g,"")}const u2="393405882404".trim(),KS=GS(u2),Tr=KS.length>6;function sh(n,e){const t=GS(e??KS),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function c2(n){return n.map(e=>({id:e.id,...e.data()}))}function Xt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const zr="bw_login_intent";function h2(n){return n==="trainer"||n==="admin"}function d2(){const{user:n,role:e}=ja(),t=iu(),{showError:r}=Uh(),[s,a]=M.useState(!1),[u,d]=M.useState(""),[f,m]=M.useState(!1),[y,E]=M.useState(!1),[_,R]=M.useState(null),N=M.useRef(0),O=M.useMemo(()=>sh("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);M.useEffect(()=>{async function J(){try{await a2()}catch(b){const I=Xt(b);d(I),r(I)}}J()},[r]);async function A(J=10){if(!n)return!1;for(let b=0;b<J;b+=1){await KD();const I=await US(n);if(h2(I))return!0;await new Promise(P=>setTimeout(P,500))}return!1}async function $(){if(!n)return;const J=++N.current,b=()=>J!==N.current||y;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await $S({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),b())return;const I=await $D();if(b())return;if(I.isExpired){if(await Ci(),sessionStorage.removeItem(zr),b())return;R({mode:"expired",access:I});return}if(I.requiresTrialAcceptance){if(b())return;R({mode:"trial",access:I});return}const P=await A();if(b())return;if(!P){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(zr),t("/app/coach",{replace:!0})}catch(I){if(b())return;const P=Xt(I);d(P),r(P)}finally{b()||m(!1)}}M.useEffect(()=>{async function J(){if(!n){m(!1),y||d("");return}if(f||y)return;if(sessionStorage.getItem(zr)==="coach"){await $();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}J()},[n,e,f,y]),M.useEffect(()=>{y&&(n||(E(!1),t("/auth",{replace:!0})))},[y,n,t]);async function G(){N.current+=1,E(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(zr),R(null);try{await Ci()}catch(J){d(Xt(J)),E(!1)}}async function Q(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const J=await jS();if(J.isExpired){await Ci(),sessionStorage.removeItem(zr),R({mode:"expired",access:J});return}if(!await A()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}R(null),sessionStorage.removeItem(zr),t("/app/coach",{replace:!0})}catch(J){const b=Xt(J);d(b),r(b)}finally{a(!1)}}async function j(){a(!0),d(""),R(null);try{if(sessionStorage.setItem(zr,"client"),(await qw()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(J){const b=Xt(J);d(b),r(b)}finally{a(!1)}}async function B(){a(!0),d(""),R(null);try{sessionStorage.setItem(zr,"coach");const J=await qw();if(J.redirected){d("Ti sto reindirizzando a Google...");return}if(!J.user){d("Accesso non completato. Riprova.");return}await $()}catch(J){const b=Xt(J);d(b),r(b)}finally{a(!1)}}return(_==null?void 0:_.mode)==="trial"?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h1",{children:"Prova gratuita 15 giorni"}),T.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),T.jsx("button",{className:"btn",type:"button",disabled:s,onClick:()=>void Q(),children:s?"Attivazione...":"Accetta e continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void G(),children:"Esci"}),u?T.jsx("p",{className:"message",children:u}):null]})}):(_==null?void 0:_.mode)==="expired"?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h1",{children:"Periodo di prova terminato"}),T.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),T.jsx("a",{className:"btn btn-whatsapp",href:O,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{R(null),sessionStorage.removeItem(zr)},children:"Torna all'accesso"})]})}):n&&e&&sessionStorage.getItem(zr)!=="coach"?T.jsx(Ir,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Accedi con Google"}),T.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),T.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void j(),type:"button",children:s?"Connessione...":"Continua con Google"}),T.jsx("div",{className:"divider"}),T.jsx("h2",{children:"Sei un Coach?"}),T.jsx("p",{className:"hint",children:"Accedi o registrati come coach con Google."}),T.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void B(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach"}),u?T.jsx("p",{className:"message",children:u}):null,T.jsx(QC,{})]})})}function QS({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u;function m(y,E){const _=a===y.id;return T.jsxs("button",{className:`shell-tab shell-tab-${E} ${_?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>u==null?void 0:u(y.id),children:[y.icon?T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:y.icon}):null,T.jsx("span",{className:"shell-tab-label",children:y.label})]},`${E}-${y.id}`)}return T.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?T.jsxs("aside",{className:"shell-sidebar desktop-only",children:[T.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),T.jsx("h2",{children:e}),T.jsx("p",{className:"hint",children:t}),T.jsx("nav",{className:"shell-sidebar-nav",children:s.map(y=>m(y,"desktop"))}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Ci(),children:"Esci dal profilo"})]}):null,T.jsxs("section",{className:"shell-main",children:[T.jsxs("section",{className:"hero hero-compact",children:[T.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),T.jsx("h1",{children:e}),T.jsx("p",{className:"hero-sub",children:t}),r,f?null:T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Ci(),children:"Esci dal profilo"})]}),T.jsx("section",{className:"stack app-stack",children:d})]}),T.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?s.map(y=>m(y,"mobile")):T.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),T.jsx("span",{className:"shell-tab-label",children:"Home"})]}),T.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Ci(),children:[T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),T.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]})]})}function fp(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Gw(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function Kw(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function f2(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function p2(){const{role:n,user:e}=ja(),t=iu(),{showError:r}=Uh(),[s,a]=M.useState([]),[u,d]=M.useState(!1),[f,m]=M.useState(!0),[y,E]=M.useState(null),[_,R]=M.useState(null),[N,O]=M.useState("plan"),A="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";M.useEffect(()=>{async function B(){if(e)try{const b=(await nm(e.uid)).data();if(!(b!=null&&b.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{m(!1)}}B()},[e,t]);async function $(){d(!0);try{const B=(e==null?void 0:e.uid)??"",J=B?await nm(B):null,b=(J==null?void 0:J.data())??{},I=B?await HS(B,"onboarding"):null;R((I==null?void 0:I.data())??null);const P=Array.from(new Set([B,(b.uid??"").trim(),(b.clientId??"").trim()].filter(k=>k.length>0))),D=await Promise.allSettled(P.flatMap(k=>[WS("client",k),ZD(k)])),L=new Map;for(const k of D){if(k.status!=="fulfilled")continue;const Fe=k.value;if("docs"in Fe)for(const De of c2(Fe.docs))L.set(De.id,De);else if(Fe.exists()){const De={id:Fe.id,...Fe.data()};L.set(De.id,De)}}const z=Array.from(L.values()).sort((k,Fe)=>{const De=P.includes(k.id)?0:1,Ue=P.includes(Fe.id)?0:1;return De-Ue});a(z)}catch(B){r(Xt(B))}finally{d(!1)}}M.useEffect(()=>{e&&(n==="client"||n===null)&&$()},[n,e==null?void 0:e.uid]);const G=s[0],Q=f2(G==null?void 0:G.exercises),j=[{label:"Nome e cognome",value:_==null?void 0:_.fullName},{label:"E-mail",value:(_==null?void 0:_.email)??(e==null?void 0:e.email)},{label:"Telefono",value:_==null?void 0:_.phone},{label:"Et",value:_==null?void 0:_.age},{label:"Sesso",value:_==null?void 0:_.sex},{label:"Altezza",value:_!=null&&_.heightCm?`${_.heightCm} cm`:""},{label:"Peso",value:_!=null&&_.weightKg?`${_.weightKg} kg`:""},{label:"Obiettivo",value:_==null?void 0:_.objectivePrimary}].filter(B=>(B.value??"").toString().trim().length>0);return e?f?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Prepariamo la tua area"}),T.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):T.jsxs(QS,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",icon:""},{id:"profile",label:"Profilo",icon:""}],activeSection:N,onSectionChange:B=>O(B),headerAction:T.jsx("div",{className:"mobile-only",children:T.jsx("a",{className:`btn btn-whatsapp ${Tr?"":"btn-disabled"}`.trim(),href:Tr?sh(A):"#",onClick:B=>{Tr||B.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[N==="plan"?T.jsxs(T.Fragment,{children:[T.jsxs("article",{className:"card desktop-only",children:[T.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),T.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),T.jsx("a",{className:`btn btn-whatsapp ${Tr?"":"btn-disabled"}`.trim(),href:Tr?sh(A):"#",onClick:B=>{Tr||B.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),Tr?null:T.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}),T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"La tua scheda tecnica"}),G?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"plan-head",children:[T.jsx("p",{className:"hint",children:"Programma attivo"}),T.jsx("h3",{children:G.title})]}),T.jsx("div",{className:"exercise-grid",children:Q.map((B,J)=>T.jsxs("article",{className:"exercise-card",children:[T.jsx("p",{className:"exercise-name",children:B.name||`Esercizio ${J+1}`}),T.jsxs("div",{className:"exercise-meta",children:[T.jsxs("span",{children:[B.sets??"-"," serie"]}),T.jsxs("span",{children:[B.reps||"-"," reps"]}),T.jsx("span",{children:B.weight||"Peso libero"})]}),B.mediaUrl?T.jsx("button",{className:"btn-link",type:"button",onClick:()=>E({url:B.mediaUrl,label:B.name||`Esercizio ${J+1}`}),children:fp(B.mediaUrl)||Kw(B.mediaUrl)?"Apri video":Gw(B.mediaUrl)?"Apri immagine":"Apri link"}):T.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${J}`))})]}):T.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,N==="profile"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Profilo e anagrafica"}),j.length>0?T.jsx("div",{className:"client-info-block",children:j.map(B=>T.jsxs("p",{className:"hint",children:[T.jsxs("strong",{children:[B.label,":"]})," ",B.value]},B.label))}):T.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),T.jsx("a",{className:`btn btn-whatsapp ${Tr?"":"btn-disabled"}`.trim(),href:Tr?sh(A):"#",onClick:B=>{Tr||B.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),Tr?null:T.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}):null,u?T.jsx("p",{className:"message",children:"Caricamento..."}):null,y?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:y.label}),fp(y.url)?T.jsx("iframe",{title:y.label,src:fp(y.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Gw(y.url)?T.jsx("img",{src:y.url,alt:y.label,className:"media-frame media-image"}):Kw(y.url)?T.jsx("video",{src:y.url,controls:!0,className:"media-frame"}):T.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",T.jsx("a",{href:y.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>E(null),children:"Chiudi"})]})}):null]}):T.jsx(Ir,{to:"/auth",replace:!0})}function Eo(n){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(n)}function m2(n,e){if(Eo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Eo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XS(n){var e=m2(n,"string");return Eo(e)=="symbol"?e:e+""}function Dl(n,e,t){return(e=XS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Re(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qw(Object(t),!0).forEach(function(r){Dl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function g2(n){if(Array.isArray(n))return n}function v2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(y){m=!0,s=y}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function im(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function YS(n,e){if(n){if(typeof n=="string")return im(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?im(n,e):void 0}}function y2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bi(n,e){return g2(n)||v2(n,e)||YS(n,e)||y2()}function _2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Di(n,e){if(n==null)return{};var t,r,s=_2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var w2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function E2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,y=n.onInputChange,E=n.onMenuClose,_=n.onMenuOpen,R=n.value,N=Di(n,w2),O=M.useState(d!==void 0?d:t),A=bi(O,2),$=A[0],G=A[1],Q=M.useState(f!==void 0?f:s),j=bi(Q,2),B=j[0],J=j[1],b=M.useState(R!==void 0?R:u),I=bi(b,2),P=I[0],D=I[1],L=M.useCallback(function(re,me){typeof m=="function"&&m(re,me),D(re)},[m]),z=M.useCallback(function(re,me){var se;typeof y=="function"&&(se=y(re,me)),G(se!==void 0?se:re)},[y]),k=M.useCallback(function(){typeof _=="function"&&_(),J(!0)},[_]),Fe=M.useCallback(function(){typeof E=="function"&&E(),J(!1)},[E]),De=d!==void 0?d:$,Ue=f!==void 0?f:B,je=R!==void 0?R:P;return Re(Re({},N),{},{inputValue:De,menuIsOpen:Ue,onChange:L,onInputChange:z,onMenuClose:Fe,onMenuOpen:k,value:je})}function Pe(){return Pe=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pe.apply(null,arguments)}function T2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Xw(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XS(r.key),r)}}function S2(n,e,t){return e&&Xw(n.prototype,e),t&&Xw(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function sm(n,e){return sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},sm(n,e)}function I2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&sm(n,e)}function xh(n){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xh(n)}function JS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JS=function(){return!!n})()}function C2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function b2(n,e){if(e&&(Eo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C2(n)}function A2(n){var e=JS();return function(){var t,r=xh(n);if(e){var s=xh(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return b2(this,t)}}function R2(n){if(Array.isArray(n))return im(n)}function P2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function k2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ig(n){return R2(n)||P2(n)||YS(n)||k2()}function x2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function N2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var O2=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(N2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=x2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),an="-ms-",Nh="-moz-",Je="-webkit-",ZS="comm",Cg="rule",bg="decl",D2="@import",eI="@keyframes",V2="@layer",M2=Math.abs,gd=String.fromCharCode,L2=Object.assign;function F2(n,e){return Jt(n,0)^45?(((e<<2^Jt(n,0))<<2^Jt(n,1))<<2^Jt(n,2))<<2^Jt(n,3):0}function tI(n){return n.trim()}function j2(n,e){return(n=e.exec(n))?n[0]:n}function Ze(n,e,t){return n.replace(e,t)}function om(n,e){return n.indexOf(e)}function Jt(n,e){return n.charCodeAt(e)|0}function Zl(n,e,t){return n.slice(e,t)}function $r(n){return n.length}function Ag(n){return n.length}function $c(n,e){return e.push(n),n}function U2(n,e){return n.map(e).join("")}var vd=1,Pa=1,nI=0,Nn=0,Ot=0,Ua="";function yd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:vd,column:Pa,length:u,return:""}}function Al(n,e){return L2(yd("",null,null,"",null,null,0),n,{length:-n.length},e)}function z2(){return Ot}function B2(){return Ot=Nn>0?Jt(Ua,--Nn):0,Pa--,Ot===10&&(Pa=1,vd--),Ot}function Bn(){return Ot=Nn<nI?Jt(Ua,Nn++):0,Pa++,Ot===10&&(Pa=1,vd++),Ot}function Yr(){return Jt(Ua,Nn)}function oh(){return Nn}function _u(n,e){return Zl(Ua,n,e)}function eu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rI(n){return vd=Pa=1,nI=$r(Ua=n),Nn=0,[]}function iI(n){return Ua="",n}function ah(n){return tI(_u(Nn-1,am(n===91?n+2:n===40?n+1:n)))}function $2(n){for(;(Ot=Yr())&&Ot<33;)Bn();return eu(n)>2||eu(Ot)>3?"":" "}function H2(n,e){for(;--e&&Bn()&&!(Ot<48||Ot>102||Ot>57&&Ot<65||Ot>70&&Ot<97););return _u(n,oh()+(e<6&&Yr()==32&&Bn()==32))}function am(n){for(;Bn();)switch(Ot){case n:return Nn;case 34:case 39:n!==34&&n!==39&&am(Ot);break;case 40:n===41&&am(n);break;case 92:Bn();break}return Nn}function W2(n,e){for(;Bn()&&n+Ot!==57;)if(n+Ot===84&&Yr()===47)break;return"/*"+_u(e,Nn-1)+"*"+gd(n===47?n:Bn())}function q2(n){for(;!eu(Yr());)Bn();return _u(n,Nn)}function G2(n){return iI(lh("",null,null,null,[""],n=rI(n),0,[0],n))}function lh(n,e,t,r,s,a,u,d,f){for(var m=0,y=0,E=u,_=0,R=0,N=0,O=1,A=1,$=1,G=0,Q="",j=s,B=a,J=r,b=Q;A;)switch(N=G,G=Bn()){case 40:if(N!=108&&Jt(b,E-1)==58){om(b+=Ze(ah(G),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:b+=ah(G);break;case 9:case 10:case 13:case 32:b+=$2(N);break;case 92:b+=H2(oh()-1,7);continue;case 47:switch(Yr()){case 42:case 47:$c(K2(W2(Bn(),oh()),e,t),f);break;default:b+="/"}break;case 123*O:d[m++]=$r(b)*$;case 125*O:case 59:case 0:switch(G){case 0:case 125:A=0;case 59+y:$==-1&&(b=Ze(b,/\f/g,"")),R>0&&$r(b)-E&&$c(R>32?Jw(b+";",r,t,E-1):Jw(Ze(b," ","")+";",r,t,E-2),f);break;case 59:b+=";";default:if($c(J=Yw(b,e,t,m,y,s,d,Q,j=[],B=[],E),a),G===123)if(y===0)lh(b,e,J,J,j,a,E,d,B);else switch(_===99&&Jt(b,3)===110?100:_){case 100:case 108:case 109:case 115:lh(n,J,J,r&&$c(Yw(n,J,J,0,0,s,d,Q,s,j=[],E),B),s,B,E,d,r?j:B);break;default:lh(b,J,J,J,[""],B,0,d,B)}}m=y=R=0,O=$=1,Q=b="",E=u;break;case 58:E=1+$r(b),R=N;default:if(O<1){if(G==123)--O;else if(G==125&&O++==0&&B2()==125)continue}switch(b+=gd(G),G*O){case 38:$=y>0?1:(b+="\f",-1);break;case 44:d[m++]=($r(b)-1)*$,$=1;break;case 64:Yr()===45&&(b+=ah(Bn())),_=Yr(),y=E=$r(Q=b+=q2(oh())),G++;break;case 45:N===45&&$r(b)==2&&(O=0)}}return a}function Yw(n,e,t,r,s,a,u,d,f,m,y){for(var E=s-1,_=s===0?a:[""],R=Ag(_),N=0,O=0,A=0;N<r;++N)for(var $=0,G=Zl(n,E+1,E=M2(O=u[N])),Q=n;$<R;++$)(Q=tI(O>0?_[$]+" "+G:Ze(G,/&\f/g,_[$])))&&(f[A++]=Q);return yd(n,e,t,s===0?Cg:d,f,m,y)}function K2(n,e,t){return yd(n,e,t,ZS,gd(z2()),Zl(n,2,-2),0)}function Jw(n,e,t,r){return yd(n,e,t,bg,Zl(n,0,r),Zl(n,r+1,-1),r)}function Ea(n,e){for(var t="",r=Ag(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function Q2(n,e,t,r){switch(n.type){case V2:if(n.children.length)break;case D2:case bg:return n.return=n.return||n.value;case ZS:return"";case eI:return n.return=n.value+"{"+Ea(n.children,r)+"}";case Cg:n.value=n.props.join(",")}return $r(t=Ea(n.children,r))?n.return=n.value+"{"+t+"}":""}function X2(n){var e=Ag(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function Y2(n){return function(e){e.root||(e=e.return)&&n(e)}}function J2(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Z2=function(e,t,r){for(var s=0,a=0;s=a,a=Yr(),s===38&&a===12&&(t[r]=1),!eu(a);)Bn();return _u(e,Nn)},eV=function(e,t){var r=-1,s=44;do switch(eu(s)){case 0:s===38&&Yr()===12&&(t[r]=1),e[r]+=Z2(Nn-1,t,r);break;case 2:e[r]+=ah(s);break;case 4:if(s===44){e[++r]=Yr()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=gd(s)}while(s=Bn());return e},tV=function(e,t){return iI(eV(rI(e),t))},Zw=new WeakMap,nV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Zw.get(r))&&!s){Zw.set(e,!0);for(var a=[],u=tV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var y=0;y<d.length;y++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[y]):d[y]+" "+u[f]}}},rV=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function sI(n,e){switch(F2(n,e)){case 5103:return Je+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Je+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Je+n+Nh+n+an+n+n;case 6828:case 4268:return Je+n+an+n+n;case 6165:return Je+n+an+"flex-"+n+n;case 5187:return Je+n+Ze(n,/(\w+).+(:[^]+)/,Je+"box-$1$2"+an+"flex-$1$2")+n;case 5443:return Je+n+an+"flex-item-"+Ze(n,/flex-|-self/,"")+n;case 4675:return Je+n+an+"flex-line-pack"+Ze(n,/align-content|flex-|-self/,"")+n;case 5548:return Je+n+an+Ze(n,"shrink","negative")+n;case 5292:return Je+n+an+Ze(n,"basis","preferred-size")+n;case 6060:return Je+"box-"+Ze(n,"-grow","")+Je+n+an+Ze(n,"grow","positive")+n;case 4554:return Je+Ze(n,/([^-])(transform)/g,"$1"+Je+"$2")+n;case 6187:return Ze(Ze(Ze(n,/(zoom-|grab)/,Je+"$1"),/(image-set)/,Je+"$1"),n,"")+n;case 5495:case 3959:return Ze(n,/(image-set\([^]*)/,Je+"$1$`$1");case 4968:return Ze(Ze(n,/(.+:)(flex-)?(.*)/,Je+"box-pack:$3"+an+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Je+n+n;case 4095:case 3583:case 4068:case 2532:return Ze(n,/(.+)-inline(.+)/,Je+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($r(n)-1-e>6)switch(Jt(n,e+1)){case 109:if(Jt(n,e+4)!==45)break;case 102:return Ze(n,/(.+:)(.+)-([^]+)/,"$1"+Je+"$2-$3$1"+Nh+(Jt(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~om(n,"stretch")?sI(Ze(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Jt(n,e+1)!==115)break;case 6444:switch(Jt(n,$r(n)-3-(~om(n,"!important")&&10))){case 107:return Ze(n,":",":"+Je)+n;case 101:return Ze(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Je+(Jt(n,14)===45?"inline-":"")+"box$3$1"+Je+"$2$3$1"+an+"$2box$3")+n}break;case 5936:switch(Jt(n,e+11)){case 114:return Je+n+an+Ze(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Je+n+an+Ze(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Je+n+an+Ze(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Je+n+an+n+n}return n}var iV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case bg:e.return=sI(e.value,e.length);break;case eI:return Ea([Al(e,{value:Ze(e.value,"@","@"+Je)})],s);case Cg:if(e.length)return U2(e.props,function(a){switch(j2(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ea([Al(e,{props:[Ze(a,/:(read-\w+)/,":"+Nh+"$1")]})],s);case"::placeholder":return Ea([Al(e,{props:[Ze(a,/:(plac\w+)/,":"+Je+"input-$1")]}),Al(e,{props:[Ze(a,/:(plac\w+)/,":"+Nh+"$1")]}),Al(e,{props:[Ze(a,/:(plac\w+)/,an+"input-$1")]})],s)}return""})}},sV=[iV],oV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(O){var A=O.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var s=e.stylisPlugins||sV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(O){for(var A=O.getAttribute("data-emotion").split(" "),$=1;$<A.length;$++)a[A[$]]=!0;d.push(O)});var f,m=[nV,rV];{var y,E=[Q2,Y2(function(O){y.insert(O)})],_=X2(m.concat(s,E)),R=function(A){return Ea(G2(A),_)};f=function(A,$,G,Q){y=G,R(A?A+"{"+$.styles+"}":$.styles),Q&&(N.inserted[$.name]=!0)}}var N={key:t,sheet:new O2({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return N.sheet.hydrate(d),N},pp={exports:{}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function aV(){if(e0)return et;e0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,y=n?Symbol.for("react.forward_ref"):60112,E=n?Symbol.for("react.suspense"):60113,_=n?Symbol.for("react.suspense_list"):60120,R=n?Symbol.for("react.memo"):60115,N=n?Symbol.for("react.lazy"):60116,O=n?Symbol.for("react.block"):60121,A=n?Symbol.for("react.fundamental"):60117,$=n?Symbol.for("react.responder"):60118,G=n?Symbol.for("react.scope"):60119;function Q(B){if(typeof B=="object"&&B!==null){var J=B.$$typeof;switch(J){case e:switch(B=B.type,B){case f:case m:case r:case a:case s:case E:return B;default:switch(B=B&&B.$$typeof,B){case d:case y:case N:case R:case u:return B;default:return J}}case t:return J}}}function j(B){return Q(B)===m}return et.AsyncMode=f,et.ConcurrentMode=m,et.ContextConsumer=d,et.ContextProvider=u,et.Element=e,et.ForwardRef=y,et.Fragment=r,et.Lazy=N,et.Memo=R,et.Portal=t,et.Profiler=a,et.StrictMode=s,et.Suspense=E,et.isAsyncMode=function(B){return j(B)||Q(B)===f},et.isConcurrentMode=j,et.isContextConsumer=function(B){return Q(B)===d},et.isContextProvider=function(B){return Q(B)===u},et.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===e},et.isForwardRef=function(B){return Q(B)===y},et.isFragment=function(B){return Q(B)===r},et.isLazy=function(B){return Q(B)===N},et.isMemo=function(B){return Q(B)===R},et.isPortal=function(B){return Q(B)===t},et.isProfiler=function(B){return Q(B)===a},et.isStrictMode=function(B){return Q(B)===s},et.isSuspense=function(B){return Q(B)===E},et.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===r||B===m||B===a||B===s||B===E||B===_||typeof B=="object"&&B!==null&&(B.$$typeof===N||B.$$typeof===R||B.$$typeof===u||B.$$typeof===d||B.$$typeof===y||B.$$typeof===A||B.$$typeof===$||B.$$typeof===G||B.$$typeof===O)},et.typeOf=Q,et}var t0;function lV(){return t0||(t0=1,pp.exports=aV()),pp.exports}var mp,n0;function uV(){if(n0)return mp;n0=1;var n=lV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(N){return n.isMemo(N)?s:a[N.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,_=Object.prototype;function R(N,O,A){if(typeof O!="string"){if(_){var $=E(O);$&&$!==_&&R(N,$,A)}var G=f(O);m&&(G=G.concat(m(O)));for(var Q=u(N),j=u(O),B=0;B<G.length;++B){var J=G[B];if(!t[J]&&!(A&&A[J])&&!(j&&j[J])&&!(Q&&Q[J])){var b=y(O,J);try{d(N,J,b)}catch{}}}}return N}return mp=R,mp}uV();var cV=!0;function hV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var oI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||cV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},dV=function(e,t,r){oI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function fV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mV=/[A-Z]|^ms/g,gV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aI=function(e){return e.charCodeAt(1)===45},r0=function(e){return e!=null&&typeof e!="boolean"},gp=J2(function(n){return aI(n)?n:n.replace(mV,"-$&").toLowerCase()}),i0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(gV,function(r,s,a){return Hr={name:s,styles:a,next:Hr},s})}return pV[e]!==1&&!aI(e)&&typeof t=="number"&&t!==0?t+"px":t};function tu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Hr={name:s.name,styles:s.styles,next:Hr},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)Hr={name:u.name,styles:u.styles,next:Hr},u=u.next;var d=a.styles+";";return d}return vV(n,e,t)}case"function":{if(n!==void 0){var f=Hr,m=t(n);return Hr=f,tu(n,e,m)}break}}var y=t;return y}function vV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=tu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;r0(d)&&(r+=gp(a)+":"+i0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)r0(u[f])&&(r+=gp(a)+":"+i0(a,u[f])+";");else{var m=tu(n,e,u);switch(a){case"animation":case"animationName":{r+=gp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var s0=/label:\s*([^\s;{]+)\s*(;|$)/g,Hr;function lI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Hr=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=tu(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=tu(t,e,n[d]),r){var f=a;s+=f[d]}s0.lastIndex=0;for(var m="",y;(y=s0.exec(s))!==null;)m+="-"+y[1];var E=fV(s)+m;return{name:E,styles:s,next:Hr}}var yV=function(e){return e()},_V=Sp.useInsertionEffect?Sp.useInsertionEffect:!1,wV=_V||yV,uI=M.createContext(typeof HTMLElement<"u"?oV({key:"css"}):null);uI.Provider;var EV=function(e){return M.forwardRef(function(t,r){var s=M.useContext(uI);return e(t,s,r)})},TV=M.createContext({}),Rg={}.hasOwnProperty,lm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",SV=function(e,t){var r={};for(var s in t)Rg.call(t,s)&&(r[s]=t[s]);return r[lm]=e,r},IV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return oI(t,r,s),wV(function(){return dV(t,r,s)}),null},CV=EV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[lm],a=[r],u="";typeof n.className=="string"?u=hV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=lI(a,void 0,M.useContext(TV));u+=e.key+"-"+d.name;var f={};for(var m in n)Rg.call(n,m)&&m!=="css"&&m!==lm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),M.createElement(M.Fragment,null,M.createElement(IV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),M.createElement(s,f))}),bV=CV,Te=function(e,t){var r=arguments;if(t==null||!Rg.call(t,"css"))return M.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=bV,a[1]=SV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return M.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Te||(Te={}));function Pg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return lI(e)}function AV(){var n=Pg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function RV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const PV=Math.min,kV=Math.max,Oh=Math.round,Hc=Math.floor,Dh=n=>({x:n,y:n});function xV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function _d(){return typeof window<"u"}function cI(n){return dI(n)?(n.nodeName||"").toLowerCase():"#document"}function Ni(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function hI(n){var e;return(e=(dI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function dI(n){return _d()?n instanceof Node||n instanceof Ni(n).Node:!1}function NV(n){return _d()?n instanceof Element||n instanceof Ni(n).Element:!1}function kg(n){return _d()?n instanceof HTMLElement||n instanceof Ni(n).HTMLElement:!1}function o0(n){return!_d()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ni(n).ShadowRoot}const OV=new Set(["inline","contents"]);function fI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=xg(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!OV.has(s)}function DV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VV=new Set(["html","body","#document"]);function MV(n){return VV.has(cI(n))}function xg(n){return Ni(n).getComputedStyle(n)}function LV(n){if(cI(n)==="html")return n;const e=n.assignedSlot||n.parentNode||o0(n)&&n.host||hI(n);return o0(e)?e.host:e}function pI(n){const e=LV(n);return MV(e)?n.ownerDocument?n.ownerDocument.body:n.body:kg(e)&&fI(e)?e:pI(e)}function Vh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=pI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=Ni(s);if(a){const d=um(u);return e.concat(u,u.visualViewport||[],fI(s)?s:[],d&&t?Vh(d):[])}return e.concat(s,Vh(s,[],t))}function um(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function FV(n){const e=xg(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=kg(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Oh(t)!==a||Oh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function Ng(n){return NV(n)?n:n.contextElement}function a0(n){const e=Ng(n);if(!kg(e))return Dh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=FV(e);let u=(a?Oh(t.width):t.width)/r,d=(a?Oh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const jV=Dh(0);function UV(n){const e=Ni(n);return!DV()||!e.visualViewport?jV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zV(n,e,t){return!1}function l0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=Ng(n);let u=Dh(1);e&&(u=a0(n));const d=zV()?UV(a):Dh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,y=s.width/u.x,E=s.height/u.y;if(a){const _=Ni(a),R=r;let N=_,O=um(N);for(;O&&r&&R!==N;){const A=a0(O),$=O.getBoundingClientRect(),G=xg(O),Q=$.left+(O.clientLeft+parseFloat(G.paddingLeft))*A.x,j=$.top+(O.clientTop+parseFloat(G.paddingTop))*A.y;f*=A.x,m*=A.y,y*=A.x,E*=A.y,f+=Q,m+=j,N=Ni(O),O=um(N)}}return xV({width:y,height:E,x:f,y:m})}function mI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function BV(n,e){let t=null,r;const s=hI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:y,top:E,width:_,height:R}=m;if(d||e(),!_||!R)return;const N=Hc(E),O=Hc(s.clientWidth-(y+_)),A=Hc(s.clientHeight-(E+R)),$=Hc(y),Q={rootMargin:-N+"px "+-O+"px "+-A+"px "+-$+"px",threshold:kV(0,PV(1,f))||1};let j=!0;function B(J){const b=J[0].intersectionRatio;if(b!==f){if(!j)return u();b?u(!1,b):r=setTimeout(()=>{u(!1,1e-7)},1e3)}b===1&&!mI(m,n.getBoundingClientRect())&&u(),j=!1}try{t=new IntersectionObserver(B,{...Q,root:s.ownerDocument})}catch{t=new IntersectionObserver(B,Q)}t.observe(n)}return u(!0),a}function $V(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Ng(n),y=s||a?[...m?Vh(m):[],...Vh(e)]:[];y.forEach($=>{s&&$.addEventListener("scroll",t,{passive:!0}),a&&$.addEventListener("resize",t)});const E=m&&d?BV(m,t):null;let _=-1,R=null;u&&(R=new ResizeObserver($=>{let[G]=$;G&&G.target===m&&R&&(R.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var Q;(Q=R)==null||Q.observe(e)})),t()}),m&&!f&&R.observe(m),R.observe(e));let N,O=f?l0(n):null;f&&A();function A(){const $=l0(n);O&&!mI(O,$)&&t(),O=$,N=requestAnimationFrame(A)}return t(),()=>{var $;y.forEach(G=>{s&&G.removeEventListener("scroll",t),a&&G.removeEventListener("resize",t)}),E==null||E(),($=R)==null||$.disconnect(),R=null,f&&cancelAnimationFrame(N)}}var cm=M.useLayoutEffect,HV=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Mh=function(){};function WV(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function qV(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(WV(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var u0=function(e){return tM(e)?e.filter(Boolean):Eo(e)==="object"&&e!==null?[e]:[]},gI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Di(e,HV);return Re({},t)},wt=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function wd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function GV(n){return wd(n)?window.innerHeight:n.clientHeight}function vI(n){return wd(n)?window.pageYOffset:n.scrollTop}function Lh(n,e){if(wd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function KV(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function QV(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function Wc(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Mh,s=vI(n),a=e-s,u=10,d=0;function f(){d+=u;var m=QV(d,s,a,t);Lh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function c0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Lh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Lh(n,Math.max(e.offsetTop-s,0))}function XV(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function h0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function YV(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var yI=!1,JV={get passive(){return yI=!0}},qc=typeof window<"u"?window:{};qc.addEventListener&&qc.removeEventListener&&(qc.addEventListener("p",Mh,JV),qc.removeEventListener("p",Mh,!1));var ZV=yI;function eM(n){return n!=null}function tM(n){return Array.isArray(n)}function Gc(n,e,t){return n?e:t}var nM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=bi(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=bi(d,2),m=f[0],y=f[1];return u[m]=y,u},{})},rM=["children","innerProps"],iM=["children","innerProps"];function sM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=KV(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var y=f.getBoundingClientRect(),E=y.height,_=t.getBoundingClientRect(),R=_.bottom,N=_.height,O=_.top,A=t.offsetParent.getBoundingClientRect(),$=A.top,G=u?window.innerHeight:GV(f),Q=vI(f),j=parseInt(getComputedStyle(t).marginBottom,10),B=parseInt(getComputedStyle(t).marginTop,10),J=$-B,b=G-O,I=J+Q,P=E-Q-O,D=R-G+Q+j,L=Q+O-B,z=160;switch(s){case"auto":case"bottom":if(b>=N)return{placement:"bottom",maxHeight:e};if(P>=N&&!u)return a&&Wc(f,D,z),{placement:"bottom",maxHeight:e};if(!u&&P>=r||u&&b>=r){a&&Wc(f,D,z);var k=u?b-j:P-j;return{placement:"bottom",maxHeight:k}}if(s==="auto"||u){var Fe=e,De=u?J:I;return De>=r&&(Fe=Math.min(De-j-d,e)),{placement:"top",maxHeight:Fe}}if(s==="bottom")return a&&Lh(f,D),{placement:"bottom",maxHeight:e};break;case"top":if(J>=N)return{placement:"top",maxHeight:e};if(I>=N&&!u)return a&&Wc(f,L,z),{placement:"top",maxHeight:e};if(!u&&I>=r||u&&J>=r){var Ue=e;return(!u&&I>=r||u&&J>=r)&&(Ue=u?J-B:I-B),a&&Wc(f,L,z),{placement:"top",maxHeight:Ue}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function oM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var _I=function(e){return e==="auto"?"bottom":e},aM=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return Re((r={label:"menu"},Dl(r,oM(s),"100%"),Dl(r,"position","absolute"),Dl(r,"width","100%"),Dl(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},wI=M.createContext(null),lM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=M.useContext(wI)||{},y=m.setPortalPlacement,E=M.useRef(null),_=M.useState(s),R=bi(_,2),N=R[0],O=R[1],A=M.useState(null),$=bi(A,2),G=$[0],Q=$[1],j=f.spacing.controlHeight;return cm(function(){var B=E.current;if(B){var J=u==="fixed",b=d&&!J,I=sM({maxHeight:s,menuEl:B,minHeight:r,placement:a,shouldScroll:b,isFixedPosition:J,controlHeight:j});O(I.maxHeight),Q(I.placement),y==null||y(I.placement)}},[s,a,u,d,r,y,j]),t({ref:E,placerProps:Re(Re({},e),{},{placement:G||_I(a),maxHeight:N})})},uM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return Te("div",Pe({},wt(e,"menu",{menu:!0}),{ref:r},s),t)},cM=uM,hM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return Re({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},dM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return Te("div",Pe({},wt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},EI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return Re({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},fM=EI,pM=EI,mM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=Di(e,rM);return Te("div",Pe({},wt(Re(Re({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},gM=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=Di(e,iM);return Te("div",Pe({},wt(Re(Re({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},vM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},yM=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=M.useRef(null),m=M.useRef(null),y=M.useState(_I(u)),E=bi(y,2),_=E[0],R=E[1],N=M.useMemo(function(){return{setPortalPlacement:R}},[]),O=M.useState(null),A=bi(O,2),$=A[0],G=A[1],Q=M.useCallback(function(){if(s){var b=XV(s),I=d==="fixed"?0:window.pageYOffset,P=b[_]+I;(P!==($==null?void 0:$.offset)||b.left!==($==null?void 0:$.rect.left)||b.width!==($==null?void 0:$.rect.width))&&G({offset:P,rect:b})}},[s,d,_,$==null?void 0:$.offset,$==null?void 0:$.rect.left,$==null?void 0:$.rect.width]);cm(function(){Q()},[Q]);var j=M.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=$V(s,f.current,Q,{elementResize:"ResizeObserver"in window}))},[s,Q]);cm(function(){j()},[j]);var B=M.useCallback(function(b){f.current=b,j()},[j]);if(!t&&d!=="fixed"||!$)return null;var J=Te("div",Pe({ref:B},wt(Re(Re({},e),{},{offset:$.offset,position:d,rect:$.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Te(wI.Provider,{value:N},t?Z1.createPortal(J,t):J)},_M=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},wM=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return Te("div",Pe({},wt(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},EM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return Re({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},TM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return Te("div",Pe({},wt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},SM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IM=function(e){var t=e.children,r=e.innerProps;return Te("div",Pe({},wt(e,"indicatorsContainer",{indicators:!0}),r),t)},d0,CM=["size"],bM=["innerProps","isRtl","size"],AM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},TI=function(e){var t=e.size,r=Di(e,CM);return Te("svg",Pe({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:AM},r))},Og=function(e){return Te(TI,Pe({size:20},e),Te("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},SI=function(e){return Te(TI,Pe({size:20},e),Te("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},II=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},RM=II,PM=function(e){var t=e.children,r=e.innerProps;return Te("div",Pe({},wt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Te(SI,null))},kM=II,xM=function(e){var t=e.children,r=e.innerProps;return Te("div",Pe({},wt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Te(Og,null))},NM=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return Re({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},OM=function(e){var t=e.innerProps;return Te("span",Pe({},t,wt(e,"indicatorSeparator",{"indicator-separator":!0})))},DM=AV(d0||(d0=RV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),VM=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return Re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},vp=function(e){var t=e.delay,r=e.offset;return Te("span",{css:Pg({animation:"".concat(DM," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},MM=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=Di(e,bM);return Te("div",Pe({},wt(Re(Re({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Te(vp,{delay:0,offset:r}),Te(vp,{delay:160,offset:!0}),Te(vp,{delay:320,offset:!r}))},LM=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return Re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},FM=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return Te("div",Pe({ref:a},wt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},jM=FM,UM=["data"],zM=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},BM=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,y=e.theme,E=e.selectProps;return Te("div",Pe({},wt(e,"group",{group:!0}),f),Te(u,Pe({},d,{selectProps:E,theme:y,getStyles:s,getClassNames:a,cx:r}),m),Te("div",null,t))},$M=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return Re({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},HM=function(e){var t=gI(e);t.data;var r=Di(t,UM);return Te("div",Pe({},wt(e,"groupHeading",{"group-heading":!0}),r))},WM=BM,qM=["innerRef","isDisabled","isHidden","inputClassName"],GM=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return Re(Re({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},KM),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},CI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},KM={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},CI)},QM=function(e){return Re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},CI)},XM=function(e){var t=e.cx,r=e.value,s=gI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=Di(s,qM);return Te("div",Pe({},wt(e,"input",{"input-container":!0}),{"data-value":r||""}),Te("input",Pe({className:t({input:!0},f),ref:a,style:QM(d),disabled:u},m)))},YM=XM,JM=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return Re({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},ZM=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return Re({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},eL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return Re({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},bI=function(e){var t=e.children,r=e.innerProps;return Te("div",r,t)},tL=bI,nL=bI;function rL(n){var e=n.children,t=n.innerProps;return Te("div",Pe({role:"button"},t),e||Te(Og,{size:14}))}var iL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,y=r.Label,E=r.Remove;return Te(m,{data:s,innerProps:Re(Re({},wt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},Te(y,{data:s,innerProps:Re({},wt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),Te(E,{data:s,innerProps:Re(Re({},wt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},sL=iL,oL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return Re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},aL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return Te("div",Pe({},wt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},lL=aL,uL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return Re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},cL=function(e){var t=e.children,r=e.innerProps;return Te("div",Pe({},wt(e,"placeholder",{placeholder:!0}),r),t)},hL=cL,dL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return Re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},fL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return Te("div",Pe({},wt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},pL=fL,mL={ClearIndicator:xM,Control:jM,DropdownIndicator:PM,DownChevron:SI,CrossIcon:Og,Group:WM,GroupHeading:HM,IndicatorsContainer:IM,IndicatorSeparator:OM,Input:YM,LoadingIndicator:MM,Menu:cM,MenuList:dM,MenuPortal:yM,LoadingMessage:gM,NoOptionsMessage:mM,MultiValue:sL,MultiValueContainer:tL,MultiValueLabel:nL,MultiValueRemove:rL,Option:lL,Placeholder:hL,SelectContainer:wM,SingleValue:pL,ValueContainer:TM},gL=function(e){return Re(Re({},mL),e.components)},f0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function vL(n,e){return!!(n===e||f0(n)&&f0(e))}function yL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!vL(n[t],e[t]))return!1;return!0}function _L(n,e){e===void 0&&(e=yL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var wL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},EL=function(e){return Te("span",Pe({css:wL},e))},p0=EL,TL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,y=e.isAppleDevice,E=function(O,A){return O&&O.length?"".concat(O.indexOf(A)+1," of ").concat(O.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(E(d,r),".");if(t==="menu"&&y){var _=f?" disabled":"",R="".concat(m?" selected":"").concat(_);return"".concat(u).concat(R,", ").concat(E(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},SL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,y=e.isAppleDevice,E=f.ariaLiveMessages,_=f.getOptionLabel,R=f.inputValue,N=f.isMulti,O=f.isOptionDisabled,A=f.isSearchable,$=f.menuIsOpen,G=f.options,Q=f.screenReaderStatus,j=f.tabSelectsValue,B=f.isLoading,J=f["aria-label"],b=f["aria-live"],I=M.useMemo(function(){return Re(Re({},TL),E||{})},[E]),P=M.useMemo(function(){var De="";if(t&&I.onChange){var Ue=t.option,je=t.options,re=t.removedValue,me=t.removedValues,se=t.value,H=function(ye){return Array.isArray(ye)?null:ye},Z=re||Ue||H(se),ce=Z?_(Z):"",Ce=je||me||void 0,Ee=Ce?Ce.map(_):[],ke=Re({isDisabled:Z&&O(Z,d),label:ce,labels:Ee},t);De=I.onChange(ke)}return De},[t,I,O,d,_]),D=M.useMemo(function(){var De="",Ue=r||s,je=!!(r&&d&&d.includes(r));if(Ue&&I.onFocus){var re={focused:Ue,label:_(Ue),isDisabled:O(Ue,d),isSelected:je,options:a,context:Ue===r?"menu":"value",selectValue:d,isAppleDevice:y};De=I.onFocus(re)}return De},[r,s,_,O,I,a,d,y]),L=M.useMemo(function(){var De="";if($&&G.length&&!B&&I.onFilter){var Ue=Q({count:a.length});De=I.onFilter({inputValue:R,resultsMessage:Ue})}return De},[a,R,$,I,G,Q,B]),z=(t==null?void 0:t.action)==="initial-input-focus",k=M.useMemo(function(){var De="";if(I.guidance){var Ue=s?"value":$?"menu":"input";De=I.guidance({"aria-label":J,context:Ue,isDisabled:r&&O(r,d),isMulti:N,isSearchable:A,tabSelectsValue:j,isInitialFocus:z})}return De},[J,r,s,N,O,A,$,I,d,j,z]),Fe=Te(M.Fragment,null,Te("span",{id:"aria-selection"},P),Te("span",{id:"aria-focused"},D),Te("span",{id:"aria-results"},L),Te("span",{id:"aria-guidance"},k));return Te(M.Fragment,null,Te(p0,{id:m},z&&Fe),Te(p0,{"aria-live":b,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!z&&Fe))},IL=SL,hm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],CL=new RegExp("["+hm.map(function(n){return n.letters}).join("")+"]","g"),AI={};for(var yp=0;yp<hm.length;yp++)for(var _p=hm[yp],wp=0;wp<_p.letters.length;wp++)AI[_p.letters[wp]]=_p.base;var RI=function(e){return e.replace(CL,function(t){return AI[t]})},bL=_L(RI),m0=function(e){return e.replace(/^\s+|\s+$/g,"")},AL=function(e){return"".concat(e.label," ").concat(e.value)},RL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=Re({ignoreCase:!0,ignoreAccents:!0,stringify:AL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,y=f?m0(r):r,E=f?m0(d(t)):d(t);return a&&(y=y.toLowerCase(),E=E.toLowerCase()),u&&(y=bL(y),E=RI(E)),m==="start"?E.substr(0,y.length)===y:E.indexOf(y)>-1}},PL=["innerRef"];function kL(n){var e=n.innerRef,t=Di(n,PL),r=nM(t,"onExited","in","enter","exit","appear");return Te("input",Pe({ref:e},r,{css:Pg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var xL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function NL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=M.useRef(!1),d=M.useRef(!1),f=M.useRef(0),m=M.useRef(null),y=M.useCallback(function(A,$){if(m.current!==null){var G=m.current,Q=G.scrollTop,j=G.scrollHeight,B=G.clientHeight,J=m.current,b=$>0,I=j-B-Q,P=!1;I>$&&u.current&&(r&&r(A),u.current=!1),b&&d.current&&(a&&a(A),d.current=!1),b&&$>I?(t&&!u.current&&t(A),J.scrollTop=j,P=!0,u.current=!0):!b&&-$>Q&&(s&&!d.current&&s(A),J.scrollTop=0,P=!0,d.current=!0),P&&xL(A)}},[t,r,s,a]),E=M.useCallback(function(A){y(A,A.deltaY)},[y]),_=M.useCallback(function(A){f.current=A.changedTouches[0].clientY},[]),R=M.useCallback(function(A){var $=f.current-A.changedTouches[0].clientY;y(A,$)},[y]),N=M.useCallback(function(A){if(A){var $=ZV?{passive:!1}:!1;A.addEventListener("wheel",E,$),A.addEventListener("touchstart",_,$),A.addEventListener("touchmove",R,$)}},[R,_,E]),O=M.useCallback(function(A){A&&(A.removeEventListener("wheel",E,!1),A.removeEventListener("touchstart",_,!1),A.removeEventListener("touchmove",R,!1))},[R,_,E]);return M.useEffect(function(){if(e){var A=m.current;return N(A),function(){O(A)}}},[e,N,O]),function(A){m.current=A}}var g0=["boxSizing","height","overflow","paddingRight","position"],v0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function y0(n){n.cancelable&&n.preventDefault()}function _0(n){n.stopPropagation()}function w0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function E0(){return"ontouchstart"in window||navigator.maxTouchPoints}var T0=!!(typeof window<"u"&&window.document&&window.document.createElement),Rl=0,ha={capture:!1,passive:!1};function OL(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=M.useRef({}),a=M.useRef(null),u=M.useCallback(function(f){if(T0){var m=document.body,y=m&&m.style;if(r&&g0.forEach(function(N){var O=y&&y[N];s.current[N]=O}),r&&Rl<1){var E=parseInt(s.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,R=window.innerWidth-_+E||0;Object.keys(v0).forEach(function(N){var O=v0[N];y&&(y[N]=O)}),y&&(y.paddingRight="".concat(R,"px"))}m&&E0()&&(m.addEventListener("touchmove",y0,ha),f&&(f.addEventListener("touchstart",w0,ha),f.addEventListener("touchmove",_0,ha))),Rl+=1}},[r]),d=M.useCallback(function(f){if(T0){var m=document.body,y=m&&m.style;Rl=Math.max(Rl-1,0),r&&Rl<1&&g0.forEach(function(E){var _=s.current[E];y&&(y[E]=_)}),m&&E0()&&(m.removeEventListener("touchmove",y0,ha),f&&(f.removeEventListener("touchstart",w0,ha),f.removeEventListener("touchmove",_0,ha)))}},[r]);return M.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var DL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},VL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ML(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=NL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),y=OL({isEnabled:t}),E=function(R){m(R),y(R)};return Te(M.Fragment,null,t&&Te("div",{onClick:DL,css:VL}),e(E))}var LL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},FL=function(e){var t=e.name,r=e.onFocus;return Te("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:LL,value:"",onChange:function(){}})},jL=FL;function Dg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function UL(){return Dg(/^iPhone/i)}function PI(){return Dg(/^Mac/i)}function zL(){return Dg(/^iPad/i)||PI()&&navigator.maxTouchPoints>1}function BL(){return UL()||zL()}function $L(){return PI()||BL()}var HL=function(e){return e.label},WL=function(e){return e.label},qL=function(e){return e.value},GL=function(e){return!!e.isDisabled},KL={clearIndicator:kM,container:_M,control:LM,dropdownIndicator:RM,group:zM,groupHeading:$M,indicatorsContainer:SM,indicatorSeparator:NM,input:GM,loadingIndicator:VM,loadingMessage:pM,menu:aM,menuList:hM,menuPortal:vM,multiValue:JM,multiValueLabel:ZM,multiValueRemove:eL,noOptionsMessage:fM,option:oL,placeholder:uL,singleValue:dL,valueContainer:EM},QL={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},XL=4,kI=4,YL=38,JL=kI*2,ZL={baseUnit:kI,controlHeight:YL,menuGutter:JL},Ep={borderRadius:XL,colors:QL,spacing:ZL},e4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:h0(),captureMenuScroll:!h0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:RL(),formatGroupLabel:HL,getOptionLabel:WL,getOptionValue:qL,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:GL,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!YV(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function S0(n,e,t,r){var s=OI(n,e,t),a=DI(n,e,t),u=NI(n,e),d=Fh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function uh(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return S0(n,u,e,d)}).filter(function(u){return C0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=S0(n,t,e,r);return C0(n,a)?a:void 0}).filter(eM)}function xI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Ig(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function I0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Ig(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function t4(n,e){return xI(uh(n,e))}function C0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!MI(n)||!a)&&VI(n,{label:u,value:d,data:s},r)}function n4(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function r4(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Tp=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},NI=function(e,t){return e.getOptionLabel(t)},Fh=function(e,t){return e.getOptionValue(t)};function OI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function DI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Fh(n,e);return t.some(function(s){return Fh(n,s)===r})}function VI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var MI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},i4=1,LI=(function(n){I2(t,n);var e=A2(t);function t(r){var s;if(T2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var y=s.props,E=y.onChange,_=y.name;m.name=_,s.ariaOnChange(f,m),E(f,m)},s.setValue=function(f,m,y){var E=s.props,_=E.closeMenuOnSelect,R=E.isMulti,N=E.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:N}),_&&(s.setState({inputIsHiddenAfterUpdate:!R}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:y})},s.selectOption=function(f){var m=s.props,y=m.blurInputOnSelect,E=m.isMulti,_=m.name,R=s.state.selectValue,N=E&&s.isOptionSelected(f,R),O=s.isOptionDisabled(f,R);if(N){var A=s.getOptionValue(f);s.setValue(R.filter(function($){return s.getOptionValue($)!==A}),"deselect-option",f)}else if(!O)E?s.setValue([].concat(Ig(R),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:_});return}y&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,y=s.state.selectValue,E=s.getOptionValue(f),_=y.filter(function(N){return s.getOptionValue(N)!==E}),R=Gc(m,_,_[0]||null);s.onChange(R,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(Gc(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,y=m[m.length-1],E=m.slice(0,m.length-1),_=Gc(f,E,E[0]||null);y&&s.onChange(_,{action:"pop-value",removedValue:y})},s.getFocusedOptionId=function(f){return Tp(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return I0(uh(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return qV.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return NI(s.props,f)},s.getOptionValue=function(f){return Fh(s.props,f)},s.getStyles=function(f,m){var y=s.props.unstyled,E=KL[f](m,y);E.boxSizing="border-box";var _=s.props.styles[f];return _?_(E,m):E},s.getClassNames=function(f,m){var y,E;return(y=(E=s.props.classNames)[f])===null||y===void 0?void 0:y.call(E,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return gL(s.props)},s.buildCategorizedOptions=function(){return uh(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return xI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:Re({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,y=m.isMulti,E=m.menuIsOpen;s.focusInput(),E?(s.setState({inputIsHiddenAfterUpdate:!y}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&wd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,y=m&&m.item(0);y&&(s.initialTouchX=y.clientX,s.initialTouchY=y.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,y=m&&m.item(0);if(y){var E=Math.abs(y.clientX-s.initialTouchX),_=Math.abs(y.clientY-s.initialTouchY),R=5;s.userIsDragging=E>R||_>R}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,y=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(y,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),y=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:y>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return MI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,y=m.isMulti,E=m.backspaceRemovesValue,_=m.escapeClearsValue,R=m.inputValue,N=m.isClearable,O=m.isDisabled,A=m.menuIsOpen,$=m.onKeyDown,G=m.tabSelectsValue,Q=m.openMenuOnFocus,j=s.state,B=j.focusedOption,J=j.focusedValue,b=j.selectValue;if(!O&&!(typeof $=="function"&&($(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!y||R)return;s.focusValue("previous");break;case"ArrowRight":if(!y||R)return;s.focusValue("next");break;case"Delete":case"Backspace":if(R)return;if(J)s.removeValue(J);else{if(!E)return;y?s.popValue():N&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!A||!G||!B||Q&&s.isOptionSelected(B,b))return;s.selectOption(B);break;case"Enter":if(f.keyCode===229)break;if(A){if(!B||s.isComposing)return;s.selectOption(B);break}return;case"Escape":A?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:R}),s.onMenuClose()):N&&_&&s.clearValue();break;case" ":if(R)return;if(!A){s.openMenu("first");break}if(!B)return;s.selectOption(B);break;case"ArrowUp":A?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":A?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!A)return;s.focusOption("pageup");break;case"PageDown":if(!A)return;s.focusOption("pagedown");break;case"Home":if(!A)return;s.focusOption("first");break;case"End":if(!A)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++i4),s.state.selectValue=u0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=Tp(a,u[d])}return s}return S2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&c0(this.menuListRef,this.focusedOptionRef),$L()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(c0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),y=s==="first"?0:m.length-1;if(!this.props.isMulti){var E=m.indexOf(d[0]);E>-1&&(y=E)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[y],focusedOptionId:this.getFocusedOptionId(m[y])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,y=-1;if(u.length){switch(s){case"previous":f===0?y=0:f===-1?y=m:y=f-1;break;case"next":f>-1&&f<m&&(y=f+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:u[y]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ep):Re(Re({},Ep),this.props.theme):Ep})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,y=this.setValue,E=this.props,_=E.isMulti,R=E.isRtl,N=E.options,O=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:O,isMulti:_,isRtl:R,options:N,selectOption:m,selectProps:E,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return OI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return DI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return VI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,y=s.form,E=s.menuIsOpen,_=s.required,R=this.getComponents(),N=R.Input,O=this.state,A=O.inputIsHidden,$=O.ariaSelection,G=this.commonProps,Q=d||this.getElementId("input"),j=Re(Re(Re({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":_,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?($==null?void 0:$.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?M.createElement(N,Pe({},G,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Q,innerRef:this.getInputRef,isDisabled:a,isHidden:A,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:y,type:"text",value:f},j)):M.createElement(kL,Pe({id:Q,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Mh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:y,value:""},j))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,y=a.SingleValue,E=a.Placeholder,_=this.commonProps,R=this.props,N=R.controlShouldRenderValue,O=R.isDisabled,A=R.isMulti,$=R.inputValue,G=R.placeholder,Q=this.state,j=Q.selectValue,B=Q.focusedValue,J=Q.isFocused;if(!this.hasValue()||!N)return $?null:M.createElement(E,Pe({},_,{key:"placeholder",isDisabled:O,isFocused:J,innerProps:{id:this.getElementId("placeholder")}}),G);if(A)return j.map(function(I,P){var D=I===B,L="".concat(s.getOptionLabel(I),"-").concat(s.getOptionValue(I));return M.createElement(u,Pe({},_,{components:{Container:d,Label:f,Remove:m},isFocused:D,isDisabled:O,key:L,index:P,removeProps:{onClick:function(){return s.removeValue(I)},onTouchEnd:function(){return s.removeValue(I)},onMouseDown:function(k){k.preventDefault()}},data:I}),s.formatOptionLabel(I,"value"))});if($)return null;var b=j[0];return M.createElement(y,Pe({},_,{data:b,isDisabled:O}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(a,Pe({},u,{innerProps:E,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!a||!m)return null;var E={"aria-hidden":"true"};return M.createElement(a,Pe({},u,{innerProps:E,isDisabled:f,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return M.createElement(u,Pe({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(a,Pe({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,y=a.MenuPortal,E=a.LoadingMessage,_=a.NoOptionsMessage,R=a.Option,N=this.commonProps,O=this.state.focusedOption,A=this.props,$=A.captureMenuScroll,G=A.inputValue,Q=A.isLoading,j=A.loadingMessage,B=A.minMenuHeight,J=A.maxMenuHeight,b=A.menuIsOpen,I=A.menuPlacement,P=A.menuPosition,D=A.menuPortalTarget,L=A.menuShouldBlockScroll,z=A.menuShouldScrollIntoView,k=A.noOptionsMessage,Fe=A.onMenuScrollToTop,De=A.onMenuScrollToBottom;if(!b)return null;var Ue=function(ce,Ce){var Ee=ce.type,ke=ce.data,Ie=ce.isDisabled,ye=ce.isSelected,Ge=ce.label,yt=ce.value,hn=O===ke,nr=Ie?void 0:function(){return s.onOptionHover(ke)},On=Ie?void 0:function(){return s.selectOption(ke)},$n="".concat(s.getElementId("option"),"-").concat(Ce),rr={id:$n,onClick:On,onMouseMove:nr,onMouseOver:nr,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:ye};return M.createElement(R,Pe({},N,{innerProps:rr,data:ke,isDisabled:Ie,isSelected:ye,key:$n,label:Ge,type:Ee,value:yt,isFocused:hn,innerRef:hn?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(ce.data,"menu"))},je;if(this.hasOptions())je=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var ce=Z.data,Ce=Z.options,Ee=Z.index,ke="".concat(s.getElementId("group"),"-").concat(Ee),Ie="".concat(ke,"-heading");return M.createElement(u,Pe({},N,{key:ke,data:ce,options:Ce,Heading:d,headingProps:{id:Ie,data:Z.data},label:s.formatGroupLabel(Z.data)}),Z.options.map(function(ye){return Ue(ye,"".concat(Ee,"-").concat(ye.index))}))}else if(Z.type==="option")return Ue(Z,"".concat(Z.index))});else if(Q){var re=j({inputValue:G});if(re===null)return null;je=M.createElement(E,N,re)}else{var me=k({inputValue:G});if(me===null)return null;je=M.createElement(_,N,me)}var se={minMenuHeight:B,maxMenuHeight:J,menuPlacement:I,menuPosition:P,menuShouldScrollIntoView:z},H=M.createElement(lM,Pe({},N,se),function(Z){var ce=Z.ref,Ce=Z.placerProps,Ee=Ce.placement,ke=Ce.maxHeight;return M.createElement(f,Pe({},N,se,{innerRef:ce,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:Q,placement:Ee}),M.createElement(ML,{captureEnabled:$,onTopArrive:Fe,onBottomArrive:De,lockEnabled:L},function(Ie){return M.createElement(m,Pe({},N,{innerRef:function(Ge){s.getMenuListRef(Ge),Ie(Ge)},innerProps:{role:"listbox","aria-multiselectable":N.isMulti,id:s.getElementId("listbox")},isLoading:Q,maxHeight:ke,focusedOption:O}),je)}))});return D||P==="fixed"?M.createElement(y,Pe({},N,{appendTo:D,controlElement:this.controlRef,menuPlacement:I,menuPosition:P}),H):H}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,y=a.required,E=this.state.selectValue;if(y&&!this.hasValue()&&!d)return M.createElement(jL,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var _=E.map(function(O){return s.getOptionValue(O)}).join(u);return M.createElement("input",{name:m,type:"hidden",value:_})}else{var R=E.length>0?E.map(function(O,A){return M.createElement("input",{key:"i-".concat(A),name:m,type:"hidden",value:s.getOptionValue(O)})}):M.createElement("input",{name:m,type:"hidden",value:""});return M.createElement("div",null,R)}else{var N=E[0]?this.getOptionValue(E[0]):"";return M.createElement("input",{name:m,type:"hidden",value:N})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,y=a.selectValue,E=this.getFocusableOptions();return M.createElement(IL,Pe({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:y,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,y=m.className,E=m.id,_=m.isDisabled,R=m.menuIsOpen,N=this.state.isFocused,O=this.commonProps=this.getCommonProps();return M.createElement(d,Pe({},O,{className:y,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:_,isFocused:N}),this.renderLiveRegion(),M.createElement(a,Pe({},O,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:_,isFocused:N,menuIsOpen:R}),M.createElement(f,Pe({},O,{isDisabled:_}),this.renderPlaceholderOrValue(),this.renderInput()),M.createElement(u,Pe({},O,{isDisabled:_}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,y=a.isFocused,E=a.prevWasFocused,_=a.instancePrefix,R=s.options,N=s.value,O=s.menuIsOpen,A=s.inputValue,$=s.isMulti,G=u0(N),Q={};if(u&&(N!==u.value||R!==u.options||O!==u.menuIsOpen||A!==u.inputValue)){var j=O?t4(s,G):[],B=O?I0(uh(s,G),"".concat(_,"-option")):[],J=d?n4(a,G):null,b=r4(a,j),I=Tp(B,b);Q={selectValue:G,focusedOption:b,focusedOptionId:I,focusableOptionsWithIds:B,focusedValue:J,clearFocusValueOnUpdate:!1}}var P=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},D=m,L=y&&E;return y&&!L&&(D={value:Gc($,G,G[0]||null),options:G,action:"initial-input-focus"},L=!E),(m==null?void 0:m.action)==="initial-input-focus"&&(D=null),Re(Re(Re({},Q),P),{},{prevProps:s,ariaSelection:D,prevWasFocused:L})}}]),t})(M.Component);LI.defaultProps=e4;var s4=M.forwardRef(function(n,e){var t=E2(n);return M.createElement(LI,Pe({ref:e},t))}),o4=s4;const Pl=["Anagrafica","Stato fisico","Obiettivi","Supporto"];function Me(n){return typeof n=="string"?n:n==null?"":String(n)}function Kc(n){return Me(n.uid).trim()||n.id}function b0(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:Me(t.name),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,weight:Me(t.weight),mediaUrl:Me(t.mediaUrl)}}).filter(e=>!!e):[]}function st(n){return Me(n).trim()||"Non compilato"}function a4(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function l4(n,e){const t=a4(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function u4(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function A0(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function ls(){return{name:"",sets:3,reps:10,weight:"",mediaUrl:""}}function FI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function R0(n,e){const t=FI(e);return n?{...t,fullName:Me(n.fullName).trim()||t.fullName,age:Me(n.age).trim(),sex:Me(n.sex).trim(),email:Me(n.email).trim()||t.email,phone:Me(n.phone).trim(),discoverySource:Me(n.discoverySource).trim(),heightCm:Me(n.heightCm).trim(),weightKg:Me(n.weightKg).trim(),pastProgram:Me(n.pastProgram).trim(),trainingFrequency:Me(n.trainingFrequency).trim(),workoutDuration:Me(n.workoutDuration).trim(),workoutLocation:Me(n.workoutLocation).trim(),equipment:Me(n.equipment).trim(),trainingTypeHistory:Me(n.trainingTypeHistory).trim(),hasInjuries:Me(n.hasInjuries).trim(),injuryDetails:Me(n.injuryDetails).trim(),objectivePrimary:Me(n.objectivePrimary).trim(),objectiveReason:Me(n.objectiveReason).trim(),expectedTimeline:Me(n.expectedTimeline).trim(),supportPreference:Me(n.supportPreference).trim(),supportPreferenceOther:Me(n.supportPreferenceOther).trim(),investmentRange:Me(n.investmentRange).trim(),whatBlockedSoFar:Me(n.whatBlockedSoFar).trim(),oneThingToImprove:Me(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:Me(n.riskIfNoChange).trim(),readiness:Me(n.readiness).trim(),notes:Me(n.notes).trim()}:t}function c4(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function P0(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function h4(){const{role:n,user:e,isSupervisor:t}=ja(),r=iu(),{showError:s,showSuccess:a}=Uh(),[u,d]=M.useState([]),[f,m]=M.useState([]),[y,E]=M.useState(!1),[_,R]=M.useState(null),[N,O]=M.useState(!1),[A,$]=M.useState(!1),[G,Q]=M.useState(0),[j,B]=M.useState(FI()),[J,b]=M.useState(null),[I,P]=M.useState(null),[D,L]=M.useState(!1),[z,k]=M.useState([]),[Fe,De]=M.useState(""),[Ue,je]=M.useState(""),[re,me]=M.useState("clients"),[se,H]=M.useState(""),[Z,ce]=M.useState(""),[Ce,Ee]=M.useState([ls()]),ke=J!==null,Ie=u.find(F=>Kc(F)===se)??null,ye=f.find(F=>F.id===se)??f.find(F=>F.clientId===se),Ge=l4(Me(_==null?void 0:_.phone),Me(_==null?void 0:_.fullName)),yt=u.reduce((F,le)=>{const we=Me(le.displayName).trim()||Me(le.email).trim()||le.id;return F[Kc(le)]=we,F[le.id]=we,F},{}),hn=u.map(F=>({value:Kc(F),label:Me(F.displayName).trim()||Me(F.email)||F.id})),nr=hn.find(F=>F.value===se)??null,On=Math.round((G+1)/Pl.length*100),$n=[{id:"code",label:"Codice",icon:""},{id:"clients",label:"Clienti",icon:""},{id:"plans",label:"Schede",icon:""},{id:"overview",label:"Panoramica",icon:""},...t?[{id:"supervisor",label:"Supervisor",icon:""}]:[]],rr=z.filter(F=>F.uid!==(e==null?void 0:e.uid)).filter(F=>!F.isSupervisor).filter(F=>{const le=Fe.trim().toLowerCase();return le?F.displayName.toLowerCase().includes(le)||F.email.toLowerCase().includes(le):!0}).sort((F,le)=>{const we=F.expiresAt?new Date(F.expiresAt).getTime():Number.MAX_SAFE_INTEGER,nt=le.expiresAt?new Date(le.expiresAt).getTime():Number.MAX_SAFE_INTEGER;return we-nt});M.useEffect(()=>{!t&&re==="supervisor"&&me("clients")},[t,re]);const xs=M.useMemo(()=>({control:(F,le)=>({...F,minHeight:48,borderRadius:12,borderColor:le.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:le.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:F=>({...F,borderRadius:12,overflow:"hidden",zIndex:50}),option:(F,le)=>({...F,backgroundColor:le.isSelected?"#ff6a00":le.isFocused?"rgba(255,106,0,0.10)":"#fff",color:le.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);M.useEffect(()=>{async function F(){if(!se){R(null);return}try{const le=await HS(se,"onboarding");R(le.data()??null)}catch{R(null)}}F()},[se]),M.useEffect(()=>{if(!se)return;if(!ye){ce(""),Ee([ls()]);return}ce(ye.title??"");const F=b0(ye.exercises).filter(le=>le.name.trim().length>0);Ee(F.length>0?F:[ls()])},[se,ye==null?void 0:ye.id]);async function ii(){if(n){E(!0);try{const we=(await XD(e==null?void 0:e.uid)).docs.map(nt=>({id:nt.id,...nt.data()})).sort((nt,Ct)=>{const Hn=Me(nt.displayName||nt.email||nt.id).toLowerCase(),Li=Me(Ct.displayName||Ct.email||Ct.id).toLowerCase();return Hn.localeCompare(Li)});d(we),!se&&we[0]&&H(Kc(we[0]));try{const nt=await WS(n);m(nt.docs.map(Ct=>({id:Ct.id,...Ct.data()})))}catch(nt){m([]),s(Xt(nt))}}catch(F){console.error("Coach action failed:",F),s(Xt(F))}finally{E(!1)}}}M.useEffect(()=>{ii()},[n,e==null?void 0:e.uid]),M.useEffect(()=>{!I||I.isSupervisor||I.isExpired&&Ci().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[I==null?void 0:I.status,I==null?void 0:I.isExpired,I==null?void 0:I.isSupervisor]),M.useEffect(()=>{async function F(){if(!(!n||n==="client")){L(!0);try{const le=await $w();P(le)}catch(le){s(Xt(le))}finally{L(!1)}}}F()},[n,e==null?void 0:e.uid]);async function Ns(){if(t)try{const F=await WD();k(F.coaches??[])}catch(F){s(Xt(F))}}M.useEffect(()=>{Ns()},[t,e==null?void 0:e.uid]);async function Pr(F,le){E(!0);try{await F(),a(le),await ii()}catch(we){s(Xt(we))}finally{E(!1)}}function ir(){Ee(F=>[...F,ls()])}function sr(F){Ee(le=>le.length<=1?le:le.filter((we,nt)=>nt!==F))}function Os(F){dn(F,ls())}function dn(F,le){Ee(we=>we.map((nt,Ct)=>Ct===F?{...nt,...le}:nt))}function We(F,le){B(we=>({...we,[F]:le}))}function Vi(){if(!ye){ce(""),Ee([ls()]);return}ce(ye.title??"");const F=b0(ye.exercises).filter(le=>le.name.trim().length>0);Ee(F.length>0?F:[ls()])}function St(){if(!se){s("Seleziona prima un cliente.");return}const F={name:Me(Ie==null?void 0:Ie.displayName).trim(),email:Me(Ie==null?void 0:Ie.email).trim()};B(R0(_,F)),Q(0),$(!0)}function It(){const F={name:Me(Ie==null?void 0:Ie.displayName).trim(),email:Me(Ie==null?void 0:Ie.email).trim()};B(R0(_,F)),Q(0),$(!1)}function or(){return j.fullName.trim()?j.email.trim()?j.phone.trim()?j.age.trim()?j.sex.trim()?j.heightCm.trim()?j.weightKg.trim()?j.pastProgram.trim()?j.trainingFrequency.trim()?j.workoutDuration.trim()?j.workoutLocation.trim()?j.equipment.trim()?j.objectivePrimary.trim()?j.objectiveReason.trim()?j.expectedTimeline.trim()?j.supportPreference.trim()?j.investmentRange.trim()?j.readiness.trim()?null:"Compila disponibilit a partire.":"Compila fascia investimento.":"Compila supporto preferito.":"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function Ds(){if(!se){s("Seleziona prima un cliente.");return}const F=or();if(F){s(F);return}const le={fullName:j.fullName.trim(),age:j.age.trim(),sex:j.sex.trim(),email:j.email.trim(),phone:j.phone.trim(),discoverySource:j.discoverySource.trim(),heightCm:j.heightCm.trim(),weightKg:j.weightKg.trim(),pastProgram:j.pastProgram.trim(),trainingFrequency:j.trainingFrequency.trim(),workoutDuration:j.workoutDuration.trim(),workoutLocation:j.workoutLocation.trim(),equipment:j.equipment.trim(),trainingTypeHistory:j.trainingTypeHistory.trim(),hasInjuries:j.hasInjuries.trim(),injuryDetails:j.injuryDetails.trim(),objectivePrimary:j.objectivePrimary.trim(),objectiveReason:j.objectiveReason.trim(),expectedTimeline:j.expectedTimeline.trim(),supportPreference:j.supportPreference.trim(),supportPreferenceOther:j.supportPreferenceOther.trim(),investmentRange:j.investmentRange.trim(),whatBlockedSoFar:j.whatBlockedSoFar.trim(),oneThingToImprove:j.oneThingToImprove.trim(),importanceScore:Number(j.importanceScore||0),riskIfNoChange:j.riskIfNoChange.trim(),readiness:j.readiness.trim(),goal:j.objectivePrimary.trim(),experienceLevel:j.pastProgram.trim(),trainingDaysPerWeek:c4(j.trainingFrequency),notes:j.notes.trim(),compiledBy:"coach"};E(!0);try{await YD(se,le),R(le),a("Anagrafica cliente salvata con successo."),$(!1)}catch(we){s(Xt(we))}finally{E(!1)}}async function kr(){const F=Z.trim();if(!F){s("Inserisci un titolo per la scheda.");return}const le=Ce.map(we=>({name:we.name.trim(),sets:Number(we.sets)||0,reps:Number(we.reps)||0,weight:we.weight.trim(),mediaUrl:we.mediaUrl.trim()})).filter(we=>we.name.length>0);if(le.length===0){s("Aggiungi almeno un esercizio con nome.");return}ye?await Pr(()=>e2(ye.id,{title:F,status:"active",exercises:le}),"Scheda aggiornata con successo."):await Pr(()=>JD({clientId:se,title:F,status:"active",exercises:le}),"Scheda creata e subito visibile al cliente."),O(!1)}function si(){if(!se){s("Seleziona prima un cliente.");return}Vi(),O(!0)}function oi(){Vi(),O(!1)}async function Vs(F,le){if(le){if(!le.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!se){s("Seleziona prima un cliente.");return}b(F);try{const we=await n2(se,le);dn(F,{mediaUrl:we}),a("Media caricato con successo.")}catch(we){console.error("Media upload failed:",we),s(Xt(we))}finally{b(null)}}}async function Ms(){!ye||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await Pr(()=>t2(ye.id),"Scheda eliminata con successo."),ce(""),Ee([ls()]),O(!1))}async function Mi(F,le){je(F);try{if(le==="activate"){const we=z.find(nt=>nt.uid===F);(we==null?void 0:we.status)==="disabled"?(await Hw(F),a("Coach sbloccato con successo.")):(we==null?void 0:we.status)==="active_paid"?(await qD(F),a("Abbonamento rinnovato di 1 anno.")):(await Hw(F),a("Abbonamento attivato."))}else await GD(F),a("Abbonamento disattivato.");await Ns()}catch(we){s(Xt(we))}finally{je("")}}async function Ls(){L(!0);try{await jS();const F=await $w();P(F),a("Periodo di prova attivato.")}catch(F){s(Xt(F))}finally{L(!1)}}return T.jsxs(QS,{role:n==="trainer"?"trainer":"admin",subtitle:"Flusso diviso per tab: clienti, schede e controllo accessi.",title:"Area Coach",sections:$n,activeSection:re,onSectionChange:F=>me(F),children:[I!=null&&I.requiresTrialAcceptance?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h2",{children:"Prova gratuita 15 giorni"}),T.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),T.jsx("button",{className:"btn",type:"button",disabled:D,onClick:()=>void Ls(),children:D?"Attivazione...":"Accetta e continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Ci().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,re==="code"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Il tuo codice coach"}),T.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),T.jsx("p",{className:"coach-code",children:(I==null?void 0:I.coachCode)||"Caricamento..."}),D?T.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,I!=null&&I.isSupervisor?T.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):T.jsxs("p",{className:"hint",children:["Stato accesso: ",T.jsx("strong",{children:(I==null?void 0:I.status)??"non disponibile"}),"  ","Scadenza: ",T.jsx("strong",{children:P0((I==null?void 0:I.expiresAt)??(I==null?void 0:I.trialEndsAt)??(I==null?void 0:I.subscriptionEndsAt))})]})]}):null,t&&re==="supervisor"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Gestione coach (Supervisor)"}),T.jsxs("label",{children:["Cerca coach per nome o email",T.jsx("input",{value:Fe,onChange:F=>De(F.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),T.jsxs("div",{className:"supervisor-list",children:[rr.map(F=>T.jsxs("article",{className:"supervisor-row",children:[T.jsxs("div",{children:[T.jsx("p",{children:T.jsx("strong",{children:F.displayName||"Coach senza nome"})}),T.jsx("p",{className:"hint",children:F.email}),T.jsxs("p",{className:"hint",children:["Codice: ",F.coachCode||"-"]}),T.jsxs("p",{className:"hint",children:["Stato: ",F.isSupervisor?"supervisor_active":F.status]}),T.jsxs("p",{className:"hint",children:["Scadenza: ",P0(F.expiresAt)]})]}),T.jsxs("div",{className:"supervisor-actions",children:[T.jsx("button",{className:"btn btn-ghost",type:"button",disabled:F.isSupervisor||Ue===F.uid,onClick:()=>void Mi(F.uid,"activate"),children:F.status==="disabled"?"Sblocca":F.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),T.jsx("button",{className:"btn btn-danger",type:"button",disabled:F.isSupervisor||Ue===F.uid,onClick:()=>void Mi(F.uid,"disable"),children:"Disattiva"})]})]},F.uid)),rr.length===0?T.jsx("article",{className:"supervisor-row",children:T.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,re==="clients"||re==="plans"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Gestione cliente"}),T.jsxs("label",{children:["Clienti registrati",T.jsx(o4,{styles:xs,options:hn,value:nr,onChange:F=>H((F==null?void 0:F.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void ii(),children:"Aggiorna lista clienti"}),u.length===0?T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[T.jsx("h2",{children:"Nessun cliente associato"}),T.jsx("p",{className:"hint",children:"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):T.jsxs(T.Fragment,{children:[re==="clients"?T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[T.jsx("h2",{children:"Anagrafica cliente"}),T.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),T.jsx("button",{className:"btn",type:"button",onClick:St,disabled:y||!se,children:_?"Modifica anagrafica completa":"Compila anagrafica completa"}),Ge?T.jsx("a",{className:"btn btn-whatsapp",href:Ge,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):T.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Anagrafica"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Nome:"})," ",st(_==null?void 0:_.fullName)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Et:"})," ",st(_==null?void 0:_.age)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Sesso:"})," ",st(_==null?void 0:_.sex)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Email:"})," ",st(_==null?void 0:_.email)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Telefono:"})," ",st(_==null?void 0:_.phone)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Come ci ha conosciuto:"})," ",st(_==null?void 0:_.discoverySource)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Stato fisico e allenamento"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Altezza:"})," ",st(_==null?void 0:_.heightCm)," cm"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Peso:"})," ",st(_==null?void 0:_.weightKg)," kg"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Esperienza programmi:"})," ",st((_==null?void 0:_.pastProgram)||(_==null?void 0:_.experienceLevel))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Allenamenti settimanali:"})," ",st((_==null?void 0:_.trainingFrequency)||(_==null?void 0:_.trainingDaysPerWeek))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Durata sessione:"})," ",st(_==null?void 0:_.workoutDuration)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Luogo allenamento:"})," ",st(_==null?void 0:_.workoutLocation)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Attrezzatura:"})," ",st(_==null?void 0:_.equipment)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Allenamenti svolti:"})," ",st(_==null?void 0:_.trainingTypeHistory)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Infortuni/problemi:"})," ",st(_==null?void 0:_.hasInjuries)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Dettagli infortuni:"})," ",st(_==null?void 0:_.injuryDetails)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Obiettivi"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Obiettivo principale:"})," ",st((_==null?void 0:_.objectivePrimary)||(_==null?void 0:_.goal))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Perch:"})," ",st(_==null?void 0:_.objectiveReason)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Timeline risultati:"})," ",st(_==null?void 0:_.expectedTimeline)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",st((_==null?void 0:_.whatBlockedSoFar)||(_==null?void 0:_.notes))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",st(_==null?void 0:_.oneThingToImprove)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Importanza obiettivo:"})," ",st(_==null?void 0:_.importanceScore)," / 10"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Rischio se non cambia:"})," ",st(_==null?void 0:_.riskIfNoChange)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Supporto e decisione"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Supporto preferito:"})," ",st(_==null?void 0:_.supportPreference)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Altro supporto:"})," ",st(_==null?void 0:_.supportPreferenceOther)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Fascia investimento:"})," ",st(_==null?void 0:_.investmentRange)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Disponibilit a partire:"})," ",st(_==null?void 0:_.readiness)]})]})]}):null,re==="plans"?T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"hint",children:ye?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),T.jsx("button",{className:"btn",disabled:y,onClick:si,type:"button",children:ye?"Modifica scheda":"Crea scheda"}),ye?T.jsx("button",{className:"btn btn-danger",disabled:y,onClick:()=>void Ms(),type:"button",children:"Elimina scheda"}):null]}):null]})]}):null,A?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:"Anagrafica completa cliente"}),T.jsxs("p",{className:"hero-sub",children:["Step ",G+1," di ",Pl.length,"  Completamento ",On,"%"]}),T.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:T.jsx("div",{className:"onboarding-progress-bar",style:{width:`${On}%`}})}),T.jsx("div",{className:"step-tabs",children:Pl.map((F,le)=>T.jsx("button",{className:`step-tab ${G===le?"step-tab-active":""}`.trim(),type:"button",onClick:()=>Q(le),children:F},F))}),G===0?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Nome e cognome *",T.jsx("input",{value:j.fullName,onChange:F=>We("fullName",F.target.value)})]}),T.jsxs("label",{children:["Et *",T.jsx("input",{type:"number",min:12,max:99,value:j.age,onChange:F=>We("age",F.target.value)})]}),T.jsxs("label",{children:["Sesso *",T.jsx("input",{value:j.sex,onChange:F=>We("sex",F.target.value)})]}),T.jsxs("label",{children:["E-mail *",T.jsx("input",{type:"email",value:j.email,onChange:F=>We("email",F.target.value)})]}),T.jsxs("label",{children:["Telefono *",T.jsx("input",{type:"tel",value:j.phone,onChange:F=>We("phone",F.target.value)})]}),T.jsxs("label",{children:["Come ci ha conosciuto",T.jsx("input",{value:j.discoverySource,onChange:F=>We("discoverySource",F.target.value)})]})]}):null,G===1?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Altezza (cm) *",T.jsx("input",{type:"number",min:100,max:250,value:j.heightCm,onChange:F=>We("heightCm",F.target.value)})]}),T.jsxs("label",{children:["Peso (kg) *",T.jsx("input",{type:"number",min:30,max:250,value:j.weightKg,onChange:F=>We("weightKg",F.target.value)})]}),T.jsxs("label",{children:["Programmi precedenti *",T.jsx("input",{value:j.pastProgram,onChange:F=>We("pastProgram",F.target.value),placeholder:"Es. Si con coach online"})]}),T.jsxs("label",{children:["Frequenza allenamenti *",T.jsx("input",{value:j.trainingFrequency,onChange:F=>We("trainingFrequency",F.target.value),placeholder:"Es. 3-4 a settimana"})]}),T.jsxs("label",{children:["Durata allenamento *",T.jsx("input",{value:j.workoutDuration,onChange:F=>We("workoutDuration",F.target.value),placeholder:"Es. 45 minuti"})]}),T.jsxs("label",{children:["Dove si allena *",T.jsx("input",{value:j.workoutLocation,onChange:F=>We("workoutLocation",F.target.value)})]}),T.jsxs("label",{children:["Attrezzatura disponibile *",T.jsx("input",{value:j.equipment,onChange:F=>We("equipment",F.target.value)})]}),T.jsxs("label",{children:["Allenamenti fatti",T.jsx("textarea",{value:j.trainingTypeHistory,onChange:F=>We("trainingTypeHistory",F.target.value)})]}),T.jsxs("label",{children:["Infortuni/problemi",T.jsx("input",{value:j.hasInjuries,onChange:F=>We("hasInjuries",F.target.value),placeholder:"Si/No"})]}),T.jsxs("label",{children:["Dettagli infortuni",T.jsx("textarea",{value:j.injuryDetails,onChange:F=>We("injuryDetails",F.target.value)})]})]}):null,G===2?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Obiettivo principale *",T.jsx("input",{value:j.objectivePrimary,onChange:F=>We("objectivePrimary",F.target.value)})]}),T.jsxs("label",{children:["Perch questo obiettivo? *",T.jsx("textarea",{value:j.objectiveReason,onChange:F=>We("objectiveReason",F.target.value)})]}),T.jsxs("label",{children:["Timeline risultati *",T.jsx("input",{value:j.expectedTimeline,onChange:F=>We("expectedTimeline",F.target.value)})]}),T.jsxs("label",{children:["Cosa lo ha bloccato",T.jsx("textarea",{value:j.whatBlockedSoFar,onChange:F=>We("whatBlockedSoFar",F.target.value)})]}),T.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",T.jsx("textarea",{value:j.oneThingToImprove,onChange:F=>We("oneThingToImprove",F.target.value)})]}),T.jsxs("label",{children:["Importanza obiettivo (1-10)",T.jsx("input",{type:"number",min:1,max:10,value:j.importanceScore,onChange:F=>We("importanceScore",F.target.value)})]}),T.jsxs("label",{children:["Rischio se non cambia",T.jsx("textarea",{value:j.riskIfNoChange,onChange:F=>We("riskIfNoChange",F.target.value)})]})]}):null,G===3?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Supporto preferito *",T.jsx("input",{value:j.supportPreference,onChange:F=>We("supportPreference",F.target.value)})]}),T.jsxs("label",{children:["Altro supporto",T.jsx("input",{value:j.supportPreferenceOther,onChange:F=>We("supportPreferenceOther",F.target.value)})]}),T.jsxs("label",{children:["Fascia investimento *",T.jsx("input",{value:j.investmentRange,onChange:F=>We("investmentRange",F.target.value),placeholder:"Es. 150-250"})]}),T.jsxs("label",{children:["Disponibilit a partire *",T.jsx("input",{value:j.readiness,onChange:F=>We("readiness",F.target.value)})]}),T.jsxs("label",{children:["Note coach",T.jsx("textarea",{value:j.notes,onChange:F=>We("notes",F.target.value)})]})]}):null,T.jsxs("div",{className:"onboarding-actions",children:[T.jsx("button",{className:"btn btn-ghost",type:"button",disabled:G===0,onClick:()=>Q(F=>Math.max(F-1,0)),children:"Indietro"}),G<Pl.length-1?T.jsx("button",{className:"btn",type:"button",onClick:()=>Q(F=>Math.min(F+1,Pl.length-1)),children:"Continua"}):T.jsx("button",{className:"btn",type:"button",onClick:()=>void Ds(),disabled:y,children:y?"Salvataggio...":"Salva anagrafica"})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:It,children:"Chiudi"})]})}):null,N?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:ye?"Modifica scheda":"Compila la scheda"}),T.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),T.jsxs("label",{children:["Titolo scheda *",T.jsx("input",{value:Z,onChange:F=>ce(F.target.value),placeholder:"Forza 4 settimane",required:!0})]}),Ce.map((F,le)=>T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[T.jsxs("div",{className:"exercise-head",children:[T.jsxs("h2",{children:["Esercizio ",le+1]}),T.jsx("button",{className:"icon-btn",type:"button",onClick:()=>Os(le),"aria-label":`Reset esercizio ${le+1}`,title:"Reset esercizio",children:""})]}),T.jsxs("label",{children:["Nome esercizio",T.jsx("input",{value:F.name,onChange:we=>dn(le,{name:we.target.value}),placeholder:"Es. Squat bilanciere"})]}),T.jsxs("label",{children:["Numero serie",T.jsx("input",{type:"number",min:1,value:F.sets,onChange:we=>dn(le,{sets:Number(we.target.value)})})]}),T.jsxs("label",{children:["Ripetizioni",T.jsx("input",{type:"number",min:1,value:F.reps,onChange:we=>dn(le,{reps:Number(we.target.value)}),placeholder:"10"})]}),T.jsxs("label",{children:["Peso",T.jsx("input",{value:F.weight,onChange:we=>dn(le,{weight:we.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),T.jsxs("label",{children:["URL video (YouTube o link diretto)",T.jsx("input",{value:u4(F.mediaUrl)?F.mediaUrl:"",onChange:we=>dn(le,{mediaUrl:we.target.value}),placeholder:"https://..."})]}),T.jsxs("label",{children:["Oppure carica un'immagine",T.jsx("input",{type:"file",accept:"image/*",onChange:we=>{var nt;return void Vs(le,((nt=we.target.files)==null?void 0:nt[0])??null)},disabled:J===le}),A0(F.mediaUrl)?T.jsx("img",{src:F.mediaUrl,alt:`Anteprima esercizio ${le+1}`,className:"exercise-upload-preview"}):null]}),A0(F.mediaUrl)?T.jsxs("p",{className:"hint",children:["Immagine caricata."," ",T.jsx("button",{className:"btn-link",type:"button",onClick:()=>dn(le,{mediaUrl:""}),children:"Rimuovi"})]}):null,J===le?T.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>sr(le),children:"Rimuovi esercizio"})]},`exercise-${le}`)),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:ir,children:"Aggiungi esercizio"}),T.jsx("button",{className:"btn",type:"button",disabled:y||ke,onClick:()=>void kr(),children:ke?"Attendi caricamento media...":ye?"Salva modifiche":"Salva scheda tecnica"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:oi,children:"Chiudi"})]})}):null,re==="overview"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Panoramica"}),T.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),T.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),T.jsx("ul",{className:"list",children:f.slice(0,5).map(F=>{var le;return T.jsxs("li",{children:[T.jsx("strong",{children:F.title}),"  ",((le=F.exercises)==null?void 0:le.length)??0," esercizi  cliente ",yt[F.clientId]||F.clientId]},F.id)})})]}):null,y?T.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function d4(){const{user:n,role:e}=ja(),t=iu(),{showError:r,showSuccess:s}=Uh(),[a,u]=M.useState(!1),[d,f]=M.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return T.jsx(Ir,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return T.jsx(Ir,{to:"/app/coach",replace:!0});function m(_,R){f(N=>({...N,[_]:R}))}function y(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function E(){const _=y();if(_){r(_);return}u(!0);try{await HD({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(R){r(Xt(R))}finally{u(!1)}}return T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),T.jsx("h1",{children:"Completa il tuo profilo"}),T.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),T.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:T.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),T.jsxs("label",{children:["Nome e cognome *",T.jsx("input",{value:d.fullName,onChange:_=>m("fullName",_.target.value),placeholder:"Nome e cognome"})]}),T.jsxs("label",{children:["E-mail *",T.jsx("input",{value:d.email,onChange:_=>m("email",_.target.value),type:"email",placeholder:"nome@esempio.com"})]}),T.jsxs("label",{children:["Numero di telefono *",T.jsx("input",{value:d.phone,onChange:_=>m("phone",_.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),T.jsxs("label",{children:["Codice coach *",T.jsx("input",{value:d.coachCode,onChange:_=>m("coachCode",_.target.value),placeholder:"Es. lorenzobeastly"})]}),T.jsx("button",{className:"btn",disabled:a,type:"button",onClick:()=>void E(),children:a?"Salvataggio...":"Continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Ci(),children:"Esci e cambia account"})]})})}function jI(){return T.jsx("main",{className:"page page-center",children:T.jsxs("div",{className:"card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Caricamento in corso"})]})})}class f4 extends M.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Qualcosa non ha funzionato"}),T.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function k0({allow:n,children:e}){const{user:t,role:r,initializing:s}=ja();return s?T.jsx(jI,{}):t?r?n.includes(r)?e:T.jsx(Ir,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:T.jsx(Ir,{to:"/onboarding",replace:!0}):T.jsx(Ir,{to:"/auth",replace:!0})}function p4(){const{user:n,role:e,initializing:t}=ja();return t?T.jsx(jI,{}):n?e?T.jsx(Ir,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):T.jsx(Ir,{to:"/app/client",replace:!0}):T.jsx(Ir,{to:"/auth",replace:!0})}function m4(){return T.jsx(f4,{children:T.jsxs(HC,{children:[T.jsx(lo,{path:"/",element:T.jsx(p4,{})}),T.jsx(lo,{path:"/auth",element:T.jsx(d2,{})}),T.jsx(lo,{path:"/onboarding",element:T.jsx(d4,{})}),T.jsx(lo,{path:"/app/coach",element:T.jsx(k0,{allow:["admin","trainer"],children:T.jsx(h4,{})})}),T.jsx(lo,{path:"/app/client",element:T.jsx(k0,{allow:["client"],children:T.jsx(p2,{})})}),T.jsx(lo,{path:"*",element:T.jsx(Ir,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});J1.createRoot(document.getElementById("root")).render(T.jsx(N0.StrictMode,{children:T.jsx(XC,{children:T.jsx(GC,{children:T.jsx(m4,{})})})}));
