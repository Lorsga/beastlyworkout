function OT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function y_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kd={exports:{}},Ya={},Qd={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function VT(){if(dy)return ke;dy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),I=Symbol.iterator;function S(b){return b===null||typeof b!="object"?null:(b=I&&b[I]||b["@@iterator"],typeof b=="function"?b:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function O(b,W,ce){this.props=b,this.context=W,this.refs=q,this.updater=ce||k}O.prototype.isReactComponent={},O.prototype.setState=function(b,W){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,W,"setState")},O.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function $(){}$.prototype=O.prototype;function te(b,W,ce){this.props=b,this.context=W,this.refs=q,this.updater=ce||k}var ie=te.prototype=new $;ie.constructor=te,z(ie,O.prototype),ie.isPureReactComponent=!0;var oe=Array.isArray,Ie=Object.prototype.hasOwnProperty,de={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(b,W,ce){var Ae,Re={},be=null,je=null;if(W!=null)for(Ae in W.ref!==void 0&&(je=W.ref),W.key!==void 0&&(be=""+W.key),W)Ie.call(W,Ae)&&!D.hasOwnProperty(Ae)&&(Re[Ae]=W[Ae]);var Ue=arguments.length-2;if(Ue===1)Re.children=ce;else if(1<Ue){for(var Ge=Array(Ue),At=0;At<Ue;At++)Ge[At]=arguments[At+2];Re.children=Ge}if(b&&b.defaultProps)for(Ae in Ue=b.defaultProps,Ue)Re[Ae]===void 0&&(Re[Ae]=Ue[Ae]);return{$$typeof:n,type:b,key:be,ref:je,props:Re,_owner:de.current}}function P(b,W){return{$$typeof:n,type:b.type,key:W,ref:b.ref,props:b.props,_owner:b._owner}}function x(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function L(b){var W={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ce){return W[ce]})}var M=/\/+/g;function C(b,W){return typeof b=="object"&&b!==null&&b.key!=null?L(""+b.key):W.toString(36)}function $e(b,W,ce,Ae,Re){var be=typeof b;(be==="undefined"||be==="boolean")&&(b=null);var je=!1;if(b===null)je=!0;else switch(be){case"string":case"number":je=!0;break;case"object":switch(b.$$typeof){case n:case e:je=!0}}if(je)return je=b,Re=Re(je),b=Ae===""?"."+C(je,0):Ae,oe(Re)?(ce="",b!=null&&(ce=b.replace(M,"$&/")+"/"),$e(Re,W,ce,"",function(At){return At})):Re!=null&&(x(Re)&&(Re=P(Re,ce+(!Re.key||je&&je.key===Re.key?"":(""+Re.key).replace(M,"$&/")+"/")+b)),W.push(Re)),1;if(je=0,Ae=Ae===""?".":Ae+":",oe(b))for(var Ue=0;Ue<b.length;Ue++){be=b[Ue];var Ge=Ae+C(be,Ue);je+=$e(be,W,ce,Ge,Re)}else if(Ge=S(b),typeof Ge=="function")for(b=Ge.call(b),Ue=0;!(be=b.next()).done;)be=be.value,Ge=Ae+C(be,Ue++),je+=$e(be,W,ce,Ge,Re);else if(be==="object")throw W=String(b),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return je}function qe(b,W,ce){if(b==null)return b;var Ae=[],Re=0;return $e(b,Ae,"","",function(be){return W.call(ce,be,Re++)}),Ae}function Be(b){if(b._status===-1){var W=b._result;W=W(),W.then(function(ce){(b._status===0||b._status===-1)&&(b._status=1,b._result=ce)},function(ce){(b._status===0||b._status===-1)&&(b._status=2,b._result=ce)}),b._status===-1&&(b._status=0,b._result=W)}if(b._status===1)return b._result.default;throw b._result}var Pe={current:null},re={transition:null},X={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:re,ReactCurrentOwner:de};function J(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:qe,forEach:function(b,W,ce){qe(b,function(){W.apply(this,arguments)},ce)},count:function(b){var W=0;return qe(b,function(){W++}),W},toArray:function(b){return qe(b,function(W){return W})||[]},only:function(b){if(!x(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},ke.Component=O,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=te,ke.StrictMode=i,ke.Suspense=m,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,ke.act=J,ke.cloneElement=function(b,W,ce){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Ae=z({},b.props),Re=b.key,be=b.ref,je=b._owner;if(W!=null){if(W.ref!==void 0&&(be=W.ref,je=de.current),W.key!==void 0&&(Re=""+W.key),b.type&&b.type.defaultProps)var Ue=b.type.defaultProps;for(Ge in W)Ie.call(W,Ge)&&!D.hasOwnProperty(Ge)&&(Ae[Ge]=W[Ge]===void 0&&Ue!==void 0?Ue[Ge]:W[Ge])}var Ge=arguments.length-2;if(Ge===1)Ae.children=ce;else if(1<Ge){Ue=Array(Ge);for(var At=0;At<Ge;At++)Ue[At]=arguments[At+2];Ae.children=Ue}return{$$typeof:n,type:b.type,key:Re,ref:be,props:Ae,_owner:je}},ke.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},ke.createElement=A,ke.createFactory=function(b){var W=A.bind(null,b);return W.type=b,W},ke.createRef=function(){return{current:null}},ke.forwardRef=function(b){return{$$typeof:d,render:b}},ke.isValidElement=x,ke.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Be}},ke.memo=function(b,W){return{$$typeof:y,type:b,compare:W===void 0?null:W}},ke.startTransition=function(b){var W=re.transition;re.transition={};try{b()}finally{re.transition=W}},ke.unstable_act=J,ke.useCallback=function(b,W){return Pe.current.useCallback(b,W)},ke.useContext=function(b){return Pe.current.useContext(b)},ke.useDebugValue=function(){},ke.useDeferredValue=function(b){return Pe.current.useDeferredValue(b)},ke.useEffect=function(b,W){return Pe.current.useEffect(b,W)},ke.useId=function(){return Pe.current.useId()},ke.useImperativeHandle=function(b,W,ce){return Pe.current.useImperativeHandle(b,W,ce)},ke.useInsertionEffect=function(b,W){return Pe.current.useInsertionEffect(b,W)},ke.useLayoutEffect=function(b,W){return Pe.current.useLayoutEffect(b,W)},ke.useMemo=function(b,W){return Pe.current.useMemo(b,W)},ke.useReducer=function(b,W,ce){return Pe.current.useReducer(b,W,ce)},ke.useRef=function(b){return Pe.current.useRef(b)},ke.useState=function(b){return Pe.current.useState(b)},ke.useSyncExternalStore=function(b,W,ce){return Pe.current.useSyncExternalStore(b,W,ce)},ke.useTransition=function(){return Pe.current.useTransition()},ke.version="18.3.1",ke}var fy;function Xf(){return fy||(fy=1,Qd.exports=VT()),Qd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function LT(){if(py)return Ya;py=1;var n=Xf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,m,y){var v,I={},S=null,k=null;y!==void 0&&(S=""+y),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(k=m.ref);for(v in m)i.call(m,v)&&!l.hasOwnProperty(v)&&(I[v]=m[v]);if(d&&d.defaultProps)for(v in m=d.defaultProps,m)I[v]===void 0&&(I[v]=m[v]);return{$$typeof:e,type:d,key:S,ref:k,props:I,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=h,Ya.jsxs=h,Ya}var my;function MT(){return my||(my=1,Kd.exports=LT()),Kd.exports}var E=MT(),Q=Xf();const v_=y_(Q),jT=OT({__proto__:null,default:v_},[Q]);var nc={},Xd={exports:{}},sn={},Jd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function UT(){return gy||(gy=1,(function(n){function e(re,X){var J=re.length;re.push(X);e:for(;0<J;){var b=J-1>>>1,W=re[b];if(0<o(W,X))re[b]=X,re[J]=W,J=b;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var X=re[0],J=re.pop();if(J!==X){re[0]=J;e:for(var b=0,W=re.length,ce=W>>>1;b<ce;){var Ae=2*(b+1)-1,Re=re[Ae],be=Ae+1,je=re[be];if(0>o(Re,J))be<W&&0>o(je,Re)?(re[b]=je,re[be]=J,b=be):(re[b]=Re,re[Ae]=J,b=Ae);else if(be<W&&0>o(je,J))re[b]=je,re[be]=J,b=be;else break e}}return X}function o(re,X){var J=re.sortIndex-X.sortIndex;return J!==0?J:re.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var m=[],y=[],v=1,I=null,S=3,k=!1,z=!1,q=!1,O=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(re){for(var X=t(y);X!==null;){if(X.callback===null)i(y);else if(X.startTime<=re)i(y),X.sortIndex=X.expirationTime,e(m,X);else break;X=t(y)}}function oe(re){if(q=!1,ie(re),!z)if(t(m)!==null)z=!0,Be(Ie);else{var X=t(y);X!==null&&Pe(oe,X.startTime-re)}}function Ie(re,X){z=!1,q&&(q=!1,$(A),A=-1),k=!0;var J=S;try{for(ie(X),I=t(m);I!==null&&(!(I.expirationTime>X)||re&&!L());){var b=I.callback;if(typeof b=="function"){I.callback=null,S=I.priorityLevel;var W=b(I.expirationTime<=X);X=n.unstable_now(),typeof W=="function"?I.callback=W:I===t(m)&&i(m),ie(X)}else i(m);I=t(m)}if(I!==null)var ce=!0;else{var Ae=t(y);Ae!==null&&Pe(oe,Ae.startTime-X),ce=!1}return ce}finally{I=null,S=J,k=!1}}var de=!1,D=null,A=-1,P=5,x=-1;function L(){return!(n.unstable_now()-x<P)}function M(){if(D!==null){var re=n.unstable_now();x=re;var X=!0;try{X=D(!0,re)}finally{X?C():(de=!1,D=null)}}else de=!1}var C;if(typeof te=="function")C=function(){te(M)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,qe=$e.port2;$e.port1.onmessage=M,C=function(){qe.postMessage(null)}}else C=function(){O(M,0)};function Be(re){D=re,de||(de=!0,C())}function Pe(re,X){A=O(function(){re(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){z||k||(z=!0,Be(Ie))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(re){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var J=S;S=X;try{return re()}finally{S=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,X){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var J=S;S=re;try{return X()}finally{S=J}},n.unstable_scheduleCallback=function(re,X,J){var b=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?b+J:b):J=b,re){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,re={id:v++,callback:X,priorityLevel:re,startTime:J,expirationTime:W,sortIndex:-1},J>b?(re.sortIndex=J,e(y,re),t(m)===null&&re===t(y)&&(q?($(A),A=-1):q=!0,Pe(oe,J-b))):(re.sortIndex=W,e(m,re),z||k||(z=!0,Be(Ie))),re},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(re){var X=S;return function(){var J=S;S=X;try{return re.apply(this,arguments)}finally{S=J}}}})(Yd)),Yd}var yy;function FT(){return yy||(yy=1,Jd.exports=UT()),Jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function zT(){if(vy)return sn;vy=1;var n=Xf(),e=FT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},I={};function S(r){return m.call(I,r)?!0:m.call(v,r)?!1:y.test(r)?I[r]=!0:(v[r]=!0,!1)}function k(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function z(r,s,a,c){if(s===null||typeof s>"u"||k(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(r,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){O[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];O[s]=new q(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){O[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){O[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){O[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){O[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){O[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){O[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){O[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function te(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace($,te);O[s]=new q(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace($,te);O[s]=new q(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace($,te);O[s]=new q(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){O[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),O.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){O[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function ie(r,s,a,c){var f=O.hasOwnProperty(s)?O[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),de=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),re=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,b;function W(r){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+r}var ce=!1;function Ae(r,s){if(!r||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(r,[],s)}else{try{s.call()}catch(B){c=B}r.call(s.prototype)}else{try{throw Error()}catch(B){c=B}r()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,R=g.length-1;1<=w&&0<=R&&f[w]!==g[R];)R--;for(;1<=w&&0<=R;w--,R--)if(f[w]!==g[R]){if(w!==1||R!==1)do if(w--,R--,0>R||f[w]!==g[R]){var N=`
`+f[w].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=w&&0<=R);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?W(r):""}function Re(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=Ae(r.type,!1),r;case 11:return r=Ae(r.type.render,!1),r;case 1:return r=Ae(r.type,!0),r;default:return""}}function be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case de:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case $e:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case qe:return s=r.displayName||null,s!==null?s:be(r.type)||"Memo";case Be:s=r._payload,r=r._init;try{return be(r(s))}catch{}}return null}function je(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function At(r){var s=Ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ir(r){r._valueTracker||(r._valueTracker=At(r))}function Us(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=Ge(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Yr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ki(r,s){var a=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Fs(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ue(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ia(r,s){s=s.checked,s!=null&&ie(r,"checked",s,!1)}function sa(r,s){ia(r,s);var a=Ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?zs(r,s.type,a):s.hasOwnProperty("defaultValue")&&zs(r,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function zl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function zs(r,s,a){(s!=="number"||Yr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Sr=Array.isArray;function Ar(r,s,a,c){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Ue(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function oa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Sr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Ue(a)}}function $s(r,s){var a=Ue(s.value),c=Ue(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function aa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rr,la=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Zr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(r){Xi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Qi[s]=Qi[r]})});function ua(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qi.hasOwnProperty(r)&&Qi[r]?(""+s).trim():s+"px"}function ca(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=ua(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,f):r[a]=f}}var ha=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(r,s){if(s){if(ha[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function fa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ji=null;function qs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hs=null,wn=null,er=null;function Ws(r){if(r=Ma(r)){if(typeof Hs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=yu(s),Hs(r.stateNode,r.type,s))}}function tr(r){wn?er?er.push(r):er=[r]:wn=r}function pa(){if(wn){var r=wn,s=er;if(er=wn=null,Ws(r),s)for(r=0;r<s.length;r++)Ws(s[r])}}function Yi(r,s){return r(s)}function ma(){}var Cr=!1;function ga(r,s,a){if(Cr)return r(s,a);Cr=!0;try{return Yi(r,s,a)}finally{Cr=!1,(wn!==null||er!==null)&&(ma(),pa())}}function ut(r,s){var a=r.stateNode;if(a===null)return null;var c=yu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Gs=!1;if(d)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Gs=!1}function Zi(r,s,a,c,f,g,w,R,N){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(Z){this.onError(Z)}}var es=!1,Ks=null,Ln=!1,ya=null,Th={onError:function(r){es=!0,Ks=r}};function Qs(r,s,a,c,f,g,w,R,N){es=!1,Ks=null,Zi.apply(Th,arguments)}function Bl(r,s,a,c,f,g,w,R,N){if(Qs.apply(this,arguments),es){if(es){var B=Ks;es=!1,Ks=null}else throw Error(t(198));Ln||(Ln=!0,ya=B)}}function Mn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function ts(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function jn(r){if(Mn(r)!==r)throw Error(t(188))}function $l(r){var s=r.alternate;if(!s){if(s=Mn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return jn(f),r;if(g===c)return jn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,R=f.child;R;){if(R===a){w=!0,a=f,c=g;break}if(R===c){w=!0,c=f,a=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===a){w=!0,a=g,c=f;break}if(R===c){w=!0,c=g,a=f;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function va(r){return r=$l(r),r!==null?Xs(r):null}function Xs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Xs(r);if(s!==null)return s;r=r.sibling}return null}var Js=e.unstable_scheduleCallback,_a=e.unstable_cancelCallback,ql=e.unstable_shouldYield,Ih=e.unstable_requestPaint,Ke=e.unstable_now,Hl=e.unstable_getCurrentPriorityLevel,ns=e.unstable_ImmediatePriority,ei=e.unstable_UserBlockingPriority,En=e.unstable_NormalPriority,wa=e.unstable_LowPriority,Wl=e.unstable_IdlePriority,rs=null,hn=null;function Gl(r){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(rs,r,void 0,(r.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Ql,Ea=Math.log,Kl=Math.LN2;function Ql(r){return r>>>=0,r===0?32:31-(Ea(r)/Kl|0)|0}var Ys=64,Zs=4194304;function ti(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function is(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var R=w&~f;R!==0?c=ti(R):(g&=w,g!==0&&(c=ti(g)))}else w=a&~f,w!==0?c=ti(w):g!==0&&(c=ti(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-Wt(s),f=1<<a,c|=r[a],s&=~f;return c}function Sh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Wt(g),R=1<<w,N=f[w];N===-1?((R&a)===0||(R&c)!==0)&&(f[w]=Sh(R,s)):N<=s&&(r.expiredLanes|=R),g&=~R}}function dn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ss(){var r=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),r}function ni(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function ri(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Wt(s),r[s]=a}function He(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Wt(a),g=1<<f;s[f]=0,c[f]=-1,r[f]=-1,a&=~g}}function ii(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-Wt(a),f=1<<c;f&s|r[c]&s&&(r[c]|=s),a&=~f}}var De=0;function si(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Xl,eo,Jl,Yl,Zl,Ta=!1,nr=[],Nt=null,Un=null,Fn=null,oi=new Map,Tn=new Map,rr=[],Ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(r,s){switch(r){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":oi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tn.delete(s.pointerId)}}function Jt(r,s,a,c,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ma(s),s!==null&&eo(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Rh(r,s,a,c,f){switch(s){case"focusin":return Nt=Jt(Nt,r,s,a,c,f),!0;case"dragenter":return Un=Jt(Un,r,s,a,c,f),!0;case"mouseover":return Fn=Jt(Fn,r,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return oi.set(g,Jt(oi.get(g)||null,r,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Tn.set(g,Jt(Tn.get(g)||null,r,s,a,c,f)),!0}return!1}function tu(r){var s=cs(r.target);if(s!==null){var a=Mn(s);if(a!==null){if(s=a.tag,s===13){if(s=ts(a),s!==null){r.blockedOn=s,Zl(r.priority,function(){Jl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function kr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=to(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Ji=c,a.target.dispatchEvent(c),Ji=null}else return s=Ma(a),s!==null&&eo(s),r.blockedOn=a,!1;s.shift()}return!0}function os(r,s,a){kr(r)&&a.delete(s)}function nu(){Ta=!1,Nt!==null&&kr(Nt)&&(Nt=null),Un!==null&&kr(Un)&&(Un=null),Fn!==null&&kr(Fn)&&(Fn=null),oi.forEach(os),Tn.forEach(os)}function zn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ta||(Ta=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nu)))}function Bn(r){function s(f){return zn(f,r)}if(0<nr.length){zn(nr[0],r);for(var a=1;a<nr.length;a++){var c=nr[a];c.blockedOn===r&&(c.blockedOn=null)}}for(Nt!==null&&zn(Nt,r),Un!==null&&zn(Un,r),Fn!==null&&zn(Fn,r),oi.forEach(s),Tn.forEach(s),a=0;a<rr.length;a++)c=rr[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<rr.length&&(a=rr[0],a.blockedOn===null);)tu(a),a.blockedOn===null&&rr.shift()}var xr=oe.ReactCurrentBatchConfig,ai=!0;function et(r,s,a,c){var f=De,g=xr.transition;xr.transition=null;try{De=1,Ia(r,s,a,c)}finally{De=f,xr.transition=g}}function Ch(r,s,a,c){var f=De,g=xr.transition;xr.transition=null;try{De=4,Ia(r,s,a,c)}finally{De=f,xr.transition=g}}function Ia(r,s,a,c){if(ai){var f=to(r,s,a,c);if(f===null)jh(r,s,c,as,a),eu(r,c);else if(Rh(f,r,s,a,c))c.stopPropagation();else if(eu(r,c),s&4&&-1<Ah.indexOf(r)){for(;f!==null;){var g=Ma(f);if(g!==null&&Xl(g),g=to(r,s,a,c),g===null&&jh(r,s,c,as,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else jh(r,s,c,null,a)}}var as=null;function to(r,s,a,c){if(as=null,r=qs(c),r=cs(r),r!==null)if(s=Mn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=ts(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return as=r,null}function Sa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hl()){case ns:return 1;case ei:return 4;case En:case wa:return 16;case Wl:return 536870912;default:return 16}default:return 16}}var fn=null,no=null,Yt=null;function Aa(){if(Yt)return Yt;var r,s=no,a=s.length,c,f="value"in fn?fn.value:fn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return Yt=f.slice(r,1<c?1-c:void 0)}function ro(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ir(){return!0}function Ra(){return!1}function Dt(r){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(a=r[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ir:Ra,this.isPropagationStopped=Ra,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=Dt($n),sr=J({},$n,{view:0,detail:0}),Ph=Dt(sr),so,Nr,li,ls=J({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==li&&(li&&r.type==="mousemove"?(so=r.screenX-li.screenX,Nr=r.screenY-li.screenY):Nr=so=0,li=r),so)},movementY:function(r){return"movementY"in r?r.movementY:Nr}}),oo=Dt(ls),Ca=J({},ls,{dataTransfer:0}),ru=Dt(Ca),ao=J({},sr,{relatedTarget:0}),lo=Dt(ao),iu=J({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Dr=Dt(iu),su=J({},$n,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ou=Dt(su),au=J({},$n,{data:0}),Pa=Dt(au),uo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=lu[r])?!!s[r]:!1}function or(){return uu}var u=J({},sr,{key:function(r){if(r.key){var s=uo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ro(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(r){return r.type==="keypress"?ro(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ro(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),p=Dt(u),_=J({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Dt(_),j=J({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),H=Dt(j),se=J({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Dt(se),Et=J({},ls,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=Dt(Et),Rt=[9,13,27,32],pt=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var pn=d&&"TextEvent"in window&&!In,us=d&&(!pt||In&&8<In&&11>=In),co=" ",om=!1;function am(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ho=!1;function N0(r,s){switch(r){case"compositionend":return lm(s);case"keypress":return s.which!==32?null:(om=!0,co);case"textInput":return r=s.data,r===co&&om?null:r;default:return null}}function D0(r,s){if(ho)return r==="compositionend"||!pt&&am(r,s)?(r=Aa(),Yt=no=fn=null,ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return us&&s.locale!=="ko"?null:s.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!b0[r.type]:s==="textarea"}function cm(r,s,a,c){tr(c),s=pu(s,"onChange"),0<s.length&&(a=new io("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var ka=null,xa=null;function O0(r){Pm(r,0)}function cu(r){var s=yo(r);if(Us(s))return r}function V0(r,s){if(r==="change")return s}var hm=!1;if(d){var kh;if(d){var xh="oninput"in document;if(!xh){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),xh=typeof dm.oninput=="function"}kh=xh}else kh=!1;hm=kh&&(!document.documentMode||9<document.documentMode)}function fm(){ka&&(ka.detachEvent("onpropertychange",pm),xa=ka=null)}function pm(r){if(r.propertyName==="value"&&cu(xa)){var s=[];cm(s,xa,r,qs(r)),ga(O0,s)}}function L0(r,s,a){r==="focusin"?(fm(),ka=s,xa=a,ka.attachEvent("onpropertychange",pm)):r==="focusout"&&fm()}function M0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return cu(xa)}function j0(r,s){if(r==="click")return cu(s)}function U0(r,s){if(r==="input"||r==="change")return cu(s)}function F0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var qn=typeof Object.is=="function"?Object.is:F0;function Na(r,s){if(qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!m.call(s,f)||!qn(r[f],s[f]))return!1}return!0}function mm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gm(r,s){var a=mm(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mm(a)}}function ym(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?ym(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function vm(){for(var r=window,s=Yr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Yr(r.document)}return s}function Nh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function z0(r){var s=vm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&ym(a.ownerDocument.documentElement,a)){if(c!==null&&Nh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!r.extend&&g>c&&(f=c,c=g,g=f),f=gm(a,g);var w=gm(a,c);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var B0=d&&"documentMode"in document&&11>=document.documentMode,fo=null,Dh=null,Da=null,bh=!1;function _m(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bh||fo==null||fo!==Yr(c)||(c=fo,"selectionStart"in c&&Nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Da&&Na(Da,c)||(Da=c,c=pu(Dh,"onSelect"),0<c.length&&(s=new io("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=fo)))}function hu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var po={animationend:hu("Animation","AnimationEnd"),animationiteration:hu("Animation","AnimationIteration"),animationstart:hu("Animation","AnimationStart"),transitionend:hu("Transition","TransitionEnd")},Oh={},wm={};d&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function du(r){if(Oh[r])return Oh[r];if(!po[r])return r;var s=po[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in wm)return Oh[r]=s[a];return r}var Em=du("animationend"),Tm=du("animationiteration"),Im=du("animationstart"),Sm=du("transitionend"),Am=new Map,Rm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(r,s){Am.set(r,s),l(s,[r])}for(var Vh=0;Vh<Rm.length;Vh++){var Lh=Rm[Vh],$0=Lh.toLowerCase(),q0=Lh[0].toUpperCase()+Lh.slice(1);ui($0,"on"+q0)}ui(Em,"onAnimationEnd"),ui(Tm,"onAnimationIteration"),ui(Im,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(Sm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Cm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,Bl(c,s,void 0,r),r.currentTarget=null}function Pm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],N=R.instance,B=R.currentTarget;if(R=R.listener,N!==g&&f.isPropagationStopped())break e;Cm(f,R,B),g=N}else for(w=0;w<c.length;w++){if(R=c[w],N=R.instance,B=R.currentTarget,R=R.listener,N!==g&&f.isPropagationStopped())break e;Cm(f,R,B),g=N}}}if(Ln)throw r=ya,Ln=!1,ya=null,r}function Je(r,s){var a=s[qh];a===void 0&&(a=s[qh]=new Set);var c=r+"__bubble";a.has(c)||(km(s,r,2,!1),a.add(c))}function Mh(r,s,a){var c=0;s&&(c|=4),km(a,r,c,s)}var fu="_reactListening"+Math.random().toString(36).slice(2);function Oa(r){if(!r[fu]){r[fu]=!0,i.forEach(function(a){a!=="selectionchange"&&(H0.has(a)||Mh(a,!1,r),Mh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[fu]||(s[fu]=!0,Mh("selectionchange",!1,s))}}function km(r,s,a,c){switch(Sa(s)){case 1:var f=et;break;case 4:f=Ch;break;default:f=Ia}a=f.bind(null,s,a,r),f=void 0,!Gs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function jh(r,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;R!==null;){if(w=cs(R),w===null)return;if(N=w.tag,N===5||N===6){c=g=w;continue e}R=R.parentNode}}c=c.return}ga(function(){var B=g,Z=qs(a),ee=[];e:{var Y=Am.get(r);if(Y!==void 0){var le=io,fe=r;switch(r){case"keypress":if(ro(a)===0)break e;case"keydown":case"keyup":le=p;break;case"focusin":fe="focus",le=lo;break;case"focusout":fe="blur",le=lo;break;case"beforeblur":case"afterblur":le=lo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=H;break;case Em:case Tm:case Im:le=Dr;break;case Sm:le=ze;break;case"scroll":le=Ph;break;case"wheel":le=Oe;break;case"copy":case"cut":case"paste":le=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=T}var pe=(s&4)!==0,ct=!pe&&r==="scroll",U=pe?Y!==null?Y+"Capture":null:Y;pe=[];for(var V=B,F;V!==null;){F=V;var ne=F.stateNode;if(F.tag===5&&ne!==null&&(F=ne,U!==null&&(ne=ut(V,U),ne!=null&&pe.push(Va(V,ne,F)))),ct)break;V=V.return}0<pe.length&&(Y=new le(Y,fe,null,a,Z),ee.push({event:Y,listeners:pe}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",Y&&a!==Ji&&(fe=a.relatedTarget||a.fromElement)&&(cs(fe)||fe[br]))break e;if((le||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,le?(fe=a.relatedTarget||a.toElement,le=B,fe=fe?cs(fe):null,fe!==null&&(ct=Mn(fe),fe!==ct||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=B),le!==fe)){if(pe=oo,ne="onMouseLeave",U="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(pe=T,ne="onPointerLeave",U="onPointerEnter",V="pointer"),ct=le==null?Y:yo(le),F=fe==null?Y:yo(fe),Y=new pe(ne,V+"leave",le,a,Z),Y.target=ct,Y.relatedTarget=F,ne=null,cs(Z)===B&&(pe=new pe(U,V+"enter",fe,a,Z),pe.target=F,pe.relatedTarget=ct,ne=pe),ct=ne,le&&fe)t:{for(pe=le,U=fe,V=0,F=pe;F;F=mo(F))V++;for(F=0,ne=U;ne;ne=mo(ne))F++;for(;0<V-F;)pe=mo(pe),V--;for(;0<F-V;)U=mo(U),F--;for(;V--;){if(pe===U||U!==null&&pe===U.alternate)break t;pe=mo(pe),U=mo(U)}pe=null}else pe=null;le!==null&&xm(ee,Y,le,pe,!1),fe!==null&&ct!==null&&xm(ee,ct,fe,pe,!0)}}e:{if(Y=B?yo(B):window,le=Y.nodeName&&Y.nodeName.toLowerCase(),le==="select"||le==="input"&&Y.type==="file")var me=V0;else if(um(Y))if(hm)me=U0;else{me=M0;var ye=L0}else(le=Y.nodeName)&&le.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=j0);if(me&&(me=me(r,B))){cm(ee,me,a,Z);break e}ye&&ye(r,Y,B),r==="focusout"&&(ye=Y._wrapperState)&&ye.controlled&&Y.type==="number"&&zs(Y,"number",Y.value)}switch(ye=B?yo(B):window,r){case"focusin":(um(ye)||ye.contentEditable==="true")&&(fo=ye,Dh=B,Da=null);break;case"focusout":Da=Dh=fo=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,_m(ee,a,Z);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":_m(ee,a,Z)}var ve;if(pt)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ho?am(r,a)&&(we="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(us&&a.locale!=="ko"&&(ho||we!=="onCompositionStart"?we==="onCompositionEnd"&&ho&&(ve=Aa()):(fn=Z,no="value"in fn?fn.value:fn.textContent,ho=!0)),ye=pu(B,we),0<ye.length&&(we=new Pa(we,r,null,a,Z),ee.push({event:we,listeners:ye}),ve?we.data=ve:(ve=lm(a),ve!==null&&(we.data=ve)))),(ve=pn?N0(r,a):D0(r,a))&&(B=pu(B,"onBeforeInput"),0<B.length&&(Z=new Pa("onBeforeInput","beforeinput",null,a,Z),ee.push({event:Z,listeners:B}),Z.data=ve))}Pm(ee,s)})}function Va(r,s,a){return{instance:r,listener:s,currentTarget:a}}function pu(r,s){for(var a=s+"Capture",c=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ut(r,a),g!=null&&c.unshift(Va(r,g,f)),g=ut(r,s),g!=null&&c.push(Va(r,g,f))),r=r.return}return c}function mo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function xm(r,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var R=a,N=R.alternate,B=R.stateNode;if(N!==null&&N===c)break;R.tag===5&&B!==null&&(R=B,f?(N=ut(a,g),N!=null&&w.unshift(Va(a,N,R))):f||(N=ut(a,g),N!=null&&w.push(Va(a,N,R)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var W0=/\r\n?/g,G0=/\u0000|\uFFFD/g;function Nm(r){return(typeof r=="string"?r:""+r).replace(W0,`
`).replace(G0,"")}function mu(r,s,a){if(s=Nm(s),Nm(r)!==s&&a)throw Error(t(425))}function gu(){}var Uh=null,Fh=null;function zh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,K0=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,Q0=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(r){return Dm.resolve(null).then(r).catch(X0)}:Bh;function X0(r){setTimeout(function(){throw r})}function $h(r,s){var a=s,c=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){r.removeChild(f),Bn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Bn(s)}function ci(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function bm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var go=Math.random().toString(36).slice(2),ar="__reactFiber$"+go,La="__reactProps$"+go,br="__reactContainer$"+go,qh="__reactEvents$"+go,J0="__reactListeners$"+go,Y0="__reactHandles$"+go;function cs(r){var s=r[ar];if(s)return s;for(var a=r.parentNode;a;){if(s=a[br]||a[ar]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=bm(r);r!==null;){if(a=r[ar])return a;r=bm(r)}return s}r=a,a=r.parentNode}return null}function Ma(r){return r=r[ar]||r[br],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function yo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function yu(r){return r[La]||null}var Hh=[],vo=-1;function hi(r){return{current:r}}function Ye(r){0>vo||(r.current=Hh[vo],Hh[vo]=null,vo--)}function Qe(r,s){vo++,Hh[vo]=r.current,r.current=s}var di={},jt=hi(di),Zt=hi(!1),hs=di;function _o(r,s){var a=r.type.contextTypes;if(!a)return di;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function vu(){Ye(Zt),Ye(jt)}function Om(r,s,a){if(jt.current!==di)throw Error(t(168));Qe(jt,s),Qe(Zt,a)}function Vm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,je(r)||"Unknown",f));return J({},a,c)}function _u(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||di,hs=jt.current,Qe(jt,r),Qe(Zt,Zt.current),!0}function Lm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Vm(r,s,hs),c.__reactInternalMemoizedMergedChildContext=r,Ye(Zt),Ye(jt),Qe(jt,r)):Ye(Zt),Qe(Zt,a)}var Or=null,wu=!1,Wh=!1;function Mm(r){Or===null?Or=[r]:Or.push(r)}function Z0(r){wu=!0,Mm(r)}function fi(){if(!Wh&&Or!==null){Wh=!0;var r=0,s=De;try{var a=Or;for(De=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Or=null,wu=!1}catch(f){throw Or!==null&&(Or=Or.slice(r+1)),Js(ns,fi),f}finally{De=s,Wh=!1}}return null}var wo=[],Eo=0,Eu=null,Tu=0,Sn=[],An=0,ds=null,Vr=1,Lr="";function fs(r,s){wo[Eo++]=Tu,wo[Eo++]=Eu,Eu=r,Tu=s}function jm(r,s,a){Sn[An++]=Vr,Sn[An++]=Lr,Sn[An++]=ds,ds=r;var c=Vr;r=Lr;var f=32-Wt(c)-1;c&=~(1<<f),a+=1;var g=32-Wt(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Vr=1<<32-Wt(s)+f|a<<f|c,Lr=g+r}else Vr=1<<g|a<<f|c,Lr=r}function Gh(r){r.return!==null&&(fs(r,1),jm(r,1,0))}function Kh(r){for(;r===Eu;)Eu=wo[--Eo],wo[Eo]=null,Tu=wo[--Eo],wo[Eo]=null;for(;r===ds;)ds=Sn[--An],Sn[An]=null,Lr=Sn[--An],Sn[An]=null,Vr=Sn[--An],Sn[An]=null}var mn=null,gn=null,tt=!1,Hn=null;function Um(r,s){var a=kn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Fm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,mn=r,gn=ci(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,mn=r,gn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ds!==null?{id:Vr,overflow:Lr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=kn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,mn=r,gn=null,!0):!1;default:return!1}}function Qh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Xh(r){if(tt){var s=gn;if(s){var a=s;if(!Fm(r,s)){if(Qh(r))throw Error(t(418));s=ci(a.nextSibling);var c=mn;s&&Fm(r,s)?Um(c,a):(r.flags=r.flags&-4097|2,tt=!1,mn=r)}}else{if(Qh(r))throw Error(t(418));r.flags=r.flags&-4097|2,tt=!1,mn=r}}}function zm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mn=r}function Iu(r){if(r!==mn)return!1;if(!tt)return zm(r),tt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!zh(r.type,r.memoizedProps)),s&&(s=gn)){if(Qh(r))throw Bm(),Error(t(418));for(;s;)Um(r,s),s=ci(s.nextSibling)}if(zm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){gn=ci(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}gn=null}}else gn=mn?ci(r.stateNode.nextSibling):null;return!0}function Bm(){for(var r=gn;r;)r=ci(r.nextSibling)}function To(){gn=mn=null,tt=!1}function Jh(r){Hn===null?Hn=[r]:Hn.push(r)}var eT=oe.ReactCurrentBatchConfig;function ja(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var f=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var R=f.refs;w===null?delete R[g]:R[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Su(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function $m(r){var s=r._init;return s(r._payload)}function qm(r){function s(U,V){if(r){var F=U.deletions;F===null?(U.deletions=[V],U.flags|=16):F.push(V)}}function a(U,V){if(!r)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function f(U,V){return U=Ei(U,V),U.index=0,U.sibling=null,U}function g(U,V,F){return U.index=F,r?(F=U.alternate,F!==null?(F=F.index,F<V?(U.flags|=2,V):F):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function R(U,V,F,ne){return V===null||V.tag!==6?(V=Bd(F,U.mode,ne),V.return=U,V):(V=f(V,F),V.return=U,V)}function N(U,V,F,ne){var me=F.type;return me===D?Z(U,V,F.props.children,ne,F.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Be&&$m(me)===V.type)?(ne=f(V,F.props),ne.ref=ja(U,V,F),ne.return=U,ne):(ne=Ku(F.type,F.key,F.props,null,U.mode,ne),ne.ref=ja(U,V,F),ne.return=U,ne)}function B(U,V,F,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=$d(F,U.mode,ne),V.return=U,V):(V=f(V,F.children||[]),V.return=U,V)}function Z(U,V,F,ne,me){return V===null||V.tag!==7?(V=Es(F,U.mode,ne,me),V.return=U,V):(V=f(V,F),V.return=U,V)}function ee(U,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Bd(""+V,U.mode,F),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ie:return F=Ku(V.type,V.key,V.props,null,U.mode,F),F.ref=ja(U,null,V),F.return=U,F;case de:return V=$d(V,U.mode,F),V.return=U,V;case Be:var ne=V._init;return ee(U,ne(V._payload),F)}if(Sr(V)||X(V))return V=Es(V,U.mode,F,null),V.return=U,V;Su(U,V)}return null}function Y(U,V,F,ne){var me=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return me!==null?null:R(U,V,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ie:return F.key===me?N(U,V,F,ne):null;case de:return F.key===me?B(U,V,F,ne):null;case Be:return me=F._init,Y(U,V,me(F._payload),ne)}if(Sr(F)||X(F))return me!==null?null:Z(U,V,F,ne,null);Su(U,F)}return null}function le(U,V,F,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return U=U.get(F)||null,R(V,U,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ie:return U=U.get(ne.key===null?F:ne.key)||null,N(V,U,ne,me);case de:return U=U.get(ne.key===null?F:ne.key)||null,B(V,U,ne,me);case Be:var ye=ne._init;return le(U,V,F,ye(ne._payload),me)}if(Sr(ne)||X(ne))return U=U.get(F)||null,Z(V,U,ne,me,null);Su(V,ne)}return null}function fe(U,V,F,ne){for(var me=null,ye=null,ve=V,we=V=0,kt=null;ve!==null&&we<F.length;we++){ve.index>we?(kt=ve,ve=null):kt=ve.sibling;var Me=Y(U,ve,F[we],ne);if(Me===null){ve===null&&(ve=kt);break}r&&ve&&Me.alternate===null&&s(U,ve),V=g(Me,V,we),ye===null?me=Me:ye.sibling=Me,ye=Me,ve=kt}if(we===F.length)return a(U,ve),tt&&fs(U,we),me;if(ve===null){for(;we<F.length;we++)ve=ee(U,F[we],ne),ve!==null&&(V=g(ve,V,we),ye===null?me=ve:ye.sibling=ve,ye=ve);return tt&&fs(U,we),me}for(ve=c(U,ve);we<F.length;we++)kt=le(ve,U,we,F[we],ne),kt!==null&&(r&&kt.alternate!==null&&ve.delete(kt.key===null?we:kt.key),V=g(kt,V,we),ye===null?me=kt:ye.sibling=kt,ye=kt);return r&&ve.forEach(function(Ti){return s(U,Ti)}),tt&&fs(U,we),me}function pe(U,V,F,ne){var me=X(F);if(typeof me!="function")throw Error(t(150));if(F=me.call(F),F==null)throw Error(t(151));for(var ye=me=null,ve=V,we=V=0,kt=null,Me=F.next();ve!==null&&!Me.done;we++,Me=F.next()){ve.index>we?(kt=ve,ve=null):kt=ve.sibling;var Ti=Y(U,ve,Me.value,ne);if(Ti===null){ve===null&&(ve=kt);break}r&&ve&&Ti.alternate===null&&s(U,ve),V=g(Ti,V,we),ye===null?me=Ti:ye.sibling=Ti,ye=Ti,ve=kt}if(Me.done)return a(U,ve),tt&&fs(U,we),me;if(ve===null){for(;!Me.done;we++,Me=F.next())Me=ee(U,Me.value,ne),Me!==null&&(V=g(Me,V,we),ye===null?me=Me:ye.sibling=Me,ye=Me);return tt&&fs(U,we),me}for(ve=c(U,ve);!Me.done;we++,Me=F.next())Me=le(ve,U,we,Me.value,ne),Me!==null&&(r&&Me.alternate!==null&&ve.delete(Me.key===null?we:Me.key),V=g(Me,V,we),ye===null?me=Me:ye.sibling=Me,ye=Me);return r&&ve.forEach(function(bT){return s(U,bT)}),tt&&fs(U,we),me}function ct(U,V,F,ne){if(typeof F=="object"&&F!==null&&F.type===D&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Ie:e:{for(var me=F.key,ye=V;ye!==null;){if(ye.key===me){if(me=F.type,me===D){if(ye.tag===7){a(U,ye.sibling),V=f(ye,F.props.children),V.return=U,U=V;break e}}else if(ye.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Be&&$m(me)===ye.type){a(U,ye.sibling),V=f(ye,F.props),V.ref=ja(U,ye,F),V.return=U,U=V;break e}a(U,ye);break}else s(U,ye);ye=ye.sibling}F.type===D?(V=Es(F.props.children,U.mode,ne,F.key),V.return=U,U=V):(ne=Ku(F.type,F.key,F.props,null,U.mode,ne),ne.ref=ja(U,V,F),ne.return=U,U=ne)}return w(U);case de:e:{for(ye=F.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(U,V.sibling),V=f(V,F.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else s(U,V);V=V.sibling}V=$d(F,U.mode,ne),V.return=U,U=V}return w(U);case Be:return ye=F._init,ct(U,V,ye(F._payload),ne)}if(Sr(F))return fe(U,V,F,ne);if(X(F))return pe(U,V,F,ne);Su(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,V!==null&&V.tag===6?(a(U,V.sibling),V=f(V,F),V.return=U,U=V):(a(U,V),V=Bd(F,U.mode,ne),V.return=U,U=V),w(U)):a(U,V)}return ct}var Io=qm(!0),Hm=qm(!1),Au=hi(null),Ru=null,So=null,Yh=null;function Zh(){Yh=So=Ru=null}function ed(r){var s=Au.current;Ye(Au),r._currentValue=s}function td(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ao(r,s){Ru=r,Yh=So=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function Rn(r){var s=r._currentValue;if(Yh!==r)if(r={context:r,memoizedValue:s,next:null},So===null){if(Ru===null)throw Error(t(308));So=r,Ru.dependencies={lanes:0,firstContext:r}}else So=So.next=r;return s}var ps=null;function nd(r){ps===null?ps=[r]:ps.push(r)}function Wm(r,s,a,c){var f=s.interleaved;return f===null?(a.next=a,nd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Mr(r,c)}function Mr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var pi=!1;function rd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function jr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function mi(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Mr(r,a)}return f=c.interleaved,f===null?(s.next=s,nd(c)):(s.next=f.next,f.next=s),c.interleaved=s,Mr(r,a)}function Cu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ii(r,a)}}function Km(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Pu(r,s,a,c){var f=r.updateQueue;pi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var N=R,B=N.next;N.next=null,w===null?g=B:w.next=B,w=N;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==w&&(R===null?Z.firstBaseUpdate=B:R.next=B,Z.lastBaseUpdate=N))}if(g!==null){var ee=f.baseState;w=0,Z=B=N=null,R=g;do{var Y=R.lane,le=R.eventTime;if((c&Y)===Y){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var fe=r,pe=R;switch(Y=s,le=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ee=fe.call(le,ee,Y);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,Y=typeof fe=="function"?fe.call(le,ee,Y):fe,Y==null)break e;ee=J({},ee,Y);break e;case 2:pi=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,Y=f.effects,Y===null?f.effects=[R]:Y.push(R))}else le={eventTime:le,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(B=Z=le,N=ee):Z=Z.next=le,w|=Y;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(Z===null&&(N=ee),f.baseState=N,f.firstBaseUpdate=B,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ys|=w,r.lanes=w,r.memoizedState=ee}}function Qm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Ua={},lr=hi(Ua),Fa=hi(Ua),za=hi(Ua);function ms(r){if(r===Ua)throw Error(t(174));return r}function id(r,s){switch(Qe(za,s),Qe(Fa,r),Qe(lr,Ua),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=wt(s,r)}Ye(lr),Qe(lr,s)}function Ro(){Ye(lr),Ye(Fa),Ye(za)}function Xm(r){ms(za.current);var s=ms(lr.current),a=wt(s,r.type);s!==a&&(Qe(Fa,r),Qe(lr,a))}function sd(r){Fa.current===r&&(Ye(lr),Ye(Fa))}var rt=hi(0);function ku(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var od=[];function ad(){for(var r=0;r<od.length;r++)od[r]._workInProgressVersionPrimary=null;od.length=0}var xu=oe.ReactCurrentDispatcher,ld=oe.ReactCurrentBatchConfig,gs=0,it=null,Tt=null,Ct=null,Nu=!1,Ba=!1,$a=0,tT=0;function Ut(){throw Error(t(321))}function ud(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!qn(r[a],s[a]))return!1;return!0}function cd(r,s,a,c,f,g){if(gs=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,xu.current=r===null||r.memoizedState===null?sT:oT,r=a(c,f),Ba){g=0;do{if(Ba=!1,$a=0,25<=g)throw Error(t(301));g+=1,Ct=Tt=null,s.updateQueue=null,xu.current=aT,r=a(c,f)}while(Ba)}if(xu.current=Ou,s=Tt!==null&&Tt.next!==null,gs=0,Ct=Tt=it=null,Nu=!1,s)throw Error(t(300));return r}function hd(){var r=$a!==0;return $a=0,r}function ur(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Cn(){if(Tt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=Ct===null?it.memoizedState:Ct.next;if(s!==null)Ct=s,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?it.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function qa(r,s){return typeof s=="function"?s(r):s}function dd(r){var s=Cn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Tt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var R=w=null,N=null,B=g;do{var Z=B.lane;if((gs&Z)===Z)N!==null&&(N=N.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:r(c,B.action);else{var ee={lane:Z,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};N===null?(R=N=ee,w=c):N=N.next=ee,it.lanes|=Z,ys|=Z}B=B.next}while(B!==null&&B!==g);N===null?w=c:N.next=R,qn(c,s.memoizedState)||(tn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(r=a.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,ys|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function fd(r){var s=Cn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);qn(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function Jm(){}function Ym(r,s){var a=it,c=Cn(),f=s(),g=!qn(c.memoizedState,f);if(g&&(c.memoizedState=f,tn=!0),c=c.queue,pd(tg.bind(null,a,c,r),[r]),c.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Ha(9,eg.bind(null,a,c,f,s),void 0,null),Pt===null)throw Error(t(349));(gs&30)!==0||Zm(a,s,f)}return f}function Zm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function eg(r,s,a,c){s.value=a,s.getSnapshot=c,ng(s)&&rg(r)}function tg(r,s,a){return a(function(){ng(s)&&rg(r)})}function ng(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!qn(r,a)}catch{return!0}}function rg(r){var s=Mr(r,1);s!==null&&Qn(s,r,1,-1)}function ig(r){var s=ur();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:r},s.queue=r,r=r.dispatch=iT.bind(null,it,r),[s.memoizedState,r]}function Ha(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function sg(){return Cn().memoizedState}function Du(r,s,a,c){var f=ur();it.flags|=r,f.memoizedState=Ha(1|s,a,void 0,c===void 0?null:c)}function bu(r,s,a,c){var f=Cn();c=c===void 0?null:c;var g=void 0;if(Tt!==null){var w=Tt.memoizedState;if(g=w.destroy,c!==null&&ud(c,w.deps)){f.memoizedState=Ha(s,a,g,c);return}}it.flags|=r,f.memoizedState=Ha(1|s,a,g,c)}function og(r,s){return Du(8390656,8,r,s)}function pd(r,s){return bu(2048,8,r,s)}function ag(r,s){return bu(4,2,r,s)}function lg(r,s){return bu(4,4,r,s)}function ug(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function cg(r,s,a){return a=a!=null?a.concat([r]):null,bu(4,4,ug.bind(null,s,r),a)}function md(){}function hg(r,s){var a=Cn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ud(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function dg(r,s){var a=Cn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ud(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function fg(r,s,a){return(gs&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=a):(qn(a,s)||(a=ss(),it.lanes|=a,ys|=a,r.baseState=!0),s)}function nT(r,s){var a=De;De=a!==0&&4>a?a:4,r(!0);var c=ld.transition;ld.transition={};try{r(!1),s()}finally{De=a,ld.transition=c}}function pg(){return Cn().memoizedState}function rT(r,s,a){var c=_i(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},mg(r))gg(s,a);else if(a=Wm(r,s,a,c),a!==null){var f=Qt();Qn(a,r,c,f),yg(a,s,c)}}function iT(r,s,a){var c=_i(r),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(mg(r))gg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,R=g(w,a);if(f.hasEagerState=!0,f.eagerState=R,qn(R,w)){var N=s.interleaved;N===null?(f.next=f,nd(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}a=Wm(r,s,f,c),a!==null&&(f=Qt(),Qn(a,r,c,f),yg(a,s,c))}}function mg(r){var s=r.alternate;return r===it||s!==null&&s===it}function gg(r,s){Ba=Nu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function yg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ii(r,a)}}var Ou={readContext:Rn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},sT={readContext:Rn,useCallback:function(r,s){return ur().memoizedState=[r,s===void 0?null:s],r},useContext:Rn,useEffect:og,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Du(4194308,4,ug.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Du(4194308,4,r,s)},useInsertionEffect:function(r,s){return Du(4,2,r,s)},useMemo:function(r,s){var a=ur();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=ur();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=rT.bind(null,it,r),[c.memoizedState,r]},useRef:function(r){var s=ur();return r={current:r},s.memoizedState=r},useState:ig,useDebugValue:md,useDeferredValue:function(r){return ur().memoizedState=r},useTransition:function(){var r=ig(!1),s=r[0];return r=nT.bind(null,r[1]),ur().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=it,f=ur();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Pt===null)throw Error(t(349));(gs&30)!==0||Zm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,og(tg.bind(null,c,g,r),[r]),c.flags|=2048,Ha(9,eg.bind(null,c,g,a,s),void 0,null),a},useId:function(){var r=ur(),s=Pt.identifierPrefix;if(tt){var a=Lr,c=Vr;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=$a++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=tT++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},oT={readContext:Rn,useCallback:hg,useContext:Rn,useEffect:pd,useImperativeHandle:cg,useInsertionEffect:ag,useLayoutEffect:lg,useMemo:dg,useReducer:dd,useRef:sg,useState:function(){return dd(qa)},useDebugValue:md,useDeferredValue:function(r){var s=Cn();return fg(s,Tt.memoizedState,r)},useTransition:function(){var r=dd(qa)[0],s=Cn().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:pg,unstable_isNewReconciler:!1},aT={readContext:Rn,useCallback:hg,useContext:Rn,useEffect:pd,useImperativeHandle:cg,useInsertionEffect:ag,useLayoutEffect:lg,useMemo:dg,useReducer:fd,useRef:sg,useState:function(){return fd(qa)},useDebugValue:md,useDeferredValue:function(r){var s=Cn();return Tt===null?s.memoizedState=r:fg(s,Tt.memoizedState,r)},useTransition:function(){var r=fd(qa)[0],s=Cn().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:pg,unstable_isNewReconciler:!1};function Wn(r,s){if(r&&r.defaultProps){s=J({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function gd(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:J({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Vu={isMounted:function(r){return(r=r._reactInternals)?Mn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Qt(),f=_i(r),g=jr(c,f);g.payload=s,a!=null&&(g.callback=a),s=mi(r,g,f),s!==null&&(Qn(s,r,f,c),Cu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Qt(),f=_i(r),g=jr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=mi(r,g,f),s!==null&&(Qn(s,r,f,c),Cu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Qt(),c=_i(r),f=jr(a,c);f.tag=2,s!=null&&(f.callback=s),s=mi(r,f,c),s!==null&&(Qn(s,r,c,a),Cu(s,r,c))}};function vg(r,s,a,c,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!Na(a,c)||!Na(f,g):!0}function _g(r,s,a){var c=!1,f=di,g=s.contextType;return typeof g=="object"&&g!==null?g=Rn(g):(f=en(s)?hs:jt.current,c=s.contextTypes,g=(c=c!=null)?_o(r,f):di),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Vu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function wg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Vu.enqueueReplaceState(s,s.state,null)}function yd(r,s,a,c){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},rd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Rn(g):(g=en(s)?hs:jt.current,f.context=_o(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(gd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Vu.enqueueReplaceState(f,f.state,null),Pu(r,a,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Co(r,s){try{var a="",c=s;do a+=Re(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function vd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function _d(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var lT=typeof WeakMap=="function"?WeakMap:Map;function Eg(r,s,a){a=jr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Bu||(Bu=!0,Od=c),_d(r,s)},a}function Tg(r,s,a){a=jr(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){_d(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){_d(r,s),typeof c!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Ig(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new lT;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),r=TT.bind(null,r,s,a),s.then(r,r))}function Sg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ag(r,s,a,c,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=jr(-1,1),s.tag=2,mi(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var uT=oe.ReactCurrentOwner,tn=!1;function Kt(r,s,a,c){s.child=r===null?Hm(s,null,a,c):Io(s,r.child,a,c)}function Rg(r,s,a,c,f){a=a.render;var g=s.ref;return Ao(s,f),c=cd(r,s,a,c,g,f),a=hd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(tt&&a&&Gh(s),s.flags|=1,Kt(r,s,c,f),s.child)}function Cg(r,s,a,c,f){if(r===null){var g=a.type;return typeof g=="function"&&!zd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Pg(r,s,g,c,f)):(r=Ku(a.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Na,a(w,c)&&r.ref===s.ref)return Ur(r,s,f)}return s.flags|=1,r=Ei(g,c),r.ref=s.ref,r.return=s,s.child=r}function Pg(r,s,a,c,f){if(r!==null){var g=r.memoizedProps;if(Na(g,c)&&r.ref===s.ref)if(tn=!1,s.pendingProps=c=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,Ur(r,s,f)}return wd(r,s,a,c,f)}function kg(r,s,a){var c=s.pendingProps,f=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ko,yn),yn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(ko,yn),yn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Qe(ko,yn),yn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Qe(ko,yn),yn|=c;return Kt(r,s,f,a),s.child}function xg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function wd(r,s,a,c,f){var g=en(a)?hs:jt.current;return g=_o(s,g),Ao(s,f),a=cd(r,s,a,c,g,f),c=hd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(tt&&c&&Gh(s),s.flags|=1,Kt(r,s,a,f),s.child)}function Ng(r,s,a,c,f){if(en(a)){var g=!0;_u(s)}else g=!1;if(Ao(s,f),s.stateNode===null)Mu(r,s),_g(s,a,c),yd(s,a,c,f),c=!0;else if(r===null){var w=s.stateNode,R=s.memoizedProps;w.props=R;var N=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Rn(B):(B=en(a)?hs:jt.current,B=_o(s,B));var Z=a.getDerivedStateFromProps,ee=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||N!==B)&&wg(s,w,c,B),pi=!1;var Y=s.memoizedState;w.state=Y,Pu(s,c,w,f),N=s.memoizedState,R!==c||Y!==N||Zt.current||pi?(typeof Z=="function"&&(gd(s,a,Z,c),N=s.memoizedState),(R=pi||vg(s,a,R,c,Y,N,B))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=B,c=R):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Gm(r,s),R=s.memoizedProps,B=s.type===s.elementType?R:Wn(s.type,R),w.props=B,ee=s.pendingProps,Y=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Rn(N):(N=en(a)?hs:jt.current,N=_o(s,N));var le=a.getDerivedStateFromProps;(Z=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==ee||Y!==N)&&wg(s,w,c,N),pi=!1,Y=s.memoizedState,w.state=Y,Pu(s,c,w,f);var fe=s.memoizedState;R!==ee||Y!==fe||Zt.current||pi?(typeof le=="function"&&(gd(s,a,le,c),fe=s.memoizedState),(B=pi||vg(s,a,B,c,Y,fe,N)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=N,c=B):(typeof w.componentDidUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return Ed(r,s,a,c,g,f)}function Ed(r,s,a,c,f,g){xg(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Lm(s,a,!1),Ur(r,s,g);c=s.stateNode,uT.current=s;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=Io(s,r.child,null,g),s.child=Io(s,null,R,g)):Kt(r,s,R,g),s.memoizedState=c.state,f&&Lm(s,a,!0),s.child}function Dg(r){var s=r.stateNode;s.pendingContext?Om(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Om(r,s.context,!1),id(r,s.containerInfo)}function bg(r,s,a,c,f){return To(),Jh(f),s.flags|=256,Kt(r,s,a,c),s.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Id(r){return{baseLanes:r,cachePool:null,transitions:null}}function Og(r,s,a){var c=s.pendingProps,f=rt.current,g=!1,w=(s.flags&128)!==0,R;if((R=w)||(R=r!==null&&r.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Qe(rt,f&1),r===null)return Xh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Qu(w,c,0,null),r=Es(r,c,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Id(a),s.memoizedState=Td,r):Sd(s,w));if(f=r.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return cT(r,s,w,c,R,f,a);if(g){g=c.fallback,w=s.mode,f=r.child,R=f.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=Ei(f,N),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=Ei(R,g):(g=Es(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=r.child.memoizedState,w=w===null?Id(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Td,c}return g=r.child,r=g.sibling,c=Ei(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function Sd(r,s){return s=Qu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Lu(r,s,a,c){return c!==null&&Jh(c),Io(s,r.child,null,a),r=Sd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function cT(r,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=vd(Error(t(422))),Lu(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Qu({mode:"visible",children:c.children},f,0,null),g=Es(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Io(s,r.child,null,w),s.child.memoizedState=Id(w),s.memoizedState=Td,g);if((s.mode&1)===0)return Lu(r,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=vd(g,c,void 0),Lu(r,s,w,c)}if(R=(w&r.childLanes)!==0,tn||R){if(c=Pt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Mr(r,f),Qn(c,r,f,-1))}return Fd(),c=vd(Error(t(421))),Lu(r,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=IT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,gn=ci(f.nextSibling),mn=s,tt=!0,Hn=null,r!==null&&(Sn[An++]=Vr,Sn[An++]=Lr,Sn[An++]=ds,Vr=r.id,Lr=r.overflow,ds=s),s=Sd(s,c.children),s.flags|=4096,s)}function Vg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),td(r.return,s,a)}function Ad(r,s,a,c,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Lg(r,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(Kt(r,s,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vg(r,a,s);else if(r.tag===19)Vg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Qe(rt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&ku(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Ad(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&ku(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Ad(s,!0,a,null,g);break;case"together":Ad(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ur(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ys|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Ei(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Ei(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function hT(r,s,a){switch(s.tag){case 3:Dg(s),To();break;case 5:Xm(s);break;case 1:en(s.type)&&_u(s);break;case 4:id(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Qe(Au,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Og(r,s,a):(Qe(rt,rt.current&1),r=Ur(r,s,a),r!==null?r.sibling:null);Qe(rt,rt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Lg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(rt,rt.current),c)break;return null;case 22:case 23:return s.lanes=0,kg(r,s,a)}return Ur(r,s,a)}var Mg,Rd,jg,Ug;Mg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Rd=function(){},jg=function(r,s,a,c){var f=r.memoizedProps;if(f!==c){r=s.stateNode,ms(lr.current);var g=null;switch(a){case"input":f=Ki(r,f),c=Ki(r,c),g=[];break;case"select":f=J({},f,{value:void 0}),c=J({},c,{value:void 0}),g=[];break;case"textarea":f=oa(r,f),c=oa(r,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=gu)}da(a,c);var w;a=null;for(B in f)if(!c.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var R=f[B];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var N=c[B];if(R=f!=null?f[B]:void 0,c.hasOwnProperty(B)&&N!==R&&(N!=null||R!=null))if(B==="style")if(R){for(w in R)!R.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&R[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push(B,a)),a=N;else B==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(g=g||[]).push(B,N)):B==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(B,""+N):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(N!=null&&B==="onScroll"&&Je("scroll",r),g||R===N||(g=[])):(g=g||[]).push(B,N))}a&&(g=g||[]).push("style",a);var B=g;(s.updateQueue=B)&&(s.flags|=4)}},Ug=function(r,s,a,c){a!==c&&(s.flags|=4)};function Wa(r,s){if(!tt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function dT(r,s,a){var c=s.pendingProps;switch(Kh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return en(s.type)&&vu(),Ft(s),null;case 3:return c=s.stateNode,Ro(),Ye(Zt),Ye(jt),ad(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Iu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hn!==null&&(Md(Hn),Hn=null))),Rd(r,s),Ft(s),null;case 5:sd(s);var f=ms(za.current);if(a=s.type,r!==null&&s.stateNode!=null)jg(r,s,a,c,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(r=ms(lr.current),Iu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[ar]=s,c[La]=g,r=(s.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(f=0;f<ba.length;f++)Je(ba[f],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Fs(c,g),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Je("invalid",c);break;case"textarea":Bs(c,g),Je("invalid",c)}da(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var R=g[w];w==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&mu(c.textContent,R,r),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&mu(c.textContent,R,r),f=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&Je("scroll",c)}switch(a){case"input":Ir(c),zl(c,g,!0);break;case"textarea":Ir(c),aa(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=gu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[ar]=s,r[La]=c,Mg(r,s,!1,!1),s.stateNode=r;e:{switch(w=fa(a,c),a){case"dialog":Je("cancel",r),Je("close",r),f=c;break;case"iframe":case"object":case"embed":Je("load",r),f=c;break;case"video":case"audio":for(f=0;f<ba.length;f++)Je(ba[f],r);f=c;break;case"source":Je("error",r),f=c;break;case"img":case"image":case"link":Je("error",r),Je("load",r),f=c;break;case"details":Je("toggle",r),f=c;break;case"input":Fs(r,c),f=Ki(r,c),Je("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=J({},c,{value:void 0}),Je("invalid",r);break;case"textarea":Bs(r,c),f=oa(r,c),Je("invalid",r);break;default:f=c}da(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var N=R[g];g==="style"?ca(r,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&la(r,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Zr(r,N):typeof N=="number"&&Zr(r,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&Je("scroll",r):N!=null&&ie(r,g,N,w))}switch(a){case"input":Ir(r),zl(r,c,!1);break;case"textarea":Ir(r),aa(r);break;case"option":c.value!=null&&r.setAttribute("value",""+Ue(c.value));break;case"select":r.multiple=!!c.multiple,g=c.value,g!=null?Ar(r,!!c.multiple,g,!1):c.defaultValue!=null&&Ar(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=gu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(r&&s.stateNode!=null)Ug(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ms(za.current),ms(lr.current),Iu(s)){if(c=s.stateNode,a=s.memoizedProps,c[ar]=s,(g=c.nodeValue!==a)&&(r=mn,r!==null))switch(r.tag){case 3:mu(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&mu(c.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[ar]=s,s.stateNode=c}return Ft(s),null;case 13:if(Ye(rt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(tt&&gn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Bm(),To(),s.flags|=98560,g=!1;else if(g=Iu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ar]=s}else To(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),g=!1}else Hn!==null&&(Md(Hn),Hn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?It===0&&(It=3):Fd())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return Ro(),Rd(r,s),r===null&&Oa(s.stateNode.containerInfo),Ft(s),null;case 10:return ed(s.type._context),Ft(s),null;case 17:return en(s.type)&&vu(),Ft(s),null;case 19:if(Ye(rt),g=s.memoizedState,g===null)return Ft(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Wa(g,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=ku(r),w!==null){for(s.flags|=128,Wa(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,r=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Qe(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ke()>xo&&(s.flags|=128,c=!0,Wa(g,!1),s.lanes=4194304)}else{if(!c)if(r=ku(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!tt)return Ft(s),null}else 2*Ke()-g.renderingStartTime>xo&&a!==1073741824&&(s.flags|=128,c=!0,Wa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ke(),s.sibling=null,a=rt.current,Qe(rt,c?a&1|2:a&1),s):(Ft(s),null);case 22:case 23:return Ud(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(yn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function fT(r,s){switch(Kh(s),s.tag){case 1:return en(s.type)&&vu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ro(),Ye(Zt),Ye(jt),ad(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return sd(s),null;case 13:if(Ye(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));To()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ye(rt),null;case 4:return Ro(),null;case 10:return ed(s.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var ju=!1,zt=!1,pT=typeof WeakSet=="function"?WeakSet:Set,he=null;function Po(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(r,s,c)}else a.current=null}function Cd(r,s,a){try{a()}catch(c){ot(r,s,c)}}var Fg=!1;function mT(r,s){if(Uh=ai,r=vm(),Nh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,R=-1,N=-1,B=0,Z=0,ee=r,Y=null;t:for(;;){for(var le;ee!==a||f!==0&&ee.nodeType!==3||(R=w+f),ee!==g||c!==0&&ee.nodeType!==3||(N=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(le=ee.firstChild)!==null;)Y=ee,ee=le;for(;;){if(ee===r)break t;if(Y===a&&++B===f&&(R=w),Y===g&&++Z===c&&(N=w),(le=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=le}a=R===-1||N===-1?null:{start:R,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fh={focusedElem:r,selectionRange:a},ai=!1,he=s;he!==null;)if(s=he,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,he=r;else for(;he!==null;){s=he;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ct=fe.memoizedState,U=s.stateNode,V=U.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Wn(s.type,pe),ct);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){ot(s,s.return,ne)}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}return fe=Fg,Fg=!1,fe}function Ga(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Cd(s,a,g)}f=f.next}while(f!==c)}}function Uu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Pd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function zg(r){var s=r.alternate;s!==null&&(r.alternate=null,zg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ar],delete s[La],delete s[qh],delete s[J0],delete s[Y0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Bg(r){return r.tag===5||r.tag===3||r.tag===4}function $g(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Bg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function kd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=gu));else if(c!==4&&(r=r.child,r!==null))for(kd(r,s,a),r=r.sibling;r!==null;)kd(r,s,a),r=r.sibling}function xd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(xd(r,s,a),r=r.sibling;r!==null;)xd(r,s,a),r=r.sibling}var bt=null,Gn=!1;function gi(r,s,a){for(a=a.child;a!==null;)qg(r,s,a),a=a.sibling}function qg(r,s,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(rs,a)}catch{}switch(a.tag){case 5:zt||Po(a,s);case 6:var c=bt,f=Gn;bt=null,gi(r,s,a),bt=c,Gn=f,bt!==null&&(Gn?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Gn?(r=bt,a=a.stateNode,r.nodeType===8?$h(r.parentNode,a):r.nodeType===1&&$h(r,a),Bn(r)):$h(bt,a.stateNode));break;case 4:c=bt,f=Gn,bt=a.stateNode.containerInfo,Gn=!0,gi(r,s,a),bt=c,Gn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Cd(a,s,w),f=f.next}while(f!==c)}gi(r,s,a);break;case 1:if(!zt&&(Po(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){ot(a,s,R)}gi(r,s,a);break;case 21:gi(r,s,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,gi(r,s,a),zt=c):gi(r,s,a);break;default:gi(r,s,a)}}function Hg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new pT),s.forEach(function(c){var f=ST.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Kn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=r,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 5:bt=R.stateNode,Gn=!1;break e;case 3:bt=R.stateNode.containerInfo,Gn=!0;break e;case 4:bt=R.stateNode.containerInfo,Gn=!0;break e}R=R.return}if(bt===null)throw Error(t(160));qg(g,w,f),bt=null,Gn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(B){ot(f,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Wg(s,r),s=s.sibling}function Wg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Kn(s,r),cr(r),c&4){try{Ga(3,r,r.return),Uu(3,r)}catch(pe){ot(r,r.return,pe)}try{Ga(5,r,r.return)}catch(pe){ot(r,r.return,pe)}}break;case 1:Kn(s,r),cr(r),c&512&&a!==null&&Po(a,a.return);break;case 5:if(Kn(s,r),cr(r),c&512&&a!==null&&Po(a,a.return),r.flags&32){var f=r.stateNode;try{Zr(f,"")}catch(pe){ot(r,r.return,pe)}}if(c&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,R=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&ia(f,g),fa(R,w);var B=fa(R,g);for(w=0;w<N.length;w+=2){var Z=N[w],ee=N[w+1];Z==="style"?ca(f,ee):Z==="dangerouslySetInnerHTML"?la(f,ee):Z==="children"?Zr(f,ee):ie(f,Z,ee,B)}switch(R){case"input":sa(f,g);break;case"textarea":$s(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?Ar(f,!!g.multiple,le,!1):Y!==!!g.multiple&&(g.defaultValue!=null?Ar(f,!!g.multiple,g.defaultValue,!0):Ar(f,!!g.multiple,g.multiple?[]:"",!1))}f[La]=g}catch(pe){ot(r,r.return,pe)}}break;case 6:if(Kn(s,r),cr(r),c&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(pe){ot(r,r.return,pe)}}break;case 3:if(Kn(s,r),cr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Bn(s.containerInfo)}catch(pe){ot(r,r.return,pe)}break;case 4:Kn(s,r),cr(r);break;case 13:Kn(s,r),cr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(bd=Ke())),c&4&&Hg(r);break;case 22:if(Z=a!==null&&a.memoizedState!==null,r.mode&1?(zt=(B=zt)||Z,Kn(s,r),zt=B):Kn(s,r),cr(r),c&8192){if(B=r.memoizedState!==null,(r.stateNode.isHidden=B)&&!Z&&(r.mode&1)!==0)for(he=r,Z=r.child;Z!==null;){for(ee=he=Z;he!==null;){switch(Y=he,le=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ga(4,Y,Y.return);break;case 1:Po(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){c=Y,a=Y.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){ot(c,a,pe)}}break;case 5:Po(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Qg(ee);continue}}le!==null?(le.return=Y,he=le):Qg(ee)}Z=Z.sibling}e:for(Z=null,ee=r;;){if(ee.tag===5){if(Z===null){Z=ee;try{f=ee.stateNode,B?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=ee.stateNode,N=ee.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=ua("display",w))}catch(pe){ot(r,r.return,pe)}}}else if(ee.tag===6){if(Z===null)try{ee.stateNode.nodeValue=B?"":ee.memoizedProps}catch(pe){ot(r,r.return,pe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;Z===ee&&(Z=null),ee=ee.return}Z===ee&&(Z=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Kn(s,r),cr(r),c&4&&Hg(r);break;case 21:break;default:Kn(s,r),cr(r)}}function cr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Bg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Zr(f,""),c.flags&=-33);var g=$g(r);xd(r,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,R=$g(r);kd(r,R,w);break;default:throw Error(t(161))}}catch(N){ot(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function gT(r,s,a){he=r,Gg(r)}function Gg(r,s,a){for(var c=(r.mode&1)!==0;he!==null;){var f=he,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||ju;if(!w){var R=f.alternate,N=R!==null&&R.memoizedState!==null||zt;R=ju;var B=zt;if(ju=w,(zt=N)&&!B)for(he=f;he!==null;)w=he,N=w.child,w.tag===22&&w.memoizedState!==null?Xg(f):N!==null?(N.return=w,he=N):Xg(f);for(;g!==null;)he=g,Gg(g),g=g.sibling;he=f,ju=R,zt=B}Kg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,he=g):Kg(r)}}function Kg(r){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||Uu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Wn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Qm(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Qm(s,w,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var Z=B.memoizedState;if(Z!==null){var ee=Z.dehydrated;ee!==null&&Bn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&Pd(s)}catch(Y){ot(s,s.return,Y)}}if(s===r){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function Qg(r){for(;he!==null;){var s=he;if(s===r){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function Xg(r){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Uu(4,s)}catch(N){ot(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(N){ot(s,f,N)}}var g=s.return;try{Pd(s)}catch(N){ot(s,g,N)}break;case 5:var w=s.return;try{Pd(s)}catch(N){ot(s,w,N)}}}catch(N){ot(s,s.return,N)}if(s===r){he=null;break}var R=s.sibling;if(R!==null){R.return=s.return,he=R;break}he=s.return}}var yT=Math.ceil,Fu=oe.ReactCurrentDispatcher,Nd=oe.ReactCurrentOwner,Pn=oe.ReactCurrentBatchConfig,Le=0,Pt=null,mt=null,Ot=0,yn=0,ko=hi(0),It=0,Ka=null,ys=0,zu=0,Dd=0,Qa=null,nn=null,bd=0,xo=1/0,Fr=null,Bu=!1,Od=null,yi=null,$u=!1,vi=null,qu=0,Xa=0,Vd=null,Hu=-1,Wu=0;function Qt(){return(Le&6)!==0?Ke():Hu!==-1?Hu:Hu=Ke()}function _i(r){return(r.mode&1)===0?1:(Le&2)!==0&&Ot!==0?Ot&-Ot:eT.transition!==null?(Wu===0&&(Wu=ss()),Wu):(r=De,r!==0||(r=window.event,r=r===void 0?16:Sa(r.type)),r)}function Qn(r,s,a,c){if(50<Xa)throw Xa=0,Vd=null,Error(t(185));ri(r,a,c),((Le&2)===0||r!==Pt)&&(r===Pt&&((Le&2)===0&&(zu|=a),It===4&&wi(r,Ot)),rn(r,c),a===1&&Le===0&&(s.mode&1)===0&&(xo=Ke()+500,wu&&fi()))}function rn(r,s){var a=r.callbackNode;Pr(r,s);var c=is(r,r===Pt?Ot:0);if(c===0)a!==null&&_a(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&_a(a),s===1)r.tag===0?Z0(Yg.bind(null,r)):Mm(Yg.bind(null,r)),Q0(function(){(Le&6)===0&&fi()}),a=null;else{switch(si(c)){case 1:a=ns;break;case 4:a=ei;break;case 16:a=En;break;case 536870912:a=Wl;break;default:a=En}a=oy(a,Jg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Jg(r,s){if(Hu=-1,Wu=0,(Le&6)!==0)throw Error(t(327));var a=r.callbackNode;if(No()&&r.callbackNode!==a)return null;var c=is(r,r===Pt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Gu(r,c);else{s=c;var f=Le;Le|=2;var g=ey();(Pt!==r||Ot!==s)&&(Fr=null,xo=Ke()+500,_s(r,s));do try{wT();break}catch(R){Zg(r,R)}while(!0);Zh(),Fu.current=g,Le=f,mt!==null?s=0:(Pt=null,Ot=0,s=It)}if(s!==0){if(s===2&&(f=dn(r),f!==0&&(c=f,s=Ld(r,f))),s===1)throw a=Ka,_s(r,0),wi(r,c),rn(r,Ke()),a;if(s===6)wi(r,c);else{if(f=r.current.alternate,(c&30)===0&&!vT(f)&&(s=Gu(r,c),s===2&&(g=dn(r),g!==0&&(c=g,s=Ld(r,g))),s===1))throw a=Ka,_s(r,0),wi(r,c),rn(r,Ke()),a;switch(r.finishedWork=f,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ws(r,nn,Fr);break;case 3:if(wi(r,c),(c&130023424)===c&&(s=bd+500-Ke(),10<s)){if(is(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){Qt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Bh(ws.bind(null,r,nn,Fr),s);break}ws(r,nn,Fr);break;case 4:if(wi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,f=-1;0<c;){var w=31-Wt(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*yT(c/1960))-c,10<c){r.timeoutHandle=Bh(ws.bind(null,r,nn,Fr),c);break}ws(r,nn,Fr);break;case 5:ws(r,nn,Fr);break;default:throw Error(t(329))}}}return rn(r,Ke()),r.callbackNode===a?Jg.bind(null,r):null}function Ld(r,s){var a=Qa;return r.current.memoizedState.isDehydrated&&(_s(r,s).flags|=256),r=Gu(r,s),r!==2&&(s=nn,nn=a,s!==null&&Md(s)),r}function Md(r){nn===null?nn=r:nn.push.apply(nn,r)}function vT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!qn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wi(r,s){for(s&=~Dd,s&=~zu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Wt(s),c=1<<a;r[a]=-1,s&=~c}}function Yg(r){if((Le&6)!==0)throw Error(t(327));No();var s=is(r,0);if((s&1)===0)return rn(r,Ke()),null;var a=Gu(r,s);if(r.tag!==0&&a===2){var c=dn(r);c!==0&&(s=c,a=Ld(r,c))}if(a===1)throw a=Ka,_s(r,0),wi(r,s),rn(r,Ke()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ws(r,nn,Fr),rn(r,Ke()),null}function jd(r,s){var a=Le;Le|=1;try{return r(s)}finally{Le=a,Le===0&&(xo=Ke()+500,wu&&fi())}}function vs(r){vi!==null&&vi.tag===0&&(Le&6)===0&&No();var s=Le;Le|=1;var a=Pn.transition,c=De;try{if(Pn.transition=null,De=1,r)return r()}finally{De=c,Pn.transition=a,Le=s,(Le&6)===0&&fi()}}function Ud(){yn=ko.current,Ye(ko)}function _s(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,K0(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Kh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&vu();break;case 3:Ro(),Ye(Zt),Ye(jt),ad();break;case 5:sd(c);break;case 4:Ro();break;case 13:Ye(rt);break;case 19:Ye(rt);break;case 10:ed(c.type._context);break;case 22:case 23:Ud()}a=a.return}if(Pt=r,mt=r=Ei(r.current,null),Ot=yn=s,It=0,Ka=null,Dd=zu=ys=0,nn=Qa=null,ps!==null){for(s=0;s<ps.length;s++)if(a=ps[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}ps=null}return r}function Zg(r,s){do{var a=mt;try{if(Zh(),xu.current=Ou,Nu){for(var c=it.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Nu=!1}if(gs=0,Ct=Tt=it=null,Ba=!1,$a=0,Nd.current=null,a===null||a.return===null){It=1,Ka=s,mt=null;break}e:{var g=r,w=a.return,R=a,N=s;if(s=Ot,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var B=N,Z=R,ee=Z.tag;if((Z.mode&1)===0&&(ee===0||ee===11||ee===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=Sg(w);if(le!==null){le.flags&=-257,Ag(le,w,R,g,s),le.mode&1&&Ig(g,B,s),s=le,N=B;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(N),s.updateQueue=pe}else fe.add(N);break e}else{if((s&1)===0){Ig(g,B,s),Fd();break e}N=Error(t(426))}}else if(tt&&R.mode&1){var ct=Sg(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Ag(ct,w,R,g,s),Jh(Co(N,R));break e}}g=N=Co(N,R),It!==4&&(It=2),Qa===null?Qa=[g]:Qa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Eg(g,N,s);Km(g,U);break e;case 1:R=N;var V=g.type,F=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(yi===null||!yi.has(F)))){g.flags|=65536,s&=-s,g.lanes|=s;var ne=Tg(g,R,s);Km(g,ne);break e}}g=g.return}while(g!==null)}ny(a)}catch(me){s=me,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function ey(){var r=Fu.current;return Fu.current=Ou,r===null?Ou:r}function Fd(){(It===0||It===3||It===2)&&(It=4),Pt===null||(ys&268435455)===0&&(zu&268435455)===0||wi(Pt,Ot)}function Gu(r,s){var a=Le;Le|=2;var c=ey();(Pt!==r||Ot!==s)&&(Fr=null,_s(r,s));do try{_T();break}catch(f){Zg(r,f)}while(!0);if(Zh(),Le=a,Fu.current=c,mt!==null)throw Error(t(261));return Pt=null,Ot=0,It}function _T(){for(;mt!==null;)ty(mt)}function wT(){for(;mt!==null&&!ql();)ty(mt)}function ty(r){var s=sy(r.alternate,r,yn);r.memoizedProps=r.pendingProps,s===null?ny(r):mt=s,Nd.current=null}function ny(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=dT(a,s,yn),a!==null){mt=a;return}}else{if(a=fT(a,s),a!==null){a.flags&=32767,mt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);It===0&&(It=5)}function ws(r,s,a){var c=De,f=Pn.transition;try{Pn.transition=null,De=1,ET(r,s,a,c)}finally{Pn.transition=f,De=c}return null}function ET(r,s,a,c){do No();while(vi!==null);if((Le&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(He(r,g),r===Pt&&(mt=Pt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||$u||($u=!0,oy(En,function(){return No(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Pn.transition,Pn.transition=null;var w=De;De=1;var R=Le;Le|=4,Nd.current=null,mT(r,a),Wg(a,r),z0(Fh),ai=!!Uh,Fh=Uh=null,r.current=a,gT(a),Ih(),Le=R,De=w,Pn.transition=g}else r.current=a;if($u&&($u=!1,vi=r,qu=f),g=r.pendingLanes,g===0&&(yi=null),Gl(a.stateNode),rn(r,Ke()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Bu)throw Bu=!1,r=Od,Od=null,r;return(qu&1)!==0&&r.tag!==0&&No(),g=r.pendingLanes,(g&1)!==0?r===Vd?Xa++:(Xa=0,Vd=r):Xa=0,fi(),null}function No(){if(vi!==null){var r=si(qu),s=Pn.transition,a=De;try{if(Pn.transition=null,De=16>r?16:r,vi===null)var c=!1;else{if(r=vi,vi=null,qu=0,(Le&6)!==0)throw Error(t(331));var f=Le;for(Le|=4,he=r.current;he!==null;){var g=he,w=g.child;if((he.flags&16)!==0){var R=g.deletions;if(R!==null){for(var N=0;N<R.length;N++){var B=R[N];for(he=B;he!==null;){var Z=he;switch(Z.tag){case 0:case 11:case 15:Ga(8,Z,g)}var ee=Z.child;if(ee!==null)ee.return=Z,he=ee;else for(;he!==null;){Z=he;var Y=Z.sibling,le=Z.return;if(zg(Z),Z===B){he=null;break}if(Y!==null){Y.return=le,he=Y;break}he=le}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ct=pe.sibling;pe.sibling=null,pe=ct}while(pe!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,he=w;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ga(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,he=U;break e}he=g.return}}var V=r.current;for(he=V;he!==null;){w=he;var F=w.child;if((w.subtreeFlags&2064)!==0&&F!==null)F.return=w,he=F;else e:for(w=V;he!==null;){if(R=he,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Uu(9,R)}}catch(me){ot(R,R.return,me)}if(R===w){he=null;break e}var ne=R.sibling;if(ne!==null){ne.return=R.return,he=ne;break e}he=R.return}}if(Le=f,fi(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(rs,r)}catch{}c=!0}return c}finally{De=a,Pn.transition=s}}return!1}function ry(r,s,a){s=Co(a,s),s=Eg(r,s,1),r=mi(r,s,1),s=Qt(),r!==null&&(ri(r,1,s),rn(r,s))}function ot(r,s,a){if(r.tag===3)ry(r,r,a);else for(;s!==null;){if(s.tag===3){ry(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(yi===null||!yi.has(c))){r=Co(a,r),r=Tg(s,r,1),s=mi(s,r,1),r=Qt(),s!==null&&(ri(s,1,r),rn(s,r));break}}s=s.return}}function TT(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&a,Pt===r&&(Ot&a)===a&&(It===4||It===3&&(Ot&130023424)===Ot&&500>Ke()-bd?_s(r,0):Dd|=a),rn(r,s)}function iy(r,s){s===0&&((r.mode&1)===0?s=1:(s=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var a=Qt();r=Mr(r,s),r!==null&&(ri(r,s,a),rn(r,a))}function IT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),iy(r,a)}function ST(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),iy(r,a)}var sy;sy=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return tn=!1,hT(r,s,a);tn=(r.flags&131072)!==0}else tn=!1,tt&&(s.flags&1048576)!==0&&jm(s,Tu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Mu(r,s),r=s.pendingProps;var f=_o(s,jt.current);Ao(s,a),f=cd(null,s,c,r,f,a);var g=hd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(c)?(g=!0,_u(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,rd(s),f.updater=Vu,s.stateNode=f,f._reactInternals=s,yd(s,c,r,a),s=Ed(null,s,c,!0,g,a)):(s.tag=0,tt&&g&&Gh(s),Kt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Mu(r,s),r=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=RT(c),r=Wn(c,r),f){case 0:s=wd(null,s,c,r,a);break e;case 1:s=Ng(null,s,c,r,a);break e;case 11:s=Rg(null,s,c,r,a);break e;case 14:s=Cg(null,s,c,Wn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Wn(c,f),wd(r,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Wn(c,f),Ng(r,s,c,f,a);case 3:e:{if(Dg(s),r===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,Gm(r,s),Pu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Co(Error(t(423)),s),s=bg(r,s,c,a,f);break e}else if(c!==f){f=Co(Error(t(424)),s),s=bg(r,s,c,a,f);break e}else for(gn=ci(s.stateNode.containerInfo.firstChild),mn=s,tt=!0,Hn=null,a=Hm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(To(),c===f){s=Ur(r,s,a);break e}Kt(r,s,c,a)}s=s.child}return s;case 5:return Xm(s),r===null&&Xh(s),c=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,zh(c,f)?w=null:g!==null&&zh(c,g)&&(s.flags|=32),xg(r,s),Kt(r,s,w,a),s.child;case 6:return r===null&&Xh(s),null;case 13:return Og(r,s,a);case 4:return id(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Io(s,null,c,a):Kt(r,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Wn(c,f),Rg(r,s,c,f,a);case 7:return Kt(r,s,s.pendingProps,a),s.child;case 8:return Kt(r,s,s.pendingProps.children,a),s.child;case 12:return Kt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Qe(Au,c._currentValue),c._currentValue=w,g!==null)if(qn(g.value,w)){if(g.children===f.children&&!Zt.current){s=Ur(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){w=g.child;for(var N=R.firstContext;N!==null;){if(N.context===c){if(g.tag===1){N=jr(-1,a&-a),N.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Z=B.pending;Z===null?N.next=N:(N.next=Z.next,Z.next=N),B.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),td(g.return,a,s),R.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),td(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Kt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Ao(s,a),f=Rn(f),c=c(f),s.flags|=1,Kt(r,s,c,a),s.child;case 14:return c=s.type,f=Wn(c,s.pendingProps),f=Wn(c.type,f),Cg(r,s,c,f,a);case 15:return Pg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Wn(c,f),Mu(r,s),s.tag=1,en(c)?(r=!0,_u(s)):r=!1,Ao(s,a),_g(s,c,f),yd(s,c,f,a),Ed(null,s,c,!0,r,a);case 19:return Lg(r,s,a);case 22:return kg(r,s,a)}throw Error(t(156,s.tag))};function oy(r,s){return Js(r,s)}function AT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(r,s,a,c){return new AT(r,s,a,c)}function zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function RT(r){if(typeof r=="function")return zd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===qe)return 14}return 2}function Ei(r,s){var a=r.alternate;return a===null?(a=kn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ku(r,s,a,c,f,g){var w=2;if(c=r,typeof r=="function")zd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case D:return Es(a.children,f,g,s);case A:w=8,f|=8;break;case P:return r=kn(12,a,s,f|2),r.elementType=P,r.lanes=g,r;case C:return r=kn(13,a,s,f),r.elementType=C,r.lanes=g,r;case $e:return r=kn(19,a,s,f),r.elementType=$e,r.lanes=g,r;case Pe:return Qu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:w=10;break e;case L:w=9;break e;case M:w=11;break e;case qe:w=14;break e;case Be:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=kn(w,a,s,f),s.elementType=r,s.type=c,s.lanes=g,s}function Es(r,s,a,c){return r=kn(7,r,c,s),r.lanes=a,r}function Qu(r,s,a,c){return r=kn(22,r,c,s),r.elementType=Pe,r.lanes=a,r.stateNode={isHidden:!1},r}function Bd(r,s,a){return r=kn(6,r,null,s),r.lanes=a,r}function $d(r,s,a){return s=kn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function CT(r,s,a,c,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ni(0),this.expirationTimes=ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function qd(r,s,a,c,f,g,w,R,N){return r=new CT(r,s,a,R,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=kn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(g),r}function PT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ay(r){if(!r)return di;r=r._reactInternals;e:{if(Mn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(en(a))return Vm(r,a,s)}return s}function ly(r,s,a,c,f,g,w,R,N){return r=qd(a,c,!0,r,f,g,w,R,N),r.context=ay(null),a=r.current,c=Qt(),f=_i(a),g=jr(c,f),g.callback=s??null,mi(a,g,f),r.current.lanes=f,ri(r,f,c),rn(r,c),r}function Xu(r,s,a,c){var f=s.current,g=Qt(),w=_i(f);return a=ay(a),s.context===null?s.context=a:s.pendingContext=a,s=jr(g,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=mi(f,s,w),r!==null&&(Qn(r,f,w,g),Cu(r,f,w)),w}function Ju(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function uy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Hd(r,s){uy(r,s),(r=r.alternate)&&uy(r,s)}function kT(){return null}var cy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Wd(r){this._internalRoot=r}Yu.prototype.render=Wd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Xu(r,s,null,null)},Yu.prototype.unmount=Wd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;vs(function(){Xu(null,r,null,null)}),s[br]=null}};function Yu(r){this._internalRoot=r}Yu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<rr.length&&s!==0&&s<rr[a].priority;a++);rr.splice(a,0,r),a===0&&tu(r)}};function Gd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Zu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function hy(){}function xT(r,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var B=Ju(w);g.call(B)}}var w=ly(s,c,r,0,null,!1,!1,"",hy);return r._reactRootContainer=w,r[br]=w.current,Oa(r.nodeType===8?r.parentNode:r),vs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var B=Ju(N);R.call(B)}}var N=qd(r,0,!1,null,null,!1,!1,"",hy);return r._reactRootContainer=N,r[br]=N.current,Oa(r.nodeType===8?r.parentNode:r),vs(function(){Xu(s,N,a,c)}),N}function ec(r,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var R=f;f=function(){var N=Ju(w);R.call(N)}}Xu(s,w,r,f)}else w=xT(a,s,r,f,c);return Ju(w)}Xl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ti(s.pendingLanes);a!==0&&(ii(s,a|1),rn(s,Ke()),(Le&6)===0&&(xo=Ke()+500,fi()))}break;case 13:vs(function(){var c=Mr(r,1);if(c!==null){var f=Qt();Qn(c,r,1,f)}}),Hd(r,1)}},eo=function(r){if(r.tag===13){var s=Mr(r,134217728);if(s!==null){var a=Qt();Qn(s,r,134217728,a)}Hd(r,134217728)}},Jl=function(r){if(r.tag===13){var s=_i(r),a=Mr(r,s);if(a!==null){var c=Qt();Qn(a,r,s,c)}Hd(r,s)}},Yl=function(){return De},Zl=function(r,s){var a=De;try{return De=r,s()}finally{De=a}},Hs=function(r,s,a){switch(s){case"input":if(sa(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var f=yu(c);if(!f)throw Error(t(90));Us(c),sa(c,f)}}}break;case"textarea":$s(r,a);break;case"select":s=a.value,s!=null&&Ar(r,!!a.multiple,s,!1)}},Yi=jd,ma=vs;var NT={usingClientEntryPoint:!1,Events:[Ma,yo,yu,tr,pa,jd]},Ja={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DT={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=va(r),r===null?null:r.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||kT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{rs=tc.inject(DT),hn=tc}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT,sn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(s))throw Error(t(200));return PT(r,s,null,a)},sn.createRoot=function(r,s){if(!Gd(r))throw Error(t(299));var a=!1,c="",f=cy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=qd(r,1,!1,null,null,a,!1,c,f),r[br]=s.current,Oa(r.nodeType===8?r.parentNode:r),new Wd(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=va(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return vs(r)},sn.hydrate=function(r,s,a){if(!Zu(s))throw Error(t(200));return ec(null,r,s,!0,a)},sn.hydrateRoot=function(r,s,a){if(!Gd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=cy;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ly(s,null,r,1,a??null,f,!1,g,w),r[br]=s.current,Oa(r),c)for(r=0;r<c.length;r++)a=c[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Yu(s)},sn.render=function(r,s,a){if(!Zu(s))throw Error(t(200));return ec(null,r,s,!1,a)},sn.unmountComponentAtNode=function(r){if(!Zu(r))throw Error(t(40));return r._reactRootContainer?(vs(function(){ec(null,null,r,!1,function(){r._reactRootContainer=null,r[br]=null})}),!0):!1},sn.unstable_batchedUpdates=jd,sn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Zu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ec(r,s,a,!1,c)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var _y;function __(){if(_y)return Xd.exports;_y=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xd.exports=zT(),Xd.exports}var wy;function BT(){if(wy)return nc;wy=1;var n=__();return nc.createRoot=n.createRoot,nc.hydrateRoot=n.hydrateRoot,nc}var $T=BT();const qT=y_($T);__();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hl.apply(this,arguments)}var Pi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Pi||(Pi={}));const Ey="popstate";function HT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:h,hash:d}=i.location;return mf("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Ic(o)}return GT(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WT(){return Math.random().toString(36).substr(2,8)}function Ty(n,e){return{usr:n.state,key:n.key,idx:e}}function mf(n,e,t,i){return t===void 0&&(t=null),hl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:t,key:e&&e.key||i||WT()})}function Ic(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ko(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function GT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d=Pi.Pop,m=null,y=v();y==null&&(y=0,h.replaceState(hl({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function I(){d=Pi.Pop;let O=v(),$=O==null?null:O-y;y=O,m&&m({action:d,location:q.location,delta:$})}function S(O,$){d=Pi.Push;let te=mf(q.location,O,$);y=v()+1;let ie=Ty(te,y),oe=q.createHref(te);try{h.pushState(ie,"",oe)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;o.location.assign(oe)}l&&m&&m({action:d,location:q.location,delta:1})}function k(O,$){d=Pi.Replace;let te=mf(q.location,O,$);y=v();let ie=Ty(te,y),oe=q.createHref(te);h.replaceState(ie,"",oe),l&&m&&m({action:d,location:q.location,delta:0})}function z(O){let $=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof O=="string"?O:Ic(O);return te=te.replace(/ $/,"%20"),ft($,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,$)}let q={get action(){return d},get location(){return n(o,h)},listen(O){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Ey,I),m=O,()=>{o.removeEventListener(Ey,I),m=null}},createHref(O){return e(o,O)},createURL:z,encodeLocation(O){let $=z(O);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:S,replace:k,go(O){return h.go(O)}};return q}var Iy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Iy||(Iy={}));function KT(n,e,t){return t===void 0&&(t="/"),QT(n,e,t)}function QT(n,e,t,i){let o=typeof e=="string"?Ko(e):e,l=Yf(o.pathname||"/",t);if(l==null)return null;let h=w_(n);XT(h);let d=null;for(let m=0;d==null&&m<h.length;++m){let y=lI(l);d=sI(h[m],y)}return d}function w_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(ft(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let y=xi([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),w_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:rI(y,l.index),routesMeta:v})};return n.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let m of E_(l.path))o(l,h,m)}),e}function E_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=E_(i.join("/")),d=[];return d.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&d.push(...h),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function XT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const JT=/^:[\w-]+$/,YT=3,ZT=2,eI=1,tI=10,nI=-2,Sy=n=>n==="*";function rI(n,e){let t=n.split("/"),i=t.length;return t.some(Sy)&&(i+=nI),e&&(i+=ZT),t.filter(o=>!Sy(o)).reduce((o,l)=>o+(JT.test(l)?YT:l===""?eI:tI),i)}function iI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function sI(n,e,t){let{routesMeta:i}=n,o={},l="/",h=[];for(let d=0;d<i.length;++d){let m=i[d],y=d===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",I=oI({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},v),S=m.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:xi([l,I.pathname]),pathnameBase:fI(xi([l,I.pathnameBase])),route:S}),I.pathnameBase!=="/"&&(l=xi([l,I.pathnameBase]))}return h}function oI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=aI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,v,I)=>{let{paramName:S,isOptional:k}=v;if(S==="*"){let q=d[I]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const z=d[I];return k&&!z?y[S]=void 0:y[S]=(z||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:n}}function aI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Jf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function lI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Yf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const uI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cI=n=>uI.test(n);function hI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ko(n):n,l;if(t)if(cI(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Jf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Ay(t.substring(1),"/"):l=Ay(t,e)}else l=e;return{pathname:l,search:pI(i),hash:mI(o)}}function Ay(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Zd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zf(n,e){let t=dI(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function ep(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ko(n):(o=hl({},n),ft(!o.pathname||!o.pathname.includes("?"),Zd("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Zd("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Zd("#","search","hash",o)));let l=n===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),I-=1;o.pathname=S.join("/")}d=I>=0?e[I]:"/"}let m=hI(o,d),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||v)&&(m.pathname+="/"),m}const xi=n=>n.join("/").replace(/\/\/+/g,"/"),fI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const T_=["post","put","patch","delete"];new Set(T_);const yI=["get",...T_];new Set(yI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dl.apply(this,arguments)}const tp=Q.createContext(null),vI=Q.createContext(null),qi=Q.createContext(null),Hc=Q.createContext(null),Hi=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),I_=Q.createContext(null);function _I(n,e){let{relative:t}=e===void 0?{}:e;Qo()||ft(!1);let{basename:i,navigator:o}=Q.useContext(qi),{hash:l,pathname:h,search:d}=A_(n,{relative:t}),m=h;return i!=="/"&&(m=h==="/"?i:xi([i,h])),o.createHref({pathname:m,search:d,hash:l})}function Qo(){return Q.useContext(Hc)!=null}function Sl(){return Qo()||ft(!1),Q.useContext(Hc).location}function S_(n){Q.useContext(qi).static||Q.useLayoutEffect(n)}function Al(){let{isDataRoute:n}=Q.useContext(Hi);return n?DI():wI()}function wI(){Qo()||ft(!1);let n=Q.useContext(tp),{basename:e,future:t,navigator:i}=Q.useContext(qi),{matches:o}=Q.useContext(Hi),{pathname:l}=Sl(),h=JSON.stringify(Zf(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return S_(()=>{d.current=!0}),Q.useCallback(function(y,v){if(v===void 0&&(v={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let I=ep(y,JSON.parse(h),l,v.relative==="path");n==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:xi([e,I.pathname])),(v.replace?i.replace:i.push)(I,v.state,v)},[e,i,h,l,n])}function A_(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(qi),{matches:o}=Q.useContext(Hi),{pathname:l}=Sl(),h=JSON.stringify(Zf(o,i.v7_relativeSplatPath));return Q.useMemo(()=>ep(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function EI(n,e){return TI(n,e)}function TI(n,e,t,i){Qo()||ft(!1);let{navigator:o}=Q.useContext(qi),{matches:l}=Q.useContext(Hi),h=l[l.length-1],d=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let y=Sl(),v;if(e){var I;let O=typeof e=="string"?Ko(e):e;m==="/"||(I=O.pathname)!=null&&I.startsWith(m)||ft(!1),v=O}else v=y;let S=v.pathname||"/",k=S;if(m!=="/"){let O=m.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let z=KT(n,{pathname:k}),q=CI(z&&z.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:xi([m,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:xi([m,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,i);return e&&q?Q.createElement(Hc.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Pi.Pop}},q):q}function II(){let n=NI(),e=gI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const SI=Q.createElement(II,null);class AI extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Hi.Provider,{value:this.props.routeContext},Q.createElement(I_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RI(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(tp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Hi.Provider,{value:e},i)}function CI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=h.findIndex(I=>I.route.id&&(d==null?void 0:d[I.route.id])!==void 0);v>=0||ft(!1),h=h.slice(0,Math.min(h.length,v+1))}let m=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let v=0;v<h.length;v++){let I=h[v];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(y=v),I.route.id){let{loaderData:S,errors:k}=t,z=I.route.loader&&S[I.route.id]===void 0&&(!k||k[I.route.id]===void 0);if(I.route.lazy||z){m=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,I,S)=>{let k,z=!1,q=null,O=null;t&&(k=d&&I.route.id?d[I.route.id]:void 0,q=I.route.errorElement||SI,m&&(y<0&&S===0?(bI("route-fallback"),z=!0,O=null):y===S&&(z=!0,O=I.route.hydrateFallbackElement||null)));let $=e.concat(h.slice(0,S+1)),te=()=>{let ie;return k?ie=q:z?ie=O:I.route.Component?ie=Q.createElement(I.route.Component,null):I.route.element?ie=I.route.element:ie=v,Q.createElement(RI,{match:I,routeContext:{outlet:v,matches:$,isDataRoute:t!=null},children:ie})};return t&&(I.route.ErrorBoundary||I.route.errorElement||S===0)?Q.createElement(AI,{location:t.location,revalidation:t.revalidation,component:q,error:k,children:te(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):te()},null)}var R_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(R_||{}),C_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(C_||{});function PI(n){let e=Q.useContext(tp);return e||ft(!1),e}function kI(n){let e=Q.useContext(vI);return e||ft(!1),e}function xI(n){let e=Q.useContext(Hi);return e||ft(!1),e}function P_(n){let e=xI(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function NI(){var n;let e=Q.useContext(I_),t=kI(),i=P_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function DI(){let{router:n}=PI(R_.UseNavigateStable),e=P_(C_.UseNavigateStable),t=Q.useRef(!1);return S_(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,dl({fromRouteId:e},l)))},[n,e])}const Ry={};function bI(n,e,t){Ry[n]||(Ry[n]=!0)}function OI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Dn(n){let{to:e,replace:t,state:i,relative:o}=n;Qo()||ft(!1);let{future:l,static:h}=Q.useContext(qi),{matches:d}=Q.useContext(Hi),{pathname:m}=Sl(),y=Al(),v=ep(e,Zf(d,l.v7_relativeSplatPath),m,o==="path"),I=JSON.stringify(v);return Q.useEffect(()=>y(JSON.parse(I),{replace:t,state:i,relative:o}),[y,I,o,t,i]),null}function Is(n){ft(!1)}function VI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Pi.Pop,navigator:l,static:h=!1,future:d}=n;Qo()&&ft(!1);let m=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:m,navigator:l,static:h,future:dl({v7_relativeSplatPath:!1},d)}),[m,d,l,h]);typeof i=="string"&&(i=Ko(i));let{pathname:v="/",search:I="",hash:S="",state:k=null,key:z="default"}=i,q=Q.useMemo(()=>{let O=Yf(v,m);return O==null?null:{location:{pathname:O,search:I,hash:S,state:k,key:z},navigationType:o}},[m,v,I,S,k,z,o]);return q==null?null:Q.createElement(qi.Provider,{value:y},Q.createElement(Hc.Provider,{children:t,value:q}))}function LI(n){let{children:e,location:t}=n;return EI(gf(e),t)}new Promise(()=>{});function gf(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,gf(i.props.children,l));return}i.type!==Is&&ft(!1),!i.props.index||!i.props.children||ft(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=gf(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yf.apply(this,arguments)}function MI(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function jI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function UI(n,e){return n.button===0&&(!e||e==="_self")&&!jI(n)}const FI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zI="6";try{window.__reactRouterVersion=zI}catch{}const BI="startTransition",Cy=jT[BI];function $I(n){let{basename:e,children:t,future:i,window:o}=n,l=Q.useRef();l.current==null&&(l.current=HT({window:o,v5Compat:!0}));let h=l.current,[d,m]=Q.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},v=Q.useCallback(I=>{y&&Cy?Cy(()=>m(I)):m(I)},[m,y]);return Q.useLayoutEffect(()=>h.listen(v),[h,v]),Q.useEffect(()=>OI(i),[i]),Q.createElement(VI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:h,future:i})}const qI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WI=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:d,target:m,to:y,preventScrollReset:v,viewTransition:I}=e,S=MI(e,FI),{basename:k}=Q.useContext(qi),z,q=!1;if(typeof y=="string"&&HI.test(y)&&(z=y,qI))try{let ie=new URL(window.location.href),oe=y.startsWith("//")?new URL(ie.protocol+y):new URL(y),Ie=Yf(oe.pathname,k);oe.origin===ie.origin&&Ie!=null?y=Ie+oe.search+oe.hash:q=!0}catch{}let O=_I(y,{relative:o}),$=GI(y,{replace:h,state:d,target:m,preventScrollReset:v,relative:o,viewTransition:I});function te(ie){i&&i(ie),ie.defaultPrevented||$(ie)}return Q.createElement("a",yf({},S,{href:z||O,onClick:q||l?i:te,ref:t,target:m}))});var Py;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Py||(Py={}));var ky;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ky||(ky={}));function GI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:d}=e===void 0?{}:e,m=Al(),y=Sl(),v=A_(n,{relative:h});return Q.useCallback(I=>{if(UI(I,t)){I.preventDefault();let S=i!==void 0?i:Ic(y)===Ic(v);m(n,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:d})}},[y,m,v,i,o,t,n,l,h,d])}const k_=Q.createContext(null);function KI({children:n}){const[e,t]=Q.useState([]),i=Q.useCallback((l,h)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(m=>[...m,{id:d,type:l,message:h}]),window.setTimeout(()=>{t(m=>m.filter(y=>y.id!==d))},3200)},[]),o=Q.useMemo(()=>({showSuccess:l=>i("success",l),showError:l=>i("error",l)}),[i]);return E.jsxs(k_.Provider,{value:o,children:[n,E.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(l=>E.jsx("div",{className:`toast toast-${l.type}`,children:l.message},l.id))})]})}function Wc(){const n=Q.useContext(k_);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const QI=()=>{};var xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},XI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},N_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,d=h?n[o+1]:0,m=o+2<n.length,y=m?n[o+2]:0,v=l>>2,I=(l&3)<<4|d>>4;let S=(d&15)<<2|y>>6,k=y&63;m||(k=64,h||(S=64)),i.push(t[v],t[I],t[S],t[k])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(x_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const I=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||I==null)throw new JI;const S=l<<2|d>>4;if(i.push(S),y!==64){const k=d<<4&240|y>>2;if(i.push(k),I!==64){const z=y<<6&192|I;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YI=function(n){const e=x_(n);return N_.encodeByteArray(e,!0)},Sc=function(n){return YI(n).replace(/\./g,"")},D_=function(n){try{return N_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=()=>ZI().__FIREBASE_DEFAULTS__,tS=()=>{if(typeof process>"u"||typeof xy>"u")return;const n=xy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&D_(n[1]);return e&&JSON.parse(e)},Gc=()=>{try{return QI()||eS()||tS()||nS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b_=n=>{var e,t;return(t=(e=Gc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},np=n=>{const e=b_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},O_=()=>{var n;return(n=Gc())===null||n===void 0?void 0:n.config},V_=n=>{var e;return(e=Gc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kc(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sc(JSON.stringify(t)),Sc(JSON.stringify(h)),""].join(".")}const il={};function iS(){const n={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?n.emulator.push(e):n.prod.push(e);return n}function sS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ny=!1;function Qc(n,e){if(typeof window>"u"||typeof document>"u"||!Jr(window.location.host)||il[n]===e||il[n]||Ny)return;il[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=iS().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,k){S.setAttribute("width","24"),S.setAttribute("id",k),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ny=!0,h()},S}function v(S,k){S.setAttribute("id",k),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function I(){const S=sS(i),k=t("text"),z=document.getElementById(k)||document.createElement("span"),q=t("learnmore"),O=document.getElementById(q)||document.createElement("a"),$=t("preprendIcon"),te=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ie=S.element;d(ie),v(O,q);const oe=y();m(te,$),ie.append(te,z,O,oe),document.body.appendChild(ie)}l?(z.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function aS(){var n;const e=(n=Gc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hS(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dS(){return!aS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="FirebaseError";class Zn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mS,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rl.prototype.create)}}class Rl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?gS(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new Zn(o,d,i)}}function gS(n,e){return n.replace(yS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const yS=/\{\$([^}]+)}/g;function vS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ks(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(Dy(l)&&Dy(h)){if(!ks(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Dy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _S(n,e){const t=new wS(n,e);return t.subscribe.bind(t)}class wS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ES(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=ef),o.error===void 0&&(o.error=ef),o.complete===void 0&&(o.complete=ef);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ES(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ef(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(n){return n&&n._delegate?n._delegate:n}class Hr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new rS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SS(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:IS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IS(n){return n===Ss?void 0:n}function SS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xe||(xe={}));const RS={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},CS=xe.INFO,PS={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},kS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=PS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=CS,this._logHandler=kS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const xS=(n,e)=>e.some(t=>n instanceof t);let by,Oy;function NS(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DS(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M_=new WeakMap,vf=new WeakMap,j_=new WeakMap,tf=new WeakMap,ip=new WeakMap;function bS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Ni(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&M_.set(t,n)}).catch(()=>{}),ip.set(e,n),e}function OS(n){if(vf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});vf.set(n,e)}let _f={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||j_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ni(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VS(n){_f=n(_f)}function LS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(nf(this),e,...t);return j_.set(i,e.sort?e.sort():[e]),Ni(i)}:DS().includes(n)?function(...e){return n.apply(nf(this),e),Ni(M_.get(this))}:function(...e){return Ni(n.apply(nf(this),e))}}function MS(n){return typeof n=="function"?LS(n):(n instanceof IDBTransaction&&OS(n),xS(n,NS())?new Proxy(n,_f):n)}function Ni(n){if(n instanceof IDBRequest)return bS(n);if(tf.has(n))return tf.get(n);const e=MS(n);return e!==n&&(tf.set(n,e),ip.set(e,n)),e}const nf=n=>ip.get(n);function jS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),d=Ni(h);return i&&h.addEventListener("upgradeneeded",m=>{i(Ni(h.result),m.oldVersion,m.newVersion,Ni(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const US=["get","getKey","getAll","getAllKeys","count"],FS=["put","add","delete","clear"],rf=new Map;function Vy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=FS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||US.includes(t)))return;const l=async function(h,...d){const m=this.transaction(h,o?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&m.done]))[0]};return rf.set(e,l),l}VS(n=>({...n,get:(e,t,i)=>Vy(e,t)||n.get(e,t,i),has:(e,t)=>!!Vy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function BS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wf="@firebase/app",Ly="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new rp("@firebase/app"),$S="@firebase/app-compat",qS="@firebase/analytics-compat",HS="@firebase/analytics",WS="@firebase/app-check-compat",GS="@firebase/app-check",KS="@firebase/auth",QS="@firebase/auth-compat",XS="@firebase/database",JS="@firebase/data-connect",YS="@firebase/database-compat",ZS="@firebase/functions",eA="@firebase/functions-compat",tA="@firebase/installations",nA="@firebase/installations-compat",rA="@firebase/messaging",iA="@firebase/messaging-compat",sA="@firebase/performance",oA="@firebase/performance-compat",aA="@firebase/remote-config",lA="@firebase/remote-config-compat",uA="@firebase/storage",cA="@firebase/storage-compat",hA="@firebase/firestore",dA="@firebase/ai",fA="@firebase/firestore-compat",pA="firebase",mA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]",gA={[wf]:"fire-core",[$S]:"fire-core-compat",[HS]:"fire-analytics",[qS]:"fire-analytics-compat",[GS]:"fire-app-check",[WS]:"fire-app-check-compat",[KS]:"fire-auth",[QS]:"fire-auth-compat",[XS]:"fire-rtdb",[JS]:"fire-data-connect",[YS]:"fire-rtdb-compat",[ZS]:"fire-fn",[eA]:"fire-fn-compat",[tA]:"fire-iid",[nA]:"fire-iid-compat",[rA]:"fire-fcm",[iA]:"fire-fcm-compat",[sA]:"fire-perf",[oA]:"fire-perf-compat",[aA]:"fire-rc",[lA]:"fire-rc-compat",[uA]:"fire-gcs",[cA]:"fire-gcs-compat",[hA]:"fire-fst",[fA]:"fire-fst-compat",[dA]:"fire-vertex","fire-js":"fire-js",[pA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,yA=new Map,Tf=new Map;function My(n,e){try{n.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Li(n){const e=n.name;if(Tf.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,n);for(const t of Ac.values())My(t,n);for(const t of yA.values())My(t,n);return!0}function Pl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function an(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new Rl("app","Firebase",vA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=mA;function U_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ef,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Di.create("bad-app-name",{appName:String(o)});if(t||(t=O_()),!t)throw Di.create("no-options");const l=Ac.get(o);if(l){if(ks(t,l.options)&&ks(i,l.config))return l;throw Di.create("duplicate-app",{appName:o})}const h=new AS(o);for(const m of Tf.values())h.addComponent(m);const d=new _A(t,i,h);return Ac.set(o,d),d}function Xc(n=Ef){const e=Ac.get(n);if(!e&&n===Ef&&O_())return U_();if(!e)throw Di.create("no-app",{appName:n});return e}function bn(n,e,t){var i;let o=(i=gA[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(d.join(" "));return}Li(new Hr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="firebase-heartbeat-database",EA=1,fl="firebase-heartbeat-store";let sf=null;function F_(){return sf||(sf=jS(wA,EA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Di.create("idb-open",{originalErrorMessage:n.message})})),sf}async function TA(n){try{const t=(await F_()).transaction(fl),i=await t.objectStore(fl).get(z_(n));return await t.done,i}catch(e){if(e instanceof Zn)Wr.warn(e.message);else{const t=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(t.message)}}}async function jy(n,e){try{const i=(await F_()).transaction(fl,"readwrite");await i.objectStore(fl).put(e,z_(n)),await i.done}catch(t){if(t instanceof Zn)Wr.warn(t.message);else{const i=Di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wr.warn(i.message)}}}function z_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=1024,SA=30;class AA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Uy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>SA){const h=PA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Uy(),{heartbeatsToSend:i,unsentEntries:o}=RA(this._heartbeatsCache.heartbeats),l=Sc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wr.warn(t),""}}}function Uy(){return new Date().toISOString().substring(0,10)}function RA(n,e=IA){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Fy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Fy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Fy(n){return Sc(JSON.stringify({version:2,heartbeats:n})).length}function PA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){Li(new Hr("platform-logger",e=>new zS(e),"PRIVATE")),Li(new Hr("heartbeat",e=>new AA(e),"PRIVATE")),bn(wf,Ly,n),bn(wf,Ly,"esm2017"),bn("fire-js","")}kA("");var xA="firebase",NA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(xA,NA,"app");function sp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function B_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DA=B_,$_=new Rl("auth","Firebase",B_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new rp("@firebase/auth");function bA(n,...e){Rc.logLevel<=xe.WARN&&Rc.warn(`Auth (${Os}): ${n}`,...e)}function fc(n,...e){Rc.logLevel<=xe.ERROR&&Rc.error(`Auth (${Os}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,...e){throw ap(n,...e)}function Jn(n,...e){return ap(n,...e)}function op(n,e,t){const i=Object.assign(Object.assign({},DA()),{[e]:t});return new Rl("auth","Firebase",i).create(e,{appName:n.name})}function bi(n){return op(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q_(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&wr(n,"argument-error"),op(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ap(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return $_.create(n,...e)}function Ee(n,e,...t){if(!n)throw ap(e,...t)}function Br(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fc(e),new Error(e)}function Gr(n,e){n||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function OA(){return zy()==="http:"||zy()==="https:"}function zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OA()||uS()||"connection"in navigator)?navigator.onLine:!0}function LA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=oS()||cS()}get(){return VA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n,e){Gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UA=new kl(3e4,6e4);function up(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xo(n,e,t,i,o={}){return W_(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=Cl(Object.assign({key:n.config.apiKey},h)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:m},l);return lS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Jr(n.emulatorConfig.host)&&(y.credentials="include"),H_.fetch()(await G_(n,n.config.apiHost,t,d),y)})}async function W_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},MA),e);try{const o=new zA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw rc(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[m,y]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw rc(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw rc(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw rc(n,"user-disabled",h);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw op(n,v,y);wr(n,v)}}catch(o){if(o instanceof Zn)throw o;wr(n,"network-request-failed",{message:String(o)})}}async function FA(n,e,t,i,o={}){const l=await Xo(n,e,t,i,o);return"mfaPendingCredential"in l&&wr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function G_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?lp(n.config,o):`${n.config.apiScheme}://${o}`;return jA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class zA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Jn(this.auth,"network-request-failed")),UA.get())})}}function rc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Jn(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n,e){return Xo(n,"POST","/v1/accounts:delete",e)}async function Cc(n,e){return Xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $A(n,e=!1){const t=nt(n),i=await t.getIdToken(e),o=cp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:sl(of(o.auth_time)),issuedAtTime:sl(of(o.iat)),expirationTime:sl(of(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function of(n){return Number(n)*1e3}function cp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return fc("JWT malformed, contained fewer than 3 sections"),null;try{const o=D_(t);return o?JSON.parse(o):(fc("Failed to decode base64 JWT payload"),null)}catch(o){return fc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function By(n){const e=cp(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Zn&&qA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function qA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await pl(n,Cc(t,{idToken:i}));Ee(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?K_(l.providerUserInfo):[],d=GA(n.providerData,h),m=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=m?y:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Sf(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,I)}async function WA(n){const e=nt(n);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function K_(n){return n.map(e=>{var{providerId:t}=e,i=sp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(n,e){const t=await W_(n,{},async()=>{const i=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await G_(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Jr(n.emulatorConfig.host)&&(m.credentials="include"),H_.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QA(n,e){return Xo(n,"POST","/v2/accounts:revokeToken",up(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):By(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=By(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await KA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Lo;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=sp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Sf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await pl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $A(this,e)}reload(){return WA(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await pl(this,BA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,m,y,v;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,k=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,z=(h=t.photoURL)!==null&&h!==void 0?h:void 0,q=(d=t.tenantId)!==null&&d!==void 0?d:void 0,O=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(y=t.createdAt)!==null&&y!==void 0?y:void 0,te=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:ie,emailVerified:oe,isAnonymous:Ie,providerData:de,stsTokenManager:D}=t;Ee(ie&&D,e,"internal-error");const A=Lo.fromJSON(this.name,D);Ee(typeof ie=="string",e,"internal-error"),Ii(I,e.name),Ii(S,e.name),Ee(typeof oe=="boolean",e,"internal-error"),Ee(typeof Ie=="boolean",e,"internal-error"),Ii(k,e.name),Ii(z,e.name),Ii(q,e.name),Ii(O,e.name),Ii($,e.name),Ii(te,e.name);const P=new Xn({uid:ie,auth:e,email:S,emailVerified:oe,displayName:I,isAnonymous:Ie,photoURL:z,phoneNumber:k,tenantId:q,stsTokenManager:A,createdAt:$,lastLoginAt:te});return de&&Array.isArray(de)&&(P.providerData=de.map(x=>Object.assign({},x))),O&&(P._redirectEventId=O),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Lo;o.updateFromServerResponse(t);const l=new Xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?K_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Lo;d.updateFromIdToken(i);const m=new Xn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Sf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;function $r(n){Gr(n instanceof Function,"Expected a class definition");let e=$y.get(n);return e?(Gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$y.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Q_.type="NONE";const qy=Q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n,e,t){return`firebase:${n}:${e}:${t}`}class Mo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=pc(this.userKey,o.apiKey,l),this.fullPersistenceKey=pc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cc(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Mo($r(qy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||$r(qy);const h=pc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const v=await y._get(h);if(v){let I;if(typeof v=="string"){const S=await Cc(e,{idToken:v}).catch(()=>{});if(!S)break;I=await Xn._fromGetAccountInfoResponse(e,S,v)}else I=Xn._fromJSON(e,v);y!==l&&(d=I),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Mo(l,e,i):(l=m[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Mo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tw(e))return"Blackberry";if(nw(e))return"Webos";if(J_(e))return"Safari";if((e.includes("chrome/")||Y_(e))&&!e.includes("edge/"))return"Chrome";if(ew(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function X_(n=Ht()){return/firefox\//i.test(n)}function J_(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y_(n=Ht()){return/crios\//i.test(n)}function Z_(n=Ht()){return/iemobile/i.test(n)}function ew(n=Ht()){return/android/i.test(n)}function tw(n=Ht()){return/blackberry/i.test(n)}function nw(n=Ht()){return/webos/i.test(n)}function hp(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XA(n=Ht()){var e;return hp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JA(){return hS()&&document.documentMode===10}function rw(n=Ht()){return hp(n)||ew(n)||nw(n)||tw(n)||/windows phone/i.test(n)||Z_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n,e=[]){let t;switch(n){case"Browser":t=Hy(Ht());break;case"Worker":t=`${Hy(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Os}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const m=e(l);h(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",up(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=6;class tR{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:eR,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wy(this),this.idTokenSubscription=new Wy(this),this.beforeStateQueue=new YA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$r(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cc(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===d)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(bi(this));const t=e?nt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZA(this),t=new tR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await QA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$r(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[$r(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&bA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jo(n){return nt(n)}class Wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=_S(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rR(n){dp=n}function iR(n){return dp.loadJS(n)}function sR(){return dp.gapiScript}function oR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n,e){const t=Pl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ks(l,e??{}))return o;wr(o,"already-initialized")}return t.initialize({options:e})}function lR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map($r);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function uR(n,e,t){const i=Jo(n);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=sw(e),{host:h,port:d}=cR(e),m=d===null?"":`:${d}`,y={url:`${l}//${h}${m}/`},v=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(ks(y,i.config.emulator)&&ks(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Jr(h)?(Kc(`${l}//${h}${m}`),Qc("Auth",!0)):hR()}function sw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cR(n){const e=sw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Gy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Gy(h)}}}function Gy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(n,e){return FA(n,"POST","/v1/accounts:signInWithIdp",up(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="http://localhost";class xs extends ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=sp(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new xs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:dR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Jc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends xl{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zr.credential(t,i)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends xl{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends xl{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ri.credential(t,i)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Xn._fromIdTokenResponse(e,i,o),h=Ky(i);return new zo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ky(i);return new zo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ky(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Zn{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new kc(e,t,i,o)}}function aw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(n,l,e,i):l})}async function fR(n,e,t=!1){const i=await pl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(n,e,t=!1){const{auth:i}=n;if(an(i.app))return Promise.reject(bi(i));const o="reauthenticate";try{const l=await pl(n,aw(i,o,e,n),t);Ee(l.idToken,i,"internal-error");const h=cp(l.idToken);Ee(h,i,"internal-error");const{sub:d}=h;return Ee(n.uid===d,i,"user-mismatch"),zo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&wr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(n,e,t=!1){if(an(n.app))return Promise.reject(bi(n));const i="signIn",o=await aw(n,i,e),l=await zo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,e){return nt(n).setPersistence(e)}function lw(n,e,t,i){return nt(n).onIdTokenChanged(e,t,i)}function yR(n,e,t){return nt(n).beforeAuthStateChanged(e,t)}function Yc(n){return nt(n).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,_R=10;class cw extends uw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);JA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_R):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cw.type="LOCAL";const hw=cw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw extends uw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dw.type="SESSION";const fw=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Zc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async y=>y(t.origin,l)),m=await wR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,m)=>{const y=fp("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function TR(n){pr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function IR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function AR(){return pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firebaseLocalStorageDb",RR=1,Nc="firebaseLocalStorage",gw="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function eh(n,e){return n.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function CR(){const n=indexedDB.deleteDatabase(mw);return new Nl(n).toPromise()}function Af(){const n=indexedDB.open(mw,RR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Nc,{keyPath:gw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Nc)?e(i):(i.close(),await CR(),e(await Af()))})})}async function Qy(n,e,t){const i=eh(n,!0).put({[gw]:e,value:t});return new Nl(i).toPromise()}async function PR(n,e){const t=eh(n,!1).get(e),i=await new Nl(t).toPromise();return i===void 0?null:i.value}function Xy(n,e){const t=eh(n,!0).delete(e);return new Nl(t).toPromise()}const kR=800,xR=3;class yw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(AR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await IR(),!this.activeServiceWorker)return;this.sender=new ER(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await Qy(e,xc,"1"),await Xy(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>PR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=eh(o,!1).getAll();return new Nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yw.type="LOCAL";const NR=yw;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n,e){return e?$r(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DR(n){return mR(n.auth,new mp(n),n.bypassAuthState)}function bR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),pR(t,new mp(n),n.bypassAuthState)}async function OR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),fR(t,new mp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return bR;default:wr(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new kl(2e3,1e4);async function LR(n,e,t){if(an(n.app))return Promise.reject(Jn(n,"operation-not-supported-in-this-environment"));const i=Jo(n);q_(n,e,Jc);const o=pp(i,t);return new As(i,"signInViaPopup",e,o).executeNotNull()}class As extends vw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VR.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="pendingRedirect",mc=new Map;class jR extends vw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=mc.get(this.auth._key());if(!e){try{const i=await UR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}mc.set(this.auth._key(),e)}return this.bypassAuthState||mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(n,e){const t=ww(e),i=_w(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function FR(n,e){return _w(n)._set(ww(e),"true")}function zR(n,e){mc.set(n._key(),e)}function _w(n){return $r(n._redirectPersistence)}function ww(n){return pc(MR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(n,e,t){return $R(n,e,t)}async function $R(n,e,t){if(an(n.app))return Promise.reject(bi(n));const i=Jo(n);q_(n,e,Jc),await i._initializationPromise;const o=pp(i,t);return await FR(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function qR(n,e){return await Jo(n)._initializationPromise,Ew(n,e,!1)}async function Ew(n,e,t=!1){if(an(n.app))return Promise.reject(bi(n));const i=Jo(n),o=pp(i,e),h=await new jR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=600*1e3;class WR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Tw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Jn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jy(e))}saveEventToCache(e){this.cachedEventUids.add(Jy(e)),this.lastProcessedEventTime=Date.now()}}function Jy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Tw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e={}){return Xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XR=/^https?/;async function JR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await KR(n);for(const t of e)try{if(YR(t))return}catch{}wr(n,"unauthorized-domain")}function YR(n){const e=If(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!XR.test(t))return!1;if(QR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new kl(3e4,6e4);function Yy(){const n=pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function e1(n){return new Promise((e,t)=>{var i,o,l;function h(){Yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yy(),t(Jn(n,"network-request-failed"))},timeout:ZR.get()})}if(!((o=(i=pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=pr().gapi)===null||l===void 0)&&l.load)h();else{const d=oR("iframefcb");return pr()[d]=()=>{gapi.load?h():t(Jn(n,"network-request-failed"))},iR(`${sR()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw gc=null,e})}let gc=null;function t1(n){return gc=gc||e1(n),gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new kl(5e3,15e3),r1="__/auth/iframe",i1="emulator/auth/iframe",s1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a1(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lp(e,i1):`https://${n.config.authDomain}/${r1}`,i={apiKey:e.apiKey,appName:n.name,v:Os},o=o1.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Cl(i).slice(1)}`}async function l1(n){const e=await t1(n),t=pr().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:a1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Jn(n,"network-request-failed"),d=pr().setTimeout(()=>{l(h)},n1.get());function m(){pr().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c1=500,h1=600,d1="_blank",f1="http://localhost";class Zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p1(n,e,t,i=c1,o=h1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},u1),{width:i.toString(),height:o.toString(),top:l,left:h}),y=Ht().toLowerCase();t&&(d=Y_(y)?d1:t),X_(y)&&(e=e||f1,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[k,z])=>`${S}${k}=${z},`,"");if(XA(y)&&d!=="_self")return m1(e||"",d),new Zy(null);const I=window.open(e||"",d,v);Ee(I,n,"popup-blocked");try{I.focus()}catch{}return new Zy(I)}function m1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="__/auth/handler",y1="emulator/auth/handler",v1=encodeURIComponent("fac");async function ev(n,e,t,i,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Os,eventId:o};if(e instanceof Jc){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",vS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,I]of Object.entries({}))h[v]=I}if(e instanceof xl){const v=e.getScopes().filter(I=>I!=="");v.length>0&&(h.scopes=v.join(","))}n.tenantId&&(h.tid=n.tenantId);const d=h;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),y=m?`#${v1}=${encodeURIComponent(m)}`:"";return`${_1(n)}?${Cl(d).slice(1)}${y}`}function _1({config:n}){return n.emulator?lp(n,y1):`https://${n.authDomain}/${g1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="webStorageSupport";class w1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fw,this._completeRedirectFn=Ew,this._overrideRedirectResult=zR}async _openPopup(e,t,i,o){var l;Gr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await ev(e,t,i,If(),o);return p1(e,h,fp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await ev(e,t,i,If(),o);return TR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Gr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await l1(e),i=new WR(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(af,{type:af},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[af];h!==void 0&&t(!!h),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rw()||J_()||hp()}}const E1=w1;var tv="@firebase/auth",nv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S1(n){Li(new Hr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iw(n)},y=new nR(i,o,l,m);return lR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Li(new Hr("auth-internal",e=>{const t=Jo(e.getProvider("auth").getImmediate());return(i=>new T1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(tv,nv,I1(n)),bn(tv,nv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=300,R1=V_("authIdTokenMaxAge")||A1;let rv=null;const C1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>R1)return;const o=t==null?void 0:t.token;rv!==o&&(rv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function P1(n=Xc()){const e=Pl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aR(n,{popupRedirectResolver:E1,persistence:[NR,hw,fw]}),i=V_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=C1(l.toString());yR(t,h,()=>h(t.currentUser)),lw(t,d=>h(d))}}const o=b_("auth");return o&&uR(t,`http://${o}`),t}function k1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}rR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Jn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",k1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S1("Browser");var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,Iw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function P(){}P.prototype=A.prototype,D.D=A.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(x,L,M){for(var C=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)C[$e-2]=arguments[$e];return A.prototype[L].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,P){P||(P=0);var x=Array(16);if(typeof A=="string")for(var L=0;16>L;++L)x[L]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(L=0;16>L;++L)x[L]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=D.g[0],P=D.g[1],L=D.g[2];var M=D.g[3],C=A+(M^P&(L^M))+x[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=M+(L^A&(P^L))+x[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=L+(P^M&(A^P))+x[2]+606105819&4294967295,L=M+(C<<17&4294967295|C>>>15),C=P+(A^L&(M^A))+x[3]+3250441966&4294967295,P=L+(C<<22&4294967295|C>>>10),C=A+(M^P&(L^M))+x[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(L^A&(P^L))+x[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=L+(P^M&(A^P))+x[6]+2821735955&4294967295,L=M+(C<<17&4294967295|C>>>15),C=P+(A^L&(M^A))+x[7]+4249261313&4294967295,P=L+(C<<22&4294967295|C>>>10),C=A+(M^P&(L^M))+x[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(L^A&(P^L))+x[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=L+(P^M&(A^P))+x[10]+4294925233&4294967295,L=M+(C<<17&4294967295|C>>>15),C=P+(A^L&(M^A))+x[11]+2304563134&4294967295,P=L+(C<<22&4294967295|C>>>10),C=A+(M^P&(L^M))+x[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(L^A&(P^L))+x[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=L+(P^M&(A^P))+x[14]+2792965006&4294967295,L=M+(C<<17&4294967295|C>>>15),C=P+(A^L&(M^A))+x[15]+1236535329&4294967295,P=L+(C<<22&4294967295|C>>>10),C=A+(L^M&(P^L))+x[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^L&(A^P))+x[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=L+(A^P&(M^A))+x[11]+643717713&4294967295,L=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(L^M))+x[0]+3921069994&4294967295,P=L+(C<<20&4294967295|C>>>12),C=A+(L^M&(P^L))+x[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^L&(A^P))+x[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=L+(A^P&(M^A))+x[15]+3634488961&4294967295,L=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(L^M))+x[4]+3889429448&4294967295,P=L+(C<<20&4294967295|C>>>12),C=A+(L^M&(P^L))+x[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^L&(A^P))+x[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=L+(A^P&(M^A))+x[3]+4107603335&4294967295,L=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(L^M))+x[8]+1163531501&4294967295,P=L+(C<<20&4294967295|C>>>12),C=A+(L^M&(P^L))+x[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^L&(A^P))+x[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=L+(A^P&(M^A))+x[7]+1735328473&4294967295,L=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(L^M))+x[12]+2368359562&4294967295,P=L+(C<<20&4294967295|C>>>12),C=A+(P^L^M)+x[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^L)+x[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=L+(M^A^P)+x[11]+1839030562&4294967295,L=M+(C<<16&4294967295|C>>>16),C=P+(L^M^A)+x[14]+4259657740&4294967295,P=L+(C<<23&4294967295|C>>>9),C=A+(P^L^M)+x[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^L)+x[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=L+(M^A^P)+x[7]+4139469664&4294967295,L=M+(C<<16&4294967295|C>>>16),C=P+(L^M^A)+x[10]+3200236656&4294967295,P=L+(C<<23&4294967295|C>>>9),C=A+(P^L^M)+x[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^L)+x[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=L+(M^A^P)+x[3]+3572445317&4294967295,L=M+(C<<16&4294967295|C>>>16),C=P+(L^M^A)+x[6]+76029189&4294967295,P=L+(C<<23&4294967295|C>>>9),C=A+(P^L^M)+x[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^L)+x[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=L+(M^A^P)+x[15]+530742520&4294967295,L=M+(C<<16&4294967295|C>>>16),C=P+(L^M^A)+x[2]+3299628645&4294967295,P=L+(C<<23&4294967295|C>>>9),C=A+(L^(P|~M))+x[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~L))+x[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=L+(A^(M|~P))+x[14]+2878612391&4294967295,L=M+(C<<15&4294967295|C>>>17),C=P+(M^(L|~A))+x[5]+4237533241&4294967295,P=L+(C<<21&4294967295|C>>>11),C=A+(L^(P|~M))+x[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~L))+x[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=L+(A^(M|~P))+x[10]+4293915773&4294967295,L=M+(C<<15&4294967295|C>>>17),C=P+(M^(L|~A))+x[1]+2240044497&4294967295,P=L+(C<<21&4294967295|C>>>11),C=A+(L^(P|~M))+x[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~L))+x[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=L+(A^(M|~P))+x[6]+2734768916&4294967295,L=M+(C<<15&4294967295|C>>>17),C=P+(M^(L|~A))+x[13]+1309151649&4294967295,P=L+(C<<21&4294967295|C>>>11),C=A+(L^(P|~M))+x[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~L))+x[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=L+(A^(M|~P))+x[2]+718787259&4294967295,L=M+(C<<15&4294967295|C>>>17),C=P+(M^(L|~A))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+M&4294967295}i.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var P=A-this.blockSize,x=this.B,L=this.h,M=0;M<A;){if(L==0)for(;M<=P;)o(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<A;)if(x[L++]=D.charCodeAt(M++),L==this.blockSize){o(this,x),L=0;break}}else for(;M<A;)if(x[L++]=D[M++],L==this.blockSize){o(this,x),L=0;break}}this.h=L,this.o+=A},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var P=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=P&255,P/=256;for(this.u(D),D=Array(16),A=P=0;4>A;++A)for(var x=0;32>x;x+=8)D[P++]=this.g[A]>>>x&255;return D};function l(D,A){var P=d;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=A(D)}function h(D,A){this.h=A;for(var P=[],x=!0,L=D.length-1;0<=L;L--){var M=D[L]|0;x&&M==A||(P[L]=M,x=!1)}this.g=P}var d={};function m(D){return-128<=D&&128>D?l(D,function(A){return new h([A|0],0>A?-1:0)}):new h([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return I;if(0>D)return O(y(-D));for(var A=[],P=1,x=0;D>=P;x++)A[x]=D/P|0,P*=4294967296;return new h(A,0)}function v(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return O(v(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(A,8)),x=I,L=0;L<D.length;L+=8){var M=Math.min(8,D.length-L),C=parseInt(D.substring(L,L+M),A);8>M?(M=y(Math.pow(A,M)),x=x.j(M).add(y(C))):(x=x.j(P),x=x.add(y(C)))}return x}var I=m(0),S=m(1),k=m(16777216);n=h.prototype,n.m=function(){if(q(this))return-O(this).m();for(var D=0,A=1,P=0;P<this.g.length;P++){var x=this.i(P);D+=(0<=x?x:4294967296+x)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(z(this))return"0";if(q(this))return"-"+O(this).toString(D);for(var A=y(Math.pow(D,6)),P=this,x="";;){var L=oe(P,A).g;P=$(P,L.j(A));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=L,z(P))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function z(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=$(this,D),q(D)?-1:z(D)?0:1};function O(D){for(var A=D.g.length,P=[],x=0;x<A;x++)P[x]=~D.g[x];return new h(P,~D.h).add(S)}n.abs=function(){return q(this)?O(this):this},n.add=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],x=0,L=0;L<=A;L++){var M=x+(this.i(L)&65535)+(D.i(L)&65535),C=(M>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);x=C>>>16,M&=65535,C&=65535,P[L]=C<<16|M}return new h(P,P[P.length-1]&-2147483648?-1:0)};function $(D,A){return D.add(O(A))}n.j=function(D){if(z(this)||z(D))return I;if(q(this))return q(D)?O(this).j(O(D)):O(O(this).j(D));if(q(D))return O(this.j(O(D)));if(0>this.l(k)&&0>D.l(k))return y(this.m()*D.m());for(var A=this.g.length+D.g.length,P=[],x=0;x<2*A;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var L=0;L<D.g.length;L++){var M=this.i(x)>>>16,C=this.i(x)&65535,$e=D.i(L)>>>16,qe=D.i(L)&65535;P[2*x+2*L]+=C*qe,te(P,2*x+2*L),P[2*x+2*L+1]+=M*qe,te(P,2*x+2*L+1),P[2*x+2*L+1]+=C*$e,te(P,2*x+2*L+1),P[2*x+2*L+2]+=M*$e,te(P,2*x+2*L+2)}for(x=0;x<A;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=A;x<2*A;x++)P[x]=0;return new h(P,0)};function te(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function ie(D,A){this.g=D,this.h=A}function oe(D,A){if(z(A))throw Error("division by zero");if(z(D))return new ie(I,I);if(q(D))return A=oe(O(D),A),new ie(O(A.g),O(A.h));if(q(A))return A=oe(D,O(A)),new ie(O(A.g),A.h);if(30<D.g.length){if(q(D)||q(A))throw Error("slowDivide_ only works with positive integers.");for(var P=S,x=A;0>=x.l(D);)P=Ie(P),x=Ie(x);var L=de(P,1),M=de(x,1);for(x=de(x,2),P=de(P,2);!z(x);){var C=M.add(x);0>=C.l(D)&&(L=L.add(P),M=C),x=de(x,1),P=de(P,1)}return A=$(D,L.j(A)),new ie(L,A)}for(L=I;0<=D.l(A);){for(P=Math.max(1,Math.floor(D.m()/A.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=y(P),C=M.j(A);q(C)||0<C.l(D);)P-=x,M=y(P),C=M.j(A);z(M)&&(M=S),L=L.add(M),D=$(D,C)}return new ie(L,D)}n.A=function(D){return oe(this,D).h},n.and=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)&D.i(x);return new h(P,this.h&D.h)},n.or=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)|D.i(x);return new h(P,this.h|D.h)},n.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)^D.i(x);return new h(P,this.h^D.h)};function Ie(D){for(var A=D.g.length+1,P=[],x=0;x<A;x++)P[x]=D.i(x)<<1|D.i(x-1)>>>31;return new h(P,D.h)}function de(D,A){var P=A>>5;A%=32;for(var x=D.g.length-P,L=[],M=0;M<x;M++)L[M]=0<A?D.i(M+P)>>>A|D.i(M+P+1)<<32-A:D.i(M+P);return new h(L,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Iw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Oi=h}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sw,el,Aw,yc,Rf,Rw,Cw,Pw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in _))break e;_=_[j]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,j={next:function(){if(!T&&_<u.length){var H=_++;return{value:p(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function I(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(p,j)}}return function(){return u.apply(p,arguments)}}function S(u,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:I,S.apply(null,arguments)}function k(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function z(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,j,H){for(var se=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)se[ze-2]=arguments[ze];return p.prototype[j].apply(T,se)}}function q(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function O(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const j=u.length||0,H=T.length||0;u.length=j+H;for(let se=0;se<H;se++)u[j+se]=T[se]}else u.push(T)}}class ${constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function te(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var Ie=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function de(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function D(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function A(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)u[_]=T[_];for(let H=0;H<P.length;H++)_=P[H],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function L(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function M(u){d.setTimeout(()=>{throw u},0)}function C(){var u=X;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,_){const T=qe.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var qe=new $(()=>new Be,u=>u.reset());class Be{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,re=!1,X=new $e,J=()=>{const u=d.Promise.resolve(void 0);Pe=()=>{u.then(b)}};var b=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){M(_)}var p=qe;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}re=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,p),d.removeEventListener("test",_,p)}catch{}return u})();function Re(u,p){if(ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Ie){e:{try{oe(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}z(Re,ce);var be={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ge(u,p,_,T,j){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=j,this.key=++Ue,this.da=this.fa=!1}function At(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ir(u){this.src=u,this.g={},this.h=0}Ir.prototype.add=function(u,p,_,T,j){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var se=Yr(u,p,T,j);return-1<se?(p=u[se],_||(p.fa=!1)):(p=new Ge(p,this.src,H,!!T,j),p.fa=_,u.push(p)),p};function Us(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],j=Array.prototype.indexOf.call(T,p,void 0),H;(H=0<=j)&&Array.prototype.splice.call(T,j,1),H&&(At(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Yr(u,p,_,T){for(var j=0;j<u.length;++j){var H=u[j];if(!H.da&&H.listener==p&&H.capture==!!_&&H.ha==T)return j}return-1}var Ki="closure_lm_"+(1e6*Math.random()|0),Fs={};function ia(u,p,_,T,j){if(Array.isArray(p)){for(var H=0;H<p.length;H++)ia(u,p[H],_,T,j);return null}return _=aa(_),u&&u[je]?u.K(p,_,y(T)?!!T.capture:!1,j):sa(u,p,_,!1,T,j)}function sa(u,p,_,T,j,H){if(!p)throw Error("Invalid event type");var se=y(j)?!!j.capture:!!j,ze=Bs(u);if(ze||(u[Ki]=ze=new Ir(u)),_=ze.add(p,_,T,se,H),_.proxy)return _;if(T=zl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ae||(j=se),j===void 0&&(j=!1),u.addEventListener(p.toString(),T,j);else if(u.attachEvent)u.attachEvent(Ar(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function zl(){function u(_){return p.call(u.src,u.listener,_)}const p=oa;return u}function zs(u,p,_,T,j){if(Array.isArray(p))for(var H=0;H<p.length;H++)zs(u,p[H],_,T,j);else T=y(T)?!!T.capture:!!T,_=aa(_),u&&u[je]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],_=Yr(H,_,T,j),-1<_&&(At(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=Bs(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Yr(p,_,T,j)),(_=-1<u?p[u]:null)&&Sr(_))}function Sr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[je])Us(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(Ar(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Bs(p))?(Us(_,u),_.h==0&&(_.src=null,p[Ki]=null)):At(u)}}}function Ar(u){return u in Fs?Fs[u]:Fs[u]="on"+u}function oa(u,p){if(u.da)u=!0;else{p=new Re(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&Sr(u),u=_.call(T,p)}return u}function Bs(u){return u=u[Ki],u instanceof Ir?u:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(u){return typeof u=="function"?u:(u[$s]||(u[$s]=function(p){return u.handleEvent(p)}),u[$s])}function _t(){W.call(this),this.i=new Ir(this),this.M=this,this.F=null}z(_t,W),_t.prototype[je]=!0,_t.prototype.removeEventListener=function(u,p,_,T){zs(this,u,p,_,T)};function wt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ce(p,u);else if(p instanceof ce)p.target=p.target||u;else{var j=p;p=new ce(T,u),x(p,j)}if(j=!0,_)for(var H=_.length-1;0<=H;H--){var se=p.g=_[H];j=Rr(se,T,!0,p)&&j}if(se=p.g=u,j=Rr(se,T,!0,p)&&j,j=Rr(se,T,!1,p)&&j,_)for(H=0;H<_.length;H++)se=p.g=_[H],j=Rr(se,T,!1,p)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)At(_[T]);delete u.g[p],u.h--}}this.F=null},_t.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},_t.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function Rr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,H=0;H<p.length;++H){var se=p[H];if(se&&!se.da&&se.capture==_){var ze=se.listener,Et=se.ha||se.src;se.fa&&Us(u.i,se),j=ze.call(Et,T)!==!1&&j}}return j&&!T.defaultPrevented}function la(u,p,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:d.setTimeout(u,p||0)}function Zr(u){u.g=la(()=>{u.g=null,u.i&&(u.i=!1,Zr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Qi extends W{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Zr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(u){W.call(this),this.h=u,this.g={}}z(Xi,W);var ua=[];function ca(u){de(u.g,function(p,_){this.g.hasOwnProperty(_)&&Sr(p)},u),u.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),ca(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ha=d.JSON.stringify,da=d.JSON.parse,fa=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ji(){}Ji.prototype.h=null;function qs(u){return u.h||(u.h=u.i())}function Hs(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){ce.call(this,"d")}z(er,ce);function Ws(){ce.call(this,"c")}z(Ws,ce);var tr={},pa=null;function Yi(){return pa=pa||new _t}tr.La="serverreachability";function ma(u){ce.call(this,tr.La,u)}z(ma,ce);function Cr(u){const p=Yi();wt(p,new ma(p))}tr.STAT_EVENT="statevent";function ga(u,p){ce.call(this,tr.STAT_EVENT,u),this.stat=p}z(ga,ce);function ut(u){const p=Yi();wt(p,new ga(p,u))}tr.Ma="timingevent";function Gs(u,p){ce.call(this,tr.Ma,u),this.size=p}z(Gs,ce);function Vn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},p)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function es(u,p,_,T,j,H){u.info(function(){if(u.g)if(H)for(var se="",ze=H.split("&"),Et=0;Et<ze.length;Et++){var Oe=ze[Et].split("=");if(1<Oe.length){var Rt=Oe[0];Oe=Oe[1];var pt=Rt.split("_");se=2<=pt.length&&pt[1]=="type"?se+(Rt+"="+Oe+"&"):se+(Rt+"=redacted&")}}else se=null;else se=H;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+p+`
`+_+`
`+se})}function Ks(u,p,_,T,j,H,se){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+p+`
`+_+`
`+H+" "+se})}function Ln(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Th(u,_)+(T?" "+T:"")})}function ya(u,p){u.info(function(){return"TIMEOUT: "+p})}Zi.prototype.info=function(){};function Th(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var se=1;se<j.length;se++)j[se]=""}}}}return ha(_)}catch{return p}}var Qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mn;function ts(){}z(ts,Ji),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Mn=new ts;function jn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $l}function $l(){this.i=null,this.g="",this.h=!1}var va={},Xs={};function Js(u,p,_){u.L=1,u.v=ii(dn(p)),u.m=_,u.P=!0,_a(u,null)}function _a(u,p){u.F=Date.now(),Ke(u),u.A=dn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),oi(_.i,"t",T),u.C=0,_=u.j.J,u.h=new $l,u.g=au(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Qi(S(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(ua[0]=j.toString()),j=ua);for(var H=0;H<j.length;H++){var se=ia(_,j[H],T||p.handleEvent,!1,p.h||p);if(!se)break;p.g[se.key]=se}p=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Cr(),es(u.i,u.u,u.A,u.l,u.R,u.m)}jn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yt(u)==3?p.j():this.Y(u)},jn.prototype.Y=function(u){try{if(u==this.g)e:{const pt=Yt(this.g);var p=this.g.Ba();const In=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Aa(this.g)))){this.J||pt!=4||p==7||(p==8||0>=In?Cr(3):Cr(2)),ns(this);var _=this.g.Z();this.X=_;t:if(ql(this)){var T=Aa(this.g);u="";var j=T.length,H=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),ei(this);var se="";break t}this.h.i=new d.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(H&&p==j-1)});T.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=_==200,Ks(this.i,this.u,this.A,this.l,this.R,pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Et=this.g;if((ze=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(ze)){var Oe=ze;break t}}Oe=null}if(_=Oe)Ln(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,_);else{this.o=!1,this.s=3,ut(12),En(this),ei(this);break e}}if(this.P){_=!0;let pn;for(;!this.J&&this.C<se.length;)if(pn=Ih(this,se),pn==Xs){pt==4&&(this.s=4,ut(14),_=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==va){this.s=4,ut(15),Ln(this.i,this.l,se,"[Invalid Chunk]"),_=!1;break}else Ln(this.i,this.l,pn,null),wa(this,pn);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||se.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)Ln(this.i,this.l,se,"[Invalid Chunked Response]"),En(this),ei(this);else if(0<se.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Ca(Rt),Rt.M=!0,ut(11))}}else Ln(this.i,this.l,se,null),wa(this,se);pt==4&&En(this),this.o&&!this.J&&(pt==4?lo(this.j,this):(this.o=!1,Ke(this)))}else ro(this.g),_==400&&0<se.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),En(this),ei(this)}}}catch{}finally{}};function ql(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ih(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?Xs:(_=Number(p.substring(_,T)),isNaN(_)?va:(T+=1,T+_>p.length?Xs:(p=p.slice(T,T+_),u.C=T+_,p)))}jn.prototype.cancel=function(){this.J=!0,En(this)};function Ke(u){u.S=Date.now()+u.I,Hl(u,u.I)}function Hl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vn(S(u.ba,u),p)}function ns(u){u.B&&(d.clearTimeout(u.B),u.B=null)}jn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ya(this.i,this.A),this.L!=2&&(Cr(),ut(17)),En(this),this.s=2,ei(this)):Hl(this,this.S-u)};function ei(u){u.j.G==0||u.J||lo(u.j,u)}function En(u){ns(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ca(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function wa(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Wt(_.h,u))){if(!u.K&&Wt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ao(_),$n(_);else break e;oo(_),ut(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Vn(S(_.Za,_),6e3));if(1>=Gl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Dr(_,11)}else if((u.K||_.g==u)&&ao(_),!te(p))for(j=_.Da.g.parse(p),p=0;p<j.length;p++){let Oe=j[p];if(_.T=Oe[0],Oe=Oe[1],_.G==2)if(Oe[0]=="c"){_.K=Oe[1],_.ia=Oe[2];const Rt=Oe[3];Rt!=null&&(_.la=Rt,_.j.info("VER="+_.la));const pt=Oe[4];pt!=null&&(_.Aa=pt,_.j.info("SVER="+_.Aa));const In=Oe[5];In!=null&&typeof In=="number"&&0<In&&(T=1.5*In,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const pn=u.g;if(pn){const us=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var H=T.h;H.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ea(H,H.h),H.h=null))}if(T.D){const co=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(T.ya=co,He(T.I,T.D,co))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var se=u;if(T.qa=ou(T,T.J?T.ia:null,T.W),se.K){Kl(T.h,se);var ze=se,Et=T.L;Et&&(ze.I=Et),ze.B&&(ns(ze),Ke(ze)),T.g=se}else ls(T);0<_.i.length&&sr(_)}else Oe[0]!="stop"&&Oe[0]!="close"||Dr(_,7);else _.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Dr(_,7):Dt(_):Oe[0]!="noop"&&_.l&&_.l.ta(Oe),_.v=0)}}Cr(4)}catch{}}var Wl=class{constructor(u,p){this.g=u,this.map=p}};function rs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gl(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ea(u,p){u.g?u.g.add(p):u.h=p}function Kl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}rs.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ql(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return q(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Zs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function ti(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Zs(u),T=Ys(u),j=T.length,H=0;H<j;H++)p.call(void 0,T[H],_&&_[H],u)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sh(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),j=null;if(0<=T){var H=u[_].substring(0,T);j=u[_].substring(T+1)}else H=u[_];p(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Pr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pr){this.h=u.h,ss(this,u.j),this.o=u.o,this.g=u.g,ni(this,u.s),this.l=u.l;var p=u.i,_=new nr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),ri(this,_),this.m=u.m}else u&&(p=String(u).match(is))?(this.h=!1,ss(this,p[1]||"",!0),this.o=De(p[2]||""),this.g=De(p[3]||"",!0),ni(this,p[4]),this.l=De(p[5]||"",!0),ri(this,p[6]||"",!0),this.m=De(p[7]||"")):(this.h=!1,this.i=new nr(null,this.h))}Pr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(si(p,eo,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(si(p,eo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(si(_,_.charAt(0)=="/"?Yl:Jl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",si(_,Ta)),u.join("")};function dn(u){return new Pr(u)}function ss(u,p,_){u.j=_?De(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ni(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ri(u,p,_){p instanceof nr?(u.i=p,rr(u.i,u.h)):(_||(p=si(p,Zl)),u.i=new nr(p,u.h))}function He(u,p,_){u.i.set(p,_)}function ii(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function De(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function si(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Xl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eo=/[#\/\?@]/g,Jl=/[#\?:]/g,Yl=/[#\?]/g,Zl=/[#\?@]/g,Ta=/#/g;function nr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&Sh(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=nr.prototype,n.add=function(u,p){Nt(this),this.i=null,u=Tn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Un(u,p){Nt(u),p=Tn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Fn(u,p){return Nt(u),p=Tn(u,p),u.g.has(p)}n.forEach=function(u,p){Nt(this),this.g.forEach(function(_,T){_.forEach(function(j){u.call(p,j,T,this)},this)},this)},n.na=function(){Nt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const j=u[T];for(let H=0;H<j.length;H++)_.push(p[T])}return _},n.V=function(u){Nt(this);let p=[];if(typeof u=="string")Fn(this,u)&&(p=p.concat(this.g.get(Tn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},n.set=function(u,p){return Nt(this),this.i=null,u=Tn(this,u),Fn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function oi(u,p,_){Un(u,p),0<_.length&&(u.i=null,u.g.set(Tn(u,p),q(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const H=encodeURIComponent(String(T)),se=this.V(T);for(T=0;T<se.length;T++){var j=H;se[T]!==""&&(j+="="+encodeURIComponent(String(se[T]))),u.push(j)}}return this.i=u.join("&")};function Tn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function rr(u,p){p&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(_,T){var j=T.toLowerCase();T!=j&&(Un(this,T),oi(this,j,_))},u)),u.j=p}function Ah(u,p){const _=new Zi;if(d.Image){const T=new Image;T.onload=k(Jt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=k(Jt,_,"TestLoadImage: error",!1,p,T),T.onabort=k(Jt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=k(Jt,_,"TestLoadImage: timeout",!1,p,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function eu(u,p){const _=new Zi,T=new AbortController,j=setTimeout(()=>{T.abort(),Jt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(j),H.ok?Jt(_,"TestPingServer: ok",!0,p):Jt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Jt(_,"TestPingServer: error",!1,p)})}function Jt(u,p,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function Rh(){this.g=new fa}function tu(u,p,_){const T=_||"";try{ti(u,function(j,H){let se=j;y(j)&&(se=ha(j)),p.push(T+H+"="+encodeURIComponent(se))})}catch(j){throw p.push(T+"type="+encodeURIComponent("_badmap")),j}}function kr(u){this.l=u.Ub||null,this.j=u.eb||!1}z(kr,Ji),kr.prototype.g=function(){return new os(this.l,this.j)},kr.prototype.i=(function(u){return function(){return u}})({});function os(u,p){_t.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(os,_t),n=os.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Bn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||d).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function nu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?zn(this):Bn(this),this.readyState==3&&nu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,zn(this))},n.Qa=function(u){this.g&&(this.response=u,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Bn(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Bn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xr(u){let p="";return de(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function ai(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=xr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):He(u,p,_))}function et(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(et,_t);var Ch=/^https?$/i,Ia=["POST","PUT"];n=et.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mn.g(),this.v=this.o?qs(this.o):qs(Mn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){as(this,H);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())_.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ia,p,void 0))||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,se]of _)this.g.setRequestHeader(H,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{no(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){as(this,H)}};function as(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,to(u),fn(u)}function to(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),fn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sa(this):this.bb())},n.bb=function(){Sa(this)};function Sa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)la(u.Ea,0,u);else if(wt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=se===0){var j=String(u.D).match(is)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Ch.test(j?j.toLowerCase():"")}_=T}if(_)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var H=2<Yt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",to(u)}}finally{fn(u)}}}}function fn(u,p){if(u.g){no(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||wt(u,"ready");try{_.onreadystatechange=T}catch{}}}function no(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),da(p)}};function Aa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ro(u){const p={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(te(u[T]))continue;var _=L(u[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=p[j]||[];p[j]=H,H.push(_)}D(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Ra(u){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ir("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ir("baseRetryDelayMs",5e3,u),this.cb=ir("retryDelaySeedMs",1e4,u),this.Wa=ir("forwardChannelMaxRetries",2,u),this.wa=ir("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(u&&u.concurrentRequestLimit),this.Da=new Rh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ra.prototype,n.la=8,n.G=1,n.connect=function(u,p,_,T){ut(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=ou(this,null,this.W),sr(this)};function Dt(u){if(io(u),u.G==3){var p=u.U++,_=dn(u.I);if(He(_,"SID",u.K),He(_,"RID",p),He(_,"TYPE","terminate"),Nr(u,_),p=new jn(u,u.j,p),p.L=2,p.v=ii(dn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=p.v,_=!0),_||(p.g=au(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ke(p)}su(u)}function $n(u){u.g&&(Ca(u),u.g.cancel(),u.g=null)}function io(u){$n(u),u.u&&(d.clearTimeout(u.u),u.u=null),ao(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function sr(u){if(!hn(u.h)&&!u.s){u.s=!0;var p=u.Ga;Pe||J(),re||(Pe(),re=!0),X.add(p,u),u.B=0}}function Ph(u,p){return Gl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vn(S(u.Ga,u,p),iu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new jn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=A(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=li(this,j,p),_=dn(this.I),He(_,"RID",u),He(_,"CVER",22),this.D&&He(_,"X-HTTP-Session-Id",this.D),Nr(this,_),H&&(this.O?p="headers="+encodeURIComponent(String(xr(H)))+"&"+p:this.m&&ai(_,this.m,H)),Ea(this.h,j),this.Ua&&He(_,"TYPE","init"),this.P?(He(_,"$req",p),He(_,"SID","null"),j.T=!0,Js(j,_,null)):Js(j,_,p),this.G=2}}else this.G==3&&(u?so(this,u):this.i.length==0||hn(this.h)||so(this))};function so(u,p){var _;p?_=p.l:_=u.U++;const T=dn(u.I);He(T,"SID",u.K),He(T,"RID",_),He(T,"AID",u.T),Nr(u,T),u.m&&u.o&&ai(T,u.m,u.o),_=new jn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=li(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ea(u.h,_),Js(_,T,p)}function Nr(u,p){u.H&&de(u.H,function(_,T){He(p,T,_)}),u.l&&ti({},function(_,T){He(p,T,_)})}function li(u,p,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var j=u.i;let H=-1;for(;;){const se=["count="+_];H==-1?0<_?(H=j[0].g,se.push("ofs="+H)):H=0:se.push("ofs="+H);let ze=!0;for(let Et=0;Et<_;Et++){let Oe=j[Et].g;const Rt=j[Et].map;if(Oe-=H,0>Oe)H=Math.max(0,j[Et].g-100),ze=!1;else try{tu(Rt,se,"req"+Oe+"_")}catch{T&&T(Rt)}}if(ze){T=se.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function ls(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Pe||J(),re||(Pe(),re=!0),X.add(p,u),u.v=0}}function oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vn(S(u.Fa,u),iu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),$n(this),ru(this))};function Ca(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function ru(u){u.g=new jn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=dn(u.qa);He(p,"RID","rpc"),He(p,"SID",u.K),He(p,"AID",u.T),He(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(p,"TO",u.ja),He(p,"TYPE","xmlhttp"),Nr(u,p),u.m&&u.o&&ai(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ii(dn(p)),_.m=null,_.P=!0,_a(_,u)}n.Za=function(){this.C!=null&&(this.C=null,$n(this),oo(this),ut(19))};function ao(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function lo(u,p){var _=null;if(u.g==p){ao(u),Ca(u),u.g=null;var T=2}else if(Wt(u.h,p))_=p.D,Kl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var j=u.B;T=Yi(),wt(T,new Gs(T,_)),sr(u)}else ls(u);else if(j=p.s,j==3||j==0&&0<p.X||!(T==1&&Ph(u,p)||T==2&&oo(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),j){case 1:Dr(u,5);break;case 4:Dr(u,10);break;case 3:Dr(u,6);break;default:Dr(u,2)}}}function iu(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Dr(u,p){if(u.j.info("Error code "+p),p==2){var _=S(u.fb,u),T=u.Xa;const j=!T;T=new Pr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ss(T,"https"),ii(T),j?Ah(T.toString(),_):eu(T.toString(),_)}else ut(2);u.G=0,u.l&&u.l.sa(p),su(u),io(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function su(u){if(u.G=0,u.ka=[],u.l){const p=Ql(u.h);(p.length!=0||u.i.length!=0)&&(O(u.ka,p),O(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function ou(u,p,_){var T=_ instanceof Pr?dn(_):new Pr(_);if(T.g!="")p&&(T.g=p+"."+T.g),ni(T,T.s);else{var j=d.location;T=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var H=new Pr(null);T&&ss(H,T),p&&(H.g=p),j&&ni(H,j),_&&(H.l=_),T=H}return _=u.D,p=u.ya,_&&p&&He(T,_,p),He(T,"VER",u.la),Nr(u,T),T}function au(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new et(new kr({eb:_})):new et(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pa(){}n=Pa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uo(){}uo.prototype.g=function(u,p){return new Gt(u,p)};function Gt(u,p){_t.call(this),this.g=new Ra(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!te(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!te(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new or(this)}z(Gt,_t),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Dt(this.g)},Gt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ha(u),u=_);p.i.push(new Wl(p.Ya++,u)),p.G==3&&sr(p)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Gt.aa.N.call(this)};function lu(u){er.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}z(lu,er);function uu(){Ws.call(this),this.status=1}z(uu,Ws);function or(u){this.g=u}z(or,Pa),or.prototype.ua=function(){wt(this.g,"a")},or.prototype.ta=function(u){wt(this.g,new lu(u))},or.prototype.sa=function(u){wt(this.g,new uu)},or.prototype.ra=function(){wt(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Pw=function(){return new uo},Cw=function(){return Yi()},Rw=tr,Rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,yc=Qs,Bl.COMPLETE="complete",Aw=Bl,Hs.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,el=Hs,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Sw=et}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const sv="@firebase/firestore",ov="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new rp("@firebase/firestore");function Do(){return Ns.logLevel}function ue(n,...e){if(Ns.logLevel<=xe.DEBUG){const t=e.map(gp);Ns.debug(`Firestore (${Yo}): ${n}`,...t)}}function Kr(n,...e){if(Ns.logLevel<=xe.ERROR){const t=e.map(gp);Ns.error(`Firestore (${Yo}): ${n}`,...t)}}function Mi(n,...e){if(Ns.logLevel<=xe.WARN){const t=e.map(gp);Ns.warn(`Firestore (${Yo}): ${n}`,...t)}}function gp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,kw(n,i,t)}function kw(n,e,t){let i=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Kr(i),new Error(i)}function Fe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||kw(e,o,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class N1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class D1{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new xw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class b1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new b1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new av(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=L1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ce(n,e){return n<e?-1:n>e?1:0}function Cf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ce(i,o);{const l=Nw(),h=M1(l.encode(lv(n,t)),l.encode(lv(e,t)));return h!==0?h:Ce(i,o)}}t+=i>65535?2:1}return Ce(n.length,e.length)}function lv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function M1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ce(n[t],e[t]);return Ce(n.length,e.length)}function Bo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__name__";class hr{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=hr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ce(e.length,t.length)}static compareSegments(e,t){const i=hr.isNumericId(e),o=hr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?hr.extractNumericId(e).compare(hr.extractNumericId(t)):Cf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class Xe extends hr{construct(e,t,i){return new Xe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const j1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends hr{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return j1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uv}static keyField(){return new Lt([uv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ae(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new ae(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Xe.fromString(e))}static fromName(e){return new ge(Xe.fromString(e).popFirst(5))}static empty(){return new ge(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n,e,t){if(!t)throw new ae(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function U1(n,e,t,i){if(e===!0&&i===!0)throw new ae(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cv(n){if(!ge.isDocumentKey(n))throw new ae(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hv(n){if(ge.isDocumentKey(n))throw new ae(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function th(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function Qr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=th(n);throw new ae(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Dl(n,e){if(!bw(n))throw new ae(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,fv=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*fv);return new Ze(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dv)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fv}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:vt("string",Ze._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ze(0,0))}static max(){return new Te(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=-1;function F1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new ji(o,ge.empty(),e)}function z1(n){return new ji(n.readTime,n.key,ml)}class ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ji(Te.min(),ge.empty(),ml)}static max(){return new ji(Te.max(),ge.empty(),ml)}}function B1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==$1)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,l=0,h=!1;e.forEach((d=>{++o,d.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next((v=>{h[y]=v,++d,d===l&&i(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new K(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function H1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ea(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=-1;function rh(n){return n==null}function Dc(n){return n===0&&1/n==-1/0}function W1(n){return typeof n=="number"&&Number.isInteger(n)&&!Dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="";function G1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pv(e)),e=K1(n.get(t),e);return pv(e)}function K1(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Ow:t+="";break;default:t+=l}}return t}function pv(n){return n+Ow+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=l??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(e){return new gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new St(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lw("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=Q1.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fi(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="server_timestamp",jw="__type__",Uw="__previous_value__",Fw="__local_write_time__";function _p(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[jw])===null||t===void 0?void 0:t.stringValue)===Mw}function ih(n){const e=n.mapValue.fields[Uw];return _p(e)?ih(e):e}function gl(n){const e=Ui(n.mapValue.fields[Fw].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t,i,o,l,h,d,m,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=v}}const bc="(default)";class yl{constructor(e,t){this.projectId=e,this.database=t||bc}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database===bc}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="__type__",J1="__max__",oc={mapValue:{}},Bw="__vector__",Oc="value";function zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_p(n)?4:Z1(n)?9007199254740991:Y1(n)?10:11:_e(28295,{value:n})}function Er(n,e){if(n===e)return!0;const t=zi(n);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ui(o.timestampValue),d=Ui(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Fi(o.bytesValue).isEqual(Fi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),d=ht(l.doubleValue);return h===d?Dc(h)===Dc(d):isNaN(h)&&isNaN(d)}return!1})(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(mv(h)!==mv(d))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(d[m]===void 0||!Er(h[m],d[m])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function vl(n,e){return(n.values||[]).find((t=>Er(t,e)))!==void 0}function $o(n,e){if(n===e)return 0;const t=zi(n),i=zi(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const d=ht(l.integerValue||l.doubleValue),m=ht(h.integerValue||h.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return yv(n.timestampValue,e.timestampValue);case 4:return yv(gl(n),gl(e));case 5:return Cf(n.stringValue,e.stringValue);case 6:return(function(l,h){const d=Fi(l),m=Fi(h);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const d=l.split("/"),m=h.split("/");for(let y=0;y<d.length&&y<m.length;y++){const v=Ce(d[y],m[y]);if(v!==0)return v}return Ce(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const d=Ce(ht(l.latitude),ht(h.latitude));return d!==0?d:Ce(ht(l.longitude),ht(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return vv(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var d,m,y,v;const I=l.fields||{},S=h.fields||{},k=(d=I[Oc])===null||d===void 0?void 0:d.arrayValue,z=(m=S[Oc])===null||m===void 0?void 0:m.arrayValue,q=Ce(((y=k==null?void 0:k.values)===null||y===void 0?void 0:y.length)||0,((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0);return q!==0?q:vv(k,z)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===oc.mapValue&&h===oc.mapValue)return 0;if(l===oc.mapValue)return 1;if(h===oc.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),y=h.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let I=0;I<m.length&&I<v.length;++I){const S=Cf(m[I],v[I]);if(S!==0)return S;const k=$o(d[m[I]],y[v[I]]);if(k!==0)return k}return Ce(m.length,v.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function yv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);const t=Ui(n),i=Ui(e),o=Ce(t.seconds,i.seconds);return o!==0?o:Ce(t.nanos,i.nanos)}function vv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=$o(t[o],i[o]);if(l)return l}return Ce(t.length,i.length)}function qo(n){return Pf(n)}function Pf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ui(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Pf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Pf(t.fields[h])}`;return o+"}"})(n.mapValue):_e(61005,{value:n})}function vc(n){switch(zi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(n);return e?16+vc(e):16;case 5:return 2*n.stringValue.length;case 6:return Fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+vc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Wi(i.fields,((l,h)=>{o+=l.length+vc(h)})),o})(n.mapValue);default:throw _e(13486,{value:n})}}function _v(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kf(n){return!!n&&"integerValue"in n}function wp(n){return!!n&&"arrayValue"in n}function wv(n){return!!n&&"nullValue"in n}function Ev(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _c(n){return!!n&&"mapValue"in n}function Y1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zw])===null||t===void 0?void 0:t.stringValue)===Bw}function ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ol(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Z1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===J1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_c(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach(((h,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=ol(h):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());_c(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];_c(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Wi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new ln(ol(this.value))}}function $w(n){const e=[];return Wi(n.fields,((t,i)=>{const o=new Lt([t]);if(_c(i)){const l=$w(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new qt(e,0,Te.min(),Te.min(),Te.min(),ln.empty(),0)}static newFoundDocument(e,t,i,o){return new qt(e,1,t,Te.min(),i,o,0)}static newNoDocument(e,t){return new qt(e,2,t,Te.min(),Te.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Te.min(),Te.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.position=e,this.inclusive=t}}function Tv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(h.referenceValue),t.key):i=$o(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Iv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Er(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class yt extends qw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nC(e,t,i):t==="array-contains"?new sC(e,i):t==="in"?new oC(e,i):t==="not-in"?new aC(e,i):t==="array-contains-any"?new lC(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rC(e,i):new iC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($o(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends qw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Yn(e,t)}matches(e){return Hw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Hw(n){return n.op==="and"}function Ww(n){return tC(n)&&Hw(n)}function tC(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function xf(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(Ww(n))return n.filters.map((e=>xf(e))).join(",");{const e=n.filters.map((t=>xf(t))).join(",");return`${n.op}(${e})`}}function Gw(n,e){return n instanceof yt?(function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&Er(i.value,o.value)})(n,e):n instanceof Yn?(function(i,o){return o instanceof Yn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,d)=>l&&Gw(h,o.filters[d])),!0):!1})(n,e):void _e(19439)}function Kw(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(n):n instanceof Yn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kw).join(" ,")+"}"})(n):"Filter"}class nC extends yt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class rC extends yt{constructor(e,t){super(e,"in",t),this.keys=Qw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iC extends yt{constructor(e,t){super(e,"not-in",t),this.keys=Qw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ge.fromName(i.referenceValue)))}class sC extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wp(t)&&vl(t.arrayValue,this.value)}}class oC extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vl(this.value.arrayValue,t)}}class aC extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vl(this.value.arrayValue,t)}}class lC extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>vl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.Pe=null}}function Sv(n,e=null,t=[],i=[],o=null,l=null,h=null){return new uC(n,e,t,i,o,l,h)}function Ep(n){const e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>xf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),rh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>qo(i))).join(",")),e.Pe=t}return e.Pe}function Tp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Iv(n.startAt,e.startAt)&&Iv(n.endAt,e.endAt)}function Nf(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cC(n,e,t,i,o,l,h,d){return new ta(n,e,t,i,o,l,h,d)}function Ip(n){return new ta(n)}function Av(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xw(n){return n.collectionGroup!==null}function al(n){const e=Se(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new St(Lt.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new _l(l,i))})),t.has(Lt.keyField().canonicalString())||e.Te.push(new _l(Lt.keyField(),i))}return e.Te}function mr(n){const e=Se(n);return e.Ie||(e.Ie=hC(e,al(n))),e.Ie}function hC(n,e){if(n.limitType==="F")return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new _l(o.field,l)}));const t=n.endAt?new Vc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vc(n.startAt.position,n.startAt.inclusive):null;return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Df(n,e){const t=n.filters.concat([e]);return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bf(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sh(n,e){return Tp(mr(n),mr(e))&&n.limitType===e.limitType}function Jw(n){return`${Ep(mr(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Kw(o))).join(", ")}]`),rh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${i})`})(mr(n))}; limitType=${n.limitType})`}function oh(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,d,m){const y=Tv(h,d,m);return h.inclusive?y<=0:y<0})(i.startAt,al(i),o)||i.endAt&&!(function(h,d,m){const y=Tv(h,d,m);return h.inclusive?y>=0:y>0})(i.endAt,al(i),o))})(n,e)}function dC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yw(n){return(e,t)=>{let i=!1;for(const o of al(n)){const l=fC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function fC(n,e,t){const i=n.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,d){const m=h.data.field(l),y=d.data.field(l);return m!==null&&y!==null?$o(m,y):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new st(ge.comparator);function Xr(){return pC}const Zw=new st(ge.comparator);function tl(...n){let e=Zw;for(const t of n)e=e.insert(t.key,t);return e}function eE(n){let e=Zw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Rs(){return ll()}function tE(){return ll()}function ll(){return new Vs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mC=new st(ge.comparator),gC=new St(ge.comparator);function Ne(...n){let e=gC;for(const t of n)e=e.add(t);return e}const yC=new St(Ce);function vC(){return yC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function nE(n){return{integerValue:""+n}}function _C(n,e){return W1(e)?nE(e):Sp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function wC(n,e,t){return n instanceof wl?(function(o,l){const h={fields:{[jw]:{stringValue:Mw},[Fw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&_p(l)&&(l=ih(l)),l&&(h.fields[Uw]=l),{mapValue:h}})(t,e):n instanceof El?iE(n,e):n instanceof Tl?sE(n,e):(function(o,l){const h=rE(o,l),d=Rv(h)+Rv(o.Ee);return kf(h)&&kf(o.Ee)?nE(d):Sp(o.serializer,d)})(n,e)}function EC(n,e,t){return n instanceof El?iE(n,e):n instanceof Tl?sE(n,e):t}function rE(n,e){return n instanceof Lc?(function(i){return kf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class wl extends ah{}class El extends ah{constructor(e){super(),this.elements=e}}function iE(n,e){const t=oE(e);for(const i of n.elements)t.some((o=>Er(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Tl extends ah{constructor(e){super(),this.elements=e}}function sE(n,e){let t=oE(e);for(const i of n.elements)t=t.filter((o=>!Er(o,i)));return{arrayValue:{values:t}}}class Lc extends ah{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Rv(n){return ht(n.integerValue||n.doubleValue)}function oE(n){return wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.field=e,this.transform=t}}function IC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof El&&o instanceof El||i instanceof Tl&&o instanceof Tl?Bo(i.elements,o.elements,Er):i instanceof Lc&&o instanceof Lc?Er(i.Ee,o.Ee):i instanceof wl&&o instanceof wl})(n.transform,e.transform)}class SC{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lh{}function aE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uE(n.key,gr.none()):new bl(n.key,n.data,gr.none());{const t=n.data,i=ln.empty();let o=new St(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Gi(n.key,i,new vn(o.toArray()),gr.none())}}function AC(n,e,t){n instanceof bl?(function(o,l,h){const d=o.value.clone(),m=Pv(o.fieldTransforms,l,h.transformResults);d.setAll(m),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Gi?(function(o,l,h){if(!wc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Pv(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(lE(o)),m.setAll(d),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ul(n,e,t,i){return n instanceof bl?(function(l,h,d,m){if(!wc(l.precondition,h))return d;const y=l.value.clone(),v=kv(l.fieldTransforms,m,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Gi?(function(l,h,d,m){if(!wc(l.precondition,h))return d;const y=kv(l.fieldTransforms,m,h),v=h.data;return v.setAll(lE(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(n,e,t,i):(function(l,h,d){return wc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d})(n,e,t)}function RC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=rE(i.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(i.field,l))}return t||null}function Cv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Bo(i,o,((l,h)=>IC(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bl extends lh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gi extends lh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function lE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Pv(n,e,t){const i=new Map;Fe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,EC(h,d,t[o]))}return i}function kv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,wC(l,h,e))}return i}class uE extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CC extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&AC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tE();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const m=aE(h,d);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,i)=>Cv(t,i)))&&Bo(this.baseMutations,e.baseMutations,((t,i)=>Cv(t,i)))}}class Ap{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return mC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Ap(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Ve;function NC(n){switch(n){case G.OK:return _e(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function cE(n){if(n===void 0)return Kr("GRPC error has no .code"),G.UNKNOWN;switch(n){case gt.OK:return G.OK;case gt.CANCELLED:return G.CANCELLED;case gt.UNKNOWN:return G.UNKNOWN;case gt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case gt.INTERNAL:return G.INTERNAL;case gt.UNAVAILABLE:return G.UNAVAILABLE;case gt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case gt.NOT_FOUND:return G.NOT_FOUND;case gt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case gt.ABORTED:return G.ABORTED;case gt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case gt.DATA_LOSS:return G.DATA_LOSS;default:return _e(39323,{code:n})}}(Ve=gt||(gt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Oi([4294967295,4294967295],0);function xv(n){const e=Nw().encode(n),t=new Iw;return t.update(e),new Uint8Array(t.digest())}function Nv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Oi([t,i],0),new Oi([o,l],0)]}class Rp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(i<0)throw new nl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Oi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Oi.fromNumber(i)));return o.compare(DC)===1&&(o=new Oi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=xv(e),[i,o]=Nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Rp(l,o,t);return i.forEach((d=>h.insert(d))),h}insert(e){if(this.fe===0)return;const t=xv(e),[i,o]=Nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uh(Te.min(),o,new st(Ce),Xr(),Ne())}}class Ol{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ol(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class hE{constructor(e,t){this.targetId=e,this.De=t}}class dE{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Dv{constructor(){this.ve=0,this.Ce=bv(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),t=Ne(),i=Ne();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:_e(38017,{changeType:l})}})),new Ol(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=bv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Xr(),this.je=ac(),this.Je=ac(),this.He=new st(Ce)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Nf(l))if(i===0){const h=new ge(l.path);this.Xe(t,h,qt.newNoDocument(h,Te.min()))}else Fe(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const d=this._t(e),m=d?this.ut(d,e,h):1;if(m!==0){this.rt(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Fi(i).toUint8Array()}catch(m){if(m instanceof Lw)return Mi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Rp(h,o,l)}catch(m){return Mi(m instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const d=this.st(h);if(d){if(l.current&&Nf(d.target)){const m=new ge(d.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,qt.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Ne();this.Je.forEach(((l,h)=>{let d=!0;h.forEachWhile((m=>{const y=this.st(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new uh(e,t,this.He,this.ze,i);return this.ze=Xr(),this.je=ac(),this.Je=ac(),this.He=new st(Ce),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Dv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new St(Ce),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new St(Ce),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Dv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ac(){return new st(ge.comparator)}function bv(){return new st(ge.comparator)}const OC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class MC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Of(n,e){return n.useProto3Json||rh(e)?e:{value:e}}function Mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jC(n,e){return Mc(n,e.toTimestamp())}function yr(n){return Fe(!!n,49232),Te.fromTimestamp((function(t){const i=Ui(t);return new Ze(i.seconds,i.nanos)})(n))}function Cp(n,e){return Vf(n,e).canonicalString()}function Vf(n,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pE(n){const e=Xe.fromString(n);return Fe(_E(e),10190,{key:e.toString()}),e}function Lf(n,e){return Cp(n.databaseId,e.path)}function lf(n,e){const t=pE(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(gE(t))}function mE(n,e){return Cp(n.databaseId,e)}function UC(n){const e=pE(n);return e.length===4?Xe.emptyPath():gE(e)}function Mf(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gE(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ov(n,e,t){return{name:Lf(n,e),fields:t.value.mapValue.fields}}function FC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(Fe(v===void 0||typeof v=="string",58123),Mt.fromBase64String(v||"")):(Fe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Mt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&(function(y){const v=y.code===void 0?G.UNKNOWN:cE(y.code);return new ae(v,y.message||"")})(h);t=new dE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=lf(n,i.document.name),l=yr(i.document.updateTime),h=i.document.createTime?yr(i.document.createTime):Te.min(),d=new ln({mapValue:{fields:i.document.fields}}),m=qt.newFoundDocument(o,l,h,d),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Ec(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=lf(n,i.document),l=i.readTime?yr(i.readTime):Te.min(),h=qt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new Ec([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=lf(n,i.document),l=i.removedTargetIds||[];t=new Ec([],l,o,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new xC(o,l),d=i.targetId;t=new hE(d,h)}}return t}function zC(n,e){let t;if(e instanceof bl)t={update:Ov(n,e.key,e.value)};else if(e instanceof uE)t={delete:Lf(n,e.key)};else if(e instanceof Gi)t={update:Ov(n,e.key,e.data),updateMask:XC(e.fieldMask)};else{if(!(e instanceof CC))return _e(16599,{Rt:e.type});t={verify:Lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const d=h.transform;if(d instanceof wl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof El)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Tl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Lc)return{fieldPath:h.field.canonicalString(),increment:d.Ee};throw _e(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:jC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(n,e.precondition)),t}function BC(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?yr(o.updateTime):yr(l);return h.isEqual(Te.min())&&(h=yr(l)),new SC(h,o.transformResults||[])})(t,e)))):[]}function $C(n,e){return{documents:[mE(n,e.path)]}}function qC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mE(n,o);const l=(function(y){if(y.length!==0)return vE(Yn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:Oo(S.field),direction:GC(S.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=Of(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function HC(n){let e=UC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Fe(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(I){const S=yE(I);return S instanceof Yn&&Ww(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((S=>(function(z){return new _l(Vo(z.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(I){let S;return S=typeof I=="object"?I.value:I,rh(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(I){const S=!!I.before,k=I.values||[];return new Vc(k,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(I){const S=!I.before,k=I.values||[];return new Vc(k,S)})(t.endAt)),cC(e,o,h,l,d,"F",m,y)}function WC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Vo(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Vo(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Vo(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create(Vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yn.create(t.compositeFilter.filters.map((i=>yE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function GC(n){return OC[n]}function KC(n){return VC[n]}function QC(n){return LC[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function Vo(n){return Lt.fromServerFormat(n.fieldPath)}function vE(n){return n instanceof yt?(function(t){if(t.op==="=="){if(Ev(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(wv(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ev(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(wv(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:KC(t.op),value:t.value}}})(n):n instanceof Yn?(function(t){const i=t.getFilters().map((o=>vE(o)));return i.length===1?i[0]:{compositeFilter:{op:QC(t.op),filters:i}}})(n):_e(54877,{filter:n})}function XC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _E(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t,i,o,l=Te.min(),h=Te.min(),d=Mt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.gt=e}}function YC(n){const e=HC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Dn=new eP}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ji.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class eP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(Xe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wE=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(wE,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ho(0)}static ur(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LruGarbageCollector",tP=1048576;function Mv([n,e],[t,i]){const o=Ce(n,t);return o===0?Ce(e,i):o}class nP{constructor(e){this.Tr=e,this.buffer=new St(Mv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Mv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(Lv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ea(t)?ue(Lv,"Ignoring IndexedDB error during garbage collection: ",t):await Zo(t)}await this.Rr(3e5)}))}}class iP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(nh.ue);const i=new nP(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Vv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,d,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,d=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(y=Date.now(),Do()<=xe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${I} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function sP(n,e){return new iP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.changes=new Vs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ul(i.mutation,o,vn.empty(),Ze.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ne()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ne()){const o=Rs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=tl();return l.forEach(((d,m)=>{h=h.insert(d,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Rs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ne())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,d)=>{t.set(h,d)}))}))}computeViews(e,t,i,o){let l=Xr();const h=ll(),d=(function(){return ll()})();return t.forEach(((m,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Gi)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),ul(v.mutation,y,v.mutation.getFieldMask(),Ze.now())):h.set(y.key,vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>{var I;return d.set(y,new aP(v,(I=h.get(y))!==null&&I!==void 0?I:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=ll();let o=new st(((h,d)=>h-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const d of h)d.keys().forEach((m=>{const y=t.get(m);if(y===null)return;let v=i.get(m)||vn.empty();v=d.applyToLocalView(y,v),i.set(m,v);const I=(o.get(d.batchId)||Ne()).add(m);o=o.insert(d.batchId,I)}))})).next((()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),y=m.key,v=m.value,I=tE();v.forEach((S=>{if(!l.has(S)){const k=aE(t.get(S),i.get(S));k!==null&&I.set(S,k),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,I))}return K.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(Rs());let d=ml,m=l;return h.next((y=>K.forEach(y,((v,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{m=m.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,m,y,Ne()))).next((v=>({batchId:d,changes:eE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let o=tl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=tl();return this.indexManager.getCollectionParents(e,l).next((d=>K.forEach(d,(m=>{const y=(function(I,S){return new ta(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((I,S)=>{h=h.insert(I,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,qt.newInvalidDocument(v)))}));let d=tl();return h.forEach(((m,y)=>{const v=l.get(m);v!==void 0&&ul(v.mutation,y,vn.empty(),Ze.now()),oh(t,y)&&(d=d.insert(m,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:yr(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:YC(o.bundledQuery),readTime:yr(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.overlays=new st(ge.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Rs();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=Rs(),l=t.length+1,h=new ge(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const m=d.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=Rs(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=Rs(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((y,v)=>d.set(y,v))),!(d.size()>=o)););return K.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new kC(t,i));let l=this.kr.get(t);l===void 0&&(l=Ne(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.qr=new St(xt.Qr),this.$r=new St(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ge(new Xe([])),i=new xt(t,e),o=new xt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ge(new Xe([])),i=new xt(t,e),o=new xt(t,e+1);let l=Ne();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new xt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ge.comparator(e.key,t.key)||Ce(e.Hr,t.Hr)}static Ur(e,t){return Ce(e.Hr,t.Hr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new St(xt.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new PC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.Yr=this.Yr.add(new xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?vp:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const d=this.Zr(h.Hr);l.push(d)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Ce);return t.forEach((o=>{const l=new xt(o,0),h=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(d=>{i=i.add(d.Hr)}))})),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const h=new xt(new ge(l),0);let d=new St(Ce);return this.Yr.forEachWhile((m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(m.Hr)),!0)}),h),K.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Fe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(t.mutations,(o=>{const l=new xt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new xt(t,0),o=this.Yr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.ni=e,this.docs=(function(){return new st(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let i=Xr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():qt.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Xr();const h=t.path,d=new ge(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||B1(z1(v),i)<=0||(o.has(v.key)||oh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){_e(9500)}ri(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pP(this)}getSize(e){return K.resolve(this.size)}}class pP extends oP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.persistence=e,this.ii=new Vs((t=>Ep(t)),Tp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new Pp,this.targetCount=0,this._i=Ho.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.ai={},this.overlays={},this.ui=new nh(0),this.ci=!1,this.ci=!0,this.li=new hP,this.referenceDelegate=e(this),this.hi=new mP(this),this.indexManager=new ZC,this.remoteDocumentCache=(function(o){return new fP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new JC(t),this.Ti=new uP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new dP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new gP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class gP extends q1{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Ai=new Pp,this.Ri=null}static Vi(e){return new kp(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,(i=>{const o=ge.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class jc{constructor(e,t){this.persistence=e,this.gi=new Vs((i=>G1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=sP(this,t)}static Vi(e,t){return new jc(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return K.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((d=>{d||(i++,l.removeEntry(h,Te.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vc(e.data.value)),t}Sr(e,t,i){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new xp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return dS()?8:H1(Ht())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new yP;return this.ws(e,t,h).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,h,d.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Do()<=xe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Do()<=xe.DEBUG&&ue("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Do()<=xe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(t))):K.resolve())}ps(e,t){if(Av(t))return K.resolve(null);let i=mr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=bf(t,null,"F"),i=mr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ne(...l);return this.gs.getDocuments(e,h).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const y=this.bs(t,d);return this.Ds(t,y,h,m.readTime)?this.ps(e,bf(t,null,"F")):this.vs(e,y,t,m)}))))})))))}ys(e,t,i,o){return Av(t)||o.isEqual(Te.min())?K.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?K.resolve(null):(Do()<=xe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,h,t,F1(o,ml)).next((d=>d)))}))}bs(e,t){let i=new St(Yw(e));return t.forEach(((o,l)=>{oh(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Do()<=xe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,ji.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",_P=3e8;class wP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new st(Ce),this.Ms=new Vs((l=>Ep(l)),Tp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function EP(n,e,t,i){return new wP(n,e,t,i)}async function TE(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],d=[];let m=Ne();for(const y of o){h.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){d.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((y=>({Bs:y,removedBatchIds:h,addedBatchIds:d})))}))}))}function TP(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,m,y,v){const I=y.batch,S=I.keys();let k=K.resolve();return S.forEach((z=>{k=k.next((()=>v.getEntry(m,z))).next((q=>{const O=y.docVersions.get(z);Fe(O!==null,48541),q.version.compareTo(O)<0&&(I.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),v.addEntry(q)))}))})),k.next((()=>d.mutationQueue.removeMutationBatch(m,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Ne();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(m=m.add(d.batch.mutations[y].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function IE(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function IP(n,e){const t=Se(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,I)=>{const S=o.get(I);if(!S)return;d.push(t.hi.removeMatchingKeys(l,v.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,I))));let k=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?k=k.withResumeToken(Mt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,i)),o=o.insert(I,k),(function(q,O,$){return q.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=_P?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,k,v)&&d.push(t.hi.updateTargetData(l,k))}));let m=Xr(),y=Ne();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(SP(l,h,e.documentUpdates).next((v=>{m=v.Ls,y=v.ks}))),!i.isEqual(Te.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return K.waitFor(d).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,y))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function SP(n,e,t){let i=Ne(),o=Ne();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=Xr();return t.forEach(((d,m)=>{const y=l.get(d);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),h=h.insert(d,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),h=h.insert(d,m)):ue(Np,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",m.version)})),{Ls:h,ks:o}}))}function AP(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function RP(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,K.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new ki(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function jf(n,e,t){const i=Se(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ea(h))throw h;ue(Np,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function jv(n,e,t){const i=Se(n);let o=Te.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,y,v){const I=Se(m),S=I.Ms.get(v);return S!==void 0?K.resolve(I.Fs.get(S)):I.hi.getTargetData(y,v)})(i,h,mr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,d.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:Ne()))).next((d=>(CP(i,dC(e),d),{documents:d,qs:l})))))}function CP(n,e,t){let i=n.xs.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Uv{constructor(){this.activeTargetIds=vC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PP{constructor(){this.Fo=new Uv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Uv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class zv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function Uf(){return lc===null?lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="RestConnection",xP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===bc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Uf(),d=this.Go(e,t.toUriEncodedString());ue(uf,`Sending RPC '${e}' ${h}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:y}=new URL(d),v=Jr(y);return this.jo(e,d,m,i,v).then((I=>(ue(uf,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Mi(uf,`RPC '${e}' ${h} failed with error: `,I,"url: ",d,"request:",i),I}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=xP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class bP extends NP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=Uf();return new Promise(((d,m)=>{const y=new Sw;y.setWithCredentials(!0),y.listenOnce(Aw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yc.NO_ERROR:const I=y.getResponseJson();ue(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),d(I);break;case yc.TIMEOUT:ue(Bt,`RPC '${e}' ${h} timed out`),m(new ae(G.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const S=y.getStatus();if(ue(Bt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const q=(function($){const te=$.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(te)>=0?te:G.UNKNOWN})(z.status);m(new ae(q,z.message))}else m(new ae(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ae(G.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{ue(Bt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ue(Bt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=Uf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Pw(),d=Cw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");ue(Bt,`Creating RPC '${e}' stream ${o}: ${v}`,m);const I=h.createWebChannel(v,m);this.T_(I);let S=!1,k=!1;const z=new DP({Ho:O=>{k?ue(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(S||(ue(Bt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),ue(Bt,`RPC '${e}' stream ${o} sending:`,O),I.send(O))},Yo:()=>I.close()}),q=(O,$,te)=>{O.listen($,(ie=>{try{te(ie)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return q(I,el.EventType.OPEN,(()=>{k||(ue(Bt,`RPC '${e}' stream ${o} transport opened.`),z.s_())})),q(I,el.EventType.CLOSE,(()=>{k||(k=!0,ue(Bt,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(I))})),q(I,el.EventType.ERROR,(O=>{k||(k=!0,Mi(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),z.__(new ae(G.UNAVAILABLE,"The operation could not be completed")))})),q(I,el.EventType.MESSAGE,(O=>{var $;if(!k){const te=O.data[0];Fe(!!te,16349);const ie=te,oe=(ie==null?void 0:ie.error)||(($=ie[0])===null||$===void 0?void 0:$.error);if(oe){ue(Bt,`RPC '${e}' stream ${o} received error:`,oe);const Ie=oe.status;let de=(function(P){const x=gt[P];if(x!==void 0)return cE(x)})(Ie),D=oe.message;de===void 0&&(de=G.INTERNAL,D="Unknown error status: "+Ie+" with message "+oe.message),k=!0,z.__(new ae(de,D)),I.close()}else ue(Bt,`RPC '${e}' stream ${o} received:`,te),z.a_(te)}})),q(d,Rw.STAT_EVENT,(O=>{O.stat===Rf.PROXY?ue(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===Rf.NOPROXY&&ue(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){return new MC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class AE{constructor(e,t,i,o,l,h,d,m){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new SE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ae(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ue(Bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ue(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OP extends AE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=FC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?yr(h.readTime):Te.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Mf(this.serializer),t.addTarget=(function(l,h){let d;const m=h.target;if(d=Nf(m)?{documents:$C(l,m)}:{query:qC(l,m).Vt},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=fE(l,h.resumeToken);const y=Of(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){d.readTime=Mc(l,h.snapshotVersion.toTimestamp());const y=Of(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=WC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Mf(this.serializer),t.removeTarget=e,this.k_(t)}}class VP extends AE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BC(e.writeResults,e.commitTime),i=yr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Mf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{}class MP extends LP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Vf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(G.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Jo(e,Vf(t,i),o,h,d,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(G.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class jP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Kr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="RemoteStore";class UP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{Ls(this)&&(ue(Ds,"Restarting streams for network reachability change."),await(async function(m){const y=Se(m);y.Ia.add(4),await Vl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await hh(y)})(this))}))})),this.Aa=new jP(i,o)}}async function hh(n){if(Ls(n))for(const e of n.da)await e(!0)}async function Vl(n){for(const e of n.da)await e(!1)}function RE(n,e){const t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Vp(t)?Op(t):na(t).x_()&&bp(t,e))}function Dp(n,e){const t=Se(n),i=na(t);t.Ta.delete(e),i.x_()&&CE(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ls(t)&&t.Aa.set("Unknown"))}function bp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).H_(e)}function CE(n,e){n.Ra.$e(e),na(n).Y_(e)}function Op(n){n.Ra=new bC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),na(n).start(),n.Aa.aa()}function Vp(n){return Ls(n)&&!na(n).M_()&&n.Ta.size>0}function Ls(n){return Se(n).Ia.size===0}function PE(n){n.Ra=void 0}async function FP(n){n.Aa.set("Online")}async function zP(n){n.Ta.forEach(((e,t)=>{bp(n,e)}))}async function BP(n,e){PE(n),Vp(n)?(n.Aa.la(e),Op(n)):n.Aa.set("Unknown")}async function $P(n,e,t){if(n.Aa.set("Online"),e instanceof dE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){ue(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uc(n,i)}else if(e instanceof Ec?n.Ra.Ye(e):e instanceof hE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{const i=await IE(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const d=l.Ra.Pt(h);return d.targetChanges.forEach(((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ta.get(y);v&&l.Ta.set(y,v.withResumeToken(m.resumeToken,h))}})),d.targetMismatches.forEach(((m,y)=>{const v=l.Ta.get(m);if(!v)return;l.Ta.set(m,v.withResumeToken(Mt.EMPTY_BYTE_STRING,v.snapshotVersion)),CE(l,m);const I=new ki(v.target,m,y,v.sequenceNumber);bp(l,I)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ue(Ds,"Failed to raise snapshot:",i),await Uc(n,i)}}async function Uc(n,e,t){if(!ea(e))throw e;n.Ia.add(1),await Vl(n),n.Aa.set("Offline"),t||(t=()=>IE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Ds,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await hh(n)}))}function kE(n,e){return e().catch((t=>Uc(n,t,e)))}async function dh(n){const e=Se(n),t=Bi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vp;for(;qP(e);)try{const o=await AP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,HP(e,o)}catch(o){await Uc(e,o)}xE(e)&&NE(e)}function qP(n){return Ls(n)&&n.Pa.length<10}function HP(n,e){n.Pa.push(e);const t=Bi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function xE(n){return Ls(n)&&!Bi(n).M_()&&n.Pa.length>0}function NE(n){Bi(n).start()}async function WP(n){Bi(n).na()}async function GP(n){const e=Bi(n);for(const t of n.Pa)e.X_(t.mutations)}async function KP(n,e,t){const i=n.Pa.shift(),o=Ap.from(i,e,t);await kE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await dh(n)}async function QP(n,e){e&&Bi(n).Z_&&await(async function(i,o){if((function(h){return NC(h)&&h!==G.ABORTED})(o.code)){const l=i.Pa.shift();Bi(i).N_(),await kE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await dh(i)}})(n,e),xE(n)&&NE(n)}async function $v(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),ue(Ds,"RemoteStore received new credentials");const i=Ls(t);t.Ia.add(3),await Vl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await hh(t)}async function XP(n,e){const t=Se(n);e?(t.Ia.delete(2),await hh(t)):e||(t.Ia.add(2),await Vl(t),t.Aa.set("Unknown"))}function na(n){return n.Va||(n.Va=(function(t,i,o){const l=Se(t);return l.ia(),new OP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:FP.bind(null,n),e_:zP.bind(null,n),n_:BP.bind(null,n),J_:$P.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Vp(n)?Op(n):n.Aa.set("Unknown")):(await n.Va.stop(),PE(n))}))),n.Va}function Bi(n){return n.ma||(n.ma=(function(t,i,o){const l=Se(t);return l.ia(),new VP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:WP.bind(null,n),n_:QP.bind(null,n),ea:GP.bind(null,n),ta:KP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await dh(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(Ds,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new Lp(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),ea(n))return new ae(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=tl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.fa=new st(ge.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wo{constructor(e,t,i,o,l,h,d,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((d=>{h.push({type:0,doc:d})})),new Wo(e,t,Uo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class YP{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Se(t),l=o.queries;o.queries=Hv(),l.forEach(((h,d)=>{for(const m of d.wa)m.onError(i)}))})(this,new ae(G.ABORTED,"Firestore shutting down"))}}function Hv(){return new Vs((n=>Jw(n)),sh)}async function DE(n,e){const t=Se(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new JP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Mp(h,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&jp(t)}async function bE(n,e){const t=Se(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZP(n,e){const t=Se(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.wa)d.Ca(o)&&(i=!0);h.ya=o}}i&&jp(t)}function ek(n,e,t){const i=Se(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function jp(n){n.Da.forEach((e=>{e.next()}))}var Ff,Wv;(Wv=Ff||(Ff={})).Fa="default",Wv.Cache="cache";class OE{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class LE{constructor(e){this.key=e}}class tk{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=Yw(e),this.eu=new Uo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new qv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,I)=>{const S=o.get(v),k=oh(this.query,I)?I:null,z=!!S&&this.mutatedKeys.has(S.key),q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let O=!1;S&&k?S.data.isEqual(k.data)?z!==q&&(i.track({type:3,doc:k}),O=!0):this.iu(S,k)||(i.track({type:2,doc:k}),O=!0,(m&&this.Xa(k,m)>0||y&&this.Xa(k,y)<0)&&(d=!0)):!S&&k?(i.track({type:0,doc:k}),O=!0):S&&!k&&(i.track({type:1,doc:S}),O=!0,(m||y)&&(d=!0)),O&&(k?(h=h.add(k),l=q?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{eu:h,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((v,I)=>(function(k,z){const q=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:O})}};return q(k)-q(z)})(v.type,I.type)||this.Xa(v.doc,I.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,y=m!==this.Ya;return this.Ya=m,h.length!==0||y?{snapshot:new Wo(this.query,e.eu,l,h,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ne(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new LE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new VE(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ne();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Up="SyncEngine";class nk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rk{constructor(e){this.key=e,this.lu=!1}}class ik{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Vs((d=>Jw(d)),sh),this.Tu=new Map,this.Iu=new Set,this.du=new st(ge.comparator),this.Eu=new Map,this.Au=new Pp,this.Ru={},this.Vu=new Map,this.mu=Ho.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sk(n,e,t=!0){const i=BE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await ME(i,e,t,!0),o}async function ok(n,e){const t=BE(n);await ME(t,e,!0,!1)}async function ME(n,e,t,i){const o=await RP(n.localStore,mr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await ak(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&RE(n.remoteStore,o),d}async function ak(n,e,t,i,o){n.gu=(I,S,k)=>(async function(q,O,$,te){let ie=O.view.nu($);ie.Ds&&(ie=await jv(q.localStore,O.query,!1).then((({documents:D})=>O.view.nu(D,ie))));const oe=te&&te.targetChanges.get(O.targetId),Ie=te&&te.targetMismatches.get(O.targetId)!=null,de=O.view.applyChanges(ie,q.isPrimaryClient,oe,Ie);return Kv(q,O.targetId,de._u),de.snapshot})(n,I,S,k);const l=await jv(n.localStore,e,!0),h=new tk(e,l.qs),d=h.nu(l.documents),m=Ol.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(d,n.isPrimaryClient,m);Kv(n,t,y._u);const v=new nk(e,t,h);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function lk(n,e,t){const i=Se(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!sh(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await jf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Dp(i.remoteStore,o.targetId),zf(i,o.targetId)})).catch(Zo)):(zf(i,o.targetId),await jf(i.localStore,o.targetId,!0))}async function uk(n,e){const t=Se(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Dp(t.remoteStore,i.targetId))}async function ck(n,e,t){const i=yk(n);try{const o=await(function(h,d){const m=Se(h),y=Ze.now(),v=d.reduce(((k,z)=>k.add(z.key)),Ne());let I,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let z=Xr(),q=Ne();return m.Os.getEntries(k,v).next((O=>{z=O,z.forEach((($,te)=>{te.isValidDocument()||(q=q.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,z))).next((O=>{I=O;const $=[];for(const te of d){const ie=RC(te,I.get(te.key).overlayedDocument);ie!=null&&$.push(new Gi(te.key,ie,$w(ie.value.mapValue),gr.exists(!0)))}return m.mutationQueue.addMutationBatch(k,y,$,d)})).next((O=>{S=O;const $=O.applyToLocalDocumentSet(I,q);return m.documentOverlayCache.saveOverlays(k,O.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:eE(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,d,m){let y=h.Ru[h.currentUser.toKey()];y||(y=new st(Ce)),y=y.insert(d,m),h.Ru[h.currentUser.toKey()]=y})(i,o.batchId,t),await Ll(i,o.changes),await dh(i.remoteStore)}catch(o){const l=Mp(o,"Failed to persist write");t.reject(l)}}async function jE(n,e){const t=Se(n);try{const i=await IP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Fe(h.lu,14607):o.removedDocuments.size>0&&(Fe(h.lu,42227),h.lu=!1))})),await Ll(t,i,e)}catch(i){await Zo(i)}}function Gv(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const d=h.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(h,d){const m=Se(h);m.onlineState=d;let y=!1;m.queries.forEach(((v,I)=>{for(const S of I.wa)S.va(d)&&(y=!0)})),y&&jp(m)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hk(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new st(ge.comparator);h=h.insert(l,qt.newNoDocument(l,Te.min()));const d=Ne().add(l),m=new uh(Te.min(),new Map,new st(Ce),h,d);await jE(i,m),i.du=i.du.remove(l),i.Eu.delete(e),Fp(i)}else await jf(i.localStore,e,!1).then((()=>zf(i,e,t))).catch(Zo)}async function dk(n,e){const t=Se(n),i=e.batch.batchId;try{const o=await TP(t.localStore,e);FE(t,i,null),UE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ll(t,o)}catch(o){await Zo(o)}}async function fk(n,e,t){const i=Se(n);try{const o=await(function(h,d){const m=Se(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return m.mutationQueue.lookupMutationBatch(y,d).next((I=>(Fe(I!==null,37113),v=I.keys(),m.mutationQueue.removeMutationBatch(y,I)))).next((()=>m.mutationQueue.performConsistencyCheck(y))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>m.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);FE(i,e,t),UE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ll(i,o)}catch(o){await Zo(o)}}function UE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function FE(n,e,t){const i=Se(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function zf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||zE(n,i)}))}function zE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Dp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Fp(n))}function Kv(n,e,t){for(const i of t)i instanceof VE?(n.Au.addReference(i.key,e),pk(n,i)):i instanceof LE?(ue(Up,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||zE(n,i.key)):_e(19791,{yu:i})}function pk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(Up,"New document in limbo: "+t),n.Iu.add(i),Fp(n))}function Fp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ge(Xe.fromString(e)),i=n.mu.next();n.Eu.set(i,new rk(t)),n.du=n.du.insert(t,i),RE(n.remoteStore,new ki(mr(Ip(t.path)),i,"TargetPurposeLimboResolution",nh.ue))}}async function Ll(n,e,t){const i=Se(n),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,m)=>{h.push(i.gu(m,e,t).then((y=>{var v;if((y||t)&&i.isPrimaryClient){const I=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,I?"current":"not-current")}if(y){o.push(y);const I=xp.Es(m.targetId,y);l.push(I)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(m,y){const v=Se(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>K.forEach(y,(S=>K.forEach(S.Is,(k=>v.persistence.referenceDelegate.addReference(I,S.targetId,k))).next((()=>K.forEach(S.ds,(k=>v.persistence.referenceDelegate.removeReference(I,S.targetId,k)))))))))}catch(I){if(!ea(I))throw I;ue(Np,"Failed to update sequence numbers: "+I)}for(const I of y){const S=I.targetId;if(!I.fromCache){const k=v.Fs.get(S),z=k.snapshotVersion,q=k.withLastLimboFreeSnapshotVersion(z);v.Fs=v.Fs.insert(S,q)}}})(i.localStore,l))}async function mk(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){ue(Up,"User change. New user:",e.toKey());const i=await TE(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((d=>{d.forEach((m=>{m.reject(new ae(G.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ll(t,i.Bs)}}function gk(n,e){const t=Se(n),i=t.Eu.get(e);if(i&&i.lu)return Ne().add(i.key);{let o=Ne();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const d=t.Pu.get(h);o=o.unionWith(d.view.tu)}return o}}function BE(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hk.bind(null,e),e.hu.J_=ZP.bind(null,e.eventManager),e.hu.pu=ek.bind(null,e.eventManager),e}function yk(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return EP(this.persistence,new vP,e.initialUser,this.serializer)}Du(e){return new EE(kp.Vi,this.serializer)}bu(e){return new PP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class vk extends Fc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Fe(this.persistence.referenceDelegate instanceof jc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rP(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new EE((i=>jc.Vi(i,t)),this.serializer)}}class Bf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Gv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await XP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YP})()}createDatastore(e){const t=ch(e.databaseInfo.databaseId),i=(function(l){return new bP(l)})(e.databaseInfo);return(function(l,h,d,m){return new MP(l,h,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,d){return new UP(i,o,l,h,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Gv(this.syncEngine,t,0)),(function(){return zv.C()?new zv:new kP})())}createSyncEngine(e,t){return(function(o,l,h,d,m,y,v){const I=new ik(o,l,h,d,m,y);return v&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Se(o);ue(Ds,"RemoteStore shutting down."),l.Ia.add(5),await Vl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Bf.provider={build:()=>new Bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="FirestoreClient";class _k{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ue($i,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ue($i,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Mp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function hf(n,e){n.asyncQueue.verifyOperationInProgress(),ue($i,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await TE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Mi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Mi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Qv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wk(n);ue($i,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>$v(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>$v(e.remoteStore,o))),n._onlineComponents=e}async function wk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue($i,"Using user provided OfflineComponentProvider");try{await hf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mi("Error using user provided cache. Falling back to memory cache: "+t),await hf(n,new Fc)}}else ue($i,"Using default OfflineComponentProvider"),await hf(n,new vk(void 0));return n._offlineComponents}async function qE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue($i,"Using user provided OnlineComponentProvider"),await Qv(n,n._uninitializedComponentsProvider._online)):(ue($i,"Using default OnlineComponentProvider"),await Qv(n,new Bf))),n._onlineComponents}function Ek(n){return qE(n).then((e=>e.syncEngine))}async function HE(n){const e=await qE(n),t=e.eventManager;return t.onListen=sk.bind(null,e.syncEngine),t.onUnlisten=lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),t}function Tk(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,m,y){const v=new $E({next:S=>{v.Ou(),h.enqueueAndForget((()=>bE(l,I)));const k=S.docs.has(d);!k&&S.fromCache?y.reject(new ae(G.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&m&&m.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),I=new OE(Ip(d.path),v,{includeMetadataChanges:!0,ka:!0});return DE(l,I)})(await HE(n),n.asyncQueue,e,t,i))),i.promise}function Ik(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,m,y){const v=new $E({next:S=>{v.Ou(),h.enqueueAndForget((()=>bE(l,I))),S.fromCache&&m.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),I=new OE(d,v,{includeMetadataChanges:!0,ka:!0});return DE(l,I)})(await HE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firestore.googleapis.com",Jv=!0;class Yv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GE,this.ssl=Jv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tP)throw new ae(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new x1;switch(i.type){case"firstParty":return new O1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Xv.get(t);i&&(ue("ComponentProvider","Removing Datastore"),Xv.delete(t),i.terminate())})(this),Promise.resolve()}}function Sk(n,e,t,i={}){var o;n=Qr(n,fh);const l=Jr(e),h=n._getSettings(),d=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Kc(`https://${m}`),Qc("Firestore",!0)),h.host!==GE&&h.host!==m&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:i});if(!ks(y,d)&&(n._setSettings(y),i.mockUserToken)){let v,I;if(typeof i.mockUserToken=="string")v=i.mockUserToken,I=$t.MOCK_USER;else{v=L_(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ae(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new $t(S)}n._authCredentials=new N1(new xw(v,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class dt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Dl(t,dt._jsonSchema))return new dt(e,i||null,new ge(Xe.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:vt("string",dt._jsonSchemaVersion),referencePath:vt("string")};class Vi extends Ms{constructor(e,t,i){super(e,t,Ip(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ge(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function Ml(n,e,...t){if(n=nt(n),Dw("collection","path",e),n instanceof fh){const i=Xe.fromString(e,...t);return hv(i),new Vi(n,null,i)}{if(!(n instanceof dt||n instanceof Vi))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xe.fromString(e,...t));return hv(i),new Vi(n.firestore,null,i)}}function js(n,e,...t){if(n=nt(n),arguments.length===1&&(e=yp.newId()),Dw("doc","path",e),n instanceof fh){const i=Xe.fromString(e,...t);return cv(i),new dt(n,null,new ge(i))}{if(!(n instanceof dt||n instanceof Vi))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xe.fromString(e,...t));return cv(i),new dt(n.firestore,n instanceof Vi?n.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class e_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new SE(this,"async_queue_retry"),this.oc=()=>{const i=cf();i&&ue(Zv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=cf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=cf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new qr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ea(e))throw e;ue(Zv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Kr("INTERNAL UNHANDLED ERROR: ",t_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Lp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&_e(47125,{hc:t_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function t_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class jl extends fh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new e_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function Ak(n,e){const t=typeof n=="object"?n:Xc(),i=typeof n=="string"?n:bc,o=Pl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=np("firestore");l&&Sk(o,...l)}return o}function zp(n){if(n._terminated)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rk(n),n._firestoreClient}function Rk(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,m,y,v){return new X1(d,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,WE(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new _k(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Mt.fromBase64String(e))}catch(t){throw new ae(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:vt("string",Nn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:vt("string",vr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new ae(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:vt("string",_r._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=/^__.*__$/;class Pk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new bl(e,this.data,t,this.fieldTransforms)}}class KE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:n})}}class Bp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(QE(this.Ec)&&Ck.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class kk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ch(e)}Dc(e,t,i,o=!1){return new Bp({Ec:e,methodName:t,bc:i,path:Lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=ch(n._databaseId);return new kk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xk(n,e,t,i,o,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Hp("Data must be an object, but it was:",h,i);const d=XE(i,h);let m,y;if(l.merge)m=new vn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const I of l.mergeFields){const S=$f(e,I,t);if(!h.contains(S))throw new ae(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);YE(v,S)||v.push(S)}m=new vn(v),y=h.fieldTransforms.filter((I=>m.covers(I.field)))}else m=null,y=h.fieldTransforms;return new Pk(new ln(d),m,y)}class gh extends mh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}class qp extends mh{_toFieldTransform(e){return new TC(e.path,new wl)}isEqual(e){return e instanceof qp}}function Nk(n,e,t,i){const o=n.Dc(1,e,t);Hp("Data must be an object, but it was:",o,i);const l=[],h=ln.empty();Wi(i,((m,y)=>{const v=Wp(e,m,t);y=nt(y);const I=o.gc(v);if(y instanceof gh)l.push(v);else{const S=Ul(y,I);S!=null&&(l.push(v),h.set(v,S))}}));const d=new vn(l);return new KE(h,d,o.fieldTransforms)}function Dk(n,e,t,i,o,l){const h=n.Dc(1,e,t),d=[$f(e,i,t)],m=[o];if(l.length%2!=0)throw new ae(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push($f(e,l[S])),m.push(l[S+1]);const y=[],v=ln.empty();for(let S=d.length-1;S>=0;--S)if(!YE(y,d[S])){const k=d[S];let z=m[S];z=nt(z);const q=h.gc(k);if(z instanceof gh)y.push(k);else{const O=Ul(z,q);O!=null&&(y.push(k),v.set(k,O))}}const I=new vn(y);return new KE(v,I,h.fieldTransforms)}function bk(n,e,t,i=!1){return Ul(t,n.Dc(i?4:3,e))}function Ul(n,e){if(JE(n=nt(n)))return Hp("Unsupported field value:",e,n),XE(n,e);if(n instanceof mh)return(function(i,o){if(!QE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const d of i){let m=Ul(d,o.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=nt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _C(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ze.fromDate(i);return{timestampValue:Mc(o.serializer,l)}}if(i instanceof Ze){const l=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mc(o.serializer,l)}}if(i instanceof vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:fE(o.serializer,i._byteString)};if(i instanceof dt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof _r)return(function(h,d){return{mapValue:{fields:{[zw]:{stringValue:Bw},[Oc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw d.wc("VectorValues must only contain numeric values.");return Sp(d.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${th(i)}`)})(n,e)}function XE(n,e){const t={};return Vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,((i,o)=>{const l=Ul(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function JE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof vr||n instanceof Nn||n instanceof dt||n instanceof mh||n instanceof _r)}function Hp(n,e,t){if(!JE(t)||!bw(t)){const i=th(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function $f(n,e,t){if((e=nt(e))instanceof ph)return e._internalPath;if(typeof e=="string")return Wp(n,e);throw zc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ok=new RegExp("[~\\*/\\[\\]]");function Wp(n,e,t){if(e.search(Ok)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ph(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new ae(G.INVALID_ARGUMENT,d+n+m)}function YE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Vk extends ZE{data(){return super.data()}}function yh(n,e){return typeof e=="string"?Wp(n,e):e instanceof ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class e0 extends Gp{}function vh(n,e,...t){let i=[];e instanceof Gp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof Kp)).length,d=l.filter((m=>m instanceof _h)).length;if(h>1||h>0&&d>0)throw new ae(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class _h extends e0{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _h(e,t,i)}_apply(e){const t=this._parse(e);return t0(e._query,t),new Ms(e.firestore,e.converter,Df(e._query,t))}_parse(e){const t=$p(e.firestore);return(function(l,h,d,m,y,v,I){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){r_(I,v);const z=[];for(const q of I)z.push(n_(m,l,q));S={arrayValue:{values:z}}}else S=n_(m,l,I)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||r_(I,v),S=bk(d,h,I,v==="in"||v==="not-in");return yt.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wh(n,e,t){const i=e,o=yh("where",n);return _h._create(o,i,t)}class Kp extends Gp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const d=l.getFlattenedFilters();for(const m of d)t0(h,m),h=Df(h,m)})(e._query,t),new Ms(e.firestore,e.converter,Df(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qp extends e0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new ae(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(l,h)})(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new ta(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Xp(n,e="asc"){const t=e,i=yh("orderBy",n);return Qp._create(i,t)}function n_(n,e,t){if(typeof(t=nt(t))=="string"){if(t==="")throw new ae(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(e)&&t.indexOf("/")!==-1)throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Xe.fromString(t));if(!ge.isDocumentKey(i))throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _v(n,new ge(i))}if(t instanceof dt)return _v(n,t._key);throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${th(t)}.`)}function r_(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t0(n,e){const t=(function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Mk{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Oc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ht(h.doubleValue)));return new _r(l)}convertGeoPoint(e){return new vr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=Ui(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xe.fromString(e);Fe(_E(i),9688,{name:e});const o=new yl(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return o.isEqual(t)||Kr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cs extends ZE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Cs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:vt("string",Cs._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Tc extends Cs{data(e={}){return super.data(e)}}class Fo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Tc(this._firestore,this._userDataWriter,i.key,i,new rl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((d=>{const m=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),v=h.indexOf(d.doc.key)),{type:Uk(d.type),doc:m,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(n){n=Qr(n,dt);const e=Qr(n.firestore,jl);return Tk(zp(e),n._key).then((t=>zk(e,n,t)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:vt("string",Fo._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class n0 extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Fl(n){n=Qr(n,Ms);const e=Qr(n.firestore,jl),t=zp(e),i=new n0(e);return Lk(n._query),Ik(t,n._query).then((o=>new Fo(e,i,n,o)))}function Yp(n,e,t){n=Qr(n,dt);const i=Qr(n.firestore,jl),o=jk(n.converter,e,t);return r0(i,[xk($p(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,gr.none())])}function Fk(n,e,t,...i){n=Qr(n,dt);const o=Qr(n.firestore,jl),l=$p(o);let h;return h=typeof(e=nt(e))=="string"||e instanceof ph?Dk(l,"updateDoc",n._key,e,t,i):Nk(l,"updateDoc",n._key,e),r0(o,[h.toMutation(n._key,gr.exists(!0))])}function r0(n,e){return(function(i,o){const l=new qr;return i.asyncQueue.enqueueAndForget((async()=>ck(await Ek(i),o,l))),l.promise})(zp(n),e)}function zk(n,e,t){const i=t.docs.get(e._key),o=new n0(n);return new Cs(n,o,e._key,i,new rl(t.hasPendingWrites,t.fromCache),e.converter)}function qf(){return new qp("serverTimestamp")}(function(e,t=!0){(function(o){Yo=o})(Os),Li(new Hr("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new jl(new D1(i.getProvider("auth-internal")),new V1(h,i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(y.options.projectId,v)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),bn(sv,ov,e),bn(sv,ov,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="type.googleapis.com/google.protobuf.Int64Value",$k="type.googleapis.com/google.protobuf.UInt64Value";function i0(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Bc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Bc(e));if(typeof n=="function"||typeof n=="object")return i0(n,e=>Bc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Go(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Bk:case $k:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Go(e)):typeof n=="function"||typeof n=="object"?i0(n,e=>Go(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class un extends Zn{constructor(e,t,i){super(`${Zp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,un.prototype)}}function qk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $c(n,e){let t=qk(n),i=t,o;try{const l=e&&e.error;if(l){const h=l.status;if(typeof h=="string"){if(!i_[h])return new un("internal","internal");t=i_[h],i=h}const d=l.message;typeof d=="string"&&(i=d),o=l.details,o!==void 0&&(o=Go(o))}}catch{}return t==="ok"?null:new un(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,an(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o==null||o.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="us-central1",Wk=/^data: (.*?)(?:\n|$)/;function Gk(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new un("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Kk{constructor(e,t,i,o,l=Hf,h=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Hk(e,t,i,o),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Hf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Qk(n,e,t){const i=Jr(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Kc(n.emulatorOrigin),Qc("Functions",!0))}function Xk(n,e,t){const i=o=>Yk(n,e,o,{});return i.stream=(o,l)=>ex(n,e,o,l),i}async function Jk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function s0(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Yk(n,e,t,i){const o=n._url(e);return Zk(n,o,t,i)}async function Zk(n,e,t,i){t=Bc(t);const o={data:t},l=await s0(n,i),h=i.timeout||7e4,d=Gk(h),m=await Promise.race([Jk(e,o,l,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!m)throw new un("cancelled","Firebase Functions instance was deleted.");const y=$c(m.status,m.json);if(y)throw y;if(!m.json)throw new un("internal","Response is not valid JSON object.");let v=m.json.data;if(typeof v>"u"&&(v=m.json.result),typeof v>"u")throw new un("internal","Response is missing data field.");return{data:Go(v)}}function ex(n,e,t,i){const o=n._url(e);return tx(n,o,t,i||{})}async function tx(n,e,t,i){var o;t=Bc(t);const l={data:t},h=await s0(n,i);h["Content-Type"]="application/json",h.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:h,signal:i==null?void 0:i.signal})}catch(k){if(k instanceof Error&&k.name==="AbortError"){const q=new un("cancelled","Request was cancelled.");return{data:Promise.reject(q),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(q)}}}}}}const z=$c(0,null);return{data:Promise.reject(z),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(z)}}}}}}let m,y;const v=new Promise((k,z)=>{m=k,y=z});(o=i==null?void 0:i.signal)===null||o===void 0||o.addEventListener("abort",()=>{const k=new un("cancelled","Request was cancelled.");y(k)});const I=d.body.getReader(),S=nx(I,m,y,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const k=S.getReader();return{async next(){const{value:z,done:q}=await k.read();return{value:z,done:q}},async return(){return await k.cancel(),{done:!0,value:void 0}}}}},data:v}}function nx(n,e,t,i){const o=(h,d)=>{const m=h.match(Wk);if(!m)return;const y=m[1];try{const v=JSON.parse(y);if("result"in v){e(Go(v.result));return}if("message"in v){d.enqueue(Go(v.message));return}if("error"in v){const I=$c(0,v);d.error(I),t(I);return}}catch(v){if(v instanceof un){d.error(v),t(v);return}}},l=new TextDecoder;return new ReadableStream({start(h){let d="";return m();async function m(){if(i!=null&&i.aborted){const y=new un("cancelled","Request was cancelled");return h.error(y),t(y),Promise.resolve()}try{const{value:y,done:v}=await n.read();if(v){d.trim()&&o(d.trim(),h),h.close();return}if(i!=null&&i.aborted){const S=new un("cancelled","Request was cancelled");h.error(S),t(S),await n.cancel();return}d+=l.decode(y,{stream:!0});const I=d.split(`
`);d=I.pop()||"";for(const S of I)S.trim()&&o(S.trim(),h);return m()}catch(y){const v=y instanceof un?y:$c(0,null);h.error(v),t(v)}}},cancel(){return n.cancel()}})}const s_="@firebase/functions",o_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="auth-internal",ix="app-check-internal",sx="messaging-internal";function ox(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(rx),h=t.getProvider(sx),d=t.getProvider(ix);return new Kk(o,l,h,d,i)};Li(new Hr(Zp,e,"PUBLIC").setMultipleInstances(!0)),bn(s_,o_,n),bn(s_,o_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n=Xc(),e=Hf){const i=Pl(nt(n),Zp).getImmediate({identifier:e}),o=np("functions");return o&&lx(i,...o),i}function lx(n,e,t){Qk(nt(n),e,t)}function o0(n,e,t){return Xk(nt(n),e)}ox();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="firebasestorage.googleapis.com",l0="storageBucket",ux=120*1e3,cx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends Zn{constructor(e,t,i=0){super(df(e),`Firebase Storage: ${t} (${df(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function df(n){return"storage/"+n}function em(){const n="An unknown error occurred, please check the error payload for server response.";return new lt(at.UNKNOWN,n)}function hx(n){return new lt(at.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function dx(n){return new lt(at.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fx(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(at.UNAUTHENTICATED,n)}function px(){return new lt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mx(n){return new lt(at.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function gx(){return new lt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yx(){return new lt(at.CANCELED,"User canceled the upload/download.")}function vx(n){return new lt(at.INVALID_URL,"Invalid URL '"+n+"'.")}function _x(n){return new lt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wx(){return new lt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+l0+"' property when initializing the app?")}function Ex(){return new lt(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tx(){return new lt(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ix(n){return new lt(at.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wf(n){return new lt(at.INVALID_ARGUMENT,n)}function u0(){return new lt(at.APP_DELETED,"The Firebase app was deleted.")}function Sx(n){return new lt(at.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cl(n,e){return new lt(at.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Za(n){throw new lt(at.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=_n.makeFromUrl(e,t)}catch{return new _n(e,"")}if(i.path==="")return i;throw _x(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function y(oe){oe.path_=decodeURIComponent(oe.path)}const v="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",k=new RegExp(`^https?://${I}/${v}/b/${o}/o${S}`,"i"),z={bucket:1,path:3},q=t===a0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",$=new RegExp(`^https?://${q}/${o}/${O}`,"i"),ie=[{regex:d,indices:m,postModify:l},{regex:k,indices:z,postModify:y},{regex:$,indices:{bucket:1,path:2},postModify:y}];for(let oe=0;oe<ie.length;oe++){const Ie=ie[oe],de=Ie.regex.exec(e);if(de){const D=de[Ie.indices.bucket];let A=de[Ie.indices.path];A||(A=""),i=new _n(D,A),Ie.postModify(i);break}}if(i==null)throw vx(e);return i}}class Ax{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(n,e,t){let i=1,o=null,l=null,h=!1,d=0;function m(){return d===2}let y=!1;function v(...O){y||(y=!0,e.apply(null,O))}function I(O){o=setTimeout(()=>{o=null,n(k,m())},O)}function S(){l&&clearTimeout(l)}function k(O,...$){if(y){S();return}if(O){S(),v.call(null,O,...$);return}if(m()||h){S(),v.call(null,O,...$);return}i<64&&(i*=2);let ie;d===1?(d=2,ie=0):ie=(i+Math.random())*1e3,I(ie)}let z=!1;function q(O){z||(z=!0,S(),!y&&(o!==null?(O||(d=2),clearTimeout(o),I(0)):O||(d=1)))}return I(0),l=setTimeout(()=>{h=!0,q(!0)},t),q}function Cx(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){return n!==void 0}function kx(n){return typeof n=="object"&&!Array.isArray(n)}function tm(n){return typeof n=="string"||n instanceof String}function a_(n){return nm()&&n instanceof Blob}function nm(){return typeof Blob<"u"}function l_(n,e,t,i){if(i<e)throw Wf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Wf(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function c0(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ps;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ps||(Ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t,i,o,l,h,d,m,y,v,I,S=!0,k=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=I,this.retry=S,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,q)=>{this.resolve_=z,this.reject_=q,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new uc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=d=>{const m=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,y)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const d=l.getErrorCode()===Ps.NO_ERROR,m=l.getStatus();if(!d||xx(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Ps.ABORT;i(!1,new uc(!1,null,v));return}const y=this.successCodes_.indexOf(m)!==-1;i(!0,new uc(y,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());Px(m)?l(m):l()}catch(m){h(m)}else if(d!==null){const m=em();m.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,m)):h(m)}else if(o.canceled){const m=this.appDelete_?u0():yx();h(m)}else{const m=gx();h(m)}};this.canceled_?t(!1,new uc(!1,null,!0)):this.backoffId_=Rx(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Cx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Dx(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function bx(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ox(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Vx(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Lx(n,e,t,i,o,l,h=!0,d=!1){const m=c0(n.urlParams),y=n.url+m,v=Object.assign({},n.headers);return Ox(v,e),Dx(v,t),bx(v,l),Vx(v,i),new Nx(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,h,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jx(...n){const e=Mx();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(nm())return new Blob(n);throw new lt(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ux(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){if(typeof atob>"u")throw Ix("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ff{constructor(e,t){this.data=e,this.contentType=t||null}}function zx(n,e){switch(n){case dr.RAW:return new ff(h0(e));case dr.BASE64:case dr.BASE64URL:return new ff(d0(n,e));case dr.DATA_URL:return new ff($x(e),qx(e))}throw em()}function h0(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,h=n.charCodeAt(++t);i=65536|(l&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Bx(n){let e;try{e=decodeURIComponent(n)}catch{throw cl(dr.DATA_URL,"Malformed data URL.")}return h0(e)}function d0(n,e){switch(n){case dr.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw cl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw cl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Fx(e)}catch(o){throw o.message.includes("polyfill")?o:cl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class f0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw cl(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Hx(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function $x(n){const e=new f0(n);return e.base64?d0(dr.BASE64,e.rest):Bx(e.rest)}function qx(n){return new f0(n).contentType}function Hx(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){let i=0,o="";a_(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(a_(this.data_)){const i=this.data_,o=Ux(i,e,t);return o===null?null:new Ci(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ci(i,!0)}}static getBlob(...e){if(nm()){const t=e.map(i=>i instanceof Ci?i.data_:i);return new Ci(jx.apply(null,t))}else{const t=e.map(h=>tm(h)?zx(dr.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)o[l++]=h[d]}),new Ci(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n){let e;try{e=JSON.parse(n)}catch{return null}return kx(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Gx(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function m0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n,e){return e}class Xt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||Kx}}let cc=null;function Qx(n){return!tm(n)||n.length<2?n:m0(n)}function g0(){if(cc)return cc;const n=[];n.push(new Xt("bucket")),n.push(new Xt("generation")),n.push(new Xt("metageneration")),n.push(new Xt("name","fullPath",!0));function e(l,h){return Qx(h)}const t=new Xt("name");t.xform=e,n.push(t);function i(l,h){return h!==void 0?Number(h):h}const o=new Xt("size");return o.xform=i,n.push(o),n.push(new Xt("timeCreated")),n.push(new Xt("updated")),n.push(new Xt("md5Hash",null,!0)),n.push(new Xt("cacheControl",null,!0)),n.push(new Xt("contentDisposition",null,!0)),n.push(new Xt("contentEncoding",null,!0)),n.push(new Xt("contentLanguage",null,!0)),n.push(new Xt("contentType",null,!0)),n.push(new Xt("metadata","customMetadata",!0)),cc=n,cc}function Xx(n,e){function t(){const i=n.bucket,o=n.fullPath,l=new _n(i,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function Jx(n,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const h=t[l];i[h.local]=h.xform(i,e[h.server])}return Xx(i,n),i}function y0(n,e,t){const i=p0(e);return i===null?null:Jx(n,i,t)}function Yx(n,e,t,i){const o=p0(e);if(o===null||!tm(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(y=>{const v=n.bucket,I=n.fullPath,S="/b/"+h(v)+"/o/"+h(I),k=rm(S,t,i),z=c0({alt:"media",token:y});return k+z})[0]}function Zx(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class v0{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){if(!n)throw em()}function eN(n,e){function t(i,o){const l=y0(n,o,e);return _0(l!==null),l}return t}function tN(n,e){function t(i,o){const l=y0(n,o,e);return _0(l!==null),Yx(l,o,n.host,n._protocol)}return t}function w0(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=px():o=fx():t.getStatus()===402?o=dx(n.bucket):t.getStatus()===403?o=mx(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function nN(n){const e=w0(n);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=hx(n.path)),l.serverResponse=o.serverResponse,l}return t}function rN(n,e,t){const i=e.fullServerUrl(),o=rm(i,n.host,n._protocol),l="GET",h=n.maxOperationRetryTime,d=new v0(o,l,tN(n,t),h);return d.errorHandler=nN(e),d}function iN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sN(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=iN(null,e)),i}function oN(n,e,t,i,o){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let ie="";for(let oe=0;oe<2;oe++)ie=ie+Math.random().toString().slice(2);return ie}const m=d();h["Content-Type"]="multipart/related; boundary="+m;const y=sN(e,i,o),v=Zx(y,t),I="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+m+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+m+"--",k=Ci.getBlob(I,i,S);if(k===null)throw Ex();const z={name:y.fullPath},q=rm(l,n.host,n._protocol),O="POST",$=n.maxUploadRetryTime,te=new v0(q,O,eN(n,t),$);return te.urlParams=z,te.headers=h,te.body=k.uploadData(),te.errorHandler=w0(e),te}class aN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,l){if(this.sent_)throw Za("cannot .send() more than once");if(Jr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Za("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Za("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Za("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Za("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lN extends aN{initXhr(){this.xhr_.responseType="text"}}function E0(){return new lN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this._service=e,t instanceof _n?this._location=t:this._location=_n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bs(e,t)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m0(this._location.path)}get storage(){return this._service}get parent(){const e=Wx(this._location.path);if(e===null)return null;const t=new _n(this._location.bucket,e);return new bs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Sx(e)}}function uN(n,e,t){n._throwIfRoot("uploadBytes");const i=oN(n.storage,n._location,g0(),new Ci(e,!0),t);return n.storage.makeRequestWithTokens(i,E0).then(o=>({metadata:o,ref:n}))}function cN(n){n._throwIfRoot("getDownloadURL");const e=rN(n.storage,n._location,g0());return n.storage.makeRequestWithTokens(e,E0).then(t=>{if(t===null)throw Tx();return t})}function hN(n,e){const t=Gx(n._location.path,e),i=new _n(n._location.bucket,t);return new bs(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){return/^[A-Za-z]+:\/\//.test(n)}function fN(n,e){return new bs(n,e)}function T0(n,e){if(n instanceof im){const t=n;if(t._bucket==null)throw wx();const i=new bs(t,t._bucket);return e!=null?T0(i,e):i}else return e!==void 0?hN(n,e):n}function pN(n,e){if(e&&dN(e)){if(n instanceof im)return fN(n,e);throw Wf("To use ref(service, url), the first argument must be a Storage instance.")}else return T0(n,e)}function u_(n,e){const t=e==null?void 0:e[l0];return t==null?null:_n.makeFromBucketSpec(t,n)}function mN(n,e,t,i={}){n.host=`${e}:${t}`;const o=Jr(e);o&&(Kc(`https://${n.host}/b`),Qc("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:L_(l,n.app.options.projectId))}class im{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=a0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ux,this._maxUploadRetryTime=cx,this._requests=new Set,o!=null?this._bucket=_n.makeFromBucketSpec(o,this._host):this._bucket=u_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=u_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bs(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new Ax(u0());{const h=Lx(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const c_="@firebase/storage",h_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="storage";function gN(n,e,t){return n=nt(n),uN(n,e,t)}function yN(n){return n=nt(n),cN(n)}function vN(n,e){return n=nt(n),pN(n,e)}function _N(n=Xc(),e){n=nt(n);const i=Pl(n,I0).getImmediate({identifier:e}),o=np("storage");return o&&wN(i,...o),i}function wN(n,e,t,i={}){mN(n,e,t,i)}function EN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new im(t,i,o,e,Os)}function TN(){Li(new Hr(I0,EN,"PUBLIC").setMultipleInstances(!0)),bn(c_,h_,""),bn(c_,h_,"esm2017")}TN();const IN={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},Eh=U_(IN),cn=P1(Eh),On=Ak(Eh),SN=_N(Eh),S0=ax(Eh,"us-central1");gR(cn,hw);o0(S0,"bootstrapFirstAdmin");const AN=o0(S0,"setUserRole");async function RN(n,e){return(await AN({uid:n,role:e})).data}async function d_(){return cn.currentUser?cn.currentUser.getIdTokenResult(!0):null}async function Gf(n){const e=n??cn.currentUser;if(!e)return null;try{const i=(await e.getIdTokenResult()).claims.role;return i==="admin"||i==="trainer"||i==="client"?i:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const l=(await e.getIdTokenResult()).claims.role;return l==="admin"||l==="trainer"||l==="client"?l:null}catch{return await Yc(cn),null}throw t}}function A0(){return{createdAt:qf(),updatedAt:qf()}}function R0(){return{updatedAt:qf()}}function Tr(){var e;const n=(e=cn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function qc(n={}){const e=Tr(),t=js(On,"users",e);return await Yp(t,{uid:e,...A0(),...n},{merge:!0}),t}async function Kf(n){const e=n??Tr();return Jp(js(On,"users",e))}async function CN(n,e){const t=Tr();await Yp(js(On,"users",t,"private",n),{...e,...R0()},{merge:!0})}async function PN(){return Fl(Ml(On,"users"))}async function kN(n,e){return Jp(js(On,"users",n,"private",e))}async function xN(n){const e=Tr(),t=js(On,"plans",n.clientId);return await Yp(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...A0()}),t}async function C0(n,e){const t=e??Tr(),i=n==="client"?"clientId":"trainerId",o=vh(Ml(On,"plans"),wh(i,"==",t));return Fl(o)}async function NN(n){const e=n??Tr();return Jp(js(On,"plans",e))}async function DN(n,e){await Fk(js(On,"plans",n),{...e,...R0()})}async function bN(n,e){const t=Tr(),i=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),o=`${Date.now()}-${i}`,l=MN(t,n,o);return await gN(l,e,{contentType:e.type||"application/octet-stream"}),yN(l)}async function ON(n){const e=Tr(),t=vh(Ml(On,"workoutLogs"),wh("clientId","==",e),Xp("sessionDate","desc"));return Fl(t)}async function VN(n,e){const t=Tr(),o=vh(Ml(On,"sessions"),wh("clientId","==",t),Xp("startsAt","desc"));return Fl(o)}async function LN(n){const e=Tr(),t=vh(Ml(On,"metrics"),wh("clientId","==",e),Xp("measuredAt","desc"));return Fl(t)}function MN(n,e,t){return vN(SN,`workout-media/${n}/${e}/${t}`)}function ra(){const[n,e]=Q.useState(!0),[t,i]=Q.useState(cn.currentUser),[o,l]=Q.useState(null);return Q.useEffect(()=>lw(cn,async h=>{try{if(e(!0),i(h),!h){l(null);return}await sm(h);const d=await Gf(h);l(d)}catch(d){(typeof d=="object"&&d&&"code"in d?String(d.code):"").includes("user-token-expired")&&(await Yc(cn),i(null)),l(null)}finally{e(!1)}}),[]),Q.useMemo(()=>({initializing:n,user:t,role:o,isAuthenticated:!!t}),[n,t,o])}const Qf=new zr;Qf.setCustomParameters({prompt:"select_account"});async function sm(n){(await Kf(n.uid)).exists()||await qc({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function f_(){try{const n=await LR(cn,Qf);return await sm(n.user),{redirected:!1,user:n.user}}catch(n){if(UN(n))return await BR(cn,Qf),{redirected:!0,user:null};throw n}}async function jN(){try{const n=await qR(cn);return n!=null&&n.user&&await sm(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await Yc(cn),null;throw n}}async function Il(){return Yc(cn)}function UN(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}const FN=["lrnz.sga@gmail.com","beastlyworkoutideas@gmail.com"];function P0(n){return n.trim().toLowerCase()}function zN(n){const e=FN.join(",");return new Set(e.split(",").map(P0).filter(Boolean))}const BN=zN();function pf(n){return n?BN.has(P0(n)):!1}function hc(n){return n.map(e=>({id:e.id,...e.data()}))}function fr(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Ts="bw_login_intent";function $N(){const{user:n,role:e}=ra(),t=Al(),{showError:i}=Wc(),[o,l]=Q.useState(!1),[h,d]=Q.useState(""),[m,y]=Q.useState(!1);if(Q.useEffect(()=>{async function S(){try{await jN()}catch(k){const z=fr(k);d(z),i(z)}}S()},[i]),Q.useEffect(()=>{async function S(){if(!(!n||e||sessionStorage.getItem(Ts)!=="coach"||!pf(n.email))){y(!0),d("Sto preparando il tuo accesso coach...");try{await qc({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let z=0;z<10;z+=1){await d_();const q=await Gf(n);if(q==="admin"||q==="trainer"){sessionStorage.removeItem(Ts),t("/app/coach",{replace:!0});return}await new Promise(O=>setTimeout(O,700))}d("Sto ancora completando laccesso. Riprova tra pochi secondi.")}catch(z){const q=fr(z);d(q),i(q)}finally{y(!1)}}}S()},[n,e,t]),n&&e)return sessionStorage.removeItem(Ts),E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0});if(n&&!e)return sessionStorage.getItem(Ts)==="coach"&&pf(n.email)?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accesso Coach"}),E.jsx("p",{className:"hero-sub",children:m?"Attendi un attimo...":"Sto verificando il tuo account."}),h?E.jsx("p",{className:"message",children:h}):null,E.jsx("button",{className:"btn btn-ghost",disabled:m,onClick:()=>void Il(),type:"button",children:"Esci e cambia account"})]})}):E.jsx(Dn,{to:"/app/client",replace:!0});async function v(){l(!0),d("");try{if(sessionStorage.setItem(Ts,"client"),(await f_()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(S){const k=fr(S);d(k),i(k)}finally{l(!1)}}async function I(){l(!0),d("");try{sessionStorage.setItem(Ts,"coach");const S=await f_();if(S.redirected){d("Ti sto reindirizzando a Google...");return}if(!S.user){d("Accesso non completato. Riprova.");return}if(!pf(S.user.email)){await Il(),d("Questo account non  abilitato per larea coach. Usa accesso utente."),i("Questo account non  abilitato per larea coach.");return}await qc({email:S.user.email??"",displayName:S.user.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let k=0;k<8;k+=1){await d_();const z=await Gf(S.user);if(z==="admin"||z==="trainer"){sessionStorage.removeItem(Ts),t("/app/coach",{replace:!0});return}await new Promise(q=>setTimeout(q,700))}d("Sto ancora completando laccesso coach. Riprova tra qualche secondo.")}catch(S){const k=fr(S);d(k),i(k)}finally{l(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accedi con Google"}),E.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),E.jsx("button",{className:"btn",disabled:o,onClick:()=>void v(),type:"button",children:o?"Connessione...":"Continua con Google"}),E.jsx("div",{className:"divider"}),E.jsx("h2",{children:"Sei un Coach?"}),E.jsx("p",{className:"hint",children:"Usa il tuo account coach per entrare nell'area professionale."}),E.jsx("button",{className:"btn btn-ghost",disabled:o,onClick:()=>void I(),type:"button",children:"Continua come Coach"}),h?E.jsx("p",{className:"message",children:h}):null]})})}function k0({role:n,title:e,subtitle:t,children:i}){return E.jsxs("main",{className:"page",children:[E.jsxs("section",{className:"hero",children:[E.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),E.jsx("h1",{children:e}),E.jsx("p",{className:"hero-sub",children:t}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Il(),children:"Esci dal profilo"})]}),E.jsx("section",{className:"stack",children:i}),E.jsxs("nav",{className:"mobile-nav",children:[E.jsx(WI,{to:n==="client"?"/app/client":"/app/coach",children:"Home"}),E.jsx("button",{type:"button",onClick:()=>void Il(),children:"Esci"})]})]})}function p_(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function qN(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function HN(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function WN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="string"?t.reps:"",weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function GN(){const{role:n,user:e}=ra(),t=Al(),{showError:i}=Wc(),[o,l]=Q.useState([]),[h,d]=Q.useState([]),[m,y]=Q.useState([]),[v,I]=Q.useState([]),[S,k]=Q.useState(!1),[z,q]=Q.useState(!0),[O,$]=Q.useState(null);Q.useEffect(()=>{async function de(){if(e)try{const A=(await Kf(e.uid)).data();if(!(A!=null&&A.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{q(!1)}}de()},[e,t]);async function te(){k(!0);try{const de=(e==null?void 0:e.uid)??"",D=de?await Kf(de):null,A=(D==null?void 0:D.data())??{},P=Array.from(new Set([de,(A.uid??"").trim(),(A.clientId??"").trim()].filter(Be=>Be.length>0))),x=await Promise.allSettled(P.flatMap(Be=>[C0("client",Be),NN(Be)])),L=new Map;for(const Be of x){if(Be.status!=="fulfilled")continue;const Pe=Be.value;if("docs"in Pe)for(const re of hc(Pe.docs))L.set(re.id,re);else if(Pe.exists()){const re={id:Pe.id,...Pe.data()};L.set(re.id,re)}}const M=Array.from(L.values()).sort((Be,Pe)=>{const re=P.includes(Be.id)?0:1,X=P.includes(Pe.id)?0:1;return re-X});l(M);const[C,$e,qe]=await Promise.allSettled([VN("client"),ON(),LN()]);d(C.status==="fulfilled"?hc(C.value.docs):[]),y($e.status==="fulfilled"?hc($e.value.docs):[]),I(qe.status==="fulfilled"?hc(qe.value.docs):[]),(C.status==="rejected"||$e.status==="rejected"||qe.status==="rejected")&&i("Alcune sezioni non sono ancora pronte, ma la tua scheda tecnica  disponibile.")}catch(de){i(fr(de))}finally{k(!1)}}Q.useEffect(()=>{e&&(n==="client"||n===null)&&te()},[n,e==null?void 0:e.uid]);const ie=Q.useMemo(()=>[...h].sort((de,D)=>new Date(de.startsAt).getTime()-new Date(D.startsAt).getTime()).find(de=>new Date(de.startsAt).getTime()>Date.now()),[h]),oe=o[0],Ie=WN(oe==null?void 0:oe.exercises);return e?z?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Prepariamo la tua area"}),E.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):E.jsxs(k0,{role:"client",subtitle:"Tieni traccia di allenamenti e progressi in modo semplice.",title:"La tua area",children:[E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Riepilogo"}),E.jsxs("p",{className:"hint",children:["Programmi ricevuti: ",o.length]}),E.jsxs("p",{className:"hint",children:["Sessioni prenotate: ",h.length]}),E.jsxs("p",{className:"hint",children:["Allenamenti registrati: ",m.length]}),E.jsxs("p",{className:"hint",children:["Progressi inseriti: ",v.length]}),ie?E.jsxs("p",{className:"message success",children:["Prossima sessione: ",new Date(ie.startsAt).toLocaleString("it-IT")]}):null]}),E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"La tua scheda tecnica"}),oe?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"hint",children:E.jsx("strong",{children:oe.title})}),E.jsx("ul",{className:"list",children:Ie.map((de,D)=>E.jsxs("li",{children:[E.jsx("strong",{children:de.name||`Esercizio ${D+1}`}),"  ",de.sets??"-"," serie","  ",de.reps||"-"," reps","  ",de.weight||"-",de.mediaUrl?E.jsxs(E.Fragment,{children:["  ",E.jsx("button",{className:"btn-link",type:"button",onClick:()=>$({url:de.mediaUrl,label:de.name||`Esercizio ${D+1}`}),children:"Apri media"})]}):null]},`plan-ex-${D}`))})]}):E.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]}),S?E.jsx("p",{className:"message",children:"Caricamento..."}):null,O?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:O.label}),p_(O.url)?E.jsx("iframe",{title:O.label,src:p_(O.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):qN(O.url)?E.jsx("img",{src:O.url,alt:O.label,className:"media-frame media-image"}):HN(O.url)?E.jsx("video",{src:O.url,controls:!0,className:"media-frame"}):E.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",E.jsx("a",{href:O.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>$(null),children:"Chiudi"})]})}):null]}):E.jsx(Dn,{to:"/auth",replace:!0})}function xn(n){return typeof n=="string"?n:n==null?"":String(n)}function m_(n){return xn(n.uid).trim()||n.id}function KN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:xn(t.name),sets:Number(t.sets??3)||3,reps:xn(t.reps)||"10",weight:xn(t.weight),mediaUrl:xn(t.mediaUrl)}}).filter(e=>!!e):[]}function We(n){return xn(n).trim()||"Non compilato"}function QN(){const{role:n,user:e}=ra(),{showError:t,showSuccess:i}=Wc(),[o,l]=Q.useState([]),[h,d]=Q.useState([]),[m,y]=Q.useState(!1),[v,I]=Q.useState(null),[S,k]=Q.useState(!1),[z,q]=Q.useState(null),[O,$]=Q.useState(""),[te,ie]=Q.useState(""),[oe,Ie]=Q.useState([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]),[de,D]=Q.useState(""),[A,P]=Q.useState("client"),x=h.find(X=>X.id===O)??h.find(X=>X.clientId===O);Q.useEffect(()=>{async function X(){if(!O){I(null);return}try{const J=await kN(O,"onboarding");I(J.data()??null)}catch{I(null)}}X()},[O]),Q.useEffect(()=>{if(!O)return;if(!x){ie(""),Ie([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]);return}ie(x.title??"");const X=KN(x.exercises).filter(J=>J.name.trim().length>0);Ie(X.length>0?X:[{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])},[O,x==null?void 0:x.id]);async function L(){if(n){y(!0);try{const b=(await PN()).docs.map(W=>({id:W.id,...W.data()})).filter(W=>W.id!==(e==null?void 0:e.uid)).filter(W=>{const ce=xn(W.role).toLowerCase(),Ae=xn(W.requestedRole).toLowerCase();return ce==="client"||Ae==="client"||W.onboardingCompleted===!0}).sort((W,ce)=>{const Ae=xn(W.displayName||W.email||W.id).toLowerCase(),Re=xn(ce.displayName||ce.email||ce.id).toLowerCase();return Ae.localeCompare(Re)});l(b),!O&&b[0]&&$(m_(b[0]));try{const W=await C0(n);d(W.docs.map(ce=>({id:ce.id,...ce.data()})))}catch(W){d([]),t(fr(W))}}catch(X){console.error("Coach action failed:",X),t(fr(X))}finally{y(!1)}}}Q.useEffect(()=>{L()},[n,e==null?void 0:e.uid]);async function M(X,J){y(!0);try{await X(),i(J),await L()}catch(b){t(fr(b))}finally{y(!1)}}function C(){Ie(X=>[...X,{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])}function $e(X){Ie(J=>J.length<=1?J:J.filter((b,W)=>W!==X))}function qe(X,J){Ie(b=>b.map((W,ce)=>ce===X?{...W,...J}:W))}async function Be(){const X=oe.map(J=>({name:J.name.trim(),sets:Number(J.sets)||0,reps:J.reps.trim(),weight:J.weight.trim(),mediaUrl:J.mediaUrl.trim()})).filter(J=>J.name.length>0);if(X.length===0){t("Aggiungi almeno un esercizio con nome.");return}x?await M(()=>DN(x.id,{title:te,status:"active",exercises:X}),"Scheda aggiornata con successo."):await M(()=>xN({clientId:O,title:te,status:"active",exercises:X}),"Scheda creata e subito visibile al cliente."),k(!1)}function Pe(){if(!O){t("Seleziona prima un cliente.");return}if(!te.trim()){t("Inserisci un titolo per la scheda.");return}k(!0)}async function re(X,J){if(J){if(!J.type.startsWith("image/")){t("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!O){t("Seleziona prima un cliente.");return}q(X);try{const b=await bN(O,J);qe(X,{mediaUrl:b}),i("Media caricato con successo.")}catch(b){console.error("Media upload failed:",b),t(fr(b))}finally{q(null)}}}return E.jsxs(k0,{role:n==="trainer"?"trainer":"admin",subtitle:"Gestisci clienti, programmi e appuntamenti da un unico posto.",title:"Area Coach",children:[E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Crea scheda cliente"}),E.jsxs("label",{children:["Clienti registrati",E.jsxs("select",{value:O,onChange:X=>$(X.target.value),children:[o.length===0?E.jsx("option",{value:"",children:"Nessun cliente disponibile"}):null,o.map(X=>E.jsx("option",{value:m_(X),children:xn(X.displayName).trim()||xn(X.email)||X.id},X.id))]})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void L(),children:"Aggiorna lista clienti"}),E.jsxs("label",{children:["Titolo programma",E.jsx("input",{value:te,onChange:X=>ie(X.target.value),placeholder:"Forza 4 settimane"})]}),E.jsx("p",{className:"hint",children:x?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:"Informazioni del cliente"}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Anagrafica"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Nome:"})," ",We(v==null?void 0:v.fullName)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Et:"})," ",We(v==null?void 0:v.age)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Sesso:"})," ",We(v==null?void 0:v.sex)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Email:"})," ",We(v==null?void 0:v.email)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Telefono:"})," ",We(v==null?void 0:v.phone)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Come ci ha conosciuto:"})," ",We(v==null?void 0:v.discoverySource)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Stato fisico e allenamento"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altezza:"})," ",We(v==null?void 0:v.heightCm)," cm"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Peso:"})," ",We(v==null?void 0:v.weightKg)," kg"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Esperienza programmi:"})," ",We((v==null?void 0:v.pastProgram)||(v==null?void 0:v.experienceLevel))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti settimanali:"})," ",We((v==null?void 0:v.trainingFrequency)||(v==null?void 0:v.trainingDaysPerWeek))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Durata sessione:"})," ",We(v==null?void 0:v.workoutDuration)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Luogo allenamento:"})," ",We(v==null?void 0:v.workoutLocation)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Attrezzatura:"})," ",We(v==null?void 0:v.equipment)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti svolti:"})," ",We(v==null?void 0:v.trainingTypeHistory)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Infortuni/problemi:"})," ",We(v==null?void 0:v.hasInjuries)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Dettagli infortuni:"})," ",We(v==null?void 0:v.injuryDetails)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Obiettivi"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Obiettivo principale:"})," ",We((v==null?void 0:v.objectivePrimary)||(v==null?void 0:v.goal))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Perch:"})," ",We(v==null?void 0:v.objectiveReason)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Timeline risultati:"})," ",We(v==null?void 0:v.expectedTimeline)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",We((v==null?void 0:v.whatBlockedSoFar)||(v==null?void 0:v.notes))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",We(v==null?void 0:v.oneThingToImprove)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Importanza obiettivo:"})," ",We(v==null?void 0:v.importanceScore)," / 10"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Rischio se non cambia:"})," ",We(v==null?void 0:v.riskIfNoChange)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Supporto e decisione"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Supporto preferito:"})," ",We(v==null?void 0:v.supportPreference)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altro supporto:"})," ",We(v==null?void 0:v.supportPreferenceOther)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Fascia investimento:"})," ",We(v==null?void 0:v.investmentRange)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Disponibilit a partire:"})," ",We(v==null?void 0:v.readiness)]})]})]}),E.jsx("button",{className:"btn",disabled:!O||!te||m,onClick:Pe,type:"button",children:x?"Modifica scheda":"Crea scheda"})]}),S?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:x?"Modifica scheda":"Compila la scheda"}),E.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),oe.map((X,J)=>E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[E.jsxs("h2",{children:["Esercizio ",J+1]}),E.jsxs("label",{children:["Nome esercizio",E.jsx("input",{value:X.name,onChange:b=>qe(J,{name:b.target.value}),placeholder:"Es. Squat bilanciere"})]}),E.jsxs("label",{children:["Numero serie",E.jsx("input",{type:"number",min:1,value:X.sets,onChange:b=>qe(J,{sets:Number(b.target.value)})})]}),E.jsxs("label",{children:["Ripetizioni",E.jsx("input",{value:X.reps,onChange:b=>qe(J,{reps:b.target.value}),placeholder:"Es. 8-10"})]}),E.jsxs("label",{children:["Peso",E.jsx("input",{value:X.weight,onChange:b=>qe(J,{weight:b.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),E.jsxs("label",{children:["URL video (YouTube o link diretto)",E.jsx("input",{value:X.mediaUrl,onChange:b=>qe(J,{mediaUrl:b.target.value}),placeholder:"https://..."})]}),E.jsxs("label",{children:["Oppure carica un'immagine",E.jsx("input",{type:"file",accept:"image/*",onChange:b=>{var W;return void re(J,((W=b.target.files)==null?void 0:W[0])??null)},disabled:z===J})]}),z===J?E.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>$e(J),children:"Rimuovi esercizio"})]},`exercise-${J}`)),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:C,children:"Aggiungi esercizio"}),E.jsx("button",{className:"btn",type:"button",disabled:m,onClick:()=>void Be(),children:x?"Salva modifiche":"Salva scheda tecnica"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>k(!1),children:"Chiudi"})]})}):null,n==="admin"?E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Gestione accessi"}),E.jsxs("label",{children:["Codice utente",E.jsx("input",{value:de,onChange:X=>D(X.target.value),placeholder:"Inserisci il codice utente"})]}),E.jsxs("label",{children:["Profilo accesso",E.jsxs("select",{value:A,onChange:X=>P(X.target.value),children:[E.jsx("option",{value:"admin",children:"Admin"}),E.jsx("option",{value:"trainer",children:"Coach"}),E.jsx("option",{value:"client",children:"Cliente"})]})]}),E.jsx("button",{className:"btn",disabled:!de||m,onClick:()=>void M(()=>RN(de,A),"Accesso aggiornato."),type:"button",children:"Aggiorna accesso"})]}):null,E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Panoramica"}),E.jsxs("p",{className:"hint",children:["Clienti registrati: ",o.length]}),E.jsxs("p",{className:"hint",children:["Programmi creati: ",h.length]}),E.jsx("ul",{className:"list",children:h.slice(0,5).map(X=>{var J;return E.jsxs("li",{children:[E.jsx("strong",{children:X.title}),"  ",((J=X.exercises)==null?void 0:J.length)??0," esercizi  cliente ",X.clientId]},X.id)})})]}),m?E.jsx("p",{className:"message",children:"Caricamento..."}):null]})}const dc=5;function XN(){const{user:n,role:e}=ra(),t=Al(),{showError:i,showSuccess:o}=Wc(),[l,h]=Q.useState(0),[d,m]=Q.useState({fullName:(n==null?void 0:n.displayName)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:""}),[y,v]=Q.useState(!1);if(!n)return E.jsx(Dn,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return E.jsx(Dn,{to:"/app/coach",replace:!0});const I=n.email??"",S=Q.useMemo(()=>Math.round((l+1)/dc*100),[l]);function k($,te){m(ie=>({...ie,[$]:te}))}function z($){return $===0?[d.age.trim()?"":"Inserisci et.",d.sex.trim()?"":"Inserisci sesso.",d.email.trim()?"":"Inserisci e-mail.",d.phone.trim()?"":"Inserisci numero di telefono.",d.discoverySource.trim()?"":"Inserisci come ci hai conosciuto."].filter(Boolean):$===1?[d.heightCm.trim()?"":"Inserisci altezza.",d.weightKg.trim()?"":"Inserisci peso attuale.",d.pastProgram.trim()?"":"Seleziona esperienza programmi precedenti.",d.trainingFrequency.trim()?"":"Seleziona frequenza allenamento.",d.workoutDuration.trim()?"":"Seleziona durata allenamento.",d.workoutLocation.trim()?"":"Seleziona dove ti alleni.",d.equipment.trim()?"":"Seleziona attrezzatura disponibile.",d.trainingTypeHistory.trim()?"":"Descrivi tipo di allenamento fatto.",d.hasInjuries.trim()?"":"Indica se hai infortuni/problemi fisici."].filter(Boolean):$===2?[d.objectivePrimary.trim()?"":"Seleziona obiettivo principale.",d.objectiveReason.trim()?"":"Scrivi perch vuoi raggiungere lobiettivo.",d.expectedTimeline.trim()?"":"Scrivi in quanto tempo vuoi vedere risultati."].filter(Boolean):$===3?[d.supportPreference?"":"Seleziona supporto motivazionale preferito.",d.investmentRange.trim()?"":"Seleziona fascia investimento.",d.whatBlockedSoFar.trim()?"":"Spiega cosa ti ha bloccato finora.",d.oneThingToImprove.trim()?"":"Scrivi cosa vorresti migliorare in 3 mesi.",d.importanceScore.trim()?"":"Seleziona importanza obiettivo.",d.riskIfNoChange.trim()?"":"Scrivi cosa rischi se non cambi nulla."].filter(Boolean):$===4?[d.readiness?"":"Seleziona il livello di disponibilit a iniziare."].filter(Boolean):[]}function q(){const $=z(l);if($.length>0){i($[0]);return}h(te=>Math.min(te+1,dc-1))}async function O(){const $=z(l);if($.length>0){i($[0]);return}v(!0);try{await qc({displayName:d.fullName.trim()||(n==null?void 0:n.displayName)||"",email:I,role:"client",requestedRole:"client",onboardingStatus:"completed",onboardingCompleted:!0,onboardingUpdatedAt:new Date().toISOString()}),await CN("onboarding",{fullName:d.fullName.trim(),age:d.age.trim(),sex:d.sex.trim(),email:d.email.trim(),phone:d.phone.trim(),discoverySource:d.discoverySource.trim(),heightCm:d.heightCm.trim(),weightKg:d.weightKg.trim(),pastProgram:d.pastProgram,trainingFrequency:d.trainingFrequency,workoutDuration:d.workoutDuration,workoutLocation:d.workoutLocation,equipment:d.equipment.trim(),trainingTypeHistory:d.trainingTypeHistory.trim(),hasInjuries:d.hasInjuries,injuryDetails:d.injuryDetails.trim(),objectivePrimary:d.objectivePrimary.trim(),objectiveReason:d.objectiveReason.trim(),expectedTimeline:d.expectedTimeline.trim(),supportPreference:d.supportPreference,supportPreferenceOther:d.supportPreferenceOther.trim(),investmentRange:d.investmentRange,whatBlockedSoFar:d.whatBlockedSoFar.trim(),oneThingToImprove:d.oneThingToImprove.trim(),importanceScore:Number(d.importanceScore||0),riskIfNoChange:d.riskIfNoChange.trim(),readiness:d.readiness,goal:d.objectivePrimary.trim(),experienceLevel:d.pastProgram.trim(),trainingDaysPerWeek:d.trainingFrequency.includes("1-2")?2:d.trainingFrequency.includes("3-4")?4:5,notes:d.whatBlockedSoFar.trim()}),o("Perfetto, profilo salvato."),t("/app/client",{replace:!0})}catch(te){i(fr(te))}finally{v(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),E.jsx("h1",{children:"Partiamo dal tuo percorso"}),E.jsxs("p",{className:"hero-sub",children:["Step ",l+1," di ",dc,"  Completamento ",S,"%"]}),E.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:E.jsx("div",{className:"onboarding-progress-bar",style:{width:`${S}%`}})}),l===0?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Nome e cognome",E.jsx("input",{value:d.fullName,onChange:$=>k("fullName",$.target.value),placeholder:"Nome e cognome"})]}),E.jsxs("label",{children:["Et *",E.jsx("input",{value:d.age,onChange:$=>k("age",$.target.value),type:"number",min:12,max:99,placeholder:"Es. 28"})]}),E.jsxs("label",{children:["Sesso *",E.jsx("input",{value:d.sex,onChange:$=>k("sex",$.target.value),placeholder:"Es. Uomo, Donna, Altro"})]}),E.jsxs("label",{children:["E-mail *",E.jsx("input",{value:d.email,onChange:$=>k("email",$.target.value),type:"email"})]}),E.jsxs("label",{children:["Numero di telefono *",E.jsx("input",{value:d.phone,onChange:$=>k("phone",$.target.value),placeholder:"+39..."})]}),E.jsxs("label",{children:["Come mi hai conosciuto? *",E.jsx("input",{value:d.discoverySource,onChange:$=>k("discoverySource",$.target.value),placeholder:"Instagram, passaparola, ecc."})]})]}):null,l===1?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Altezza (cm) *",E.jsx("input",{value:d.heightCm,onChange:$=>k("heightCm",$.target.value),type:"number",min:100,max:250})]}),E.jsxs("label",{children:["Peso attuale (kg) *",E.jsx("input",{value:d.weightKg,onChange:$=>k("weightKg",$.target.value),type:"number",min:30,max:250})]}),E.jsxs("label",{children:["Hai mai seguito un programma di allenamento? *",E.jsxs("select",{value:d.pastProgram,onChange:$=>k("pastProgram",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si da solo/a",children:"Si da solo/a"}),E.jsx("option",{value:"Si con un coach fisico",children:"Si con un coach fisico"}),E.jsx("option",{value:"Si con coach online",children:"Si con coach online"}),E.jsx("option",{value:"No",children:"No"})]})]}),E.jsxs("label",{children:["Quante volte ti alleni a settimana? *",E.jsxs("select",{value:d.trainingFrequency,onChange:$=>k("trainingFrequency",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"1-2 a settimana",children:"1-2 a settimana"}),E.jsx("option",{value:"3-4 a settimana",children:"3-4 a settimana"}),E.jsx("option",{value:"5+ a settimana",children:"5+ a settimana"})]})]}),E.jsxs("label",{children:["Quanto tempo riesci a dedicare ad ogni allenamento? *",E.jsxs("select",{value:d.workoutDuration,onChange:$=>k("workoutDuration",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Meno di 30 minuti",children:"Meno di 30 minuti"}),E.jsx("option",{value:"30-45 minuti",children:"30-45 minuti"}),E.jsx("option",{value:"1 ora",children:"1 ora"}),E.jsx("option",{value:"Pi di 1 ora",children:"Pi di 1 ora"})]})]}),E.jsxs("label",{children:["Dove ti allenerai? *",E.jsxs("select",{value:d.workoutLocation,onChange:$=>k("workoutLocation",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"In palestra",children:"In palestra"}),E.jsx("option",{value:"A casa con attrezzi",children:"A casa con attrezzi"}),E.jsx("option",{value:"A corpo libero",children:"A corpo libero"}),E.jsx("option",{value:"All'aperto",children:"All'aperto"})]})]}),E.jsxs("label",{children:["Che tipo di attrezzi hai a disposizione? *",E.jsx("input",{value:d.equipment,onChange:$=>k("equipment",$.target.value),placeholder:"Es. manubri, elastici, sbarra..."})]}),E.jsxs("label",{children:["Che tipo di allenamento fai o hai fatto? *",E.jsx("textarea",{value:d.trainingTypeHistory,onChange:$=>k("trainingTypeHistory",$.target.value),placeholder:"Es. sala pesi, corsa, functional..."})]}),E.jsxs("label",{children:["Hai problemi fisici o infortuni? *",E.jsxs("select",{value:d.hasInjuries,onChange:$=>k("hasInjuries",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si",children:"Si"}),E.jsx("option",{value:"No",children:"No"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),d.hasInjuries==="Si"||d.hasInjuries==="Altro"?E.jsxs("label",{children:["Dettagli infortunio/problema",E.jsx("textarea",{value:d.injuryDetails,onChange:$=>k("injuryDetails",$.target.value)})]}):null]}):null,l===2?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Obiettivo principale *",E.jsxs("select",{value:d.objectivePrimary,onChange:$=>k("objectivePrimary",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Tonificazione",children:"Tonificazione"}),E.jsx("option",{value:"Dimagrimento",children:"Dimagrimento"}),E.jsx("option",{value:"Massa muscolare",children:"Massa muscolare"}),E.jsx("option",{value:"Performance",children:"Performance"}),E.jsx("option",{value:"Calisthenics skills",children:"Calisthenics skills"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),E.jsxs("label",{children:["Perch vuoi raggiungere questo obiettivo? *",E.jsx("textarea",{value:d.objectiveReason,onChange:$=>k("objectiveReason",$.target.value)})]}),E.jsxs("label",{children:["In quanto tempo vorresti vedere risultati? *",E.jsx("input",{value:d.expectedTimeline,onChange:$=>k("expectedTimeline",$.target.value),placeholder:"Es. 3 mesi"})]})]}):null,l===3?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Che tipo di supporto ti motiva? *",E.jsxs("select",{value:d.supportPreference,onChange:$=>k("supportPreference",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"call_settimanale",children:"Call settimanale con feedback personalizzato"}),E.jsx("option",{value:"messaggio_motivazionale",children:"Messaggio motivazionale 1-2 volte a settimana"}),E.jsx("option",{value:"checkin_progressi",children:"Check-in di progressi (ogni fine settimana)"}),E.jsx("option",{value:"contatto_libero",children:"Possibilit di scrivere al coach in qualsiasi momento"}),E.jsx("option",{value:"consigli_periodici",children:"Consigli periodici"}),E.jsx("option",{value:"challenge_settimanali",children:"Challenge settimanali per motivarmi"}),E.jsx("option",{value:"autonomo",children:"Preferisco essere autonomo senza troppo contatto"}),E.jsx("option",{value:"other",children:"Altro"})]})]}),d.supportPreference==="other"?E.jsxs("label",{children:["Specifica altro supporto",E.jsx("input",{value:d.supportPreferenceOther,onChange:$=>k("supportPreferenceOther",$.target.value)})]}):null,E.jsxs("label",{children:["Fascia di investimento disponibile *",E.jsxs("select",{value:d.investmentRange,onChange:$=>k("investmentRange",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"fino a 100",children:"fino a 100"}),E.jsx("option",{value:"100-150",children:"100-150"}),E.jsx("option",{value:"150-250",children:"150-250"}),E.jsx("option",{value:"oltre 250",children:"Oltre 250"})]})]}),E.jsxs("label",{children:["Cosa ti ha bloccato fino ad oggi? *",E.jsx("textarea",{value:d.whatBlockedSoFar,onChange:$=>k("whatBlockedSoFar",$.target.value)})]}),E.jsxs("label",{children:["Se migliorassi una sola cosa nei prossimi 3 mesi, quale sarebbe? *",E.jsx("textarea",{value:d.oneThingToImprove,onChange:$=>k("oneThingToImprove",$.target.value)})]}),E.jsxs("label",{children:["Quanto  importante per te raggiungere questo obiettivo? (1-10) *",E.jsx("input",{value:d.importanceScore,onChange:$=>k("importanceScore",$.target.value),type:"number",min:1,max:10})]}),E.jsxs("label",{children:["Cosa rischi se non cambi nulla nei prossimi 3 mesi? *",E.jsx("textarea",{value:d.riskIfNoChange,onChange:$=>k("riskIfNoChange",$.target.value)})]})]}):null,l===4?E.jsxs("label",{children:["Sei pronto/a a iniziare un percorso personalizzato? *",E.jsxs("select",{value:d.readiness,onChange:$=>k("readiness",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"pronto",children:"Si sono pronto/a a investire su me stesso/a e partire"}),E.jsx("option",{value:"dubbio",children:"Si, ma ho ancora qualche dubbio e vorrei parlarne prima"}),E.jsx("option",{value:"non_pronto",children:"No, al momento non sono pronto/a"})]})]}):null,E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:l===0||y,onClick:()=>h($=>Math.max(0,$-1)),children:"Indietro"}),l<dc-1?E.jsx("button",{className:"btn",type:"button",disabled:y,onClick:q,children:"Continua"}):E.jsx("button",{className:"btn",disabled:y,type:"button",onClick:()=>void O(),children:y?"Salvataggio...":"Completa onboarding"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Il(),children:"Esci e cambia account"})]})})}function x0(){return E.jsx("main",{className:"page page-center",children:E.jsxs("div",{className:"card",children:[E.jsx("p",{className:"eyebrow",children:"Gym PT"}),E.jsx("h1",{children:"Caricamento in corso"})]})})}class JN extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Qualcosa non ha funzionato"}),E.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function g_({allow:n,children:e}){const{user:t,role:i,initializing:o}=ra();return o?E.jsx(x0,{}):t?i?n.includes(i)?e:E.jsx(Dn,{to:i==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:E.jsx(Dn,{to:"/onboarding",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function YN(){const{user:n,role:e,initializing:t}=ra();return t?E.jsx(x0,{}):n?e?E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):E.jsx(Dn,{to:"/app/client",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function ZN(){return E.jsx(JN,{children:E.jsxs(LI,{children:[E.jsx(Is,{path:"/",element:E.jsx(YN,{})}),E.jsx(Is,{path:"/auth",element:E.jsx($N,{})}),E.jsx(Is,{path:"/onboarding",element:E.jsx(XN,{})}),E.jsx(Is,{path:"/app/coach",element:E.jsx(g_,{allow:["admin","trainer"],children:E.jsx(QN,{})})}),E.jsx(Is,{path:"/app/client",element:E.jsx(g_,{allow:["client"],children:E.jsx(GN,{})})}),E.jsx(Is,{path:"*",element:E.jsx(Dn,{to:"/",replace:!0})})]})})}qT.createRoot(document.getElementById("root")).render(E.jsx(v_.StrictMode,{children:E.jsx(KI,{children:E.jsx($I,{children:E.jsx(ZN,{})})})}));
