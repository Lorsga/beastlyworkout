function sC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function B0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var np={exports:{}},Gl={},rp={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function oC(){if(Xy)return Qe;Xy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function C(B,U,fe){this.props=B,this.context=U,this.refs=R,this.updater=fe||A}C.prototype.isReactComponent={},C.prototype.setState=function(B,U){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,U,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=C.prototype;function Q(B,U,fe){this.props=B,this.context=U,this.refs=R,this.updater=fe||A}var G=Q.prototype=new $;G.constructor=Q,O(G,C.prototype),G.isPureReactComponent=!0;var ee=Array.isArray,X=Object.prototype.hasOwnProperty,re={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(B,U,fe){var ge,Pe={},le=null,Me=null;if(U!=null)for(ge in U.ref!==void 0&&(Me=U.ref),U.key!==void 0&&(le=""+U.key),U)X.call(U,ge)&&!k.hasOwnProperty(ge)&&(Pe[ge]=U[ge]);var De=arguments.length-2;if(De===1)Pe.children=fe;else if(1<De){for(var Ge=Array(De),Tt=0;Tt<De;Tt++)Ge[Tt]=arguments[Tt+2];Pe.children=Ge}if(B&&B.defaultProps)for(ge in De=B.defaultProps,De)Pe[ge]===void 0&&(Pe[ge]=De[ge]);return{$$typeof:n,type:B,key:le,ref:Me,props:Pe,_owner:re.current}}function N(B,U){return{$$typeof:n,type:B.type,key:U,ref:B.ref,props:B.props,_owner:B._owner}}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var U={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(fe){return U[fe]})}var L=/\/+/g;function x(B,U){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):U.toString(36)}function Fe(B,U,fe,ge,Pe){var le=typeof B;(le==="undefined"||le==="boolean")&&(B=null);var Me=!1;if(B===null)Me=!0;else switch(le){case"string":case"number":Me=!0;break;case"object":switch(B.$$typeof){case n:case e:Me=!0}}if(Me)return Me=B,Pe=Pe(Me),B=ge===""?"."+x(Me,0):ge,ee(Pe)?(fe="",B!=null&&(fe=B.replace(L,"$&/")+"/"),Fe(Pe,U,fe,"",function(Tt){return Tt})):Pe!=null&&(j(Pe)&&(Pe=N(Pe,fe+(!Pe.key||Me&&Me.key===Pe.key?"":(""+Pe.key).replace(L,"$&/")+"/")+B)),U.push(Pe)),1;if(Me=0,ge=ge===""?".":ge+":",ee(B))for(var De=0;De<B.length;De++){le=B[De];var Ge=ge+x(le,De);Me+=Fe(le,U,fe,Ge,Pe)}else if(Ge=w(B),typeof Ge=="function")for(B=Ge.call(B),De=0;!(le=B.next()).done;)le=le.value,Ge=ge+x(le,De++),Me+=Fe(le,U,fe,Ge,Pe);else if(le==="object")throw U=String(B),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Me}function Oe(B,U,fe){if(B==null)return B;var ge=[],Pe=0;return Fe(B,ge,"","",function(le){return U.call(fe,le,Pe++)}),ge}function Be(B){if(B._status===-1){var U=B._result;U=U(),U.then(function(fe){(B._status===0||B._status===-1)&&(B._status=1,B._result=fe)},function(fe){(B._status===0||B._status===-1)&&(B._status=2,B._result=fe)}),B._status===-1&&(B._status=0,B._result=U)}if(B._status===1)return B._result.default;throw B._result}var Ve={current:null},ae={transition:null},ye={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ae,ReactCurrentOwner:re};function he(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:Oe,forEach:function(B,U,fe){Oe(B,function(){U.apply(this,arguments)},fe)},count:function(B){var U=0;return Oe(B,function(){U++}),U},toArray:function(B){return Oe(B,function(U){return U})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Qe.Component=C,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=Q,Qe.StrictMode=r,Qe.Suspense=f,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Qe.act=he,Qe.cloneElement=function(B,U,fe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ge=O({},B.props),Pe=B.key,le=B.ref,Me=B._owner;if(U!=null){if(U.ref!==void 0&&(le=U.ref,Me=re.current),U.key!==void 0&&(Pe=""+U.key),B.type&&B.type.defaultProps)var De=B.type.defaultProps;for(Ge in U)X.call(U,Ge)&&!k.hasOwnProperty(Ge)&&(ge[Ge]=U[Ge]===void 0&&De!==void 0?De[Ge]:U[Ge])}var Ge=arguments.length-2;if(Ge===1)ge.children=fe;else if(1<Ge){De=Array(Ge);for(var Tt=0;Tt<Ge;Tt++)De[Tt]=arguments[Tt+2];ge.children=De}return{$$typeof:n,type:B.type,key:Pe,ref:le,props:ge,_owner:Me}},Qe.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Qe.createElement=P,Qe.createFactory=function(B){var U=P.bind(null,B);return U.type=B,U},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(B){return{$$typeof:d,render:B}},Qe.isValidElement=j,Qe.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:Be}},Qe.memo=function(B,U){return{$$typeof:m,type:B,compare:U===void 0?null:U}},Qe.startTransition=function(B){var U=ae.transition;ae.transition={};try{B()}finally{ae.transition=U}},Qe.unstable_act=he,Qe.useCallback=function(B,U){return Ve.current.useCallback(B,U)},Qe.useContext=function(B){return Ve.current.useContext(B)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(B){return Ve.current.useDeferredValue(B)},Qe.useEffect=function(B,U){return Ve.current.useEffect(B,U)},Qe.useId=function(){return Ve.current.useId()},Qe.useImperativeHandle=function(B,U,fe){return Ve.current.useImperativeHandle(B,U,fe)},Qe.useInsertionEffect=function(B,U){return Ve.current.useInsertionEffect(B,U)},Qe.useLayoutEffect=function(B,U){return Ve.current.useLayoutEffect(B,U)},Qe.useMemo=function(B,U){return Ve.current.useMemo(B,U)},Qe.useReducer=function(B,U,fe){return Ve.current.useReducer(B,U,fe)},Qe.useRef=function(B){return Ve.current.useRef(B)},Qe.useState=function(B){return Ve.current.useState(B)},Qe.useSyncExternalStore=function(B,U,fe){return Ve.current.useSyncExternalStore(B,U,fe)},Qe.useTransition=function(){return Ve.current.useTransition()},Qe.version="18.3.1",Qe}var Yy;function Im(){return Yy||(Yy=1,rp.exports=oC()),rp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function aC(){if(Jy)return Gl;Jy=1;var n=Im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,S={},w=null,A=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(A=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(S[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)S[_]===void 0&&(S[_]=f[_]);return{$$typeof:e,type:d,key:w,ref:A,props:S,_owner:s.current}}return Gl.Fragment=t,Gl.jsx=u,Gl.jsxs=u,Gl}var Zy;function lC(){return Zy||(Zy=1,np.exports=aC()),np.exports}var g=lC(),V=Im();const W0=B0(V),Vp=sC({__proto__:null,default:W0},[V]);var Wc={},ip={exports:{}},or={},sp={exports:{}},op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function uC(){return e_||(e_=1,(function(n){function e(ae,ye){var he=ae.length;ae.push(ye);e:for(;0<he;){var B=he-1>>>1,U=ae[B];if(0<s(U,ye))ae[B]=ye,ae[he]=U,he=B;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ye=ae[0],he=ae.pop();if(he!==ye){ae[0]=he;e:for(var B=0,U=ae.length,fe=U>>>1;B<fe;){var ge=2*(B+1)-1,Pe=ae[ge],le=ge+1,Me=ae[le];if(0>s(Pe,he))le<U&&0>s(Me,Pe)?(ae[B]=Me,ae[le]=he,B=le):(ae[B]=Pe,ae[ge]=he,B=ge);else if(le<U&&0>s(Me,he))ae[B]=Me,ae[le]=he,B=le;else break e}}return ye}function s(ae,ye){var he=ae.sortIndex-ye.sortIndex;return he!==0?he:ae.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,S=null,w=3,A=!1,O=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ae){for(var ye=t(m);ye!==null;){if(ye.callback===null)r(m);else if(ye.startTime<=ae)r(m),ye.sortIndex=ye.expirationTime,e(f,ye);else break;ye=t(m)}}function ee(ae){if(R=!1,G(ae),!O)if(t(f)!==null)O=!0,Be(X);else{var ye=t(m);ye!==null&&Ve(ee,ye.startTime-ae)}}function X(ae,ye){O=!1,R&&(R=!1,$(P),P=-1),A=!0;var he=w;try{for(G(ye),S=t(f);S!==null&&(!(S.expirationTime>ye)||ae&&!M());){var B=S.callback;if(typeof B=="function"){S.callback=null,w=S.priorityLevel;var U=B(S.expirationTime<=ye);ye=n.unstable_now(),typeof U=="function"?S.callback=U:S===t(f)&&r(f),G(ye)}else r(f);S=t(f)}if(S!==null)var fe=!0;else{var ge=t(m);ge!==null&&Ve(ee,ge.startTime-ye),fe=!1}return fe}finally{S=null,w=he,A=!1}}var re=!1,k=null,P=-1,N=5,j=-1;function M(){return!(n.unstable_now()-j<N)}function L(){if(k!==null){var ae=n.unstable_now();j=ae;var ye=!0;try{ye=k(!0,ae)}finally{ye?x():(re=!1,k=null)}}else re=!1}var x;if(typeof Q=="function")x=function(){Q(L)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Oe=Fe.port2;Fe.port1.onmessage=L,x=function(){Oe.postMessage(null)}}else x=function(){C(L,0)};function Be(ae){k=ae,re||(re=!0,x())}function Ve(ae,ye){P=C(function(){ae(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){O||A||(O=!0,Be(X))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(w){case 1:case 2:case 3:var ye=3;break;default:ye=w}var he=w;w=ye;try{return ae()}finally{w=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,ye){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=w;w=ae;try{return ye()}finally{w=he}},n.unstable_scheduleCallback=function(ae,ye,he){var B=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?B+he:B):he=B,ae){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=he+U,ae={id:_++,callback:ye,priorityLevel:ae,startTime:he,expirationTime:U,sortIndex:-1},he>B?(ae.sortIndex=he,e(m,ae),t(f)===null&&ae===t(m)&&(R?($(P),P=-1):R=!0,Ve(ee,he-B))):(ae.sortIndex=U,e(f,ae),O||A||(O=!0,Be(X))),ae},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ae){var ye=w;return function(){var he=w;w=ye;try{return ae.apply(this,arguments)}finally{w=he}}}})(op)),op}var t_;function cC(){return t_||(t_=1,sp.exports=uC()),sp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function hC(){if(n_)return or;n_=1;var n=Im(),e=cC();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},S={};function w(i){return f.call(S,i)?!0:f.call(_,i)?!1:m.test(i)?S[i]=!0:(_[i]=!0,!1)}function A(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,l,h){if(o===null||typeof o>"u"||A(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function R(i,o,l,h,p,y,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=T}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new R(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,l,h){var p=C.hasOwnProperty(o)?C[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,l,p,h)&&(l=null),h||p===null?w(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),re=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ye(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,B;function U(i){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var fe=!1;function ge(i,o){if(!i||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var h=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){h=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){h=Y}i()}}catch(Y){if(Y&&h&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,D=y.length-1;1<=T&&0<=D&&p[T]!==y[D];)D--;for(;1<=T&&0<=D;T--,D--)if(p[T]!==y[D]){if(T!==1||D!==1)do if(T--,D--,0>D||p[T]!==y[D]){var F=`
`+p[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=D);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?U(i):""}function Pe(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=ge(i.type,!1),i;case 11:return i=ge(i.type.render,!1),i;case 1:return i=ge(i.type,!0),i;default:return""}}function le(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case re:return"Portal";case N:return"Profiler";case P:return"StrictMode";case x:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Oe:return o=i.displayName||null,o!==null?o:le(i.type)||"Memo";case Be:o=i._payload,i=i._init;try{return le(i(o))}catch{}}return null}function Me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(o);case 8:return o===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function De(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Tt(i){var o=Ge(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ie(i){i._valueTracker||(i._valueTracker=Tt(i))}function qe(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Ge(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function st(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function rt(i,o){var l=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function at(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=De(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function xt(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function wt(i,o){xt(i,o);var l=De(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?sn(i,o.type,l):o.hasOwnProperty("defaultValue")&&sn(i,o.type,De(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function lt(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function sn(i,o,l){(o!=="number"||st(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var pt=Array.isArray;function Lt(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+De(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function et(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ut(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(pt(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:De(l)}}function zr(i,o){var l=De(o.value),h=De(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function $r(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ir,Br=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ir.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function dr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},br=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(i){br.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Wn[o]=Wn[i]})});function Cr(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Wn.hasOwnProperty(i)&&Wn[i]?(""+o).trim():o+"px"}function Ui(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Cr(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Hn=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wr(i,o){if(o){if(Hn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function zi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Hr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pr=null,Dn=null,wn=null;function pi(i){if(i=Ol(i)){if(typeof Pr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=sc(o),Pr(i.stateNode,i.type,o))}}function qn(i){Dn?wn?wn.push(i):wn=[i]:Dn=i}function Es(){if(Dn){var i=Dn,o=wn;if(wn=Dn=null,pi(i),o)for(i=0;i<o.length;i++)pi(o[i])}}function qr(i,o){return i(o)}function Ss(){}var Ar=!1;function on(i,o,l){if(Ar)return i(o,l);Ar=!0;try{return qr(i,o,l)}finally{Ar=!1,(Dn!==null||wn!==null)&&(Ss(),Es())}}function Ye(i,o){var l=i.stateNode;if(l===null)return null;var h=sc(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var We=!1;if(d)try{var En={};Object.defineProperty(En,"passive",{get:function(){We=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{We=!1}function Nt(i,o,l,h,p,y,T,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(oe){this.onError(oe)}}var mi=!1,Kn=null,Gn=!1,Kr=null,Zo={onError:function(i){mi=!0,Kn=i}};function Ts(i,o,l,h,p,y,T,D,F){mi=!1,Kn=null,Nt.apply(Zo,arguments)}function ea(i,o,l,h,p,y,T,D,F){if(Ts.apply(this,arguments),mi){if(mi){var Y=Kn;mi=!1,Kn=null}else throw Error(t(198));Gn||(Gn=!0,Kr=Y)}}function Qn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Bi(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xn(i){if(Qn(i)!==i)throw Error(t(188))}function fo(i){var o=i.alternate;if(!o){if(o=Qn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Xn(p),i;if(y===h)return Xn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,D=p.child;D;){if(D===l){T=!0,l=p,h=y;break}if(D===h){T=!0,h=p,l=y;break}D=D.sibling}if(!T){for(D=y.child;D;){if(D===l){T=!0,l=y,h=p;break}if(D===h){T=!0,h=y,l=p;break}D=D.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Wi(i){return i=fo(i),i!==null?Hi(i):null}function Hi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Hi(i);if(o!==null)return o;i=i.sibling}return null}var Vn=e.unstable_scheduleCallback,po=e.unstable_cancelCallback,ta=e.unstable_shouldYield,vl=e.unstable_requestPaint,He=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,Gr=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,mo=e.unstable_LowPriority,go=e.unstable_IdlePriority,Ki=null,Mn=null;function na(i){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Ki,i,void 0,(i.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:yo,vo=Math.log,ra=Math.LN2;function yo(i){return i>>>=0,i===0?32:31-(vo(i)/ra|0)|0}var Is=64,bs=4194304;function gi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Gi(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,T=l&268435455;if(T!==0){var D=T&~p;D!==0?h=gi(D):(y&=T,y!==0&&(h=gi(y)))}else T=l&~p,T!==0?h=gi(T):y!==0&&(h=gi(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-dn(o),p=1<<l,h|=i[l],o&=~p;return h}function yl(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var T=31-dn(y),D=1<<T,F=p[T];F===-1?((D&l)===0||(D&h)!==0)&&(p[T]=yl(D,o)):F<=o&&(i.expiredLanes|=D),y&=~D}}function Ln(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Xr(){var i=Is;return Is<<=1,(Is&4194240)===0&&(Is=64),i}function vi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Yr(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-dn(o),i[o]=l}function vt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-dn(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function yi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-dn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var Xe=0;function _i(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var I,q,Z,Ee,Ue,jn=!1,$t=[],Zt=null,fr=null,Jn=null,Jr=new Map,Rr=new Map,wi=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $u(i,o){switch(i){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Jr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(o.pointerId)}}function Zn(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Ol(o),o!==null&&q(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Od(i,o,l,h,p){switch(o){case"focusin":return Zt=Zn(Zt,i,o,l,h,p),!0;case"dragenter":return fr=Zn(fr,i,o,l,h,p),!0;case"mouseover":return Jn=Zn(Jn,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return Jr.set(y,Zn(Jr.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Rr.set(y,Zn(Rr.get(y)||null,i,o,l,h,p)),!0}return!1}function Bu(i){var o=To(i.target);if(o!==null){var l=Qn(o);if(l!==null){if(o=l.tag,o===13){if(o=Bi(l),o!==null){i.blockedOn=o,Ue(i.priority,function(){Z(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=ia(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);$i=h,l.target.dispatchEvent(h),$i=null}else return o=Ol(l),o!==null&&q(o),i.blockedOn=l,!1;o.shift()}return!0}function _o(i,o,l){Qi(i)&&l.delete(o)}function Wu(){jn=!1,Zt!==null&&Qi(Zt)&&(Zt=null),fr!==null&&Qi(fr)&&(fr=null),Jn!==null&&Qi(Jn)&&(Jn=null),Jr.forEach(_o),Rr.forEach(_o)}function Zr(i,o){i.blockedOn===o&&(i.blockedOn=null,jn||(jn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wu)))}function ei(i){function o(p){return Zr(p,i)}if(0<$t.length){Zr($t[0],i);for(var l=1;l<$t.length;l++){var h=$t[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Zt!==null&&Zr(Zt,i),fr!==null&&Zr(fr,i),Jn!==null&&Zr(Jn,i),Jr.forEach(o),Rr.forEach(o),l=0;l<wi.length;l++)h=wi[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<wi.length&&(l=wi[0],l.blockedOn===null);)Bu(l),l.blockedOn===null&&wi.shift()}var Xi=ee.ReactCurrentBatchConfig,Cs=!0;function At(i,o,l,h){var p=Xe,y=Xi.transition;Xi.transition=null;try{Xe=1,_l(i,o,l,h)}finally{Xe=p,Xi.transition=y}}function Dd(i,o,l,h){var p=Xe,y=Xi.transition;Xi.transition=null;try{Xe=4,_l(i,o,l,h)}finally{Xe=p,Xi.transition=y}}function _l(i,o,l,h){if(Cs){var p=ia(i,o,l,h);if(p===null)Hd(i,o,h,wo,l),$u(i,h);else if(Od(p,i,o,l,h))h.stopPropagation();else if($u(i,h),o&4&&-1<Nd.indexOf(i)){for(;p!==null;){var y=Ol(p);if(y!==null&&I(y),y=ia(i,o,l,h),y===null&&Hd(i,o,h,wo,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Hd(i,o,h,null,l)}}var wo=null;function ia(i,o,l,h){if(wo=null,i=Hr(h),i=To(i),i!==null)if(o=Qn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Bi(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return wo=i,null}function wl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gt()){case qi:return 1;case Gr:return 4;case Yn:case mo:return 16;case go:return 536870912;default:return 16}default:return 16}}var pr=null,sa=null,er=null;function El(){if(er)return er;var i,o=sa,l=o.length,h,p="value"in pr?pr.value:pr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var T=l-i;for(h=1;h<=T&&o[l-h]===p[y-h];h++);return er=p.slice(i,1<h?1-h:void 0)}function oa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ei(){return!0}function Sl(){return!1}function fn(i){function o(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ei:Sl,this.isPropagationStopped=Sl,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),o}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=fn(ti),Si=he({},ti,{view:0,detail:0}),Vd=fn(Si),la,Yi,Ps,Eo=he({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ps&&(Ps&&i.type==="mousemove"?(la=i.screenX-Ps.screenX,Yi=i.screenY-Ps.screenY):Yi=la=0,Ps=i),la)},movementY:function(i){return"movementY"in i?i.movementY:Yi}}),ua=fn(Eo),Tl=he({},Eo,{dataTransfer:0}),Hu=fn(Tl),ca=he({},Si,{relatedTarget:0}),ha=fn(ca),qu=he({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Ji=fn(qu),Ku=he({},ti,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Gu=fn(Ku),Qu=he({},ti,{data:0}),Il=fn(Qu),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Xu[i])?!!o[i]:!1}function Ti(){return Yu}var c=he({},Si,{key:function(i){if(i.key){var o=da[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=oa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(i){return i.type==="keypress"?oa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?oa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=fn(c),E=he({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=fn(E),W=he({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),J=fn(W),de=he({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),yt=fn(de),en=he({},Eo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=fn(en),an=[9,13,27,32],qt=d&&"CompositionEvent"in window,kr=null;d&&"documentMode"in document&&(kr=document.documentMode);var mr=d&&"TextEvent"in window&&!kr,So=d&&(!qt||kr&&8<kr&&11>=kr),fa=" ",Wg=!1;function Hg(i,o){switch(i){case"keyup":return an.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pa=!1;function nb(i,o){switch(i){case"compositionend":return qg(o);case"keypress":return o.which!==32?null:(Wg=!0,fa);case"textInput":return i=o.data,i===fa&&Wg?null:i;default:return null}}function rb(i,o){if(pa)return i==="compositionend"||!qt&&Hg(i,o)?(i=El(),er=sa=pr=null,pa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return So&&o.locale!=="ko"?null:o.data;default:return null}}var ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ib[i.type]:o==="textarea"}function Gg(i,o,l,h){qn(h),o=nc(o,"onChange"),0<o.length&&(l=new aa("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var bl=null,Cl=null;function sb(i){dv(i,0)}function Ju(i){var o=_a(i);if(qe(o))return i}function ob(i,o){if(i==="change")return o}var Qg=!1;if(d){var Md;if(d){var Ld="oninput"in document;if(!Ld){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),Ld=typeof Xg.oninput=="function"}Md=Ld}else Md=!1;Qg=Md&&(!document.documentMode||9<document.documentMode)}function Yg(){bl&&(bl.detachEvent("onpropertychange",Jg),Cl=bl=null)}function Jg(i){if(i.propertyName==="value"&&Ju(Cl)){var o=[];Gg(o,Cl,i,Hr(i)),on(sb,o)}}function ab(i,o,l){i==="focusin"?(Yg(),bl=o,Cl=l,bl.attachEvent("onpropertychange",Jg)):i==="focusout"&&Yg()}function lb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(Cl)}function ub(i,o){if(i==="click")return Ju(o)}function cb(i,o){if(i==="input"||i==="change")return Ju(o)}function hb(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ni=typeof Object.is=="function"?Object.is:hb;function Pl(i,o){if(ni(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!ni(i[p],o[p]))return!1}return!0}function Zg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ev(i,o){var l=Zg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zg(l)}}function tv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?tv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function nv(){for(var i=window,o=st();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=st(i.document)}return o}function jd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function db(i){var o=nv(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&tv(l.ownerDocument.documentElement,l)){if(h!==null&&jd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=ev(l,y);var T=ev(l,h);p&&T&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var fb=d&&"documentMode"in document&&11>=document.documentMode,ma=null,Fd=null,Al=null,Ud=!1;function rv(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ud||ma==null||ma!==st(h)||(h=ma,"selectionStart"in h&&jd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Al&&Pl(Al,h)||(Al=h,h=nc(Fd,"onSelect"),0<h.length&&(o=new aa("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=ma)))}function Zu(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var ga={animationend:Zu("Animation","AnimationEnd"),animationiteration:Zu("Animation","AnimationIteration"),animationstart:Zu("Animation","AnimationStart"),transitionend:Zu("Transition","TransitionEnd")},zd={},iv={};d&&(iv=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function ec(i){if(zd[i])return zd[i];if(!ga[i])return i;var o=ga[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in iv)return zd[i]=o[l];return i}var sv=ec("animationend"),ov=ec("animationiteration"),av=ec("animationstart"),lv=ec("transitionend"),uv=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(i,o){uv.set(i,o),a(o,[i])}for(var $d=0;$d<cv.length;$d++){var Bd=cv[$d],pb=Bd.toLowerCase(),mb=Bd[0].toUpperCase()+Bd.slice(1);As(pb,"on"+mb)}As(sv,"onAnimationEnd"),As(ov,"onAnimationIteration"),As(av,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(lv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function hv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,ea(h,o,void 0,i),i.currentTarget=null}function dv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var T=h.length-1;0<=T;T--){var D=h[T],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==y&&p.isPropagationStopped())break e;hv(p,D,Y),y=F}else for(T=0;T<h.length;T++){if(D=h[T],F=D.instance,Y=D.currentTarget,D=D.listener,F!==y&&p.isPropagationStopped())break e;hv(p,D,Y),y=F}}}if(Gn)throw i=Kr,Gn=!1,Kr=null,i}function bt(i,o){var l=o[Yd];l===void 0&&(l=o[Yd]=new Set);var h=i+"__bubble";l.has(h)||(fv(o,i,2,!1),l.add(h))}function Wd(i,o,l){var h=0;o&&(h|=4),fv(l,i,h,o)}var tc="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[tc]){i[tc]=!0,r.forEach(function(l){l!=="selectionchange"&&(gb.has(l)||Wd(l,!1,i),Wd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[tc]||(o[tc]=!0,Wd("selectionchange",!1,o))}}function fv(i,o,l,h){switch(wl(o)){case 1:var p=At;break;case 4:p=Dd;break;default:p=_l}l=p.bind(null,o,l,i),p=void 0,!We||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Hd(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var D=h.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;T=T.return}for(;D!==null;){if(T=To(D),T===null)return;if(F=T.tag,F===5||F===6){h=y=T;continue e}D=D.parentNode}}h=h.return}on(function(){var Y=y,oe=Hr(l),ue=[];e:{var se=uv.get(i);if(se!==void 0){var me=aa,we=i;switch(i){case"keypress":if(oa(l)===0)break e;case"keydown":case"keyup":me=v;break;case"focusin":we="focus",me=ha;break;case"focusout":we="blur",me=ha;break;case"beforeblur":case"afterblur":me=ha;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=J;break;case sv:case ov:case av:me=Ji;break;case lv:me=yt;break;case"scroll":me=Vd;break;case"wheel":me=tt;break;case"copy":case"cut":case"paste":me=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=b}var Te=(o&4)!==0,Bt=!Te&&i==="scroll",H=Te?se!==null?se+"Capture":null:se;Te=[];for(var z=Y,K;z!==null;){K=z;var ce=K.stateNode;if(K.tag===5&&ce!==null&&(K=ce,H!==null&&(ce=Ye(z,H),ce!=null&&Te.push(xl(z,ce,K)))),Bt)break;z=z.return}0<Te.length&&(se=new me(se,we,null,l,oe),ue.push({event:se,listeners:Te}))}}if((o&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",se&&l!==$i&&(we=l.relatedTarget||l.fromElement)&&(To(we)||we[Zi]))break e;if((me||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,me?(we=l.relatedTarget||l.toElement,me=Y,we=we?To(we):null,we!==null&&(Bt=Qn(we),we!==Bt||we.tag!==5&&we.tag!==6)&&(we=null)):(me=null,we=Y),me!==we)){if(Te=ua,ce="onMouseLeave",H="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(Te=b,ce="onPointerLeave",H="onPointerEnter",z="pointer"),Bt=me==null?se:_a(me),K=we==null?se:_a(we),se=new Te(ce,z+"leave",me,l,oe),se.target=Bt,se.relatedTarget=K,ce=null,To(oe)===Y&&(Te=new Te(H,z+"enter",we,l,oe),Te.target=K,Te.relatedTarget=Bt,ce=Te),Bt=ce,me&&we)t:{for(Te=me,H=we,z=0,K=Te;K;K=va(K))z++;for(K=0,ce=H;ce;ce=va(ce))K++;for(;0<z-K;)Te=va(Te),z--;for(;0<K-z;)H=va(H),K--;for(;z--;){if(Te===H||H!==null&&Te===H.alternate)break t;Te=va(Te),H=va(H)}Te=null}else Te=null;me!==null&&pv(ue,se,me,Te,!1),we!==null&&Bt!==null&&pv(ue,Bt,we,Te,!0)}}e:{if(se=Y?_a(Y):window,me=se.nodeName&&se.nodeName.toLowerCase(),me==="select"||me==="input"&&se.type==="file")var Ie=ob;else if(Kg(se))if(Qg)Ie=cb;else{Ie=lb;var Ae=ab}else(me=se.nodeName)&&me.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ie=ub);if(Ie&&(Ie=Ie(i,Y))){Gg(ue,Ie,l,oe);break e}Ae&&Ae(i,se,Y),i==="focusout"&&(Ae=se._wrapperState)&&Ae.controlled&&se.type==="number"&&sn(se,"number",se.value)}switch(Ae=Y?_a(Y):window,i){case"focusin":(Kg(Ae)||Ae.contentEditable==="true")&&(ma=Ae,Fd=Y,Al=null);break;case"focusout":Al=Fd=ma=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,rv(ue,l,oe);break;case"selectionchange":if(fb)break;case"keydown":case"keyup":rv(ue,l,oe)}var Re;if(qt)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else pa?Hg(i,l)&&(Le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(So&&l.locale!=="ko"&&(pa||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&pa&&(Re=El()):(pr=oe,sa="value"in pr?pr.value:pr.textContent,pa=!0)),Ae=nc(Y,Le),0<Ae.length&&(Le=new Il(Le,i,null,l,oe),ue.push({event:Le,listeners:Ae}),Re?Le.data=Re:(Re=qg(l),Re!==null&&(Le.data=Re)))),(Re=mr?nb(i,l):rb(i,l))&&(Y=nc(Y,"onBeforeInput"),0<Y.length&&(oe=new Il("onBeforeInput","beforeinput",null,l,oe),ue.push({event:oe,listeners:Y}),oe.data=Re))}dv(ue,o)})}function xl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function nc(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Ye(i,l),y!=null&&h.unshift(xl(i,y,p)),y=Ye(i,o),y!=null&&h.push(xl(i,y,p))),i=i.return}return h}function va(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function pv(i,o,l,h,p){for(var y=o._reactName,T=[];l!==null&&l!==h;){var D=l,F=D.alternate,Y=D.stateNode;if(F!==null&&F===h)break;D.tag===5&&Y!==null&&(D=Y,p?(F=Ye(l,y),F!=null&&T.unshift(xl(l,F,D))):p||(F=Ye(l,y),F!=null&&T.push(xl(l,F,D)))),l=l.return}T.length!==0&&i.push({event:o,listeners:T})}var vb=/\r\n?/g,yb=/\u0000|\uFFFD/g;function mv(i){return(typeof i=="string"?i:""+i).replace(vb,`
`).replace(yb,"")}function rc(i,o,l){if(o=mv(o),mv(i)!==o&&l)throw Error(t(425))}function ic(){}var qd=null,Kd=null;function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,_b=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,wb=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(i){return gv.resolve(null).then(i).catch(Eb)}:Qd;function Eb(i){setTimeout(function(){throw i})}function Xd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),ei(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);ei(o)}function Rs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ya=Math.random().toString(36).slice(2),Ii="__reactFiber$"+ya,Nl="__reactProps$"+ya,Zi="__reactContainer$"+ya,Yd="__reactEvents$"+ya,Sb="__reactListeners$"+ya,Tb="__reactHandles$"+ya;function To(i){var o=i[Ii];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Zi]||l[Ii]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=vv(i);i!==null;){if(l=i[Ii])return l;i=vv(i)}return o}i=l,l=i.parentNode}return null}function Ol(i){return i=i[Ii]||i[Zi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function sc(i){return i[Nl]||null}var Jd=[],wa=-1;function ks(i){return{current:i}}function Ct(i){0>wa||(i.current=Jd[wa],Jd[wa]=null,wa--)}function Et(i,o){wa++,Jd[wa]=i.current,i.current=o}var xs={},Sn=ks(xs),tr=ks(!1),Io=xs;function Ea(i,o){var l=i.type.contextTypes;if(!l)return xs;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function nr(i){return i=i.childContextTypes,i!=null}function oc(){Ct(tr),Ct(Sn)}function yv(i,o,l){if(Sn.current!==xs)throw Error(t(168));Et(Sn,o),Et(tr,l)}function _v(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Me(i)||"Unknown",p));return he({},l,h)}function ac(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||xs,Io=Sn.current,Et(Sn,i),Et(tr,tr.current),!0}function wv(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=_v(i,o,Io),h.__reactInternalMemoizedMergedChildContext=i,Ct(tr),Ct(Sn),Et(Sn,i)):Ct(tr),Et(tr,l)}var es=null,lc=!1,Zd=!1;function Ev(i){es===null?es=[i]:es.push(i)}function Ib(i){lc=!0,Ev(i)}function Ns(){if(!Zd&&es!==null){Zd=!0;var i=0,o=Xe;try{var l=es;for(Xe=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}es=null,lc=!1}catch(p){throw es!==null&&(es=es.slice(i+1)),Vn(qi,Ns),p}finally{Xe=o,Zd=!1}}return null}var Sa=[],Ta=0,uc=null,cc=0,xr=[],Nr=0,bo=null,ts=1,ns="";function Co(i,o){Sa[Ta++]=cc,Sa[Ta++]=uc,uc=i,cc=o}function Sv(i,o,l){xr[Nr++]=ts,xr[Nr++]=ns,xr[Nr++]=bo,bo=i;var h=ts;i=ns;var p=32-dn(h)-1;h&=~(1<<p),l+=1;var y=32-dn(o)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,ts=1<<32-dn(o)+p|l<<p|h,ns=y+i}else ts=1<<y|l<<p|h,ns=i}function ef(i){i.return!==null&&(Co(i,1),Sv(i,1,0))}function tf(i){for(;i===uc;)uc=Sa[--Ta],Sa[Ta]=null,cc=Sa[--Ta],Sa[Ta]=null;for(;i===bo;)bo=xr[--Nr],xr[Nr]=null,ns=xr[--Nr],xr[Nr]=null,ts=xr[--Nr],xr[Nr]=null}var gr=null,vr=null,Rt=!1,ri=null;function Tv(i,o){var l=Mr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Iv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,gr=i,vr=Rs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,gr=i,vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=bo!==null?{id:ts,overflow:ns}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Mr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,gr=i,vr=null,!0):!1;default:return!1}}function nf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rf(i){if(Rt){var o=vr;if(o){var l=o;if(!Iv(i,o)){if(nf(i))throw Error(t(418));o=Rs(l.nextSibling);var h=gr;o&&Iv(i,o)?Tv(h,l):(i.flags=i.flags&-4097|2,Rt=!1,gr=i)}}else{if(nf(i))throw Error(t(418));i.flags=i.flags&-4097|2,Rt=!1,gr=i}}}function bv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;gr=i}function hc(i){if(i!==gr)return!1;if(!Rt)return bv(i),Rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Gd(i.type,i.memoizedProps)),o&&(o=vr)){if(nf(i))throw Cv(),Error(t(418));for(;o;)Tv(i,o),o=Rs(o.nextSibling)}if(bv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){vr=Rs(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}vr=null}}else vr=gr?Rs(i.stateNode.nextSibling):null;return!0}function Cv(){for(var i=vr;i;)i=Rs(i.nextSibling)}function Ia(){vr=gr=null,Rt=!1}function sf(i){ri===null?ri=[i]:ri.push(i)}var bb=ee.ReactCurrentBatchConfig;function Dl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(T){var D=p.refs;T===null?delete D[y]:D[y]=T},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function dc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Pv(i){var o=i._init;return o(i._payload)}function Av(i){function o(H,z){if(i){var K=H.deletions;K===null?(H.deletions=[z],H.flags|=16):K.push(z)}}function l(H,z){if(!i)return null;for(;z!==null;)o(H,z),z=z.sibling;return null}function h(H,z){for(H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function p(H,z){return H=Us(H,z),H.index=0,H.sibling=null,H}function y(H,z,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<z?(H.flags|=2,z):K):(H.flags|=2,z)):(H.flags|=1048576,z)}function T(H){return i&&H.alternate===null&&(H.flags|=2),H}function D(H,z,K,ce){return z===null||z.tag!==6?(z=Xf(K,H.mode,ce),z.return=H,z):(z=p(z,K),z.return=H,z)}function F(H,z,K,ce){var Ie=K.type;return Ie===k?oe(H,z,K.props.children,ce,K.key):z!==null&&(z.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Be&&Pv(Ie)===z.type)?(ce=p(z,K.props),ce.ref=Dl(H,z,K),ce.return=H,ce):(ce=Mc(K.type,K.key,K.props,null,H.mode,ce),ce.ref=Dl(H,z,K),ce.return=H,ce)}function Y(H,z,K,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=Yf(K,H.mode,ce),z.return=H,z):(z=p(z,K.children||[]),z.return=H,z)}function oe(H,z,K,ce,Ie){return z===null||z.tag!==7?(z=Do(K,H.mode,ce,Ie),z.return=H,z):(z=p(z,K),z.return=H,z)}function ue(H,z,K){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Xf(""+z,H.mode,K),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return K=Mc(z.type,z.key,z.props,null,H.mode,K),K.ref=Dl(H,null,z),K.return=H,K;case re:return z=Yf(z,H.mode,K),z.return=H,z;case Be:var ce=z._init;return ue(H,ce(z._payload),K)}if(pt(z)||ye(z))return z=Do(z,H.mode,K,null),z.return=H,z;dc(H,z)}return null}function se(H,z,K,ce){var Ie=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ie!==null?null:D(H,z,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===Ie?F(H,z,K,ce):null;case re:return K.key===Ie?Y(H,z,K,ce):null;case Be:return Ie=K._init,se(H,z,Ie(K._payload),ce)}if(pt(K)||ye(K))return Ie!==null?null:oe(H,z,K,ce,null);dc(H,K)}return null}function me(H,z,K,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return H=H.get(K)||null,D(z,H,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return H=H.get(ce.key===null?K:ce.key)||null,F(z,H,ce,Ie);case re:return H=H.get(ce.key===null?K:ce.key)||null,Y(z,H,ce,Ie);case Be:var Ae=ce._init;return me(H,z,K,Ae(ce._payload),Ie)}if(pt(ce)||ye(ce))return H=H.get(K)||null,oe(z,H,ce,Ie,null);dc(z,ce)}return null}function we(H,z,K,ce){for(var Ie=null,Ae=null,Re=z,Le=z=0,cn=null;Re!==null&&Le<K.length;Le++){Re.index>Le?(cn=Re,Re=null):cn=Re.sibling;var ot=se(H,Re,K[Le],ce);if(ot===null){Re===null&&(Re=cn);break}i&&Re&&ot.alternate===null&&o(H,Re),z=y(ot,z,Le),Ae===null?Ie=ot:Ae.sibling=ot,Ae=ot,Re=cn}if(Le===K.length)return l(H,Re),Rt&&Co(H,Le),Ie;if(Re===null){for(;Le<K.length;Le++)Re=ue(H,K[Le],ce),Re!==null&&(z=y(Re,z,Le),Ae===null?Ie=Re:Ae.sibling=Re,Ae=Re);return Rt&&Co(H,Le),Ie}for(Re=h(H,Re);Le<K.length;Le++)cn=me(Re,H,Le,K[Le],ce),cn!==null&&(i&&cn.alternate!==null&&Re.delete(cn.key===null?Le:cn.key),z=y(cn,z,Le),Ae===null?Ie=cn:Ae.sibling=cn,Ae=cn);return i&&Re.forEach(function(zs){return o(H,zs)}),Rt&&Co(H,Le),Ie}function Te(H,z,K,ce){var Ie=ye(K);if(typeof Ie!="function")throw Error(t(150));if(K=Ie.call(K),K==null)throw Error(t(151));for(var Ae=Ie=null,Re=z,Le=z=0,cn=null,ot=K.next();Re!==null&&!ot.done;Le++,ot=K.next()){Re.index>Le?(cn=Re,Re=null):cn=Re.sibling;var zs=se(H,Re,ot.value,ce);if(zs===null){Re===null&&(Re=cn);break}i&&Re&&zs.alternate===null&&o(H,Re),z=y(zs,z,Le),Ae===null?Ie=zs:Ae.sibling=zs,Ae=zs,Re=cn}if(ot.done)return l(H,Re),Rt&&Co(H,Le),Ie;if(Re===null){for(;!ot.done;Le++,ot=K.next())ot=ue(H,ot.value,ce),ot!==null&&(z=y(ot,z,Le),Ae===null?Ie=ot:Ae.sibling=ot,Ae=ot);return Rt&&Co(H,Le),Ie}for(Re=h(H,Re);!ot.done;Le++,ot=K.next())ot=me(Re,H,Le,ot.value,ce),ot!==null&&(i&&ot.alternate!==null&&Re.delete(ot.key===null?Le:ot.key),z=y(ot,z,Le),Ae===null?Ie=ot:Ae.sibling=ot,Ae=ot);return i&&Re.forEach(function(iC){return o(H,iC)}),Rt&&Co(H,Le),Ie}function Bt(H,z,K,ce){if(typeof K=="object"&&K!==null&&K.type===k&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var Ie=K.key,Ae=z;Ae!==null;){if(Ae.key===Ie){if(Ie=K.type,Ie===k){if(Ae.tag===7){l(H,Ae.sibling),z=p(Ae,K.props.children),z.return=H,H=z;break e}}else if(Ae.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Be&&Pv(Ie)===Ae.type){l(H,Ae.sibling),z=p(Ae,K.props),z.ref=Dl(H,Ae,K),z.return=H,H=z;break e}l(H,Ae);break}else o(H,Ae);Ae=Ae.sibling}K.type===k?(z=Do(K.props.children,H.mode,ce,K.key),z.return=H,H=z):(ce=Mc(K.type,K.key,K.props,null,H.mode,ce),ce.ref=Dl(H,z,K),ce.return=H,H=ce)}return T(H);case re:e:{for(Ae=K.key;z!==null;){if(z.key===Ae)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){l(H,z.sibling),z=p(z,K.children||[]),z.return=H,H=z;break e}else{l(H,z);break}else o(H,z);z=z.sibling}z=Yf(K,H.mode,ce),z.return=H,H=z}return T(H);case Be:return Ae=K._init,Bt(H,z,Ae(K._payload),ce)}if(pt(K))return we(H,z,K,ce);if(ye(K))return Te(H,z,K,ce);dc(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,z!==null&&z.tag===6?(l(H,z.sibling),z=p(z,K),z.return=H,H=z):(l(H,z),z=Xf(K,H.mode,ce),z.return=H,H=z),T(H)):l(H,z)}return Bt}var ba=Av(!0),Rv=Av(!1),fc=ks(null),pc=null,Ca=null,of=null;function af(){of=Ca=pc=null}function lf(i){var o=fc.current;Ct(fc),i._currentValue=o}function uf(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Pa(i,o){pc=i,of=Ca=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(rr=!0),i.firstContext=null)}function Or(i){var o=i._currentValue;if(of!==i)if(i={context:i,memoizedValue:o,next:null},Ca===null){if(pc===null)throw Error(t(308));Ca=i,pc.dependencies={lanes:0,firstContext:i}}else Ca=Ca.next=i;return o}var Po=null;function cf(i){Po===null?Po=[i]:Po.push(i)}function kv(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,cf(o)):(l.next=p.next,p.next=l),o.interleaved=l,rs(i,h)}function rs(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Os=!1;function hf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function is(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ds(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(it&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,rs(i,l)}return p=h.interleaved,p===null?(o.next=o,cf(h)):(o.next=p.next,p.next=o),h.interleaved=o,rs(i,l)}function mc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,yi(i,l)}}function Nv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function gc(i,o,l,h){var p=i.updateQueue;Os=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var F=D,Y=F.next;F.next=null,T===null?y=Y:T.next=Y,T=F;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==T&&(D===null?oe.firstBaseUpdate=Y:D.next=Y,oe.lastBaseUpdate=F))}if(y!==null){var ue=p.baseState;T=0,oe=Y=F=null,D=y;do{var se=D.lane,me=D.eventTime;if((h&se)===se){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var we=i,Te=D;switch(se=o,me=l,Te.tag){case 1:if(we=Te.payload,typeof we=="function"){ue=we.call(me,ue,se);break e}ue=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,se=typeof we=="function"?we.call(me,ue,se):we,se==null)break e;ue=he({},ue,se);break e;case 2:Os=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,se=p.effects,se===null?p.effects=[D]:se.push(D))}else me={eventTime:me,lane:se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Y=oe=me,F=ue):oe=oe.next=me,T|=se;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;se=D,D=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(oe===null&&(F=ue),p.baseState=F,p.firstBaseUpdate=Y,p.lastBaseUpdate=oe,o=p.shared.interleaved,o!==null){p=o;do T|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);ko|=T,i.lanes=T,i.memoizedState=ue}}function Ov(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Vl={},bi=ks(Vl),Ml=ks(Vl),Ll=ks(Vl);function Ao(i){if(i===Vl)throw Error(t(174));return i}function df(i,o){switch(Et(Ll,o),Et(Ml,i),Et(bi,Vl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:It(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=It(o,i)}Ct(bi),Et(bi,o)}function Aa(){Ct(bi),Ct(Ml),Ct(Ll)}function Dv(i){Ao(Ll.current);var o=Ao(bi.current),l=It(o,i.type);o!==l&&(Et(Ml,i),Et(bi,l))}function ff(i){Ml.current===i&&(Ct(bi),Ct(Ml))}var Ot=ks(0);function vc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var pf=[];function mf(){for(var i=0;i<pf.length;i++)pf[i]._workInProgressVersionPrimary=null;pf.length=0}var yc=ee.ReactCurrentDispatcher,gf=ee.ReactCurrentBatchConfig,Ro=0,Dt=null,tn=null,ln=null,_c=!1,jl=!1,Fl=0,Cb=0;function Tn(){throw Error(t(321))}function vf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!ni(i[l],o[l]))return!1;return!0}function yf(i,o,l,h,p,y){if(Ro=y,Dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,yc.current=i===null||i.memoizedState===null?kb:xb,i=l(h,p),jl){y=0;do{if(jl=!1,Fl=0,25<=y)throw Error(t(301));y+=1,ln=tn=null,o.updateQueue=null,yc.current=Nb,i=l(h,p)}while(jl)}if(yc.current=Sc,o=tn!==null&&tn.next!==null,Ro=0,ln=tn=Dt=null,_c=!1,o)throw Error(t(300));return i}function _f(){var i=Fl!==0;return Fl=0,i}function Ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Dt.memoizedState=ln=i:ln=ln.next=i,ln}function Dr(){if(tn===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=tn.next;var o=ln===null?Dt.memoizedState:ln.next;if(o!==null)ln=o,tn=i;else{if(i===null)throw Error(t(310));tn=i,i={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},ln===null?Dt.memoizedState=ln=i:ln=ln.next=i}return ln}function Ul(i,o){return typeof o=="function"?o(i):o}function wf(i){var o=Dr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=tn,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var D=T=null,F=null,Y=y;do{var oe=Y.lane;if((Ro&oe)===oe)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),h=Y.hasEagerState?Y.eagerState:i(h,Y.action);else{var ue={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=ue,T=h):F=F.next=ue,Dt.lanes|=oe,ko|=oe}Y=Y.next}while(Y!==null&&Y!==y);F===null?T=h:F.next=D,ni(h,o.memoizedState)||(rr=!0),o.memoizedState=h,o.baseState=T,o.baseQueue=F,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Dt.lanes|=y,ko|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Ef(i){var o=Dr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);ni(y,o.memoizedState)||(rr=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Vv(){}function Mv(i,o){var l=Dt,h=Dr(),p=o(),y=!ni(h.memoizedState,p);if(y&&(h.memoizedState=p,rr=!0),h=h.queue,Sf(Fv.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||ln!==null&&ln.memoizedState.tag&1){if(l.flags|=2048,zl(9,jv.bind(null,l,h,p,o),void 0,null),un===null)throw Error(t(349));(Ro&30)!==0||Lv(l,o,p)}return p}function Lv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function jv(i,o,l,h){o.value=l,o.getSnapshot=h,Uv(o)&&zv(i)}function Fv(i,o,l){return l(function(){Uv(o)&&zv(i)})}function Uv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!ni(i,l)}catch{return!0}}function zv(i){var o=rs(i,1);o!==null&&ai(o,i,1,-1)}function $v(i){var o=Ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:i},o.queue=i,i=i.dispatch=Rb.bind(null,Dt,i),[o.memoizedState,i]}function zl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Bv(){return Dr().memoizedState}function wc(i,o,l,h){var p=Ci();Dt.flags|=i,p.memoizedState=zl(1|o,l,void 0,h===void 0?null:h)}function Ec(i,o,l,h){var p=Dr();h=h===void 0?null:h;var y=void 0;if(tn!==null){var T=tn.memoizedState;if(y=T.destroy,h!==null&&vf(h,T.deps)){p.memoizedState=zl(o,l,y,h);return}}Dt.flags|=i,p.memoizedState=zl(1|o,l,y,h)}function Wv(i,o){return wc(8390656,8,i,o)}function Sf(i,o){return Ec(2048,8,i,o)}function Hv(i,o){return Ec(4,2,i,o)}function qv(i,o){return Ec(4,4,i,o)}function Kv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Gv(i,o,l){return l=l!=null?l.concat([i]):null,Ec(4,4,Kv.bind(null,o,i),l)}function Tf(){}function Qv(i,o){var l=Dr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&vf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Xv(i,o){var l=Dr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&vf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Yv(i,o,l){return(Ro&21)===0?(i.baseState&&(i.baseState=!1,rr=!0),i.memoizedState=l):(ni(l,o)||(l=Xr(),Dt.lanes|=l,ko|=l,i.baseState=!0),o)}function Pb(i,o){var l=Xe;Xe=l!==0&&4>l?l:4,i(!0);var h=gf.transition;gf.transition={};try{i(!1),o()}finally{Xe=l,gf.transition=h}}function Jv(){return Dr().memoizedState}function Ab(i,o,l){var h=js(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Zv(i))ey(o,l);else if(l=kv(i,o,l,h),l!==null){var p=zn();ai(l,i,h,p),ty(l,o,h)}}function Rb(i,o,l){var h=js(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zv(i))ey(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,D=y(T,l);if(p.hasEagerState=!0,p.eagerState=D,ni(D,T)){var F=o.interleaved;F===null?(p.next=p,cf(o)):(p.next=F.next,F.next=p),o.interleaved=p;return}}catch{}finally{}l=kv(i,o,p,h),l!==null&&(p=zn(),ai(l,i,h,p),ty(l,o,h))}}function Zv(i){var o=i.alternate;return i===Dt||o!==null&&o===Dt}function ey(i,o){jl=_c=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function ty(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,yi(i,l)}}var Sc={readContext:Or,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},kb={readContext:Or,useCallback:function(i,o){return Ci().memoizedState=[i,o===void 0?null:o],i},useContext:Or,useEffect:Wv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,wc(4194308,4,Kv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return wc(4194308,4,i,o)},useInsertionEffect:function(i,o){return wc(4,2,i,o)},useMemo:function(i,o){var l=Ci();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=Ci();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=Ab.bind(null,Dt,i),[h.memoizedState,i]},useRef:function(i){var o=Ci();return i={current:i},o.memoizedState=i},useState:$v,useDebugValue:Tf,useDeferredValue:function(i){return Ci().memoizedState=i},useTransition:function(){var i=$v(!1),o=i[0];return i=Pb.bind(null,i[1]),Ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=Dt,p=Ci();if(Rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),un===null)throw Error(t(349));(Ro&30)!==0||Lv(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Wv(Fv.bind(null,h,y,i),[i]),h.flags|=2048,zl(9,jv.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=Ci(),o=un.identifierPrefix;if(Rt){var l=ns,h=ts;l=(h&~(1<<32-dn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Fl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Cb++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},xb={readContext:Or,useCallback:Qv,useContext:Or,useEffect:Sf,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:qv,useMemo:Xv,useReducer:wf,useRef:Bv,useState:function(){return wf(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Dr();return Yv(o,tn.memoizedState,i)},useTransition:function(){var i=wf(Ul)[0],o=Dr().memoizedState;return[i,o]},useMutableSource:Vv,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1},Nb={readContext:Or,useCallback:Qv,useContext:Or,useEffect:Sf,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:qv,useMemo:Xv,useReducer:Ef,useRef:Bv,useState:function(){return Ef(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Dr();return tn===null?o.memoizedState=i:Yv(o,tn.memoizedState,i)},useTransition:function(){var i=Ef(Ul)[0],o=Dr().memoizedState;return[i,o]},useMutableSource:Vv,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1};function ii(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function If(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:he({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Tc={isMounted:function(i){return(i=i._reactInternals)?Qn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=zn(),p=js(i),y=is(h,p);y.payload=o,l!=null&&(y.callback=l),o=Ds(i,y,p),o!==null&&(ai(o,i,p,h),mc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=zn(),p=js(i),y=is(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Ds(i,y,p),o!==null&&(ai(o,i,p,h),mc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=zn(),h=js(i),p=is(l,h);p.tag=2,o!=null&&(p.callback=o),o=Ds(i,p,h),o!==null&&(ai(o,i,h,l),mc(o,i,h))}};function ny(i,o,l,h,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,T):o.prototype&&o.prototype.isPureReactComponent?!Pl(l,h)||!Pl(p,y):!0}function ry(i,o,l){var h=!1,p=xs,y=o.contextType;return typeof y=="object"&&y!==null?y=Or(y):(p=nr(o)?Io:Sn.current,h=o.contextTypes,y=(h=h!=null)?Ea(i,p):xs),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Tc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function iy(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Tc.enqueueReplaceState(o,o.state,null)}function bf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},hf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Or(y):(y=nr(o)?Io:Sn.current,p.context=Ea(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(If(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Tc.enqueueReplaceState(p,p.state,null),gc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Ra(i,o){try{var l="",h=o;do l+=Pe(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Cf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Pf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var Ob=typeof WeakMap=="function"?WeakMap:Map;function sy(i,o,l){l=is(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){kc||(kc=!0,$f=h),Pf(i,o)},l}function oy(i,o,l){l=is(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Pf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Pf(i,o),typeof h!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),l}function ay(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new Ob;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=Kb.bind(null,i,o,l),o.then(i,i))}function ly(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function uy(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=is(-1,1),o.tag=2,Ds(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var Db=ee.ReactCurrentOwner,rr=!1;function Un(i,o,l,h){o.child=i===null?Rv(o,null,l,h):ba(o,i.child,l,h)}function cy(i,o,l,h,p){l=l.render;var y=o.ref;return Pa(o,p),h=yf(i,o,l,h,y,p),l=_f(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ss(i,o,p)):(Rt&&l&&ef(o),o.flags|=1,Un(i,o,h,p),o.child)}function hy(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Qf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,dy(i,o,y,h,p)):(i=Mc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Pl,l(T,h)&&i.ref===o.ref)return ss(i,o,p)}return o.flags|=1,i=Us(y,h),i.ref=o.ref,i.return=o,o.child=i}function dy(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(Pl(y,h)&&i.ref===o.ref)if(rr=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(rr=!0);else return o.lanes=i.lanes,ss(i,o,p)}return Af(i,o,l,h,p)}function fy(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(xa,yr),yr|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Et(xa,yr),yr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Et(xa,yr),yr|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,Et(xa,yr),yr|=h;return Un(i,o,p,l),o.child}function py(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Af(i,o,l,h,p){var y=nr(l)?Io:Sn.current;return y=Ea(o,y),Pa(o,p),l=yf(i,o,l,h,y,p),h=_f(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ss(i,o,p)):(Rt&&h&&ef(o),o.flags|=1,Un(i,o,l,p),o.child)}function my(i,o,l,h,p){if(nr(l)){var y=!0;ac(o)}else y=!1;if(Pa(o,p),o.stateNode===null)bc(i,o),ry(o,l,h),bf(o,l,h,p),h=!0;else if(i===null){var T=o.stateNode,D=o.memoizedProps;T.props=D;var F=T.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=Or(Y):(Y=nr(l)?Io:Sn.current,Y=Ea(o,Y));var oe=l.getDerivedStateFromProps,ue=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function";ue||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==h||F!==Y)&&iy(o,T,h,Y),Os=!1;var se=o.memoizedState;T.state=se,gc(o,h,T,p),F=o.memoizedState,D!==h||se!==F||tr.current||Os?(typeof oe=="function"&&(If(o,l,oe,h),F=o.memoizedState),(D=Os||ny(o,l,D,h,se,F,Y))?(ue||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=F),T.props=h,T.state=F,T.context=Y,h=D):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{T=o.stateNode,xv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:ii(o.type,D),T.props=Y,ue=o.pendingProps,se=T.context,F=l.contextType,typeof F=="object"&&F!==null?F=Or(F):(F=nr(l)?Io:Sn.current,F=Ea(o,F));var me=l.getDerivedStateFromProps;(oe=typeof me=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ue||se!==F)&&iy(o,T,h,F),Os=!1,se=o.memoizedState,T.state=se,gc(o,h,T,p);var we=o.memoizedState;D!==ue||se!==we||tr.current||Os?(typeof me=="function"&&(If(o,l,me,h),we=o.memoizedState),(Y=Os||ny(o,l,Y,h,se,we,F)||!1)?(oe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,we,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,we,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=we),T.props=h,T.state=we,T.context=F,h=Y):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),h=!1)}return Rf(i,o,l,h,y,p)}function Rf(i,o,l,h,p,y){py(i,o);var T=(o.flags&128)!==0;if(!h&&!T)return p&&wv(o,l,!1),ss(i,o,y);h=o.stateNode,Db.current=o;var D=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&T?(o.child=ba(o,i.child,null,y),o.child=ba(o,null,D,y)):Un(i,o,D,y),o.memoizedState=h.state,p&&wv(o,l,!0),o.child}function gy(i){var o=i.stateNode;o.pendingContext?yv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&yv(i,o.context,!1),df(i,o.containerInfo)}function vy(i,o,l,h,p){return Ia(),sf(p),o.flags|=256,Un(i,o,l,h),o.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function xf(i){return{baseLanes:i,cachePool:null,transitions:null}}function yy(i,o,l){var h=o.pendingProps,p=Ot.current,y=!1,T=(o.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(p&2)!==0),D?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Et(Ot,p&1),i===null)return rf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=h.children,i=h.fallback,y?(h=o.mode,y=o.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=Lc(T,h,0,null),i=Do(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=xf(l),o.memoizedState=kf,i):Nf(o,T));if(p=i.memoizedState,p!==null&&(D=p.dehydrated,D!==null))return Vb(i,o,T,h,D,p,l);if(y){y=h.fallback,T=o.mode,p=i.child,D=p.sibling;var F={mode:"hidden",children:h.children};return(T&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=F,o.deletions=null):(h=Us(p,F),h.subtreeFlags=p.subtreeFlags&14680064),D!==null?y=Us(D,y):(y=Do(y,T,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,T=i.child.memoizedState,T=T===null?xf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=i.childLanes&~l,o.memoizedState=kf,h}return y=i.child,i=y.sibling,h=Us(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function Nf(i,o){return o=Lc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ic(i,o,l,h){return h!==null&&sf(h),ba(o,i.child,null,l),i=Nf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Vb(i,o,l,h,p,y,T){if(l)return o.flags&256?(o.flags&=-257,h=Cf(Error(t(422))),Ic(i,o,T,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Lc({mode:"visible",children:h.children},p,0,null),y=Do(y,p,T,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&ba(o,i.child,null,T),o.child.memoizedState=xf(T),o.memoizedState=kf,y);if((o.mode&1)===0)return Ic(i,o,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var D=h.dgst;return h=D,y=Error(t(419)),h=Cf(y,h,void 0),Ic(i,o,T,h)}if(D=(T&i.childLanes)!==0,rr||D){if(h=un,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,rs(i,p),ai(h,i,p,-1))}return Gf(),h=Cf(Error(t(421))),Ic(i,o,T,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=Gb.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,vr=Rs(p.nextSibling),gr=o,Rt=!0,ri=null,i!==null&&(xr[Nr++]=ts,xr[Nr++]=ns,xr[Nr++]=bo,ts=i.id,ns=i.overflow,bo=o),o=Nf(o,h.children),o.flags|=4096,o)}function _y(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),uf(i.return,o,l)}function Of(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function wy(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(Un(i,o,h.children,l),h=Ot.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_y(i,l,o);else if(i.tag===19)_y(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Et(Ot,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&vc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Of(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&vc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Of(o,!0,l,null,y);break;case"together":Of(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ss(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ko|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Us(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Us(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Mb(i,o,l){switch(o.tag){case 3:gy(o),Ia();break;case 5:Dv(o);break;case 1:nr(o.type)&&ac(o);break;case 4:df(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;Et(fc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(Et(Ot,Ot.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?yy(i,o,l):(Et(Ot,Ot.current&1),i=ss(i,o,l),i!==null?i.sibling:null);Et(Ot,Ot.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return wy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Et(Ot,Ot.current),h)break;return null;case 22:case 23:return o.lanes=0,fy(i,o,l)}return ss(i,o,l)}var Ey,Df,Sy,Ty;Ey=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Df=function(){},Sy=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Ao(bi.current);var y=null;switch(l){case"input":p=rt(i,p),h=rt(i,h),y=[];break;case"select":p=he({},p,{value:void 0}),h=he({},h,{value:void 0}),y=[];break;case"textarea":p=et(i,p),h=et(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=ic)}Wr(l,h);var T;l=null;for(Y in p)if(!h.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var D=p[Y];for(T in D)D.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in h){var F=h[Y];if(D=p!=null?p[Y]:void 0,h.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(T in D)!D.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in F)F.hasOwnProperty(T)&&D[T]!==F[T]&&(l||(l={}),l[T]=F[T])}else l||(y||(y=[]),y.push(Y,l)),l=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(y=y||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&bt("scroll",i),y||D===F||(y=[])):(y=y||[]).push(Y,F))}l&&(y=y||[]).push("style",l);var Y=y;(o.updateQueue=Y)&&(o.flags|=4)}},Ty=function(i,o,l,h){l!==h&&(o.flags|=4)};function $l(i,o){if(!Rt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function In(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function Lb(i,o,l){var h=o.pendingProps;switch(tf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(o),null;case 1:return nr(o.type)&&oc(),In(o),null;case 3:return h=o.stateNode,Aa(),Ct(tr),Ct(Sn),mf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(hc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ri!==null&&(Hf(ri),ri=null))),Df(i,o),In(o),null;case 5:ff(o);var p=Ao(Ll.current);if(l=o.type,i!==null&&o.stateNode!=null)Sy(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return In(o),null}if(i=Ao(bi.current),hc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[Ii]=o,h[Nl]=y,i=(o.mode&1)!==0,l){case"dialog":bt("cancel",h),bt("close",h);break;case"iframe":case"object":case"embed":bt("load",h);break;case"video":case"audio":for(p=0;p<Rl.length;p++)bt(Rl[p],h);break;case"source":bt("error",h);break;case"img":case"image":case"link":bt("error",h),bt("load",h);break;case"details":bt("toggle",h);break;case"input":at(h,y),bt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},bt("invalid",h);break;case"textarea":ut(h,y),bt("invalid",h)}Wr(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var D=y[T];T==="children"?typeof D=="string"?h.textContent!==D&&(y.suppressHydrationWarning!==!0&&rc(h.textContent,D,i),p=["children",D]):typeof D=="number"&&h.textContent!==""+D&&(y.suppressHydrationWarning!==!0&&rc(h.textContent,D,i),p=["children",""+D]):s.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&bt("scroll",h)}switch(l){case"input":ie(h),lt(h,y,!0);break;case"textarea":ie(h),$r(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=ic)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=mt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=T.createElement(l,{is:h.is}):(i=T.createElement(l),l==="select"&&(T=i,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):i=T.createElementNS(i,l),i[Ii]=o,i[Nl]=h,Ey(i,o,!1,!1),o.stateNode=i;e:{switch(T=zi(l,h),l){case"dialog":bt("cancel",i),bt("close",i),p=h;break;case"iframe":case"object":case"embed":bt("load",i),p=h;break;case"video":case"audio":for(p=0;p<Rl.length;p++)bt(Rl[p],i);p=h;break;case"source":bt("error",i),p=h;break;case"img":case"image":case"link":bt("error",i),bt("load",i),p=h;break;case"details":bt("toggle",i),p=h;break;case"input":at(i,h),p=rt(i,h),bt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=he({},h,{value:void 0}),bt("invalid",i);break;case"textarea":ut(i,h),p=et(i,h),bt("invalid",i);break;default:p=h}Wr(l,p),D=p;for(y in D)if(D.hasOwnProperty(y)){var F=D[y];y==="style"?Ui(i,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Br(i,F)):y==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&dr(i,F):typeof F=="number"&&dr(i,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?F!=null&&y==="onScroll"&&bt("scroll",i):F!=null&&G(i,y,F,T))}switch(l){case"input":ie(i),lt(i,h,!1);break;case"textarea":ie(i),$r(i);break;case"option":h.value!=null&&i.setAttribute("value",""+De(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Lt(i,!!h.multiple,y,!1):h.defaultValue!=null&&Lt(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=ic)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return In(o),null;case 6:if(i&&o.stateNode!=null)Ty(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=Ao(Ll.current),Ao(bi.current),hc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Ii]=o,(y=h.nodeValue!==l)&&(i=gr,i!==null))switch(i.tag){case 3:rc(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&rc(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Ii]=o,o.stateNode=h}return In(o),null;case 13:if(Ct(Ot),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Rt&&vr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Cv(),Ia(),o.flags|=98560,y=!1;else if(y=hc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Ii]=o}else Ia(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;In(o),y=!1}else ri!==null&&(Hf(ri),ri=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ot.current&1)!==0?nn===0&&(nn=3):Gf())),o.updateQueue!==null&&(o.flags|=4),In(o),null);case 4:return Aa(),Df(i,o),i===null&&kl(o.stateNode.containerInfo),In(o),null;case 10:return lf(o.type._context),In(o),null;case 17:return nr(o.type)&&oc(),In(o),null;case 19:if(Ct(Ot),y=o.memoizedState,y===null)return In(o),null;if(h=(o.flags&128)!==0,T=y.rendering,T===null)if(h)$l(y,!1);else{if(nn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=vc(i),T!==null){for(o.flags|=128,$l(y,!1),h=T.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,i=T.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Et(Ot,Ot.current&1|2),o.child}i=i.sibling}y.tail!==null&&He()>Na&&(o.flags|=128,h=!0,$l(y,!1),o.lanes=4194304)}else{if(!h)if(i=vc(T),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),$l(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Rt)return In(o),null}else 2*He()-y.renderingStartTime>Na&&l!==1073741824&&(o.flags|=128,h=!0,$l(y,!1),o.lanes=4194304);y.isBackwards?(T.sibling=o.child,o.child=T):(l=y.last,l!==null?l.sibling=T:o.child=T,y.last=T)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=He(),o.sibling=null,l=Ot.current,Et(Ot,h?l&1|2:l&1),o):(In(o),null);case 22:case 23:return Kf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(yr&1073741824)!==0&&(In(o),o.subtreeFlags&6&&(o.flags|=8192)):In(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function jb(i,o){switch(tf(o),o.tag){case 1:return nr(o.type)&&oc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Aa(),Ct(tr),Ct(Sn),mf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return ff(o),null;case 13:if(Ct(Ot),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ct(Ot),null;case 4:return Aa(),null;case 10:return lf(o.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var Cc=!1,bn=!1,Fb=typeof WeakSet=="function"?WeakSet:Set,_e=null;function ka(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){jt(i,o,h)}else l.current=null}function Vf(i,o,l){try{l()}catch(h){jt(i,o,h)}}var Iy=!1;function Ub(i,o){if(qd=Cs,i=nv(),jd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,D=-1,F=-1,Y=0,oe=0,ue=i,se=null;t:for(;;){for(var me;ue!==l||p!==0&&ue.nodeType!==3||(D=T+p),ue!==y||h!==0&&ue.nodeType!==3||(F=T+h),ue.nodeType===3&&(T+=ue.nodeValue.length),(me=ue.firstChild)!==null;)se=ue,ue=me;for(;;){if(ue===i)break t;if(se===l&&++Y===p&&(D=T),se===y&&++oe===h&&(F=T),(me=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=me}l=D===-1||F===-1?null:{start:D,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kd={focusedElem:i,selectionRange:l},Cs=!1,_e=o;_e!==null;)if(o=_e,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,_e=i;else for(;_e!==null;){o=_e;try{var we=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Te=we.memoizedProps,Bt=we.memoizedState,H=o.stateNode,z=H.getSnapshotBeforeUpdate(o.elementType===o.type?Te:ii(o.type,Te),Bt);H.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){jt(o,o.return,ce)}if(i=o.sibling,i!==null){i.return=o.return,_e=i;break}_e=o.return}return we=Iy,Iy=!1,we}function Bl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Vf(o,l,y)}p=p.next}while(p!==h)}}function Pc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Mf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function by(i){var o=i.alternate;o!==null&&(i.alternate=null,by(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ii],delete o[Nl],delete o[Yd],delete o[Sb],delete o[Tb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Cy(i){return i.tag===5||i.tag===3||i.tag===4}function Py(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=ic));else if(h!==4&&(i=i.child,i!==null))for(Lf(i,o,l),i=i.sibling;i!==null;)Lf(i,o,l),i=i.sibling}function jf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(jf(i,o,l),i=i.sibling;i!==null;)jf(i,o,l),i=i.sibling}var pn=null,si=!1;function Vs(i,o,l){for(l=l.child;l!==null;)Ay(i,o,l),l=l.sibling}function Ay(i,o,l){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Ki,l)}catch{}switch(l.tag){case 5:bn||ka(l,o);case 6:var h=pn,p=si;pn=null,Vs(i,o,l),pn=h,si=p,pn!==null&&(si?(i=pn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):pn.removeChild(l.stateNode));break;case 18:pn!==null&&(si?(i=pn,l=l.stateNode,i.nodeType===8?Xd(i.parentNode,l):i.nodeType===1&&Xd(i,l),ei(i)):Xd(pn,l.stateNode));break;case 4:h=pn,p=si,pn=l.stateNode.containerInfo,si=!0,Vs(i,o,l),pn=h,si=p;break;case 0:case 11:case 14:case 15:if(!bn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Vf(l,o,T),p=p.next}while(p!==h)}Vs(i,o,l);break;case 1:if(!bn&&(ka(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(D){jt(l,o,D)}Vs(i,o,l);break;case 21:Vs(i,o,l);break;case 22:l.mode&1?(bn=(h=bn)||l.memoizedState!==null,Vs(i,o,l),bn=h):Vs(i,o,l);break;default:Vs(i,o,l)}}function Ry(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Fb),o.forEach(function(h){var p=Qb.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function oi(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,T=o,D=T;e:for(;D!==null;){switch(D.tag){case 5:pn=D.stateNode,si=!1;break e;case 3:pn=D.stateNode.containerInfo,si=!0;break e;case 4:pn=D.stateNode.containerInfo,si=!0;break e}D=D.return}if(pn===null)throw Error(t(160));Ay(y,T,p),pn=null,si=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(Y){jt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ky(o,i),o=o.sibling}function ky(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(oi(o,i),Pi(i),h&4){try{Bl(3,i,i.return),Pc(3,i)}catch(Te){jt(i,i.return,Te)}try{Bl(5,i,i.return)}catch(Te){jt(i,i.return,Te)}}break;case 1:oi(o,i),Pi(i),h&512&&l!==null&&ka(l,l.return);break;case 5:if(oi(o,i),Pi(i),h&512&&l!==null&&ka(l,l.return),i.flags&32){var p=i.stateNode;try{dr(p,"")}catch(Te){jt(i,i.return,Te)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,T=l!==null?l.memoizedProps:y,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&y.type==="radio"&&y.name!=null&&xt(p,y),zi(D,T);var Y=zi(D,y);for(T=0;T<F.length;T+=2){var oe=F[T],ue=F[T+1];oe==="style"?Ui(p,ue):oe==="dangerouslySetInnerHTML"?Br(p,ue):oe==="children"?dr(p,ue):G(p,oe,ue,Y)}switch(D){case"input":wt(p,y);break;case"textarea":zr(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var me=y.value;me!=null?Lt(p,!!y.multiple,me,!1):se!==!!y.multiple&&(y.defaultValue!=null?Lt(p,!!y.multiple,y.defaultValue,!0):Lt(p,!!y.multiple,y.multiple?[]:"",!1))}p[Nl]=y}catch(Te){jt(i,i.return,Te)}}break;case 6:if(oi(o,i),Pi(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Te){jt(i,i.return,Te)}}break;case 3:if(oi(o,i),Pi(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ei(o.containerInfo)}catch(Te){jt(i,i.return,Te)}break;case 4:oi(o,i),Pi(i);break;case 13:oi(o,i),Pi(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(zf=He())),h&4&&Ry(i);break;case 22:if(oe=l!==null&&l.memoizedState!==null,i.mode&1?(bn=(Y=bn)||oe,oi(o,i),bn=Y):oi(o,i),Pi(i),h&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!oe&&(i.mode&1)!==0)for(_e=i,oe=i.child;oe!==null;){for(ue=_e=oe;_e!==null;){switch(se=_e,me=se.child,se.tag){case 0:case 11:case 14:case 15:Bl(4,se,se.return);break;case 1:ka(se,se.return);var we=se.stateNode;if(typeof we.componentWillUnmount=="function"){h=se,l=se.return;try{o=h,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(Te){jt(h,l,Te)}}break;case 5:ka(se,se.return);break;case 22:if(se.memoizedState!==null){Oy(ue);continue}}me!==null?(me.return=se,_e=me):Oy(ue)}oe=oe.sibling}e:for(oe=null,ue=i;;){if(ue.tag===5){if(oe===null){oe=ue;try{p=ue.stateNode,Y?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(D=ue.stateNode,F=ue.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Cr("display",T))}catch(Te){jt(i,i.return,Te)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=Y?"":ue.memoizedProps}catch(Te){jt(i,i.return,Te)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:oi(o,i),Pi(i),h&4&&Ry(i);break;case 21:break;default:oi(o,i),Pi(i)}}function Pi(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Cy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(dr(p,""),h.flags&=-33);var y=Py(i);jf(i,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,D=Py(i);Lf(i,D,T);break;default:throw Error(t(161))}}catch(F){jt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function zb(i,o,l){_e=i,xy(i)}function xy(i,o,l){for(var h=(i.mode&1)!==0;_e!==null;){var p=_e,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||Cc;if(!T){var D=p.alternate,F=D!==null&&D.memoizedState!==null||bn;D=Cc;var Y=bn;if(Cc=T,(bn=F)&&!Y)for(_e=p;_e!==null;)T=_e,F=T.child,T.tag===22&&T.memoizedState!==null?Dy(p):F!==null?(F.return=T,_e=F):Dy(p);for(;y!==null;)_e=y,xy(y),y=y.sibling;_e=p,Cc=D,bn=Y}Ny(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,_e=y):Ny(i)}}function Ny(i){for(;_e!==null;){var o=_e;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:bn||Pc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!bn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:ii(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Ov(o,y,h);break;case 3:var T=o.updateQueue;if(T!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Ov(o,T,l)}break;case 5:var D=o.stateNode;if(l===null&&o.flags&4){l=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var oe=Y.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&ei(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bn||o.flags&512&&Mf(o)}catch(se){jt(o,o.return,se)}}if(o===i){_e=null;break}if(l=o.sibling,l!==null){l.return=o.return,_e=l;break}_e=o.return}}function Oy(i){for(;_e!==null;){var o=_e;if(o===i){_e=null;break}var l=o.sibling;if(l!==null){l.return=o.return,_e=l;break}_e=o.return}}function Dy(i){for(;_e!==null;){var o=_e;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Pc(4,o)}catch(F){jt(o,l,F)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(F){jt(o,p,F)}}var y=o.return;try{Mf(o)}catch(F){jt(o,y,F)}break;case 5:var T=o.return;try{Mf(o)}catch(F){jt(o,T,F)}}}catch(F){jt(o,o.return,F)}if(o===i){_e=null;break}var D=o.sibling;if(D!==null){D.return=o.return,_e=D;break}_e=o.return}}var $b=Math.ceil,Ac=ee.ReactCurrentDispatcher,Ff=ee.ReactCurrentOwner,Vr=ee.ReactCurrentBatchConfig,it=0,un=null,Kt=null,mn=0,yr=0,xa=ks(0),nn=0,Wl=null,ko=0,Rc=0,Uf=0,Hl=null,ir=null,zf=0,Na=1/0,os=null,kc=!1,$f=null,Ms=null,xc=!1,Ls=null,Nc=0,ql=0,Bf=null,Oc=-1,Dc=0;function zn(){return(it&6)!==0?He():Oc!==-1?Oc:Oc=He()}function js(i){return(i.mode&1)===0?1:(it&2)!==0&&mn!==0?mn&-mn:bb.transition!==null?(Dc===0&&(Dc=Xr()),Dc):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:wl(i.type)),i)}function ai(i,o,l,h){if(50<ql)throw ql=0,Bf=null,Error(t(185));Yr(i,l,h),((it&2)===0||i!==un)&&(i===un&&((it&2)===0&&(Rc|=l),nn===4&&Fs(i,mn)),sr(i,h),l===1&&it===0&&(o.mode&1)===0&&(Na=He()+500,lc&&Ns()))}function sr(i,o){var l=i.callbackNode;Qr(i,o);var h=Gi(i,i===un?mn:0);if(h===0)l!==null&&po(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&po(l),o===1)i.tag===0?Ib(My.bind(null,i)):Ev(My.bind(null,i)),wb(function(){(it&6)===0&&Ns()}),l=null;else{switch(_i(h)){case 1:l=qi;break;case 4:l=Gr;break;case 16:l=Yn;break;case 536870912:l=go;break;default:l=Yn}l=Wy(l,Vy.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Vy(i,o){if(Oc=-1,Dc=0,(it&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Oa()&&i.callbackNode!==l)return null;var h=Gi(i,i===un?mn:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Vc(i,h);else{o=h;var p=it;it|=2;var y=jy();(un!==i||mn!==o)&&(os=null,Na=He()+500,No(i,o));do try{Hb();break}catch(D){Ly(i,D)}while(!0);af(),Ac.current=y,it=p,Kt!==null?o=0:(un=null,mn=0,o=nn)}if(o!==0){if(o===2&&(p=Ln(i),p!==0&&(h=p,o=Wf(i,p))),o===1)throw l=Wl,No(i,0),Fs(i,h),sr(i,He()),l;if(o===6)Fs(i,h);else{if(p=i.current.alternate,(h&30)===0&&!Bb(p)&&(o=Vc(i,h),o===2&&(y=Ln(i),y!==0&&(h=y,o=Wf(i,y))),o===1))throw l=Wl,No(i,0),Fs(i,h),sr(i,He()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:Oo(i,ir,os);break;case 3:if(Fs(i,h),(h&130023424)===h&&(o=zf+500-He(),10<o)){if(Gi(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){zn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Qd(Oo.bind(null,i,ir,os),o);break}Oo(i,ir,os);break;case 4:if(Fs(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var T=31-dn(h);y=1<<T,T=o[T],T>p&&(p=T),h&=~y}if(h=p,h=He()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*$b(h/1960))-h,10<h){i.timeoutHandle=Qd(Oo.bind(null,i,ir,os),h);break}Oo(i,ir,os);break;case 5:Oo(i,ir,os);break;default:throw Error(t(329))}}}return sr(i,He()),i.callbackNode===l?Vy.bind(null,i):null}function Wf(i,o){var l=Hl;return i.current.memoizedState.isDehydrated&&(No(i,o).flags|=256),i=Vc(i,o),i!==2&&(o=ir,ir=l,o!==null&&Hf(o)),i}function Hf(i){ir===null?ir=i:ir.push.apply(ir,i)}function Bb(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!ni(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fs(i,o){for(o&=~Uf,o&=~Rc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-dn(o),h=1<<l;i[l]=-1,o&=~h}}function My(i){if((it&6)!==0)throw Error(t(327));Oa();var o=Gi(i,0);if((o&1)===0)return sr(i,He()),null;var l=Vc(i,o);if(i.tag!==0&&l===2){var h=Ln(i);h!==0&&(o=h,l=Wf(i,h))}if(l===1)throw l=Wl,No(i,0),Fs(i,o),sr(i,He()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Oo(i,ir,os),sr(i,He()),null}function qf(i,o){var l=it;it|=1;try{return i(o)}finally{it=l,it===0&&(Na=He()+500,lc&&Ns())}}function xo(i){Ls!==null&&Ls.tag===0&&(it&6)===0&&Oa();var o=it;it|=1;var l=Vr.transition,h=Xe;try{if(Vr.transition=null,Xe=1,i)return i()}finally{Xe=h,Vr.transition=l,it=o,(it&6)===0&&Ns()}}function Kf(){yr=xa.current,Ct(xa)}function No(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,_b(l)),Kt!==null)for(l=Kt.return;l!==null;){var h=l;switch(tf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&oc();break;case 3:Aa(),Ct(tr),Ct(Sn),mf();break;case 5:ff(h);break;case 4:Aa();break;case 13:Ct(Ot);break;case 19:Ct(Ot);break;case 10:lf(h.type._context);break;case 22:case 23:Kf()}l=l.return}if(un=i,Kt=i=Us(i.current,null),mn=yr=o,nn=0,Wl=null,Uf=Rc=ko=0,ir=Hl=null,Po!==null){for(o=0;o<Po.length;o++)if(l=Po[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}Po=null}return i}function Ly(i,o){do{var l=Kt;try{if(af(),yc.current=Sc,_c){for(var h=Dt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}_c=!1}if(Ro=0,ln=tn=Dt=null,jl=!1,Fl=0,Ff.current=null,l===null||l.return===null){nn=1,Wl=o,Kt=null;break}e:{var y=i,T=l.return,D=l,F=o;if(o=mn,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,oe=D,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=ly(T);if(me!==null){me.flags&=-257,uy(me,T,D,y,o),me.mode&1&&ay(y,Y,o),o=me,F=Y;var we=o.updateQueue;if(we===null){var Te=new Set;Te.add(F),o.updateQueue=Te}else we.add(F);break e}else{if((o&1)===0){ay(y,Y,o),Gf();break e}F=Error(t(426))}}else if(Rt&&D.mode&1){var Bt=ly(T);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),uy(Bt,T,D,y,o),sf(Ra(F,D));break e}}y=F=Ra(F,D),nn!==4&&(nn=2),Hl===null?Hl=[y]:Hl.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var H=sy(y,F,o);Nv(y,H);break e;case 1:D=F;var z=y.type,K=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ms===null||!Ms.has(K)))){y.flags|=65536,o&=-o,y.lanes|=o;var ce=oy(y,D,o);Nv(y,ce);break e}}y=y.return}while(y!==null)}Uy(l)}catch(Ie){o=Ie,Kt===l&&l!==null&&(Kt=l=l.return);continue}break}while(!0)}function jy(){var i=Ac.current;return Ac.current=Sc,i===null?Sc:i}function Gf(){(nn===0||nn===3||nn===2)&&(nn=4),un===null||(ko&268435455)===0&&(Rc&268435455)===0||Fs(un,mn)}function Vc(i,o){var l=it;it|=2;var h=jy();(un!==i||mn!==o)&&(os=null,No(i,o));do try{Wb();break}catch(p){Ly(i,p)}while(!0);if(af(),it=l,Ac.current=h,Kt!==null)throw Error(t(261));return un=null,mn=0,nn}function Wb(){for(;Kt!==null;)Fy(Kt)}function Hb(){for(;Kt!==null&&!ta();)Fy(Kt)}function Fy(i){var o=By(i.alternate,i,yr);i.memoizedProps=i.pendingProps,o===null?Uy(i):Kt=o,Ff.current=null}function Uy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=Lb(l,o,yr),l!==null){Kt=l;return}}else{if(l=jb(l,o),l!==null){l.flags&=32767,Kt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nn=6,Kt=null;return}}if(o=o.sibling,o!==null){Kt=o;return}Kt=o=i}while(o!==null);nn===0&&(nn=5)}function Oo(i,o,l){var h=Xe,p=Vr.transition;try{Vr.transition=null,Xe=1,qb(i,o,l,h)}finally{Vr.transition=p,Xe=h}return null}function qb(i,o,l,h){do Oa();while(Ls!==null);if((it&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(vt(i,y),i===un&&(Kt=un=null,mn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||xc||(xc=!0,Wy(Yn,function(){return Oa(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Vr.transition,Vr.transition=null;var T=Xe;Xe=1;var D=it;it|=4,Ff.current=null,Ub(i,l),ky(l,i),db(Kd),Cs=!!qd,Kd=qd=null,i.current=l,zb(l),vl(),it=D,Xe=T,Vr.transition=y}else i.current=l;if(xc&&(xc=!1,Ls=i,Nc=p),y=i.pendingLanes,y===0&&(Ms=null),na(l.stateNode),sr(i,He()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(kc)throw kc=!1,i=$f,$f=null,i;return(Nc&1)!==0&&i.tag!==0&&Oa(),y=i.pendingLanes,(y&1)!==0?i===Bf?ql++:(ql=0,Bf=i):ql=0,Ns(),null}function Oa(){if(Ls!==null){var i=_i(Nc),o=Vr.transition,l=Xe;try{if(Vr.transition=null,Xe=16>i?16:i,Ls===null)var h=!1;else{if(i=Ls,Ls=null,Nc=0,(it&6)!==0)throw Error(t(331));var p=it;for(it|=4,_e=i.current;_e!==null;){var y=_e,T=y.child;if((_e.flags&16)!==0){var D=y.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(_e=Y;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:Bl(8,oe,y)}var ue=oe.child;if(ue!==null)ue.return=oe,_e=ue;else for(;_e!==null;){oe=_e;var se=oe.sibling,me=oe.return;if(by(oe),oe===Y){_e=null;break}if(se!==null){se.return=me,_e=se;break}_e=me}}}var we=y.alternate;if(we!==null){var Te=we.child;if(Te!==null){we.child=null;do{var Bt=Te.sibling;Te.sibling=null,Te=Bt}while(Te!==null)}}_e=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,_e=T;else e:for(;_e!==null;){if(y=_e,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Bl(9,y,y.return)}var H=y.sibling;if(H!==null){H.return=y.return,_e=H;break e}_e=y.return}}var z=i.current;for(_e=z;_e!==null;){T=_e;var K=T.child;if((T.subtreeFlags&2064)!==0&&K!==null)K.return=T,_e=K;else e:for(T=z;_e!==null;){if(D=_e,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Pc(9,D)}}catch(Ie){jt(D,D.return,Ie)}if(D===T){_e=null;break e}var ce=D.sibling;if(ce!==null){ce.return=D.return,_e=ce;break e}_e=D.return}}if(it=p,Ns(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Ki,i)}catch{}h=!0}return h}finally{Xe=l,Vr.transition=o}}return!1}function zy(i,o,l){o=Ra(l,o),o=sy(i,o,1),i=Ds(i,o,1),o=zn(),i!==null&&(Yr(i,1,o),sr(i,o))}function jt(i,o,l){if(i.tag===3)zy(i,i,l);else for(;o!==null;){if(o.tag===3){zy(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ms===null||!Ms.has(h))){i=Ra(l,i),i=oy(o,i,1),o=Ds(o,i,1),i=zn(),o!==null&&(Yr(o,1,i),sr(o,i));break}}o=o.return}}function Kb(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=zn(),i.pingedLanes|=i.suspendedLanes&l,un===i&&(mn&l)===l&&(nn===4||nn===3&&(mn&130023424)===mn&&500>He()-zf?No(i,0):Uf|=l),sr(i,o)}function $y(i,o){o===0&&((i.mode&1)===0?o=1:(o=bs,bs<<=1,(bs&130023424)===0&&(bs=4194304)));var l=zn();i=rs(i,o),i!==null&&(Yr(i,o,l),sr(i,l))}function Gb(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),$y(i,l)}function Qb(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),$y(i,l)}var By;By=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||tr.current)rr=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return rr=!1,Mb(i,o,l);rr=(i.flags&131072)!==0}else rr=!1,Rt&&(o.flags&1048576)!==0&&Sv(o,cc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;bc(i,o),i=o.pendingProps;var p=Ea(o,Sn.current);Pa(o,l),p=yf(null,o,h,i,p,l);var y=_f();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nr(h)?(y=!0,ac(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,hf(o),p.updater=Tc,o.stateNode=p,p._reactInternals=o,bf(o,h,i,l),o=Rf(null,o,h,!0,y,l)):(o.tag=0,Rt&&y&&ef(o),Un(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(bc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=Yb(h),i=ii(h,i),p){case 0:o=Af(null,o,h,i,l);break e;case 1:o=my(null,o,h,i,l);break e;case 11:o=cy(null,o,h,i,l);break e;case 14:o=hy(null,o,h,ii(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:ii(h,p),Af(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:ii(h,p),my(i,o,h,p,l);case 3:e:{if(gy(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,xv(i,o),gc(o,h,null,l);var T=o.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Ra(Error(t(423)),o),o=vy(i,o,h,l,p);break e}else if(h!==p){p=Ra(Error(t(424)),o),o=vy(i,o,h,l,p);break e}else for(vr=Rs(o.stateNode.containerInfo.firstChild),gr=o,Rt=!0,ri=null,l=Rv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ia(),h===p){o=ss(i,o,l);break e}Un(i,o,h,l)}o=o.child}return o;case 5:return Dv(o),i===null&&rf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,T=p.children,Gd(h,p)?T=null:y!==null&&Gd(h,y)&&(o.flags|=32),py(i,o),Un(i,o,T,l),o.child;case 6:return i===null&&rf(o),null;case 13:return yy(i,o,l);case 4:return df(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ba(o,null,h,l):Un(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:ii(h,p),cy(i,o,h,p,l);case 7:return Un(i,o,o.pendingProps,l),o.child;case 8:return Un(i,o,o.pendingProps.children,l),o.child;case 12:return Un(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,T=p.value,Et(fc,h._currentValue),h._currentValue=T,y!==null)if(ni(y.value,T)){if(y.children===p.children&&!tr.current){o=ss(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var D=y.dependencies;if(D!==null){T=y.child;for(var F=D.firstContext;F!==null;){if(F.context===h){if(y.tag===1){F=is(-1,l&-l),F.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),Y.pending=F}}y.lanes|=l,F=y.alternate,F!==null&&(F.lanes|=l),uf(y.return,l,o),D.lanes|=l;break}F=F.next}}else if(y.tag===10)T=y.type===o.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,D=T.alternate,D!==null&&(D.lanes|=l),uf(T,l,o),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===o){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Un(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Pa(o,l),p=Or(p),h=h(p),o.flags|=1,Un(i,o,h,l),o.child;case 14:return h=o.type,p=ii(h,o.pendingProps),p=ii(h.type,p),hy(i,o,h,p,l);case 15:return dy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:ii(h,p),bc(i,o),o.tag=1,nr(h)?(i=!0,ac(o)):i=!1,Pa(o,l),ry(o,h,p),bf(o,h,p,l),Rf(null,o,h,!0,i,l);case 19:return wy(i,o,l);case 22:return fy(i,o,l)}throw Error(t(156,o.tag))};function Wy(i,o){return Vn(i,o)}function Xb(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(i,o,l,h){return new Xb(i,o,l,h)}function Qf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yb(i){if(typeof i=="function")return Qf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===Oe)return 14}return 2}function Us(i,o){var l=i.alternate;return l===null?(l=Mr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Mc(i,o,l,h,p,y){var T=2;if(h=i,typeof i=="function")Qf(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case k:return Do(l.children,p,y,o);case P:T=8,p|=8;break;case N:return i=Mr(12,l,o,p|2),i.elementType=N,i.lanes=y,i;case x:return i=Mr(13,l,o,p),i.elementType=x,i.lanes=y,i;case Fe:return i=Mr(19,l,o,p),i.elementType=Fe,i.lanes=y,i;case Ve:return Lc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:T=10;break e;case M:T=9;break e;case L:T=11;break e;case Oe:T=14;break e;case Be:T=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Mr(T,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function Do(i,o,l,h){return i=Mr(7,i,h,o),i.lanes=l,i}function Lc(i,o,l,h){return i=Mr(22,i,h,o),i.elementType=Ve,i.lanes=l,i.stateNode={isHidden:!1},i}function Xf(i,o,l){return i=Mr(6,i,null,o),i.lanes=l,i}function Yf(i,o,l){return o=Mr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Jb(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vi(0),this.expirationTimes=vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Jf(i,o,l,h,p,y,T,D,F){return i=new Jb(i,o,l,D,F),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Mr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(y),i}function Zb(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function Hy(i){if(!i)return xs;i=i._reactInternals;e:{if(Qn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(nr(l))return _v(i,l,o)}return o}function qy(i,o,l,h,p,y,T,D,F){return i=Jf(l,h,!0,i,p,y,T,D,F),i.context=Hy(null),l=i.current,h=zn(),p=js(l),y=is(h,p),y.callback=o??null,Ds(l,y,p),i.current.lanes=p,Yr(i,p,h),sr(i,h),i}function jc(i,o,l,h){var p=o.current,y=zn(),T=js(p);return l=Hy(l),o.context===null?o.context=l:o.pendingContext=l,o=is(y,T),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Ds(p,o,T),i!==null&&(ai(i,p,T,y),mc(i,p,T)),T}function Fc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Ky(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Zf(i,o){Ky(i,o),(i=i.alternate)&&Ky(i,o)}function eC(){return null}var Gy=typeof reportError=="function"?reportError:function(i){console.error(i)};function ep(i){this._internalRoot=i}Uc.prototype.render=ep.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));jc(i,o,null,null)},Uc.prototype.unmount=ep.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;xo(function(){jc(null,i,null,null)}),o[Zi]=null}};function Uc(i){this._internalRoot=i}Uc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ee();i={blockedOn:null,target:i,priority:o};for(var l=0;l<wi.length&&o!==0&&o<wi[l].priority;l++);wi.splice(l,0,i),l===0&&Bu(i)}};function tp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function zc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qy(){}function tC(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var Y=Fc(T);y.call(Y)}}var T=qy(o,h,i,0,null,!1,!1,"",Qy);return i._reactRootContainer=T,i[Zi]=T.current,kl(i.nodeType===8?i.parentNode:i),xo(),T}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var D=h;h=function(){var Y=Fc(F);D.call(Y)}}var F=Jf(i,0,!1,null,null,!1,!1,"",Qy);return i._reactRootContainer=F,i[Zi]=F.current,kl(i.nodeType===8?i.parentNode:i),xo(function(){jc(o,F,l,h)}),F}function $c(i,o,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var D=p;p=function(){var F=Fc(T);D.call(F)}}jc(o,T,i,p)}else T=tC(l,o,i,p,h);return Fc(T)}I=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=gi(o.pendingLanes);l!==0&&(yi(o,l|1),sr(o,He()),(it&6)===0&&(Na=He()+500,Ns()))}break;case 13:xo(function(){var h=rs(i,1);if(h!==null){var p=zn();ai(h,i,1,p)}}),Zf(i,1)}},q=function(i){if(i.tag===13){var o=rs(i,134217728);if(o!==null){var l=zn();ai(o,i,134217728,l)}Zf(i,134217728)}},Z=function(i){if(i.tag===13){var o=js(i),l=rs(i,o);if(l!==null){var h=zn();ai(l,i,o,h)}Zf(i,o)}},Ee=function(){return Xe},Ue=function(i,o){var l=Xe;try{return Xe=i,o()}finally{Xe=l}},Pr=function(i,o,l){switch(o){case"input":if(wt(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=sc(h);if(!p)throw Error(t(90));qe(h),wt(h,p)}}}break;case"textarea":zr(i,l);break;case"select":o=l.value,o!=null&&Lt(i,!!l.multiple,o,!1)}},qr=qf,Ss=xo;var nC={usingClientEntryPoint:!1,Events:[Ol,_a,sc,qn,Es,qf]},Kl={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rC={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wi(i),i===null?null:i.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||eC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Ki=Bc.inject(rC),Mn=Bc}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC,or.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tp(o))throw Error(t(200));return Zb(i,o,null,l)},or.createRoot=function(i,o){if(!tp(i))throw Error(t(299));var l=!1,h="",p=Gy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Jf(i,1,!1,null,null,l,!1,h,p),i[Zi]=o.current,kl(i.nodeType===8?i.parentNode:i),new ep(o)},or.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wi(o),i=i===null?null:i.stateNode,i},or.flushSync=function(i){return xo(i)},or.hydrate=function(i,o,l){if(!zc(o))throw Error(t(200));return $c(null,i,o,!0,l)},or.hydrateRoot=function(i,o,l){if(!tp(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=Gy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),o=qy(o,null,i,1,l??null,p,!1,y,T),i[Zi]=o.current,kl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Uc(o)},or.render=function(i,o,l){if(!zc(o))throw Error(t(200));return $c(null,i,o,!1,l)},or.unmountComponentAtNode=function(i){if(!zc(i))throw Error(t(40));return i._reactRootContainer?(xo(function(){$c(null,null,i,!1,function(){i._reactRootContainer=null,i[Zi]=null})}),!0):!1},or.unstable_batchedUpdates=qf,or.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!zc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return $c(i,o,l,!1,h)},or.version="18.3.1-next-f1338f8080-20240426",or}var r_;function H0(){if(r_)return ip.exports;r_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=hC(),ip.exports}var i_;function dC(){if(i_)return Wc;i_=1;var n=H0();return Wc.createRoot=n.createRoot,Wc.hydrateRoot=n.hydrateRoot,Wc}var fC=dC();const pC=B0(fC);var mC=H0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},du.apply(this,arguments)}var Gs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Gs||(Gs={}));const s_="popstate";function gC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Mp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:q0(s)}return yC(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vC(){return Math.random().toString(36).substr(2,8)}function o_(n,e){return{usr:n.state,key:n.key,idx:e}}function Mp(n,e,t,r){return t===void 0&&(t=null),du({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?sl(e):e,{state:t,key:e&&e.key||r||vC()})}function q0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function yC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=Gs.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(du({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function S(){d=Gs.Pop;let C=_(),$=C==null?null:C-m;m=C,f&&f({action:d,location:R.location,delta:$})}function w(C,$){d=Gs.Push;let Q=Mp(R.location,C,$);m=_()+1;let G=o_(Q,m),ee=R.createHref(Q);try{u.pushState(G,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(ee)}a&&f&&f({action:d,location:R.location,delta:1})}function A(C,$){d=Gs.Replace;let Q=Mp(R.location,C,$);m=_();let G=o_(Q,m),ee=R.createHref(Q);u.replaceState(G,"",ee),a&&f&&f({action:d,location:R.location,delta:0})}function O(C){let $=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof C=="string"?C:q0(C);return Q=Q.replace(/ $/,"%20"),Jt($,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,$)}let R={get action(){return d},get location(){return n(s,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(s_,S),f=C,()=>{s.removeEventListener(s_,S),f=null}},createHref(C){return e(s,C)},createURL:O,encodeLocation(C){let $=O(C);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:w,replace:A,go(C){return u.go(C)}};return R}var a_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(a_||(a_={}));function _C(n,e,t){return t===void 0&&(t="/"),wC(n,e,t)}function wC(n,e,t,r){let s=typeof e=="string"?sl(e):e,a=Q0(s.pathname||"/",t);if(a==null)return null;let u=K0(n);EC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=OC(a);d=kC(u[f],m)}return d}function K0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Jt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Fo([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Jt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),K0(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:AC(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of G0(a.path))s(a,u,f)}),e}function G0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=G0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function EC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const SC=/^:[\w-]+$/,TC=3,IC=2,bC=1,CC=10,PC=-2,l_=n=>n==="*";function AC(n,e){let t=n.split("/"),r=t.length;return t.some(l_)&&(r+=PC),e&&(r+=IC),t.filter(s=>!l_(s)).reduce((s,a)=>s+(SC.test(a)?TC:a===""?bC:CC),r)}function RC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function kC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",S=xC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),w=f.route;if(!S)return null;Object.assign(s,S.params),u.push({params:s,pathname:Fo([a,S.pathname]),pathnameBase:jC(Fo([a,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(a=Fo([a,S.pathnameBase]))}return u}function xC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=NC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,_,S)=>{let{paramName:w,isOptional:A}=_;if(w==="*"){let R=d[S]||"";u=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const O=d[S];return A&&!O?m[w]=void 0:m[w]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function NC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Q0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const DC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VC=n=>DC.test(n);function MC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?sl(n):n,a;if(t)if(VC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),bm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=u_(t.substring(1),"/"):a=u_(t,e)}else a=e;return{pathname:a,search:FC(r),hash:UC(s)}}function u_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ap(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function X0(n,e){let t=LC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Y0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=sl(n):(s=du({},n),Jt(!s.pathname||!s.pathname.includes("?"),ap("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),ap("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),ap("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let S=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),S-=1;s.pathname=w.join("/")}d=S>=0?e[S]:"/"}let f=MC(s,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Fo=n=>n.join("/").replace(/\/\/+/g,"/"),jC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const J0=["post","put","patch","delete"];new Set(J0);const $C=["get",...J0];new Set($C);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fu.apply(this,arguments)}const Cm=V.createContext(null),BC=V.createContext(null),Iu=V.createContext(null),Xh=V.createContext(null),Ko=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=V.createContext(null);function bu(){return V.useContext(Xh)!=null}function Pm(){return bu()||Jt(!1),V.useContext(Xh).location}function eE(n){V.useContext(Iu).static||V.useLayoutEffect(n)}function Cu(){let{isDataRoute:n}=V.useContext(Ko);return n?n1():WC()}function WC(){bu()||Jt(!1);let n=V.useContext(Cm),{basename:e,future:t,navigator:r}=V.useContext(Iu),{matches:s}=V.useContext(Ko),{pathname:a}=Pm(),u=JSON.stringify(X0(s,t.v7_relativeSplatPath)),d=V.useRef(!1);return eE(()=>{d.current=!0}),V.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let S=Y0(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Fo([e,S.pathname])),(_.replace?r.replace:r.push)(S,_.state,_)},[e,r,u,a,n])}function HC(n,e){return qC(n,e)}function qC(n,e,t,r){bu()||Jt(!1);let{navigator:s}=V.useContext(Iu),{matches:a}=V.useContext(Ko),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Pm(),_;if(e){var S;let C=typeof e=="string"?sl(e):e;f==="/"||(S=C.pathname)!=null&&S.startsWith(f)||Jt(!1),_=C}else _=m;let w=_.pathname||"/",A=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");A="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let O=_C(n,{pathname:A}),R=YC(O&&O.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Fo([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Fo([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,r);return e&&R?V.createElement(Xh.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Gs.Pop}},R):R}function KC(){let n=t1(),e=zC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const GC=V.createElement(KC,null);class QC extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Ko.Provider,{value:this.props.routeContext},V.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XC(n){let{routeContext:e,match:t,children:r}=n,s=V.useContext(Cm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Ko.Provider,{value:e},r)}function YC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let _=u.findIndex(S=>S.route.id&&(d==null?void 0:d[S.route.id])!==void 0);_>=0||Jt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let S=u[_];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=_),S.route.id){let{loaderData:w,errors:A}=t,O=S.route.loader&&w[S.route.id]===void 0&&(!A||A[S.route.id]===void 0);if(S.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,S,w)=>{let A,O=!1,R=null,C=null;t&&(A=d&&S.route.id?d[S.route.id]:void 0,R=S.route.errorElement||GC,f&&(m<0&&w===0?(r1("route-fallback"),O=!0,C=null):m===w&&(O=!0,C=S.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,w+1)),Q=()=>{let G;return A?G=R:O?G=C:S.route.Component?G=V.createElement(S.route.Component,null):S.route.element?G=S.route.element:G=_,V.createElement(XC,{match:S,routeContext:{outlet:_,matches:$,isDataRoute:t!=null},children:G})};return t&&(S.route.ErrorBoundary||S.route.errorElement||w===0)?V.createElement(QC,{location:t.location,revalidation:t.revalidation,component:R,error:A,children:Q(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):Q()},null)}var tE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(tE||{}),nE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(nE||{});function JC(n){let e=V.useContext(Cm);return e||Jt(!1),e}function ZC(n){let e=V.useContext(BC);return e||Jt(!1),e}function e1(n){let e=V.useContext(Ko);return e||Jt(!1),e}function rE(n){let e=e1(),t=e.matches[e.matches.length-1];return t.route.id||Jt(!1),t.route.id}function t1(){var n;let e=V.useContext(Z0),t=ZC(),r=rE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function n1(){let{router:n}=JC(tE.UseNavigateStable),e=rE(nE.UseNavigateStable),t=V.useRef(!1);return eE(()=>{t.current=!0}),V.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,fu({fromRouteId:e},a)))},[n,e])}const c_={};function r1(n,e,t){c_[n]||(c_[n]=!0)}function i1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ui(n){let{to:e,replace:t,state:r,relative:s}=n;bu()||Jt(!1);let{future:a,static:u}=V.useContext(Iu),{matches:d}=V.useContext(Ko),{pathname:f}=Pm(),m=Cu(),_=Y0(e,X0(d,a.v7_relativeSplatPath),f,s==="path"),S=JSON.stringify(_);return V.useEffect(()=>m(JSON.parse(S),{replace:t,state:r,relative:s}),[m,S,s,t,r]),null}function Vo(n){Jt(!1)}function s1(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Gs.Pop,navigator:a,static:u=!1,future:d}=n;bu()&&Jt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:u,future:fu({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=sl(r));let{pathname:_="/",search:S="",hash:w="",state:A=null,key:O="default"}=r,R=V.useMemo(()=>{let C=Q0(_,f);return C==null?null:{location:{pathname:C,search:S,hash:w,state:A,key:O},navigationType:s}},[f,_,S,w,A,O,s]);return R==null?null:V.createElement(Iu.Provider,{value:m},V.createElement(Xh.Provider,{children:t,value:R}))}function o1(n){let{children:e,location:t}=n;return HC(Lp(e),t)}new Promise(()=>{});function Lp(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,s)=>{if(!V.isValidElement(r))return;let a=[...e,s];if(r.type===V.Fragment){t.push.apply(t,Lp(r.props.children,a));return}r.type!==Vo&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Lp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const a1="6";try{window.__reactRouterVersion=a1}catch{}const l1="startTransition",h_=Vp[l1];function u1(n){let{basename:e,children:t,future:r,window:s}=n,a=V.useRef();a.current==null&&(a.current=gC({window:s,v5Compat:!0}));let u=a.current,[d,f]=V.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},_=V.useCallback(S=>{m&&h_?h_(()=>f(S)):f(S)},[f,m]);return V.useLayoutEffect(()=>u.listen(_),[u,_]),V.useEffect(()=>i1(r),[r]),V.createElement(s1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var d_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(d_||(d_={}));var f_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(f_||(f_={}));function p_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function c1(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function h1(){const[n,e]=V.useState(null),[t,r]=V.useState(!1);V.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=V.useMemo(()=>!p_()&&c1()&&!t&&!n,[t,n]),a=V.useMemo(()=>!p_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:g.jsxs("section",{className:"install-banner","aria-live":"polite",children:[g.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),g.jsxs("div",{className:"install-actions",children:[a?g.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const iE=V.createContext(null);function d1({children:n}){const[e,t]=V.useState([]),r=V.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=V.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return g.jsxs(iE.Provider,{value:s,children:[n,g.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>g.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Yh(){const n=V.useContext(iE);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const f1=()=>{};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},p1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,S=(a&3)<<4|d>>4;let w=(d&15)<<2|m>>6,A=m&63;f||(A=64,u||(w=64)),r.push(t[_],t[S],t[w],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):p1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const S=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||S==null)throw new m1;const w=a<<2|d>>4;if(r.push(w),m!==64){const A=d<<4&240|m>>2;if(r.push(A),S!==64){const O=m<<6&192|S;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class m1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g1=function(n){const e=sE(n);return oE.encodeByteArray(e,!0)},wh=function(n){return g1(n).replace(/\./g,"")},aE=function(n){try{return oE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=()=>v1().__FIREBASE_DEFAULTS__,_1=()=>{if(typeof process>"u"||typeof m_>"u")return;const n=m_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aE(n[1]);return e&&JSON.parse(e)},Jh=()=>{try{return f1()||y1()||_1()||w1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lE=n=>{var e,t;return(t=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Am=n=>{const e=lE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uE=()=>{var n;return(n=Jh())===null||n===void 0?void 0:n.config},cE=n=>{var e;return(e=Jh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wh(JSON.stringify(t)),wh(JSON.stringify(u)),""].join(".")}const su={};function S1(){const n={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function T1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let g_=!1;function ed(n,e){if(typeof window>"u"||typeof document>"u"||!_s(window.location.host)||su[n]===e||su[n]||g_)return;su[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=S1().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{g_=!0,u()},w}function _(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=T1(r),A=t("text"),O=document.getElementById(A)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),$=t("preprendIcon"),Q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const G=w.element;d(G),_(C,R);const ee=m();f(Q,$),G.append(Q,O,C,ee),document.body.appendChild(G)}a?(O.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function b1(){var n;const e=(n=Jh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function A1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R1(){const n=kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k1(){return!b1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x1(){try{return typeof indexedDB=="object"}catch{return!1}}function N1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="FirebaseError";class fi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=O1,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?D1(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new fi(s,d,r)}}function D1(n,e){return n.replace(V1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const V1=/\{\$([^}]+)}/g;function M1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ds(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(v_(a)&&v_(u)){if(!ds(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function v_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function L1(n,e){const t=new j1(n,e);return t.subscribe.bind(t)}class j1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");F1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=lp),s.error===void 0&&(s.error=lp),s.complete===void 0&&(s.complete=lp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new E1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($1(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z1(n){return n===Mo?void 0:n}function $1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const W1={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},H1=Je.INFO,q1={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},K1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=q1[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=H1,this._logHandler=K1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const G1=(n,e)=>e.some(t=>n instanceof t);let y_,__;function Q1(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X1(){return __||(__=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,jp=new WeakMap,fE=new WeakMap,up=new WeakMap,km=new WeakMap;function Y1(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Xs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,n)}).catch(()=>{}),km.set(e,n),e}function J1(n){if(jp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});jp.set(n,e)}let Fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Z1(n){Fp=n(Fp)}function eP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cp(this),e,...t);return fE.set(r,e.sort?e.sort():[e]),Xs(r)}:X1().includes(n)?function(...e){return n.apply(cp(this),e),Xs(dE.get(this))}:function(...e){return Xs(n.apply(cp(this),e))}}function tP(n){return typeof n=="function"?eP(n):(n instanceof IDBTransaction&&J1(n),G1(n,Q1())?new Proxy(n,Fp):n)}function Xs(n){if(n instanceof IDBRequest)return Y1(n);if(up.has(n))return up.get(n);const e=tP(n);return e!==n&&(up.set(n,e),km.set(e,n)),e}const cp=n=>km.get(n);function nP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Xs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Xs(u.result),f.oldVersion,f.newVersion,Xs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const rP=["get","getKey","getAll","getAllKeys","count"],iP=["put","add","delete","clear"],hp=new Map;function w_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=iP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rP.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return hp.set(e,a),a}Z1(n=>({...n,get:(e,t,r)=>w_(e,t)||n.get(e,t,r),has:(e,t)=>!!w_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function oP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Up="@firebase/app",E_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Rm("@firebase/app"),aP="@firebase/app-compat",lP="@firebase/analytics-compat",uP="@firebase/analytics",cP="@firebase/app-check-compat",hP="@firebase/app-check",dP="@firebase/auth",fP="@firebase/auth-compat",pP="@firebase/database",mP="@firebase/data-connect",gP="@firebase/database-compat",vP="@firebase/functions",yP="@firebase/functions-compat",_P="@firebase/installations",wP="@firebase/installations-compat",EP="@firebase/messaging",SP="@firebase/messaging-compat",TP="@firebase/performance",IP="@firebase/performance-compat",bP="@firebase/remote-config",CP="@firebase/remote-config-compat",PP="@firebase/storage",AP="@firebase/storage-compat",RP="@firebase/firestore",kP="@firebase/ai",xP="@firebase/firestore-compat",NP="firebase",OP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]",DP={[Up]:"fire-core",[aP]:"fire-core-compat",[uP]:"fire-analytics",[lP]:"fire-analytics-compat",[hP]:"fire-app-check",[cP]:"fire-app-check-compat",[dP]:"fire-auth",[fP]:"fire-auth-compat",[pP]:"fire-rtdb",[mP]:"fire-data-connect",[gP]:"fire-rtdb-compat",[vP]:"fire-fn",[yP]:"fire-fn-compat",[_P]:"fire-iid",[wP]:"fire-iid-compat",[EP]:"fire-fcm",[SP]:"fire-fcm-compat",[TP]:"fire-perf",[IP]:"fire-perf-compat",[bP]:"fire-rc",[CP]:"fire-rc-compat",[PP]:"fire-gcs",[AP]:"fire-gcs-compat",[RP]:"fire-fst",[xP]:"fire-fst-compat",[kP]:"fire-vertex","fire-js":"fire-js",[NP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,VP=new Map,$p=new Map;function S_(n,e){try{n.container.addComponent(e)}catch(t){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function to(n){const e=n.name;if($p.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,n);for(const t of Eh.values())S_(t,n);for(const t of VP.values())S_(t,n);return!0}function Ru(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Pu("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=OP;function pE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ys.create("bad-app-name",{appName:String(s)});if(t||(t=uE()),!t)throw Ys.create("no-options");const a=Eh.get(s);if(a){if(ds(t,a.options)&&ds(r,a.config))return a;throw Ys.create("duplicate-app",{appName:s})}const u=new B1(s);for(const f of $p.values())u.addComponent(f);const d=new LP(t,r,u);return Eh.set(s,d),d}function td(n=zp){const e=Eh.get(n);if(!e&&n===zp&&uE())return pE();if(!e)throw Ys.create("no-app",{appName:n});return e}function Fr(n,e,t){var r;let s=(r=DP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(d.join(" "));return}to(new fs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="firebase-heartbeat-database",FP=1,pu="firebase-heartbeat-store";let dp=null;function mE(){return dp||(dp=nP(jP,FP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ys.create("idb-open",{originalErrorMessage:n.message})})),dp}async function UP(n){try{const t=(await mE()).transaction(pu),r=await t.objectStore(pu).get(gE(n));return await t.done,r}catch(e){if(e instanceof fi)ps.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(t.message)}}}async function T_(n,e){try{const r=(await mE()).transaction(pu,"readwrite");await r.objectStore(pu).put(e,gE(n)),await r.done}catch(t){if(t instanceof fi)ps.warn(t.message);else{const r=Ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ps.warn(r.message)}}}function gE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=1024,$P=30;class BP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=I_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>$P){const u=qP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ps.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=I_(),{heartbeatsToSend:r,unsentEntries:s}=WP(this._heartbeatsCache.heartbeats),a=wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ps.warn(t),""}}}function I_(){return new Date().toISOString().substring(0,10)}function WP(n,e=zP){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),b_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),b_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x1()?N1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function b_(n){return wh(JSON.stringify({version:2,heartbeats:n})).length}function qP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n){to(new fs("platform-logger",e=>new sP(e),"PRIVATE")),to(new fs("heartbeat",e=>new BP(e),"PRIVATE")),Fr(Up,E_,n),Fr(Up,E_,"esm2017"),Fr("fire-js","")}KP("");var GP="firebase",QP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(GP,QP,"app");function xm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XP=vE,yE=new Pu("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Rm("@firebase/auth");function YP(n,...e){Sh.logLevel<=Je.WARN&&Sh.warn(`Auth (${Go}): ${n}`,...e)}function oh(n,...e){Sh.logLevel<=Je.ERROR&&Sh.error(`Auth (${Go}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(n,...e){throw Om(n,...e)}function ci(n,...e){return Om(n,...e)}function Nm(n,e,t){const r=Object.assign(Object.assign({},XP()),{[e]:t});return new Pu("auth","Firebase",r).create(e,{appName:n.name})}function Js(n){return Nm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _E(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ji(n,"argument-error"),Nm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Om(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yE.create(n,...e)}function je(n,e,...t){if(!n)throw Om(e,...t)}function ls(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oh(e),new Error(e)}function ms(n,e){n||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JP(){return C_()==="http:"||C_()==="https:"}function C_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||P1()||"connection"in navigator)?navigator.onLine:!0}function eA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,ms(t>e,"Short delay should be less than long delay!"),this.isMobile=I1()||A1()}get(){return ZP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n,e){ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rA=new ku(3e4,6e4);function Vm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ol(n,e,t,r,s={}){return EE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=Au(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return C1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&_s(n.emulatorConfig.host)&&(m.credentials="include"),wE.fetch()(await SE(n,n.config.apiHost,t,d),m)})}async function EE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},tA),e);try{const s=new sA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Hc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Hc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Hc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Nm(n,_,m);ji(n,_)}}catch(s){if(s instanceof fi)throw s;ji(n,"network-request-failed",{message:String(s)})}}async function iA(n,e,t,r,s={}){const a=await ol(n,e,t,r,s);return"mfaPendingCredential"in a&&ji(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function SE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Dm(n.config,s):`${n.config.apiScheme}://${s}`;return nA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class sA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),rA.get())})}}function Hc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ci(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n,e){return ol(n,"POST","/v1/accounts:delete",e)}async function Th(n,e){return ol(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aA(n,e=!1){const t=Pt(n),r=await t.getIdToken(e),s=Mm(r);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ou(fp(s.auth_time)),issuedAtTime:ou(fp(s.iat)),expirationTime:ou(fp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fp(n){return Number(n)*1e3}function Mm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const s=aE(t);return s?JSON.parse(s):(oh("Failed to decode base64 JWT payload"),null)}catch(s){return oh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function P_(n){const e=Mm(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof fi&&lA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(n){var e;const t=n.auth,r=await n.getIdToken(),s=await mu(n,Th(t,{idToken:r}));je(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?TE(a.providerUserInfo):[],d=hA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?m:!1,S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Wp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,S)}async function cA(n){const e=Pt(n);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function TE(n){return n.map(e=>{var{providerId:t}=e,r=xm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n,e){const t=await EE(n,{},async()=>{const r=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await SE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&_s(n.emulatorConfig.host)&&(f.credentials="include"),wE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fA(n,e){return ol(n,"POST","/v2/accounts:revokeToken",Vm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=P_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await dA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new za;return r&&(je(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(je(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await mu(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await mu(this,oA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,_;const S=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,R=(d=t.tenantId)!==null&&d!==void 0?d:void 0,C=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,$=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:G,emailVerified:ee,isAnonymous:X,providerData:re,stsTokenManager:k}=t;je(G&&k,e,"internal-error");const P=za.fromJSON(this.name,k);je(typeof G=="string",e,"internal-error"),$s(S,e.name),$s(w,e.name),je(typeof ee=="boolean",e,"internal-error"),je(typeof X=="boolean",e,"internal-error"),$s(A,e.name),$s(O,e.name),$s(R,e.name),$s(C,e.name),$s($,e.name),$s(Q,e.name);const N=new li({uid:G,auth:e,email:w,emailVerified:ee,displayName:S,isAnonymous:X,photoURL:O,phoneNumber:A,tenantId:R,stsTokenManager:P,createdAt:$,lastLoginAt:Q});return re&&Array.isArray(re)&&(N.providerData=re.map(j=>Object.assign({},j))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new za;s.updateFromServerResponse(t);const a=new li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ih(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];je(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?TE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new za;d.updateFromIdToken(r);const f=new li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function us(n){ms(n instanceof Function,"Expected a class definition");let e=A_.get(n);return e?(ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,A_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IE.type="NONE";const R_=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n,e,t){return`firebase:${n}:${e}:${t}`}class $a{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=ah(this.userKey,s.apiKey,a),this.fullPersistenceKey=ah("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Th(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $a(us(R_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||us(R_);const u=ah(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(u);if(_){let S;if(typeof _=="string"){const w=await Th(e,{idToken:_}).catch(()=>{});if(!w)break;S=await li._fromGetAccountInfoResponse(e,w,_)}else S=li._fromJSON(e,_);m!==a&&(d=S),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new $a(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new $a(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kE(e))return"Blackberry";if(xE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||PE(e))&&!e.includes("edge/"))return"Chrome";if(RE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bE(n=kn()){return/firefox\//i.test(n)}function CE(n=kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PE(n=kn()){return/crios\//i.test(n)}function AE(n=kn()){return/iemobile/i.test(n)}function RE(n=kn()){return/android/i.test(n)}function kE(n=kn()){return/blackberry/i.test(n)}function xE(n=kn()){return/webos/i.test(n)}function Lm(n=kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pA(n=kn()){var e;return Lm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mA(){return R1()&&document.documentMode===10}function NE(n=kn()){return Lm(n)||RE(n)||xE(n)||kE(n)||/windows phone/i.test(n)||AE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n,e=[]){let t;switch(n){case"Browser":t=k_(kn());break;case"Worker":t=`${k_(kn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Go}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(n,e={}){return ol(n,"GET","/v2/passwordPolicy",Vm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=6;class _A{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:yA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x_(this),this.idTokenSubscription=new x_(this),this.beforeStateQueue=new gA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=us(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Th(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Js(this));const t=e?Pt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vA(this),t=new _A(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await fA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&us(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function al(n){return Pt(n)}class x_{constructor(e){this.auth=e,this.observer=null,this.addObserver=L1(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EA(n){jm=n}function SA(n){return jm.loadJS(n)}function TA(){return jm.gapiScript}function IA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n,e){const t=Ru(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ds(a,e??{}))return s;ji(s,"already-initialized")}return t.initialize({options:e})}function CA(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(us);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PA(n,e,t){const r=al(n);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=DE(e),{host:u,port:d}=AA(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(ds(m,r.config.emulator)&&ds(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,_s(u)?(Zh(`${a}//${u}${f}`),ed("Auth",!0)):RA()}function DE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AA(n){const e=DE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:N_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:N_(u)}}}function N_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,t){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(n,e){return iA(n,"POST","/v1/accounts:signInWithIdp",Vm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="http://localhost";class $o extends VE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=xm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new $o(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ba(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){const e={requestUri:kA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends nd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends xu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return as.credential(t,r)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends xu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends xu{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await li._fromIdTokenResponse(e,r,s),u=O_(r);return new Ga({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=O_(r);return new Ga({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function O_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends fi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new bh(e,t,r,s)}}function ME(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(n,a,e,r):a})}async function xA(n,e,t=!1){const r=await mu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(n,e,t=!1){const{auth:r}=n;if(lr(r.app))return Promise.reject(Js(r));const s="reauthenticate";try{const a=await mu(n,ME(r,s,e,n),t);je(a.idToken,r,"internal-error");const u=Mm(a.idToken);je(u,r,"internal-error");const{sub:d}=u;return je(n.uid===d,r,"user-mismatch"),Ga._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ji(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,e,t=!1){if(lr(n.app))return Promise.reject(Js(n));const r="signIn",s=await ME(n,r,e),a=await Ga._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e){return Pt(n).setPersistence(e)}function LE(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function VA(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function rd(n){return Pt(n).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1e3,LA=10;class FE extends jE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);mA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LA):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FE.type="LOCAL";const UE=FE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends jE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zE.type="SESSION";const $E=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await jA(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Fm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(S){const w=S;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(w.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function UA(n){Ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function zA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $A(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BA(){return BE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebaseLocalStorageDb",WA=1,Ph="firebaseLocalStorage",HE="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sd(n,e){return n.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function HA(){const n=indexedDB.deleteDatabase(WE);return new Nu(n).toPromise()}function Hp(){const n=indexedDB.open(WE,WA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ph,{keyPath:HE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await HA(),e(await Hp()))})})}async function D_(n,e,t){const r=sd(n,!0).put({[HE]:e,value:t});return new Nu(r).toPromise()}async function qA(n,e){const t=sd(n,!1).get(e),r=await new Nu(t).toPromise();return r===void 0?null:r.value}function V_(n,e){const t=sd(n,!0).delete(e);return new Nu(t).toPromise()}const KA=800,GA=3;class qE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>GA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(BA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await zA(),!this.activeServiceWorker)return;this.sender=new FA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$A()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await D_(e,Ch,"1"),await V_(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>D_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qA(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>V_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=sd(s,!1).getAll();return new Nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qE.type="LOCAL";const QA=qE;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){return e?us(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends VE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XA(n){return OA(n.auth,new zm(n),n.bypassAuthState)}function YA(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),NA(t,new zm(n),n.bypassAuthState)}async function JA(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),xA(t,new zm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XA;case"linkViaPopup":case"linkViaRedirect":return JA;case"reauthViaPopup":case"reauthViaRedirect":return YA;default:ji(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new ku(2e3,1e4);async function eR(n,e,t){if(lr(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));const r=al(n);_E(n,e,nd);const s=Um(r,t);return new Lo(r,"signInViaPopup",e,s).executeNotNull()}class Lo extends KE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZA.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="pendingRedirect",lh=new Map;class nR extends KE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const r=await rR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rR(n,e){const t=QE(e),r=GE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function iR(n,e){return GE(n)._set(QE(e),"true")}function sR(n,e){lh.set(n._key(),e)}function GE(n){return us(n._redirectPersistence)}function QE(n){return ah(tR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n,e,t){return aR(n,e,t)}async function aR(n,e,t){if(lr(n.app))return Promise.reject(Js(n));const r=al(n);_E(n,e,nd),await r._initializationPromise;const s=Um(r,t);return await iR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function lR(n,e){return await al(n)._initializationPromise,XE(n,e,!1)}async function XE(n,e,t=!1){if(lr(n.app))return Promise.reject(Js(n));const r=al(n),s=Um(r,e),u=await new nR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=600*1e3;class cR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uR&&this.cachedEventUids.clear(),this.cachedEventUids.has(M_(e))}saveEventToCache(e){this.cachedEventUids.add(M_(e)),this.lastProcessedEventTime=Date.now()}}function M_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n,e={}){return ol(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pR=/^https?/;async function mR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dR(n);for(const t of e)try{if(gR(t))return}catch{}ji(n,"unauthorized-domain")}function gR(n){const e=Bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!pR.test(t))return!1;if(fR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new ku(3e4,6e4);function L_(){const n=Ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yR(n){return new Promise((e,t)=>{var r,s,a;function u(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),t(ci(n,"network-request-failed"))},timeout:vR.get()})}if(!((s=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ni().gapi)===null||a===void 0)&&a.load)u();else{const d=IA("iframefcb");return Ni()[d]=()=>{gapi.load?u():t(ci(n,"network-request-failed"))},SA(`${TA()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw uh=null,e})}let uh=null;function _R(n){return uh=uh||yR(n),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new ku(5e3,15e3),ER="__/auth/iframe",SR="emulator/auth/iframe",TR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bR(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dm(e,SR):`https://${n.config.authDomain}/${ER}`,r={apiKey:e.apiKey,appName:n.name,v:Go},s=IR.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Au(r).slice(1)}`}async function CR(n){const e=await _R(n),t=Ni().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:bR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TR,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=ci(n,"network-request-failed"),d=Ni().setTimeout(()=>{a(u)},wR.get());function f(){Ni().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AR=500,RR=600,kR="_blank",xR="http://localhost";class j_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NR(n,e,t,r=AR,s=RR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},PR),{width:r.toString(),height:s.toString(),top:a,left:u}),m=kn().toLowerCase();t&&(d=PE(m)?kR:t),bE(m)&&(e=e||xR,f.scrollbars="yes");const _=Object.entries(f).reduce((w,[A,O])=>`${w}${A}=${O},`,"");if(pA(m)&&d!=="_self")return OR(e||"",d),new j_(null);const S=window.open(e||"",d,_);je(S,n,"popup-blocked");try{S.focus()}catch{}return new j_(S)}function OR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="__/auth/handler",VR="emulator/auth/handler",MR=encodeURIComponent("fac");async function F_(n,e,t,r,s,a){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Go,eventId:s};if(e instanceof nd){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",M1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))u[_]=S}if(e instanceof xu){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${MR}=${encodeURIComponent(f)}`:"";return`${LR(n)}?${Au(d).slice(1)}${m}`}function LR({config:n}){return n.emulator?Dm(n,VR):`https://${n.authDomain}/${DR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class jR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=XE,this._overrideRedirectResult=sR}async _openPopup(e,t,r,s){var a;ms((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await F_(e,t,r,Bp(),s);return NR(e,u,Fm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await F_(e,t,r,Bp(),s);return UA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ms(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CR(e),r=new cR(e);return t.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[pp];u!==void 0&&t(!!u),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NE()||CE()||Lm()}}const FR=jR;var U_="@firebase/auth",z_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $R(n){to(new fs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;je(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OE(n)},m=new wA(r,s,a,f);return CA(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),to(new fs("auth-internal",e=>{const t=al(e.getProvider("auth").getImmediate());return(r=>new UR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(U_,z_,zR(n)),Fr(U_,z_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=300,WR=cE("authIdTokenMaxAge")||BR;let $_=null;const HR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>WR)return;const s=t==null?void 0:t.token;$_!==s&&($_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function qR(n=td()){const e=Ru(n,"auth");if(e.isInitialized())return e.getImmediate();const t=bA(n,{popupRedirectResolver:FR,persistence:[QA,UE,$E]}),r=cE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=HR(a.toString());VA(t,u,()=>u(t.currentUser)),LE(t,d=>u(d))}}const s=lE("auth");return s&&PA(t,`http://${s}`),t}function KR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}EA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=ci("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",KR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$R("Browser");var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,JE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,P){function N(){}N.prototype=P.prototype,k.D=P.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function(j,M,L){for(var x=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)x[Fe-2]=arguments[Fe];return P.prototype[M].apply(j,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,P,N){N||(N=0);var j=Array(16);if(typeof P=="string")for(var M=0;16>M;++M)j[M]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(M=0;16>M;++M)j[M]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=k.g[0],N=k.g[1],M=k.g[2];var L=k.g[3],x=P+(L^N&(M^L))+j[0]+3614090360&4294967295;P=N+(x<<7&4294967295|x>>>25),x=L+(M^P&(N^M))+j[1]+3905402710&4294967295,L=P+(x<<12&4294967295|x>>>20),x=M+(N^L&(P^N))+j[2]+606105819&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(P^M&(L^P))+j[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=P+(L^N&(M^L))+j[4]+4118548399&4294967295,P=N+(x<<7&4294967295|x>>>25),x=L+(M^P&(N^M))+j[5]+1200080426&4294967295,L=P+(x<<12&4294967295|x>>>20),x=M+(N^L&(P^N))+j[6]+2821735955&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(P^M&(L^P))+j[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=P+(L^N&(M^L))+j[8]+1770035416&4294967295,P=N+(x<<7&4294967295|x>>>25),x=L+(M^P&(N^M))+j[9]+2336552879&4294967295,L=P+(x<<12&4294967295|x>>>20),x=M+(N^L&(P^N))+j[10]+4294925233&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(P^M&(L^P))+j[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=P+(L^N&(M^L))+j[12]+1804603682&4294967295,P=N+(x<<7&4294967295|x>>>25),x=L+(M^P&(N^M))+j[13]+4254626195&4294967295,L=P+(x<<12&4294967295|x>>>20),x=M+(N^L&(P^N))+j[14]+2792965006&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(P^M&(L^P))+j[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=P+(M^L&(N^M))+j[1]+4129170786&4294967295,P=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(P^N))+j[6]+3225465664&4294967295,L=P+(x<<9&4294967295|x>>>23),x=M+(P^N&(L^P))+j[11]+643717713&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^P&(M^L))+j[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=P+(M^L&(N^M))+j[5]+3593408605&4294967295,P=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(P^N))+j[10]+38016083&4294967295,L=P+(x<<9&4294967295|x>>>23),x=M+(P^N&(L^P))+j[15]+3634488961&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^P&(M^L))+j[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=P+(M^L&(N^M))+j[9]+568446438&4294967295,P=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(P^N))+j[14]+3275163606&4294967295,L=P+(x<<9&4294967295|x>>>23),x=M+(P^N&(L^P))+j[3]+4107603335&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^P&(M^L))+j[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=P+(M^L&(N^M))+j[13]+2850285829&4294967295,P=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(P^N))+j[2]+4243563512&4294967295,L=P+(x<<9&4294967295|x>>>23),x=M+(P^N&(L^P))+j[7]+1735328473&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^P&(M^L))+j[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=P+(N^M^L)+j[5]+4294588738&4294967295,P=N+(x<<4&4294967295|x>>>28),x=L+(P^N^M)+j[8]+2272392833&4294967295,L=P+(x<<11&4294967295|x>>>21),x=M+(L^P^N)+j[11]+1839030562&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^P)+j[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=P+(N^M^L)+j[1]+2763975236&4294967295,P=N+(x<<4&4294967295|x>>>28),x=L+(P^N^M)+j[4]+1272893353&4294967295,L=P+(x<<11&4294967295|x>>>21),x=M+(L^P^N)+j[7]+4139469664&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^P)+j[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=P+(N^M^L)+j[13]+681279174&4294967295,P=N+(x<<4&4294967295|x>>>28),x=L+(P^N^M)+j[0]+3936430074&4294967295,L=P+(x<<11&4294967295|x>>>21),x=M+(L^P^N)+j[3]+3572445317&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^P)+j[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=P+(N^M^L)+j[9]+3654602809&4294967295,P=N+(x<<4&4294967295|x>>>28),x=L+(P^N^M)+j[12]+3873151461&4294967295,L=P+(x<<11&4294967295|x>>>21),x=M+(L^P^N)+j[15]+530742520&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^P)+j[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=P+(M^(N|~L))+j[0]+4096336452&4294967295,P=N+(x<<6&4294967295|x>>>26),x=L+(N^(P|~M))+j[7]+1126891415&4294967295,L=P+(x<<10&4294967295|x>>>22),x=M+(P^(L|~N))+j[14]+2878612391&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~P))+j[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=P+(M^(N|~L))+j[12]+1700485571&4294967295,P=N+(x<<6&4294967295|x>>>26),x=L+(N^(P|~M))+j[3]+2399980690&4294967295,L=P+(x<<10&4294967295|x>>>22),x=M+(P^(L|~N))+j[10]+4293915773&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~P))+j[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=P+(M^(N|~L))+j[8]+1873313359&4294967295,P=N+(x<<6&4294967295|x>>>26),x=L+(N^(P|~M))+j[15]+4264355552&4294967295,L=P+(x<<10&4294967295|x>>>22),x=M+(P^(L|~N))+j[6]+2734768916&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~P))+j[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=P+(M^(N|~L))+j[4]+4149444226&4294967295,P=N+(x<<6&4294967295|x>>>26),x=L+(N^(P|~M))+j[11]+3174756917&4294967295,L=P+(x<<10&4294967295|x>>>22),x=M+(P^(L|~N))+j[2]+718787259&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~P))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,P){P===void 0&&(P=k.length);for(var N=P-this.blockSize,j=this.B,M=this.h,L=0;L<P;){if(M==0)for(;L<=N;)s(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<P;)if(j[M++]=k.charCodeAt(L++),M==this.blockSize){s(this,j),M=0;break}}else for(;L<P;)if(j[M++]=k[L++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=P},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;var N=8*this.o;for(P=k.length-8;P<k.length;++P)k[P]=N&255,N/=256;for(this.u(k),k=Array(16),P=N=0;4>P;++P)for(var j=0;32>j;j+=8)k[N++]=this.g[P]>>>j&255;return k};function a(k,P){var N=d;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=P(k)}function u(k,P){this.h=P;for(var N=[],j=!0,M=k.length-1;0<=M;M--){var L=k[M]|0;j&&L==P||(N[M]=L,j=!1)}this.g=N}var d={};function f(k){return-128<=k&&128>k?a(k,function(P){return new u([P|0],0>P?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return C(m(-k));for(var P=[],N=1,j=0;k>=N;j++)P[j]=k/N|0,N*=4294967296;return new u(P,0)}function _(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return C(_(k.substring(1),P));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(P,8)),j=S,M=0;M<k.length;M+=8){var L=Math.min(8,k.length-M),x=parseInt(k.substring(M,M+L),P);8>L?(L=m(Math.pow(P,L)),j=j.j(L).add(m(x))):(j=j.j(N),j=j.add(m(x)))}return j}var S=f(0),w=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(R(this))return-C(this).m();for(var k=0,P=1,N=0;N<this.g.length;N++){var j=this.i(N);k+=(0<=j?j:4294967296+j)*P,P*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(R(this))return"-"+C(this).toString(k);for(var P=m(Math.pow(k,6)),N=this,j="";;){var M=ee(N,P).g;N=$(N,M.j(P));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=M,O(N))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(var P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function R(k){return k.h==-1}n.l=function(k){return k=$(this,k),R(k)?-1:O(k)?0:1};function C(k){for(var P=k.g.length,N=[],j=0;j<P;j++)N[j]=~k.g[j];return new u(N,~k.h).add(w)}n.abs=function(){return R(this)?C(this):this},n.add=function(k){for(var P=Math.max(this.g.length,k.g.length),N=[],j=0,M=0;M<=P;M++){var L=j+(this.i(M)&65535)+(k.i(M)&65535),x=(L>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);j=x>>>16,L&=65535,x&=65535,N[M]=x<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function $(k,P){return k.add(C(P))}n.j=function(k){if(O(this)||O(k))return S;if(R(this))return R(k)?C(this).j(C(k)):C(C(this).j(k));if(R(k))return C(this.j(C(k)));if(0>this.l(A)&&0>k.l(A))return m(this.m()*k.m());for(var P=this.g.length+k.g.length,N=[],j=0;j<2*P;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<k.g.length;M++){var L=this.i(j)>>>16,x=this.i(j)&65535,Fe=k.i(M)>>>16,Oe=k.i(M)&65535;N[2*j+2*M]+=x*Oe,Q(N,2*j+2*M),N[2*j+2*M+1]+=L*Oe,Q(N,2*j+2*M+1),N[2*j+2*M+1]+=x*Fe,Q(N,2*j+2*M+1),N[2*j+2*M+2]+=L*Fe,Q(N,2*j+2*M+2)}for(j=0;j<P;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=P;j<2*P;j++)N[j]=0;return new u(N,0)};function Q(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function G(k,P){this.g=k,this.h=P}function ee(k,P){if(O(P))throw Error("division by zero");if(O(k))return new G(S,S);if(R(k))return P=ee(C(k),P),new G(C(P.g),C(P.h));if(R(P))return P=ee(k,C(P)),new G(C(P.g),P.h);if(30<k.g.length){if(R(k)||R(P))throw Error("slowDivide_ only works with positive integers.");for(var N=w,j=P;0>=j.l(k);)N=X(N),j=X(j);var M=re(N,1),L=re(j,1);for(j=re(j,2),N=re(N,2);!O(j);){var x=L.add(j);0>=x.l(k)&&(M=M.add(N),L=x),j=re(j,1),N=re(N,1)}return P=$(k,M.j(P)),new G(M,P)}for(M=S;0<=k.l(P);){for(N=Math.max(1,Math.floor(k.m()/P.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=m(N),x=L.j(P);R(x)||0<x.l(k);)N-=j,L=m(N),x=L.j(P);O(L)&&(L=w),M=M.add(L),k=$(k,x)}return new G(M,k)}n.A=function(k){return ee(this,k).h},n.and=function(k){for(var P=Math.max(this.g.length,k.g.length),N=[],j=0;j<P;j++)N[j]=this.i(j)&k.i(j);return new u(N,this.h&k.h)},n.or=function(k){for(var P=Math.max(this.g.length,k.g.length),N=[],j=0;j<P;j++)N[j]=this.i(j)|k.i(j);return new u(N,this.h|k.h)},n.xor=function(k){for(var P=Math.max(this.g.length,k.g.length),N=[],j=0;j<P;j++)N[j]=this.i(j)^k.i(j);return new u(N,this.h^k.h)};function X(k){for(var P=k.g.length+1,N=[],j=0;j<P;j++)N[j]=k.i(j)<<1|k.i(j-1)>>>31;return new u(N,k.h)}function re(k,P){var N=P>>5;P%=32;for(var j=k.g.length-N,M=[],L=0;L<j;L++)M[L]=0<P?k.i(L+N)>>>P|k.i(L+N+1)<<32-P:k.i(L+N);return new u(M,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Zs=u}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,Zl,eS,ch,qp,tS,nS,rS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,E){return c==Array.prototype||c==Object.prototype||(c[v]=E.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var v=0;v<c.length;++v){var E=c[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(c,v){if(v)e:{var E=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var W=c[b];if(!(W in E))break e;E=E[W]}c=c[c.length-1],b=E[c],v=v(b),v!=b&&v!=null&&e(E,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var E=0,b=!1,W={next:function(){if(!b&&E<c.length){var J=E++;return{value:v(J,c[J]),done:!1}}return b=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(c){return c||function(){return a(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function m(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,E){return c.call.apply(c.bind,arguments)}function S(c,v,E){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,b),c.apply(v,W)}}return function(){return c.apply(v,arguments)}}function w(c,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,w.apply(null,arguments)}function A(c,v){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function O(c,v){function E(){}E.prototype=v.prototype,c.aa=v.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(b,W,J){for(var de=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)de[yt-2]=arguments[yt];return v.prototype[W].apply(b,de)}}function R(c){const v=c.length;if(0<v){const E=Array(v);for(let b=0;b<v;b++)E[b]=c[b];return E}return[]}function C(c,v){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(f(b)){const W=c.length||0,J=b.length||0;c.length=W+J;for(let de=0;de<J;de++)c[W+de]=b[de]}else c.push(b)}}class ${constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var X=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function re(c,v,E){for(const b in c)v.call(E,c[b],b,c)}function k(c,v){for(const E in c)v.call(void 0,c[E],E,c)}function P(c){const v={};for(const E in c)v[E]=c[E];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,v){let E,b;for(let W=1;W<arguments.length;W++){b=arguments[W];for(E in b)c[E]=b[E];for(let J=0;J<N.length;J++)E=N[J],Object.prototype.hasOwnProperty.call(b,E)&&(c[E]=b[E])}}function M(c){var v=1;c=c.split(":");const E=[];for(;0<v&&c.length;)E.push(c.shift()),v--;return c.length&&E.push(c.join(":")),E}function L(c){d.setTimeout(()=>{throw c},0)}function x(){var c=ye;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,E){const b=Oe.get();b.set(v,E),this.h?this.h.next=b:this.g=b,this.h=b}}var Oe=new $(()=>new Be,c=>c.reset());class Be{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,ae=!1,ye=new Fe,he=()=>{const c=d.Promise.resolve(void 0);Ve=()=>{c.then(B)}};var B=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(E){L(E)}var v=Oe;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ae=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return c})();function Pe(c,v){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(X){e:{try{ee(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else E=="mouseover"?v=c.fromElement:E=="mouseout"&&(v=c.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}O(Pe,fe);var le={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),De=0;function Ge(c,v,E,b,W){this.listener=c,this.proxy=null,this.src=v,this.type=E,this.capture=!!b,this.ha=W,this.key=++De,this.da=this.fa=!1}function Tt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ie(c){this.src=c,this.g={},this.h=0}ie.prototype.add=function(c,v,E,b,W){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var de=st(c,v,b,W);return-1<de?(v=c[de],E||(v.fa=!1)):(v=new Ge(v,this.src,J,!!b,W),v.fa=E,c.push(v)),v};function qe(c,v){var E=v.type;if(E in c.g){var b=c.g[E],W=Array.prototype.indexOf.call(b,v,void 0),J;(J=0<=W)&&Array.prototype.splice.call(b,W,1),J&&(Tt(v),c.g[E].length==0&&(delete c.g[E],c.h--))}}function st(c,v,E,b){for(var W=0;W<c.length;++W){var J=c[W];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==b)return W}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),at={};function xt(c,v,E,b,W){if(Array.isArray(v)){for(var J=0;J<v.length;J++)xt(c,v[J],E,b,W);return null}return E=$r(E),c&&c[Me]?c.K(v,E,m(b)?!!b.capture:!1,W):wt(c,v,E,!1,b,W)}function wt(c,v,E,b,W,J){if(!v)throw Error("Invalid event type");var de=m(W)?!!W.capture:!!W,yt=ut(c);if(yt||(c[rt]=yt=new ie(c)),E=yt.add(v,E,b,de,J),E.proxy)return E;if(b=lt(),E.proxy=b,b.src=c,b.listener=E,c.addEventListener)ge||(W=de),W===void 0&&(W=!1),c.addEventListener(v.toString(),b,W);else if(c.attachEvent)c.attachEvent(Lt(v.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function lt(){function c(E){return v.call(c.src,c.listener,E)}const v=et;return c}function sn(c,v,E,b,W){if(Array.isArray(v))for(var J=0;J<v.length;J++)sn(c,v[J],E,b,W);else b=m(b)?!!b.capture:!!b,E=$r(E),c&&c[Me]?(c=c.i,v=String(v).toString(),v in c.g&&(J=c.g[v],E=st(J,E,b,W),-1<E&&(Tt(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete c.g[v],c.h--)))):c&&(c=ut(c))&&(v=c.g[v.toString()],c=-1,v&&(c=st(v,E,b,W)),(E=-1<c?v[c]:null)&&pt(E))}function pt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Me])qe(v.i,c);else{var E=c.type,b=c.proxy;v.removeEventListener?v.removeEventListener(E,b,c.capture):v.detachEvent?v.detachEvent(Lt(E),b):v.addListener&&v.removeListener&&v.removeListener(b),(E=ut(v))?(qe(E,c),E.h==0&&(E.src=null,v[rt]=null)):Tt(c)}}}function Lt(c){return c in at?at[c]:at[c]="on"+c}function et(c,v){if(c.da)c=!0;else{v=new Pe(v,this);var E=c.listener,b=c.ha||c.src;c.fa&&pt(c),c=E.call(b,v)}return c}function ut(c){return c=c[rt],c instanceof ie?c:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(c){return typeof c=="function"?c:(c[zr]||(c[zr]=function(v){return c.handleEvent(v)}),c[zr])}function mt(){U.call(this),this.i=new ie(this),this.M=this,this.F=null}O(mt,U),mt.prototype[Me]=!0,mt.prototype.removeEventListener=function(c,v,E,b){sn(this,c,v,E,b)};function It(c,v){var E,b=c.F;if(b)for(E=[];b;b=b.F)E.push(b);if(c=c.M,b=v.type||v,typeof v=="string")v=new fe(v,c);else if(v instanceof fe)v.target=v.target||c;else{var W=v;v=new fe(b,c),j(v,W)}if(W=!0,E)for(var J=E.length-1;0<=J;J--){var de=v.g=E[J];W=Ir(de,b,!0,v)&&W}if(de=v.g=c,W=Ir(de,b,!0,v)&&W,W=Ir(de,b,!1,v)&&W,E)for(J=0;J<E.length;J++)de=v.g=E[J],W=Ir(de,b,!1,v)&&W}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var E=c.g[v],b=0;b<E.length;b++)Tt(E[b]);delete c.g[v],c.h--}}this.F=null},mt.prototype.K=function(c,v,E,b){return this.i.add(String(c),v,!1,E,b)},mt.prototype.L=function(c,v,E,b){return this.i.add(String(c),v,!0,E,b)};function Ir(c,v,E,b){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,J=0;J<v.length;++J){var de=v[J];if(de&&!de.da&&de.capture==E){var yt=de.listener,en=de.ha||de.src;de.fa&&qe(c.i,de),W=yt.call(en,b)!==!1&&W}}return W&&!b.defaultPrevented}function Br(c,v,E){if(typeof c=="function")E&&(c=w(c,E));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(c,v||0)}function dr(c){c.g=Br(()=>{c.g=null,c.i&&(c.i=!1,dr(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Wn extends U{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(c){U.call(this),this.h=c,this.g={}}O(br,U);var Cr=[];function Ui(c){re(c.g,function(v,E){this.g.hasOwnProperty(E)&&pt(v)},c),c.g={}}br.prototype.N=function(){br.aa.N.call(this),Ui(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=d.JSON.stringify,Wr=d.JSON.parse,zi=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function $i(){}$i.prototype.h=null;function Hr(c){return c.h||(c.h=c.i())}function Pr(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wn(){fe.call(this,"d")}O(wn,fe);function pi(){fe.call(this,"c")}O(pi,fe);var qn={},Es=null;function qr(){return Es=Es||new mt}qn.La="serverreachability";function Ss(c){fe.call(this,qn.La,c)}O(Ss,fe);function Ar(c){const v=qr();It(v,new Ss(v))}qn.STAT_EVENT="statevent";function on(c,v){fe.call(this,qn.STAT_EVENT,c),this.stat=v}O(on,fe);function Ye(c){const v=qr();It(v,new on(v,c))}qn.Ma="timingevent";function We(c,v){fe.call(this,qn.Ma,c),this.size=v}O(We,fe);function En(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function mi(c,v,E,b,W,J){c.info(function(){if(c.g)if(J)for(var de="",yt=J.split("&"),en=0;en<yt.length;en++){var tt=yt[en].split("=");if(1<tt.length){var an=tt[0];tt=tt[1];var qt=an.split("_");de=2<=qt.length&&qt[1]=="type"?de+(an+"="+tt+"&"):de+(an+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+b+") [attempt "+W+"]: "+v+`
`+E+`
`+de})}function Kn(c,v,E,b,W,J,de){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+W+"]: "+v+`
`+E+`
`+J+" "+de})}function Gn(c,v,E,b){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Zo(c,E)+(b?" "+b:"")})}function Kr(c,v){c.info(function(){return"TIMEOUT: "+v})}Nt.prototype.info=function(){};function Zo(c,v){if(!c.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var b=E[c];if(!(2>b.length)){var W=b[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return Hn(E)}catch{return v}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ea={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function Bi(){}O(Bi,$i),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},Qn=new Bi;function Xn(c,v,E,b){this.j=c,this.i=v,this.l=E,this.R=b||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fo}function fo(){this.i=null,this.g="",this.h=!1}var Wi={},Hi={};function Vn(c,v,E){c.L=1,c.v=yi(Ln(v)),c.m=E,c.P=!0,po(c,null)}function po(c,v){c.F=Date.now(),He(c),c.A=Ln(c.v);var E=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Jr(E.i,"t",b),c.C=0,E=c.j.J,c.h=new fo,c.g=Qu(c.j,E?v:null,!c.m),0<c.O&&(c.M=new Wn(w(c.Y,c,c.g),c.O)),v=c.U,E=c.g,b=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Cr[0]=W.toString()),W=Cr);for(var J=0;J<W.length;J++){var de=xt(E,W[J],b||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=c.H?P(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),Ar(),mi(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;const v=this.M;v&&er(c)==3?v.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const qt=er(this.g);var v=this.g.Ba();const kr=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||El(this.g)))){this.J||qt!=4||v==7||(v==8||0>=kr?Ar(3):Ar(2)),qi(this);var E=this.g.Z();this.X=E;t:if(ta(this)){var b=El(this.g);c="";var W=b.length,J=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Gr(this);var de="";break t}this.h.i=new d.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,c+=this.h.i.decode(b[v],{stream:!(J&&v==W-1)});b.length=0,this.h.g+=c,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=E==200,Kn(this.i,this.u,this.A,this.l,this.R,qt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,en=this.g;if((yt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(yt)){var tt=yt;break t}}tt=null}if(E=tt)Gn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mo(this,E);else{this.o=!1,this.s=3,Ye(12),Yn(this),Gr(this);break e}}if(this.P){E=!0;let mr;for(;!this.J&&this.C<de.length;)if(mr=vl(this,de),mr==Hi){qt==4&&(this.s=4,Ye(14),E=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==Wi){this.s=4,Ye(15),Gn(this.i,this.l,de,"[Invalid Chunk]"),E=!1;break}else Gn(this.i,this.l,mr,null),mo(this,mr);if(ta(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||de.length!=0||this.h.h||(this.s=1,Ye(16),E=!1),this.o=this.o&&E,!E)Gn(this.i,this.l,de,"[Invalid Chunked Response]"),Yn(this),Gr(this);else if(0<de.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Tl(an),an.M=!0,Ye(11))}}else Gn(this.i,this.l,de,null),mo(this,de);qt==4&&Yn(this),this.o&&!this.J&&(qt==4?ha(this.j,this):(this.o=!1,He(this)))}else oa(this.g),E==400&&0<de.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),Yn(this),Gr(this)}}}catch{}finally{}};function ta(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function vl(c,v){var E=c.C,b=v.indexOf(`
`,E);return b==-1?Hi:(E=Number(v.substring(E,b)),isNaN(E)?Wi:(b+=1,b+E>v.length?Hi:(v=v.slice(b,b+E),c.C=b+E,v)))}Xn.prototype.cancel=function(){this.J=!0,Yn(this)};function He(c){c.S=Date.now()+c.I,gt(c,c.I)}function gt(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=En(w(c.ba,c),v)}function qi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Kr(this.i,this.A),this.L!=2&&(Ar(),Ye(17)),Yn(this),this.s=2,Gr(this)):gt(this,this.S-c)};function Gr(c){c.j.G==0||c.J||ha(c.j,c)}function Yn(c){qi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,Ui(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function mo(c,v){try{var E=c.j;if(E.G!=0&&(E.g==c||dn(E.h,c))){if(!c.K&&dn(E.h,c)&&E.G==3){try{var b=E.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var W=b;if(W[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)ca(E),ti(E);else break e;ua(E),Ye(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=En(w(E.Za,E),6e3));if(1>=na(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ji(E,11)}else if((c.K||E.g==c)&&ca(E),!Q(v))for(W=E.Da.g.parse(v),v=0;v<W.length;v++){let tt=W[v];if(E.T=tt[0],tt=tt[1],E.G==2)if(tt[0]=="c"){E.K=tt[1],E.ia=tt[2];const an=tt[3];an!=null&&(E.la=an,E.j.info("VER="+E.la));const qt=tt[4];qt!=null&&(E.Aa=qt,E.j.info("SVER="+E.Aa));const kr=tt[5];kr!=null&&typeof kr=="number"&&0<kr&&(b=1.5*kr,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const mr=c.g;if(mr){const So=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var J=b.h;J.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(vo(J,J.h),J.h=null))}if(b.D){const fa=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(b.ya=fa,vt(b.I,b.D,fa))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var de=c;if(b.qa=Gu(b,b.J?b.ia:null,b.W),de.K){ra(b.h,de);var yt=de,en=b.L;en&&(yt.I=en),yt.B&&(qi(yt),He(yt)),b.g=de}else Eo(b);0<E.i.length&&Si(E)}else tt[0]!="stop"&&tt[0]!="close"||Ji(E,7);else E.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ji(E,7):fn(E):tt[0]!="noop"&&E.l&&E.l.ta(tt),E.v=0)}}Ar(4)}catch{}}var go=class{constructor(c,v){this.g=c,this.map=v}};function Ki(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function na(c){return c.h?1:c.g?c.g.size:0}function dn(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function vo(c,v){c.g?c.g.add(v):c.h=v}function ra(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Ki.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function yo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const E of c.g.values())v=v.concat(E.D);return v}return R(c.i)}function Is(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],E=c.length,b=0;b<E;b++)v.push(c[b]);return v}v=[],E=0;for(b in c)v[E++]=c[b];return v}function bs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var E=0;E<c;E++)v.push(E);return v}v=[],E=0;for(const b in c)v[E++]=b;return v}}}function gi(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var E=bs(c),b=Is(c),W=b.length,J=0;J<W;J++)v.call(void 0,b[J],E&&E[J],c)}var Gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(c,v){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var b=c[E].indexOf("="),W=null;if(0<=b){var J=c[E].substring(0,b);W=c[E].substring(b+1)}else J=c[E];v(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qr){this.h=c.h,Xr(this,c.j),this.o=c.o,this.g=c.g,vi(this,c.s),this.l=c.l;var v=c.i,E=new $t;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Yr(this,E),this.m=c.m}else c&&(v=String(c).match(Gi))?(this.h=!1,Xr(this,v[1]||"",!0),this.o=Xe(v[2]||""),this.g=Xe(v[3]||"",!0),vi(this,v[4]),this.l=Xe(v[5]||"",!0),Yr(this,v[6]||"",!0),this.m=Xe(v[7]||"")):(this.h=!1,this.i=new $t(null,this.h))}Qr.prototype.toString=function(){var c=[],v=this.j;v&&c.push(_i(v,q,!0),":");var E=this.g;return(E||v=="file")&&(c.push("//"),(v=this.o)&&c.push(_i(v,q,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(_i(E,E.charAt(0)=="/"?Ee:Z,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",_i(E,jn)),c.join("")};function Ln(c){return new Qr(c)}function Xr(c,v,E){c.j=E?Xe(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function vi(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function Yr(c,v,E){v instanceof $t?(c.i=v,wi(c.i,c.h)):(E||(v=_i(v,Ue)),c.i=new $t(v,c.h))}function vt(c,v,E){c.i.set(v,E)}function yi(c){return vt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xe(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _i(c,v,E){return typeof c=="string"?(c=encodeURI(c).replace(v,I),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function I(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var q=/[#\/\?@]/g,Z=/[#\?:]/g,Ee=/[#\?]/g,Ue=/[#\?@]/g,jn=/#/g;function $t(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Zt(c){c.g||(c.g=new Map,c.h=0,c.i&&yl(c.i,function(v,E){c.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=$t.prototype,n.add=function(c,v){Zt(this),this.i=null,c=Rr(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(v),this.h+=1,this};function fr(c,v){Zt(c),v=Rr(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Jn(c,v){return Zt(c),v=Rr(c,v),c.g.has(v)}n.forEach=function(c,v){Zt(this),this.g.forEach(function(E,b){E.forEach(function(W){c.call(v,W,b,this)},this)},this)},n.na=function(){Zt(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let b=0;b<v.length;b++){const W=c[b];for(let J=0;J<W.length;J++)E.push(v[b])}return E},n.V=function(c){Zt(this);let v=[];if(typeof c=="string")Jn(this,c)&&(v=v.concat(this.g.get(Rr(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)v=v.concat(c[E])}return v},n.set=function(c,v){return Zt(this),this.i=null,c=Rr(this,c),Jn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},n.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Jr(c,v,E){fr(c,v),0<E.length&&(c.i=null,c.g.set(Rr(c,v),R(E)),c.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var b=v[E];const J=encodeURIComponent(String(b)),de=this.V(b);for(b=0;b<de.length;b++){var W=J;de[b]!==""&&(W+="="+encodeURIComponent(String(de[b]))),c.push(W)}}return this.i=c.join("&")};function Rr(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function wi(c,v){v&&!c.j&&(Zt(c),c.i=null,c.g.forEach(function(E,b){var W=b.toLowerCase();b!=W&&(fr(this,b),Jr(this,W,E))},c)),c.j=v}function Nd(c,v){const E=new Nt;if(d.Image){const b=new Image;b.onload=A(Zn,E,"TestLoadImage: loaded",!0,v,b),b.onerror=A(Zn,E,"TestLoadImage: error",!1,v,b),b.onabort=A(Zn,E,"TestLoadImage: abort",!1,v,b),b.ontimeout=A(Zn,E,"TestLoadImage: timeout",!1,v,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else v(!1)}function $u(c,v){const E=new Nt,b=new AbortController,W=setTimeout(()=>{b.abort(),Zn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:b.signal}).then(J=>{clearTimeout(W),J.ok?Zn(E,"TestPingServer: ok",!0,v):Zn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Zn(E,"TestPingServer: error",!1,v)})}function Zn(c,v,E,b,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),b(E)}catch{}}function Od(){this.g=new zi}function Bu(c,v,E){const b=E||"";try{gi(c,function(W,J){let de=W;m(W)&&(de=Hn(W)),v.push(b+J+"="+encodeURIComponent(de))})}catch(W){throw v.push(b+"type="+encodeURIComponent("_badmap")),W}}function Qi(c){this.l=c.Ub||null,this.j=c.eb||!1}O(Qi,$i),Qi.prototype.g=function(){return new _o(this.l,this.j)},Qi.prototype.i=(function(c){return function(){return c}})({});function _o(c,v){mt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(_o,mt),n=_o.prototype,n.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,ei(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Zr(this):ei(this),this.readyState==3&&Wu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Zr(this))},n.Qa=function(c){this.g&&(this.response=c,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ei(c)}n.setRequestHeader=function(c,v){this.u.append(c,v)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=v.next();return c.join(`\r
`)};function ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xi(c){let v="";return re(c,function(E,b){v+=b,v+=":",v+=E,v+=`\r
`}),v}function Cs(c,v,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=Xi(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):vt(c,v,E))}function At(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(At,mt);var Dd=/^https?$/i,_l=["POST","PUT"];n=At.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,v,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?Hr(this.o):Hr(Qn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(J){wo(this,J);return}if(c=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var W in b)E.set(W,b[W]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())E.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),W=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_l,v,void 0))||b||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of E)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){wo(this,J)}};function wo(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,ia(c),pr(c)}function ia(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),pr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pr(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wl(this):this.bb())},n.bb=function(){wl(this)};function wl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||er(c)!=4||c.Z()!=2)){if(c.u&&er(c)==4)Br(c.Ea,0,c);else if(It(c,"readystatechange"),er(c)==4){c.h=!1;try{const de=c.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var b;if(b=de===0){var W=String(c.D).match(Gi)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),b=!Dd.test(W?W.toLowerCase():"")}E=b}if(E)It(c,"complete"),It(c,"success");else{c.m=6;try{var J=2<er(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ia(c)}}finally{pr(c)}}}}function pr(c,v){if(c.g){sa(c);const E=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||It(c,"ready");try{E.onreadystatechange=b}catch{}}}function sa(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function er(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Wr(v)}};function El(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(c){const v={};c=(c.g&&2<=er(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(Q(c[b]))continue;var E=M(c[b]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[W]||[];v[W]=J,J.push(E)}k(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(c,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||v}function Sl(c){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,c),this.cb=Ei("retryDelaySeedMs",1e4,c),this.Wa=Ei("forwardChannelMaxRetries",2,c),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(c&&c.concurrentRequestLimit),this.Da=new Od,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sl.prototype,n.la=8,n.G=1,n.connect=function(c,v,E,b){Ye(0),this.W=c,this.H=v||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=Gu(this,null,this.W),Si(this)};function fn(c){if(aa(c),c.G==3){var v=c.U++,E=Ln(c.I);if(vt(E,"SID",c.K),vt(E,"RID",v),vt(E,"TYPE","terminate"),Yi(c,E),v=new Xn(c,c.j,v),v.L=2,v.v=yi(Ln(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.v,E=!0),E||(v.g=Qu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),He(v)}Ku(c)}function ti(c){c.g&&(Tl(c),c.g.cancel(),c.g=null)}function aa(c){ti(c),c.u&&(d.clearTimeout(c.u),c.u=null),ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Si(c){if(!Mn(c.h)&&!c.s){c.s=!0;var v=c.Ga;Ve||he(),ae||(Ve(),ae=!0),ye.add(v,c),c.B=0}}function Vd(c,v){return na(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=En(w(c.Ga,c,v),qu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new Xn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=P(J),j(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Ps(this,W,v),E=Ln(this.I),vt(E,"RID",c),vt(E,"CVER",22),this.D&&vt(E,"X-HTTP-Session-Id",this.D),Yi(this,E),J&&(this.O?v="headers="+encodeURIComponent(String(Xi(J)))+"&"+v:this.m&&Cs(E,this.m,J)),vo(this.h,W),this.Ua&&vt(E,"TYPE","init"),this.P?(vt(E,"$req",v),vt(E,"SID","null"),W.T=!0,Vn(W,E,null)):Vn(W,E,v),this.G=2}}else this.G==3&&(c?la(this,c):this.i.length==0||Mn(this.h)||la(this))};function la(c,v){var E;v?E=v.l:E=c.U++;const b=Ln(c.I);vt(b,"SID",c.K),vt(b,"RID",E),vt(b,"AID",c.T),Yi(c,b),c.m&&c.o&&Cs(b,c.m,c.o),E=new Xn(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Ps(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vo(c.h,E),Vn(E,b,v)}function Yi(c,v){c.H&&re(c.H,function(E,b){vt(v,b,E)}),c.l&&gi({},function(E,b){vt(v,b,E)})}function Ps(c,v,E){E=Math.min(c.i.length,E);var b=c.l?w(c.l.Na,c.l,c):null;e:{var W=c.i;let J=-1;for(;;){const de=["count="+E];J==-1?0<E?(J=W[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let yt=!0;for(let en=0;en<E;en++){let tt=W[en].g;const an=W[en].map;if(tt-=J,0>tt)J=Math.max(0,W[en].g-100),yt=!1;else try{Bu(an,de,"req"+tt+"_")}catch{b&&b(an)}}if(yt){b=de.join("&");break e}}}return c=c.i.splice(0,E),v.D=c,b}function Eo(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Ve||he(),ae||(Ve(),ae=!0),ye.add(v,c),c.v=0}}function ua(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=En(w(c.Fa,c),qu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=En(w(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),ti(this),Hu(this))};function Tl(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Hu(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=Ln(c.qa);vt(v,"RID","rpc"),vt(v,"SID",c.K),vt(v,"AID",c.T),vt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&vt(v,"TO",c.ja),vt(v,"TYPE","xmlhttp"),Yi(c,v),c.m&&c.o&&Cs(v,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=yi(Ln(v)),E.m=null,E.P=!0,po(E,c)}n.Za=function(){this.C!=null&&(this.C=null,ti(this),ua(this),Ye(19))};function ca(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ha(c,v){var E=null;if(c.g==v){ca(c),Tl(c),c.g=null;var b=2}else if(dn(c.h,v))E=v.D,ra(c.h,v),b=1;else return;if(c.G!=0){if(v.o)if(b==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var W=c.B;b=qr(),It(b,new We(b,E)),Si(c)}else Eo(c);else if(W=v.s,W==3||W==0&&0<v.X||!(b==1&&Vd(c,v)||b==2&&ua(c)))switch(E&&0<E.length&&(v=c.h,v.i=v.i.concat(E)),W){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function qu(c,v){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*v}function Ji(c,v){if(c.j.info("Error code "+v),v==2){var E=w(c.fb,c),b=c.Xa;const W=!b;b=new Qr(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Xr(b,"https"),yi(b),W?Nd(b.toString(),E):$u(b.toString(),E)}else Ye(2);c.G=0,c.l&&c.l.sa(v),Ku(c),aa(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function Ku(c){if(c.G=0,c.ka=[],c.l){const v=yo(c.h);(v.length!=0||c.i.length!=0)&&(C(c.ka,v),C(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Gu(c,v,E){var b=E instanceof Qr?Ln(E):new Qr(E);if(b.g!="")v&&(b.g=v+"."+b.g),vi(b,b.s);else{var W=d.location;b=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var J=new Qr(null);b&&Xr(J,b),v&&(J.g=v),W&&vi(J,W),E&&(J.l=E),b=J}return E=c.D,v=c.ya,E&&v&&vt(b,E,v),vt(b,"VER",c.la),Yi(c,b),b}function Qu(c,v,E){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new At(new Qi({eb:E})):new At(c.pa),v.Ha(c.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Il(){}n=Il.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function da(){}da.prototype.g=function(c,v){return new Fn(c,v)};function Fn(c,v){mt.call(this),this.g=new Sl(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!Q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ti(this)}O(Fn,mt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){fn(this.g)},Fn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=Hn(c),c=E);v.i.push(new go(v.Ya++,c)),v.G==3&&Si(v)},Fn.prototype.N=function(){this.g.l=null,delete this.j,fn(this.g),delete this.g,Fn.aa.N.call(this)};function Xu(c){wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const E in v){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}O(Xu,wn);function Yu(){pi.call(this),this.status=1}O(Yu,pi);function Ti(c){this.g=c}O(Ti,Il),Ti.prototype.ua=function(){It(this.g,"a")},Ti.prototype.ta=function(c){It(this.g,new Xu(c))},Ti.prototype.sa=function(c){It(this.g,new Yu)},Ti.prototype.ra=function(){It(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,rS=function(){return new da},nS=function(){return qr()},tS=qn,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,ch=Ts,ea.COMPLETE="complete",eS=ea,Pr.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Zl=Pr,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,ZE=At}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const W_="@firebase/firestore",H_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Rm("@firebase/firestore");function Ma(){return Bo.logLevel}function ve(n,...e){if(Bo.logLevel<=Je.DEBUG){const t=e.map($m);Bo.debug(`Firestore (${ll}): ${n}`,...t)}}function gs(n,...e){if(Bo.logLevel<=Je.ERROR){const t=e.map($m);Bo.error(`Firestore (${ll}): ${n}`,...t)}}function no(n,...e){if(Bo.logLevel<=Je.WARN){const t=e.map($m);Bo.warn(`Firestore (${ll}): ${n}`,...t)}}function $m(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iS(n,r,t)}function iS(n,e,t){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw gs(r),new Error(r)}function ft(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||iS(e,s,r)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends fi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(An.UNAUTHENTICATED)))}shutdown(){}}class QR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XR{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new cs,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new sS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class YR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new YR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new q_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ek(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function Kp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ke(r,s);{const a=oS(),u=tk(a.encode(K_(n,t)),a.encode(K_(e,t)));return u!==0?u:Ke(r,s)}}t+=r>65535?2:1}return Ke(n.length,e.length)}function K_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function tk(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ke(n[t],e[t]);return Ke(n.length,e.length)}function Qa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__name__";class Ai{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ai.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Ke(e.length,t.length)}static compareSegments(e,t){const r=Ai.isNumericId(e),s=Ai.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class St extends Ai{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Ai{construct(e,t,r){return new yn(e,t,r)}static isValidIdentifier(e){return nk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G_}static keyField(){return new yn([G_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(t)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(St.fromString(e))}static fromName(e){return new Ce(St.fromString(e).popFirst(5))}static empty(){return new Ce(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rk(n,e,t,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Q_(n){if(!Ce.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(Ce.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function od(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=od(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ou(n,e){if(!lS(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=-62135596800,J_=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*J_);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y_)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Yt("string",_t._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new _t(0,0))}static max(){return new ze(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function ik(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new ro(s,Ce.empty(),e)}function sk(n){return new ro(n.readTime,n.key,gu)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(ze.min(),Ce.empty(),gu)}static max(){return new ro(ze.max(),Ce.empty(),gu)}}function ok(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==ak)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function uk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ad.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function ld(n){return n==null}function Ah(n){return n===0&&1/n==-1/0}function ck(n){return typeof n=="number"&&Number.isInteger(n)&&!Ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="";function hk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z_(e)),e=dk(n.get(t),e);return Z_(e)}function dk(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case uS:t+="";break;default:t+=a}}return t}function Z_(n){return n+uS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??gn.RED,this.left=s??gn.EMPTY,this.right=a??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new gn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new _r([])}unionWith(e){let t=new rn(yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hS("Invalid base64 string: "+a):a}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=fk.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function so(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="server_timestamp",fS="__type__",pS="__previous_value__",mS="__local_write_time__";function Hm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[fS])===null||t===void 0?void 0:t.stringValue)===dS}function ud(n){const e=n.mapValue.fields[pS];return Hm(e)?ud(e):e}function vu(n){const e=io(n.mapValue.fields[mS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t,r,s,a,u,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Rh="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Rh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Rh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__type__",mk="__max__",Gc={mapValue:{}},vS="__vector__",kh="value";function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hm(n)?4:vk(n)?9007199254740991:gk(n)?10:11:Ne(28295,{value:n})}function Fi(n,e){if(n===e)return!0;const t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=io(s.timestampValue),d=io(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return so(s.bytesValue).isEqual(so(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Wt(s.geoPointValue.latitude)===Wt(a.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Wt(s.integerValue)===Wt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Wt(s.doubleValue),d=Wt(a.doubleValue);return u===d?Ah(u)===Ah(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(ew(u)!==ew(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Fi(u[f],d[f])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function _u(n,e){return(n.values||[]).find((t=>Fi(t,e)))!==void 0}function Xa(n,e){if(n===e)return 0;const t=oo(n),r=oo(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Wt(a.integerValue||a.doubleValue),f=Wt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return nw(n.timestampValue,e.timestampValue);case 4:return nw(vu(n),vu(e));case 5:return Kp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=so(a),f=so(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=Ke(d[m],f[m]);if(_!==0)return _}return Ke(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ke(Wt(a.latitude),Wt(u.latitude));return d!==0?d:Ke(Wt(a.longitude),Wt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const S=a.fields||{},w=u.fields||{},A=(d=S[kh])===null||d===void 0?void 0:d.arrayValue,O=(f=w[kh])===null||f===void 0?void 0:f.arrayValue,R=Ke(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return R!==0?R:rw(A,O)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Gc.mapValue&&u===Gc.mapValue)return 0;if(a===Gc.mapValue)return 1;if(u===Gc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let S=0;S<f.length&&S<_.length;++S){const w=Kp(f[S],_[S]);if(w!==0)return w;const A=Xa(d[f[S]],m[_[S]]);if(A!==0)return A}return Ke(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{le:t})}}function nw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=io(n),r=io(e),s=Ke(t.seconds,r.seconds);return s!==0?s:Ke(t.nanos,r.nanos)}function rw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Xa(t[s],r[s]);if(a)return a}return Ke(t.length,r.length)}function Ya(n){return Gp(n)}function Gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=io(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return so(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Gp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Gp(t.fields[u])}`;return s+"}"})(n.mapValue):Ne(61005,{value:n})}function hh(n){switch(oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ud(n);return e?16+hh(e):16;case 5:return 2*n.stringValue.length;case 6:return so(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+hh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return uo(r.fields,((a,u)=>{s+=a.length+hh(u)})),s})(n.mapValue);default:throw Ne(13486,{value:n})}}function iw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qp(n){return!!n&&"integerValue"in n}function qm(n){return!!n&&"arrayValue"in n}function sw(n){return!!n&&"nullValue"in n}function ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function gk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gS])===null||t===void 0?void 0:t.stringValue)===vS}function au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=au(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=yn.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=au(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];dh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){uo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new ur(au(this.value))}}function yS(n){const e=[];return uo(n.fields,((t,r)=>{const s=new yn([t]);if(dh(r)){const a=yS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Rn(e,0,ze.min(),ze.min(),ze.min(),ur.empty(),0)}static newFoundDocument(e,t,r,s){return new Rn(e,1,t,ze.min(),r,s,0)}static newNoDocument(e,t){return new Rn(e,2,t,ze.min(),ze.min(),ur.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,ze.min(),ze.min(),ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.position=e,this.inclusive=t}}function aw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ce.comparator(Ce.fromName(u.referenceValue),t.key):r=Xa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function lw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t="asc"){this.field=e,this.dir=t}}function yk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{}class Xt extends _S{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wk(e,t,r):t==="array-contains"?new Tk(e,r):t==="in"?new Ik(e,r):t==="not-in"?new bk(e,r):t==="array-contains-any"?new Ck(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ek(e,r):new Sk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xa(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends _S{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new di(e,t)}matches(e){return wS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function wS(n){return n.op==="and"}function ES(n){return _k(n)&&wS(n)}function _k(n){for(const e of n.filters)if(e instanceof di)return!1;return!0}function Xp(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(ES(n))return n.filters.map((e=>Xp(e))).join(",");{const e=n.filters.map((t=>Xp(t))).join(",");return`${n.op}(${e})`}}function SS(n,e){return n instanceof Xt?(function(r,s){return s instanceof Xt&&r.op===s.op&&r.field.isEqual(s.field)&&Fi(r.value,s.value)})(n,e):n instanceof di?(function(r,s){return s instanceof di&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&SS(u,s.filters[d])),!0):!1})(n,e):void Ne(19439)}function TS(n){return n instanceof Xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(TS).join(" ,")+"}"})(n):"Filter"}class wk extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ek extends Xt{constructor(e,t){super(e,"in",t),this.keys=IS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sk extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=IS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function IS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ce.fromName(r.referenceValue)))}class Tk extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&_u(t.arrayValue,this.value)}}class Ik extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class bk extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_u(this.value.arrayValue,t)}}class Ck extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>_u(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function uw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Pk(n,e,t,r,s,a,u)}function Km(n){const e=$e(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Xp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ya(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ya(r))).join(",")),e.Pe=t}return e.Pe}function Gm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lw(n.startAt,e.startAt)&&lw(n.endAt,e.endAt)}function Yp(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ak(n,e,t,r,s,a,u,d){return new Du(n,e,t,r,s,a,u,d)}function Qm(n){return new Du(n)}function cw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bS(n){return n.collectionGroup!==null}function lu(n){const e=$e(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new rn(yn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Nh(a,r))})),t.has(yn.keyField().canonicalString())||e.Te.push(new Nh(yn.keyField(),r))}return e.Te}function Oi(n){const e=$e(n);return e.Ie||(e.Ie=Rk(e,lu(n))),e.Ie}function Rk(n,e){if(n.limitType==="F")return uw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Nh(s.field,a)}));const t=n.endAt?new xh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xh(n.startAt.position,n.startAt.inclusive):null;return uw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jp(n,e){const t=n.filters.concat([e]);return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zp(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cd(n,e){return Gm(Oi(n),Oi(e))&&n.limitType===e.limitType}function CS(n){return`${Km(Oi(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>TS(s))).join(", ")}]`),ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ya(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ya(s))).join(",")),`Target(${r})`})(Oi(n))}; limitType=${n.limitType})`}function hd(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of lu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=aw(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,lu(r),s)||r.endAt&&!(function(u,d,f){const m=aw(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,lu(r),s))})(n,e)}function kk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PS(n){return(e,t)=>{let r=!1;for(const s of lu(n)){const a=xk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function xk(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Xa(f,m):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return cS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new Mt(Ce.comparator);function vs(){return Nk}const AS=new Mt(Ce.comparator);function eu(...n){let e=AS;for(const t of n)e=e.insert(t.key,t);return e}function RS(n){let e=AS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function jo(){return uu()}function kS(){return uu()}function uu(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Ok=new Mt(Ce.comparator),Dk=new rn(Ce.comparator);function Ze(...n){let e=Dk;for(const t of n)e=e.add(t);return e}const Vk=new rn(Ke);function Mk(){return Vk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function xS(n){return{integerValue:""+n}}function Lk(n,e){return ck(e)?xS(e):Xm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this._=void 0}}function jk(n,e,t){return n instanceof wu?(function(s,a){const u={fields:{[fS]:{stringValue:dS},[mS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Hm(a)&&(a=ud(a)),a&&(u.fields[pS]=a),{mapValue:u}})(t,e):n instanceof Ja?OS(n,e):n instanceof Za?DS(n,e):(function(s,a){const u=NS(s,a),d=hw(u)+hw(s.Ee);return Qp(u)&&Qp(s.Ee)?xS(d):Xm(s.serializer,d)})(n,e)}function Fk(n,e,t){return n instanceof Ja?OS(n,e):n instanceof Za?DS(n,e):t}function NS(n,e){return n instanceof Oh?(function(r){return Qp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class wu extends dd{}class Ja extends dd{constructor(e){super(),this.elements=e}}function OS(n,e){const t=VS(e);for(const r of n.elements)t.some((s=>Fi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Za extends dd{constructor(e){super(),this.elements=e}}function DS(n,e){let t=VS(e);for(const r of n.elements)t=t.filter((s=>!Fi(s,r)));return{arrayValue:{values:t}}}class Oh extends dd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function hw(n){return Wt(n.integerValue||n.doubleValue)}function VS(n){return qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.field=e,this.transform=t}}function Uk(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ja&&s instanceof Ja||r instanceof Za&&s instanceof Za?Qa(r.elements,s.elements,Fi):r instanceof Oh&&s instanceof Oh?Fi(r.Ee,s.Ee):r instanceof wu&&s instanceof wu})(n.transform,e.transform)}class zk{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fd{}function MS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jm(n.key,Ur.none()):new Vu(n.key,n.data,Ur.none());{const t=n.data,r=ur.empty();let s=new rn(yn.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new co(n.key,r,new _r(s.toArray()),Ur.none())}}function $k(n,e,t){n instanceof Vu?(function(s,a,u){const d=s.value.clone(),f=fw(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(s,a,u){if(!fh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=fw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(LS(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cu(n,e,t,r){return n instanceof Vu?(function(a,u,d,f){if(!fh(a.precondition,u))return d;const m=a.value.clone(),_=pw(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof co?(function(a,u,d,f){if(!fh(a.precondition,u))return d;const m=pw(a.fieldTransforms,f,u),_=u.data;return _.setAll(LS(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((S=>S.field)))})(n,e,t,r):(function(a,u,d){return fh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function Bk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=NS(r.transform,s||null);a!=null&&(t===null&&(t=ur.empty()),t.set(r.field,a))}return t||null}function dw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qa(r,s,((a,u)=>Uk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vu extends fd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends fd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function LS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function fw(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Fk(u,d,t[s]))}return r}function pw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,jk(a,u,e))}return r}class Jm extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wk extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&$k(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kS();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=MS(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,((t,r)=>dw(t,r)))&&Qa(this.baseMutations,e.baseMutations,((t,r)=>dw(t,r)))}}class Zm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return Ok})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Zm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,nt;function Gk(n){switch(n){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function jS(n){if(n===void 0)return gs("GRPC error has no .code"),te.UNKNOWN;switch(n){case Gt.OK:return te.OK;case Gt.CANCELLED:return te.CANCELLED;case Gt.UNKNOWN:return te.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return te.INTERNAL;case Gt.UNAVAILABLE:return te.UNAVAILABLE;case Gt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Gt.NOT_FOUND:return te.NOT_FOUND;case Gt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Gt.ABORTED:return te.ABORTED;case Gt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Gt.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:n})}}(nt=Gt||(Gt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=new Zs([4294967295,4294967295],0);function mw(n){const e=oS().encode(n),t=new JE;return t.update(e),new Uint8Array(t.digest())}function gw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([s,a],0)]}class eg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Zs.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Zs.fromNumber(r)));return s.compare(Qk)===1&&(s=new Zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=mw(e),[r,s]=gw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new eg(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=mw(e),[r,s]=gw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pd(ze.min(),s,new Mt(Ke),vs(),Ze())}}class Mu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mu(r,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class FS{constructor(e,t){this.targetId=e,this.De=t}}class US{constructor(e,t,r=_n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class vw{constructor(){this.ve=0,this.Ce=yw(),this.Fe=_n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ze(),t=Ze(),r=Ze();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:a})}})),new Mu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=yw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Xk{constructor(e){this.We=e,this.Ge=new Map,this.ze=vs(),this.je=Qc(),this.Je=Qc(),this.He=new Mt(Ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Yp(a))if(r===0){const u=new Ce(a.path);this.Xe(t,u,Rn.newNoDocument(u,ze.min()))}else ft(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=so(r).toUint8Array()}catch(f){if(f instanceof hS)return no("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new eg(u,s,a)}catch(f){return no(f instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&Yp(d.target)){const f=new Ce(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,Rn.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ze();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new pd(e,t,this.He,this.ze,r);return this.ze=vs(),this.je=Qc(),this.Je=Qc(),this.He=new Mt(Ke),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new rn(Ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new rn(Ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Qc(){return new Mt(Ce.comparator)}function yw(){return new Mt(Ce.comparator)}const Yk={asc:"ASCENDING",desc:"DESCENDING"},Jk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zk={and:"AND",or:"OR"};class ex{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function em(n,e){return n.useProto3Json||ld(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tx(n,e){return Dh(n,e.toTimestamp())}function Di(n){return ft(!!n,49232),ze.fromTimestamp((function(t){const r=io(t);return new _t(r.seconds,r.nanos)})(n))}function tg(n,e){return tm(n,e).canonicalString()}function tm(n,e){const t=(function(s){return new St(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function $S(n){const e=St.fromString(n);return ft(KS(e),10190,{key:e.toString()}),e}function nm(n,e){return tg(n.databaseId,e.path)}function mp(n,e){const t=$S(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(WS(t))}function BS(n,e){return tg(n.databaseId,e)}function nx(n){const e=$S(n);return e.length===4?St.emptyPath():WS(e)}function rm(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WS(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _w(n,e,t){return{name:nm(n,e),fields:t.value.mapValue.fields}}function rx(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(ft(_===void 0||typeof _=="string",58123),_n.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),_n.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?te.UNKNOWN:jS(m.code);return new pe(_,m.message||"")})(u);t=new US(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mp(n,r.document.name),a=Di(r.document.updateTime),u=r.document.createTime?Di(r.document.createTime):ze.min(),d=new ur({mapValue:{fields:r.document.fields}}),f=Rn.newFoundDocument(s,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new ph(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mp(n,r.document),a=r.readTime?Di(r.readTime):ze.min(),u=Rn.newNoDocument(s,a),d=r.removedTargetIds||[];t=new ph([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mp(n,r.document),a=r.removedTargetIds||[];t=new ph([],a,s,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Kk(s,a),d=r.targetId;t=new FS(d,u)}}return t}function ix(n,e){let t;if(e instanceof Vu)t={update:_w(n,e.key,e.value)};else if(e instanceof Jm)t={delete:nm(n,e.key)};else if(e instanceof co)t={update:_w(n,e.key,e.data),updateMask:fx(e.fieldMask)};else{if(!(e instanceof Wk))return Ne(16599,{Rt:e.type});t={verify:nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof wu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Za)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Oh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ne(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:tx(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne(27497)})(n,e.precondition)),t}function sx(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Di(s.updateTime):Di(a);return u.isEqual(ze.min())&&(u=Di(a)),new zk(u,s.transformResults||[])})(t,e)))):[]}function ox(n,e){return{documents:[BS(n,e.path)]}}function ax(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BS(n,s);const a=(function(m){if(m.length!==0)return qS(di.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(w){return{field:ja(w.field),direction:cx(w.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=em(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function lx(n){let e=nx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ft(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(S){const w=HS(S);return w instanceof di&&ES(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(S){return S.map((w=>(function(O){return new Nh(Fa(O.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(S){let w;return w=typeof S=="object"?S.value:S,ld(w)?null:w})(t.limit));let f=null;t.startAt&&(f=(function(S){const w=!!S.before,A=S.values||[];return new xh(A,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(S){const w=!S.before,A=S.values||[];return new xh(A,w)})(t.endAt)),Ak(e,s,u,a,d,"F",f,m)}function ux(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fa(t.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fa(t.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fa(t.unaryFilter.field);return Xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Fa(t.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xt.create(Fa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map((r=>HS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function cx(n){return Yk[n]}function hx(n){return Jk[n]}function dx(n){return Zk[n]}function ja(n){return{fieldPath:n.canonicalString()}}function Fa(n){return yn.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof Xt?(function(t){if(t.op==="=="){if(ow(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ow(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:hx(t.op),value:t.value}}})(n):n instanceof di?(function(t){const r=t.getFilters().map((s=>qS(s)));return r.length===1?r[0]:{compositeFilter:{op:dx(t.op),filters:r}}})(n):Ne(54877,{filter:n})}function fx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,r,s,a=ze.min(),u=ze.min(),d=_n.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.gt=e}}function mx(n){const e=lx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.Dn=new vx}addToCollectionParentIndex(e,t){return this.Dn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ro.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class vx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new rn(St.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GS=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(GS,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new el(0)}static ur(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="LruGarbageCollector",yx=1048576;function Sw([n,e],[t,r]){const s=Ke(n,t);return s===0?Ke(e,r):s}class _x{constructor(e){this.Tr=e,this.buffer=new rn(Sw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Sw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(Ew,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ve(Ew,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Rr(3e5)}))}}class Ex{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(ad.ue);const r=new _x(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ww)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ww):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,u=Date.now(),this.nthSequenceNumber(e,s)))).next((S=>(r=S,d=Date.now(),this.removeTargets(e,r,t)))).next((S=>(a=S,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(m=Date.now(),Ma()<=Je.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${S} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:S}))))}}function Sx(n,e){return new Ex(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&cu(r.mutation,s,_r.empty(),_t.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const s=jo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=eu();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=jo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=vs();const u=uu(),d=(function(){return uu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof co)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),cu(_.mutation,m,_.mutation.getFieldMask(),_t.now())):u.set(m.key,_r.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var S;return d.set(m,new Ix(_,(S=u.get(m))!==null&&S!==void 0?S:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=uu();let s=new Mt(((u,d)=>u-d)),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||_r.empty();_=d.applyToLocalView(m,_),r.set(f,_);const S=(s.get(d.batchId)||Ze()).add(f);s=s.insert(d.batchId,S)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,S=kS();_.forEach((w=>{if(!a.has(w)){const A=MS(t.get(w),r.get(w));A!==null&&S.set(w,A),a=a.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,S))}return ne.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):ne.resolve(jo());let d=gu,f=a;return u.next((m=>ne.forEach(m,((_,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{f=f.insert(_,w)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ze()))).next((_=>({batchId:d,changes:RS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((r=>{let s=eu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=eu();return this.indexManager.getCollectionParents(e,a).next((d=>ne.forEach(d,(f=>{const m=(function(S,w){return new Du(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((S,w)=>{u=u.insert(S,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,Rn.newInvalidDocument(_)))}));let d=eu();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&cu(_.mutation,m,_r.empty(),_t.now()),hd(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:mx(s.bundledQuery),readTime:Di(s.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.overlays=new Mt(Ce.comparator),this.kr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=jo();return ne.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=jo(),a=t.length+1,u=new Ce(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Mt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=jo(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=jo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return ne.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new qk(t,r));let a=this.kr.get(t);a===void 0&&(a=Ze(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.qr=new rn(hn.Qr),this.$r=new rn(hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new hn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ce(new St([])),r=new hn(t,e),s=new hn(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ce(new St([])),r=new hn(t,e),s=new hn(t,e+1);let a=Ze();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new hn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new rn(hn.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Hk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new hn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Wm:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),s=new hn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(Ke);return t.forEach((s=>{const a=new hn(s,0),u=new hn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),ne.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ce.isDocumentKey(a)||(a=a.child(""));const u=new hn(new Ce(a),0);let d=new rn(Ke);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),ne.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ne.forEach(t.mutations,(s=>{const a=new hn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new hn(t,0),s=this.Yr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.ni=e,this.docs=(function(){return new Mt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Rn.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=vs();const u=t.path,d=new Ce(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||ok(sk(_),r)<=0||(s.has(_.key)||hd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ne(9500)}ri(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new xx(this)}getSize(e){return ne.resolve(this.size)}}class xx extends Tx{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.persistence=e,this.ii=new Qo((t=>Km(t)),Gm),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new ng,this.targetCount=0,this._i=el.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ne.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new el(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.hr(t),ne.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ne.waitFor(a).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.ai={},this.overlays={},this.ui=new ad(0),this.ci=!1,this.ci=!0,this.li=new Ax,this.referenceDelegate=e(this),this.hi=new Nx(this),this.indexManager=new gx,this.remoteDocumentCache=(function(s){return new kx(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new px(t),this.Ti=new Cx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Px,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Rx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const s=new Ox(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return ne.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class Ox extends lk{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ai=new ng,this.Ri=null}static Vi(e){return new rg(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,(r=>{const s=Ce.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,ze.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ne.or([()=>ne.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.gi=new Qo((r=>hk(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Sx(this,t)}static Vi(e,t){return new Vh(e,t)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return ne.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,ze.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hh(e.data.value)),t}Sr(e,t,r){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ze(),s=Ze();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new ig(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return k1()?8:uk(kn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Dx;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ma()<=Je.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Ma()<=Je.DEBUG&&ve("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ma()<=Je.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):ne.resolve())}ps(e,t){if(cw(t))return ne.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Zp(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ze(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Zp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return cw(t)||s.isEqual(ze.min())?ne.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?ne.resolve(null):(Ma()<=Je.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),La(t)),this.vs(e,u,t,ik(s,gu)).next((d=>d)))}))}bs(e,t){let r=new rn(PS(e));return t.forEach(((s,a)=>{hd(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ma()<=Je.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",La(t)),this.gs.getDocumentsMatchingQuery(e,t,ro.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LocalStore",Mx=3e8;class Lx{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Mt(Ke),this.Ms=new Qo((a=>Km(a)),Gm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function jx(n,e,t,r){return new Lx(n,e,t,r)}async function XS(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ze();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Fx(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const S=m.batch,w=S.keys();let A=ne.resolve();return w.forEach((O=>{A=A.next((()=>_.getEntry(f,O))).next((R=>{const C=m.docVersions.get(O);ft(C!==null,48541),R.version.compareTo(C)<0&&(S.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),_.addEntry(R)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(f,S)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function YS(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Ux(n,e){const t=$e(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,S)=>{const w=s.get(S);if(!w)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,S).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,S))));let A=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(S)!==null?A=A.withResumeToken(_n.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),s=s.insert(S,A),(function(R,C,$){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Mx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(w,A,_)&&d.push(t.hi.updateTargetData(a,A))}));let f=vs(),m=Ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(zx(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!r.isEqual(ze.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((S=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return ne.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function zx(n,e,t){let r=Ze(),s=Ze();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=vs();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ve(sg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function $x(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Wm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Bx(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,ne.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new Qs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function im(n,e,t){const r=$e(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!cl(u))throw u;ve(sg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Tw(n,e,t){const r=$e(n);let s=ze.min(),a=Ze();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const S=$e(f),w=S.Ms.get(_);return w!==void 0?ne.resolve(S.Fs.get(w)):S.hi.getTargetData(m,_)})(r,u,Oi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:ze.min(),t?a:Ze()))).next((d=>(Wx(r,kk(e),d),{documents:d,qs:a})))))}function Wx(n,e,t){let r=n.xs.get(e)||ze.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class Iw{constructor(){this.activeTargetIds=Mk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hx{constructor(){this.Fo=new Iw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Iw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="ConnectivityMonitor";class Cw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(bw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(bw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function sm(){return Xc===null?Xc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="RestConnection",Kx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Rh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=sm(),d=this.Go(e,t.toUriEncodedString());ve(gp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),_=_s(m);return this.jo(e,d,f,r,_).then((S=>(ve(gp,`Received RPC '${e}' ${u}: `,S),S)),(S=>{throw no(gp,`RPC '${e}' ${u} failed with error: `,S,"url: ",d,"request:",r),S}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Kx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class Xx extends Gx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=sm();return new Promise(((d,f)=>{const m=new ZE;m.setWithCredentials(!0),m.listenOnce(eS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ch.NO_ERROR:const S=m.getResponseJson();ve(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case ch.TIMEOUT:ve(Cn,`RPC '${e}' ${u} timed out`),f(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const w=m.getStatus();if(ve(Cn,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A==null?void 0:A.error;if(O&&O.status&&O.message){const R=(function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Q)>=0?Q:te.UNKNOWN})(O.status);f(new pe(R,O.message))}else f(new pe(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ve(Cn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ve(Cn,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const s=sm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rS(),d=nS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ve(Cn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const S=u.createWebChannel(_,f);this.T_(S);let w=!1,A=!1;const O=new Qx({Ho:C=>{A?ve(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(w||(ve(Cn,`Opening RPC '${e}' stream ${s} transport.`),S.open(),w=!0),ve(Cn,`RPC '${e}' stream ${s} sending:`,C),S.send(C))},Yo:()=>S.close()}),R=(C,$,Q)=>{C.listen($,(G=>{try{Q(G)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return R(S,Zl.EventType.OPEN,(()=>{A||(ve(Cn,`RPC '${e}' stream ${s} transport opened.`),O.s_())})),R(S,Zl.EventType.CLOSE,(()=>{A||(A=!0,ve(Cn,`RPC '${e}' stream ${s} transport closed`),O.__(),this.I_(S))})),R(S,Zl.EventType.ERROR,(C=>{A||(A=!0,no(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),O.__(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),R(S,Zl.EventType.MESSAGE,(C=>{var $;if(!A){const Q=C.data[0];ft(!!Q,16349);const G=Q,ee=(G==null?void 0:G.error)||(($=G[0])===null||$===void 0?void 0:$.error);if(ee){ve(Cn,`RPC '${e}' stream ${s} received error:`,ee);const X=ee.status;let re=(function(N){const j=Gt[N];if(j!==void 0)return jS(j)})(X),k=ee.message;re===void 0&&(re=te.INTERNAL,k="Unknown error status: "+X+" with message "+ee.message),A=!0,O.__(new pe(re,k)),S.close()}else ve(Cn,`RPC '${e}' stream ${s} received:`,Q),O.a_(Q)}})),R(d,tS.STAT_EVENT,(C=>{C.stat===qp.PROXY?ve(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===qp.NOPROXY&&ve(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){return new ex(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="PersistentStream";class ZS{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new JS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(gs(t.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(Pw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ve(Pw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yx extends ZS{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=rx(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ze.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ze.min():u.readTime?Di(u.readTime):ze.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=rm(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Yp(f)?{documents:ox(a,f)}:{query:ax(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=zS(a,u.resumeToken);const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(ze.min())>0){d.readTime=Dh(a,u.snapshotVersion.toTimestamp());const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=ux(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=rm(this.serializer),t.removeTarget=e,this.k_(t)}}class Jx extends ZS{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=sx(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=rm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ix(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{}class eN extends Zx{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,tm(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(te.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,tm(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(te.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class tN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(gs(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RemoteStore";class nN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Xo(this)&&(ve(Wo,"Restarting streams for network reachability change."),await(async function(f){const m=$e(f);m.Ia.add(4),await Lu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await gd(m)})(this))}))})),this.Aa=new tN(r,s)}}async function gd(n){if(Xo(n))for(const e of n.da)await e(!0)}async function Lu(n){for(const e of n.da)await e(!1)}function eT(n,e){const t=$e(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ug(t)?lg(t):hl(t).x_()&&ag(t,e))}function og(n,e){const t=$e(n),r=hl(t);t.Ta.delete(e),r.x_()&&tT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Xo(t)&&t.Aa.set("Unknown"))}function ag(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).H_(e)}function tT(n,e){n.Ra.$e(e),hl(n).Y_(e)}function lg(n){n.Ra=new Xk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Aa.aa()}function ug(n){return Xo(n)&&!hl(n).M_()&&n.Ta.size>0}function Xo(n){return $e(n).Ia.size===0}function nT(n){n.Ra=void 0}async function rN(n){n.Aa.set("Online")}async function iN(n){n.Ta.forEach(((e,t)=>{ag(n,e)}))}async function sN(n,e){nT(n),ug(n)?(n.Aa.la(e),lg(n)):n.Aa.set("Unknown")}async function oN(n,e,t){if(n.Aa.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){ve(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mh(n,r)}else if(e instanceof ph?n.Ra.Ye(e):e instanceof FS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ze.min()))try{const r=await YS(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(_n.EMPTY_BYTE_STRING,_.snapshotVersion)),tT(a,f);const S=new Qs(_.target,f,m,_.sequenceNumber);ag(a,S)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ve(Wo,"Failed to raise snapshot:",r),await Mh(n,r)}}async function Mh(n,e,t){if(!cl(e))throw e;n.Ia.add(1),await Lu(n),n.Aa.set("Offline"),t||(t=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Wo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await gd(n)}))}function rT(n,e){return e().catch((t=>Mh(n,t,e)))}async function vd(n){const e=$e(n),t=ao(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wm;for(;aN(e);)try{const s=await $x(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,lN(e,s)}catch(s){await Mh(e,s)}iT(e)&&sT(e)}function aN(n){return Xo(n)&&n.Pa.length<10}function lN(n,e){n.Pa.push(e);const t=ao(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function iT(n){return Xo(n)&&!ao(n).M_()&&n.Pa.length>0}function sT(n){ao(n).start()}async function uN(n){ao(n).na()}async function cN(n){const e=ao(n);for(const t of n.Pa)e.X_(t.mutations)}async function hN(n,e,t){const r=n.Pa.shift(),s=Zm.from(r,e,t);await rT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await vd(n)}async function dN(n,e){e&&ao(n).Z_&&await(async function(r,s){if((function(u){return Gk(u)&&u!==te.ABORTED})(s.code)){const a=r.Pa.shift();ao(r).N_(),await rT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await vd(r)}})(n,e),iT(n)&&sT(n)}async function Aw(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),ve(Wo,"RemoteStore received new credentials");const r=Xo(t);t.Ia.add(3),await Lu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await gd(t)}async function fN(n,e){const t=$e(n);e?(t.Ia.delete(2),await gd(t)):e||(t.Ia.add(2),await Lu(t),t.Aa.set("Unknown"))}function hl(n){return n.Va||(n.Va=(function(t,r,s){const a=$e(t);return a.ia(),new Yx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:rN.bind(null,n),e_:iN.bind(null,n),n_:sN.bind(null,n),J_:oN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),ug(n)?lg(n):n.Aa.set("Unknown")):(await n.Va.stop(),nT(n))}))),n.Va}function ao(n){return n.ma||(n.ma=(function(t,r,s){const a=$e(t);return a.ia(),new Jx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:uN.bind(null,n),n_:dN.bind(null,n),ea:cN.bind(null,n),ta:hN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await vd(n)):(await n.ma.stop(),n.Pa.length>0&&(ve(Wo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new cg(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(n,e){if(gs("AsyncQueue",`${e}: ${n}`),cl(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=eu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.fa=new Mt(Ce.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class tl{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new tl(e,t,Wa.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class mN{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=$e(t),a=s.queries;s.queries=kw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function kw(){return new Qo((n=>CS(n)),cd)}async function oT(n,e){const t=$e(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new pN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=hg(u,`Initialization of query '${La(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&dg(t)}async function aT(n,e){const t=$e(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gN(n,e){const t=$e(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&dg(t)}function vN(n,e,t){const r=$e(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function dg(n){n.Da.forEach((e=>{e.next()}))}var om,xw;(xw=om||(om={})).Fa="default",xw.Cache="cache";class lT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.key=e}}class cT{constructor(e){this.key=e}}class yN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ze(),this.mutatedKeys=Ze(),this.Xa=PS(e),this.eu=new Wa(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Rw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,S)=>{const w=s.get(_),A=hd(this.query,S)?S:null,O=!!w&&this.mutatedKeys.has(w.key),R=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let C=!1;w&&A?w.data.isEqual(A.data)?O!==R&&(r.track({type:3,doc:A}),C=!0):this.iu(w,A)||(r.track({type:2,doc:A}),C=!0,(f&&this.Xa(A,f)>0||m&&this.Xa(A,m)<0)&&(d=!0)):!w&&A?(r.track({type:0,doc:A}),C=!0):w&&!A&&(r.track({type:1,doc:w}),C=!0,(f||m)&&(d=!0)),C&&(A?(u=u.add(A),a=R?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,S)=>(function(A,O){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:C})}};return R(A)-R(O)})(_.type,S.type)||this.Xa(_.doc,S.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new tl(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ze(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new cT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new uT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fg="SyncEngine";class _N{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wN{constructor(e){this.key=e,this.lu=!1}}class EN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Qo((d=>CS(d)),cd),this.Tu=new Map,this.Iu=new Set,this.du=new Mt(Ce.comparator),this.Eu=new Map,this.Au=new ng,this.Ru={},this.Vu=new Map,this.mu=el.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function SN(n,e,t=!0){const r=gT(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await hT(r,e,t,!0),s}async function TN(n,e){const t=gT(n);await hT(t,e,!0,!1)}async function hT(n,e,t,r){const s=await Bx(n.localStore,Oi(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await IN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&eT(n.remoteStore,s),d}async function IN(n,e,t,r,s){n.gu=(S,w,A)=>(async function(R,C,$,Q){let G=C.view.nu($);G.Ds&&(G=await Tw(R.localStore,C.query,!1).then((({documents:k})=>C.view.nu(k,G))));const ee=Q&&Q.targetChanges.get(C.targetId),X=Q&&Q.targetMismatches.get(C.targetId)!=null,re=C.view.applyChanges(G,R.isPrimaryClient,ee,X);return Ow(R,C.targetId,re._u),re.snapshot})(n,S,w,A);const a=await Tw(n.localStore,e,!0),u=new yN(e,a.qs),d=u.nu(a.documents),f=Mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Ow(n,t,m._u);const _=new _N(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function bN(n,e,t){const r=$e(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!cd(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await im(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&og(r.remoteStore,s.targetId),am(r,s.targetId)})).catch(ul)):(am(r,s.targetId),await im(r.localStore,s.targetId,!0))}async function CN(n,e){const t=$e(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),og(t.remoteStore,r.targetId))}async function PN(n,e,t){const r=DN(n);try{const s=await(function(u,d){const f=$e(u),m=_t.now(),_=d.reduce(((A,O)=>A.add(O.key)),Ze());let S,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let O=vs(),R=Ze();return f.Os.getEntries(A,_).next((C=>{O=C,O.forEach((($,Q)=>{Q.isValidDocument()||(R=R.add($))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,O))).next((C=>{S=C;const $=[];for(const Q of d){const G=Bk(Q,S.get(Q.key).overlayedDocument);G!=null&&$.push(new co(Q.key,G,yS(G.value.mapValue),Ur.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,$,d)})).next((C=>{w=C;const $=C.applyToLocalDocumentSet(S,R);return f.documentOverlayCache.saveOverlays(A,C.batchId,$)}))})).then((()=>({batchId:w.batchId,changes:RS(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new Mt(Ke)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await ju(r,s.changes),await vd(r.remoteStore)}catch(s){const a=hg(s,"Failed to persist write");t.reject(a)}}async function dT(n,e){const t=$e(n);try{const r=await Ux(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ft(u.lu,14607):s.removedDocuments.size>0&&(ft(u.lu,42227),u.lu=!1))})),await ju(t,r,e)}catch(r){await ul(r)}}function Nw(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=$e(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,S)=>{for(const w of S.wa)w.va(d)&&(m=!0)})),m&&dg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AN(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new Mt(Ce.comparator);u=u.insert(a,Rn.newNoDocument(a,ze.min()));const d=Ze().add(a),f=new pd(ze.min(),new Map,new Mt(Ke),u,d);await dT(r,f),r.du=r.du.remove(a),r.Eu.delete(e),pg(r)}else await im(r.localStore,e,!1).then((()=>am(r,e,t))).catch(ul)}async function RN(n,e){const t=$e(n),r=e.batch.batchId;try{const s=await Fx(t.localStore,e);pT(t,r,null),fT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ju(t,s)}catch(s){await ul(s)}}async function kN(n,e,t){const r=$e(n);try{const s=await(function(u,d){const f=$e(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((S=>(ft(S!==null,37113),_=S.keys(),f.mutationQueue.removeMutationBatch(m,S)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);pT(r,e,t),fT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ju(r,s)}catch(s){await ul(s)}}function fT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function pT(n,e,t){const r=$e(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||mT(n,r)}))}function mT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(og(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),pg(n))}function Ow(n,e,t){for(const r of t)r instanceof uT?(n.Au.addReference(r.key,e),xN(n,r)):r instanceof cT?(ve(fg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||mT(n,r.key)):Ne(19791,{yu:r})}function xN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ve(fg,"New document in limbo: "+t),n.Iu.add(r),pg(n))}function pg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ce(St.fromString(e)),r=n.mu.next();n.Eu.set(r,new wN(t)),n.du=n.du.insert(t,r),eT(n.remoteStore,new Qs(Oi(Qm(t.path)),r,"TargetPurposeLimboResolution",ad.ue))}}async function ju(n,e,t){const r=$e(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const S=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,S?"current":"not-current")}if(m){s.push(m);const S=ig.Es(f.targetId,m);a.push(S)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const _=$e(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ne.forEach(m,(w=>ne.forEach(w.Is,(A=>_.persistence.referenceDelegate.addReference(S,w.targetId,A))).next((()=>ne.forEach(w.ds,(A=>_.persistence.referenceDelegate.removeReference(S,w.targetId,A)))))))))}catch(S){if(!cl(S))throw S;ve(sg,"Failed to update sequence numbers: "+S)}for(const S of m){const w=S.targetId;if(!S.fromCache){const A=_.Fs.get(w),O=A.snapshotVersion,R=A.withLastLimboFreeSnapshotVersion(O);_.Fs=_.Fs.insert(w,R)}}})(r.localStore,a))}async function NN(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){ve(fg,"User change. New user:",e.toKey());const r=await XS(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new pe(te.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ju(t,r.Bs)}}function ON(n,e){const t=$e(n),r=t.Eu.get(e);if(r&&r.lu)return Ze().add(r.key);{let s=Ze();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function gT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AN.bind(null,e),e.hu.J_=gN.bind(null,e.eventManager),e.hu.pu=vN.bind(null,e.eventManager),e}function DN(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kN.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return jx(this.persistence,new Vx,e.initialUser,this.serializer)}Du(e){return new QS(rg.Vi,this.serializer)}bu(e){return new Hx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class VN extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof Vh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new QS((r=>Vh.Vi(r,t)),this.serializer)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NN.bind(null,this.syncEngine),await fN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mN})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),r=(function(a){return new Xx(a)})(e.databaseInfo);return(function(a,u,d,f){return new eN(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new nN(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nw(this.syncEngine,t,0)),(function(){return Cw.C()?new Cw:new qx})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const S=new EN(s,a,u,d,f,m);return _&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=$e(s);ve(Wo,"RemoteStore shutting down."),a.Ia.add(5),await Lu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lm.provider={build:()=>new lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="FirestoreClient";class MN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ve(lo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ve(lo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yp(n,e){n.asyncQueue.verifyOperationInProgress(),ve(lo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await XS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{no("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{no("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Dw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LN(n);ve(lo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Aw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Aw(e.remoteStore,s))),n._onlineComponents=e}async function LN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(lo,"Using user provided OfflineComponentProvider");try{await yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),await yp(n,new Lh)}}else ve(lo,"Using default OfflineComponentProvider"),await yp(n,new VN(void 0));return n._offlineComponents}async function yT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(lo,"Using user provided OnlineComponentProvider"),await Dw(n,n._uninitializedComponentsProvider._online)):(ve(lo,"Using default OnlineComponentProvider"),await Dw(n,new lm))),n._onlineComponents}function jN(n){return yT(n).then((e=>e.syncEngine))}async function _T(n){const e=await yT(n),t=e.eventManager;return t.onListen=SN.bind(null,e.syncEngine),t.onUnlisten=bN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CN.bind(null,e.syncEngine),t}function FN(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new vT({next:w=>{_.Ou(),u.enqueueAndForget((()=>aT(a,S)));const A=w.docs.has(d);!A&&w.fromCache?m.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&f&&f.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),S=new lT(Qm(d.path),_,{includeMetadataChanges:!0,ka:!0});return oT(a,S)})(await _T(n),n.asyncQueue,e,t,r))),r.promise}function UN(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new vT({next:w=>{_.Ou(),u.enqueueAndForget((()=>aT(a,S))),w.fromCache&&f.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),S=new lT(d,_,{includeMetadataChanges:!0,ka:!0});return oT(a,S)})(await _T(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firestore.googleapis.com",Mw=!0;class Lw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ET,this.ssl=Mw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yx)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new JR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vw.get(t);r&&(ve("ComponentProvider","Removing Datastore"),Vw.delete(t),r.terminate())})(this),Promise.resolve()}}function zN(n,e,t,r={}){var s;n=hi(n,yd);const a=_s(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Zh(`https://${f}`),ed("Firestore",!0)),u.host!==ET&&u.host!==f&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!ds(m,d)&&(n._setSettings(m),r.mockUserToken)){let _,S;if(typeof r.mockUserToken=="string")_=r.mockUserToken,S=An.MOCK_USER;else{_=hE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new An(w)}n._authCredentials=new QR(new sS(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ou(t,Ht._jsonSchema))return new Ht(e,r||null,new Ce(St.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Yt("string",Ht._jsonSchemaVersion),referencePath:Yt("string")};class eo extends dl{constructor(e,t,r){super(e,t,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ce(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function jh(n,e,...t){if(n=Pt(n),aS("collection","path",e),n instanceof yd){const r=St.fromString(e,...t);return X_(r),new eo(n,null,r)}{if(!(n instanceof Ht||n instanceof eo))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return X_(r),new eo(n.firestore,null,r)}}function Tr(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=Bm.newId()),aS("doc","path",e),n instanceof yd){const r=St.fromString(e,...t);return Q_(r),new Ht(n,null,new Ce(r))}{if(!(n instanceof Ht||n instanceof eo))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return Q_(r),new Ht(n.firestore,n instanceof eo?n.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new JS(this,"async_queue_retry"),this.oc=()=>{const r=vp();r&&ve(jw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new cs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cl(e))throw e;ve(jw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,gs("INTERNAL UNHANDLED ERROR: ",Uw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=cg.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Ne(47125,{hc:Uw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Uw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yo extends yd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Fw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function $N(n,e){const t=typeof n=="object"?n:td(),r=typeof n=="string"?n:Rh,s=Ru(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Am("firestore");a&&zN(s,...a)}return s}function mg(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BN(n),n._firestoreClient}function BN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,_){return new pk(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,wT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new MN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(_n.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:Yt("string",jr._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Yt("string",Vi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,Mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mi(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:Yt("string",Mi._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^__.*__$/;class HN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class ST{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:n})}}class wd{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new wd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(TT(this.Ec)&&WN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class qN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||md(e)}Dc(e,t,r,s=!1){return new wd({Ec:e,methodName:t,bc:r,path:yn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ed(n){const e=n._freezeSettings(),t=md(n._databaseId);return new qN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IT(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);_g("Data must be an object, but it was:",u,r);const d=CT(r,u);let f,m;if(a.merge)f=new _r(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const S of a.mergeFields){const w=um(e,S,t);if(!u.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);AT(_,w)||_.push(w)}f=new _r(_),m=u.fieldTransforms.filter((S=>f.covers(S.field)))}else f=null,m=u.fieldTransforms;return new HN(new ur(d),f,m)}class Fu extends fl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function bT(n,e,t){return new wd({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gg extends fl{_toFieldTransform(e){return new Ym(e.path,new wu)}isEqual(e){return e instanceof gg}}class vg extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bT(this,e,!0),r=this.vc.map((a=>Jo(a,t))),s=new Ja(r);return new Ym(e.path,s)}isEqual(e){return e instanceof vg&&ds(this.vc,e.vc)}}class yg extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bT(this,e,!0),r=this.vc.map((a=>Jo(a,t))),s=new Za(r);return new Ym(e.path,s)}isEqual(e){return e instanceof yg&&ds(this.vc,e.vc)}}function KN(n,e,t,r){const s=n.Dc(1,e,t);_g("Data must be an object, but it was:",s,r);const a=[],u=ur.empty();uo(r,((f,m)=>{const _=wg(e,f,t);m=Pt(m);const S=s.gc(_);if(m instanceof Fu)a.push(_);else{const w=Jo(m,S);w!=null&&(a.push(_),u.set(_,w))}}));const d=new _r(a);return new ST(u,d,s.fieldTransforms)}function GN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[um(e,r,t)],f=[s];if(a.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)d.push(um(e,a[w])),f.push(a[w+1]);const m=[],_=ur.empty();for(let w=d.length-1;w>=0;--w)if(!AT(m,d[w])){const A=d[w];let O=f[w];O=Pt(O);const R=u.gc(A);if(O instanceof Fu)m.push(A);else{const C=Jo(O,R);C!=null&&(m.push(A),_.set(A,C))}}const S=new _r(m);return new ST(_,S,u.fieldTransforms)}function QN(n,e,t,r=!1){return Jo(t,n.Dc(r?4:3,e))}function Jo(n,e){if(PT(n=Pt(n)))return _g("Unsupported field value:",e,n),CT(n,e);if(n instanceof fl)return(function(r,s){if(!TT(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=Jo(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:Dh(s.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dh(s.serializer,a)}}if(r instanceof Vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:zS(s.serializer,r._byteString)};if(r instanceof Ht){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mi)return(function(u,d){return{mapValue:{fields:{[gS]:{stringValue:vS},[kh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Xm(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${od(r)}`)})(n,e)}function CT(n,e){const t={};return cS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(n,((r,s)=>{const a=Jo(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function PT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Vi||n instanceof jr||n instanceof Ht||n instanceof fl||n instanceof Mi)}function _g(n,e,t){if(!PT(t)||!lS(t)){const r=od(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function um(n,e,t){if((e=Pt(e))instanceof _d)return e._internalPath;if(typeof e=="string")return wg(n,e);throw Fh("Field path arguments must be of type string or ",n,!1,void 0,t)}const XN=new RegExp("[~\\*/\\[\\]]");function wg(n,e,t){if(e.search(XN)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new pe(te.INVALID_ARGUMENT,d+n+f)}function AT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Eg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YN extends RT{data(){return super.data()}}function Eg(n,e){return typeof e=="string"?wg(n,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class ZN extends Sg{}function cm(n,e,...t){let r=[];e instanceof Sg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Tg)).length,d=a.filter((f=>f instanceof Sd)).length;if(u>1||u>0&&d>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Sd extends ZN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sd(e,t,r)}_apply(e){const t=this._parse(e);return kT(e._query,t),new dl(e.firestore,e.converter,Jp(e._query,t))}_parse(e){const t=Ed(e.firestore);return(function(a,u,d,f,m,_,S){let w;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){$w(S,_);const O=[];for(const R of S)O.push(zw(f,a,R));w={arrayValue:{values:O}}}else w=zw(f,a,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||$w(S,_),w=QN(d,u,S,_==="in"||_==="not-in");return Xt.create(m,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hm(n,e,t){const r=e,s=Eg("where",n);return Sd._create(s,r,t)}class Tg extends Sg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)kT(u,f),u=Jp(u,f)})(e._query,t),new dl(e.firestore,e.converter,Jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zw(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Ce.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iw(n,new Ce(r))}if(t instanceof Ht)return iw(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(t)}.`)}function $w(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eO{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return uo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[kh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Wt(u.doubleValue)));return new Mi(a)}convertGeoPoint(e){return new Vi(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ud(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=io(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);ft(KS(r),9688,{name:e});const s=new yu(r.get(1),r.get(3)),a=new Ce(r.popFirst(5));return s.isEqual(t)||gs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uo extends RT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uo._jsonSchema={type:Yt("string",Uo._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class mh extends Uo{data(e={}){return super.data(e)}}class Ha{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new nu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new mh(this._firestore,this._userDataWriter,r.key,r,new nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new mh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new mh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:tO(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(n){n=hi(n,Ht);const e=hi(n.firestore,Yo);return FN(mg(e),n._key).then((t=>iO(e,n,t)))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:Yt("string",Ha._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class NT extends eO{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function OT(n){n=hi(n,dl);const e=hi(n.firestore,Yo),t=mg(e),r=new NT(e);return JN(n._query),UN(t,n._query).then((s=>new Ha(e,r,n,s)))}function Ig(n,e,t){n=hi(n,Ht);const r=hi(n.firestore,Yo),s=xT(n.converter,e,t);return Id(r,[IT(Ed(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ur.none())])}function Td(n,e,t,...r){n=hi(n,Ht);const s=hi(n.firestore,Yo),a=Ed(s);let u;return u=typeof(e=Pt(e))=="string"||e instanceof _d?GN(a,"updateDoc",n._key,e,t,r):KN(a,"updateDoc",n._key,e),Id(s,[u.toMutation(n._key,Ur.exists(!0))])}function nO(n){return Id(hi(n.firestore,Yo),[new Jm(n._key,Ur.none())])}function rO(n,e){const t=hi(n.firestore,Yo),r=Tr(n),s=xT(n.converter,e);return Id(t,[IT(Ed(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Ur.exists(!1))]).then((()=>r))}function Id(n,e){return(function(r,s){const a=new cs;return r.asyncQueue.enqueueAndForget((async()=>PN(await jN(r),s,a))),a.promise})(mg(n),e)}function iO(n,e,t){const r=t.docs.get(e._key),s=new NT(n);return new Uo(n,s,e._key,r,new nu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(){return new Fu("deleteField")}function nl(){return new gg("serverTimestamp")}function DT(...n){return new vg("arrayUnion",n)}function oO(...n){return new yg("arrayRemove",n)}(function(e,t=!0){(function(s){ll=s})(Go),to(new fs("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Yo(new XR(r.getProvider("auth-internal")),new ZR(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Fr(W_,H_,e),Fr(W_,H_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="type.googleapis.com/google.protobuf.Int64Value",lO="type.googleapis.com/google.protobuf.UInt64Value";function VT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Uh(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Uh(e));if(typeof n=="function"||typeof n=="object")return VT(n,e=>Uh(e));throw new Error("Data cannot be encoded in JSON: "+n)}function rl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case aO:case lO:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>rl(e)):typeof n=="function"||typeof n=="object"?VT(n,e=>rl(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cr extends fi{constructor(e,t,r){super(`${bg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,cr.prototype)}}function uO(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function zh(n,e){let t=uO(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Bw[u])return new cr("internal","internal");t=Bw[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=rl(s))}}catch{}return t==="ok"?null:new cr(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="us-central1",hO=/^data: (.*?)(?:\n|$)/;function dO(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new cr("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class fO{constructor(e,t,r,s,a=dm,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new cO(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=dm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function pO(n,e,t){const r=_s(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Zh(n.emulatorOrigin),ed("Functions",!0))}function mO(n,e,t){const r=s=>vO(n,e,s,{});return r.stream=(s,a)=>_O(n,e,s,a),r}async function gO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function MT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function vO(n,e,t,r){const s=n._url(e);return yO(n,s,t,r)}async function yO(n,e,t,r){t=Uh(t);const s={data:t},a=await MT(n,r),u=r.timeout||7e4,d=dO(u),f=await Promise.race([gO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new cr("cancelled","Firebase Functions instance was deleted.");const m=zh(f.status,f.json);if(m)throw m;if(!f.json)throw new cr("internal","Response is not valid JSON object.");let _=f.json.data;if(typeof _>"u"&&(_=f.json.result),typeof _>"u")throw new cr("internal","Response is missing data field.");return{data:rl(_)}}function _O(n,e,t,r){const s=n._url(e);return wO(n,s,t,r||{})}async function wO(n,e,t,r){var s;t=Uh(t);const a={data:t},u=await MT(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const R=new cr("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const O=zh(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const _=new Promise((A,O)=>{f=A,m=O});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const A=new cr("cancelled","Request was cancelled.");m(A)});const S=d.body.getReader(),w=EO(S,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const A=w.getReader();return{async next(){const{value:O,done:R}=await A.read();return{value:O,done:R}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:_}}function EO(n,e,t,r){const s=(u,d)=>{const f=u.match(hO);if(!f)return;const m=f[1];try{const _=JSON.parse(m);if("result"in _){e(rl(_.result));return}if("message"in _){d.enqueue(rl(_.message));return}if("error"in _){const S=zh(0,_);d.error(S),t(S);return}}catch(_){if(_ instanceof cr){d.error(_),t(_);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new cr("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const w=new cr("cancelled","Request was cancelled");u.error(w),t(w),await n.cancel();return}d+=a.decode(m,{stream:!0});const S=d.split(`
`);d=S.pop()||"";for(const w of S)w.trim()&&s(w.trim(),u);return f()}catch(m){const _=m instanceof cr?m:zh(0,null);u.error(_),t(_)}}},cancel(){return n.cancel()}})}const Ww="@firebase/functions",Hw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="auth-internal",TO="app-check-internal",IO="messaging-internal";function bO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(SO),u=t.getProvider(IO),d=t.getProvider(TO);return new fO(s,a,u,d,r)};to(new fs(bg,e,"PUBLIC").setMultipleInstances(!0)),Fr(Ww,Hw,n),Fr(Ww,Hw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n=td(),e=dm){const r=Ru(Pt(n),bg).getImmediate({identifier:e}),s=Am("functions");return s&&PO(r,...s),r}function PO(n,e,t){pO(Pt(n),e,t)}function Nn(n,e,t){return mO(Pt(n),e)}bO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebasestorage.googleapis.com",jT="storageBucket",AO=120*1e3,RO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt extends fi{constructor(e,t,r=0){super(_p(e),`Firebase Storage: ${t} (${_p(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function _p(n){return"storage/"+n}function Cg(){const n="An unknown error occurred, please check the error payload for server response.";return new zt(Ut.UNKNOWN,n)}function kO(n){return new zt(Ut.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function xO(n){return new zt(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Ut.UNAUTHENTICATED,n)}function OO(){return new zt(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DO(n){return new zt(Ut.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function VO(){return new zt(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MO(){return new zt(Ut.CANCELED,"User canceled the upload/download.")}function LO(n){return new zt(Ut.INVALID_URL,"Invalid URL '"+n+"'.")}function jO(n){return new zt(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function FO(){return new zt(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jT+"' property when initializing the app?")}function UO(){return new zt(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zO(){return new zt(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $O(n){return new zt(Ut.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fm(n){return new zt(Ut.INVALID_ARGUMENT,n)}function FT(){return new zt(Ut.APP_DELETED,"The Firebase app was deleted.")}function BO(n){return new zt(Ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(n,e){return new zt(Ut.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ql(n){throw new zt(Ut.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=wr.makeFromUrl(e,t)}catch{return new wr(e,"")}if(r.path==="")return r;throw jO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(ee){ee.path_=decodeURIComponent(ee.path)}const _="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",A=new RegExp(`^https?://${S}/${_}/b/${s}/o${w}`,"i"),O={bucket:1,path:3},R=t===LT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",$=new RegExp(`^https?://${R}/${s}/${C}`,"i"),G=[{regex:d,indices:f,postModify:a},{regex:A,indices:O,postModify:m},{regex:$,indices:{bucket:1,path:2},postModify:m}];for(let ee=0;ee<G.length;ee++){const X=G[ee],re=X.regex.exec(e);if(re){const k=re[X.indices.bucket];let P=re[X.indices.path];P||(P=""),r=new wr(k,P),X.postModify(r);break}}if(r==null)throw LO(e);return r}}class WO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function _(...C){m||(m=!0,e.apply(null,C))}function S(C){s=setTimeout(()=>{s=null,n(A,f())},C)}function w(){a&&clearTimeout(a)}function A(C,...$){if(m){w();return}if(C){w(),_.call(null,C,...$);return}if(f()||u){w(),_.call(null,C,...$);return}r<64&&(r*=2);let G;d===1?(d=2,G=0):G=(r+Math.random())*1e3,S(G)}let O=!1;function R(C){O||(O=!0,w(),!m&&(s!==null?(C||(d=2),clearTimeout(s),S(0)):C||(d=1)))}return S(0),a=setTimeout(()=>{u=!0,R(!0)},t),R}function qO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n){return n!==void 0}function GO(n){return typeof n=="object"&&!Array.isArray(n)}function Pg(n){return typeof n=="string"||n instanceof String}function qw(n){return Ag()&&n instanceof Blob}function Ag(){return typeof Blob<"u"}function Kw(n,e,t,r){if(r<e)throw fm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function UT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var zo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,t,r,s,a,u,d,f,m,_,S,w=!0,A=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=S,this.retry=w,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,R)=>{this.resolve_=O,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===zo.NO_ERROR,f=a.getStatus();if(!d||QO(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===zo.ABORT;r(!1,new Yc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new Yc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());KO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=Cg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?FT():MO();u(f)}else{const f=VO();u(f)}};this.canceled_?t(!1,new Yc(!1,null,!0)):this.backoffId_=HO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function JO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function eD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function tD(n,e,t,r,s,a,u=!0,d=!1){const f=UT(n.urlParams),m=n.url+f,_=Object.assign({},n.headers);return ZO(_,e),YO(_,t),JO(_,a),eD(_,r),new XO(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rD(...n){const e=nD();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ag())return new Blob(n);throw new zt(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function iD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){if(typeof atob>"u")throw $O("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wp{constructor(e,t){this.data=e,this.contentType=t||null}}function oD(n,e){switch(n){case xi.RAW:return new wp(zT(e));case xi.BASE64:case xi.BASE64URL:return new wp($T(n,e));case xi.DATA_URL:return new wp(lD(e),uD(e))}throw Cg()}function zT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function aD(n){let e;try{e=decodeURIComponent(n)}catch{throw hu(xi.DATA_URL,"Malformed data URL.")}return zT(e)}function $T(n,e){switch(n){case xi.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw hu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case xi.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw hu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=sD(e)}catch(s){throw s.message.includes("polyfill")?s:hu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class BT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hu(xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=cD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function lD(n){const e=new BT(n);return e.base64?$T(xi.BASE64,e.rest):aD(e.rest)}function uD(n){return new BT(n).contentType}function cD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){let r=0,s="";qw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(qw(this.data_)){const r=this.data_,s=iD(r,e,t);return s===null?null:new Ks(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ks(r,!0)}}static getBlob(...e){if(Ag()){const t=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(rD.apply(null,t))}else{const t=e.map(u=>Pg(u)?oD(xi.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new Ks(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){let e;try{e=JSON.parse(n)}catch{return null}return GO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function HT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(n,e){return e}class $n{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||fD}}let Jc=null;function pD(n){return!Pg(n)||n.length<2?n:HT(n)}function qT(){if(Jc)return Jc;const n=[];n.push(new $n("bucket")),n.push(new $n("generation")),n.push(new $n("metageneration")),n.push(new $n("name","fullPath",!0));function e(a,u){return pD(u)}const t=new $n("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new $n("size");return s.xform=r,n.push(s),n.push(new $n("timeCreated")),n.push(new $n("updated")),n.push(new $n("md5Hash",null,!0)),n.push(new $n("cacheControl",null,!0)),n.push(new $n("contentDisposition",null,!0)),n.push(new $n("contentEncoding",null,!0)),n.push(new $n("contentLanguage",null,!0)),n.push(new $n("contentType",null,!0)),n.push(new $n("metadata","customMetadata",!0)),Jc=n,Jc}function mD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new wr(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function gD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return mD(r,n),r}function KT(n,e,t){const r=WT(e);return r===null?null:gD(n,r,t)}function vD(n,e,t,r){const s=WT(e);if(s===null||!Pg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,S=n.fullPath,w="/b/"+u(_)+"/o/"+u(S),A=bd(w,t,r),O=UT({alt:"media",token:m});return A+O})[0]}function yD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Rg{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n){if(!n)throw Cg()}function _D(n,e){function t(r,s){const a=KT(n,s,e);return GT(a!==null),a}return t}function wD(n,e){function t(r,s){const a=KT(n,s,e);return GT(a!==null),vD(a,s,n.host,n._protocol)}return t}function QT(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=OO():s=NO():t.getStatus()===402?s=xO(n.bucket):t.getStatus()===403?s=DO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function XT(n){const e=QT(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=kO(n.path)),a.serverResponse=s.serverResponse,a}return t}function ED(n,e,t){const r=e.fullServerUrl(),s=bd(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new Rg(s,a,wD(n,t),u);return d.errorHandler=XT(e),d}function SD(n,e){const t=e.fullServerUrl(),r=bd(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new Rg(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=XT(e),d}function TD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function ID(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=TD(null,e)),r}function bD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let G="";for(let ee=0;ee<2;ee++)G=G+Math.random().toString().slice(2);return G}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=ID(e,r,s),_=yD(m,t),S="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,w=`\r
--`+f+"--",A=Ks.getBlob(S,r,w);if(A===null)throw UO();const O={name:m.fullPath},R=bd(a,n.host,n._protocol),C="POST",$=n.maxUploadRetryTime,Q=new Rg(R,C,_D(n,t),$);return Q.urlParams=O,Q.headers=u,Q.body=A.uploadData(),Q.errorHandler=QT(e),Q}class CD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw Ql("cannot .send() more than once");if(_s(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class PD extends CD{initXhr(){this.xhr_.responseType="text"}}function kg(){return new PD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){this._service=e,t instanceof wr?this._location=t:this._location=wr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ho(e,t)}get root(){const e=new wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HT(this._location.path)}get storage(){return this._service}get parent(){const e=hD(this._location.path);if(e===null)return null;const t=new wr(this._location.bucket,e);return new Ho(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw BO(e)}}function AD(n,e,t){n._throwIfRoot("uploadBytes");const r=bD(n.storage,n._location,qT(),new Ks(e,!0),t);return n.storage.makeRequestWithTokens(r,kg).then(s=>({metadata:s,ref:n}))}function RD(n){n._throwIfRoot("getDownloadURL");const e=ED(n.storage,n._location,qT());return n.storage.makeRequestWithTokens(e,kg).then(t=>{if(t===null)throw zO();return t})}function kD(n){n._throwIfRoot("deleteObject");const e=SD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,kg)}function xD(n,e){const t=dD(n._location.path,e),r=new wr(n._location.bucket,t);return new Ho(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(n){return/^[A-Za-z]+:\/\//.test(n)}function OD(n,e){return new Ho(n,e)}function YT(n,e){if(n instanceof xg){const t=n;if(t._bucket==null)throw FO();const r=new Ho(t,t._bucket);return e!=null?YT(r,e):r}else return e!==void 0?xD(n,e):n}function DD(n,e){if(e&&ND(e)){if(n instanceof xg)return OD(n,e);throw fm("To use ref(service, url), the first argument must be a Storage instance.")}else return YT(n,e)}function Gw(n,e){const t=e==null?void 0:e[jT];return t==null?null:wr.makeFromBucketSpec(t,n)}function VD(n,e,t,r={}){n.host=`${e}:${t}`;const s=_s(e);s&&(Zh(`https://${n.host}/b`),ed("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:hE(a,n.app.options.projectId))}class xg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=LT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AO,this._maxUploadRetryTime=RO,this._requests=new Set,s!=null?this._bucket=wr.makeFromBucketSpec(s,this._host):this._bucket=Gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wr.makeFromBucketSpec(this._url,e):this._bucket=Gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ho(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new WO(FT());{const u=tD(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Qw="@firebase/storage",Xw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="storage";function MD(n,e,t){return n=Pt(n),AD(n,e,t)}function LD(n){return n=Pt(n),RD(n)}function jD(n){return n=Pt(n),kD(n)}function ZT(n,e){return n=Pt(n),DD(n,e)}function FD(n=td(),e){n=Pt(n);const r=Ru(n,JT).getImmediate({identifier:e}),s=Am("storage");return s&&UD(r,...s),r}function UD(n,e,t,r={}){VD(n,e,t,r)}function zD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new xg(t,r,s,e,Go)}function $D(){to(new fs(JT,zD,"PUBLIC").setMultipleInstances(!0)),Fr(Qw,Xw,""),Fr(Qw,Xw,"esm2017")}$D();const BD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},Cd=pE(BD),Bn=qR(Cd),xn=$N(Cd),eI=FD(Cd),On=CO(Cd,"us-central1");DA(Bn,UE);Nn(On,"bootstrapFirstAdmin");Nn(On,"setUserRole");const WD=Nn(On,"ensureCoachAccess"),HD=Nn(On,"acceptCoachTrial"),qD=Nn(On,"getCoachAccessState"),KD=Nn(On,"completeClientOnboarding"),GD=Nn(On,"listCoachesForSupervisor"),QD=Nn(On,"activateCoachSubscription"),XD=Nn(On,"renewCoachSubscription"),YD=Nn(On,"disableCoachSubscription"),JD=Nn(On,"deleteMyProfile"),ZD=Nn(On,"updateMyCoachPhone"),e2=Nn(On,"getMyAssignedPlans"),t2=Nn(On,"updateMyPlanExerciseWeight"),n2=Nn(On,"syncPlanWeightOverridesForCoach"),r2=Nn(On,"syncMyPlanWeightOverrides");async function i2(){return(await WD()).data}async function tI(){return(await HD()).data}async function Yw(){return(await qD()).data}async function s2(n){return(await KD(n)).data}async function o2(){return(await GD()).data}async function Jw(n){return(await QD({uid:n})).data}async function a2(n){return(await XD({uid:n})).data}async function l2(n){return(await YD({uid:n})).data}async function nI(){return(await JD()).data}async function u2(n){return(await ZD({phone:n})).data}async function c2(){return(await e2()).data}async function Zw(n,e,t){return(await t2({planId:n,exerciseIndex:e,weightKg:t})).data}async function h2(n){return(await n2({planId:n})).data}async function d2(){return(await r2()).data}async function f2(){return Bn.currentUser?Bn.currentUser.getIdTokenResult(!0):null}async function rI(n){const e=n??Bn.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await rd(Bn),null}throw t}}async function p2(n){const e=n??Bn.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function iI(){return{createdAt:nl(),updatedAt:nl()}}function pl(){return{updatedAt:nl()}}function ho(){var e;const n=(e=Bn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function pm(n={}){const e=ho(),t=Tr(xn,"users",e);return await Ig(t,{uid:e,...iI(),...n},{merge:!0}),t}async function qa(n){const e=n??ho();return Uu(Tr(xn,"users",e))}async function m2(n){const e=n??ho(),t=cm(jh(xn,"users"),hm("assignedCoachId","==",e));return OT(t)}async function sI(n,e){return Uu(Tr(xn,"users",n,"private",e))}async function g2(){const n=ho();return Uu(Tr(xn,"users",n,"private","planWeights"))}async function v2(n,e,t){const r=ho();await Ig(Tr(xn,"users",r,"private","planWeights"),{weights:{[n]:{[String(e)]:t}},...pl()},{merge:!0})}async function y2(n,e){await Ig(Tr(xn,"users",n,"private","onboarding"),{...e,...pl()},{merge:!0})}async function e0(n){const e=ho();return await rO(jh(xn,"plans"),{trainerId:e,clientId:n.clientId??"",status:n.status,title:n.title,warmup:n.warmup??"",description:n.description??"",kind:n.kind??"series_reps",notes:n.notes??"",assignedClientIds:n.assignedClientIds??[],exercises:n.exercises,clientNotes:"",lastViewedAt:null,...iI()})}async function oI(n,e){const t=e??ho(),r=n==="client"?cm(jh(xn,"plans"),hm("assignedClientIds","array-contains",t)):cm(jh(xn,"plans"),hm("trainerId","==",t));return OT(r)}async function _2(n,e){await Td(Tr(xn,"plans",n),{assignedClientIds:DT(e),[`assignmentDetails.${e}`]:{mode:"permanent",weeks:null,expiresAt:null,assignedAt:nl()},...pl()})}async function t0(n,e,t,r){const s=r?new Date(r):new Date,a=Number.isNaN(s.getTime())?new Date:s,u=t&&t>0?{mode:"timed",weeks:t,startsAt:_t.fromDate(a),expiresAt:_t.fromDate(new Date(a.getTime()+t*7*24*60*60*1e3)),assignedAt:nl()}:{mode:"permanent",weeks:null,startsAt:null,expiresAt:null,assignedAt:nl()};await Td(Tr(xn,"plans",n),{assignedClientIds:DT(e),[`assignmentDetails.${e}`]:u,...pl()})}async function w2(n,e){await Td(Tr(xn,"plans",n),{assignedClientIds:oO(e),[`assignmentDetails.${e}`]:sO(),...pl()})}async function E2(n){return Uu(Tr(xn,"plans",n))}async function S2(n,e){await Td(Tr(xn,"plans",n),{...e,...pl()})}async function T2(n){const e=Tr(xn,"plans",n),t=await Uu(e);if(t.exists()){const r=t.data(),s=C2(r.exercises);await Promise.allSettled(s.map(a=>P2(a)))}await nO(e)}async function I2(n,e){const t=ho(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=b2(t,n,s);return await MD(a,e,{contentType:e.type||"application/octet-stream"}),LD(a)}function b2(n,e,t){return ZT(eI,`workout-media/${n}/${e}/${t}`)}function C2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;n0(r)&&e.add(r),n0(s)&&e.add(s)}return[...e]}function n0(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function P2(n){try{await jD(ZT(eI,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}function ml(){const[n,e]=V.useState(!0),[t,r]=V.useState(Bn.currentUser),[s,a]=V.useState(null),[u,d]=V.useState(!1);return V.useEffect(()=>LE(Bn,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await Ng(f);const m=await rI(f);a(m),d(await p2(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await rd(Bn),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),V.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const mm=new as;mm.setCustomParameters({prompt:"select_account"});async function Ng(n){(await qa(n.uid)).exists()||await pm({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function r0(){try{const n=await eR(Bn,mm);return await Ng(n.user),{redirected:!1,user:n.user}}catch(n){if(R2(n))return await oR(Bn,mm),{redirected:!0,user:null};throw n}}async function A2(){try{const n=await lR(Bn);return n!=null&&n.user&&await Ng(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await rd(Bn),null;throw n}}async function Er(){return rd(Bn)}function R2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function aI(n){return n.replace(/[^\d]/g,"")}const k2="393405882404".trim(),lI=aI(k2);lI.length>6;function uI(n,e){const t=aI(e??lI),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function x2(n){return n.map(e=>({id:e.id,...e.data()}))}function Vt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Lr="bw_login_intent";function N2(n){return n==="trainer"||n==="admin"}function O2(){const{user:n,role:e}=ml(),t=Cu(),{showError:r}=Yh(),[s,a]=V.useState(!1),[u,d]=V.useState(""),[f,m]=V.useState(!1),[_,S]=V.useState(!1),[w,A]=V.useState(null),[O,R]=V.useState(null),[C,$]=V.useState(!1),Q=V.useRef(0),G=V.useMemo(()=>uI("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);V.useEffect(()=>{async function M(){try{await A2()}catch(L){const x=Vt(L);d(x),r(x)}}M()},[r]);async function ee(M=10){if(!n)return!1;for(let L=0;L<M;L+=1){await f2();const x=await rI(n);if(N2(x))return!0;await new Promise(Fe=>setTimeout(Fe,500))}return!1}async function X(){if(!n)return;const M=++Q.current,L=()=>M!==Q.current||_;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await pm({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),L())return;const x=await i2();if(L())return;const Oe=(await qa(n.uid)).data();if(!(typeof(Oe==null?void 0:Oe.phone)=="string"?Oe.phone.trim():"")){R({access:x,phone:""}),m(!1),d("");return}if(x.isExpired){if(await Er(),sessionStorage.removeItem(Lr),L())return;A({mode:"expired",access:x});return}if(x.requiresTrialAcceptance){if(L())return;A({mode:"trial",access:x});return}const Ve=await ee();if(L())return;if(!Ve){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Lr),t("/app/coach",{replace:!0})}catch(x){if(L())return;const Fe=Vt(x);d(Fe),r(Fe)}finally{L()||m(!1)}}async function re(){if(!O||!n)return;const M=O.phone.replace(/[^\d+]/g,"").trim();if(M.length<8){d("Inserisci un numero WhatsApp valido.");return}$(!0),d("Salvo il tuo numero e completo la registrazione coach...");try{await pm({phone:M});const L=O.access;if(R(null),L.isExpired){await Er(),sessionStorage.removeItem(Lr),A({mode:"expired",access:L});return}if(L.requiresTrialAcceptance){A({mode:"trial",access:L});return}if(!await ee()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Lr),t("/app/coach",{replace:!0})}catch(L){const x=Vt(L);d(x),r(x)}finally{$(!1)}}V.useEffect(()=>{async function M(){if(!n){m(!1),_||d("");return}if(f||_||O)return;if(sessionStorage.getItem(Lr)==="coach"){await X();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}M()},[n,e,f,_,O]),V.useEffect(()=>{_&&(n||(S(!1),t("/auth",{replace:!0})))},[_,n,t]);async function k(){Q.current+=1,S(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(Lr),A(null),R(null);try{await Er()}catch(M){d(Vt(M)),S(!1)}}async function P(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const M=await tI();if(M.isExpired){await Er(),sessionStorage.removeItem(Lr),A({mode:"expired",access:M});return}if(!await ee()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}A(null),sessionStorage.removeItem(Lr),t("/app/coach",{replace:!0})}catch(M){const L=Vt(M);d(L),r(L)}finally{a(!1)}}async function N(){a(!0),d(""),A(null);try{if(sessionStorage.setItem(Lr,"client"),(await r0()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(M){const L=Vt(M);d(L),r(L)}finally{a(!1)}}async function j(){a(!0),d(""),A(null);try{sessionStorage.setItem(Lr,"coach");const M=await r0();if(M.redirected){d("Ti sto reindirizzando a Google...");return}if(!M.user){d("Accesso non completato. Riprova.");return}await X()}catch(M){const L=Vt(M);d(L),r(L)}finally{a(!1)}}return(w==null?void 0:w.mode)==="trial"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:s,onClick:()=>void P(),children:s?"Attivazione...":"Accetta e continua"})]})]})}):(w==null?void 0:w.mode)==="expired"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Periodo di prova terminato"}),g.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{A(null),sessionStorage.removeItem(Lr)},children:"Torna all'accesso"}),g.jsx("a",{className:"btn btn-whatsapp btn-primary",href:G,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"})]})]})}):O?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Registrazione Coach"}),g.jsx("h1",{children:"Inserisci numero WhatsApp"}),g.jsx("p",{className:"hero-sub",children:"Ultimo step obbligatorio: questo numero verr condiviso ai clienti associati al tuo codice coach."}),g.jsxs("label",{children:["Numero di telefono / WhatsApp *",g.jsx("input",{type:"tel",placeholder:"Es. 3405882404",value:O.phone,onChange:M=>R(L=>L&&{...L,phone:M.target.value})})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:C,onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:C,onClick:()=>void re(),children:C?"Salvataggio...":"Continua"})]}),u?g.jsx("p",{className:"message",children:u}):null]})}):n&&e&&sessionStorage.getItem(Lr)!=="coach"?g.jsx(ui,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h2",{children:"Accesso Cliente"}),g.jsx("p",{className:"hint",children:"Se usi la piattaforma per ricevere e seguire la tua scheda tecnica, entra da qui."}),g.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void N(),type:"button",children:s?"Connessione...":"Continua come Cliente"}),g.jsx("div",{className:"divider"}),g.jsx("h2",{children:"Accesso Coach / Supervisor"}),g.jsx("p",{className:"hint",children:"Se devi gestire clienti e schede, accedi da qui. Se  il primo accesso, verr avviata la registrazione coach."}),g.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void j(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach/Supervisor"}),u?g.jsx("p",{className:"message",children:u}):null,g.jsx(h1,{})]})})}function cI({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u,[m,_]=V.useState(!1),S=V.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),w=V.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),A=m?"__more__":a,O=m||!m&&w.some(C=>C.id===a);function R(C,$){const Q=($==="mobile"?A:a)===C.id,G=$==="mobile"?C.mobileLabel??C.label:C.label;return g.jsxs("button",{className:`shell-tab shell-tab-${$} ${Q?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),$==="mobile"&&_(!1)},"aria-current":Q?"page":void 0,children:[C.icon?g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:C.icon}):null,g.jsx("span",{className:"shell-tab-label",children:G})]},`${$}-${C.id}`)}return g.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?g.jsxs("aside",{className:"shell-sidebar desktop-only",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h2",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hint",children:t}):null,g.jsx("nav",{className:"shell-sidebar-nav",children:s.map(C=>R(C,"desktop"))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Er(),children:"Esci dal profilo"})]}):null,g.jsxs("section",{className:"shell-main",children:[g.jsxs("section",{className:"hero hero-compact",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h1",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hero-sub",children:t}):null,r,f?null:g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Er(),children:"Esci dal profilo"})]}),g.jsx("section",{className:"stack app-stack",children:d})]}),g.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?S.map(C=>R(C,"mobile")):g.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Home"})]}),w.length>0?g.jsxs("button",{className:`shell-tab shell-tab-mobile ${O||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>_(C=>!C),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,g.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Er(),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&w.length>0?g.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",onClick:C=>C.currentTarget===C.target&&_(!1),children:g.jsxs("article",{className:"card mobile-more-card",onClick:C=>C.stopPropagation(),children:[g.jsx("h3",{children:"Altre sezioni"}),g.jsx("div",{className:"mobile-more-list",children:w.map(C=>g.jsxs("button",{className:`step-tab ${a===C.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),_(!1)},children:[C.icon?`${C.icon} `:"",C.label]},`more-${C.id}`))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>_(!1),children:"Chiudi"})]})}):null]})}function Ep(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Sp(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function i0(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Tp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number((typeof t.weight=="string"?t.weight:"").replace(/[^\d.-]/g,"")),s=typeof t.advancedMethod=="string"?t.advancedMethod.trim():"",a=s==="rest_pause"||s==="drop_set"?s:"",u=typeof t.advancedMethodNotes=="string"?t.advancedMethodNotes:"",d=typeof t.restPauseNotes=="string"?t.restPauseNotes:a==="rest_pause"?u:"",f=typeof t.dropSetNotes=="string"?t.dropSetNotes:a==="drop_set"?u:"";return{name:typeof t.name=="string"?t.name:"",notes:typeof t.notes=="string"?t.notes:"",advancedMethod:a,advancedMethodNotes:u,restPauseNotes:d,dropSetNotes:f,sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,workValue:typeof t.workValue=="number"?t.workValue:Number(t.workValue??t.reps??0)||0,weightKg:typeof t.weightKg=="number"?t.weightKg:Number(t.weightKg??r??0)||0,restSeconds:typeof t.restSeconds=="number"?t.restSeconds:Number(t.restSeconds??0)||0,mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function s0(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function D2(n,e){const r=(n.clientWeightOverrides&&typeof n.clientWeightOverrides=="object"?n.clientWeightOverrides:{})[e];if(!r||typeof r!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const s=n.exercises.map((a,u)=>{if(!a||typeof a!="object")return a;const d=r[String(u)];return Number.isFinite(Number(d))?{...a,weightKg:Number(d)}:a});return{...n,exercises:s}}function V2(n,e){const t=e[n.id];if(!t||typeof t!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const r=n.exercises.map((s,a)=>{if(!s||typeof s!="object")return s;const u=t[String(a)];return Number.isFinite(Number(u))?{...s,weightKg:Number(u)}:s});return{...n,exercises:r}}function M2(){const{role:n,user:e}=ml(),t=Cu(),{showError:r,showSuccess:s}=Yh(),[a,u]=V.useState([]),[d,f]=V.useState(!1),[m,_]=V.useState(!0),[S,w]=V.useState(null),[A,O]=V.useState(!1),[R,C]=V.useState(null),[$,Q]=V.useState("plan"),[G,ee]=V.useState(""),[X,re]=V.useState(!1),[k,P]=V.useState(!1),[N,j]=V.useState(""),[M,L]=V.useState({}),[x,Fe]=V.useState({}),[Oe,Be]=V.useState(""),[Ve,ae]=V.useState(""),ye="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";V.useEffect(()=>{async function ie(){if(e)try{const st=(await qa(e.uid)).data();if(!(st!=null&&st.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{_(!1)}}ie()},[e,t]);async function he(){f(!0);try{const ie=(e==null?void 0:e.uid)??"";if(!ie){u([]),ee("");return}const qe=ie?await qa(ie):null,st=(qe==null?void 0:qe.data())??{},rt=ie?await sI(ie,"onboarding"):null;try{await d2()}catch{}const at=ie?await g2():null,wt=((at==null?void 0:at.data())??{}).weights??{};L(wt),C((rt==null?void 0:rt.data())??null);let lt=s0(st.assignedCoachPhone??"");if(!lt&&st.assignedCoachId)try{const ut=(await qa(st.assignedCoachId)).data();lt=s0(typeof(ut==null?void 0:ut.phone)=="string"?ut.phone:"")}catch{lt=""}j(lt);const sn=new Map;let pt=!1;try{const et=await c2();if(et!=null&&et.ok&&Array.isArray(et.plans))for(const ut of et.plans)sn.set(ut.id,ut)}catch{pt=!0}if(pt)try{const et=await oI("client",ie);for(const ut of x2(et.docs))sn.set(ut.id,ut)}catch(et){r(`Errore caricamento schede: ${Vt(et)}`)}const Lt=Array.from(sn.values()).map(et=>D2(et,ie)).map(et=>V2(et,wt)).sort((et,ut)=>{const zr=new Date(String(et.updatedAt??"")).getTime()||0;return(new Date(String(ut.updatedAt??"")).getTime()||0)-zr});u(Lt),Lt.length>0&&Object.keys(wt).length>0&&B(Lt,wt),Lt.length>0?ee(et=>et&&Lt.some(ut=>ut.id===et)?et:Lt[0].id):ee("")}catch(ie){r(Vt(ie))}finally{f(!1)}}async function B(ie,qe){const st=new Set(ie.map(at=>at.id)),rt=[];for(const[at,xt]of Object.entries(qe))if(st.has(at)&&!(!xt||typeof xt!="object"))for(const[wt,lt]of Object.entries(xt)){const sn=Number(wt),pt=Number(lt);!Number.isInteger(sn)||sn<0||!Number.isFinite(pt)||pt<0||rt.push(Zw(at,sn,pt))}rt.length!==0&&await Promise.allSettled(rt)}V.useEffect(()=>{e&&(n==="client"||n===null)&&he()},[n,e==null?void 0:e.uid]);async function U(){P(!0);try{await nI(),await Er().catch(()=>{}),t("/auth",{replace:!0})}catch(ie){r(Vt(ie))}finally{P(!1),re(!1)}}function fe(ie,qe){w({url:ie,label:qe}),O(Sp(ie))}const ge=a.find(ie=>ie.id===G)??a[0],Pe=Tp(ge==null?void 0:ge.exercises),le=N.length>6,Me=le?uI(ye,N):"#",De=[{label:"Nome e cognome",value:R==null?void 0:R.fullName},{label:"E-mail",value:(R==null?void 0:R.email)??(e==null?void 0:e.email)},{label:"Telefono",value:R==null?void 0:R.phone},{label:"Et",value:R==null?void 0:R.age},{label:"Sesso",value:R==null?void 0:R.sex},{label:"Altezza",value:R!=null&&R.heightCm?`${R.heightCm} cm`:""},{label:"Peso",value:R!=null&&R.weightKg?`${R.weightKg} kg`:""},{label:"Obiettivo",value:R==null?void 0:R.objectivePrimary}].filter(ie=>(ie.value??"").toString().trim().length>0);V.useEffect(()=>{const ie={};for(const qe of a)Tp(qe.exercises).forEach((rt,at)=>{ie[`${qe.id}:${at}`]=String(rt.weightKg||0)});Fe(ie)},[a]);async function Ge(ie,qe,st){const rt=`${ie}:${qe}`,at=(x[rt]??String(st)).trim(),xt=Number(at);if(!Number.isFinite(xt)||xt<0){r("Inserisci un peso valido (numero >= 0).");return}Be(rt);try{await v2(ie,qe,xt),L(wt=>({...wt,[ie]:{...wt[ie]??{},[String(qe)]:xt}}));try{await Zw(ie,qe,xt)}catch{r("Peso salvato per te, ma non ancora sincronizzato lato coach. Riprova tra poco.")}u(wt=>wt.map(lt=>{if(lt.id!==ie)return lt;const pt=Tp(lt.exercises).map((Lt,et)=>et===qe?{...Lt,weightKg:xt}:Lt);return{...lt,exercises:pt}})),Fe(wt=>({...wt,[rt]:String(xt)})),ae(""),s("Peso aggiornato.")}catch(wt){r(Vt(wt))}finally{Be("")}}function Tt(ie,qe,st){const rt=`${ie}:${qe}`;Fe(at=>({...at,[rt]:at[rt]??String(st||0)})),ae(rt)}return e?m?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Prepariamo la tua area"}),g.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):g.jsxs(cI,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:$,onSectionChange:ie=>Q(ie),headerAction:g.jsx("div",{className:"mobile-only",children:g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:Me,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[$==="plan"?g.jsxs(g.Fragment,{children:[g.jsxs("article",{className:"card desktop-only",children:[g.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),g.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:Me,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),le?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."})]}),g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"La tua scheda tecnica"}),ge?g.jsxs(g.Fragment,{children:[a.length>1?g.jsxs("label",{children:["Scegli scheda",g.jsx("select",{value:ge.id,onChange:ie=>ee(ie.target.value),children:a.map(ie=>g.jsx("option",{value:ie.id,children:ie.title||"Scheda senza titolo"},ie.id))})]}):null,g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Programma attivo"}),g.jsx("h3",{children:ge.title})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:ge.kind==="circuit"?"Circuito":"Serie e reps"})]}),(ge.warmup??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",ge.warmup]})}):null,(ge.notes??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",ge.notes]})}):null,g.jsx("div",{className:"exercise-grid",children:Pe.map((ie,qe)=>g.jsxs("article",{className:"exercise-card",children:[g.jsx("p",{className:"exercise-name",children:ie.name||`Esercizio ${qe+1}`}),g.jsxs("div",{className:"exercise-meta",children:[ge.kind==="circuit"?g.jsxs("span",{children:[ie.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[ie.sets??"-"," serie"]}),g.jsxs("span",{children:[ie.reps||"-"," reps"]})]}),g.jsxs("span",{children:[ie.weightKg||0," kg"]}),g.jsxs("span",{children:[ie.restSeconds||0," sec recupero"]})]}),ie.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",ie.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,ie.advancedMethod&&(ie.advancedMethod==="rest_pause"?ie.restPauseNotes:ie.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",ie.advancedMethod==="rest_pause"?ie.restPauseNotes:ie.dropSetNotes]}):null,(()=>{const st=`${ge.id}:${qe}`,rt=Ve===st,at=Oe===st;return rt?g.jsxs("div",{className:"exercise-weight-edit-row",children:[g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:x[st]??String(ie.weightKg||0),onChange:xt=>Fe(wt=>({...wt,[st]:xt.target.value}))})]}),g.jsxs("div",{className:"exercise-weight-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:at,onClick:()=>ae(""),children:"Annulla"}),g.jsx("button",{className:"btn",type:"button",disabled:at,onClick:()=>void Ge(ge.id,qe,ie.weightKg||0),children:at?"Salvataggio...":"Salva"})]})]}):g.jsxs("div",{className:"exercise-weight-readonly",children:[g.jsxs("div",{children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:"Peso (kg)"})}),g.jsx("p",{className:"exercise-weight-value",children:ie.weightKg||0})]}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica peso esercizio",title:"Modifica peso",onClick:()=>Tt(ge.id,qe,ie.weightKg||0),children:""})]})})(),ie.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",ie.notes]}):null,ie.mediaUrl?g.jsx("button",{className:"btn-link",type:"button",onClick:()=>fe(ie.mediaUrl,ie.name||`Esercizio ${qe+1}`),children:Ep(ie.mediaUrl)||i0(ie.mediaUrl)?"Apri video":Sp(ie.mediaUrl)?"Apri immagine":"Apri link"}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${qe}`))})]}):g.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,$==="profile"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Profilo e anagrafica"}),De.length>0?g.jsx("div",{className:"client-info-block",children:De.map(ie=>g.jsxs("p",{className:"hint",children:[g.jsxs("strong",{children:[ie.label,":"]})," ",ie.value]},ie.label))}):g.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${le?"":"btn-disabled"}`.trim(),href:Me,onClick:ie=>{le||ie.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),le?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo perderai tutti i dati associati al tuo account, in linea con le policy aziendali."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>re(!0),children:"Elimina il mio profilo"})]}):null,d?g.jsx("section",{className:"modal-overlay",role:"status","aria-live":"polite","aria-label":"Caricamento in corso",children:g.jsxs("article",{className:"card loading-overlay-card",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("p",{className:"hint",children:"Caricamento scheda..."})]})}):null,S?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ie=>{ie.currentTarget===ie.target&&(w(null),O(!1))},children:g.jsxs("article",{className:"card modal-card",onClick:ie=>ie.stopPropagation(),children:[g.jsx("h2",{children:S.label}),Ep(S.url)?g.jsx("iframe",{title:S.label,src:Ep(S.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Sp(S.url)?g.jsxs(g.Fragment,{children:[A?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:S.url,alt:S.label,className:"media-frame media-image",style:{display:A?"none":"block"},onLoad:()=>O(!1),onError:()=>O(!1)})]}):i0(S.url)?g.jsx("video",{src:S.url,controls:!0,className:"media-frame"}):g.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",g.jsx("a",{href:S.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{w(null),O(!1)},children:"Chiudi"})]})}):null,X?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ie=>ie.currentTarget===ie.target&&re(!1),children:g.jsxs("article",{className:"card modal-card",onClick:ie=>ie.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente account, anagrafica, scheda e dati collegati."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:k,onClick:()=>re(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:k,onClick:()=>void U(),children:k?"Eliminazione...":"Conferma eliminazione"})]})]})}):null]}):g.jsx(ui,{to:"/auth",replace:!0})}function qo(n){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(n)}function L2(n,e){if(qo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hI(n){var e=L2(n,"string");return qo(e)=="symbol"?e:e+""}function ru(n,e,t){return(e=hI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o0(Object(t),!0).forEach(function(r){ru(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function j2(n){if(Array.isArray(n))return n}function F2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(_){m=!0,s=_}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function gm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function dI(n,e){if(n){if(typeof n=="string")return gm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gm(n,e):void 0}}function U2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(n,e){return j2(n)||F2(n,e)||dI(n,e)||U2()}function z2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function ws(n,e){if(n==null)return{};var t,r,s=z2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var $2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function B2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,_=n.onInputChange,S=n.onMenuClose,w=n.onMenuOpen,A=n.value,O=ws(n,$2),R=V.useState(d!==void 0?d:t),C=hs(R,2),$=C[0],Q=C[1],G=V.useState(f!==void 0?f:s),ee=hs(G,2),X=ee[0],re=ee[1],k=V.useState(A!==void 0?A:u),P=hs(k,2),N=P[0],j=P[1],M=V.useCallback(function(ae,ye){typeof m=="function"&&m(ae,ye),j(ae)},[m]),L=V.useCallback(function(ae,ye){var he;typeof _=="function"&&(he=_(ae,ye)),Q(he!==void 0?he:ae)},[_]),x=V.useCallback(function(){typeof w=="function"&&w(),re(!0)},[w]),Fe=V.useCallback(function(){typeof S=="function"&&S(),re(!1)},[S]),Oe=d!==void 0?d:$,Be=f!==void 0?f:X,Ve=A!==void 0?A:N;return ke(ke({},O),{},{inputValue:Oe,menuIsOpen:Be,onChange:M,onInputChange:L,onMenuClose:Fe,onMenuOpen:x,value:Ve})}function xe(){return xe=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xe.apply(null,arguments)}function W2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function a0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,hI(r.key),r)}}function H2(n,e,t){return e&&a0(n.prototype,e),t&&a0(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function vm(n,e){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},vm(n,e)}function q2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vm(n,e)}function $h(n){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$h(n)}function fI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fI=function(){return!!n})()}function K2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function G2(n,e){if(e&&(qo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K2(n)}function Q2(n){var e=fI();return function(){var t,r=$h(n);if(e){var s=$h(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return G2(this,t)}}function X2(n){if(Array.isArray(n))return gm(n)}function Y2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function J2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Og(n){return X2(n)||Y2(n)||dI(n)||J2()}function Z2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function eV(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var tV=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(eV(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Z2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),Pn="-ms-",Bh="-moz-",ct="-webkit-",pI="comm",Dg="rule",Vg="decl",nV="@import",mI="@keyframes",rV="@layer",iV=Math.abs,Pd=String.fromCharCode,sV=Object.assign;function oV(n,e){return vn(n,0)^45?(((e<<2^vn(n,0))<<2^vn(n,1))<<2^vn(n,2))<<2^vn(n,3):0}function gI(n){return n.trim()}function aV(n,e){return(n=e.exec(n))?n[0]:n}function ht(n,e,t){return n.replace(e,t)}function ym(n,e){return n.indexOf(e)}function vn(n,e){return n.charCodeAt(e)|0}function Eu(n,e,t){return n.slice(e,t)}function Ri(n){return n.length}function Mg(n){return n.length}function Zc(n,e){return e.push(n),n}function lV(n,e){return n.map(e).join("")}var Ad=1,il=1,vI=0,hr=0,Qt=0,gl="";function Rd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:Ad,column:il,length:u,return:""}}function Xl(n,e){return sV(Rd("",null,null,"",null,null,0),n,{length:-n.length},e)}function uV(){return Qt}function cV(){return Qt=hr>0?vn(gl,--hr):0,il--,Qt===10&&(il=1,Ad--),Qt}function Sr(){return Qt=hr<vI?vn(gl,hr++):0,il++,Qt===10&&(il=1,Ad++),Qt}function Li(){return vn(gl,hr)}function gh(){return hr}function zu(n,e){return Eu(gl,n,e)}function Su(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yI(n){return Ad=il=1,vI=Ri(gl=n),hr=0,[]}function _I(n){return gl="",n}function vh(n){return gI(zu(hr-1,_m(n===91?n+2:n===40?n+1:n)))}function hV(n){for(;(Qt=Li())&&Qt<33;)Sr();return Su(n)>2||Su(Qt)>3?"":" "}function dV(n,e){for(;--e&&Sr()&&!(Qt<48||Qt>102||Qt>57&&Qt<65||Qt>70&&Qt<97););return zu(n,gh()+(e<6&&Li()==32&&Sr()==32))}function _m(n){for(;Sr();)switch(Qt){case n:return hr;case 34:case 39:n!==34&&n!==39&&_m(Qt);break;case 40:n===41&&_m(n);break;case 92:Sr();break}return hr}function fV(n,e){for(;Sr()&&n+Qt!==57;)if(n+Qt===84&&Li()===47)break;return"/*"+zu(e,hr-1)+"*"+Pd(n===47?n:Sr())}function pV(n){for(;!Su(Li());)Sr();return zu(n,hr)}function mV(n){return _I(yh("",null,null,null,[""],n=yI(n),0,[0],n))}function yh(n,e,t,r,s,a,u,d,f){for(var m=0,_=0,S=u,w=0,A=0,O=0,R=1,C=1,$=1,Q=0,G="",ee=s,X=a,re=r,k=G;C;)switch(O=Q,Q=Sr()){case 40:if(O!=108&&vn(k,S-1)==58){ym(k+=ht(vh(Q),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:k+=vh(Q);break;case 9:case 10:case 13:case 32:k+=hV(O);break;case 92:k+=dV(gh()-1,7);continue;case 47:switch(Li()){case 42:case 47:Zc(gV(fV(Sr(),gh()),e,t),f);break;default:k+="/"}break;case 123*R:d[m++]=Ri(k)*$;case 125*R:case 59:case 0:switch(Q){case 0:case 125:C=0;case 59+_:$==-1&&(k=ht(k,/\f/g,"")),A>0&&Ri(k)-S&&Zc(A>32?u0(k+";",r,t,S-1):u0(ht(k," ","")+";",r,t,S-2),f);break;case 59:k+=";";default:if(Zc(re=l0(k,e,t,m,_,s,d,G,ee=[],X=[],S),a),Q===123)if(_===0)yh(k,e,re,re,ee,a,S,d,X);else switch(w===99&&vn(k,3)===110?100:w){case 100:case 108:case 109:case 115:yh(n,re,re,r&&Zc(l0(n,re,re,0,0,s,d,G,s,ee=[],S),X),s,X,S,d,r?ee:X);break;default:yh(k,re,re,re,[""],X,0,d,X)}}m=_=A=0,R=$=1,G=k="",S=u;break;case 58:S=1+Ri(k),A=O;default:if(R<1){if(Q==123)--R;else if(Q==125&&R++==0&&cV()==125)continue}switch(k+=Pd(Q),Q*R){case 38:$=_>0?1:(k+="\f",-1);break;case 44:d[m++]=(Ri(k)-1)*$,$=1;break;case 64:Li()===45&&(k+=vh(Sr())),w=Li(),_=S=Ri(G=k+=pV(gh())),Q++;break;case 45:O===45&&Ri(k)==2&&(R=0)}}return a}function l0(n,e,t,r,s,a,u,d,f,m,_){for(var S=s-1,w=s===0?a:[""],A=Mg(w),O=0,R=0,C=0;O<r;++O)for(var $=0,Q=Eu(n,S+1,S=iV(R=u[O])),G=n;$<A;++$)(G=gI(R>0?w[$]+" "+Q:ht(Q,/&\f/g,w[$])))&&(f[C++]=G);return Rd(n,e,t,s===0?Dg:d,f,m,_)}function gV(n,e,t){return Rd(n,e,t,pI,Pd(uV()),Eu(n,2,-2),0)}function u0(n,e,t,r){return Rd(n,e,t,Vg,Eu(n,0,r),Eu(n,r+1,-1),r)}function Ka(n,e){for(var t="",r=Mg(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function vV(n,e,t,r){switch(n.type){case rV:if(n.children.length)break;case nV:case Vg:return n.return=n.return||n.value;case pI:return"";case mI:return n.return=n.value+"{"+Ka(n.children,r)+"}";case Dg:n.value=n.props.join(",")}return Ri(t=Ka(n.children,r))?n.return=n.value+"{"+t+"}":""}function yV(n){var e=Mg(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function _V(n){return function(e){e.root||(e=e.return)&&n(e)}}function wV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var EV=function(e,t,r){for(var s=0,a=0;s=a,a=Li(),s===38&&a===12&&(t[r]=1),!Su(a);)Sr();return zu(e,hr)},SV=function(e,t){var r=-1,s=44;do switch(Su(s)){case 0:s===38&&Li()===12&&(t[r]=1),e[r]+=EV(hr-1,t,r);break;case 2:e[r]+=vh(s);break;case 4:if(s===44){e[++r]=Li()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Pd(s)}while(s=Sr());return e},TV=function(e,t){return _I(SV(yI(e),t))},c0=new WeakMap,IV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!c0.get(r))&&!s){c0.set(e,!0);for(var a=[],u=TV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var _=0;_<d.length;_++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[_]):d[_]+" "+u[f]}}},bV=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function wI(n,e){switch(oV(n,e)){case 5103:return ct+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ct+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ct+n+Bh+n+Pn+n+n;case 6828:case 4268:return ct+n+Pn+n+n;case 6165:return ct+n+Pn+"flex-"+n+n;case 5187:return ct+n+ht(n,/(\w+).+(:[^]+)/,ct+"box-$1$2"+Pn+"flex-$1$2")+n;case 5443:return ct+n+Pn+"flex-item-"+ht(n,/flex-|-self/,"")+n;case 4675:return ct+n+Pn+"flex-line-pack"+ht(n,/align-content|flex-|-self/,"")+n;case 5548:return ct+n+Pn+ht(n,"shrink","negative")+n;case 5292:return ct+n+Pn+ht(n,"basis","preferred-size")+n;case 6060:return ct+"box-"+ht(n,"-grow","")+ct+n+Pn+ht(n,"grow","positive")+n;case 4554:return ct+ht(n,/([^-])(transform)/g,"$1"+ct+"$2")+n;case 6187:return ht(ht(ht(n,/(zoom-|grab)/,ct+"$1"),/(image-set)/,ct+"$1"),n,"")+n;case 5495:case 3959:return ht(n,/(image-set\([^]*)/,ct+"$1$`$1");case 4968:return ht(ht(n,/(.+:)(flex-)?(.*)/,ct+"box-pack:$3"+Pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ct+n+n;case 4095:case 3583:case 4068:case 2532:return ht(n,/(.+)-inline(.+)/,ct+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ri(n)-1-e>6)switch(vn(n,e+1)){case 109:if(vn(n,e+4)!==45)break;case 102:return ht(n,/(.+:)(.+)-([^]+)/,"$1"+ct+"$2-$3$1"+Bh+(vn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~ym(n,"stretch")?wI(ht(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(vn(n,e+1)!==115)break;case 6444:switch(vn(n,Ri(n)-3-(~ym(n,"!important")&&10))){case 107:return ht(n,":",":"+ct)+n;case 101:return ht(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ct+(vn(n,14)===45?"inline-":"")+"box$3$1"+ct+"$2$3$1"+Pn+"$2box$3")+n}break;case 5936:switch(vn(n,e+11)){case 114:return ct+n+Pn+ht(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ct+n+Pn+ht(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ct+n+Pn+ht(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ct+n+Pn+n+n}return n}var CV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Vg:e.return=wI(e.value,e.length);break;case mI:return Ka([Xl(e,{value:ht(e.value,"@","@"+ct)})],s);case Dg:if(e.length)return lV(e.props,function(a){switch(aV(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ka([Xl(e,{props:[ht(a,/:(read-\w+)/,":"+Bh+"$1")]})],s);case"::placeholder":return Ka([Xl(e,{props:[ht(a,/:(plac\w+)/,":"+ct+"input-$1")]}),Xl(e,{props:[ht(a,/:(plac\w+)/,":"+Bh+"$1")]}),Xl(e,{props:[ht(a,/:(plac\w+)/,Pn+"input-$1")]})],s)}return""})}},PV=[CV],AV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(R){var C=R.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var s=e.stylisPlugins||PV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(R){for(var C=R.getAttribute("data-emotion").split(" "),$=1;$<C.length;$++)a[C[$]]=!0;d.push(R)});var f,m=[IV,bV];{var _,S=[vV,_V(function(R){_.insert(R)})],w=yV(m.concat(s,S)),A=function(C){return Ka(mV(C),w)};f=function(C,$,Q,G){_=Q,A(C?C+"{"+$.styles+"}":$.styles),G&&(O.inserted[$.name]=!0)}}var O={key:t,sheet:new tV({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return O.sheet.hydrate(d),O},Ip={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function RV(){if(h0)return dt;h0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,S=n?Symbol.for("react.suspense"):60113,w=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,O=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,C=n?Symbol.for("react.fundamental"):60117,$=n?Symbol.for("react.responder"):60118,Q=n?Symbol.for("react.scope"):60119;function G(X){if(typeof X=="object"&&X!==null){var re=X.$$typeof;switch(re){case e:switch(X=X.type,X){case f:case m:case r:case a:case s:case S:return X;default:switch(X=X&&X.$$typeof,X){case d:case _:case O:case A:case u:return X;default:return re}}case t:return re}}}function ee(X){return G(X)===m}return dt.AsyncMode=f,dt.ConcurrentMode=m,dt.ContextConsumer=d,dt.ContextProvider=u,dt.Element=e,dt.ForwardRef=_,dt.Fragment=r,dt.Lazy=O,dt.Memo=A,dt.Portal=t,dt.Profiler=a,dt.StrictMode=s,dt.Suspense=S,dt.isAsyncMode=function(X){return ee(X)||G(X)===f},dt.isConcurrentMode=ee,dt.isContextConsumer=function(X){return G(X)===d},dt.isContextProvider=function(X){return G(X)===u},dt.isElement=function(X){return typeof X=="object"&&X!==null&&X.$$typeof===e},dt.isForwardRef=function(X){return G(X)===_},dt.isFragment=function(X){return G(X)===r},dt.isLazy=function(X){return G(X)===O},dt.isMemo=function(X){return G(X)===A},dt.isPortal=function(X){return G(X)===t},dt.isProfiler=function(X){return G(X)===a},dt.isStrictMode=function(X){return G(X)===s},dt.isSuspense=function(X){return G(X)===S},dt.isValidElementType=function(X){return typeof X=="string"||typeof X=="function"||X===r||X===m||X===a||X===s||X===S||X===w||typeof X=="object"&&X!==null&&(X.$$typeof===O||X.$$typeof===A||X.$$typeof===u||X.$$typeof===d||X.$$typeof===_||X.$$typeof===C||X.$$typeof===$||X.$$typeof===Q||X.$$typeof===R)},dt.typeOf=G,dt}var d0;function kV(){return d0||(d0=1,Ip.exports=RV()),Ip.exports}var bp,f0;function xV(){if(f0)return bp;f0=1;var n=kV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(O){return n.isMemo(O)?s:a[O.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf,w=Object.prototype;function A(O,R,C){if(typeof R!="string"){if(w){var $=S(R);$&&$!==w&&A(O,$,C)}var Q=f(R);m&&(Q=Q.concat(m(R)));for(var G=u(O),ee=u(R),X=0;X<Q.length;++X){var re=Q[X];if(!t[re]&&!(C&&C[re])&&!(ee&&ee[re])&&!(G&&G[re])){var k=_(R,re);try{d(O,re,k)}catch{}}}}return O}return bp=A,bp}xV();var NV=!0;function OV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var EI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||NV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},DV=function(e,t,r){EI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function VV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var MV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},LV=/[A-Z]|^ms/g,jV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,SI=function(e){return e.charCodeAt(1)===45},p0=function(e){return e!=null&&typeof e!="boolean"},Cp=wV(function(n){return SI(n)?n:n.replace(LV,"-$&").toLowerCase()}),m0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(jV,function(r,s,a){return ki={name:s,styles:a,next:ki},s})}return MV[e]!==1&&!SI(e)&&typeof t=="number"&&t!==0?t+"px":t};function Tu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return ki={name:s.name,styles:s.styles,next:ki},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)ki={name:u.name,styles:u.styles,next:ki},u=u.next;var d=a.styles+";";return d}return FV(n,e,t)}case"function":{if(n!==void 0){var f=ki,m=t(n);return ki=f,Tu(n,e,m)}break}}var _=t;return _}function FV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=Tu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;p0(d)&&(r+=Cp(a)+":"+m0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)p0(u[f])&&(r+=Cp(a)+":"+m0(a,u[f])+";");else{var m=Tu(n,e,u);switch(a){case"animation":case"animationName":{r+=Cp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var g0=/label:\s*([^\s;{]+)\s*(;|$)/g,ki;function TI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";ki=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=Tu(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=Tu(t,e,n[d]),r){var f=a;s+=f[d]}g0.lastIndex=0;for(var m="",_;(_=g0.exec(s))!==null;)m+="-"+_[1];var S=VV(s)+m;return{name:S,styles:s,next:ki}}var UV=function(e){return e()},zV=Vp.useInsertionEffect?Vp.useInsertionEffect:!1,$V=zV||UV,II=V.createContext(typeof HTMLElement<"u"?AV({key:"css"}):null);II.Provider;var BV=function(e){return V.forwardRef(function(t,r){var s=V.useContext(II);return e(t,s,r)})},WV=V.createContext({}),Lg={}.hasOwnProperty,wm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",HV=function(e,t){var r={};for(var s in t)Lg.call(t,s)&&(r[s]=t[s]);return r[wm]=e,r},qV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return EI(t,r,s),$V(function(){return DV(t,r,s)}),null},KV=BV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[wm],a=[r],u="";typeof n.className=="string"?u=OV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=TI(a,void 0,V.useContext(WV));u+=e.key+"-"+d.name;var f={};for(var m in n)Lg.call(n,m)&&m!=="css"&&m!==wm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),V.createElement(V.Fragment,null,V.createElement(qV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),V.createElement(s,f))}),GV=KV,be=function(e,t){var r=arguments;if(t==null||!Lg.call(t,"css"))return V.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=GV,a[1]=HV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return V.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(be||(be={}));function jg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return TI(e)}function QV(){var n=jg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function XV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const YV=Math.min,JV=Math.max,Wh=Math.round,eh=Math.floor,Hh=n=>({x:n,y:n});function ZV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function kd(){return typeof window<"u"}function bI(n){return PI(n)?(n.nodeName||"").toLowerCase():"#document"}function ys(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function CI(n){var e;return(e=(PI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function PI(n){return kd()?n instanceof Node||n instanceof ys(n).Node:!1}function eM(n){return kd()?n instanceof Element||n instanceof ys(n).Element:!1}function Fg(n){return kd()?n instanceof HTMLElement||n instanceof ys(n).HTMLElement:!1}function v0(n){return!kd()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ys(n).ShadowRoot}const tM=new Set(["inline","contents"]);function AI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Ug(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!tM.has(s)}function nM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rM=new Set(["html","body","#document"]);function iM(n){return rM.has(bI(n))}function Ug(n){return ys(n).getComputedStyle(n)}function sM(n){if(bI(n)==="html")return n;const e=n.assignedSlot||n.parentNode||v0(n)&&n.host||CI(n);return v0(e)?e.host:e}function RI(n){const e=sM(n);return iM(e)?n.ownerDocument?n.ownerDocument.body:n.body:Fg(e)&&AI(e)?e:RI(e)}function qh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=RI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=ys(s);if(a){const d=Em(u);return e.concat(u,u.visualViewport||[],AI(s)?s:[],d&&t?qh(d):[])}return e.concat(s,qh(s,[],t))}function Em(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function oM(n){const e=Ug(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fg(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Wh(t)!==a||Wh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function zg(n){return eM(n)?n:n.contextElement}function y0(n){const e=zg(n);if(!Fg(e))return Hh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=oM(e);let u=(a?Wh(t.width):t.width)/r,d=(a?Wh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const aM=Hh(0);function lM(n){const e=ys(n);return!nM()||!e.visualViewport?aM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uM(n,e,t){return!1}function _0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=zg(n);let u=Hh(1);e&&(u=y0(n));const d=uM()?lM(a):Hh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,_=s.width/u.x,S=s.height/u.y;if(a){const w=ys(a),A=r;let O=w,R=Em(O);for(;R&&r&&A!==O;){const C=y0(R),$=R.getBoundingClientRect(),Q=Ug(R),G=$.left+(R.clientLeft+parseFloat(Q.paddingLeft))*C.x,ee=$.top+(R.clientTop+parseFloat(Q.paddingTop))*C.y;f*=C.x,m*=C.y,_*=C.x,S*=C.y,f+=G,m+=ee,O=ys(R),R=Em(O)}}return ZV({width:_,height:S,x:f,y:m})}function kI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function cM(n,e){let t=null,r;const s=CI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:_,top:S,width:w,height:A}=m;if(d||e(),!w||!A)return;const O=eh(S),R=eh(s.clientWidth-(_+w)),C=eh(s.clientHeight-(S+A)),$=eh(_),G={rootMargin:-O+"px "+-R+"px "+-C+"px "+-$+"px",threshold:JV(0,YV(1,f))||1};let ee=!0;function X(re){const k=re[0].intersectionRatio;if(k!==f){if(!ee)return u();k?u(!1,k):r=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!kI(m,n.getBoundingClientRect())&&u(),ee=!1}try{t=new IntersectionObserver(X,{...G,root:s.ownerDocument})}catch{t=new IntersectionObserver(X,G)}t.observe(n)}return u(!0),a}function hM(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=zg(n),_=s||a?[...m?qh(m):[],...qh(e)]:[];_.forEach($=>{s&&$.addEventListener("scroll",t,{passive:!0}),a&&$.addEventListener("resize",t)});const S=m&&d?cM(m,t):null;let w=-1,A=null;u&&(A=new ResizeObserver($=>{let[Q]=$;Q&&Q.target===m&&A&&(A.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var G;(G=A)==null||G.observe(e)})),t()}),m&&!f&&A.observe(m),A.observe(e));let O,R=f?_0(n):null;f&&C();function C(){const $=_0(n);R&&!kI(R,$)&&t(),R=$,O=requestAnimationFrame(C)}return t(),()=>{var $;_.forEach(Q=>{s&&Q.removeEventListener("scroll",t),a&&Q.removeEventListener("resize",t)}),S==null||S(),($=A)==null||$.disconnect(),A=null,f&&cancelAnimationFrame(O)}}var Sm=V.useLayoutEffect,dM=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Kh=function(){};function fM(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function pM(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(fM(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var w0=function(e){return TM(e)?e.filter(Boolean):qo(e)==="object"&&e!==null?[e]:[]},xI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=ws(e,dM);return ke({},t)},Ft=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function xd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function mM(n){return xd(n)?window.innerHeight:n.clientHeight}function NI(n){return xd(n)?window.pageYOffset:n.scrollTop}function Gh(n,e){if(xd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function gM(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function vM(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function th(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Kh,s=NI(n),a=e-s,u=10,d=0;function f(){d+=u;var m=vM(d,s,a,t);Gh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function E0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Gh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Gh(n,Math.max(e.offsetTop-s,0))}function yM(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function S0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function _M(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var OI=!1,wM={get passive(){return OI=!0}},nh=typeof window<"u"?window:{};nh.addEventListener&&nh.removeEventListener&&(nh.addEventListener("p",Kh,wM),nh.removeEventListener("p",Kh,!1));var EM=OI;function SM(n){return n!=null}function TM(n){return Array.isArray(n)}function rh(n,e,t){return n?e:t}var IM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=hs(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=hs(d,2),m=f[0],_=f[1];return u[m]=_,u},{})},bM=["children","innerProps"],CM=["children","innerProps"];function PM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=gM(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var _=f.getBoundingClientRect(),S=_.height,w=t.getBoundingClientRect(),A=w.bottom,O=w.height,R=w.top,C=t.offsetParent.getBoundingClientRect(),$=C.top,Q=u?window.innerHeight:mM(f),G=NI(f),ee=parseInt(getComputedStyle(t).marginBottom,10),X=parseInt(getComputedStyle(t).marginTop,10),re=$-X,k=Q-R,P=re+G,N=S-G-R,j=A-Q+G+ee,M=G+R-X,L=160;switch(s){case"auto":case"bottom":if(k>=O)return{placement:"bottom",maxHeight:e};if(N>=O&&!u)return a&&th(f,j,L),{placement:"bottom",maxHeight:e};if(!u&&N>=r||u&&k>=r){a&&th(f,j,L);var x=u?k-ee:N-ee;return{placement:"bottom",maxHeight:x}}if(s==="auto"||u){var Fe=e,Oe=u?re:P;return Oe>=r&&(Fe=Math.min(Oe-ee-d,e)),{placement:"top",maxHeight:Fe}}if(s==="bottom")return a&&Gh(f,j),{placement:"bottom",maxHeight:e};break;case"top":if(re>=O)return{placement:"top",maxHeight:e};if(P>=O&&!u)return a&&th(f,M,L),{placement:"top",maxHeight:e};if(!u&&P>=r||u&&re>=r){var Be=e;return(!u&&P>=r||u&&re>=r)&&(Be=u?re-X:P-X),a&&th(f,M,L),{placement:"top",maxHeight:Be}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function AM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var DI=function(e){return e==="auto"?"bottom":e},RM=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return ke((r={label:"menu"},ru(r,AM(s),"100%"),ru(r,"position","absolute"),ru(r,"width","100%"),ru(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},VI=V.createContext(null),kM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=V.useContext(VI)||{},_=m.setPortalPlacement,S=V.useRef(null),w=V.useState(s),A=hs(w,2),O=A[0],R=A[1],C=V.useState(null),$=hs(C,2),Q=$[0],G=$[1],ee=f.spacing.controlHeight;return Sm(function(){var X=S.current;if(X){var re=u==="fixed",k=d&&!re,P=PM({maxHeight:s,menuEl:X,minHeight:r,placement:a,shouldScroll:k,isFixedPosition:re,controlHeight:ee});R(P.maxHeight),G(P.placement),_==null||_(P.placement)}},[s,a,u,d,r,_,ee]),t({ref:S,placerProps:ke(ke({},e),{},{placement:Q||DI(a),maxHeight:O})})},xM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return be("div",xe({},Ft(e,"menu",{menu:!0}),{ref:r},s),t)},NM=xM,OM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return ke({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},DM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return be("div",xe({},Ft(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},MI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return ke({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},VM=MI,MM=MI,LM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=ws(e,bM);return be("div",xe({},Ft(ke(ke({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},jM=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=ws(e,CM);return be("div",xe({},Ft(ke(ke({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},FM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},UM=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=V.useRef(null),m=V.useRef(null),_=V.useState(DI(u)),S=hs(_,2),w=S[0],A=S[1],O=V.useMemo(function(){return{setPortalPlacement:A}},[]),R=V.useState(null),C=hs(R,2),$=C[0],Q=C[1],G=V.useCallback(function(){if(s){var k=yM(s),P=d==="fixed"?0:window.pageYOffset,N=k[w]+P;(N!==($==null?void 0:$.offset)||k.left!==($==null?void 0:$.rect.left)||k.width!==($==null?void 0:$.rect.width))&&Q({offset:N,rect:k})}},[s,d,w,$==null?void 0:$.offset,$==null?void 0:$.rect.left,$==null?void 0:$.rect.width]);Sm(function(){G()},[G]);var ee=V.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=hM(s,f.current,G,{elementResize:"ResizeObserver"in window}))},[s,G]);Sm(function(){ee()},[ee]);var X=V.useCallback(function(k){f.current=k,ee()},[ee]);if(!t&&d!=="fixed"||!$)return null;var re=be("div",xe({ref:X},Ft(ke(ke({},e),{},{offset:$.offset,position:d,rect:$.rect}),"menuPortal",{"menu-portal":!0}),a),r);return be(VI.Provider,{value:O},t?mC.createPortal(re,t):re)},zM=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},$M=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return be("div",xe({},Ft(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},BM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return ke({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},WM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return be("div",xe({},Ft(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},HM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},qM=function(e){var t=e.children,r=e.innerProps;return be("div",xe({},Ft(e,"indicatorsContainer",{indicators:!0}),r),t)},T0,KM=["size"],GM=["innerProps","isRtl","size"],QM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},LI=function(e){var t=e.size,r=ws(e,KM);return be("svg",xe({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:QM},r))},$g=function(e){return be(LI,xe({size:20},e),be("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},jI=function(e){return be(LI,xe({size:20},e),be("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},FI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return ke({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},XM=FI,YM=function(e){var t=e.children,r=e.innerProps;return be("div",xe({},Ft(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||be(jI,null))},JM=FI,ZM=function(e){var t=e.children,r=e.innerProps;return be("div",xe({},Ft(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||be($g,null))},eL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return ke({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},tL=function(e){var t=e.innerProps;return be("span",xe({},t,Ft(e,"indicatorSeparator",{"indicator-separator":!0})))},nL=QV(T0||(T0=XV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),rL=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return ke({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},Pp=function(e){var t=e.delay,r=e.offset;return be("span",{css:jg({animation:"".concat(nL," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},iL=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=ws(e,GM);return be("div",xe({},Ft(ke(ke({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),be(Pp,{delay:0,offset:r}),be(Pp,{delay:160,offset:!0}),be(Pp,{delay:320,offset:!r}))},sL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return ke({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},oL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return be("div",xe({ref:a},Ft(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},aL=oL,lL=["data"],uL=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},cL=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,_=e.theme,S=e.selectProps;return be("div",xe({},Ft(e,"group",{group:!0}),f),be(u,xe({},d,{selectProps:S,theme:_,getStyles:s,getClassNames:a,cx:r}),m),be("div",null,t))},hL=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return ke({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},dL=function(e){var t=xI(e);t.data;var r=ws(t,lL);return be("div",xe({},Ft(e,"groupHeading",{"group-heading":!0}),r))},fL=cL,pL=["innerRef","isDisabled","isHidden","inputClassName"],mL=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return ke(ke({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},gL),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},UI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},gL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ke({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},UI)},vL=function(e){return ke({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},UI)},yL=function(e){var t=e.cx,r=e.value,s=xI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=ws(s,pL);return be("div",xe({},Ft(e,"input",{"input-container":!0}),{"data-value":r||""}),be("input",xe({className:t({input:!0},f),ref:a,style:vL(d),disabled:u},m)))},_L=yL,wL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return ke({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},EL=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return ke({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},SL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return ke({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},zI=function(e){var t=e.children,r=e.innerProps;return be("div",r,t)},TL=zI,IL=zI;function bL(n){var e=n.children,t=n.innerProps;return be("div",xe({role:"button"},t),e||be($g,{size:14}))}var CL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,_=r.Label,S=r.Remove;return be(m,{data:s,innerProps:ke(ke({},Ft(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},be(_,{data:s,innerProps:ke({},Ft(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),be(S,{data:s,innerProps:ke(ke({},Ft(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},PL=CL,AL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return ke({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},RL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return be("div",xe({},Ft(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},kL=RL,xL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return ke({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},NL=function(e){var t=e.children,r=e.innerProps;return be("div",xe({},Ft(e,"placeholder",{placeholder:!0}),r),t)},OL=NL,DL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return ke({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},VL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return be("div",xe({},Ft(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},ML=VL,LL={ClearIndicator:ZM,Control:aL,DropdownIndicator:YM,DownChevron:jI,CrossIcon:$g,Group:fL,GroupHeading:dL,IndicatorsContainer:qM,IndicatorSeparator:tL,Input:_L,LoadingIndicator:iL,Menu:NM,MenuList:DM,MenuPortal:UM,LoadingMessage:jM,NoOptionsMessage:LM,MultiValue:PL,MultiValueContainer:TL,MultiValueLabel:IL,MultiValueRemove:bL,Option:kL,Placeholder:OL,SelectContainer:$M,SingleValue:ML,ValueContainer:WM},jL=function(e){return ke(ke({},LL),e.components)},I0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function FL(n,e){return!!(n===e||I0(n)&&I0(e))}function UL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!FL(n[t],e[t]))return!1;return!0}function zL(n,e){e===void 0&&(e=UL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var $L={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},BL=function(e){return be("span",xe({css:$L},e))},b0=BL,WL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,_=e.isAppleDevice,S=function(R,C){return R&&R.length?"".concat(R.indexOf(C)+1," of ").concat(R.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(S(d,r),".");if(t==="menu"&&_){var w=f?" disabled":"",A="".concat(m?" selected":"").concat(w);return"".concat(u).concat(A,", ").concat(S(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},HL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,_=e.isAppleDevice,S=f.ariaLiveMessages,w=f.getOptionLabel,A=f.inputValue,O=f.isMulti,R=f.isOptionDisabled,C=f.isSearchable,$=f.menuIsOpen,Q=f.options,G=f.screenReaderStatus,ee=f.tabSelectsValue,X=f.isLoading,re=f["aria-label"],k=f["aria-live"],P=V.useMemo(function(){return ke(ke({},WL),S||{})},[S]),N=V.useMemo(function(){var Oe="";if(t&&P.onChange){var Be=t.option,Ve=t.options,ae=t.removedValue,ye=t.removedValues,he=t.value,B=function(De){return Array.isArray(De)?null:De},U=ae||Be||B(he),fe=U?w(U):"",ge=Ve||ye||void 0,Pe=ge?ge.map(w):[],le=ke({isDisabled:U&&R(U,d),label:fe,labels:Pe},t);Oe=P.onChange(le)}return Oe},[t,P,R,d,w]),j=V.useMemo(function(){var Oe="",Be=r||s,Ve=!!(r&&d&&d.includes(r));if(Be&&P.onFocus){var ae={focused:Be,label:w(Be),isDisabled:R(Be,d),isSelected:Ve,options:a,context:Be===r?"menu":"value",selectValue:d,isAppleDevice:_};Oe=P.onFocus(ae)}return Oe},[r,s,w,R,P,a,d,_]),M=V.useMemo(function(){var Oe="";if($&&Q.length&&!X&&P.onFilter){var Be=G({count:a.length});Oe=P.onFilter({inputValue:A,resultsMessage:Be})}return Oe},[a,A,$,P,Q,G,X]),L=(t==null?void 0:t.action)==="initial-input-focus",x=V.useMemo(function(){var Oe="";if(P.guidance){var Be=s?"value":$?"menu":"input";Oe=P.guidance({"aria-label":re,context:Be,isDisabled:r&&R(r,d),isMulti:O,isSearchable:C,tabSelectsValue:ee,isInitialFocus:L})}return Oe},[re,r,s,O,R,C,$,P,d,ee,L]),Fe=be(V.Fragment,null,be("span",{id:"aria-selection"},N),be("span",{id:"aria-focused"},j),be("span",{id:"aria-results"},M),be("span",{id:"aria-guidance"},x));return be(V.Fragment,null,be(b0,{id:m},L&&Fe),be(b0,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!L&&Fe))},qL=HL,Tm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],KL=new RegExp("["+Tm.map(function(n){return n.letters}).join("")+"]","g"),$I={};for(var Ap=0;Ap<Tm.length;Ap++)for(var Rp=Tm[Ap],kp=0;kp<Rp.letters.length;kp++)$I[Rp.letters[kp]]=Rp.base;var BI=function(e){return e.replace(KL,function(t){return $I[t]})},GL=zL(BI),C0=function(e){return e.replace(/^\s+|\s+$/g,"")},QL=function(e){return"".concat(e.label," ").concat(e.value)},XL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=ke({ignoreCase:!0,ignoreAccents:!0,stringify:QL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,_=f?C0(r):r,S=f?C0(d(t)):d(t);return a&&(_=_.toLowerCase(),S=S.toLowerCase()),u&&(_=GL(_),S=BI(S)),m==="start"?S.substr(0,_.length)===_:S.indexOf(_)>-1}},YL=["innerRef"];function JL(n){var e=n.innerRef,t=ws(n,YL),r=IM(t,"onExited","in","enter","exit","appear");return be("input",xe({ref:e},r,{css:jg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ZL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function ej(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=V.useRef(!1),d=V.useRef(!1),f=V.useRef(0),m=V.useRef(null),_=V.useCallback(function(C,$){if(m.current!==null){var Q=m.current,G=Q.scrollTop,ee=Q.scrollHeight,X=Q.clientHeight,re=m.current,k=$>0,P=ee-X-G,N=!1;P>$&&u.current&&(r&&r(C),u.current=!1),k&&d.current&&(a&&a(C),d.current=!1),k&&$>P?(t&&!u.current&&t(C),re.scrollTop=ee,N=!0,u.current=!0):!k&&-$>G&&(s&&!d.current&&s(C),re.scrollTop=0,N=!0,d.current=!0),N&&ZL(C)}},[t,r,s,a]),S=V.useCallback(function(C){_(C,C.deltaY)},[_]),w=V.useCallback(function(C){f.current=C.changedTouches[0].clientY},[]),A=V.useCallback(function(C){var $=f.current-C.changedTouches[0].clientY;_(C,$)},[_]),O=V.useCallback(function(C){if(C){var $=EM?{passive:!1}:!1;C.addEventListener("wheel",S,$),C.addEventListener("touchstart",w,$),C.addEventListener("touchmove",A,$)}},[A,w,S]),R=V.useCallback(function(C){C&&(C.removeEventListener("wheel",S,!1),C.removeEventListener("touchstart",w,!1),C.removeEventListener("touchmove",A,!1))},[A,w,S]);return V.useEffect(function(){if(e){var C=m.current;return O(C),function(){R(C)}}},[e,O,R]),function(C){m.current=C}}var P0=["boxSizing","height","overflow","paddingRight","position"],A0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function R0(n){n.cancelable&&n.preventDefault()}function k0(n){n.stopPropagation()}function x0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function N0(){return"ontouchstart"in window||navigator.maxTouchPoints}var O0=!!(typeof window<"u"&&window.document&&window.document.createElement),Yl=0,Da={capture:!1,passive:!1};function tj(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=V.useRef({}),a=V.useRef(null),u=V.useCallback(function(f){if(O0){var m=document.body,_=m&&m.style;if(r&&P0.forEach(function(O){var R=_&&_[O];s.current[O]=R}),r&&Yl<1){var S=parseInt(s.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,A=window.innerWidth-w+S||0;Object.keys(A0).forEach(function(O){var R=A0[O];_&&(_[O]=R)}),_&&(_.paddingRight="".concat(A,"px"))}m&&N0()&&(m.addEventListener("touchmove",R0,Da),f&&(f.addEventListener("touchstart",x0,Da),f.addEventListener("touchmove",k0,Da))),Yl+=1}},[r]),d=V.useCallback(function(f){if(O0){var m=document.body,_=m&&m.style;Yl=Math.max(Yl-1,0),r&&Yl<1&&P0.forEach(function(S){var w=s.current[S];_&&(_[S]=w)}),m&&N0()&&(m.removeEventListener("touchmove",R0,Da),f&&(f.removeEventListener("touchstart",x0,Da),f.removeEventListener("touchmove",k0,Da)))}},[r]);return V.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var nj=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},rj={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ij(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=ej({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),_=tj({isEnabled:t}),S=function(A){m(A),_(A)};return be(V.Fragment,null,t&&be("div",{onClick:nj,css:rj}),e(S))}var sj={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},oj=function(e){var t=e.name,r=e.onFocus;return be("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:sj,value:"",onChange:function(){}})},aj=oj;function Bg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function lj(){return Bg(/^iPhone/i)}function WI(){return Bg(/^Mac/i)}function uj(){return Bg(/^iPad/i)||WI()&&navigator.maxTouchPoints>1}function cj(){return lj()||uj()}function hj(){return WI()||cj()}var dj=function(e){return e.label},fj=function(e){return e.label},pj=function(e){return e.value},mj=function(e){return!!e.isDisabled},gj={clearIndicator:JM,container:zM,control:sL,dropdownIndicator:XM,group:uL,groupHeading:hL,indicatorsContainer:HM,indicatorSeparator:eL,input:mL,loadingIndicator:rL,loadingMessage:MM,menu:RM,menuList:OM,menuPortal:FM,multiValue:wL,multiValueLabel:EL,multiValueRemove:SL,noOptionsMessage:VM,option:AL,placeholder:xL,singleValue:DL,valueContainer:BM},vj={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},yj=4,HI=4,_j=38,wj=HI*2,Ej={baseUnit:HI,controlHeight:_j,menuGutter:wj},xp={borderRadius:yj,colors:vj,spacing:Ej},Sj={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:S0(),captureMenuScroll:!S0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:XL(),formatGroupLabel:dj,getOptionLabel:fj,getOptionValue:pj,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:mj,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!_M(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function D0(n,e,t,r){var s=GI(n,e,t),a=QI(n,e,t),u=KI(n,e),d=Qh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function _h(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return D0(n,u,e,d)}).filter(function(u){return M0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=D0(n,t,e,r);return M0(n,a)?a:void 0}).filter(SM)}function qI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Og(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function V0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Og(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function Tj(n,e){return qI(_h(n,e))}function M0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!YI(n)||!a)&&XI(n,{label:u,value:d,data:s},r)}function Ij(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function bj(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Np=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},KI=function(e,t){return e.getOptionLabel(t)},Qh=function(e,t){return e.getOptionValue(t)};function GI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function QI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Qh(n,e);return t.some(function(s){return Qh(n,s)===r})}function XI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var YI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Cj=1,JI=(function(n){q2(t,n);var e=Q2(t);function t(r){var s;if(W2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var _=s.props,S=_.onChange,w=_.name;m.name=w,s.ariaOnChange(f,m),S(f,m)},s.setValue=function(f,m,_){var S=s.props,w=S.closeMenuOnSelect,A=S.isMulti,O=S.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:O}),w&&(s.setState({inputIsHiddenAfterUpdate:!A}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:_})},s.selectOption=function(f){var m=s.props,_=m.blurInputOnSelect,S=m.isMulti,w=m.name,A=s.state.selectValue,O=S&&s.isOptionSelected(f,A),R=s.isOptionDisabled(f,A);if(O){var C=s.getOptionValue(f);s.setValue(A.filter(function($){return s.getOptionValue($)!==C}),"deselect-option",f)}else if(!R)S?s.setValue([].concat(Og(A),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:w});return}_&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,_=s.state.selectValue,S=s.getOptionValue(f),w=_.filter(function(O){return s.getOptionValue(O)!==S}),A=rh(m,w,w[0]||null);s.onChange(A,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(rh(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,_=m[m.length-1],S=m.slice(0,m.length-1),w=rh(f,S,S[0]||null);_&&s.onChange(w,{action:"pop-value",removedValue:_})},s.getFocusedOptionId=function(f){return Np(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return V0(_h(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return pM.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return KI(s.props,f)},s.getOptionValue=function(f){return Qh(s.props,f)},s.getStyles=function(f,m){var _=s.props.unstyled,S=gj[f](m,_);S.boxSizing="border-box";var w=s.props.styles[f];return w?w(S,m):S},s.getClassNames=function(f,m){var _,S;return(_=(S=s.props.classNames)[f])===null||_===void 0?void 0:_.call(S,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return jL(s.props)},s.buildCategorizedOptions=function(){return _h(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return qI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:ke({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,_=m.isMulti,S=m.menuIsOpen;s.focusInput(),S?(s.setState({inputIsHiddenAfterUpdate:!_}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&xd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,_=m&&m.item(0);_&&(s.initialTouchX=_.clientX,s.initialTouchY=_.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,_=m&&m.item(0);if(_){var S=Math.abs(_.clientX-s.initialTouchX),w=Math.abs(_.clientY-s.initialTouchY),A=5;s.userIsDragging=S>A||w>A}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,_=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(_,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),_=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:_>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return YI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,_=m.isMulti,S=m.backspaceRemovesValue,w=m.escapeClearsValue,A=m.inputValue,O=m.isClearable,R=m.isDisabled,C=m.menuIsOpen,$=m.onKeyDown,Q=m.tabSelectsValue,G=m.openMenuOnFocus,ee=s.state,X=ee.focusedOption,re=ee.focusedValue,k=ee.selectValue;if(!R&&!(typeof $=="function"&&($(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!_||A)return;s.focusValue("previous");break;case"ArrowRight":if(!_||A)return;s.focusValue("next");break;case"Delete":case"Backspace":if(A)return;if(re)s.removeValue(re);else{if(!S)return;_?s.popValue():O&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!C||!Q||!X||G&&s.isOptionSelected(X,k))return;s.selectOption(X);break;case"Enter":if(f.keyCode===229)break;if(C){if(!X||s.isComposing)return;s.selectOption(X);break}return;case"Escape":C?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:A}),s.onMenuClose()):O&&w&&s.clearValue();break;case" ":if(A)return;if(!C){s.openMenu("first");break}if(!X)return;s.selectOption(X);break;case"ArrowUp":C?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":C?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!C)return;s.focusOption("pageup");break;case"PageDown":if(!C)return;s.focusOption("pagedown");break;case"Home":if(!C)return;s.focusOption("first");break;case"End":if(!C)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++Cj),s.state.selectValue=w0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=Np(a,u[d])}return s}return H2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&E0(this.menuListRef,this.focusedOptionRef),hj()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(E0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),_=s==="first"?0:m.length-1;if(!this.props.isMulti){var S=m.indexOf(d[0]);S>-1&&(_=S)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[_],focusedOptionId:this.getFocusedOptionId(m[_])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,_=-1;if(u.length){switch(s){case"previous":f===0?_=0:f===-1?_=m:_=f-1;break;case"next":f>-1&&f<m&&(_=f+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:u[_]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xp):ke(ke({},xp),this.props.theme):xp})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,_=this.setValue,S=this.props,w=S.isMulti,A=S.isRtl,O=S.options,R=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:R,isMulti:w,isRtl:A,options:O,selectOption:m,selectProps:S,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return GI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return QI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return XI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,_=s.form,S=s.menuIsOpen,w=s.required,A=this.getComponents(),O=A.Input,R=this.state,C=R.inputIsHidden,$=R.ariaSelection,Q=this.commonProps,G=d||this.getElementId("input"),ee=ke(ke(ke({"aria-autocomplete":"list","aria-expanded":S,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},S&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?($==null?void 0:$.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?V.createElement(O,xe({},Q,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:G,innerRef:this.getInputRef,isDisabled:a,isHidden:C,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:_,type:"text",value:f},ee)):V.createElement(JL,xe({id:G,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Kh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:_,value:""},ee))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,_=a.SingleValue,S=a.Placeholder,w=this.commonProps,A=this.props,O=A.controlShouldRenderValue,R=A.isDisabled,C=A.isMulti,$=A.inputValue,Q=A.placeholder,G=this.state,ee=G.selectValue,X=G.focusedValue,re=G.isFocused;if(!this.hasValue()||!O)return $?null:V.createElement(S,xe({},w,{key:"placeholder",isDisabled:R,isFocused:re,innerProps:{id:this.getElementId("placeholder")}}),Q);if(C)return ee.map(function(P,N){var j=P===X,M="".concat(s.getOptionLabel(P),"-").concat(s.getOptionValue(P));return V.createElement(u,xe({},w,{components:{Container:d,Label:f,Remove:m},isFocused:j,isDisabled:R,key:M,index:N,removeProps:{onClick:function(){return s.removeValue(P)},onTouchEnd:function(){return s.removeValue(P)},onMouseDown:function(x){x.preventDefault()}},data:P}),s.formatOptionLabel(P,"value"))});if($)return null;var k=ee[0];return V.createElement(_,xe({},w,{data:k,isDisabled:R}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:S,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!a||!m)return null;var S={"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:S,isDisabled:f,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return V.createElement(u,xe({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,_=a.MenuPortal,S=a.LoadingMessage,w=a.NoOptionsMessage,A=a.Option,O=this.commonProps,R=this.state.focusedOption,C=this.props,$=C.captureMenuScroll,Q=C.inputValue,G=C.isLoading,ee=C.loadingMessage,X=C.minMenuHeight,re=C.maxMenuHeight,k=C.menuIsOpen,P=C.menuPlacement,N=C.menuPosition,j=C.menuPortalTarget,M=C.menuShouldBlockScroll,L=C.menuShouldScrollIntoView,x=C.noOptionsMessage,Fe=C.onMenuScrollToTop,Oe=C.onMenuScrollToBottom;if(!k)return null;var Be=function(fe,ge){var Pe=fe.type,le=fe.data,Me=fe.isDisabled,De=fe.isSelected,Ge=fe.label,Tt=fe.value,ie=R===le,qe=Me?void 0:function(){return s.onOptionHover(le)},st=Me?void 0:function(){return s.selectOption(le)},rt="".concat(s.getElementId("option"),"-").concat(ge),at={id:rt,onClick:st,onMouseMove:qe,onMouseOver:qe,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:De};return V.createElement(A,xe({},O,{innerProps:at,data:le,isDisabled:Me,isSelected:De,key:rt,label:Ge,type:Pe,value:Tt,isFocused:ie,innerRef:ie?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(fe.data,"menu"))},Ve;if(this.hasOptions())Ve=this.getCategorizedOptions().map(function(U){if(U.type==="group"){var fe=U.data,ge=U.options,Pe=U.index,le="".concat(s.getElementId("group"),"-").concat(Pe),Me="".concat(le,"-heading");return V.createElement(u,xe({},O,{key:le,data:fe,options:ge,Heading:d,headingProps:{id:Me,data:U.data},label:s.formatGroupLabel(U.data)}),U.options.map(function(De){return Be(De,"".concat(Pe,"-").concat(De.index))}))}else if(U.type==="option")return Be(U,"".concat(U.index))});else if(G){var ae=ee({inputValue:Q});if(ae===null)return null;Ve=V.createElement(S,O,ae)}else{var ye=x({inputValue:Q});if(ye===null)return null;Ve=V.createElement(w,O,ye)}var he={minMenuHeight:X,maxMenuHeight:re,menuPlacement:P,menuPosition:N,menuShouldScrollIntoView:L},B=V.createElement(kM,xe({},O,he),function(U){var fe=U.ref,ge=U.placerProps,Pe=ge.placement,le=ge.maxHeight;return V.createElement(f,xe({},O,he,{innerRef:fe,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:G,placement:Pe}),V.createElement(ij,{captureEnabled:$,onTopArrive:Fe,onBottomArrive:Oe,lockEnabled:M},function(Me){return V.createElement(m,xe({},O,{innerRef:function(Ge){s.getMenuListRef(Ge),Me(Ge)},innerProps:{role:"listbox","aria-multiselectable":O.isMulti,id:s.getElementId("listbox")},isLoading:G,maxHeight:le,focusedOption:R}),Ve)}))});return j||N==="fixed"?V.createElement(_,xe({},O,{appendTo:j,controlElement:this.controlRef,menuPlacement:P,menuPosition:N}),B):B}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,_=a.required,S=this.state.selectValue;if(_&&!this.hasValue()&&!d)return V.createElement(aj,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var w=S.map(function(R){return s.getOptionValue(R)}).join(u);return V.createElement("input",{name:m,type:"hidden",value:w})}else{var A=S.length>0?S.map(function(R,C){return V.createElement("input",{key:"i-".concat(C),name:m,type:"hidden",value:s.getOptionValue(R)})}):V.createElement("input",{name:m,type:"hidden",value:""});return V.createElement("div",null,A)}else{var O=S[0]?this.getOptionValue(S[0]):"";return V.createElement("input",{name:m,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,_=a.selectValue,S=this.getFocusableOptions();return V.createElement(qL,xe({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:_,focusableOptions:S,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,_=m.className,S=m.id,w=m.isDisabled,A=m.menuIsOpen,O=this.state.isFocused,R=this.commonProps=this.getCommonProps();return V.createElement(d,xe({},R,{className:_,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:O}),this.renderLiveRegion(),V.createElement(a,xe({},R,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:O,menuIsOpen:A}),V.createElement(f,xe({},R,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),V.createElement(u,xe({},R,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,_=a.isFocused,S=a.prevWasFocused,w=a.instancePrefix,A=s.options,O=s.value,R=s.menuIsOpen,C=s.inputValue,$=s.isMulti,Q=w0(O),G={};if(u&&(O!==u.value||A!==u.options||R!==u.menuIsOpen||C!==u.inputValue)){var ee=R?Tj(s,Q):[],X=R?V0(_h(s,Q),"".concat(w,"-option")):[],re=d?Ij(a,Q):null,k=bj(a,ee),P=Np(X,k);G={selectValue:Q,focusedOption:k,focusedOptionId:P,focusableOptionsWithIds:X,focusedValue:re,clearFocusValueOnUpdate:!1}}var N=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},j=m,M=_&&S;return _&&!M&&(j={value:rh($,Q,Q[0]||null),options:Q,action:"initial-input-focus"},M=!S),(m==null?void 0:m.action)==="initial-input-focus"&&(j=null),ke(ke(ke({},G),N),{},{prevProps:s,ariaSelection:j,prevWasFocused:M})}}]),t})(V.Component);JI.defaultProps=Sj;var Pj=V.forwardRef(function(n,e){var t=B2(n);return V.createElement(JI,xe({ref:e},t))}),L0=Pj;const Jl=["Anagrafica","Stato fisico","Obiettivi"];function Se(n){return typeof n=="string"?n:n==null?"":String(n)}function ih(n){const e=Se(n.id).trim(),t=Se(n.uid).trim();return e||t}function Ua(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number(Se(t.weight).replace(/[^\d.-]/g,"")),s=Se(t.advancedMethod).trim(),a=s==="rest_pause"||s==="drop_set"?s:"",u=Se(t.advancedMethodNotes),d=Se(t.restPauseNotes),f=Se(t.dropSetNotes);return{name:Se(t.name),notes:Se(t.notes),advancedMethod:a,advancedMethodNotes:u,restPauseNotes:d||(a==="rest_pause"?u:""),dropSetNotes:f||(a==="drop_set"?u:""),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,workValue:Number(t.workValue??t.reps??10)||10,weightKg:Number(t.weightKg??r??0)||0,restSeconds:Number(t.restSeconds??60)||60,mediaUrl:Se(t.mediaUrl)}}).filter(e=>!!e):[]}function kt(n){return Se(n).trim()||"Non compilato"}function Aj(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function Rj(n,e){const t=Aj(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function j0(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function sh(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function Bs(){return{name:"",notes:"",advancedMethod:"",advancedMethodNotes:"",restPauseNotes:"",dropSetNotes:"",sets:3,reps:10,workValue:10,weightKg:0,restSeconds:60,mediaUrl:""}}function kj(n){return n.name.trim().length>0||n.notes.trim().length>0||n.advancedMethod.trim().length>0||n.advancedMethodNotes.trim().length>0||n.restPauseNotes.trim().length>0||n.dropSetNotes.trim().length>0||n.mediaUrl.trim().length>0||n.sets!==3||n.reps!==10||n.workValue!==10||n.weightKg>0||n.restSeconds!==60}function ZI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function F0(n,e){const t=ZI(e);return n?{...t,fullName:Se(n.fullName).trim()||t.fullName,age:Se(n.age).trim(),sex:Se(n.sex).trim(),email:Se(n.email).trim()||t.email,phone:Se(n.phone).trim(),discoverySource:Se(n.discoverySource).trim(),heightCm:Se(n.heightCm).trim(),weightKg:Se(n.weightKg).trim(),pastProgram:Se(n.pastProgram).trim(),trainingFrequency:Se(n.trainingFrequency).trim(),workoutDuration:Se(n.workoutDuration).trim(),workoutLocation:Se(n.workoutLocation).trim(),equipment:Se(n.equipment).trim(),trainingTypeHistory:Se(n.trainingTypeHistory).trim(),hasInjuries:Se(n.hasInjuries).trim(),injuryDetails:Se(n.injuryDetails).trim(),objectivePrimary:Se(n.objectivePrimary).trim(),objectiveReason:Se(n.objectiveReason).trim(),expectedTimeline:Se(n.expectedTimeline).trim(),supportPreference:Se(n.supportPreference).trim(),supportPreferenceOther:Se(n.supportPreferenceOther).trim(),investmentRange:Se(n.investmentRange).trim(),whatBlockedSoFar:Se(n.whatBlockedSoFar).trim(),oneThingToImprove:Se(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:Se(n.riskIfNoChange).trim(),readiness:Se(n.readiness).trim(),notes:Se(n.notes).trim()}:t}function xj(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function Va(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function Op(n){if(!n)return null;if(typeof n=="string"){const e=new Date(n);return Number.isNaN(e.getTime())?null:e.toISOString()}if(n instanceof Date)return Number.isNaN(n.getTime())?null:n.toISOString();if(typeof n=="object"&&n&&"toDate"in n&&typeof n.toDate=="function"){const e=n.toDate();return Number.isNaN(e.getTime())?null:e.toISOString()}return null}function U0(n){return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function z0(n){switch(n){case"trial_pending":return"Prova da attivare";case"trial_active":return"Prova attiva";case"active_paid":return"Abbonamento attivo";case"expired":return"Scaduto";case"disabled":return"Disattivato";case"supervisor_active":return"Supervisor attivo";default:return"Non disponibile"}}function iu(n){if(!n)return null;const e=new Date(n).getTime();return Number.isNaN(e)?null:e}function Dp(n){return n.status==="trial_active"?n.trialEndsAt??n.expiresAt??n.subscriptionEndsAt??null:n.status==="active_paid"?n.subscriptionEndsAt??n.expiresAt??n.trialEndsAt??null:n.expiresAt??n.trialEndsAt??n.subscriptionEndsAt??null}function Nj(n,e){if(n==="expired")return{label:"Scaduto",tone:"danger"};const t=iu(e);if(!t)return null;const r=Date.now();if(t<=r)return{label:"Scaduto",tone:"danger"};const s=10080*60*1e3;return t-r<=s?{label:"In scadenza",tone:"warning"}:null}function Oj(n){const e={},t=n.clientWeightOverrides;if(t&&typeof t=="object"){for(const[r,s]of Object.entries(t))if(!(!s||typeof s!="object"))for(const[a,u]of Object.entries(s)){const d=Number(u);!Number.isFinite(d)||d<0||(e[r]=e[r]??{},e[r][a]=d)}}for(const[r,s]of Object.entries(n)){if(!r.startsWith("clientWeightOverrides."))continue;const[,a,u]=r.split(".");if(!a||u==null)continue;const d=Number(s);!Number.isFinite(d)||d<0||(e[a]=e[a]??{},e[a][u]=d)}return e}function eb(n,e){const t=Oj(n);if(Object.keys(t).length===0)return[];const r=Ua(n.exercises),s=[];for(const[a,u]of Object.entries(t)){if(!u||typeof u!="object")continue;const d=[];for(const[f,m]of Object.entries(u)){const _=Number(f);if(!Number.isInteger(_)||_<0||_>=r.length)continue;const S=Number(m);if(!Number.isFinite(S))continue;const w=r[_],A=Number(w.weightKg||0);if(S===A)continue;const O=w.name.trim()||`Esercizio ${_+1}`;d.push(`${O}: ${A} kg -> ${S} kg`)}d.length!==0&&s.push({clientId:a,clientLabel:e[a]||a,lines:d})}return s}function Dj(n,e){return eb(n,e).reduce((t,r)=>t+r.lines.length,0)}function Vj(){const{role:n,user:e,isSupervisor:t}=ml(),r=Cu(),{showError:s,showSuccess:a}=Yh(),[u,d]=V.useState([]),[f,m]=V.useState([]),[_,S]=V.useState(!1),[w,A]=V.useState(null),[O,R]=V.useState(!1),[C,$]=V.useState(!1),[Q,G]=V.useState(!1),[ee,X]=V.useState({}),[re,k]=V.useState(!1),[P,N]=V.useState(!1),[j,M]=V.useState(!1),[L,x]=V.useState(""),[Fe,Oe]=V.useState(""),[Be,Ve]=V.useState(!1),[ae,ye]=V.useState(!1),[he,B]=V.useState(0),[U,fe]=V.useState(ZI()),[ge,Pe]=V.useState(null),[le,Me]=V.useState(null),[De,Ge]=V.useState(!1),[Tt,ie]=V.useState([]),[qe,st]=V.useState(""),[rt,at]=V.useState(""),[xt,wt]=V.useState(""),[lt,sn]=V.useState("clients"),[pt,Lt]=V.useState(""),[et,ut]=V.useState(""),[zr,$r]=V.useState(!1),[mt,It]=V.useState("series_reps"),[Ir,Br]=V.useState(""),[dr,Wn]=V.useState(""),[br,Cr]=V.useState(""),[Ui,Hn]=V.useState([Bs()]),[Wr,zi]=V.useState([]),[$i,Hr]=V.useState(!1),[Pr,Dn]=V.useState(""),[wn,pi]=V.useState("permanent"),[qn,Es]=V.useState("4"),[qr,Ss]=V.useState(U0(new Date)),Ar=ge!==null,on=u.find(I=>ih(I)===pt)??null,Ye=[...f].sort((I,q)=>{const Z=iu(Se(I.createdAt))??0;return(iu(Se(q.createdAt))??0)-Z}),We=Ye.find(I=>I.id===et)??null,En=O?We:null,Nt=C?We:null,mi=Rj(Se(w==null?void 0:w.phone),Se(w==null?void 0:w.fullName)),Kn=u.reduce((I,q)=>{const Z=Se(q.displayName).trim()||Se(q.email).trim()||q.id;return I[ih(q)]=Z,I[q.id]=Z,I},{}),Gn=Nt?eb(Nt,Kn):[],Kr=u.map(I=>({value:ih(I),label:Se(I.displayName).trim()||Se(I.email)||I.id})),Zo=We?Kr.filter(I=>!(We.assignedClientIds??[]).includes(I.value)):Kr,Ts=Kr.filter(I=>Wr.includes(I.value)),ea=Kr.find(I=>I.value===pt)??null,Qn=Math.round((he+1)/Jl.length*100),Bi=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],Xn=Tt.filter(I=>I.uid!==(e==null?void 0:e.uid)).filter(I=>!I.isSupervisor).filter(I=>{const q=qe.trim().toLowerCase();return q?I.displayName.toLowerCase().includes(q)||I.email.toLowerCase().includes(q):!0}).sort((I,q)=>{const Z=iu(Dp(I))??Number.MAX_SAFE_INTEGER,Ee=iu(Dp(q))??Number.MAX_SAFE_INTEGER;return Z-Ee});V.useEffect(()=>{!t&&lt==="supervisor"&&sn("clients")},[t,lt]);const fo=V.useMemo(()=>({control:(I,q)=>({...I,minHeight:48,borderRadius:12,borderColor:q.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:q.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:I=>({...I,borderRadius:12,overflow:"hidden",zIndex:50}),option:(I,q)=>({...I,backgroundColor:q.isSelected?"#ff6a00":q.isFocused?"rgba(255,106,0,0.10)":"#fff",color:q.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);V.useEffect(()=>{async function I(){if(!pt){A(null);return}try{const q=await sI(pt,"onboarding");A(q.data()??null)}catch{A(null)}}I()},[pt]),V.useEffect(()=>{var I;!et&&Ye.length>0&&!zr&&ut(Ye[0].id),et&&!Ye.some(q=>q.id===et)&&ut(((I=Ye[0])==null?void 0:I.id)??"")},[et,zr,Ye.map(I=>I.id).join("|")]),V.useEffect(()=>{We||$(!1)},[We==null?void 0:We.id]),V.useEffect(()=>{C||X({})},[C,We==null?void 0:We.id]);async function Wi(){if(n){S(!0);try{const Z=(await m2(e==null?void 0:e.uid)).docs.map(Ee=>({id:Ee.id,...Ee.data()})).sort((Ee,Ue)=>{const jn=Se(Ee.displayName||Ee.email||Ee.id).toLowerCase(),$t=Se(Ue.displayName||Ue.email||Ue.id).toLowerCase();return jn.localeCompare($t)});d(Z),!pt&&Z[0]&&Lt(ih(Z[0]));try{const Ee=await oI(n);m(Ee.docs.map(Ue=>({id:Ue.id,...Ue.data()})))}catch(Ee){m([]),s(Vt(Ee))}}catch(I){console.error("Coach action failed:",I),s(Vt(I))}finally{S(!1)}}}V.useEffect(()=>{Wi()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{!le||le.isSupervisor||le.isExpired&&Er().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[le==null?void 0:le.status,le==null?void 0:le.isExpired,le==null?void 0:le.isSupervisor]),V.useEffect(()=>{async function I(){if(!(!n||n==="client")){Ge(!0);try{const q=await Yw();Me(q)}catch(q){s(Vt(q))}finally{Ge(!1)}}}I()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{async function I(){if(e!=null&&e.uid)try{const Z=(await qa(e.uid)).data(),Ee=Se(Z==null?void 0:Z.phone).trim();x(Ee),Oe(Ee)}catch{x(""),Oe("")}}I()},[e==null?void 0:e.uid]);async function Hi(){if(t)try{const I=await o2();ie(I.coaches??[])}catch(I){s(Vt(I))}}V.useEffect(()=>{Hi()},[t,e==null?void 0:e.uid]);async function Vn(I,q){S(!0);try{const Z=await I();return a(q),await Wi(),Z}catch(Z){s(Vt(Z))}finally{S(!1)}}function po(){Hn(I=>[...I,Bs()])}function ta(I){Hn(q=>q.length<=1?q:q.filter((Z,Ee)=>Ee!==I))}function vl(I){He(I,Bs())}function He(I,q){Hn(Z=>Z.map((Ee,Ue)=>Ue===I?{...Ee,...q}:Ee))}function gt(I,q){fe(Z=>({...Z,[I]:q}))}function qi(){if(!We){It("series_reps"),Br(""),Wn(""),Cr(""),Hn([Bs()]);return}It(We.kind==="circuit"?"circuit":"series_reps"),Br(We.title??""),Wn(Se(We.warmup)),Cr(Se(We.notes));const I=Ua(We.exercises).filter(q=>q.name.trim().length>0);Hn(I.length>0?I:[Bs()])}function Gr(I){if(I===mt)return;if(Ui.some(Z=>kj(Z))||br.trim().length>0||dr.trim().length>0){if(!window.confirm("Cambiando categoria di allenamento, i dati inseriti in questa scheda verranno cancellati. Vuoi continuare?"))return;Hn([Bs()]),Cr(""),Wn("")}It(I)}function Yn(){const I=document.body;let q=!1;const Z=()=>{q||(q=!0,I.classList.remove("print-plan-only"))};I.classList.add("print-plan-only"),window.addEventListener("afterprint",Z,{once:!0}),window.print(),window.setTimeout(Z,1200)}function mo(){if(!pt){s("Seleziona prima un cliente.");return}const I={name:Se(on==null?void 0:on.displayName).trim(),email:Se(on==null?void 0:on.email).trim()};fe(F0(w,I)),B(0),k(!0)}function go(){const I={name:Se(on==null?void 0:on.displayName).trim(),email:Se(on==null?void 0:on.email).trim()};fe(F0(w,I)),B(0),k(!1)}function Ki(){return U.fullName.trim()?U.email.trim()?U.phone.trim()?U.age.trim()?U.sex.trim()?U.heightCm.trim()?U.weightKg.trim()?U.pastProgram.trim()?U.trainingFrequency.trim()?U.workoutDuration.trim()?U.workoutLocation.trim()?U.equipment.trim()?U.objectivePrimary.trim()?U.objectiveReason.trim()?U.expectedTimeline.trim()?null:"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function Mn(){if(!pt){s("Seleziona prima un cliente.");return}const I=Ki();if(I){s(I);return}const q={fullName:U.fullName.trim(),age:U.age.trim(),sex:U.sex.trim(),email:U.email.trim(),phone:U.phone.trim(),discoverySource:U.discoverySource.trim(),heightCm:U.heightCm.trim(),weightKg:U.weightKg.trim(),pastProgram:U.pastProgram.trim(),trainingFrequency:U.trainingFrequency.trim(),workoutDuration:U.workoutDuration.trim(),workoutLocation:U.workoutLocation.trim(),equipment:U.equipment.trim(),trainingTypeHistory:U.trainingTypeHistory.trim(),hasInjuries:U.hasInjuries.trim(),injuryDetails:U.injuryDetails.trim(),objectivePrimary:U.objectivePrimary.trim(),objectiveReason:U.objectiveReason.trim(),expectedTimeline:U.expectedTimeline.trim(),supportPreference:U.supportPreference.trim(),supportPreferenceOther:U.supportPreferenceOther.trim(),investmentRange:U.investmentRange.trim(),whatBlockedSoFar:U.whatBlockedSoFar.trim(),oneThingToImprove:U.oneThingToImprove.trim(),importanceScore:Number(U.importanceScore||0),riskIfNoChange:U.riskIfNoChange.trim(),readiness:U.readiness.trim(),goal:U.objectivePrimary.trim(),experienceLevel:U.pastProgram.trim(),trainingDaysPerWeek:xj(U.trainingFrequency),notes:U.notes.trim(),compiledBy:"coach"};S(!0);try{await y2(pt,q),A(q),a("Anagrafica cliente salvata con successo."),k(!1)}catch(Z){s(Vt(Z))}finally{S(!1)}}async function na(){const I=Ir.trim();if(!I){s("Inserisci un titolo per la scheda.");return}const q=Ui.map(Z=>({name:Z.name.trim(),notes:Z.notes.trim(),advancedMethod:Z.advancedMethod||"",restPauseNotes:Z.restPauseNotes.trim(),dropSetNotes:Z.dropSetNotes.trim(),advancedMethodNotes:Z.advancedMethod==="rest_pause"?Z.restPauseNotes.trim():Z.advancedMethod==="drop_set"?Z.dropSetNotes.trim():"",sets:mt==="series_reps"&&Number(Z.sets)||0,reps:mt==="series_reps"&&Number(Z.reps)||0,workValue:mt==="circuit"&&Number(Z.workValue)||0,weightKg:Number(Z.weightKg)||0,restSeconds:Number(Z.restSeconds)||0,mediaUrl:Z.mediaUrl.trim()})).filter(Z=>Z.name.length>0);if(q.length===0){s("Aggiungi almeno un esercizio con nome.");return}if(En)await Vn(()=>S2(En.id,{title:I,kind:mt,warmup:dr.trim(),notes:br.trim(),status:"active",exercises:q}),"Scheda aggiornata con successo."),ut(En.id);else{const Z=await Vn(()=>e0({title:I,kind:mt,warmup:dr.trim(),notes:br.trim(),status:"active",exercises:q}),"Scheda creata.");Z!=null&&Z.id&&ut(Z.id)}$r(!1),R(!1)}function dn(){$r(!0),ut(""),It("series_reps"),Br(""),Wn(""),Cr(""),Hn([Bs()]),R(!0)}function vo(I){const q=Ye.find(Ee=>Ee.id===I);if(!q)return;$r(!1),ut(q.id),It(q.kind==="circuit"?"circuit":"series_reps"),Br(q.title??""),Wn(Se(q.warmup)),Cr(Se(q.notes));const Z=Ua(q.exercises).filter(Ee=>Ee.name.trim().length>0);Hn(Z.length>0?Z:[Bs()]),R(!0)}async function ra(I){if(Ye.find(Z=>Z.id===I)){wt(I);try{let Z;try{Z=(await h2(I)).clientWeightOverrides}catch{}Z&&Object.keys(Z).length>0&&m(Ee=>Ee.map(Ue=>Ue.id===I?{...Ue,clientWeightOverrides:Z}:Ue));try{const Ee=await E2(I);if(Ee.exists()){const Ue={id:Ee.id,...Ee.data()};m(jn=>jn.map($t=>$t.id===I?Ue:$t))}}catch{}ut(I),$(!0)}finally{wt("")}}}function yo(){$r(!1),qi(),R(!1)}async function Is(I,q){if(q){if(!q.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}Pe(I);try{const Z=(We==null?void 0:We.id)||(e==null?void 0:e.uid)||"coach-draft",Ee=await I2(Z,q);He(I,{mediaUrl:Ee}),a("Media caricato con successo.")}catch(Z){console.error("Media upload failed:",Z),s(Vt(Z))}finally{Pe(null)}}}async function bs(I){const q=Ye.find(Ee=>Ee.id===I);!q||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await Vn(()=>T2(q.id),"Scheda eliminata con successo."),ut(Ee=>Ee===q.id?"":Ee),R(!1),$(!1))}async function gi(I){const q=Ye.find(Ue=>Ue.id===I);if(!q)return;const Z=Ua(q.exercises).map(Ue=>({name:Ue.name,notes:Ue.notes,advancedMethod:Ue.advancedMethod,advancedMethodNotes:Ue.advancedMethodNotes,restPauseNotes:Ue.restPauseNotes,dropSetNotes:Ue.dropSetNotes,sets:Ue.sets,reps:Ue.reps,workValue:Ue.workValue,weightKg:Ue.weightKg,restSeconds:Ue.restSeconds,mediaUrl:Ue.mediaUrl})),Ee=await Vn(()=>e0({title:`${q.title||"Scheda"} (Copia)`,kind:q.kind==="circuit"?"circuit":"series_reps",notes:Se(q.notes),status:q.status==="archived"?"draft":"active",exercises:Z}),"Scheda duplicata.");Ee!=null&&Ee.id&&ut(Ee.id)}async function Gi(){if(!We){s("Seleziona prima una scheda.");return}if(Wr.length===0){s("Seleziona almeno un cliente da assegnare.");return}await Vn(()=>Promise.all(Wr.map(I=>_2(We.id,I))),Wr.length===1?"Scheda assegnata al cliente.":"Scheda assegnata ai clienti selezionati."),zi([])}async function yl(I){We&&await Vn(()=>w2(We.id,I),"Assegnazione rimossa.")}function Qr(I,q){var Jn;const Z=(Jn=I.assignmentDetails)==null?void 0:Jn[q];if(!Z||Z.mode!=="timed")return{label:"Permanente",tone:"success"};const Ee=Op(Z.startsAt),Ue=Op(Z.expiresAt);if(!Ue)return{label:"Permanente",tone:"success"};if(Ee){const Jr=new Date(Ee).getTime();if(!Number.isNaN(Jr)&&Jr>Date.now())return{label:`Inizia il ${Va(Ee)}`,tone:"warning"}}const jn=new Date(Ue).getTime();if(Number.isNaN(jn))return{label:"Permanente",tone:"success"};const $t=Date.now();if(jn<=$t)return{label:"Scaduta",tone:"danger"};const Zt=10080*60*1e3,fr=jn-$t<=Zt?"warning":"success";return{label:`Scade il ${Va(Ue)}`,tone:fr}}function Ln(I){var $t;if(!We)return;const q=($t=We.assignmentDetails)==null?void 0:$t[I],Z=(q==null?void 0:q.mode)==="timed",Ee=typeof(q==null?void 0:q.weeks)=="number"&&q.weeks>0?q.weeks:4,Ue=Op(q==null?void 0:q.startsAt),jn=Ue?new Date(Ue):new Date;Dn(I),pi(Z?"timed":"permanent"),Es(String(Ee)),Ss(U0(jn)),Hr(!0)}function Xr(){if(wn!=="timed")return null;const I=Number(qn);if(!Number.isFinite(I)||I<1)return null;const q=new Date(qr);if(Number.isNaN(q.getTime()))return null;const Z=new Date(q.getTime()+I*7*24*60*60*1e3);return{from:Va(q.toISOString()),to:Va(Z.toISOString())}}async function vi(){if(!(!We||!Pr)){if(wn==="timed"){const I=Number(qn);if(!Number.isFinite(I)||I<1){s("Inserisci un numero settimane valido.");return}const q=new Date(qr);if(Number.isNaN(q.getTime())){s("Seleziona una data di inizio valida.");return}await Vn(()=>t0(We.id,Pr,I,q.toISOString()),"Durata assegnazione aggiornata.")}else await Vn(()=>t0(We.id,Pr,null,null),"Assegnazione impostata come permanente.");Hr(!1),Dn("")}}async function Yr(I,q){at(I);try{if(q==="activate"){const Z=Tt.find(Ee=>Ee.uid===I);(Z==null?void 0:Z.status)==="disabled"?(await Jw(I),a("Coach sbloccato con successo.")):(Z==null?void 0:Z.status)==="active_paid"?(await a2(I),a("Abbonamento rinnovato di 1 anno.")):(await Jw(I),a("Abbonamento attivato."))}else await l2(I),a("Abbonamento disattivato.");await Hi()}catch(Z){s(Vt(Z))}finally{at("")}}async function vt(){Ge(!0);try{await tI();const I=await Yw();Me(I),a("Periodo di prova attivato.")}catch(I){s(Vt(I))}finally{Ge(!1)}}async function yi(){M(!0);try{await nI(),await Er().catch(()=>{}),r("/auth",{replace:!0})}catch(I){s(Vt(I))}finally{M(!1),N(!1)}}async function Xe(){const I=Fe.replace(/[^\d+]/g,"").trim();if(I.length<8){s("Inserisci un numero WhatsApp valido.");return}ye(!0);try{const q=await u2(I);x(q.phone),Oe(q.phone),Ve(!1),a("Numero aggiornato. I clienti associati useranno subito il nuovo contatto.")}catch(q){s(Vt(q))}finally{ye(!1)}}async function _i(){const I=Se(le==null?void 0:le.coachCode).trim();if(!I){s("Codice coach non disponibile.");return}try{await navigator.clipboard.writeText(I),a("Codice coach copiato.")}catch{s("Copia non riuscita. Copia manualmente il codice.")}}return g.jsxs(cI,{role:n==="trainer"?"trainer":"admin",subtitle:"",title:"Area Coach",sections:Bi,activeSection:lt,onSectionChange:I=>sn(I),children:[le!=null&&le.requiresTrialAcceptance?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>{I.currentTarget===I.target&&Er().finally(()=>r("/auth",{replace:!0}))},children:g.jsxs("article",{className:"card modal-card fullscreen-gate",onClick:I=>I.stopPropagation(),children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h2",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),g.jsx("button",{className:"btn",type:"button",disabled:De,onClick:()=>void vt(),children:De?"Attivazione...":"Accetta e continua"}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Er().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,lt==="code"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Il tuo codice coach"}),g.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),g.jsxs("div",{className:"coach-code-wrap",children:[g.jsx("p",{className:"coach-code",children:(le==null?void 0:le.coachCode)||"Caricamento..."}),g.jsx("button",{className:"icon-btn coach-copy-btn",type:"button","aria-label":"Copia codice coach",title:"Copia codice coach",onClick:()=>void _i(),children:""})]}),De?g.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,g.jsxs("div",{className:"client-info-block",children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:"Numero WhatsApp coach"}),Be?null:g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica numero coach",title:"Modifica numero coach",onClick:()=>Ve(!0),children:""})]}),Be?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Numero telefono / WhatsApp",g.jsx("input",{type:"tel",value:Fe,onChange:I=>Oe(I.target.value),placeholder:"Es. 3405882404"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:ae,onClick:()=>{Oe(L),Ve(!1)},children:"Annulla"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:ae,onClick:()=>void Xe(),children:ae?"Salvataggio...":"Salva"})]})]}):g.jsx("p",{className:"hint",children:g.jsx("strong",{children:L||"Non configurato"})})]}),le!=null&&le.isSupervisor?g.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"hint",children:["Stato accesso: ",g.jsx("strong",{children:z0(le==null?void 0:le.status)}),"  ","Scadenza: ",g.jsx("strong",{children:Va((le==null?void 0:le.expiresAt)??(le==null?void 0:le.trialEndsAt)??(le==null?void 0:le.subscriptionEndsAt))})]}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo coach perderai accesso, abbonamento, clienti associati e tutti i dati collegati."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>N(!0),children:"Elimina il mio profilo"})]})]}):null,t&&lt==="supervisor"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Gestione coach (Supervisor)"}),g.jsxs("label",{children:["Cerca coach per nome o email",g.jsx("input",{value:qe,onChange:I=>st(I.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),g.jsxs("div",{className:"supervisor-list",children:[Xn.map(I=>{const q=Dp(I),Z=Nj(I.status,q);return g.jsxs("article",{className:"supervisor-row",children:[g.jsxs("div",{children:[g.jsx("p",{children:g.jsx("strong",{children:I.displayName||"Coach senza nome"})}),g.jsx("p",{className:"hint",children:I.email}),g.jsxs("p",{className:"hint",children:["Codice: ",I.coachCode||"-"]}),g.jsxs("p",{className:"hint",children:["Stato: ",z0(I.isSupervisor?"supervisor_active":I.status)]}),g.jsxs("p",{className:"hint",children:["Scadenza: ",Va(q)]}),Z?g.jsx("span",{className:`status-chip status-chip-${Z.tone}`.trim(),children:Z.label}):null]}),g.jsxs("div",{className:"supervisor-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void Yr(I.uid,"activate"),children:I.status==="disabled"?"Sblocca":I.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void Yr(I.uid,"disable"),children:"Disattiva"})]})]},I.uid)}),Xn.length===0?g.jsx("article",{className:"supervisor-row",children:g.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,lt==="clients"||lt==="plans"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:lt==="plans"?"Schede tecniche":"Gestione cliente"}),lt==="clients"?g.jsxs("label",{children:["Clienti registrati",g.jsx(L0,{styles:fo,options:Kr,value:ea,onChange:I=>Lt((I==null?void 0:I.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}):null,lt!=="plans"?g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Wi(),children:"Aggiorna dati"}):null,lt==="clients"&&u.length===0?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Nessun cliente associato"}),g.jsx("p",{className:"hint",children:"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):g.jsxs(g.Fragment,{children:[lt==="clients"?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Anagrafica cliente"}),g.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),g.jsx("button",{className:"btn",type:"button",onClick:mo,disabled:_||!pt,children:w?"Modifica anagrafica completa":"Compila anagrafica completa"}),mi?g.jsx("a",{className:"btn btn-whatsapp",href:mi,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):g.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Anagrafica"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Nome:"})," ",kt(w==null?void 0:w.fullName)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Et:"})," ",kt(w==null?void 0:w.age)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Sesso:"})," ",kt(w==null?void 0:w.sex)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Email:"})," ",kt(w==null?void 0:w.email)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Telefono:"})," ",kt(w==null?void 0:w.phone)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Come ci ha conosciuto:"})," ",kt(w==null?void 0:w.discoverySource)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Stato fisico e allenamento"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Altezza:"})," ",kt(w==null?void 0:w.heightCm)," cm"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Peso:"})," ",kt(w==null?void 0:w.weightKg)," kg"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Esperienza programmi:"})," ",kt((w==null?void 0:w.pastProgram)||(w==null?void 0:w.experienceLevel))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti settimanali:"})," ",kt((w==null?void 0:w.trainingFrequency)||(w==null?void 0:w.trainingDaysPerWeek))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Durata sessione:"})," ",kt(w==null?void 0:w.workoutDuration)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Luogo allenamento:"})," ",kt(w==null?void 0:w.workoutLocation)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Attrezzatura:"})," ",kt(w==null?void 0:w.equipment)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti svolti:"})," ",kt(w==null?void 0:w.trainingTypeHistory)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Infortuni/problemi:"})," ",kt(w==null?void 0:w.hasInjuries)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Dettagli infortuni:"})," ",kt(w==null?void 0:w.injuryDetails)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Obiettivi"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Obiettivo principale:"})," ",kt((w==null?void 0:w.objectivePrimary)||(w==null?void 0:w.goal))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Perch:"})," ",kt(w==null?void 0:w.objectiveReason)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Timeline risultati:"})," ",kt(w==null?void 0:w.expectedTimeline)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",kt(w==null?void 0:w.whatBlockedSoFar)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",kt(w==null?void 0:w.oneThingToImprove)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Importanza obiettivo:"})," ",kt(w==null?void 0:w.importanceScore)," / 10"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Rischio se non cambia:"})," ",kt(w==null?void 0:w.riskIfNoChange)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",kt(w==null?void 0:w.notes)]})]})]}):null,lt==="plans"?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"hint",children:Ye.length>0?`Hai ${Ye.length} scheda/e create: puoi modificarle, eliminarle o assegnarle ai clienti.`:"Non hai ancora schede create: inizia con una nuova scheda."}),g.jsx("div",{className:"supervisor-actions",children:g.jsx("button",{className:"btn",disabled:_,onClick:dn,type:"button",children:"Crea nuova scheda"})}),Ye.length>0?g.jsx("div",{className:"plan-carousel",children:Ye.map(I=>g.jsxs("article",{className:"card plan-card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:I.title||"Scheda senza titolo"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Duplica scheda",title:"Duplica scheda",onClick:()=>void gi(I.id),children:""})]}),g.jsxs("p",{className:"hint",children:["Tipo: ",I.kind==="circuit"?"Circuito":"Serie e reps"]}),g.jsxs("p",{className:"hint",children:["Esercizi: ",Ua(I.exercises).length]}),g.jsxs("p",{className:"hint",children:["Assegnata a: ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]}),g.jsxs("p",{className:"hint",children:["Modifiche peso clienti: ",Dj(I,Kn)]}),g.jsxs("div",{className:"plan-card-actions",children:[g.jsx("button",{className:"btn btn-ghost btn-inline-loading",disabled:_||xt.length>0,onClick:()=>ra(I.id),type:"button",children:xt===I.id?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),"Caricamento..."]}):"Visualizza"}),g.jsx("button",{className:"btn",disabled:_,onClick:()=>vo(I.id),type:"button",children:"Modifica"}),g.jsx("button",{className:"btn btn-danger",disabled:_,onClick:()=>void bs(I.id),type:"button",children:"Elimina"})]})]},I.id))}):g.jsx("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:g.jsx("p",{className:"hint",children:"Nessuna scheda creata al momento."})})]}):null]})]}):null,re?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&go(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Anagrafica completa cliente"}),g.jsxs("p",{className:"hero-sub",children:["Step ",he+1," di ",Jl.length,"  Completamento ",Qn,"%"]}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:`${Qn}%`}})}),g.jsx("div",{className:"step-tabs",children:Jl.map((I,q)=>g.jsx("button",{className:`step-tab ${he===q?"step-tab-active":""}`.trim(),type:"button",onClick:()=>B(q),children:I},I))}),he===0?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:U.fullName,onChange:I=>gt("fullName",I.target.value)})]}),g.jsxs("label",{children:["Et *",g.jsx("input",{type:"number",min:12,max:99,value:U.age,onChange:I=>gt("age",I.target.value)})]}),g.jsxs("label",{children:["Sesso *",g.jsx("input",{value:U.sex,onChange:I=>gt("sex",I.target.value)})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{type:"email",value:U.email,onChange:I=>gt("email",I.target.value)})]}),g.jsxs("label",{children:["Telefono *",g.jsx("input",{type:"tel",value:U.phone,onChange:I=>gt("phone",I.target.value)})]}),g.jsxs("label",{children:["Come ci ha conosciuto",g.jsx("input",{value:U.discoverySource,onChange:I=>gt("discoverySource",I.target.value)})]})]}):null,he===1?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Altezza (cm) *",g.jsx("input",{type:"number",min:100,max:250,value:U.heightCm,onChange:I=>gt("heightCm",I.target.value)})]}),g.jsxs("label",{children:["Peso (kg) *",g.jsx("input",{type:"number",min:30,max:250,value:U.weightKg,onChange:I=>gt("weightKg",I.target.value)})]}),g.jsxs("label",{children:["Programmi precedenti *",g.jsx("input",{value:U.pastProgram,onChange:I=>gt("pastProgram",I.target.value),placeholder:"Es. Si con coach online"})]}),g.jsxs("label",{children:["Frequenza allenamenti *",g.jsx("input",{value:U.trainingFrequency,onChange:I=>gt("trainingFrequency",I.target.value),placeholder:"Es. 3-4 a settimana"})]}),g.jsxs("label",{children:["Durata allenamento *",g.jsx("input",{value:U.workoutDuration,onChange:I=>gt("workoutDuration",I.target.value),placeholder:"Es. 45 minuti"})]}),g.jsxs("label",{children:["Dove si allena *",g.jsx("input",{value:U.workoutLocation,onChange:I=>gt("workoutLocation",I.target.value)})]}),g.jsxs("label",{children:["Attrezzatura disponibile *",g.jsx("input",{value:U.equipment,onChange:I=>gt("equipment",I.target.value)})]}),g.jsxs("label",{children:["Allenamenti fatti",g.jsx("textarea",{value:U.trainingTypeHistory,onChange:I=>gt("trainingTypeHistory",I.target.value)})]}),g.jsxs("label",{children:["Infortuni/problemi",g.jsx("input",{value:U.hasInjuries,onChange:I=>gt("hasInjuries",I.target.value),placeholder:"Si/No"})]}),g.jsxs("label",{children:["Dettagli infortuni",g.jsx("textarea",{value:U.injuryDetails,onChange:I=>gt("injuryDetails",I.target.value)})]})]}):null,he===2?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Obiettivo principale *",g.jsx("input",{value:U.objectivePrimary,onChange:I=>gt("objectivePrimary",I.target.value)})]}),g.jsxs("label",{children:["Perch questo obiettivo? *",g.jsx("textarea",{value:U.objectiveReason,onChange:I=>gt("objectiveReason",I.target.value)})]}),g.jsxs("label",{children:["Timeline risultati *",g.jsx("input",{value:U.expectedTimeline,onChange:I=>gt("expectedTimeline",I.target.value)})]}),g.jsxs("label",{children:["Cosa lo ha bloccato",g.jsx("textarea",{value:U.whatBlockedSoFar,onChange:I=>gt("whatBlockedSoFar",I.target.value)})]}),g.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",g.jsx("textarea",{value:U.oneThingToImprove,onChange:I=>gt("oneThingToImprove",I.target.value)})]}),g.jsxs("label",{children:["Importanza obiettivo (1-10)",g.jsx("input",{type:"number",min:1,max:10,value:U.importanceScore,onChange:I=>gt("importanceScore",I.target.value)})]}),g.jsxs("label",{children:["Rischio se non cambia",g.jsx("textarea",{value:U.riskIfNoChange,onChange:I=>gt("riskIfNoChange",I.target.value)})]}),g.jsxs("label",{children:["Note coach (opzionale)",g.jsx("textarea",{value:U.notes,onChange:I=>gt("notes",I.target.value)})]})]}):null,g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:he===0,onClick:()=>B(I=>Math.max(I-1,0)),children:"Indietro"}),he<Jl.length-1?g.jsx("button",{className:"btn",type:"button",onClick:()=>B(I=>Math.min(I+1,Jl.length-1)),children:"Continua"}):g.jsx("button",{className:"btn",type:"button",onClick:()=>void Mn(),disabled:_,children:_?"Salvataggio...":"Salva"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:go,children:"Chiudi"})]})}):null,O?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&yo(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:En?"Modifica scheda":"Compila la scheda"}),g.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),g.jsxs("div",{className:"step-tabs plan-kind-tabs",children:[g.jsx("button",{className:`step-tab ${mt==="series_reps"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>Gr("series_reps"),children:"Serie e reps"}),g.jsx("button",{className:`step-tab ${mt==="circuit"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>Gr("circuit"),children:"Circuito"})]}),g.jsxs("label",{children:["Titolo scheda *",g.jsx("input",{value:Ir,onChange:I=>Br(I.target.value),placeholder:"Forza 4 settimane",required:!0})]}),g.jsxs("label",{children:["Riscaldamento (opzionale)",g.jsx("textarea",{value:dr,onChange:I=>Wn(I.target.value),placeholder:"Es. 8-10 min mobilit, attivazione scapole, squat a corpo libero..."})]}),g.jsxs("label",{children:["Note (opzionale)",g.jsx("textarea",{value:br,onChange:I=>Cr(I.target.value),placeholder:"Note utili per il cliente"})]}),Ui.map((I,q)=>g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("h2",{children:["Esercizio ",q+1]}),g.jsx("button",{className:"icon-btn",type:"button",onClick:()=>vl(q),"aria-label":`Reset esercizio ${q+1}`,title:"Reset esercizio",children:""})]}),g.jsxs("label",{children:["Nome esercizio",g.jsx("input",{value:I.name,onChange:Z=>He(q,{name:Z.target.value}),placeholder:"Es. Squat bilanciere"})]}),g.jsxs("label",{children:["Note esercizio",g.jsx("textarea",{value:I.notes,onChange:Z=>He(q,{notes:Z.target.value}),placeholder:"Note utili per questo esercizio"})]}),g.jsxs("div",{className:"exercise-fields-inline",children:[mt==="series_reps"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Serie",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.sets,onChange:Z=>He(q,{sets:Number(Z.target.value)})})]}),g.jsxs("label",{children:["Ripetizioni",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.reps,onChange:Z=>He(q,{reps:Number(Z.target.value)})})]})]}):g.jsxs("label",{children:["Reps/tempo di lavoro",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.workValue,onChange:Z=>He(q,{workValue:Number(Z.target.value)})})]}),g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:I.weightKg,onChange:Z=>He(q,{weightKg:Number(Z.target.value)})})]}),g.jsxs("label",{children:["Recupero (sec)",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.restSeconds,onChange:Z=>He(q,{restSeconds:Number(Z.target.value)})})]})]}),g.jsxs("div",{className:"exercise-method-toggle",children:[g.jsx("p",{className:"hint",children:"Metodo opzionale"}),g.jsxs("div",{className:"exercise-method-toggle-row",children:[g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="rest_pause"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>He(q,I.advancedMethod==="rest_pause"?{advancedMethod:""}:{advancedMethod:"rest_pause"}),children:"Rest Pause"}),g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="drop_set"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>He(q,I.advancedMethod==="drop_set"?{advancedMethod:""}:{advancedMethod:"drop_set"}),children:"Drop set"})]})]}),I.advancedMethod?g.jsxs("label",{children:[I.advancedMethod==="rest_pause"?"Note Rest Pause":"Note Drop set",g.jsx("textarea",{value:I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes,onChange:Z=>He(q,I.advancedMethod==="rest_pause"?{restPauseNotes:Z.target.value,advancedMethodNotes:Z.target.value}:{dropSetNotes:Z.target.value,advancedMethodNotes:Z.target.value}),placeholder:"Inserisci indicazioni per il cliente"})]}):null,g.jsxs("label",{children:["URL video (YouTube o link diretto)",g.jsx("input",{value:j0(I.mediaUrl)?I.mediaUrl:"",onChange:Z=>He(q,{mediaUrl:Z.target.value}),placeholder:"https://..."})]}),g.jsxs("label",{children:["Oppure carica un'immagine",g.jsx("input",{type:"file",accept:"image/*",onChange:Z=>{var Ee;return void Is(q,((Ee=Z.target.files)==null?void 0:Ee[0])??null)},disabled:ge===q}),sh(I.mediaUrl)?g.jsx("img",{src:I.mediaUrl,alt:`Anteprima esercizio ${q+1}`,className:"exercise-upload-preview"}):null]}),sh(I.mediaUrl)?g.jsxs("p",{className:"hint",children:["Immagine caricata."," ",g.jsx("button",{className:"btn-link",type:"button",onClick:()=>He(q,{mediaUrl:""}),children:"Rimuovi"})]}):null,ge===q?g.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>ta(q),children:"Rimuovi esercizio"})]},`exercise-${q}`)),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:po,children:"Aggiungi esercizio"}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:yo,children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||Ar,onClick:()=>void na(),children:Ar?"Attendi caricamento media...":"Salva"})]})]})}):null,C&&Nt?g.jsx("section",{className:"modal-overlay preview-modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&$(!1),children:g.jsxs("article",{className:"card modal-card print-sheet preview-modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("div",{className:"preview-head-main",children:[g.jsx("button",{className:"icon-btn mobile-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>$(!1),children:""}),g.jsx("h2",{children:"Scheda"})]}),g.jsxs("div",{className:"preview-head-actions screen-only",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:u.length===0,onClick:()=>{zi([]),G(!0)},children:"Assegna"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Stampa scheda",title:"Stampa scheda",onClick:Yn,children:""}),g.jsx("button",{className:"icon-btn desktop-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>$(!1),children:""})]})]}),g.jsxs("p",{className:"hint",children:["Clienti assegnati:"," ",g.jsx("strong",{children:Array.isArray(Nt.assignedClientIds)&&Nt.assignedClientIds.length>0?Nt.assignedClientIds.map(I=>Kn[I]||I).join(", "):"Nessuno"})]}),g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Titolo programma"}),g.jsx("h3",{children:Nt.title||"Senza titolo"})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:Nt.kind==="circuit"?"Circuito":"Serie e reps"})]}),Se(Nt.warmup).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",Se(Nt.warmup)]})}):null,Se(Nt.notes).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",Se(Nt.notes)]})}):null,Gn.length>0?g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Feedback peso cliente"}),g.jsx("p",{className:"hint",children:"Mostrato solo quando un cliente cambia il peso rispetto alla scheda base."}),Gn.map(I=>g.jsxs("div",{className:"divider-block",children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:I.clientLabel})}),g.jsx("ul",{className:"list",children:I.lines.map(q=>g.jsx("li",{children:q},`${I.clientId}-${q}`))})]},`weight-feedback-${I.clientId}`))]}):null,g.jsx("div",{className:"exercise-grid",children:Ua(Nt.exercises).map((I,q)=>g.jsx("article",{className:"exercise-card",children:(()=>{const Z=`${Nt.id}-${q}`,Ee=ee[Z]!==!1;return g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"exercise-name",children:I.name||`Esercizio ${q+1}`}),g.jsxs("div",{className:"exercise-meta",children:[Nt.kind==="circuit"?g.jsxs("span",{children:[I.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[I.sets||"-"," serie"]}),g.jsxs("span",{children:[I.reps||"-"," reps"]})]}),g.jsxs("span",{children:[I.weightKg||0," kg"]}),g.jsxs("span",{children:[I.restSeconds||0," sec recupero"]})]}),I.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",I.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,I.advancedMethod&&(I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",I.advancedMethod==="rest_pause"?I.restPauseNotes:I.dropSetNotes]}):null,I.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",I.notes]}):null,I.mediaUrl?g.jsxs(g.Fragment,{children:[sh(I.mediaUrl)?g.jsxs(g.Fragment,{children:[Ee?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:I.mediaUrl,alt:`Media esercizio ${q+1}`,className:"exercise-upload-preview",style:{display:Ee?"none":"block"},onLoad:()=>X(Ue=>({...Ue,[Z]:!1})),onError:()=>X(Ue=>({...Ue,[Z]:!1}))})]}):null,j0(I.mediaUrl)?g.jsxs(g.Fragment,{children:[g.jsx("a",{className:"btn-link screen-only",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri video"}),g.jsxs("a",{className:"hint print-only print-video-link",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:["URL video: ",I.mediaUrl]})]}):sh(I.mediaUrl)?null:g.jsx("a",{className:"btn-link",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri link"})]}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]})})()},`preview-ex-${q}`))})]})}):null,Q&&We?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&G(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h2",{children:"Gestisci assegnazioni"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Chiudi gestione assegnazioni",title:"Chiudi",onClick:()=>G(!1),children:""})]}),g.jsxs("p",{className:"hint",children:["Scheda: ",We.title||"Scheda senza titolo"]}),g.jsxs("label",{children:["Clienti",g.jsx(L0,{styles:fo,options:Zo,value:Ts,onChange:I=>zi(I.map(q=>q.value)),placeholder:Zo.length===0?"Tutti i clienti sono gi assegnati":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1})]}),g.jsx("div",{className:"action-row-split",children:g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||Wr.length===0,onClick:()=>void Gi(),children:"Assegna"})}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Clienti assegnati"}),Array.isArray(We.assignedClientIds)&&We.assignedClientIds.length>0?g.jsx("ul",{className:"assigned-client-list",children:We.assignedClientIds.map(I=>{const q=Qr(We,I);return g.jsxs("li",{className:"assigned-client-item",children:[g.jsxs("div",{children:[g.jsx("span",{className:"assigned-client-name",children:Kn[I]||I}),g.jsx("span",{className:`assignment-status assignment-status-${q.tone}`.trim(),children:q.label})]}),g.jsxs("div",{className:"assigned-client-actions",children:[g.jsx("button",{className:"icon-btn assigned-client-time-btn",type:"button","aria-label":`Imposta durata ${Kn[I]||I}`,title:"Imposta durata",disabled:_,onClick:()=>Ln(I),children:""}),g.jsx("button",{className:"icon-btn icon-btn-danger assigned-client-remove-btn",type:"button","aria-label":`Rimuovi ${Kn[I]||I}`,title:"Rimuovi cliente",disabled:_,onClick:()=>void yl(I),children:""})]})]},I)})}):g.jsx("p",{className:"hint",children:"Nessun cliente assegnato a questa scheda."})]})]})}):null,$i&&We?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&Hr(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Durata assegnazione"}),g.jsxs("p",{className:"hint",children:["Cliente: ",g.jsx("strong",{children:Kn[Pr]||Pr})]}),g.jsxs("div",{className:"step-tabs",children:[g.jsx("button",{className:`step-tab ${wn==="permanent"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>pi("permanent"),children:"Permanente"}),g.jsx("button",{className:`step-tab ${wn==="timed"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>pi("timed"),children:"A tempo"})]}),wn==="timed"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Data inizio",g.jsx("input",{type:"date",value:qr,onChange:I=>Ss(I.target.value)})]}),g.jsxs("label",{children:["Settimane",g.jsx("input",{type:"number",min:1,step:1,value:qn,onChange:I=>Es(I.target.value)})]}),Xr()?g.jsxs("p",{className:"hint",children:["Disponibile dal ",g.jsx("strong",{children:Xr().from})," al ",g.jsx("strong",{children:Xr().to})]}):null]}):g.jsx("p",{className:"hint",children:"La scheda rester sempre disponibile finch non rimuovi l'assegnazione."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Hr(!1),children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_,onClick:()=>void vi(),children:"Salva"})]})]})}):null,P&&!(le!=null&&le.isSupervisor)?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&N(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo coach"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente dati, abbonamento e associazioni clienti legate al tuo account coach."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:j,onClick:()=>N(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:j,onClick:()=>void yi(),children:j?"Eliminazione...":"Conferma eliminazione"})]})]})}):null,lt==="overview"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Panoramica"}),g.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),g.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),g.jsx("ul",{className:"list",children:f.slice(0,5).map(I=>{var q;return g.jsxs("li",{children:[g.jsx("strong",{children:I.title}),"  ",((q=I.exercises)==null?void 0:q.length)??0," esercizi  assegnata a ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]},I.id)})})]}):null,_?g.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function Mj(){const{user:n,role:e}=ml(),t=Cu(),{showError:r,showSuccess:s}=Yh(),[a,u]=V.useState(!1),[d,f]=V.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return g.jsx(ui,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return g.jsx(ui,{to:"/app/coach",replace:!0});function m(w,A){f(O=>({...O,[w]:A}))}function _(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function S(){const w=_();if(w){r(w);return}u(!0);try{await s2({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(A){r(Vt(A))}finally{u(!1)}}return g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),g.jsx("h1",{children:"Completa il tuo profilo"}),g.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:d.fullName,onChange:w=>m("fullName",w.target.value),placeholder:"Nome e cognome"})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{value:d.email,onChange:w=>m("email",w.target.value),type:"email",placeholder:"nome@esempio.com"})]}),g.jsxs("label",{children:["Numero di telefono *",g.jsx("input",{value:d.phone,onChange:w=>m("phone",w.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),g.jsxs("label",{children:["Codice coach *",g.jsx("input",{value:d.coachCode,onChange:w=>m("coachCode",w.target.value),placeholder:"Es. lorenzobeastly"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Er(),children:"Esci e cambia account"}),g.jsx("button",{className:"btn btn-primary",disabled:a,type:"button",onClick:()=>void S(),children:a?"Salvataggio...":"Continua"})]})]})})}function tb(){return g.jsx("main",{className:"page page-center",children:g.jsxs("div",{className:"card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Caricamento in corso"})]})})}class Lj extends V.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Qualcosa non ha funzionato"}),g.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function $0({allow:n,children:e}){const{user:t,role:r,initializing:s}=ml();return s?g.jsx(tb,{}):t?r?n.includes(r)?e:g.jsx(ui,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:g.jsx(ui,{to:"/onboarding",replace:!0}):g.jsx(ui,{to:"/auth",replace:!0})}function jj(){const{user:n,role:e,initializing:t}=ml();return t?g.jsx(tb,{}):n?e?g.jsx(ui,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx(ui,{to:"/app/client",replace:!0}):g.jsx(ui,{to:"/auth",replace:!0})}function Fj(){return g.jsx(Lj,{children:g.jsxs(o1,{children:[g.jsx(Vo,{path:"/",element:g.jsx(jj,{})}),g.jsx(Vo,{path:"/auth",element:g.jsx(O2,{})}),g.jsx(Vo,{path:"/onboarding",element:g.jsx(Mj,{})}),g.jsx(Vo,{path:"/app/coach",element:g.jsx($0,{allow:["admin","trainer"],children:g.jsx(Vj,{})})}),g.jsx(Vo,{path:"/app/client",element:g.jsx($0,{allow:["client"],children:g.jsx(M2,{})})}),g.jsx(Vo,{path:"*",element:g.jsx(ui,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});pC.createRoot(document.getElementById("root")).render(g.jsx(W0.StrictMode,{children:g.jsx(d1,{children:g.jsx(u1,{children:g.jsx(Fj,{})})})}));
