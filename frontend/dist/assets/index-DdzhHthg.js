function kT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function h_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bd={exports:{}},Ja={},$d={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function xT(){if(sy)return Ne;sy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),I=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function O(L,K,ye){this.props=L,this.context=K,this.refs=F,this.updater=ye||k}O.prototype.isReactComponent={},O.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function $(){}$.prototype=O.prototype;function ee(L,K,ye){this.props=L,this.context=K,this.refs=F,this.updater=ye||k}var ne=ee.prototype=new $;ne.constructor=ee,B(ne,O.prototype),ne.isPureReactComponent=!0;var ie=Array.isArray,Re=Object.prototype.hasOwnProperty,he={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(L,K,ye){var Pe,xe={},Ve=null,Fe=null;if(K!=null)for(Pe in K.ref!==void 0&&(Fe=K.ref),K.key!==void 0&&(Ve=""+K.key),K)Re.call(K,Pe)&&!N.hasOwnProperty(Pe)&&(xe[Pe]=K[Pe]);var ze=arguments.length-2;if(ze===1)xe.children=ye;else if(1<ze){for(var We=Array(ze),At=0;At<ze;At++)We[At]=arguments[At+2];xe.children=We}if(L&&L.defaultProps)for(Pe in ze=L.defaultProps,ze)xe[Pe]===void 0&&(xe[Pe]=ze[Pe]);return{$$typeof:n,type:L,key:Ve,ref:Fe,props:xe,_owner:he.current}}function P(L,K){return{$$typeof:n,type:L.type,key:K,ref:L.ref,props:L.props,_owner:L._owner}}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return K[ye]})}var M=/\/+/g;function C(L,K){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):K.toString(36)}function nt(L,K,ye,Pe,xe){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Fe=!1;if(L===null)Fe=!0;else switch(Ve){case"string":case"number":Fe=!0;break;case"object":switch(L.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=L,xe=xe(Fe),L=Pe===""?"."+C(Fe,0):Pe,ie(xe)?(ye="",L!=null&&(ye=L.replace(M,"$&/")+"/"),nt(xe,K,ye,"",function(At){return At})):xe!=null&&(D(xe)&&(xe=P(xe,ye+(!xe.key||Fe&&Fe.key===xe.key?"":(""+xe.key).replace(M,"$&/")+"/")+L)),K.push(xe)),1;if(Fe=0,Pe=Pe===""?".":Pe+":",ie(L))for(var ze=0;ze<L.length;ze++){Ve=L[ze];var We=Pe+C(Ve,ze);Fe+=nt(Ve,K,ye,We,xe)}else if(We=S(L),typeof We=="function")for(L=We.call(L),ze=0;!(Ve=L.next()).done;)Ve=Ve.value,We=Pe+C(Ve,ze++),Fe+=nt(Ve,K,ye,We,xe);else if(Ve==="object")throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Fe}function ce(L,K,ye){if(L==null)return L;var Pe=[],xe=0;return nt(L,Pe,"","",function(Ve){return K.call(ye,Ve,xe++)}),Pe}function ge(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var _e={current:null},X={transition:null},de={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:X,ReactCurrentOwner:he};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ce,forEach:function(L,K,ye){ce(L,function(){K.apply(this,arguments)},ye)},count:function(L){var K=0;return ce(L,function(){K++}),K},toArray:function(L){return ce(L,function(K){return K})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ne.Component=O,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=i,Ne.Suspense=m,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ne.act=se,Ne.cloneElement=function(L,K,ye){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Pe=B({},L.props),xe=L.key,Ve=L.ref,Fe=L._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,Fe=he.current),K.key!==void 0&&(xe=""+K.key),L.type&&L.type.defaultProps)var ze=L.type.defaultProps;for(We in K)Re.call(K,We)&&!N.hasOwnProperty(We)&&(Pe[We]=K[We]===void 0&&ze!==void 0?ze[We]:K[We])}var We=arguments.length-2;if(We===1)Pe.children=ye;else if(1<We){ze=Array(We);for(var At=0;At<We;At++)ze[At]=arguments[At+2];Pe.children=ze}return{$$typeof:n,type:L.type,key:xe,ref:Ve,props:Pe,_owner:Fe}},Ne.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ne.createElement=A,Ne.createFactory=function(L){var K=A.bind(null,L);return K.type=L,K},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(L){return{$$typeof:d,render:L}},Ne.isValidElement=D,Ne.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:ge}},Ne.memo=function(L,K){return{$$typeof:v,type:L,compare:K===void 0?null:K}},Ne.startTransition=function(L){var K=X.transition;X.transition={};try{L()}finally{X.transition=K}},Ne.unstable_act=se,Ne.useCallback=function(L,K){return _e.current.useCallback(L,K)},Ne.useContext=function(L){return _e.current.useContext(L)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(L){return _e.current.useDeferredValue(L)},Ne.useEffect=function(L,K){return _e.current.useEffect(L,K)},Ne.useId=function(){return _e.current.useId()},Ne.useImperativeHandle=function(L,K,ye){return _e.current.useImperativeHandle(L,K,ye)},Ne.useInsertionEffect=function(L,K){return _e.current.useInsertionEffect(L,K)},Ne.useLayoutEffect=function(L,K){return _e.current.useLayoutEffect(L,K)},Ne.useMemo=function(L,K){return _e.current.useMemo(L,K)},Ne.useReducer=function(L,K,ye){return _e.current.useReducer(L,K,ye)},Ne.useRef=function(L){return _e.current.useRef(L)},Ne.useState=function(L){return _e.current.useState(L)},Ne.useSyncExternalStore=function(L,K,ye){return _e.current.useSyncExternalStore(L,K,ye)},Ne.useTransition=function(){return _e.current.useTransition()},Ne.version="18.3.1",Ne}var oy;function qf(){return oy||(oy=1,$d.exports=xT()),$d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function NT(){if(ay)return Ja;ay=1;var n=qf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,m,v){var y,I={},S=null,k=null;v!==void 0&&(S=""+v),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(k=m.ref);for(y in m)i.call(m,y)&&!l.hasOwnProperty(y)&&(I[y]=m[y]);if(d&&d.defaultProps)for(y in m=d.defaultProps,m)I[y]===void 0&&(I[y]=m[y]);return{$$typeof:e,type:d,key:S,ref:k,props:I,_owner:o.current}}return Ja.Fragment=t,Ja.jsx=h,Ja.jsxs=h,Ja}var ly;function DT(){return ly||(ly=1,Bd.exports=NT()),Bd.exports}var E=DT(),Q=qf();const d_=h_(Q),bT=kT({__proto__:null,default:d_},[Q]);var Zu={},qd={exports:{}},sn={},Hd={exports:{}},Wd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function OT(){return uy||(uy=1,(function(n){function e(X,de){var se=X.length;X.push(de);e:for(;0<se;){var L=se-1>>>1,K=X[L];if(0<o(K,de))X[L]=de,X[se]=K,se=L;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var de=X[0],se=X.pop();if(se!==de){X[0]=se;e:for(var L=0,K=X.length,ye=K>>>1;L<ye;){var Pe=2*(L+1)-1,xe=X[Pe],Ve=Pe+1,Fe=X[Ve];if(0>o(xe,se))Ve<K&&0>o(Fe,xe)?(X[L]=Fe,X[Ve]=se,L=Ve):(X[L]=xe,X[Pe]=se,L=Pe);else if(Ve<K&&0>o(Fe,se))X[L]=Fe,X[Ve]=se,L=Ve;else break e}}return de}function o(X,de){var se=X.sortIndex-de.sortIndex;return se!==0?se:X.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var m=[],v=[],y=1,I=null,S=3,k=!1,B=!1,F=!1,O=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(X){for(var de=t(v);de!==null;){if(de.callback===null)i(v);else if(de.startTime<=X)i(v),de.sortIndex=de.expirationTime,e(m,de);else break;de=t(v)}}function ie(X){if(F=!1,ne(X),!B)if(t(m)!==null)B=!0,ge(Re);else{var de=t(v);de!==null&&_e(ie,de.startTime-X)}}function Re(X,de){B=!1,F&&(F=!1,$(A),A=-1),k=!0;var se=S;try{for(ne(de),I=t(m);I!==null&&(!(I.expirationTime>de)||X&&!V());){var L=I.callback;if(typeof L=="function"){I.callback=null,S=I.priorityLevel;var K=L(I.expirationTime<=de);de=n.unstable_now(),typeof K=="function"?I.callback=K:I===t(m)&&i(m),ne(de)}else i(m);I=t(m)}if(I!==null)var ye=!0;else{var Pe=t(v);Pe!==null&&_e(ie,Pe.startTime-de),ye=!1}return ye}finally{I=null,S=se,k=!1}}var he=!1,N=null,A=-1,P=5,D=-1;function V(){return!(n.unstable_now()-D<P)}function M(){if(N!==null){var X=n.unstable_now();D=X;var de=!0;try{de=N(!0,X)}finally{de?C():(he=!1,N=null)}}else he=!1}var C;if(typeof ee=="function")C=function(){ee(M)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,ce=nt.port2;nt.port1.onmessage=M,C=function(){ce.postMessage(null)}}else C=function(){O(M,0)};function ge(X){N=X,he||(he=!0,C())}function _e(X,de){A=O(function(){X(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){B||k||(B=!0,ge(Re))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var se=S;S=de;try{return X()}finally{S=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=S;S=X;try{return de()}finally{S=se}},n.unstable_scheduleCallback=function(X,de,se){var L=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?L+se:L):se=L,X){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,X={id:y++,callback:de,priorityLevel:X,startTime:se,expirationTime:K,sortIndex:-1},se>L?(X.sortIndex=se,e(v,X),t(m)===null&&X===t(v)&&(F?($(A),A=-1):F=!0,_e(ie,se-L))):(X.sortIndex=K,e(m,X),B||k||(B=!0,ge(Re))),X},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(X){var de=S;return function(){var se=S;S=de;try{return X.apply(this,arguments)}finally{S=se}}}})(Wd)),Wd}var cy;function VT(){return cy||(cy=1,Hd.exports=OT()),Hd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function LT(){if(hy)return sn;hy=1;var n=qf(),e=VT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},I={};function S(r){return m.call(I,r)?!0:m.call(y,r)?!1:v.test(r)?I[r]=!0:(y[r]=!0,!1)}function k(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function B(r,s,a,c){if(s===null||typeof s>"u"||k(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(r,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){O[r]=new F(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];O[s]=new F(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){O[r]=new F(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){O[r]=new F(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){O[r]=new F(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){O[r]=new F(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){O[r]=new F(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){O[r]=new F(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){O[r]=new F(r,5,!1,r.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace($,ee);O[s]=new F(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace($,ee);O[s]=new F(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace($,ee);O[s]=new F(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){O[r]=new F(r,1,!1,r.toLowerCase(),null,!1,!1)}),O.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){O[r]=new F(r,1,!1,r.toLowerCase(),null,!0,!0)});function ne(r,s,a,c){var f=O.hasOwnProperty(s)?O[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),he=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),X=Symbol.iterator;function de(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var se=Object.assign,L;function K(r){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+r}var ye=!1;function Pe(r,s){if(!r||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var c=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){c=q}r.call(s.prototype)}else{try{throw Error()}catch(q){c=q}r()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,R=g.length-1;1<=w&&0<=R&&f[w]!==g[R];)R--;for(;1<=w&&0<=R;w--,R--)if(f[w]!==g[R]){if(w!==1||R!==1)do if(w--,R--,0>R||f[w]!==g[R]){var x=`
`+f[w].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=w&&0<=R);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function xe(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function Ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case he:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case nt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ce:return s=r.displayName||null,s!==null?s:Ve(r.type)||"Memo";case ge:s=r._payload,r=r._init;try{return Ve(r(s))}catch{}}return null}function Fe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function At(r){var s=We(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Er(r){r._valueTracker||(r._valueTracker=At(r))}function js(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=We(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Jr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Gi(r,s){var a=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Us(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ze(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ra(r,s){s=s.checked,s!=null&&ne(r,"checked",s,!1)}function ia(r,s){ra(r,s);var a=ze(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Fs(r,s.type,a):s.hasOwnProperty("defaultValue")&&Fs(r,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function jl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Fs(r,s,a){(s!=="number"||Jr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Tr=Array.isArray;function Ir(r,s,a,c){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+ze(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function sa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function zs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Tr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:ze(a)}}function Bs(r,s){var a=ze(s.value),c=ze(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function oa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Sr,aa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Sr=Sr||document.createElement("div"),Sr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Sr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Yr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qi=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(r){Qi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Ki[s]=Ki[r]})});function la(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ki.hasOwnProperty(r)&&Ki[r]?(""+s).trim():s+"px"}function ua(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=la(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,f):r[a]=f}}var ca=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(r,s){if(s){if(ca[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xi=null;function $s(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qs=null,wn=null,Zn=null;function Hs(r){if(r=La(r)){if(typeof qs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=pu(s),qs(r.stateNode,r.type,s))}}function er(r){wn?Zn?Zn.push(r):Zn=[r]:wn=r}function fa(){if(wn){var r=wn,s=Zn;if(Zn=wn=null,Hs(r),s)for(r=0;r<s.length;r++)Hs(s[r])}}function Ji(r,s){return r(s)}function pa(){}var Ar=!1;function ma(r,s,a){if(Ar)return r(s,a);Ar=!0;try{return Ji(r,s,a)}finally{Ar=!1,(wn!==null||Zn!==null)&&(pa(),fa())}}function ut(r,s){var a=r.stateNode;if(a===null)return null;var c=pu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ws=!1;if(d)try{var On={};Object.defineProperty(On,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Ws=!1}function Yi(r,s,a,c,f,g,w,R,x){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(Y){this.onError(Y)}}var Zi=!1,Gs=null,Vn=!1,ga=null,gh={onError:function(r){Zi=!0,Gs=r}};function Ks(r,s,a,c,f,g,w,R,x){Zi=!1,Gs=null,Yi.apply(gh,arguments)}function Ul(r,s,a,c,f,g,w,R,x){if(Ks.apply(this,arguments),Zi){if(Zi){var q=Gs;Zi=!1,Gs=null}else throw Error(t(198));Vn||(Vn=!0,ga=q)}}function Ln(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function es(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mn(r){if(Ln(r)!==r)throw Error(t(188))}function Fl(r){var s=r.alternate;if(!s){if(s=Ln(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Mn(f),r;if(g===c)return Mn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,R=f.child;R;){if(R===a){w=!0,a=f,c=g;break}if(R===c){w=!0,c=f,a=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===a){w=!0,a=g,c=f;break}if(R===c){w=!0,c=g,a=f;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ya(r){return r=Fl(r),r!==null?Qs(r):null}function Qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Qs(r);if(s!==null)return s;r=r.sibling}return null}var Xs=e.unstable_scheduleCallback,va=e.unstable_cancelCallback,zl=e.unstable_shouldYield,yh=e.unstable_requestPaint,Ge=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,ts=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,En=e.unstable_NormalPriority,_a=e.unstable_LowPriority,$l=e.unstable_IdlePriority,ns=null,hn=null;function ql(r){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ns,r,void 0,(r.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Wl,wa=Math.log,Hl=Math.LN2;function Wl(r){return r>>>=0,r===0?32:31-(wa(r)/Hl|0)|0}var Js=64,Ys=4194304;function ei(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function rs(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var R=w&~f;R!==0?c=ei(R):(g&=w,g!==0&&(c=ei(g)))}else w=a&~f,w!==0?c=ei(w):g!==0&&(c=ei(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-Wt(s),f=1<<a,c|=r[a],s&=~f;return c}function vh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Wt(g),R=1<<w,x=f[w];x===-1?((R&a)===0||(R&c)!==0)&&(f[w]=vh(R,s)):x<=s&&(r.expiredLanes|=R),g&=~R}}function dn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function is(){var r=Js;return Js<<=1,(Js&4194240)===0&&(Js=64),r}function ti(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function ni(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Wt(s),r[s]=a}function qe(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Wt(a),g=1<<f;s[f]=0,c[f]=-1,r[f]=-1,a&=~g}}function ri(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-Wt(a),f=1<<c;f&s|r[c]&s&&(r[c]|=s),a&=~f}}var Oe=0;function ii(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Gl,Zs,Kl,Ql,Xl,Ea=!1,tr=[],Nt=null,jn=null,Un=null,si=new Map,Tn=new Map,nr=[],_h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jl(r,s){switch(r){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":si.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tn.delete(s.pointerId)}}function Jt(r,s,a,c,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=La(s),s!==null&&Zs(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function wh(r,s,a,c,f){switch(s){case"focusin":return Nt=Jt(Nt,r,s,a,c,f),!0;case"dragenter":return jn=Jt(jn,r,s,a,c,f),!0;case"mouseover":return Un=Jt(Un,r,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return si.set(g,Jt(si.get(g)||null,r,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Tn.set(g,Jt(Tn.get(g)||null,r,s,a,c,f)),!0}return!1}function Yl(r){var s=us(r.target);if(s!==null){var a=Ln(s);if(a!==null){if(s=a.tag,s===13){if(s=es(a),s!==null){r.blockedOn=s,Xl(r.priority,function(){Kl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Cr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=eo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Xi=c,a.target.dispatchEvent(c),Xi=null}else return s=La(a),s!==null&&Zs(s),r.blockedOn=a,!1;s.shift()}return!0}function ss(r,s,a){Cr(r)&&a.delete(s)}function Zl(){Ea=!1,Nt!==null&&Cr(Nt)&&(Nt=null),jn!==null&&Cr(jn)&&(jn=null),Un!==null&&Cr(Un)&&(Un=null),si.forEach(ss),Tn.forEach(ss)}function Fn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zl)))}function zn(r){function s(f){return Fn(f,r)}if(0<tr.length){Fn(tr[0],r);for(var a=1;a<tr.length;a++){var c=tr[a];c.blockedOn===r&&(c.blockedOn=null)}}for(Nt!==null&&Fn(Nt,r),jn!==null&&Fn(jn,r),Un!==null&&Fn(Un,r),si.forEach(s),Tn.forEach(s),a=0;a<nr.length;a++)c=nr[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)Yl(a),a.blockedOn===null&&nr.shift()}var Pr=ie.ReactCurrentBatchConfig,oi=!0;function Ze(r,s,a,c){var f=Oe,g=Pr.transition;Pr.transition=null;try{Oe=1,Ta(r,s,a,c)}finally{Oe=f,Pr.transition=g}}function Eh(r,s,a,c){var f=Oe,g=Pr.transition;Pr.transition=null;try{Oe=4,Ta(r,s,a,c)}finally{Oe=f,Pr.transition=g}}function Ta(r,s,a,c){if(oi){var f=eo(r,s,a,c);if(f===null)Dh(r,s,c,os,a),Jl(r,c);else if(wh(f,r,s,a,c))c.stopPropagation();else if(Jl(r,c),s&4&&-1<_h.indexOf(r)){for(;f!==null;){var g=La(f);if(g!==null&&Gl(g),g=eo(r,s,a,c),g===null&&Dh(r,s,c,os,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else Dh(r,s,c,null,a)}}var os=null;function eo(r,s,a,c){if(os=null,r=$s(c),r=us(r),r!==null)if(s=Ln(r),s===null)r=null;else if(a=s.tag,a===13){if(r=es(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return os=r,null}function Ia(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case ts:return 1;case Zr:return 4;case En:case _a:return 16;case $l:return 536870912;default:return 16}default:return 16}}var fn=null,to=null,Yt=null;function Sa(){if(Yt)return Yt;var r,s=to,a=s.length,c,f="value"in fn?fn.value:fn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return Yt=f.slice(r,1<c?1-c:void 0)}function no(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function rr(){return!0}function Aa(){return!1}function Dt(r){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(a=r[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?rr:Aa,this.isPropagationStopped=Aa,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=Dt(Bn),ir=se({},Bn,{view:0,detail:0}),Th=Dt(ir),io,kr,ai,as=se({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(io=r.screenX-ai.screenX,kr=r.screenY-ai.screenY):kr=io=0,ai=r),io)},movementY:function(r){return"movementY"in r?r.movementY:kr}}),so=Dt(as),Ra=se({},as,{dataTransfer:0}),eu=Dt(Ra),oo=se({},ir,{relatedTarget:0}),ao=Dt(oo),tu=se({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),xr=Dt(tu),nu=se({},Bn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ru=Dt(nu),iu=se({},Bn,{data:0}),Ca=Dt(iu),lo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ou(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=su[r])?!!s[r]:!1}function sr(){return ou}var u=se({},ir,{key:function(r){if(r.key){var s=lo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=no(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(r){return r.type==="keypress"?no(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?no(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),p=Dt(u),_=se({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Dt(_),j=se({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),H=Dt(j),re=se({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=Dt(re),Et=se({},as,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Dt(Et),Rt=[9,13,27,32],pt=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var pn=d&&"TextEvent"in window&&!In,ls=d&&(!pt||In&&8<In&&11>=In),uo=" ",Zp=!1;function em(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var co=!1;function R0(r,s){switch(r){case"compositionend":return tm(s);case"keypress":return s.which!==32?null:(Zp=!0,uo);case"textInput":return r=s.data,r===uo&&Zp?null:r;default:return null}}function C0(r,s){if(co)return r==="compositionend"||!pt&&em(r,s)?(r=Sa(),Yt=to=fn=null,co=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ls&&s.locale!=="ko"?null:s.data;default:return null}}var P0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!P0[r.type]:s==="textarea"}function rm(r,s,a,c){er(c),s=hu(s,"onChange"),0<s.length&&(a=new ro("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Pa=null,ka=null;function k0(r){Em(r,0)}function au(r){var s=go(r);if(js(s))return r}function x0(r,s){if(r==="change")return s}var im=!1;if(d){var Ih;if(d){var Sh="oninput"in document;if(!Sh){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),Sh=typeof sm.oninput=="function"}Ih=Sh}else Ih=!1;im=Ih&&(!document.documentMode||9<document.documentMode)}function om(){Pa&&(Pa.detachEvent("onpropertychange",am),ka=Pa=null)}function am(r){if(r.propertyName==="value"&&au(ka)){var s=[];rm(s,ka,r,$s(r)),ma(k0,s)}}function N0(r,s,a){r==="focusin"?(om(),Pa=s,ka=a,Pa.attachEvent("onpropertychange",am)):r==="focusout"&&om()}function D0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return au(ka)}function b0(r,s){if(r==="click")return au(s)}function O0(r,s){if(r==="input"||r==="change")return au(s)}function V0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var $n=typeof Object.is=="function"?Object.is:V0;function xa(r,s){if($n(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!m.call(s,f)||!$n(r[f],s[f]))return!1}return!0}function lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function um(r,s){var a=lm(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lm(a)}}function cm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?cm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function hm(){for(var r=window,s=Jr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Jr(r.document)}return s}function Ah(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function L0(r){var s=hm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&cm(a.ownerDocument.documentElement,a)){if(c!==null&&Ah(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!r.extend&&g>c&&(f=c,c=g,g=f),f=um(a,g);var w=um(a,c);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var M0=d&&"documentMode"in document&&11>=document.documentMode,ho=null,Rh=null,Na=null,Ch=!1;function dm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||ho==null||ho!==Jr(c)||(c=ho,"selectionStart"in c&&Ah(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&xa(Na,c)||(Na=c,c=hu(Rh,"onSelect"),0<c.length&&(s=new ro("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=ho)))}function lu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var fo={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},Ph={},fm={};d&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function uu(r){if(Ph[r])return Ph[r];if(!fo[r])return r;var s=fo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in fm)return Ph[r]=s[a];return r}var pm=uu("animationend"),mm=uu("animationiteration"),gm=uu("animationstart"),ym=uu("transitionend"),vm=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(r,s){vm.set(r,s),l(s,[r])}for(var kh=0;kh<_m.length;kh++){var xh=_m[kh],j0=xh.toLowerCase(),U0=xh[0].toUpperCase()+xh.slice(1);li(j0,"on"+U0)}li(pm,"onAnimationEnd"),li(mm,"onAnimationIteration"),li(gm,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(ym,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function wm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,Ul(c,s,void 0,r),r.currentTarget=null}function Em(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],x=R.instance,q=R.currentTarget;if(R=R.listener,x!==g&&f.isPropagationStopped())break e;wm(f,R,q),g=x}else for(w=0;w<c.length;w++){if(R=c[w],x=R.instance,q=R.currentTarget,R=R.listener,x!==g&&f.isPropagationStopped())break e;wm(f,R,q),g=x}}}if(Vn)throw r=ga,Vn=!1,ga=null,r}function Xe(r,s){var a=s[jh];a===void 0&&(a=s[jh]=new Set);var c=r+"__bubble";a.has(c)||(Tm(s,r,2,!1),a.add(c))}function Nh(r,s,a){var c=0;s&&(c|=4),Tm(a,r,c,s)}var cu="_reactListening"+Math.random().toString(36).slice(2);function ba(r){if(!r[cu]){r[cu]=!0,i.forEach(function(a){a!=="selectionchange"&&(F0.has(a)||Nh(a,!1,r),Nh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[cu]||(s[cu]=!0,Nh("selectionchange",!1,s))}}function Tm(r,s,a,c){switch(Ia(s)){case 1:var f=Ze;break;case 4:f=Eh;break;default:f=Ta}a=f.bind(null,s,a,r),f=void 0,!Ws||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Dh(r,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var x=w.tag;if((x===3||x===4)&&(x=w.stateNode.containerInfo,x===f||x.nodeType===8&&x.parentNode===f))return;w=w.return}for(;R!==null;){if(w=us(R),w===null)return;if(x=w.tag,x===5||x===6){c=g=w;continue e}R=R.parentNode}}c=c.return}ma(function(){var q=g,Y=$s(a),Z=[];e:{var J=vm.get(r);if(J!==void 0){var ae=ro,fe=r;switch(r){case"keypress":if(no(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":fe="focus",ae=ao;break;case"focusout":fe="blur",ae=ao;break;case"beforeblur":case"afterblur":ae=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=so;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=H;break;case pm:case mm:case gm:ae=xr;break;case ym:ae=$e;break;case"scroll":ae=Th;break;case"wheel":ae=Le;break;case"copy":case"cut":case"paste":ae=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=T}var pe=(s&4)!==0,ct=!pe&&r==="scroll",U=pe?J!==null?J+"Capture":null:J;pe=[];for(var b=q,z;b!==null;){z=b;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,U!==null&&(te=ut(b,U),te!=null&&pe.push(Oa(b,te,z)))),ct)break;b=b.return}0<pe.length&&(J=new ae(J,fe,null,a,Y),Z.push({event:J,listeners:pe}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",J&&a!==Xi&&(fe=a.relatedTarget||a.fromElement)&&(us(fe)||fe[Nr]))break e;if((ae||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=q,fe=fe?us(fe):null,fe!==null&&(ct=Ln(fe),fe!==ct||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=q),ae!==fe)){if(pe=so,te="onMouseLeave",U="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(pe=T,te="onPointerLeave",U="onPointerEnter",b="pointer"),ct=ae==null?J:go(ae),z=fe==null?J:go(fe),J=new pe(te,b+"leave",ae,a,Y),J.target=ct,J.relatedTarget=z,te=null,us(Y)===q&&(pe=new pe(U,b+"enter",fe,a,Y),pe.target=z,pe.relatedTarget=ct,te=pe),ct=te,ae&&fe)t:{for(pe=ae,U=fe,b=0,z=pe;z;z=po(z))b++;for(z=0,te=U;te;te=po(te))z++;for(;0<b-z;)pe=po(pe),b--;for(;0<z-b;)U=po(U),z--;for(;b--;){if(pe===U||U!==null&&pe===U.alternate)break t;pe=po(pe),U=po(U)}pe=null}else pe=null;ae!==null&&Im(Z,J,ae,pe,!1),fe!==null&&ct!==null&&Im(Z,ct,fe,pe,!0)}}e:{if(J=q?go(q):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var me=x0;else if(nm(J))if(im)me=O0;else{me=D0;var we=N0}else(ae=J.nodeName)&&ae.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(me=b0);if(me&&(me=me(r,q))){rm(Z,me,a,Y);break e}we&&we(r,J,q),r==="focusout"&&(we=J._wrapperState)&&we.controlled&&J.type==="number"&&Fs(J,"number",J.value)}switch(we=q?go(q):window,r){case"focusin":(nm(we)||we.contentEditable==="true")&&(ho=we,Rh=q,Na=null);break;case"focusout":Na=Rh=ho=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,dm(Z,a,Y);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":dm(Z,a,Y)}var Ee;if(pt)e:{switch(r){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else co?em(r,a)&&(Ie="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(ls&&a.locale!=="ko"&&(co||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&co&&(Ee=Sa()):(fn=Y,to="value"in fn?fn.value:fn.textContent,co=!0)),we=hu(q,Ie),0<we.length&&(Ie=new Ca(Ie,r,null,a,Y),Z.push({event:Ie,listeners:we}),Ee?Ie.data=Ee:(Ee=tm(a),Ee!==null&&(Ie.data=Ee)))),(Ee=pn?R0(r,a):C0(r,a))&&(q=hu(q,"onBeforeInput"),0<q.length&&(Y=new Ca("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:q}),Y.data=Ee))}Em(Z,s)})}function Oa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function hu(r,s){for(var a=s+"Capture",c=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ut(r,a),g!=null&&c.unshift(Oa(r,g,f)),g=ut(r,s),g!=null&&c.push(Oa(r,g,f))),r=r.return}return c}function po(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var R=a,x=R.alternate,q=R.stateNode;if(x!==null&&x===c)break;R.tag===5&&q!==null&&(R=q,f?(x=ut(a,g),x!=null&&w.unshift(Oa(a,x,R))):f||(x=ut(a,g),x!=null&&w.push(Oa(a,x,R)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var z0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function Sm(r){return(typeof r=="string"?r:""+r).replace(z0,`
`).replace(B0,"")}function du(r,s,a){if(s=Sm(s),Sm(r)!==s&&a)throw Error(t(425))}function fu(){}var bh=null,Oh=null;function Vh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lh=typeof setTimeout=="function"?setTimeout:void 0,$0=typeof clearTimeout=="function"?clearTimeout:void 0,Am=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof Am<"u"?function(r){return Am.resolve(null).then(r).catch(H0)}:Lh;function H0(r){setTimeout(function(){throw r})}function Mh(r,s){var a=s,c=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){r.removeChild(f),zn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);zn(s)}function ui(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Rm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var mo=Math.random().toString(36).slice(2),or="__reactFiber$"+mo,Va="__reactProps$"+mo,Nr="__reactContainer$"+mo,jh="__reactEvents$"+mo,W0="__reactListeners$"+mo,G0="__reactHandles$"+mo;function us(r){var s=r[or];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Nr]||a[or]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Rm(r);r!==null;){if(a=r[or])return a;r=Rm(r)}return s}r=a,a=r.parentNode}return null}function La(r){return r=r[or]||r[Nr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function go(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function pu(r){return r[Va]||null}var Uh=[],yo=-1;function ci(r){return{current:r}}function Je(r){0>yo||(r.current=Uh[yo],Uh[yo]=null,yo--)}function Ke(r,s){yo++,Uh[yo]=r.current,r.current=s}var hi={},jt=ci(hi),Zt=ci(!1),cs=hi;function vo(r,s){var a=r.type.contextTypes;if(!a)return hi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function mu(){Je(Zt),Je(jt)}function Cm(r,s,a){if(jt.current!==hi)throw Error(t(168));Ke(jt,s),Ke(Zt,a)}function Pm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Fe(r)||"Unknown",f));return se({},a,c)}function gu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hi,cs=jt.current,Ke(jt,r),Ke(Zt,Zt.current),!0}function km(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Pm(r,s,cs),c.__reactInternalMemoizedMergedChildContext=r,Je(Zt),Je(jt),Ke(jt,r)):Je(Zt),Ke(Zt,a)}var Dr=null,yu=!1,Fh=!1;function xm(r){Dr===null?Dr=[r]:Dr.push(r)}function K0(r){yu=!0,xm(r)}function di(){if(!Fh&&Dr!==null){Fh=!0;var r=0,s=Oe;try{var a=Dr;for(Oe=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Dr=null,yu=!1}catch(f){throw Dr!==null&&(Dr=Dr.slice(r+1)),Xs(ts,di),f}finally{Oe=s,Fh=!1}}return null}var _o=[],wo=0,vu=null,_u=0,Sn=[],An=0,hs=null,br=1,Or="";function ds(r,s){_o[wo++]=_u,_o[wo++]=vu,vu=r,_u=s}function Nm(r,s,a){Sn[An++]=br,Sn[An++]=Or,Sn[An++]=hs,hs=r;var c=br;r=Or;var f=32-Wt(c)-1;c&=~(1<<f),a+=1;var g=32-Wt(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,br=1<<32-Wt(s)+f|a<<f|c,Or=g+r}else br=1<<g|a<<f|c,Or=r}function zh(r){r.return!==null&&(ds(r,1),Nm(r,1,0))}function Bh(r){for(;r===vu;)vu=_o[--wo],_o[wo]=null,_u=_o[--wo],_o[wo]=null;for(;r===hs;)hs=Sn[--An],Sn[An]=null,Or=Sn[--An],Sn[An]=null,br=Sn[--An],Sn[An]=null}var mn=null,gn=null,et=!1,qn=null;function Dm(r,s){var a=kn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function bm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,mn=r,gn=ui(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,mn=r,gn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=hs!==null?{id:br,overflow:Or}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=kn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,mn=r,gn=null,!0):!1;default:return!1}}function $h(r){return(r.mode&1)!==0&&(r.flags&128)===0}function qh(r){if(et){var s=gn;if(s){var a=s;if(!bm(r,s)){if($h(r))throw Error(t(418));s=ui(a.nextSibling);var c=mn;s&&bm(r,s)?Dm(c,a):(r.flags=r.flags&-4097|2,et=!1,mn=r)}}else{if($h(r))throw Error(t(418));r.flags=r.flags&-4097|2,et=!1,mn=r}}}function Om(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mn=r}function wu(r){if(r!==mn)return!1;if(!et)return Om(r),et=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Vh(r.type,r.memoizedProps)),s&&(s=gn)){if($h(r))throw Vm(),Error(t(418));for(;s;)Dm(r,s),s=ui(s.nextSibling)}if(Om(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){gn=ui(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}gn=null}}else gn=mn?ui(r.stateNode.nextSibling):null;return!0}function Vm(){for(var r=gn;r;)r=ui(r.nextSibling)}function Eo(){gn=mn=null,et=!1}function Hh(r){qn===null?qn=[r]:qn.push(r)}var Q0=ie.ReactCurrentBatchConfig;function Ma(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var f=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var R=f.refs;w===null?delete R[g]:R[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Eu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Lm(r){var s=r._init;return s(r._payload)}function Mm(r){function s(U,b){if(r){var z=U.deletions;z===null?(U.deletions=[b],U.flags|=16):z.push(b)}}function a(U,b){if(!r)return null;for(;b!==null;)s(U,b),b=b.sibling;return null}function c(U,b){for(U=new Map;b!==null;)b.key!==null?U.set(b.key,b):U.set(b.index,b),b=b.sibling;return U}function f(U,b){return U=wi(U,b),U.index=0,U.sibling=null,U}function g(U,b,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<b?(U.flags|=2,b):z):(U.flags|=2,b)):(U.flags|=1048576,b)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function R(U,b,z,te){return b===null||b.tag!==6?(b=Ld(z,U.mode,te),b.return=U,b):(b=f(b,z),b.return=U,b)}function x(U,b,z,te){var me=z.type;return me===N?Y(U,b,z.props.children,te,z.key):b!==null&&(b.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ge&&Lm(me)===b.type)?(te=f(b,z.props),te.ref=Ma(U,b,z),te.return=U,te):(te=Hu(z.type,z.key,z.props,null,U.mode,te),te.ref=Ma(U,b,z),te.return=U,te)}function q(U,b,z,te){return b===null||b.tag!==4||b.stateNode.containerInfo!==z.containerInfo||b.stateNode.implementation!==z.implementation?(b=Md(z,U.mode,te),b.return=U,b):(b=f(b,z.children||[]),b.return=U,b)}function Y(U,b,z,te,me){return b===null||b.tag!==7?(b=ws(z,U.mode,te,me),b.return=U,b):(b=f(b,z),b.return=U,b)}function Z(U,b,z){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ld(""+b,U.mode,z),b.return=U,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Re:return z=Hu(b.type,b.key,b.props,null,U.mode,z),z.ref=Ma(U,null,b),z.return=U,z;case he:return b=Md(b,U.mode,z),b.return=U,b;case ge:var te=b._init;return Z(U,te(b._payload),z)}if(Tr(b)||de(b))return b=ws(b,U.mode,z,null),b.return=U,b;Eu(U,b)}return null}function J(U,b,z,te){var me=b!==null?b.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:R(U,b,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:return z.key===me?x(U,b,z,te):null;case he:return z.key===me?q(U,b,z,te):null;case ge:return me=z._init,J(U,b,me(z._payload),te)}if(Tr(z)||de(z))return me!==null?null:Y(U,b,z,te,null);Eu(U,z)}return null}function ae(U,b,z,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(z)||null,R(b,U,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Re:return U=U.get(te.key===null?z:te.key)||null,x(b,U,te,me);case he:return U=U.get(te.key===null?z:te.key)||null,q(b,U,te,me);case ge:var we=te._init;return ae(U,b,z,we(te._payload),me)}if(Tr(te)||de(te))return U=U.get(z)||null,Y(b,U,te,me,null);Eu(b,te)}return null}function fe(U,b,z,te){for(var me=null,we=null,Ee=b,Ie=b=0,kt=null;Ee!==null&&Ie<z.length;Ie++){Ee.index>Ie?(kt=Ee,Ee=null):kt=Ee.sibling;var Ue=J(U,Ee,z[Ie],te);if(Ue===null){Ee===null&&(Ee=kt);break}r&&Ee&&Ue.alternate===null&&s(U,Ee),b=g(Ue,b,Ie),we===null?me=Ue:we.sibling=Ue,we=Ue,Ee=kt}if(Ie===z.length)return a(U,Ee),et&&ds(U,Ie),me;if(Ee===null){for(;Ie<z.length;Ie++)Ee=Z(U,z[Ie],te),Ee!==null&&(b=g(Ee,b,Ie),we===null?me=Ee:we.sibling=Ee,we=Ee);return et&&ds(U,Ie),me}for(Ee=c(U,Ee);Ie<z.length;Ie++)kt=ae(Ee,U,Ie,z[Ie],te),kt!==null&&(r&&kt.alternate!==null&&Ee.delete(kt.key===null?Ie:kt.key),b=g(kt,b,Ie),we===null?me=kt:we.sibling=kt,we=kt);return r&&Ee.forEach(function(Ei){return s(U,Ei)}),et&&ds(U,Ie),me}function pe(U,b,z,te){var me=de(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var we=me=null,Ee=b,Ie=b=0,kt=null,Ue=z.next();Ee!==null&&!Ue.done;Ie++,Ue=z.next()){Ee.index>Ie?(kt=Ee,Ee=null):kt=Ee.sibling;var Ei=J(U,Ee,Ue.value,te);if(Ei===null){Ee===null&&(Ee=kt);break}r&&Ee&&Ei.alternate===null&&s(U,Ee),b=g(Ei,b,Ie),we===null?me=Ei:we.sibling=Ei,we=Ei,Ee=kt}if(Ue.done)return a(U,Ee),et&&ds(U,Ie),me;if(Ee===null){for(;!Ue.done;Ie++,Ue=z.next())Ue=Z(U,Ue.value,te),Ue!==null&&(b=g(Ue,b,Ie),we===null?me=Ue:we.sibling=Ue,we=Ue);return et&&ds(U,Ie),me}for(Ee=c(U,Ee);!Ue.done;Ie++,Ue=z.next())Ue=ae(Ee,U,Ie,Ue.value,te),Ue!==null&&(r&&Ue.alternate!==null&&Ee.delete(Ue.key===null?Ie:Ue.key),b=g(Ue,b,Ie),we===null?me=Ue:we.sibling=Ue,we=Ue);return r&&Ee.forEach(function(PT){return s(U,PT)}),et&&ds(U,Ie),me}function ct(U,b,z,te){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:e:{for(var me=z.key,we=b;we!==null;){if(we.key===me){if(me=z.type,me===N){if(we.tag===7){a(U,we.sibling),b=f(we,z.props.children),b.return=U,U=b;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ge&&Lm(me)===we.type){a(U,we.sibling),b=f(we,z.props),b.ref=Ma(U,we,z),b.return=U,U=b;break e}a(U,we);break}else s(U,we);we=we.sibling}z.type===N?(b=ws(z.props.children,U.mode,te,z.key),b.return=U,U=b):(te=Hu(z.type,z.key,z.props,null,U.mode,te),te.ref=Ma(U,b,z),te.return=U,U=te)}return w(U);case he:e:{for(we=z.key;b!==null;){if(b.key===we)if(b.tag===4&&b.stateNode.containerInfo===z.containerInfo&&b.stateNode.implementation===z.implementation){a(U,b.sibling),b=f(b,z.children||[]),b.return=U,U=b;break e}else{a(U,b);break}else s(U,b);b=b.sibling}b=Md(z,U.mode,te),b.return=U,U=b}return w(U);case ge:return we=z._init,ct(U,b,we(z._payload),te)}if(Tr(z))return fe(U,b,z,te);if(de(z))return pe(U,b,z,te);Eu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,b!==null&&b.tag===6?(a(U,b.sibling),b=f(b,z),b.return=U,U=b):(a(U,b),b=Ld(z,U.mode,te),b.return=U,U=b),w(U)):a(U,b)}return ct}var To=Mm(!0),jm=Mm(!1),Tu=ci(null),Iu=null,Io=null,Wh=null;function Gh(){Wh=Io=Iu=null}function Kh(r){var s=Tu.current;Je(Tu),r._currentValue=s}function Qh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function So(r,s){Iu=r,Wh=Io=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function Rn(r){var s=r._currentValue;if(Wh!==r)if(r={context:r,memoizedValue:s,next:null},Io===null){if(Iu===null)throw Error(t(308));Io=r,Iu.dependencies={lanes:0,firstContext:r}}else Io=Io.next=r;return s}var fs=null;function Xh(r){fs===null?fs=[r]:fs.push(r)}function Um(r,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Xh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Vr(r,c)}function Vr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var fi=!1;function Jh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Lr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function pi(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Vr(r,a)}return f=c.interleaved,f===null?(s.next=s,Xh(c)):(s.next=f.next,f.next=s),c.interleaved=s,Vr(r,a)}function Su(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ri(r,a)}}function zm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Au(r,s,a,c){var f=r.updateQueue;fi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var x=R,q=x.next;x.next=null,w===null?g=q:w.next=q,w=x;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==w&&(R===null?Y.firstBaseUpdate=q:R.next=q,Y.lastBaseUpdate=x))}if(g!==null){var Z=f.baseState;w=0,Y=q=x=null,R=g;do{var J=R.lane,ae=R.eventTime;if((c&J)===J){Y!==null&&(Y=Y.next={eventTime:ae,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var fe=r,pe=R;switch(J=s,ae=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){Z=fe.call(ae,Z,J);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,J=typeof fe=="function"?fe.call(ae,Z,J):fe,J==null)break e;Z=se({},Z,J);break e;case 2:fi=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,J=f.effects,J===null?f.effects=[R]:J.push(R))}else ae={eventTime:ae,lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(q=Y=ae,x=Z):Y=Y.next=ae,w|=J;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;J=R,R=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(Y===null&&(x=Z),f.baseState=x,f.firstBaseUpdate=q,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);gs|=w,r.lanes=w,r.memoizedState=Z}}function Bm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ja={},ar=ci(ja),Ua=ci(ja),Fa=ci(ja);function ps(r){if(r===ja)throw Error(t(174));return r}function Yh(r,s){switch(Ke(Fa,s),Ke(Ua,r),Ke(ar,ja),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=wt(s,r)}Je(ar),Ke(ar,s)}function Ao(){Je(ar),Je(Ua),Je(Fa)}function $m(r){ps(Fa.current);var s=ps(ar.current),a=wt(s,r.type);s!==a&&(Ke(Ua,r),Ke(ar,a))}function Zh(r){Ua.current===r&&(Je(ar),Je(Ua))}var rt=ci(0);function Ru(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ed=[];function td(){for(var r=0;r<ed.length;r++)ed[r]._workInProgressVersionPrimary=null;ed.length=0}var Cu=ie.ReactCurrentDispatcher,nd=ie.ReactCurrentBatchConfig,ms=0,it=null,Tt=null,Ct=null,Pu=!1,za=!1,Ba=0,X0=0;function Ut(){throw Error(t(321))}function rd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!$n(r[a],s[a]))return!1;return!0}function id(r,s,a,c,f,g){if(ms=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Cu.current=r===null||r.memoizedState===null?eT:tT,r=a(c,f),za){g=0;do{if(za=!1,Ba=0,25<=g)throw Error(t(301));g+=1,Ct=Tt=null,s.updateQueue=null,Cu.current=nT,r=a(c,f)}while(za)}if(Cu.current=Nu,s=Tt!==null&&Tt.next!==null,ms=0,Ct=Tt=it=null,Pu=!1,s)throw Error(t(300));return r}function sd(){var r=Ba!==0;return Ba=0,r}function lr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Cn(){if(Tt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=Ct===null?it.memoizedState:Ct.next;if(s!==null)Ct=s,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?it.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function $a(r,s){return typeof s=="function"?s(r):s}function od(r){var s=Cn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Tt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var R=w=null,x=null,q=g;do{var Y=q.lane;if((ms&Y)===Y)x!==null&&(x=x.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:r(c,q.action);else{var Z={lane:Y,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};x===null?(R=x=Z,w=c):x=x.next=Z,it.lanes|=Y,gs|=Y}q=q.next}while(q!==null&&q!==g);x===null?w=c:x.next=R,$n(c,s.memoizedState)||(tn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=x,a.lastRenderedState=c}if(r=a.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,gs|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function ad(r){var s=Cn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);$n(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function qm(){}function Hm(r,s){var a=it,c=Cn(),f=s(),g=!$n(c.memoizedState,f);if(g&&(c.memoizedState=f,tn=!0),c=c.queue,ld(Km.bind(null,a,c,r),[r]),c.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,qa(9,Gm.bind(null,a,c,f,s),void 0,null),Pt===null)throw Error(t(349));(ms&30)!==0||Wm(a,s,f)}return f}function Wm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Gm(r,s,a,c){s.value=a,s.getSnapshot=c,Qm(s)&&Xm(r)}function Km(r,s,a){return a(function(){Qm(s)&&Xm(r)})}function Qm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!$n(r,a)}catch{return!0}}function Xm(r){var s=Vr(r,1);s!==null&&Kn(s,r,1,-1)}function Jm(r){var s=lr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},s.queue=r,r=r.dispatch=Z0.bind(null,it,r),[s.memoizedState,r]}function qa(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function Ym(){return Cn().memoizedState}function ku(r,s,a,c){var f=lr();it.flags|=r,f.memoizedState=qa(1|s,a,void 0,c===void 0?null:c)}function xu(r,s,a,c){var f=Cn();c=c===void 0?null:c;var g=void 0;if(Tt!==null){var w=Tt.memoizedState;if(g=w.destroy,c!==null&&rd(c,w.deps)){f.memoizedState=qa(s,a,g,c);return}}it.flags|=r,f.memoizedState=qa(1|s,a,g,c)}function Zm(r,s){return ku(8390656,8,r,s)}function ld(r,s){return xu(2048,8,r,s)}function eg(r,s){return xu(4,2,r,s)}function tg(r,s){return xu(4,4,r,s)}function ng(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function rg(r,s,a){return a=a!=null?a.concat([r]):null,xu(4,4,ng.bind(null,s,r),a)}function ud(){}function ig(r,s){var a=Cn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&rd(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function sg(r,s){var a=Cn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&rd(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function og(r,s,a){return(ms&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=a):($n(a,s)||(a=is(),it.lanes|=a,gs|=a,r.baseState=!0),s)}function J0(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var c=nd.transition;nd.transition={};try{r(!1),s()}finally{Oe=a,nd.transition=c}}function ag(){return Cn().memoizedState}function Y0(r,s,a){var c=vi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},lg(r))ug(s,a);else if(a=Um(r,s,a,c),a!==null){var f=Qt();Kn(a,r,c,f),cg(a,s,c)}}function Z0(r,s,a){var c=vi(r),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(lg(r))ug(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,R=g(w,a);if(f.hasEagerState=!0,f.eagerState=R,$n(R,w)){var x=s.interleaved;x===null?(f.next=f,Xh(s)):(f.next=x.next,x.next=f),s.interleaved=f;return}}catch{}finally{}a=Um(r,s,f,c),a!==null&&(f=Qt(),Kn(a,r,c,f),cg(a,s,c))}}function lg(r){var s=r.alternate;return r===it||s!==null&&s===it}function ug(r,s){za=Pu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function cg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ri(r,a)}}var Nu={readContext:Rn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},eT={readContext:Rn,useCallback:function(r,s){return lr().memoizedState=[r,s===void 0?null:s],r},useContext:Rn,useEffect:Zm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,ku(4194308,4,ng.bind(null,s,r),a)},useLayoutEffect:function(r,s){return ku(4194308,4,r,s)},useInsertionEffect:function(r,s){return ku(4,2,r,s)},useMemo:function(r,s){var a=lr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=lr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=Y0.bind(null,it,r),[c.memoizedState,r]},useRef:function(r){var s=lr();return r={current:r},s.memoizedState=r},useState:Jm,useDebugValue:ud,useDeferredValue:function(r){return lr().memoizedState=r},useTransition:function(){var r=Jm(!1),s=r[0];return r=J0.bind(null,r[1]),lr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=it,f=lr();if(et){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Pt===null)throw Error(t(349));(ms&30)!==0||Wm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Zm(Km.bind(null,c,g,r),[r]),c.flags|=2048,qa(9,Gm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var r=lr(),s=Pt.identifierPrefix;if(et){var a=Or,c=br;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ba++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=X0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},tT={readContext:Rn,useCallback:ig,useContext:Rn,useEffect:ld,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:od,useRef:Ym,useState:function(){return od($a)},useDebugValue:ud,useDeferredValue:function(r){var s=Cn();return og(s,Tt.memoizedState,r)},useTransition:function(){var r=od($a)[0],s=Cn().memoizedState;return[r,s]},useMutableSource:qm,useSyncExternalStore:Hm,useId:ag,unstable_isNewReconciler:!1},nT={readContext:Rn,useCallback:ig,useContext:Rn,useEffect:ld,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:ad,useRef:Ym,useState:function(){return ad($a)},useDebugValue:ud,useDeferredValue:function(r){var s=Cn();return Tt===null?s.memoizedState=r:og(s,Tt.memoizedState,r)},useTransition:function(){var r=ad($a)[0],s=Cn().memoizedState;return[r,s]},useMutableSource:qm,useSyncExternalStore:Hm,useId:ag,unstable_isNewReconciler:!1};function Hn(r,s){if(r&&r.defaultProps){s=se({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function cd(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:se({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Du={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Qt(),f=vi(r),g=Lr(c,f);g.payload=s,a!=null&&(g.callback=a),s=pi(r,g,f),s!==null&&(Kn(s,r,f,c),Su(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Qt(),f=vi(r),g=Lr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=pi(r,g,f),s!==null&&(Kn(s,r,f,c),Su(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Qt(),c=vi(r),f=Lr(a,c);f.tag=2,s!=null&&(f.callback=s),s=pi(r,f,c),s!==null&&(Kn(s,r,c,a),Su(s,r,c))}};function hg(r,s,a,c,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!xa(a,c)||!xa(f,g):!0}function dg(r,s,a){var c=!1,f=hi,g=s.contextType;return typeof g=="object"&&g!==null?g=Rn(g):(f=en(s)?cs:jt.current,c=s.contextTypes,g=(c=c!=null)?vo(r,f):hi),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Du,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function fg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Du.enqueueReplaceState(s,s.state,null)}function hd(r,s,a,c){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Jh(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Rn(g):(g=en(s)?cs:jt.current,f.context=vo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(cd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Du.enqueueReplaceState(f,f.state,null),Au(r,a,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Ro(r,s){try{var a="",c=s;do a+=xe(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function dd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function fd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var rT=typeof WeakMap=="function"?WeakMap:Map;function pg(r,s,a){a=Lr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Uu||(Uu=!0,Pd=c),fd(r,s)},a}function mg(r,s,a){a=Lr(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){fd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){fd(r,s),typeof c!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function gg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new rT;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),r=yT.bind(null,r,s,a),s.then(r,r))}function yg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function vg(r,s,a,c,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Lr(-1,1),s.tag=2,pi(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var iT=ie.ReactCurrentOwner,tn=!1;function Kt(r,s,a,c){s.child=r===null?jm(s,null,a,c):To(s,r.child,a,c)}function _g(r,s,a,c,f){a=a.render;var g=s.ref;return So(s,f),c=id(r,s,a,c,g,f),a=sd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Mr(r,s,f)):(et&&a&&zh(s),s.flags|=1,Kt(r,s,c,f),s.child)}function wg(r,s,a,c,f){if(r===null){var g=a.type;return typeof g=="function"&&!Vd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Eg(r,s,g,c,f)):(r=Hu(a.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(w,c)&&r.ref===s.ref)return Mr(r,s,f)}return s.flags|=1,r=wi(g,c),r.ref=s.ref,r.return=s,s.child=r}function Eg(r,s,a,c,f){if(r!==null){var g=r.memoizedProps;if(xa(g,c)&&r.ref===s.ref)if(tn=!1,s.pendingProps=c=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,Mr(r,s,f)}return pd(r,s,a,c,f)}function Tg(r,s,a){var c=s.pendingProps,f=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Po,yn),yn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ke(Po,yn),yn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ke(Po,yn),yn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Ke(Po,yn),yn|=c;return Kt(r,s,f,a),s.child}function Ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function pd(r,s,a,c,f){var g=en(a)?cs:jt.current;return g=vo(s,g),So(s,f),a=id(r,s,a,c,g,f),c=sd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Mr(r,s,f)):(et&&c&&zh(s),s.flags|=1,Kt(r,s,a,f),s.child)}function Sg(r,s,a,c,f){if(en(a)){var g=!0;gu(s)}else g=!1;if(So(s,f),s.stateNode===null)Ou(r,s),dg(s,a,c),hd(s,a,c,f),c=!0;else if(r===null){var w=s.stateNode,R=s.memoizedProps;w.props=R;var x=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=Rn(q):(q=en(a)?cs:jt.current,q=vo(s,q));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||x!==q)&&fg(s,w,c,q),fi=!1;var J=s.memoizedState;w.state=J,Au(s,c,w,f),x=s.memoizedState,R!==c||J!==x||Zt.current||fi?(typeof Y=="function"&&(cd(s,a,Y,c),x=s.memoizedState),(R=fi||hg(s,a,R,c,J,x,q))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=x),w.props=c,w.state=x,w.context=q,c=R):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Fm(r,s),R=s.memoizedProps,q=s.type===s.elementType?R:Hn(s.type,R),w.props=q,Z=s.pendingProps,J=w.context,x=a.contextType,typeof x=="object"&&x!==null?x=Rn(x):(x=en(a)?cs:jt.current,x=vo(s,x));var ae=a.getDerivedStateFromProps;(Y=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==Z||J!==x)&&fg(s,w,c,x),fi=!1,J=s.memoizedState,w.state=J,Au(s,c,w,f);var fe=s.memoizedState;R!==Z||J!==fe||Zt.current||fi?(typeof ae=="function"&&(cd(s,a,ae,c),fe=s.memoizedState),(q=fi||hg(s,a,q,c,J,fe,x)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,x),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,x)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=x,c=q):(typeof w.componentDidUpdate!="function"||R===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),c=!1)}return md(r,s,a,c,g,f)}function md(r,s,a,c,f,g){Ig(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&km(s,a,!1),Mr(r,s,g);c=s.stateNode,iT.current=s;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=To(s,r.child,null,g),s.child=To(s,null,R,g)):Kt(r,s,R,g),s.memoizedState=c.state,f&&km(s,a,!0),s.child}function Ag(r){var s=r.stateNode;s.pendingContext?Cm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Cm(r,s.context,!1),Yh(r,s.containerInfo)}function Rg(r,s,a,c,f){return Eo(),Hh(f),s.flags|=256,Kt(r,s,a,c),s.child}var gd={dehydrated:null,treeContext:null,retryLane:0};function yd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Cg(r,s,a){var c=s.pendingProps,f=rt.current,g=!1,w=(s.flags&128)!==0,R;if((R=w)||(R=r!==null&&r.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ke(rt,f&1),r===null)return qh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Wu(w,c,0,null),r=ws(r,c,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=yd(a),s.memoizedState=gd,r):vd(s,w));if(f=r.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return sT(r,s,w,c,R,f,a);if(g){g=c.fallback,w=s.mode,f=r.child,R=f.sibling;var x={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=x,s.deletions=null):(c=wi(f,x),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=wi(R,g):(g=ws(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=r.child.memoizedState,w=w===null?yd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=gd,c}return g=r.child,r=g.sibling,c=wi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function vd(r,s){return s=Wu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function bu(r,s,a,c){return c!==null&&Hh(c),To(s,r.child,null,a),r=vd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function sT(r,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=dd(Error(t(422))),bu(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Wu({mode:"visible",children:c.children},f,0,null),g=ws(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&To(s,r.child,null,w),s.child.memoizedState=yd(w),s.memoizedState=gd,g);if((s.mode&1)===0)return bu(r,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=dd(g,c,void 0),bu(r,s,w,c)}if(R=(w&r.childLanes)!==0,tn||R){if(c=Pt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Vr(r,f),Kn(c,r,f,-1))}return Od(),c=dd(Error(t(421))),bu(r,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=vT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,gn=ui(f.nextSibling),mn=s,et=!0,qn=null,r!==null&&(Sn[An++]=br,Sn[An++]=Or,Sn[An++]=hs,br=r.id,Or=r.overflow,hs=s),s=vd(s,c.children),s.flags|=4096,s)}function Pg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Qh(r.return,s,a)}function _d(r,s,a,c,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function kg(r,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(Kt(r,s,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Pg(r,a,s);else if(r.tag===19)Pg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Ke(rt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Ru(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),_d(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Ru(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}_d(s,!0,a,null,g);break;case"together":_d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ou(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Mr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),gs|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=wi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=wi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function oT(r,s,a){switch(s.tag){case 3:Ag(s),Eo();break;case 5:$m(s);break;case 1:en(s.type)&&gu(s);break;case 4:Yh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Ke(Tu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ke(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Cg(r,s,a):(Ke(rt,rt.current&1),r=Mr(r,s,a),r!==null?r.sibling:null);Ke(rt,rt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return kg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ke(rt,rt.current),c)break;return null;case 22:case 23:return s.lanes=0,Tg(r,s,a)}return Mr(r,s,a)}var xg,wd,Ng,Dg;xg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wd=function(){},Ng=function(r,s,a,c){var f=r.memoizedProps;if(f!==c){r=s.stateNode,ps(ar.current);var g=null;switch(a){case"input":f=Gi(r,f),c=Gi(r,c),g=[];break;case"select":f=se({},f,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":f=sa(r,f),c=sa(r,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=fu)}ha(a,c);var w;a=null;for(q in f)if(!c.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var R=f[q];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in c){var x=c[q];if(R=f!=null?f[q]:void 0,c.hasOwnProperty(q)&&x!==R&&(x!=null||R!=null))if(q==="style")if(R){for(w in R)!R.hasOwnProperty(w)||x&&x.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in x)x.hasOwnProperty(w)&&R[w]!==x[w]&&(a||(a={}),a[w]=x[w])}else a||(g||(g=[]),g.push(q,a)),a=x;else q==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,R=R?R.__html:void 0,x!=null&&R!==x&&(g=g||[]).push(q,x)):q==="children"?typeof x!="string"&&typeof x!="number"||(g=g||[]).push(q,""+x):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(x!=null&&q==="onScroll"&&Xe("scroll",r),g||R===x||(g=[])):(g=g||[]).push(q,x))}a&&(g=g||[]).push("style",a);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},Dg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Ha(r,s){if(!et)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function aT(r,s,a){var c=s.pendingProps;switch(Bh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return en(s.type)&&mu(),Ft(s),null;case 3:return c=s.stateNode,Ao(),Je(Zt),Je(jt),td(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(wu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qn!==null&&(Nd(qn),qn=null))),wd(r,s),Ft(s),null;case 5:Zh(s);var f=ps(Fa.current);if(a=s.type,r!==null&&s.stateNode!=null)Ng(r,s,a,c,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(r=ps(ar.current),wu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[or]=s,c[Va]=g,r=(s.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(f=0;f<Da.length;f++)Xe(Da[f],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Us(c,g),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",c);break;case"textarea":zs(c,g),Xe("invalid",c)}ha(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var R=g[w];w==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&du(c.textContent,R,r),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&du(c.textContent,R,r),f=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&Xe("scroll",c)}switch(a){case"input":Er(c),jl(c,g,!0);break;case"textarea":Er(c),oa(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=fu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[or]=s,r[Va]=c,xg(r,s,!1,!1),s.stateNode=r;e:{switch(w=da(a,c),a){case"dialog":Xe("cancel",r),Xe("close",r),f=c;break;case"iframe":case"object":case"embed":Xe("load",r),f=c;break;case"video":case"audio":for(f=0;f<Da.length;f++)Xe(Da[f],r);f=c;break;case"source":Xe("error",r),f=c;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),f=c;break;case"details":Xe("toggle",r),f=c;break;case"input":Us(r,c),f=Gi(r,c),Xe("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=se({},c,{value:void 0}),Xe("invalid",r);break;case"textarea":zs(r,c),f=sa(r,c),Xe("invalid",r);break;default:f=c}ha(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var x=R[g];g==="style"?ua(r,x):g==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&aa(r,x)):g==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Yr(r,x):typeof x=="number"&&Yr(r,""+x):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?x!=null&&g==="onScroll"&&Xe("scroll",r):x!=null&&ne(r,g,x,w))}switch(a){case"input":Er(r),jl(r,c,!1);break;case"textarea":Er(r),oa(r);break;case"option":c.value!=null&&r.setAttribute("value",""+ze(c.value));break;case"select":r.multiple=!!c.multiple,g=c.value,g!=null?Ir(r,!!c.multiple,g,!1):c.defaultValue!=null&&Ir(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=fu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(r&&s.stateNode!=null)Dg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ps(Fa.current),ps(ar.current),wu(s)){if(c=s.stateNode,a=s.memoizedProps,c[or]=s,(g=c.nodeValue!==a)&&(r=mn,r!==null))switch(r.tag){case 3:du(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&du(c.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[or]=s,s.stateNode=c}return Ft(s),null;case 13:if(Je(rt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(et&&gn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Vm(),Eo(),s.flags|=98560,g=!1;else if(g=wu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[or]=s}else Eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),g=!1}else qn!==null&&(Nd(qn),qn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?It===0&&(It=3):Od())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return Ao(),wd(r,s),r===null&&ba(s.stateNode.containerInfo),Ft(s),null;case 10:return Kh(s.type._context),Ft(s),null;case 17:return en(s.type)&&mu(),Ft(s),null;case 19:if(Je(rt),g=s.memoizedState,g===null)return Ft(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Ha(g,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Ru(r),w!==null){for(s.flags|=128,Ha(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,r=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ke(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ge()>ko&&(s.flags|=128,c=!0,Ha(g,!1),s.lanes=4194304)}else{if(!c)if(r=Ru(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ha(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!et)return Ft(s),null}else 2*Ge()-g.renderingStartTime>ko&&a!==1073741824&&(s.flags|=128,c=!0,Ha(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ge(),s.sibling=null,a=rt.current,Ke(rt,c?a&1|2:a&1),s):(Ft(s),null);case 22:case 23:return bd(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(yn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function lT(r,s){switch(Bh(s),s.tag){case 1:return en(s.type)&&mu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ao(),Je(Zt),Je(jt),td(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Zh(s),null;case 13:if(Je(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Je(rt),null;case 4:return Ao(),null;case 10:return Kh(s.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var Vu=!1,zt=!1,uT=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Co(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(r,s,c)}else a.current=null}function Ed(r,s,a){try{a()}catch(c){ot(r,s,c)}}var bg=!1;function cT(r,s){if(bh=oi,r=hm(),Ah(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,R=-1,x=-1,q=0,Y=0,Z=r,J=null;t:for(;;){for(var ae;Z!==a||f!==0&&Z.nodeType!==3||(R=w+f),Z!==g||c!==0&&Z.nodeType!==3||(x=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(ae=Z.firstChild)!==null;)J=Z,Z=ae;for(;;){if(Z===r)break t;if(J===a&&++q===f&&(R=w),J===g&&++Y===c&&(x=w),(ae=Z.nextSibling)!==null)break;Z=J,J=Z.parentNode}Z=ae}a=R===-1||x===-1?null:{start:R,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Oh={focusedElem:r,selectionRange:a},oi=!1,ue=s;ue!==null;)if(s=ue,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ue=r;else for(;ue!==null;){s=ue;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ct=fe.memoizedState,U=s.stateNode,b=U.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Hn(s.type,pe),ct);U.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ot(s,s.return,te)}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}return fe=bg,bg=!1,fe}function Wa(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Ed(s,a,g)}f=f.next}while(f!==c)}}function Lu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Td(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Og(r){var s=r.alternate;s!==null&&(r.alternate=null,Og(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[or],delete s[Va],delete s[jh],delete s[W0],delete s[G0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Vg(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Id(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=fu));else if(c!==4&&(r=r.child,r!==null))for(Id(r,s,a),r=r.sibling;r!==null;)Id(r,s,a),r=r.sibling}function Sd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Sd(r,s,a),r=r.sibling;r!==null;)Sd(r,s,a),r=r.sibling}var bt=null,Wn=!1;function mi(r,s,a){for(a=a.child;a!==null;)Mg(r,s,a),a=a.sibling}function Mg(r,s,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ns,a)}catch{}switch(a.tag){case 5:zt||Co(a,s);case 6:var c=bt,f=Wn;bt=null,mi(r,s,a),bt=c,Wn=f,bt!==null&&(Wn?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Wn?(r=bt,a=a.stateNode,r.nodeType===8?Mh(r.parentNode,a):r.nodeType===1&&Mh(r,a),zn(r)):Mh(bt,a.stateNode));break;case 4:c=bt,f=Wn,bt=a.stateNode.containerInfo,Wn=!0,mi(r,s,a),bt=c,Wn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Ed(a,s,w),f=f.next}while(f!==c)}mi(r,s,a);break;case 1:if(!zt&&(Co(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){ot(a,s,R)}mi(r,s,a);break;case 21:mi(r,s,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,mi(r,s,a),zt=c):mi(r,s,a);break;default:mi(r,s,a)}}function jg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new uT),s.forEach(function(c){var f=_T.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Gn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=r,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 5:bt=R.stateNode,Wn=!1;break e;case 3:bt=R.stateNode.containerInfo,Wn=!0;break e;case 4:bt=R.stateNode.containerInfo,Wn=!0;break e}R=R.return}if(bt===null)throw Error(t(160));Mg(g,w,f),bt=null,Wn=!1;var x=f.alternate;x!==null&&(x.return=null),f.return=null}catch(q){ot(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ug(s,r),s=s.sibling}function Ug(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Gn(s,r),ur(r),c&4){try{Wa(3,r,r.return),Lu(3,r)}catch(pe){ot(r,r.return,pe)}try{Wa(5,r,r.return)}catch(pe){ot(r,r.return,pe)}}break;case 1:Gn(s,r),ur(r),c&512&&a!==null&&Co(a,a.return);break;case 5:if(Gn(s,r),ur(r),c&512&&a!==null&&Co(a,a.return),r.flags&32){var f=r.stateNode;try{Yr(f,"")}catch(pe){ot(r,r.return,pe)}}if(c&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,R=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&ra(f,g),da(R,w);var q=da(R,g);for(w=0;w<x.length;w+=2){var Y=x[w],Z=x[w+1];Y==="style"?ua(f,Z):Y==="dangerouslySetInnerHTML"?aa(f,Z):Y==="children"?Yr(f,Z):ne(f,Y,Z,q)}switch(R){case"input":ia(f,g);break;case"textarea":Bs(f,g);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ae=g.value;ae!=null?Ir(f,!!g.multiple,ae,!1):J!==!!g.multiple&&(g.defaultValue!=null?Ir(f,!!g.multiple,g.defaultValue,!0):Ir(f,!!g.multiple,g.multiple?[]:"",!1))}f[Va]=g}catch(pe){ot(r,r.return,pe)}}break;case 6:if(Gn(s,r),ur(r),c&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(pe){ot(r,r.return,pe)}}break;case 3:if(Gn(s,r),ur(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{zn(s.containerInfo)}catch(pe){ot(r,r.return,pe)}break;case 4:Gn(s,r),ur(r);break;case 13:Gn(s,r),ur(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Cd=Ge())),c&4&&jg(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(zt=(q=zt)||Y,Gn(s,r),zt=q):Gn(s,r),ur(r),c&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!Y&&(r.mode&1)!==0)for(ue=r,Y=r.child;Y!==null;){for(Z=ue=Y;ue!==null;){switch(J=ue,ae=J.child,J.tag){case 0:case 11:case 14:case 15:Wa(4,J,J.return);break;case 1:Co(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){ot(c,a,pe)}}break;case 5:Co(J,J.return);break;case 22:if(J.memoizedState!==null){Bg(Z);continue}}ae!==null?(ae.return=J,ue=ae):Bg(Z)}Y=Y.sibling}e:for(Y=null,Z=r;;){if(Z.tag===5){if(Y===null){Y=Z;try{f=Z.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=Z.stateNode,x=Z.memoizedProps.style,w=x!=null&&x.hasOwnProperty("display")?x.display:null,R.style.display=la("display",w))}catch(pe){ot(r,r.return,pe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(pe){ot(r,r.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Gn(s,r),ur(r),c&4&&jg(r);break;case 21:break;default:Gn(s,r),ur(r)}}function ur(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Vg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Yr(f,""),c.flags&=-33);var g=Lg(r);Sd(r,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,R=Lg(r);Id(r,R,w);break;default:throw Error(t(161))}}catch(x){ot(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function hT(r,s,a){ue=r,Fg(r)}function Fg(r,s,a){for(var c=(r.mode&1)!==0;ue!==null;){var f=ue,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Vu;if(!w){var R=f.alternate,x=R!==null&&R.memoizedState!==null||zt;R=Vu;var q=zt;if(Vu=w,(zt=x)&&!q)for(ue=f;ue!==null;)w=ue,x=w.child,w.tag===22&&w.memoizedState!==null?$g(f):x!==null?(x.return=w,ue=x):$g(f);for(;g!==null;)ue=g,Fg(g),g=g.sibling;ue=f,Vu=R,zt=q}zg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ue=g):zg(r)}}function zg(r){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||Lu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Hn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Bm(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Bm(s,w,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Y=q.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&zn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&Td(s)}catch(J){ot(s,s.return,J)}}if(s===r){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Bg(r){for(;ue!==null;){var s=ue;if(s===r){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function $g(r){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Lu(4,s)}catch(x){ot(s,a,x)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(x){ot(s,f,x)}}var g=s.return;try{Td(s)}catch(x){ot(s,g,x)}break;case 5:var w=s.return;try{Td(s)}catch(x){ot(s,w,x)}}}catch(x){ot(s,s.return,x)}if(s===r){ue=null;break}var R=s.sibling;if(R!==null){R.return=s.return,ue=R;break}ue=s.return}}var dT=Math.ceil,Mu=ie.ReactCurrentDispatcher,Ad=ie.ReactCurrentOwner,Pn=ie.ReactCurrentBatchConfig,je=0,Pt=null,mt=null,Ot=0,yn=0,Po=ci(0),It=0,Ga=null,gs=0,ju=0,Rd=0,Ka=null,nn=null,Cd=0,ko=1/0,jr=null,Uu=!1,Pd=null,gi=null,Fu=!1,yi=null,zu=0,Qa=0,kd=null,Bu=-1,$u=0;function Qt(){return(je&6)!==0?Ge():Bu!==-1?Bu:Bu=Ge()}function vi(r){return(r.mode&1)===0?1:(je&2)!==0&&Ot!==0?Ot&-Ot:Q0.transition!==null?($u===0&&($u=is()),$u):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:Ia(r.type)),r)}function Kn(r,s,a,c){if(50<Qa)throw Qa=0,kd=null,Error(t(185));ni(r,a,c),((je&2)===0||r!==Pt)&&(r===Pt&&((je&2)===0&&(ju|=a),It===4&&_i(r,Ot)),rn(r,c),a===1&&je===0&&(s.mode&1)===0&&(ko=Ge()+500,yu&&di()))}function rn(r,s){var a=r.callbackNode;Rr(r,s);var c=rs(r,r===Pt?Ot:0);if(c===0)a!==null&&va(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&va(a),s===1)r.tag===0?K0(Hg.bind(null,r)):xm(Hg.bind(null,r)),q0(function(){(je&6)===0&&di()}),a=null;else{switch(ii(c)){case 1:a=ts;break;case 4:a=Zr;break;case 16:a=En;break;case 536870912:a=$l;break;default:a=En}a=Zg(a,qg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function qg(r,s){if(Bu=-1,$u=0,(je&6)!==0)throw Error(t(327));var a=r.callbackNode;if(xo()&&r.callbackNode!==a)return null;var c=rs(r,r===Pt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=qu(r,c);else{s=c;var f=je;je|=2;var g=Gg();(Pt!==r||Ot!==s)&&(jr=null,ko=Ge()+500,vs(r,s));do try{mT();break}catch(R){Wg(r,R)}while(!0);Gh(),Mu.current=g,je=f,mt!==null?s=0:(Pt=null,Ot=0,s=It)}if(s!==0){if(s===2&&(f=dn(r),f!==0&&(c=f,s=xd(r,f))),s===1)throw a=Ga,vs(r,0),_i(r,c),rn(r,Ge()),a;if(s===6)_i(r,c);else{if(f=r.current.alternate,(c&30)===0&&!fT(f)&&(s=qu(r,c),s===2&&(g=dn(r),g!==0&&(c=g,s=xd(r,g))),s===1))throw a=Ga,vs(r,0),_i(r,c),rn(r,Ge()),a;switch(r.finishedWork=f,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:_s(r,nn,jr);break;case 3:if(_i(r,c),(c&130023424)===c&&(s=Cd+500-Ge(),10<s)){if(rs(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){Qt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Lh(_s.bind(null,r,nn,jr),s);break}_s(r,nn,jr);break;case 4:if(_i(r,c),(c&4194240)===c)break;for(s=r.eventTimes,f=-1;0<c;){var w=31-Wt(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*dT(c/1960))-c,10<c){r.timeoutHandle=Lh(_s.bind(null,r,nn,jr),c);break}_s(r,nn,jr);break;case 5:_s(r,nn,jr);break;default:throw Error(t(329))}}}return rn(r,Ge()),r.callbackNode===a?qg.bind(null,r):null}function xd(r,s){var a=Ka;return r.current.memoizedState.isDehydrated&&(vs(r,s).flags|=256),r=qu(r,s),r!==2&&(s=nn,nn=a,s!==null&&Nd(s)),r}function Nd(r){nn===null?nn=r:nn.push.apply(nn,r)}function fT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!$n(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _i(r,s){for(s&=~Rd,s&=~ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Wt(s),c=1<<a;r[a]=-1,s&=~c}}function Hg(r){if((je&6)!==0)throw Error(t(327));xo();var s=rs(r,0);if((s&1)===0)return rn(r,Ge()),null;var a=qu(r,s);if(r.tag!==0&&a===2){var c=dn(r);c!==0&&(s=c,a=xd(r,c))}if(a===1)throw a=Ga,vs(r,0),_i(r,s),rn(r,Ge()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,_s(r,nn,jr),rn(r,Ge()),null}function Dd(r,s){var a=je;je|=1;try{return r(s)}finally{je=a,je===0&&(ko=Ge()+500,yu&&di())}}function ys(r){yi!==null&&yi.tag===0&&(je&6)===0&&xo();var s=je;je|=1;var a=Pn.transition,c=Oe;try{if(Pn.transition=null,Oe=1,r)return r()}finally{Oe=c,Pn.transition=a,je=s,(je&6)===0&&di()}}function bd(){yn=Po.current,Je(Po)}function vs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,$0(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Bh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&mu();break;case 3:Ao(),Je(Zt),Je(jt),td();break;case 5:Zh(c);break;case 4:Ao();break;case 13:Je(rt);break;case 19:Je(rt);break;case 10:Kh(c.type._context);break;case 22:case 23:bd()}a=a.return}if(Pt=r,mt=r=wi(r.current,null),Ot=yn=s,It=0,Ga=null,Rd=ju=gs=0,nn=Ka=null,fs!==null){for(s=0;s<fs.length;s++)if(a=fs[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}fs=null}return r}function Wg(r,s){do{var a=mt;try{if(Gh(),Cu.current=Nu,Pu){for(var c=it.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Pu=!1}if(ms=0,Ct=Tt=it=null,za=!1,Ba=0,Ad.current=null,a===null||a.return===null){It=1,Ga=s,mt=null;break}e:{var g=r,w=a.return,R=a,x=s;if(s=Ot,R.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var q=x,Y=R,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ae=yg(w);if(ae!==null){ae.flags&=-257,vg(ae,w,R,g,s),ae.mode&1&&gg(g,q,s),s=ae,x=q;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(x),s.updateQueue=pe}else fe.add(x);break e}else{if((s&1)===0){gg(g,q,s),Od();break e}x=Error(t(426))}}else if(et&&R.mode&1){var ct=yg(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),vg(ct,w,R,g,s),Hh(Ro(x,R));break e}}g=x=Ro(x,R),It!==4&&(It=2),Ka===null?Ka=[g]:Ka.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=pg(g,x,s);zm(g,U);break e;case 1:R=x;var b=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(gi===null||!gi.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var te=mg(g,R,s);zm(g,te);break e}}g=g.return}while(g!==null)}Qg(a)}catch(me){s=me,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Gg(){var r=Mu.current;return Mu.current=Nu,r===null?Nu:r}function Od(){(It===0||It===3||It===2)&&(It=4),Pt===null||(gs&268435455)===0&&(ju&268435455)===0||_i(Pt,Ot)}function qu(r,s){var a=je;je|=2;var c=Gg();(Pt!==r||Ot!==s)&&(jr=null,vs(r,s));do try{pT();break}catch(f){Wg(r,f)}while(!0);if(Gh(),je=a,Mu.current=c,mt!==null)throw Error(t(261));return Pt=null,Ot=0,It}function pT(){for(;mt!==null;)Kg(mt)}function mT(){for(;mt!==null&&!zl();)Kg(mt)}function Kg(r){var s=Yg(r.alternate,r,yn);r.memoizedProps=r.pendingProps,s===null?Qg(r):mt=s,Ad.current=null}function Qg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=aT(a,s,yn),a!==null){mt=a;return}}else{if(a=lT(a,s),a!==null){a.flags&=32767,mt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);It===0&&(It=5)}function _s(r,s,a){var c=Oe,f=Pn.transition;try{Pn.transition=null,Oe=1,gT(r,s,a,c)}finally{Pn.transition=f,Oe=c}return null}function gT(r,s,a,c){do xo();while(yi!==null);if((je&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(qe(r,g),r===Pt&&(mt=Pt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Fu||(Fu=!0,Zg(En,function(){return xo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Pn.transition,Pn.transition=null;var w=Oe;Oe=1;var R=je;je|=4,Ad.current=null,cT(r,a),Ug(a,r),L0(Oh),oi=!!bh,Oh=bh=null,r.current=a,hT(a),yh(),je=R,Oe=w,Pn.transition=g}else r.current=a;if(Fu&&(Fu=!1,yi=r,zu=f),g=r.pendingLanes,g===0&&(gi=null),ql(a.stateNode),rn(r,Ge()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Uu)throw Uu=!1,r=Pd,Pd=null,r;return(zu&1)!==0&&r.tag!==0&&xo(),g=r.pendingLanes,(g&1)!==0?r===kd?Qa++:(Qa=0,kd=r):Qa=0,di(),null}function xo(){if(yi!==null){var r=ii(zu),s=Pn.transition,a=Oe;try{if(Pn.transition=null,Oe=16>r?16:r,yi===null)var c=!1;else{if(r=yi,yi=null,zu=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,ue=r.current;ue!==null;){var g=ue,w=g.child;if((ue.flags&16)!==0){var R=g.deletions;if(R!==null){for(var x=0;x<R.length;x++){var q=R[x];for(ue=q;ue!==null;){var Y=ue;switch(Y.tag){case 0:case 11:case 15:Wa(8,Y,g)}var Z=Y.child;if(Z!==null)Z.return=Y,ue=Z;else for(;ue!==null;){Y=ue;var J=Y.sibling,ae=Y.return;if(Og(Y),Y===q){ue=null;break}if(J!==null){J.return=ae,ue=J;break}ue=ae}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ct=pe.sibling;pe.sibling=null,pe=ct}while(pe!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ue=w;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Wa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ue=U;break e}ue=g.return}}var b=r.current;for(ue=b;ue!==null;){w=ue;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ue=z;else e:for(w=b;ue!==null;){if(R=ue,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Lu(9,R)}}catch(me){ot(R,R.return,me)}if(R===w){ue=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,ue=te;break e}ue=R.return}}if(je=f,di(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ns,r)}catch{}c=!0}return c}finally{Oe=a,Pn.transition=s}}return!1}function Xg(r,s,a){s=Ro(a,s),s=pg(r,s,1),r=pi(r,s,1),s=Qt(),r!==null&&(ni(r,1,s),rn(r,s))}function ot(r,s,a){if(r.tag===3)Xg(r,r,a);else for(;s!==null;){if(s.tag===3){Xg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gi===null||!gi.has(c))){r=Ro(a,r),r=mg(s,r,1),s=pi(s,r,1),r=Qt(),s!==null&&(ni(s,1,r),rn(s,r));break}}s=s.return}}function yT(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&a,Pt===r&&(Ot&a)===a&&(It===4||It===3&&(Ot&130023424)===Ot&&500>Ge()-Cd?vs(r,0):Rd|=a),rn(r,s)}function Jg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ys,Ys<<=1,(Ys&130023424)===0&&(Ys=4194304)));var a=Qt();r=Vr(r,s),r!==null&&(ni(r,s,a),rn(r,a))}function vT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Jg(r,a)}function _T(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Jg(r,a)}var Yg;Yg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return tn=!1,oT(r,s,a);tn=(r.flags&131072)!==0}else tn=!1,et&&(s.flags&1048576)!==0&&Nm(s,_u,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ou(r,s),r=s.pendingProps;var f=vo(s,jt.current);So(s,a),f=id(null,s,c,r,f,a);var g=sd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(c)?(g=!0,gu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Jh(s),f.updater=Du,s.stateNode=f,f._reactInternals=s,hd(s,c,r,a),s=md(null,s,c,!0,g,a)):(s.tag=0,et&&g&&zh(s),Kt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Ou(r,s),r=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=ET(c),r=Hn(c,r),f){case 0:s=pd(null,s,c,r,a);break e;case 1:s=Sg(null,s,c,r,a);break e;case 11:s=_g(null,s,c,r,a);break e;case 14:s=wg(null,s,c,Hn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),pd(r,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),Sg(r,s,c,f,a);case 3:e:{if(Ag(s),r===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,Fm(r,s),Au(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Ro(Error(t(423)),s),s=Rg(r,s,c,a,f);break e}else if(c!==f){f=Ro(Error(t(424)),s),s=Rg(r,s,c,a,f);break e}else for(gn=ui(s.stateNode.containerInfo.firstChild),mn=s,et=!0,qn=null,a=jm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Eo(),c===f){s=Mr(r,s,a);break e}Kt(r,s,c,a)}s=s.child}return s;case 5:return $m(s),r===null&&qh(s),c=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Vh(c,f)?w=null:g!==null&&Vh(c,g)&&(s.flags|=32),Ig(r,s),Kt(r,s,w,a),s.child;case 6:return r===null&&qh(s),null;case 13:return Cg(r,s,a);case 4:return Yh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=To(s,null,c,a):Kt(r,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),_g(r,s,c,f,a);case 7:return Kt(r,s,s.pendingProps,a),s.child;case 8:return Kt(r,s,s.pendingProps.children,a),s.child;case 12:return Kt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ke(Tu,c._currentValue),c._currentValue=w,g!==null)if($n(g.value,w)){if(g.children===f.children&&!Zt.current){s=Mr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){w=g.child;for(var x=R.firstContext;x!==null;){if(x.context===c){if(g.tag===1){x=Lr(-1,a&-a),x.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var Y=q.pending;Y===null?x.next=x:(x.next=Y.next,Y.next=x),q.pending=x}}g.lanes|=a,x=g.alternate,x!==null&&(x.lanes|=a),Qh(g.return,a,s),R.lanes|=a;break}x=x.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),Qh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Kt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,So(s,a),f=Rn(f),c=c(f),s.flags|=1,Kt(r,s,c,a),s.child;case 14:return c=s.type,f=Hn(c,s.pendingProps),f=Hn(c.type,f),wg(r,s,c,f,a);case 15:return Eg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),Ou(r,s),s.tag=1,en(c)?(r=!0,gu(s)):r=!1,So(s,a),dg(s,c,f),hd(s,c,f,a),md(null,s,c,!0,r,a);case 19:return kg(r,s,a);case 22:return Tg(r,s,a)}throw Error(t(156,s.tag))};function Zg(r,s){return Xs(r,s)}function wT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(r,s,a,c){return new wT(r,s,a,c)}function Vd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ET(r){if(typeof r=="function")return Vd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===ce)return 14}return 2}function wi(r,s){var a=r.alternate;return a===null?(a=kn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Hu(r,s,a,c,f,g){var w=2;if(c=r,typeof r=="function")Vd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case N:return ws(a.children,f,g,s);case A:w=8,f|=8;break;case P:return r=kn(12,a,s,f|2),r.elementType=P,r.lanes=g,r;case C:return r=kn(13,a,s,f),r.elementType=C,r.lanes=g,r;case nt:return r=kn(19,a,s,f),r.elementType=nt,r.lanes=g,r;case _e:return Wu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:w=10;break e;case V:w=9;break e;case M:w=11;break e;case ce:w=14;break e;case ge:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=kn(w,a,s,f),s.elementType=r,s.type=c,s.lanes=g,s}function ws(r,s,a,c){return r=kn(7,r,c,s),r.lanes=a,r}function Wu(r,s,a,c){return r=kn(22,r,c,s),r.elementType=_e,r.lanes=a,r.stateNode={isHidden:!1},r}function Ld(r,s,a){return r=kn(6,r,null,s),r.lanes=a,r}function Md(r,s,a){return s=kn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function TT(r,s,a,c,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ti(0),this.expirationTimes=ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function jd(r,s,a,c,f,g,w,R,x){return r=new TT(r,s,a,R,x),s===1?(s=1,g===!0&&(s|=8)):s=0,g=kn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(g),r}function IT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ey(r){if(!r)return hi;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(en(a))return Pm(r,a,s)}return s}function ty(r,s,a,c,f,g,w,R,x){return r=jd(a,c,!0,r,f,g,w,R,x),r.context=ey(null),a=r.current,c=Qt(),f=vi(a),g=Lr(c,f),g.callback=s??null,pi(a,g,f),r.current.lanes=f,ni(r,f,c),rn(r,c),r}function Gu(r,s,a,c){var f=s.current,g=Qt(),w=vi(f);return a=ey(a),s.context===null?s.context=a:s.pendingContext=a,s=Lr(g,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=pi(f,s,w),r!==null&&(Kn(r,f,w,g),Su(r,f,w)),w}function Ku(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ny(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Ud(r,s){ny(r,s),(r=r.alternate)&&ny(r,s)}function ST(){return null}var ry=typeof reportError=="function"?reportError:function(r){console.error(r)};function Fd(r){this._internalRoot=r}Qu.prototype.render=Fd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Gu(r,s,null,null)},Qu.prototype.unmount=Fd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ys(function(){Gu(null,r,null,null)}),s[Nr]=null}};function Qu(r){this._internalRoot=r}Qu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ql();r={blockedOn:null,target:r,priority:s};for(var a=0;a<nr.length&&s!==0&&s<nr[a].priority;a++);nr.splice(a,0,r),a===0&&Yl(r)}};function zd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Xu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function iy(){}function AT(r,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var q=Ku(w);g.call(q)}}var w=ty(s,c,r,0,null,!1,!1,"",iy);return r._reactRootContainer=w,r[Nr]=w.current,ba(r.nodeType===8?r.parentNode:r),ys(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var q=Ku(x);R.call(q)}}var x=jd(r,0,!1,null,null,!1,!1,"",iy);return r._reactRootContainer=x,r[Nr]=x.current,ba(r.nodeType===8?r.parentNode:r),ys(function(){Gu(s,x,a,c)}),x}function Ju(r,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var R=f;f=function(){var x=Ku(w);R.call(x)}}Gu(s,w,r,f)}else w=AT(a,s,r,f,c);return Ku(w)}Gl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ei(s.pendingLanes);a!==0&&(ri(s,a|1),rn(s,Ge()),(je&6)===0&&(ko=Ge()+500,di()))}break;case 13:ys(function(){var c=Vr(r,1);if(c!==null){var f=Qt();Kn(c,r,1,f)}}),Ud(r,1)}},Zs=function(r){if(r.tag===13){var s=Vr(r,134217728);if(s!==null){var a=Qt();Kn(s,r,134217728,a)}Ud(r,134217728)}},Kl=function(r){if(r.tag===13){var s=vi(r),a=Vr(r,s);if(a!==null){var c=Qt();Kn(a,r,s,c)}Ud(r,s)}},Ql=function(){return Oe},Xl=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},qs=function(r,s,a){switch(s){case"input":if(ia(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var f=pu(c);if(!f)throw Error(t(90));js(c),ia(c,f)}}}break;case"textarea":Bs(r,a);break;case"select":s=a.value,s!=null&&Ir(r,!!a.multiple,s,!1)}},Ji=Dd,pa=ys;var RT={usingClientEntryPoint:!1,Events:[La,go,pu,er,fa,Dd]},Xa={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CT={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ya(r),r===null?null:r.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||ST,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{ns=Yu.inject(CT),hn=Yu}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT,sn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zd(s))throw Error(t(200));return IT(r,s,null,a)},sn.createRoot=function(r,s){if(!zd(r))throw Error(t(299));var a=!1,c="",f=ry;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=jd(r,1,!1,null,null,a,!1,c,f),r[Nr]=s.current,ba(r.nodeType===8?r.parentNode:r),new Fd(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ya(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return ys(r)},sn.hydrate=function(r,s,a){if(!Xu(s))throw Error(t(200));return Ju(null,r,s,!0,a)},sn.hydrateRoot=function(r,s,a){if(!zd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=ry;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ty(s,null,r,1,a??null,f,!1,g,w),r[Nr]=s.current,ba(r),c)for(r=0;r<c.length;r++)a=c[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Qu(s)},sn.render=function(r,s,a){if(!Xu(s))throw Error(t(200));return Ju(null,r,s,!1,a)},sn.unmountComponentAtNode=function(r){if(!Xu(r))throw Error(t(40));return r._reactRootContainer?(ys(function(){Ju(null,null,r,!1,function(){r._reactRootContainer=null,r[Nr]=null})}),!0):!1},sn.unstable_batchedUpdates=Dd,sn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Xu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ju(r,s,a,!1,c)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var dy;function f_(){if(dy)return qd.exports;dy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qd.exports=LT(),qd.exports}var fy;function MT(){if(fy)return Zu;fy=1;var n=f_();return Zu.createRoot=n.createRoot,Zu.hydrateRoot=n.hydrateRoot,Zu}var jT=MT();const UT=h_(jT);f_();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cl.apply(this,arguments)}var Ci;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ci||(Ci={}));const py="popstate";function FT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:h,hash:d}=i.location;return uf("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:_c(o)}return BT(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Hf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zT(){return Math.random().toString(36).substr(2,8)}function my(n,e){return{usr:n.state,key:n.key,idx:e}}function uf(n,e,t,i){return t===void 0&&(t=null),cl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:t,key:e&&e.key||i||zT()})}function _c(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Go(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function BT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d=Ci.Pop,m=null,v=y();v==null&&(v=0,h.replaceState(cl({},h.state,{idx:v}),""));function y(){return(h.state||{idx:null}).idx}function I(){d=Ci.Pop;let O=y(),$=O==null?null:O-v;v=O,m&&m({action:d,location:F.location,delta:$})}function S(O,$){d=Ci.Push;let ee=uf(F.location,O,$);v=y()+1;let ne=my(ee,v),ie=F.createHref(ee);try{h.pushState(ne,"",ie)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;o.location.assign(ie)}l&&m&&m({action:d,location:F.location,delta:1})}function k(O,$){d=Ci.Replace;let ee=uf(F.location,O,$);v=y();let ne=my(ee,v),ie=F.createHref(ee);h.replaceState(ne,"",ie),l&&m&&m({action:d,location:F.location,delta:0})}function B(O){let $=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof O=="string"?O:_c(O);return ee=ee.replace(/ $/,"%20"),ft($,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,$)}let F={get action(){return d},get location(){return n(o,h)},listen(O){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(py,I),m=O,()=>{o.removeEventListener(py,I),m=null}},createHref(O){return e(o,O)},createURL:B,encodeLocation(O){let $=B(O);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:S,replace:k,go(O){return h.go(O)}};return F}var gy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gy||(gy={}));function $T(n,e,t){return t===void 0&&(t="/"),qT(n,e,t)}function qT(n,e,t,i){let o=typeof e=="string"?Go(e):e,l=Wf(o.pathname||"/",t);if(l==null)return null;let h=p_(n);HT(h);let d=null;for(let m=0;d==null&&m<h.length;++m){let v=rI(l);d=eI(h[m],v)}return d}function p_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(ft(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let v=ki([i,m.relativePath]),y=t.concat(m);l.children&&l.children.length>0&&(ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),p_(l.children,e,y,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:YT(v,l.index),routesMeta:y})};return n.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let m of m_(l.path))o(l,h,m)}),e}function m_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=m_(i.join("/")),d=[];return d.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&d.push(...h),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function HT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const WT=/^:[\w-]+$/,GT=3,KT=2,QT=1,XT=10,JT=-2,yy=n=>n==="*";function YT(n,e){let t=n.split("/"),i=t.length;return t.some(yy)&&(i+=JT),e&&(i+=KT),t.filter(o=>!yy(o)).reduce((o,l)=>o+(WT.test(l)?GT:l===""?QT:XT),i)}function ZT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function eI(n,e,t){let{routesMeta:i}=n,o={},l="/",h=[];for(let d=0;d<i.length;++d){let m=i[d],v=d===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",I=tI({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},y),S=m.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:ki([l,I.pathname]),pathnameBase:lI(ki([l,I.pathnameBase])),route:S}),I.pathnameBase!=="/"&&(l=ki([l,I.pathnameBase]))}return h}function tI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=nI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((v,y,I)=>{let{paramName:S,isOptional:k}=y;if(S==="*"){let F=d[I]||"";h=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const B=d[I];return k&&!B?v[S]=void 0:v[S]=(B||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:n}}function nI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Hf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function rI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Wf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const iI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sI=n=>iI.test(n);function oI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Go(n):n,l;if(t)if(sI(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Hf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=vy(t.substring(1),"/"):l=vy(t,e)}else l=e;return{pathname:l,search:uI(i),hash:cI(o)}}function vy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Gd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gf(n,e){let t=aI(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Kf(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Go(n):(o=cl({},n),ft(!o.pathname||!o.pathname.includes("?"),Gd("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Gd("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Gd("#","search","hash",o)));let l=n===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),I-=1;o.pathname=S.join("/")}d=I>=0?e[I]:"/"}let m=oI(o,d),v=h&&h!=="/"&&h.endsWith("/"),y=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||y)&&(m.pathname+="/"),m}const ki=n=>n.join("/").replace(/\/\/+/g,"/"),lI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function hI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const g_=["post","put","patch","delete"];new Set(g_);const dI=["get",...g_];new Set(dI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hl.apply(this,arguments)}const Qf=Q.createContext(null),fI=Q.createContext(null),$i=Q.createContext(null),Bc=Q.createContext(null),qi=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),y_=Q.createContext(null);function pI(n,e){let{relative:t}=e===void 0?{}:e;Ko()||ft(!1);let{basename:i,navigator:o}=Q.useContext($i),{hash:l,pathname:h,search:d}=__(n,{relative:t}),m=h;return i!=="/"&&(m=h==="/"?i:ki([i,h])),o.createHref({pathname:m,search:d,hash:l})}function Ko(){return Q.useContext(Bc)!=null}function Tl(){return Ko()||ft(!1),Q.useContext(Bc).location}function v_(n){Q.useContext($i).static||Q.useLayoutEffect(n)}function Il(){let{isDataRoute:n}=Q.useContext(qi);return n?CI():mI()}function mI(){Ko()||ft(!1);let n=Q.useContext(Qf),{basename:e,future:t,navigator:i}=Q.useContext($i),{matches:o}=Q.useContext(qi),{pathname:l}=Tl(),h=JSON.stringify(Gf(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return v_(()=>{d.current=!0}),Q.useCallback(function(v,y){if(y===void 0&&(y={}),!d.current)return;if(typeof v=="number"){i.go(v);return}let I=Kf(v,JSON.parse(h),l,y.relative==="path");n==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ki([e,I.pathname])),(y.replace?i.replace:i.push)(I,y.state,y)},[e,i,h,l,n])}function __(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext($i),{matches:o}=Q.useContext(qi),{pathname:l}=Tl(),h=JSON.stringify(Gf(o,i.v7_relativeSplatPath));return Q.useMemo(()=>Kf(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function gI(n,e){return yI(n,e)}function yI(n,e,t,i){Ko()||ft(!1);let{navigator:o}=Q.useContext($i),{matches:l}=Q.useContext(qi),h=l[l.length-1],d=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=Tl(),y;if(e){var I;let O=typeof e=="string"?Go(e):e;m==="/"||(I=O.pathname)!=null&&I.startsWith(m)||ft(!1),y=O}else y=v;let S=y.pathname||"/",k=S;if(m!=="/"){let O=m.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let B=$T(n,{pathname:k}),F=TI(B&&B.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:ki([m,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:ki([m,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,i);return e&&F?Q.createElement(Bc.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Ci.Pop}},F):F}function vI(){let n=RI(),e=hI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const _I=Q.createElement(vI,null);class wI extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(qi.Provider,{value:this.props.routeContext},Q.createElement(y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EI(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(Qf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(qi.Provider,{value:e},i)}function TI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let y=h.findIndex(I=>I.route.id&&(d==null?void 0:d[I.route.id])!==void 0);y>=0||ft(!1),h=h.slice(0,Math.min(h.length,y+1))}let m=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let y=0;y<h.length;y++){let I=h[y];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=y),I.route.id){let{loaderData:S,errors:k}=t,B=I.route.loader&&S[I.route.id]===void 0&&(!k||k[I.route.id]===void 0);if(I.route.lazy||B){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((y,I,S)=>{let k,B=!1,F=null,O=null;t&&(k=d&&I.route.id?d[I.route.id]:void 0,F=I.route.errorElement||_I,m&&(v<0&&S===0?(PI("route-fallback"),B=!0,O=null):v===S&&(B=!0,O=I.route.hydrateFallbackElement||null)));let $=e.concat(h.slice(0,S+1)),ee=()=>{let ne;return k?ne=F:B?ne=O:I.route.Component?ne=Q.createElement(I.route.Component,null):I.route.element?ne=I.route.element:ne=y,Q.createElement(EI,{match:I,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:ne})};return t&&(I.route.ErrorBoundary||I.route.errorElement||S===0)?Q.createElement(wI,{location:t.location,revalidation:t.revalidation,component:F,error:k,children:ee(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):ee()},null)}var w_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(w_||{}),E_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(E_||{});function II(n){let e=Q.useContext(Qf);return e||ft(!1),e}function SI(n){let e=Q.useContext(fI);return e||ft(!1),e}function AI(n){let e=Q.useContext(qi);return e||ft(!1),e}function T_(n){let e=AI(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function RI(){var n;let e=Q.useContext(y_),t=SI(),i=T_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function CI(){let{router:n}=II(w_.UseNavigateStable),e=T_(E_.UseNavigateStable),t=Q.useRef(!1);return v_(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,hl({fromRouteId:e},l)))},[n,e])}const _y={};function PI(n,e,t){_y[n]||(_y[n]=!0)}function kI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Dn(n){let{to:e,replace:t,state:i,relative:o}=n;Ko()||ft(!1);let{future:l,static:h}=Q.useContext($i),{matches:d}=Q.useContext(qi),{pathname:m}=Tl(),v=Il(),y=Kf(e,Gf(d,l.v7_relativeSplatPath),m,o==="path"),I=JSON.stringify(y);return Q.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function Ts(n){ft(!1)}function xI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ci.Pop,navigator:l,static:h=!1,future:d}=n;Ko()&&ft(!1);let m=e.replace(/^\/*/,"/"),v=Q.useMemo(()=>({basename:m,navigator:l,static:h,future:hl({v7_relativeSplatPath:!1},d)}),[m,d,l,h]);typeof i=="string"&&(i=Go(i));let{pathname:y="/",search:I="",hash:S="",state:k=null,key:B="default"}=i,F=Q.useMemo(()=>{let O=Wf(y,m);return O==null?null:{location:{pathname:O,search:I,hash:S,state:k,key:B},navigationType:o}},[m,y,I,S,k,B,o]);return F==null?null:Q.createElement($i.Provider,{value:v},Q.createElement(Bc.Provider,{children:t,value:F}))}function NI(n){let{children:e,location:t}=n;return gI(cf(e),t)}new Promise(()=>{});function cf(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,cf(i.props.children,l));return}i.type!==Ts&&ft(!1),!i.props.index||!i.props.children||ft(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=cf(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hf.apply(this,arguments)}function DI(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function bI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OI(n,e){return n.button===0&&(!e||e==="_self")&&!bI(n)}const VI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LI="6";try{window.__reactRouterVersion=LI}catch{}const MI="startTransition",wy=bT[MI];function jI(n){let{basename:e,children:t,future:i,window:o}=n,l=Q.useRef();l.current==null&&(l.current=FT({window:o,v5Compat:!0}));let h=l.current,[d,m]=Q.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},y=Q.useCallback(I=>{v&&wy?wy(()=>m(I)):m(I)},[m,v]);return Q.useLayoutEffect(()=>h.listen(y),[h,y]),Q.useEffect(()=>kI(i),[i]),Q.createElement(xI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:h,future:i})}const UI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zI=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:d,target:m,to:v,preventScrollReset:y,viewTransition:I}=e,S=DI(e,VI),{basename:k}=Q.useContext($i),B,F=!1;if(typeof v=="string"&&FI.test(v)&&(B=v,UI))try{let ne=new URL(window.location.href),ie=v.startsWith("//")?new URL(ne.protocol+v):new URL(v),Re=Wf(ie.pathname,k);ie.origin===ne.origin&&Re!=null?v=Re+ie.search+ie.hash:F=!0}catch{}let O=pI(v,{relative:o}),$=BI(v,{replace:h,state:d,target:m,preventScrollReset:y,relative:o,viewTransition:I});function ee(ne){i&&i(ne),ne.defaultPrevented||$(ne)}return Q.createElement("a",hf({},S,{href:B||O,onClick:F||l?i:ee,ref:t,target:m}))});var Ey;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ey||(Ey={}));var Ty;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ty||(Ty={}));function BI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:d}=e===void 0?{}:e,m=Il(),v=Tl(),y=__(n,{relative:h});return Q.useCallback(I=>{if(OI(I,t)){I.preventDefault();let S=i!==void 0?i:_c(v)===_c(y);m(n,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:d})}},[v,m,y,i,o,t,n,l,h,d])}function Iy(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function $I(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function qI(){const[n,e]=Q.useState(null),[t,i]=Q.useState(!1);Q.useEffect(()=>{function d(m){m.preventDefault(),e(m)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const o=Q.useMemo(()=>!Iy()&&$I()&&!t&&!n,[t,n]),l=Q.useMemo(()=>!Iy()&&!t&&!!n,[n,t]);async function h(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),i(!0)}return!o&&!l?null:E.jsxs("section",{className:"install-banner","aria-live":"polite",children:[E.jsx("p",{className:"hint",children:l?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),E.jsxs("div",{className:"install-actions",children:[l?E.jsx("button",{className:"btn",type:"button",onClick:()=>void h(),children:"Aggiungi alla Home"}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>i(!0),children:"Chiudi"})]})]})}const I_=Q.createContext(null);function HI({children:n}){const[e,t]=Q.useState([]),i=Q.useCallback((l,h)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(m=>[...m,{id:d,type:l,message:h}]),window.setTimeout(()=>{t(m=>m.filter(v=>v.id!==d))},3200)},[]),o=Q.useMemo(()=>({showSuccess:l=>i("success",l),showError:l=>i("error",l)}),[i]);return E.jsxs(I_.Provider,{value:o,children:[n,E.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(l=>E.jsx("div",{className:`toast toast-${l.type}`,children:l.message},l.id))})]})}function $c(){const n=Q.useContext(I_);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const WI=()=>{};var Sy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},GI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},A_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,d=h?n[o+1]:0,m=o+2<n.length,v=m?n[o+2]:0,y=l>>2,I=(l&3)<<4|d>>4;let S=(d&15)<<2|v>>6,k=v&63;m||(k=64,h||(S=64)),i.push(t[y],t[I],t[S],t[k])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(S_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const I=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||v==null||I==null)throw new KI;const S=l<<2|d>>4;if(i.push(S),v!==64){const k=d<<4&240|v>>2;if(i.push(k),I!==64){const B=v<<6&192|I;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class KI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(n){const e=S_(n);return A_.encodeByteArray(e,!0)},wc=function(n){return QI(n).replace(/\./g,"")},R_=function(n){try{return A_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=()=>XI().__FIREBASE_DEFAULTS__,YI=()=>{if(typeof process>"u"||typeof Sy>"u")return;const n=Sy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&R_(n[1]);return e&&JSON.parse(e)},qc=()=>{try{return WI()||JI()||YI()||ZI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},C_=n=>{var e,t;return(t=(e=qc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Xf=n=>{const e=C_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},P_=()=>{var n;return(n=qc())===null||n===void 0?void 0:n.config},k_=n=>{var e;return(e=qc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hc(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wc(JSON.stringify(t)),wc(JSON.stringify(h)),""].join(".")}const rl={};function tS(){const n={prod:[],emulator:[]};for(const e of Object.keys(rl))rl[e]?n.emulator.push(e):n.prod.push(e);return n}function nS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ay=!1;function Wc(n,e){if(typeof window>"u"||typeof document>"u"||!Qr(window.location.host)||rl[n]===e||rl[n]||Ay)return;rl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=tS().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,k){S.setAttribute("width","24"),S.setAttribute("id",k),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ay=!0,h()},S}function y(S,k){S.setAttribute("id",k),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function I(){const S=nS(i),k=t("text"),B=document.getElementById(k)||document.createElement("span"),F=t("learnmore"),O=document.getElementById(F)||document.createElement("a"),$=t("preprendIcon"),ee=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;d(ne),y(O,F);const ie=v();m(ee,$),ne.append(ee,B,O,ie),document.body.appendChild(ne)}l?(B.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function iS(){var n;const e=(n=qc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lS(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uS(){return!iS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cS(){try{return typeof indexedDB=="object"}catch{return!1}}function hS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="FirebaseError";class Yn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dS,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sl.prototype.create)}}class Sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?fS(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new Yn(o,d,i)}}function fS(n,e){return n.replace(pS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const pS=/\{\$([^}]+)}/g;function mS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ps(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(Ry(l)&&Ry(h)){if(!Ps(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ry(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gS(n,e){const t=new yS(n,e);return t.subscribe.bind(t)}class yS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");vS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Kd),o.error===void 0&&(o.error=Kd),o.complete===void 0&&(o.complete=Kd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n){return n&&n._delegate?n._delegate:n}class $r{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new eS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ES(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(n){return n===Is?void 0:n}function ES(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _S(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const IS={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},SS=De.INFO,AS={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},RS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=AS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jf{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const CS=(n,e)=>e.some(t=>n instanceof t);let Cy,Py;function PS(){return Cy||(Cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kS(){return Py||(Py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N_=new WeakMap,df=new WeakMap,D_=new WeakMap,Qd=new WeakMap,Yf=new WeakMap;function xS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(xi(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&N_.set(t,n)}).catch(()=>{}),Yf.set(e,n),e}function NS(n){if(df.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});df.set(n,e)}let ff={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return df.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DS(n){ff=n(ff)}function bS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Xd(this),e,...t);return D_.set(i,e.sort?e.sort():[e]),xi(i)}:kS().includes(n)?function(...e){return n.apply(Xd(this),e),xi(N_.get(this))}:function(...e){return xi(n.apply(Xd(this),e))}}function OS(n){return typeof n=="function"?bS(n):(n instanceof IDBTransaction&&NS(n),CS(n,PS())?new Proxy(n,ff):n)}function xi(n){if(n instanceof IDBRequest)return xS(n);if(Qd.has(n))return Qd.get(n);const e=OS(n);return e!==n&&(Qd.set(n,e),Yf.set(e,n)),e}const Xd=n=>Yf.get(n);function VS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),d=xi(h);return i&&h.addEventListener("upgradeneeded",m=>{i(xi(h.result),m.oldVersion,m.newVersion,xi(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const LS=["get","getKey","getAll","getAllKeys","count"],MS=["put","add","delete","clear"],Jd=new Map;function ky(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=MS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||LS.includes(t)))return;const l=async function(h,...d){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),o&&m.done]))[0]};return Jd.set(e,l),l}DS(n=>({...n,get:(e,t,i)=>ky(e,t)||n.get(e,t,i),has:(e,t)=>!!ky(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(US(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function US(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pf="@firebase/app",xy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Jf("@firebase/app"),FS="@firebase/app-compat",zS="@firebase/analytics-compat",BS="@firebase/analytics",$S="@firebase/app-check-compat",qS="@firebase/app-check",HS="@firebase/auth",WS="@firebase/auth-compat",GS="@firebase/database",KS="@firebase/data-connect",QS="@firebase/database-compat",XS="@firebase/functions",JS="@firebase/functions-compat",YS="@firebase/installations",ZS="@firebase/installations-compat",eA="@firebase/messaging",tA="@firebase/messaging-compat",nA="@firebase/performance",rA="@firebase/performance-compat",iA="@firebase/remote-config",sA="@firebase/remote-config-compat",oA="@firebase/storage",aA="@firebase/storage-compat",lA="@firebase/firestore",uA="@firebase/ai",cA="@firebase/firestore-compat",hA="firebase",dA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",fA={[pf]:"fire-core",[FS]:"fire-core-compat",[BS]:"fire-analytics",[zS]:"fire-analytics-compat",[qS]:"fire-app-check",[$S]:"fire-app-check-compat",[HS]:"fire-auth",[WS]:"fire-auth-compat",[GS]:"fire-rtdb",[KS]:"fire-data-connect",[QS]:"fire-rtdb-compat",[XS]:"fire-fn",[JS]:"fire-fn-compat",[YS]:"fire-iid",[ZS]:"fire-iid-compat",[eA]:"fire-fcm",[tA]:"fire-fcm-compat",[nA]:"fire-perf",[rA]:"fire-perf-compat",[iA]:"fire-rc",[sA]:"fire-rc-compat",[oA]:"fire-gcs",[aA]:"fire-gcs-compat",[lA]:"fire-fst",[cA]:"fire-fst-compat",[uA]:"fire-vertex","fire-js":"fire-js",[hA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,pA=new Map,gf=new Map;function Ny(n,e){try{n.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vi(n){const e=n.name;if(gf.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,n);for(const t of Ec.values())Ny(t,n);for(const t of pA.values())Ny(t,n);return!0}function Rl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function an(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new Sl("app","Firebase",mA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=dA;function b_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:mf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ni.create("bad-app-name",{appName:String(o)});if(t||(t=P_()),!t)throw Ni.create("no-options");const l=Ec.get(o);if(l){if(Ps(t,l.options)&&Ps(i,l.config))return l;throw Ni.create("duplicate-app",{appName:o})}const h=new TS(o);for(const m of gf.values())h.addComponent(m);const d=new gA(t,i,h);return Ec.set(o,d),d}function Gc(n=mf){const e=Ec.get(n);if(!e&&n===mf&&P_())return b_();if(!e)throw Ni.create("no-app",{appName:n});return e}function bn(n,e,t){var i;let o=(i=fA[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(d.join(" "));return}Vi(new $r(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firebase-heartbeat-database",vA=1,dl="firebase-heartbeat-store";let Yd=null;function O_(){return Yd||(Yd=VS(yA,vA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ni.create("idb-open",{originalErrorMessage:n.message})})),Yd}async function _A(n){try{const t=(await O_()).transaction(dl),i=await t.objectStore(dl).get(V_(n));return await t.done,i}catch(e){if(e instanceof Yn)qr.warn(e.message);else{const t=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(t.message)}}}async function Dy(n,e){try{const i=(await O_()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,V_(n)),await i.done}catch(t){if(t instanceof Yn)qr.warn(t.message);else{const i=Ni.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qr.warn(i.message)}}}function V_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1024,EA=30;class TA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=by();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>EA){const h=AA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=by(),{heartbeatsToSend:i,unsentEntries:o}=IA(this._heartbeatsCache.heartbeats),l=wc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qr.warn(t),""}}}function by(){return new Date().toISOString().substring(0,10)}function IA(n,e=wA){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Oy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Oy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cS()?hS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _A(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Oy(n){return wc(JSON.stringify({version:2,heartbeats:n})).length}function AA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n){Vi(new $r("platform-logger",e=>new jS(e),"PRIVATE")),Vi(new $r("heartbeat",e=>new TA(e),"PRIVATE")),bn(pf,xy,n),bn(pf,xy,"esm2017"),bn("fire-js","")}RA("");var CA="firebase",PA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(CA,PA,"app");function Zf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function L_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kA=L_,M_=new Sl("auth","Firebase",L_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Jf("@firebase/auth");function xA(n,...e){Tc.logLevel<=De.WARN&&Tc.warn(`Auth (${bs}): ${n}`,...e)}function uc(n,...e){Tc.logLevel<=De.ERROR&&Tc.error(`Auth (${bs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(n,...e){throw tp(n,...e)}function Xn(n,...e){return tp(n,...e)}function ep(n,e,t){const i=Object.assign(Object.assign({},kA()),{[e]:t});return new Sl("auth","Firebase",i).create(e,{appName:n.name})}function Di(n){return ep(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j_(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&_r(n,"argument-error"),ep(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return M_.create(n,...e)}function Se(n,e,...t){if(!n)throw tp(e,...t)}function Fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw uc(e),new Error(e)}function Hr(n,e){n||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function NA(){return Vy()==="http:"||Vy()==="https:"}function Vy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NA()||oS()||"connection"in navigator)?navigator.onLine:!0}function bA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=rS()||aS()}get(){return DA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n,e){Hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LA=new Cl(3e4,6e4);function rp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Qo(n,e,t,i,o={}){return F_(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=Al(Object.assign({key:n.config.apiKey},h)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:m},l);return sS()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&Qr(n.emulatorConfig.host)&&(v.credentials="include"),U_.fetch()(await z_(n,n.config.apiHost,t,d),v)})}async function F_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},OA),e);try{const o=new jA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw ec(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[m,v]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ec(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw ec(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw ec(n,"user-disabled",h);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw ep(n,y,v);_r(n,y)}}catch(o){if(o instanceof Yn)throw o;_r(n,"network-request-failed",{message:String(o)})}}async function MA(n,e,t,i,o={}){const l=await Qo(n,e,t,i,o);return"mfaPendingCredential"in l&&_r(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function z_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?np(n.config,o):`${n.config.apiScheme}://${o}`;return VA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class jA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),LA.get())})}}function ec(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Xn(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(n,e){return Qo(n,"POST","/v1/accounts:delete",e)}async function Ic(n,e){return Qo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FA(n,e=!1){const t=tt(n),i=await t.getIdToken(e),o=ip(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:il(Zd(o.auth_time)),issuedAtTime:il(Zd(o.iat)),expirationTime:il(Zd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Zd(n){return Number(n)*1e3}function ip(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const o=R_(t);return o?JSON.parse(o):(uc("Failed to decode base64 JWT payload"),null)}catch(o){return uc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ly(n){const e=ip(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Yn&&zA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await fl(n,Ic(t,{idToken:i}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?B_(l.providerUserInfo):[],d=qA(n.providerData,h),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),y=m?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new vf(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,I)}async function $A(n){const e=tt(n);await Sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function B_(n){return n.map(e=>{var{providerId:t}=e,i=Zf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e){const t=await F_(n,{},async()=>{const i=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await z_(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Qr(n.emulatorConfig.host)&&(m.credentials="include"),U_.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WA(n,e){return Qo(n,"POST","/v2/accounts:revokeToken",rp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Ly(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await HA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Vo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Zf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new vf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await fl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FA(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Sc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await fl(this,UA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,m,v,y;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,k=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,B=(h=t.photoURL)!==null&&h!==void 0?h:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,O=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ee=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:ne,emailVerified:ie,isAnonymous:Re,providerData:he,stsTokenManager:N}=t;Se(ne&&N,e,"internal-error");const A=Vo.fromJSON(this.name,N);Se(typeof ne=="string",e,"internal-error"),Ti(I,e.name),Ti(S,e.name),Se(typeof ie=="boolean",e,"internal-error"),Se(typeof Re=="boolean",e,"internal-error"),Ti(k,e.name),Ti(B,e.name),Ti(F,e.name),Ti(O,e.name),Ti($,e.name),Ti(ee,e.name);const P=new Qn({uid:ne,auth:e,email:S,emailVerified:ie,displayName:I,isAnonymous:Re,photoURL:B,phoneNumber:k,tenantId:F,stsTokenManager:A,createdAt:$,lastLoginAt:ee});return he&&Array.isArray(he)&&(P.providerData=he.map(D=>Object.assign({},D))),O&&(P._redirectEventId=O),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new Qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Sc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?B_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Vo;d.updateFromIdToken(i);const m=new Qn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new vf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;function zr(n){Hr(n instanceof Function,"Expected a class definition");let e=My.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,My.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$_.type="NONE";const jy=$_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n,e,t){return`firebase:${n}:${e}:${t}`}class Lo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=cc(this.userKey,o.apiKey,l),this.fullPersistenceKey=cc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ic(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Lo(zr(jy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||zr(jy);const h=cc(i,e.config.apiKey,e.name);let d=null;for(const v of t)try{const y=await v._get(h);if(y){let I;if(typeof y=="string"){const S=await Ic(e,{idToken:y}).catch(()=>{});if(!S)break;I=await Qn._fromGetAccountInfoResponse(e,S,y)}else I=Qn._fromJSON(e,y);v!==l&&(d=I),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Lo(l,e,i):(l=m[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Lo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(X_(e))return"Webos";if(H_(e))return"Safari";if((e.includes("chrome/")||W_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function q_(n=Ht()){return/firefox\//i.test(n)}function H_(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W_(n=Ht()){return/crios\//i.test(n)}function G_(n=Ht()){return/iemobile/i.test(n)}function K_(n=Ht()){return/android/i.test(n)}function Q_(n=Ht()){return/blackberry/i.test(n)}function X_(n=Ht()){return/webos/i.test(n)}function sp(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GA(n=Ht()){var e;return sp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KA(){return lS()&&document.documentMode===10}function J_(n=Ht()){return sp(n)||K_(n)||X_(n)||Q_(n)||/windows phone/i.test(n)||G_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n,e=[]){let t;switch(n){case"Browser":t=Uy(Ht());break;case"Worker":t=`${Uy(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const m=e(l);h(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(n,e={}){return Qo(n,"GET","/v2/passwordPolicy",rp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=6;class YA{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:JA,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fy(this),this.idTokenSubscription=new Fy(this),this.beforeStateQueue=new QA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Lo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ic(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===d)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Di(this));const t=e?tt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XA(this),t=new YA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await WA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Lo.create(this,[zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xo(n){return tt(n)}class Fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=gS(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eR(n){op=n}function tR(n){return op.loadJS(n)}function nR(){return op.gapiScript}function rR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n,e){const t=Rl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ps(l,e??{}))return o;_r(o,"already-initialized")}return t.initialize({options:e})}function sR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(zr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function oR(n,e,t){const i=Xo(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Z_(e),{host:h,port:d}=aR(e),m=d===null?"":`:${d}`,v={url:`${l}//${h}${m}/`},y=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(Ps(v,i.config.emulator)&&Ps(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Qr(h)?(Hc(`${l}//${h}${m}`),Wc("Auth",!0)):lR()}function Z_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aR(n){const e=Z_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:zy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:zy(h)}}}function zy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n,e){return MA(n,"POST","/v1/accounts:signInWithIdp",rp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="http://localhost";class ks extends ew{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Zf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ks(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Mo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:uR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Al(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Kc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Pl{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ks._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Pl{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Pl{constructor(){super("twitter.com")}static credential(e,t){return ks._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Qn._fromIdTokenResponse(e,i,o),h=By(i);return new Fo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=By(i);return new Fo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function By(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Yn{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ac(e,t,i,o)}}function tw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ac._fromErrorAndOperation(n,l,e,i):l})}async function cR(n,e,t=!1){const i=await fl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e,t=!1){const{auth:i}=n;if(an(i.app))return Promise.reject(Di(i));const o="reauthenticate";try{const l=await fl(n,tw(i,o,e,n),t);Se(l.idToken,i,"internal-error");const h=ip(l.idToken);Se(h,i,"internal-error");const{sub:d}=h;return Se(n.uid===d,i,"user-mismatch"),Fo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_r(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n,e,t=!1){if(an(n.app))return Promise.reject(Di(n));const i="signIn",o=await tw(n,i,e),l=await Fo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n,e){return tt(n).setPersistence(e)}function nw(n,e,t,i){return tt(n).onIdTokenChanged(e,t,i)}function pR(n,e,t){return tt(n).beforeAuthStateChanged(e,t)}function Qc(n){return tt(n).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1e3,gR=10;class iw extends rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);KA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,gR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},mR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iw.type="LOCAL";const sw=iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ow.type="SESSION";const aw=ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Xc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async v=>v(t.origin,l)),m=await yR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,m)=>{const v=ap("",20);o.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function _R(n){fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function wR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ER(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function TR(){return lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firebaseLocalStorageDb",IR=1,Cc="firebaseLocalStorage",cw="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jc(n,e){return n.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function SR(){const n=indexedDB.deleteDatabase(uw);return new kl(n).toPromise()}function _f(){const n=indexedDB.open(uw,IR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Cc,{keyPath:cw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await SR(),e(await _f()))})})}async function $y(n,e,t){const i=Jc(n,!0).put({[cw]:e,value:t});return new kl(i).toPromise()}async function AR(n,e){const t=Jc(n,!1).get(e),i=await new kl(t).toPromise();return i===void 0?null:i.value}function qy(n,e){const t=Jc(n,!0).delete(e);return new kl(t).toPromise()}const RR=800,CR=3;class hw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>CR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(TR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new vR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ER()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await $y(e,Rc,"1"),await qy(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>$y(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>AR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Jc(o,!1).getAll();return new kl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hw.type="LOCAL";const PR=hw;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n,e){return e?zr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends ew{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kR(n){return dR(n.auth,new up(n),n.bypassAuthState)}function xR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),hR(t,new up(n),n.bypassAuthState)}async function NR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),cR(t,new up(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kR;case"linkViaPopup":case"linkViaRedirect":return NR;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:_r(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Cl(2e3,1e4);async function bR(n,e,t){if(an(n.app))return Promise.reject(Xn(n,"operation-not-supported-in-this-environment"));const i=Xo(n);j_(n,e,Kc);const o=lp(i,t);return new Ss(i,"signInViaPopup",e,o).executeNotNull()}class Ss extends dw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DR.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="pendingRedirect",hc=new Map;class VR extends dw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=hc.get(this.auth._key());if(!e){try{const i=await LR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}hc.set(this.auth._key(),e)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LR(n,e){const t=pw(e),i=fw(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function MR(n,e){return fw(n)._set(pw(e),"true")}function jR(n,e){hc.set(n._key(),e)}function fw(n){return zr(n._redirectPersistence)}function pw(n){return cc(OR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n,e,t){return FR(n,e,t)}async function FR(n,e,t){if(an(n.app))return Promise.reject(Di(n));const i=Xo(n);j_(n,e,Kc),await i._initializationPromise;const o=lp(i,t);return await MR(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function zR(n,e){return await Xo(n)._initializationPromise,mw(n,e,!1)}async function mw(n,e,t=!1){if(an(n.app))return Promise.reject(Di(n));const i=Xo(n),o=lp(i,e),h=await new VR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=600*1e3;class $R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hy(e))}saveEventToCache(e){this.cachedEventUids.add(Hy(e)),this.lastProcessedEventTime=Date.now()}}function Hy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(n,e={}){return Qo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GR=/^https?/;async function KR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await HR(n);for(const t of e)try{if(QR(t))return}catch{}_r(n,"unauthorized-domain")}function QR(n){const e=yf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!GR.test(t))return!1;if(WR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Cl(3e4,6e4);function Wy(){const n=fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JR(n){return new Promise((e,t)=>{var i,o,l;function h(){Wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wy(),t(Xn(n,"network-request-failed"))},timeout:XR.get()})}if(!((o=(i=fr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=fr().gapi)===null||l===void 0)&&l.load)h();else{const d=rR("iframefcb");return fr()[d]=()=>{gapi.load?h():t(Xn(n,"network-request-failed"))},tR(`${nR()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw dc=null,e})}let dc=null;function YR(n){return dc=dc||JR(n),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new Cl(5e3,15e3),e1="__/auth/iframe",t1="emulator/auth/iframe",n1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i1(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?np(e,t1):`https://${n.config.authDomain}/${e1}`,i={apiKey:e.apiKey,appName:n.name,v:bs},o=r1.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Al(i).slice(1)}`}async function s1(n){const e=await YR(n),t=fr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:i1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Xn(n,"network-request-failed"),d=fr().setTimeout(()=>{l(h)},ZR.get());function m(){fr().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a1=500,l1=600,u1="_blank",c1="http://localhost";class Gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h1(n,e,t,i=a1,o=l1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},o1),{width:i.toString(),height:o.toString(),top:l,left:h}),v=Ht().toLowerCase();t&&(d=W_(v)?u1:t),q_(v)&&(e=e||c1,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[k,B])=>`${S}${k}=${B},`,"");if(GA(v)&&d!=="_self")return d1(e||"",d),new Gy(null);const I=window.open(e||"",d,y);Se(I,n,"popup-blocked");try{I.focus()}catch{}return new Gy(I)}function d1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="__/auth/handler",p1="emulator/auth/handler",m1=encodeURIComponent("fac");async function Ky(n,e,t,i,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:bs,eventId:o};if(e instanceof Kc){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",mS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,I]of Object.entries({}))h[y]=I}if(e instanceof Pl){const y=e.getScopes().filter(I=>I!=="");y.length>0&&(h.scopes=y.join(","))}n.tenantId&&(h.tid=n.tenantId);const d=h;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),v=m?`#${m1}=${encodeURIComponent(m)}`:"";return`${g1(n)}?${Al(d).slice(1)}${v}`}function g1({config:n}){return n.emulator?np(n,p1):`https://${n.authDomain}/${f1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="webStorageSupport";class y1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aw,this._completeRedirectFn=mw,this._overrideRedirectResult=jR}async _openPopup(e,t,i,o){var l;Hr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Ky(e,t,i,yf(),o);return h1(e,h,ap())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Ky(e,t,i,yf(),o);return _R(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Hr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await s1(e),i=new $R(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ef,{type:ef},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[ef];h!==void 0&&t(!!h),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J_()||H_()||sp()}}const v1=y1;var Qy="@firebase/auth",Xy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E1(n){Vi(new $r("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y_(n)},v=new ZA(i,o,l,m);return sR(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vi(new $r("auth-internal",e=>{const t=Xo(e.getProvider("auth").getImmediate());return(i=>new _1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Qy,Xy,w1(n)),bn(Qy,Xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=300,I1=k_("authIdTokenMaxAge")||T1;let Jy=null;const S1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>I1)return;const o=t==null?void 0:t.token;Jy!==o&&(Jy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function A1(n=Gc()){const e=Rl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iR(n,{popupRedirectResolver:v1,persistence:[PR,sw,aw]}),i=k_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=S1(l.toString());pR(t,h,()=>h(t.currentUser)),nw(t,d=>h(d))}}const o=C_("auth");return o&&oR(t,`http://${o}`),t}function R1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Xn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",R1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E1("Browser");var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,yw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function P(){}P.prototype=A.prototype,N.D=A.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(D,V,M){for(var C=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)C[nt-2]=arguments[nt];return A.prototype[V].apply(D,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,P){P||(P=0);var D=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)D[V]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(V=0;16>V;++V)D[V]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=N.g[0],P=N.g[1],V=N.g[2];var M=N.g[3],C=A+(M^P&(V^M))+D[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=M+(V^A&(P^V))+D[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=V+(P^M&(A^P))+D[2]+606105819&4294967295,V=M+(C<<17&4294967295|C>>>15),C=P+(A^V&(M^A))+D[3]+3250441966&4294967295,P=V+(C<<22&4294967295|C>>>10),C=A+(M^P&(V^M))+D[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(V^A&(P^V))+D[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=V+(P^M&(A^P))+D[6]+2821735955&4294967295,V=M+(C<<17&4294967295|C>>>15),C=P+(A^V&(M^A))+D[7]+4249261313&4294967295,P=V+(C<<22&4294967295|C>>>10),C=A+(M^P&(V^M))+D[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(V^A&(P^V))+D[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=V+(P^M&(A^P))+D[10]+4294925233&4294967295,V=M+(C<<17&4294967295|C>>>15),C=P+(A^V&(M^A))+D[11]+2304563134&4294967295,P=V+(C<<22&4294967295|C>>>10),C=A+(M^P&(V^M))+D[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(V^A&(P^V))+D[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=V+(P^M&(A^P))+D[14]+2792965006&4294967295,V=M+(C<<17&4294967295|C>>>15),C=P+(A^V&(M^A))+D[15]+1236535329&4294967295,P=V+(C<<22&4294967295|C>>>10),C=A+(V^M&(P^V))+D[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^V&(A^P))+D[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=V+(A^P&(M^A))+D[11]+643717713&4294967295,V=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(V^M))+D[0]+3921069994&4294967295,P=V+(C<<20&4294967295|C>>>12),C=A+(V^M&(P^V))+D[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^V&(A^P))+D[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=V+(A^P&(M^A))+D[15]+3634488961&4294967295,V=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(V^M))+D[4]+3889429448&4294967295,P=V+(C<<20&4294967295|C>>>12),C=A+(V^M&(P^V))+D[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^V&(A^P))+D[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=V+(A^P&(M^A))+D[3]+4107603335&4294967295,V=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(V^M))+D[8]+1163531501&4294967295,P=V+(C<<20&4294967295|C>>>12),C=A+(V^M&(P^V))+D[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^V&(A^P))+D[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=V+(A^P&(M^A))+D[7]+1735328473&4294967295,V=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(V^M))+D[12]+2368359562&4294967295,P=V+(C<<20&4294967295|C>>>12),C=A+(P^V^M)+D[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^V)+D[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=V+(M^A^P)+D[11]+1839030562&4294967295,V=M+(C<<16&4294967295|C>>>16),C=P+(V^M^A)+D[14]+4259657740&4294967295,P=V+(C<<23&4294967295|C>>>9),C=A+(P^V^M)+D[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^V)+D[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=V+(M^A^P)+D[7]+4139469664&4294967295,V=M+(C<<16&4294967295|C>>>16),C=P+(V^M^A)+D[10]+3200236656&4294967295,P=V+(C<<23&4294967295|C>>>9),C=A+(P^V^M)+D[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^V)+D[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=V+(M^A^P)+D[3]+3572445317&4294967295,V=M+(C<<16&4294967295|C>>>16),C=P+(V^M^A)+D[6]+76029189&4294967295,P=V+(C<<23&4294967295|C>>>9),C=A+(P^V^M)+D[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^V)+D[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=V+(M^A^P)+D[15]+530742520&4294967295,V=M+(C<<16&4294967295|C>>>16),C=P+(V^M^A)+D[2]+3299628645&4294967295,P=V+(C<<23&4294967295|C>>>9),C=A+(V^(P|~M))+D[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~V))+D[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=V+(A^(M|~P))+D[14]+2878612391&4294967295,V=M+(C<<15&4294967295|C>>>17),C=P+(M^(V|~A))+D[5]+4237533241&4294967295,P=V+(C<<21&4294967295|C>>>11),C=A+(V^(P|~M))+D[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~V))+D[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=V+(A^(M|~P))+D[10]+4293915773&4294967295,V=M+(C<<15&4294967295|C>>>17),C=P+(M^(V|~A))+D[1]+2240044497&4294967295,P=V+(C<<21&4294967295|C>>>11),C=A+(V^(P|~M))+D[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~V))+D[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=V+(A^(M|~P))+D[6]+2734768916&4294967295,V=M+(C<<15&4294967295|C>>>17),C=P+(M^(V|~A))+D[13]+1309151649&4294967295,P=V+(C<<21&4294967295|C>>>11),C=A+(V^(P|~M))+D[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~V))+D[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=V+(A^(M|~P))+D[2]+718787259&4294967295,V=M+(C<<15&4294967295|C>>>17),C=P+(M^(V|~A))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+M&4294967295}i.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var P=A-this.blockSize,D=this.B,V=this.h,M=0;M<A;){if(V==0)for(;M<=P;)o(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<A;)if(D[V++]=N.charCodeAt(M++),V==this.blockSize){o(this,D),V=0;break}}else for(;M<A;)if(D[V++]=N[M++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=A},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var P=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=P&255,P/=256;for(this.u(N),N=Array(16),A=P=0;4>A;++A)for(var D=0;32>D;D+=8)N[P++]=this.g[A]>>>D&255;return N};function l(N,A){var P=d;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=A(N)}function h(N,A){this.h=A;for(var P=[],D=!0,V=N.length-1;0<=V;V--){var M=N[V]|0;D&&M==A||(P[V]=M,D=!1)}this.g=P}var d={};function m(N){return-128<=N&&128>N?l(N,function(A){return new h([A|0],0>A?-1:0)}):new h([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return I;if(0>N)return O(v(-N));for(var A=[],P=1,D=0;N>=P;D++)A[D]=N/P|0,P*=4294967296;return new h(A,0)}function y(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return O(y(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=v(Math.pow(A,8)),D=I,V=0;V<N.length;V+=8){var M=Math.min(8,N.length-V),C=parseInt(N.substring(V,V+M),A);8>M?(M=v(Math.pow(A,M)),D=D.j(M).add(v(C))):(D=D.j(P),D=D.add(v(C)))}return D}var I=m(0),S=m(1),k=m(16777216);n=h.prototype,n.m=function(){if(F(this))return-O(this).m();for(var N=0,A=1,P=0;P<this.g.length;P++){var D=this.i(P);N+=(0<=D?D:4294967296+D)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(B(this))return"0";if(F(this))return"-"+O(this).toString(N);for(var A=v(Math.pow(N,6)),P=this,D="";;){var V=ie(P,A).g;P=$(P,V.j(A));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=V,B(P))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function B(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function F(N){return N.h==-1}n.l=function(N){return N=$(this,N),F(N)?-1:B(N)?0:1};function O(N){for(var A=N.g.length,P=[],D=0;D<A;D++)P[D]=~N.g[D];return new h(P,~N.h).add(S)}n.abs=function(){return F(this)?O(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),P=[],D=0,V=0;V<=A;V++){var M=D+(this.i(V)&65535)+(N.i(V)&65535),C=(M>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);D=C>>>16,M&=65535,C&=65535,P[V]=C<<16|M}return new h(P,P[P.length-1]&-2147483648?-1:0)};function $(N,A){return N.add(O(A))}n.j=function(N){if(B(this)||B(N))return I;if(F(this))return F(N)?O(this).j(O(N)):O(O(this).j(N));if(F(N))return O(this.j(O(N)));if(0>this.l(k)&&0>N.l(k))return v(this.m()*N.m());for(var A=this.g.length+N.g.length,P=[],D=0;D<2*A;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<N.g.length;V++){var M=this.i(D)>>>16,C=this.i(D)&65535,nt=N.i(V)>>>16,ce=N.i(V)&65535;P[2*D+2*V]+=C*ce,ee(P,2*D+2*V),P[2*D+2*V+1]+=M*ce,ee(P,2*D+2*V+1),P[2*D+2*V+1]+=C*nt,ee(P,2*D+2*V+1),P[2*D+2*V+2]+=M*nt,ee(P,2*D+2*V+2)}for(D=0;D<A;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=A;D<2*A;D++)P[D]=0;return new h(P,0)};function ee(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function ne(N,A){this.g=N,this.h=A}function ie(N,A){if(B(A))throw Error("division by zero");if(B(N))return new ne(I,I);if(F(N))return A=ie(O(N),A),new ne(O(A.g),O(A.h));if(F(A))return A=ie(N,O(A)),new ne(O(A.g),A.h);if(30<N.g.length){if(F(N)||F(A))throw Error("slowDivide_ only works with positive integers.");for(var P=S,D=A;0>=D.l(N);)P=Re(P),D=Re(D);var V=he(P,1),M=he(D,1);for(D=he(D,2),P=he(P,2);!B(D);){var C=M.add(D);0>=C.l(N)&&(V=V.add(P),M=C),D=he(D,1),P=he(P,1)}return A=$(N,V.j(A)),new ne(V,A)}for(V=I;0<=N.l(A);){for(P=Math.max(1,Math.floor(N.m()/A.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=v(P),C=M.j(A);F(C)||0<C.l(N);)P-=D,M=v(P),C=M.j(A);B(M)&&(M=S),V=V.add(M),N=$(N,C)}return new ne(V,N)}n.A=function(N){return ie(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)&N.i(D);return new h(P,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)|N.i(D);return new h(P,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)^N.i(D);return new h(P,this.h^N.h)};function Re(N){for(var A=N.g.length+1,P=[],D=0;D<A;D++)P[D]=N.i(D)<<1|N.i(D-1)>>>31;return new h(P,N.h)}function he(N,A){var P=A>>5;A%=32;for(var D=N.g.length-P,V=[],M=0;M<D;M++)V[M]=0<A?N.i(M+P)>>>A|N.i(M+P+1)<<32-A:N.i(M+P);return new h(V,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=y,bi=h}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,Za,_w,fc,wf,ww,Ew,Tw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tc=="object"&&tc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in _))break e;_=_[j]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,j={next:function(){if(!T&&_<u.length){var H=_++;return{value:p(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function y(u,p,_){return u.call.apply(u.bind,arguments)}function I(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(p,j)}}return function(){return u.apply(p,arguments)}}function S(u,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:I,S.apply(null,arguments)}function k(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function B(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,j,H){for(var re=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)re[$e-2]=arguments[$e];return p.prototype[j].apply(T,re)}}function F(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function O(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const j=u.length||0,H=T.length||0;u.length=j+H;for(let re=0;re<H;re++)u[j+re]=T[re]}else u.push(T)}}class ${constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ee(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ie(u){return ie[" "](u),u}ie[" "]=function(){};var Re=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function he(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function N(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function A(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,p){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)u[_]=T[_];for(let H=0;H<P.length;H++)_=P[H],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function V(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function M(u){d.setTimeout(()=>{throw u},0)}function C(){var u=de;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class nt{constructor(){this.h=this.g=null}add(p,_){const T=ce.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ce=new $(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,X=!1,de=new nt,se=()=>{const u=d.Promise.resolve(void 0);_e=()=>{u.then(L)}};var L=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){M(_)}var p=ce;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}X=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,p),d.removeEventListener("test",_,p)}catch{}return u})();function xe(u,p){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Re){e:{try{ie(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}B(xe,ye);var Ve={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),ze=0;function We(u,p,_,T,j){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=j,this.key=++ze,this.da=this.fa=!1}function At(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Er(u){this.src=u,this.g={},this.h=0}Er.prototype.add=function(u,p,_,T,j){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var re=Jr(u,p,T,j);return-1<re?(p=u[re],_||(p.fa=!1)):(p=new We(p,this.src,H,!!T,j),p.fa=_,u.push(p)),p};function js(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],j=Array.prototype.indexOf.call(T,p,void 0),H;(H=0<=j)&&Array.prototype.splice.call(T,j,1),H&&(At(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Jr(u,p,_,T){for(var j=0;j<u.length;++j){var H=u[j];if(!H.da&&H.listener==p&&H.capture==!!_&&H.ha==T)return j}return-1}var Gi="closure_lm_"+(1e6*Math.random()|0),Us={};function ra(u,p,_,T,j){if(Array.isArray(p)){for(var H=0;H<p.length;H++)ra(u,p[H],_,T,j);return null}return _=oa(_),u&&u[Fe]?u.K(p,_,v(T)?!!T.capture:!1,j):ia(u,p,_,!1,T,j)}function ia(u,p,_,T,j,H){if(!p)throw Error("Invalid event type");var re=v(j)?!!j.capture:!!j,$e=zs(u);if($e||(u[Gi]=$e=new Er(u)),_=$e.add(p,_,T,re,H),_.proxy)return _;if(T=jl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Pe||(j=re),j===void 0&&(j=!1),u.addEventListener(p.toString(),T,j);else if(u.attachEvent)u.attachEvent(Ir(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function jl(){function u(_){return p.call(u.src,u.listener,_)}const p=sa;return u}function Fs(u,p,_,T,j){if(Array.isArray(p))for(var H=0;H<p.length;H++)Fs(u,p[H],_,T,j);else T=v(T)?!!T.capture:!!T,_=oa(_),u&&u[Fe]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],_=Jr(H,_,T,j),-1<_&&(At(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=zs(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Jr(p,_,T,j)),(_=-1<u?p[u]:null)&&Tr(_))}function Tr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Fe])js(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(Ir(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=zs(p))?(js(_,u),_.h==0&&(_.src=null,p[Gi]=null)):At(u)}}}function Ir(u){return u in Us?Us[u]:Us[u]="on"+u}function sa(u,p){if(u.da)u=!0;else{p=new xe(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&Tr(u),u=_.call(T,p)}return u}function zs(u){return u=u[Gi],u instanceof Er?u:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(u){return typeof u=="function"?u:(u[Bs]||(u[Bs]=function(p){return u.handleEvent(p)}),u[Bs])}function _t(){K.call(this),this.i=new Er(this),this.M=this,this.F=null}B(_t,K),_t.prototype[Fe]=!0,_t.prototype.removeEventListener=function(u,p,_,T){Fs(this,u,p,_,T)};function wt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ye(p,u);else if(p instanceof ye)p.target=p.target||u;else{var j=p;p=new ye(T,u),D(p,j)}if(j=!0,_)for(var H=_.length-1;0<=H;H--){var re=p.g=_[H];j=Sr(re,T,!0,p)&&j}if(re=p.g=u,j=Sr(re,T,!0,p)&&j,j=Sr(re,T,!1,p)&&j,_)for(H=0;H<_.length;H++)re=p.g=_[H],j=Sr(re,T,!1,p)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)At(_[T]);delete u.g[p],u.h--}}this.F=null},_t.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},_t.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function Sr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,H=0;H<p.length;++H){var re=p[H];if(re&&!re.da&&re.capture==_){var $e=re.listener,Et=re.ha||re.src;re.fa&&js(u.i,re),j=$e.call(Et,T)!==!1&&j}}return j&&!T.defaultPrevented}function aa(u,p,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:d.setTimeout(u,p||0)}function Yr(u){u.g=aa(()=>{u.g=null,u.i&&(u.i=!1,Yr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ki extends K{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Yr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(u){K.call(this),this.h=u,this.g={}}B(Qi,K);var la=[];function ua(u){he(u.g,function(p,_){this.g.hasOwnProperty(_)&&Tr(p)},u),u.g={}}Qi.prototype.N=function(){Qi.aa.N.call(this),ua(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Xi(){}Xi.prototype.h=null;function $s(u){return u.h||(u.h=u.i())}function qs(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){ye.call(this,"d")}B(Zn,ye);function Hs(){ye.call(this,"c")}B(Hs,ye);var er={},fa=null;function Ji(){return fa=fa||new _t}er.La="serverreachability";function pa(u){ye.call(this,er.La,u)}B(pa,ye);function Ar(u){const p=Ji();wt(p,new pa(p))}er.STAT_EVENT="statevent";function ma(u,p){ye.call(this,er.STAT_EVENT,u),this.stat=p}B(ma,ye);function ut(u){const p=Ji();wt(p,new ma(p,u))}er.Ma="timingevent";function Ws(u,p){ye.call(this,er.Ma,u),this.size=p}B(Ws,ye);function On(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},p)}function Yi(){this.g=!0}Yi.prototype.xa=function(){this.g=!1};function Zi(u,p,_,T,j,H){u.info(function(){if(u.g)if(H)for(var re="",$e=H.split("&"),Et=0;Et<$e.length;Et++){var Le=$e[Et].split("=");if(1<Le.length){var Rt=Le[0];Le=Le[1];var pt=Rt.split("_");re=2<=pt.length&&pt[1]=="type"?re+(Rt+"="+Le+"&"):re+(Rt+"=redacted&")}}else re=null;else re=H;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+p+`
`+_+`
`+re})}function Gs(u,p,_,T,j,H,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+p+`
`+_+`
`+H+" "+re})}function Vn(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+gh(u,_)+(T?" "+T:"")})}function ga(u,p){u.info(function(){return"TIMEOUT: "+p})}Yi.prototype.info=function(){};function gh(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var re=1;re<j.length;re++)j[re]=""}}}}return ca(_)}catch{return p}}var Ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ul={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function es(){}B(es,Xi),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},Ln=new es;function Mn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fl}function Fl(){this.i=null,this.g="",this.h=!1}var ya={},Qs={};function Xs(u,p,_){u.L=1,u.v=ri(dn(p)),u.m=_,u.P=!0,va(u,null)}function va(u,p){u.F=Date.now(),Ge(u),u.A=dn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),si(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Fl,u.g=iu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Ki(S(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(la[0]=j.toString()),j=la);for(var H=0;H<j.length;H++){var re=ra(_,j[H],T||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Ar(),Zi(u.i,u.u,u.A,u.l,u.R,u.m)}Mn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yt(u)==3?p.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const pt=Yt(this.g);var p=this.g.Ba();const In=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||pt!=4||p==7||(p==8||0>=In?Ar(3):Ar(2)),ts(this);var _=this.g.Z();this.X=_;t:if(zl(this)){var T=Sa(this.g);u="";var j=T.length,H=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Zr(this);var re="";break t}this.h.i=new d.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(H&&p==j-1)});T.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Gs(this.i,this.u,this.A,this.l,this.R,pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Et=this.g;if(($e=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee($e)){var Le=$e;break t}}Le=null}if(_=Le)Vn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,_);else{this.o=!1,this.s=3,ut(12),En(this),Zr(this);break e}}if(this.P){_=!0;let pn;for(;!this.J&&this.C<re.length;)if(pn=yh(this,re),pn==Qs){pt==4&&(this.s=4,ut(14),_=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==ya){this.s=4,ut(15),Vn(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Vn(this.i,this.l,pn,null),_a(this,pn);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||re.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)Vn(this.i,this.l,re,"[Invalid Chunked Response]"),En(this),Zr(this);else if(0<re.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Ra(Rt),Rt.M=!0,ut(11))}}else Vn(this.i,this.l,re,null),_a(this,re);pt==4&&En(this),this.o&&!this.J&&(pt==4?ao(this.j,this):(this.o=!1,Ge(this)))}else no(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),En(this),Zr(this)}}}catch{}finally{}};function zl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function yh(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?Qs:(_=Number(p.substring(_,T)),isNaN(_)?ya:(T+=1,T+_>p.length?Qs:(p=p.slice(T,T+_),u.C=T+_,p)))}Mn.prototype.cancel=function(){this.J=!0,En(this)};function Ge(u){u.S=Date.now()+u.I,Bl(u,u.I)}function Bl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=On(S(u.ba,u),p)}function ts(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Mn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ga(this.i,this.A),this.L!=2&&(Ar(),ut(17)),En(this),this.s=2,Zr(this)):Bl(this,this.S-u)};function Zr(u){u.j.G==0||u.J||ao(u.j,u)}function En(u){ts(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ua(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function _a(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Wt(_.h,u))){if(!u.K&&Wt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)oo(_),Bn(_);else break e;so(_),ut(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=On(S(_.Za,_),6e3));if(1>=ql(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else xr(_,11)}else if((u.K||_.g==u)&&oo(_),!ee(p))for(j=_.Da.g.parse(p),p=0;p<j.length;p++){let Le=j[p];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Rt=Le[3];Rt!=null&&(_.la=Rt,_.j.info("VER="+_.la));const pt=Le[4];pt!=null&&(_.Aa=pt,_.j.info("SVER="+_.Aa));const In=Le[5];In!=null&&typeof In=="number"&&0<In&&(T=1.5*In,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const pn=u.g;if(pn){const ls=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var H=T.h;H.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(wa(H,H.h),H.h=null))}if(T.D){const uo=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(T.ya=uo,qe(T.I,T.D,uo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var re=u;if(T.qa=ru(T,T.J?T.ia:null,T.W),re.K){Hl(T.h,re);var $e=re,Et=T.L;Et&&($e.I=Et),$e.B&&(ts($e),Ge($e)),T.g=re}else as(T);0<_.i.length&&ir(_)}else Le[0]!="stop"&&Le[0]!="close"||xr(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?xr(_,7):Dt(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}Ar(4)}catch{}}var $l=class{constructor(u,p){this.g=u,this.map=p}};function ns(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ql(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function wa(u,p){u.g?u.g.add(p):u.h=p}function Hl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ns.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return F(u.i)}function Js(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Ys(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function ei(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ys(u),T=Js(u),j=T.length,H=0;H<j;H++)p.call(void 0,T[H],_&&_[H],u)}var rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vh(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),j=null;if(0<=T){var H=u[_].substring(0,T);j=u[_].substring(T+1)}else H=u[_];p(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Rr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Rr){this.h=u.h,is(this,u.j),this.o=u.o,this.g=u.g,ti(this,u.s),this.l=u.l;var p=u.i,_=new tr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),ni(this,_),this.m=u.m}else u&&(p=String(u).match(rs))?(this.h=!1,is(this,p[1]||"",!0),this.o=Oe(p[2]||""),this.g=Oe(p[3]||"",!0),ti(this,p[4]),this.l=Oe(p[5]||"",!0),ni(this,p[6]||"",!0),this.m=Oe(p[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}Rr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ii(p,Zs,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ii(p,Zs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ii(_,_.charAt(0)=="/"?Ql:Kl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ii(_,Ea)),u.join("")};function dn(u){return new Rr(u)}function is(u,p,_){u.j=_?Oe(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ti(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ni(u,p,_){p instanceof tr?(u.i=p,nr(u.i,u.h)):(_||(p=ii(p,Xl)),u.i=new tr(p,u.h))}function qe(u,p,_){u.i.set(p,_)}function ri(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ii(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Gl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Gl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zs=/[#\/\?@]/g,Kl=/[#\?:]/g,Ql=/[#\?]/g,Xl=/[#\?@]/g,Ea=/#/g;function tr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&vh(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=tr.prototype,n.add=function(u,p){Nt(this),this.i=null,u=Tn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function jn(u,p){Nt(u),p=Tn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Un(u,p){return Nt(u),p=Tn(u,p),u.g.has(p)}n.forEach=function(u,p){Nt(this),this.g.forEach(function(_,T){_.forEach(function(j){u.call(p,j,T,this)},this)},this)},n.na=function(){Nt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const j=u[T];for(let H=0;H<j.length;H++)_.push(p[T])}return _},n.V=function(u){Nt(this);let p=[];if(typeof u=="string")Un(this,u)&&(p=p.concat(this.g.get(Tn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},n.set=function(u,p){return Nt(this),this.i=null,u=Tn(this,u),Un(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function si(u,p,_){jn(u,p),0<_.length&&(u.i=null,u.g.set(Tn(u,p),F(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const H=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var j=H;re[T]!==""&&(j+="="+encodeURIComponent(String(re[T]))),u.push(j)}}return this.i=u.join("&")};function Tn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function nr(u,p){p&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(_,T){var j=T.toLowerCase();T!=j&&(jn(this,T),si(this,j,_))},u)),u.j=p}function _h(u,p){const _=new Yi;if(d.Image){const T=new Image;T.onload=k(Jt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=k(Jt,_,"TestLoadImage: error",!1,p,T),T.onabort=k(Jt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=k(Jt,_,"TestLoadImage: timeout",!1,p,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Jl(u,p){const _=new Yi,T=new AbortController,j=setTimeout(()=>{T.abort(),Jt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(j),H.ok?Jt(_,"TestPingServer: ok",!0,p):Jt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Jt(_,"TestPingServer: error",!1,p)})}function Jt(u,p,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function wh(){this.g=new da}function Yl(u,p,_){const T=_||"";try{ei(u,function(j,H){let re=j;v(j)&&(re=ca(j)),p.push(T+H+"="+encodeURIComponent(re))})}catch(j){throw p.push(T+"type="+encodeURIComponent("_badmap")),j}}function Cr(u){this.l=u.Ub||null,this.j=u.eb||!1}B(Cr,Xi),Cr.prototype.g=function(){return new ss(this.l,this.j)},Cr.prototype.i=(function(u){return function(){return u}})({});function ss(u,p){_t.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(ss,_t),n=ss.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,zn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||d).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Fn(this):zn(this),this.readyState==3&&Zl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Fn(this))},n.Qa=function(u){this.g&&(this.response=u,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zn(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Pr(u){let p="";return he(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function oi(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Pr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):qe(u,p,_))}function Ze(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Ze,_t);var Eh=/^https?$/i,Ta=["POST","PUT"];n=Ze.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?$s(this.o):$s(Ln),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){os(this,H);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())_.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ta,p,void 0))||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of _)this.g.setRequestHeader(H,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{to(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){os(this,H)}};function os(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,eo(u),fn(u)}function eo(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),fn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)aa(u.Ea,0,u);else if(wt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=re===0){var j=String(u.D).match(rs)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Eh.test(j?j.toLowerCase():"")}_=T}if(_)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var H=2<Yt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",eo(u)}}finally{fn(u)}}}}function fn(u,p){if(u.g){to(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||wt(u,"ready");try{_.onreadystatechange=T}catch{}}}function to(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),ha(p)}};function Sa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function no(u){const p={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ee(u[T]))continue;var _=V(u[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=p[j]||[];p[j]=H,H.push(_)}N(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Aa(u){this.Aa=0,this.i=[],this.j=new Yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,u),this.cb=rr("retryDelaySeedMs",1e4,u),this.Wa=rr("forwardChannelMaxRetries",2,u),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(u&&u.concurrentRequestLimit),this.Da=new wh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Aa.prototype,n.la=8,n.G=1,n.connect=function(u,p,_,T){ut(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=ru(this,null,this.W),ir(this)};function Dt(u){if(ro(u),u.G==3){var p=u.U++,_=dn(u.I);if(qe(_,"SID",u.K),qe(_,"RID",p),qe(_,"TYPE","terminate"),kr(u,_),p=new Mn(u,u.j,p),p.L=2,p.v=ri(dn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=p.v,_=!0),_||(p.g=iu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ge(p)}nu(u)}function Bn(u){u.g&&(Ra(u),u.g.cancel(),u.g=null)}function ro(u){Bn(u),u.u&&(d.clearTimeout(u.u),u.u=null),oo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function ir(u){if(!hn(u.h)&&!u.s){u.s=!0;var p=u.Ga;_e||se(),X||(_e(),X=!0),de.add(p,u),u.B=0}}function Th(u,p){return ql(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=On(S(u.Ga,u,p),tu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Mn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=A(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ai(this,j,p),_=dn(this.I),qe(_,"RID",u),qe(_,"CVER",22),this.D&&qe(_,"X-HTTP-Session-Id",this.D),kr(this,_),H&&(this.O?p="headers="+encodeURIComponent(String(Pr(H)))+"&"+p:this.m&&oi(_,this.m,H)),wa(this.h,j),this.Ua&&qe(_,"TYPE","init"),this.P?(qe(_,"$req",p),qe(_,"SID","null"),j.T=!0,Xs(j,_,null)):Xs(j,_,p),this.G=2}}else this.G==3&&(u?io(this,u):this.i.length==0||hn(this.h)||io(this))};function io(u,p){var _;p?_=p.l:_=u.U++;const T=dn(u.I);qe(T,"SID",u.K),qe(T,"RID",_),qe(T,"AID",u.T),kr(u,T),u.m&&u.o&&oi(T,u.m,u.o),_=new Mn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ai(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wa(u.h,_),Xs(_,T,p)}function kr(u,p){u.H&&he(u.H,function(_,T){qe(p,T,_)}),u.l&&ei({},function(_,T){qe(p,T,_)})}function ai(u,p,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var j=u.i;let H=-1;for(;;){const re=["count="+_];H==-1?0<_?(H=j[0].g,re.push("ofs="+H)):H=0:re.push("ofs="+H);let $e=!0;for(let Et=0;Et<_;Et++){let Le=j[Et].g;const Rt=j[Et].map;if(Le-=H,0>Le)H=Math.max(0,j[Et].g-100),$e=!1;else try{Yl(Rt,re,"req"+Le+"_")}catch{T&&T(Rt)}}if($e){T=re.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function as(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;_e||se(),X||(_e(),X=!0),de.add(p,u),u.v=0}}function so(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=On(S(u.Fa,u),tu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=On(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Bn(this),eu(this))};function Ra(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=dn(u.qa);qe(p,"RID","rpc"),qe(p,"SID",u.K),qe(p,"AID",u.T),qe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(p,"TO",u.ja),qe(p,"TYPE","xmlhttp"),kr(u,p),u.m&&u.o&&oi(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ri(dn(p)),_.m=null,_.P=!0,va(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Bn(this),so(this),ut(19))};function oo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function ao(u,p){var _=null;if(u.g==p){oo(u),Ra(u),u.g=null;var T=2}else if(Wt(u.h,p))_=p.D,Hl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var j=u.B;T=Ji(),wt(T,new Ws(T,_)),ir(u)}else as(u);else if(j=p.s,j==3||j==0&&0<p.X||!(T==1&&Th(u,p)||T==2&&so(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),j){case 1:xr(u,5);break;case 4:xr(u,10);break;case 3:xr(u,6);break;default:xr(u,2)}}}function tu(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function xr(u,p){if(u.j.info("Error code "+p),p==2){var _=S(u.fb,u),T=u.Xa;const j=!T;T=new Rr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||is(T,"https"),ri(T),j?_h(T.toString(),_):Jl(T.toString(),_)}else ut(2);u.G=0,u.l&&u.l.sa(p),nu(u),ro(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const p=Wl(u.h);(p.length!=0||u.i.length!=0)&&(O(u.ka,p),O(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function ru(u,p,_){var T=_ instanceof Rr?dn(_):new Rr(_);if(T.g!="")p&&(T.g=p+"."+T.g),ti(T,T.s);else{var j=d.location;T=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var H=new Rr(null);T&&is(H,T),p&&(H.g=p),j&&ti(H,j),_&&(H.l=_),T=H}return _=u.D,p=u.ya,_&&p&&qe(T,_,p),qe(T,"VER",u.la),kr(u,T),T}function iu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ze(new Cr({eb:_})):new Ze(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}n=Ca.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lo(){}lo.prototype.g=function(u,p){return new Gt(u,p)};function Gt(u,p){_t.call(this),this.g=new Aa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ee(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ee(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new sr(this)}B(Gt,_t),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Dt(this.g)},Gt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ca(u),u=_);p.i.push(new $l(p.Ya++,u)),p.G==3&&ir(p)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Gt.aa.N.call(this)};function su(u){Zn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}B(su,Zn);function ou(){Hs.call(this),this.status=1}B(ou,Hs);function sr(u){this.g=u}B(sr,Ca),sr.prototype.ua=function(){wt(this.g,"a")},sr.prototype.ta=function(u){wt(this.g,new su(u))},sr.prototype.sa=function(u){wt(this.g,new ou)},sr.prototype.ra=function(){wt(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Tw=function(){return new lo},Ew=function(){return Ji()},ww=er,wf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,fc=Ks,Ul.COMPLETE="complete",_w=Ul,qs.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Za=qs,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,vw=Ze}).apply(typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{});const Zy="@firebase/firestore",ev="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Jf("@firebase/firestore");function No(){return xs.logLevel}function le(n,...e){if(xs.logLevel<=De.DEBUG){const t=e.map(cp);xs.debug(`Firestore (${Jo}): ${n}`,...t)}}function Wr(n,...e){if(xs.logLevel<=De.ERROR){const t=e.map(cp);xs.error(`Firestore (${Jo}): ${n}`,...t)}}function Li(n,...e){if(xs.logLevel<=De.WARN){const t=e.map(cp);xs.warn(`Firestore (${Jo}): ${n}`,...t)}}function cp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Iw(n,i,t)}function Iw(n,e,t){let i=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Wr(i),new Error(i)}function Be(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Iw(e,o,i)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class P1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new Sw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class x1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new x1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=b1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function Ef(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return ke(i,o);{const l=Aw(),h=O1(l.encode(nv(n,t)),l.encode(nv(e,t)));return h!==0?h:ke(i,o)}}t+=i>65535?2:1}return ke(n.length,e.length)}function nv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function O1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function zo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__name__";class cr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=cr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ke(e.length,t.length)}static compareSegments(e,t){const i=cr.isNumericId(e),o=cr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?cr.extractNumericId(e).compare(cr.extractNumericId(t)):Ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class Qe extends cr{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const V1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends cr{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return V1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rv}static keyField(){return new Lt([rv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Qe.fromString(e))}static fromName(e){return new ve(Qe.fromString(e).popFirst(5))}static empty(){return new ve(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L1(n,e,t,i){if(e===!0&&i===!0)throw new oe(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iv(n){if(!ve.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sv(n){if(ve.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Gr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yc(n);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function xl(n,e){if(!Cw(n))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=-62135596800,av=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*av);return new Ye(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ov)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:vt("string",Ye._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ye(0,0))}static max(){return new Ae(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function M1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Ye(t+1,0):new Ye(t,i));return new Mi(o,ve.empty(),e)}function j1(n){return new Mi(n.readTime,n.key,pl)}class Mi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mi(Ae.min(),ve.empty(),pl)}static max(){return new Mi(Ae.max(),ve.empty(),pl)}}function U1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==F1)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,l=0,h=!1;e.forEach((d=>{++o,d.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((y=>{h[v]=y,++d,d===l&&i(h)}),(y=>o(y)))}}))}static doWhile(e,t){return new G(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function B1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Zc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=-1;function eh(n){return n==null}function Pc(n){return n===0&&1/n==-1/0}function $1(n){return typeof n=="number"&&Number.isInteger(n)&&!Pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="";function q1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lv(e)),e=H1(n.get(t),e);return lv(e)}function H1(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Pw:t+="";break;default:t+=l}}return t}function lv(n){return n+Pw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nc(this.root,e,this.comparator,!0)}}class nc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=l??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new St(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xw("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const W1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(Be(!!n,39018),typeof n=="string"){let e=0;const t=W1.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ui(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="server_timestamp",Dw="__type__",bw="__previous_value__",Ow="__local_write_time__";function fp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dw])===null||t===void 0?void 0:t.stringValue)===Nw}function th(n){const e=n.mapValue.fields[bw];return fp(e)?th(e):e}function ml(n){const e=ji(n.mapValue.fields[Ow].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,i,o,l,h,d,m,v,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=y}}const kc="(default)";class gl{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__type__",K1="__max__",rc={mapValue:{}},Lw="__vector__",xc="value";function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fp(n)?4:X1(n)?9007199254740991:Q1(n)?10:11:Te(28295,{value:n})}function wr(n,e){if(n===e)return!0;const t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ml(n).isEqual(ml(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ji(o.timestampValue),d=ji(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ui(o.bytesValue).isEqual(Ui(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),d=ht(l.doubleValue);return h===d?Pc(h)===Pc(d):isNaN(h)&&isNaN(d)}return!1})(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(uv(h)!==uv(d))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(d[m]===void 0||!wr(h[m],d[m])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function yl(n,e){return(n.values||[]).find((t=>wr(t,e)))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Fi(n),i=Fi(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const d=ht(l.integerValue||l.doubleValue),m=ht(h.integerValue||h.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return hv(n.timestampValue,e.timestampValue);case 4:return hv(ml(n),ml(e));case 5:return Ef(n.stringValue,e.stringValue);case 6:return(function(l,h){const d=Ui(l),m=Ui(h);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const d=l.split("/"),m=h.split("/");for(let v=0;v<d.length&&v<m.length;v++){const y=ke(d[v],m[v]);if(y!==0)return y}return ke(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const d=ke(ht(l.latitude),ht(h.latitude));return d!==0?d:ke(ht(l.longitude),ht(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return dv(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var d,m,v,y;const I=l.fields||{},S=h.fields||{},k=(d=I[xc])===null||d===void 0?void 0:d.arrayValue,B=(m=S[xc])===null||m===void 0?void 0:m.arrayValue,F=ke(((v=k==null?void 0:k.values)===null||v===void 0?void 0:v.length)||0,((y=B==null?void 0:B.values)===null||y===void 0?void 0:y.length)||0);return F!==0?F:dv(k,B)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===rc.mapValue&&h===rc.mapValue)return 0;if(l===rc.mapValue)return 1;if(h===rc.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),v=h.fields||{},y=Object.keys(v);m.sort(),y.sort();for(let I=0;I<m.length&&I<y.length;++I){const S=Ef(m[I],y[I]);if(S!==0)return S;const k=Bo(d[m[I]],v[y[I]]);if(k!==0)return k}return ke(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function hv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=ji(n),i=ji(e),o=ke(t.seconds,i.seconds);return o!==0?o:ke(t.nanos,i.nanos)}function dv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Bo(t[o],i[o]);if(l)return l}return ke(t.length,i.length)}function $o(n){return Tf(n)}function Tf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ji(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ui(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Tf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Tf(t.fields[h])}`;return o+"}"})(n.mapValue):Te(61005,{value:n})}function pc(n){switch(Fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=th(n);return e?16+pc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ui(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+pc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Hi(i.fields,((l,h)=>{o+=l.length+pc(h)})),o})(n.mapValue);default:throw Te(13486,{value:n})}}function fv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function If(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function pv(n){return!!n&&"nullValue"in n}function mv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mc(n){return!!n&&"mapValue"in n}function Q1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vw])===null||t===void 0?void 0:t.stringValue)===Lw}function sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function X1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===K1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach(((h,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=sl(h):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Hi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new ln(sl(this.value))}}function Mw(n){const e=[];return Hi(n.fields,((t,i)=>{const o=new Lt([t]);if(mc(i)){const l=Mw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new qt(e,0,Ae.min(),Ae.min(),Ae.min(),ln.empty(),0)}static newFoundDocument(e,t,i,o){return new qt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new qt(e,2,t,Ae.min(),Ae.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Ae.min(),Ae.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function gv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(h.referenceValue),t.key):i=Bo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function yv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function J1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{}class yt extends jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Z1(e,t,i):t==="array-contains"?new nC(e,i):t==="in"?new rC(e,i):t==="not-in"?new iC(e,i):t==="array-contains-any"?new sC(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eC(e,i):new tC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends jw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Jn(e,t)}matches(e){return Uw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Uw(n){return n.op==="and"}function Fw(n){return Y1(n)&&Uw(n)}function Y1(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function Sf(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(Fw(n))return n.filters.map((e=>Sf(e))).join(",");{const e=n.filters.map((t=>Sf(t))).join(",");return`${n.op}(${e})`}}function zw(n,e){return n instanceof yt?(function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&wr(i.value,o.value)})(n,e):n instanceof Jn?(function(i,o){return o instanceof Jn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,d)=>l&&zw(h,o.filters[d])),!0):!1})(n,e):void Te(19439)}function Bw(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(n):n instanceof Jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bw).join(" ,")+"}"})(n):"Filter"}class Z1 extends yt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class eC extends yt{constructor(e,t){super(e,"in",t),this.keys=$w("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tC extends yt{constructor(e,t){super(e,"not-in",t),this.keys=$w("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $w(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class nC extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pp(t)&&yl(t.arrayValue,this.value)}}class rC extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class iC extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class sC extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.Pe=null}}function vv(n,e=null,t=[],i=[],o=null,l=null,h=null){return new oC(n,e,t,i,o,l,h)}function mp(n){const e=Ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Sf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$o(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$o(i))).join(",")),e.Pe=t}return e.Pe}function gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!J1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yv(n.startAt,e.startAt)&&yv(n.endAt,e.endAt)}function Af(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function aC(n,e,t,i,o,l,h,d){return new Nl(n,e,t,i,o,l,h,d)}function yp(n){return new Nl(n)}function _v(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qw(n){return n.collectionGroup!==null}function ol(n){const e=Ce(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new St(Lt.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(d=d.add(v.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Dc(l,i))})),t.has(Lt.keyField().canonicalString())||e.Te.push(new Dc(Lt.keyField(),i))}return e.Te}function pr(n){const e=Ce(n);return e.Ie||(e.Ie=lC(e,ol(n))),e.Ie}function lC(n,e){if(n.limitType==="F")return vv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Dc(o.field,l)}));const t=n.endAt?new Nc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Nc(n.startAt.position,n.startAt.inclusive):null;return vv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rf(n,e){const t=n.filters.concat([e]);return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Cf(n,e,t){return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nh(n,e){return gp(pr(n),pr(e))&&n.limitType===e.limitType}function Hw(n){return`${mp(pr(n))}|lt:${n.limitType}`}function Do(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Bw(o))).join(", ")}]`),eh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${i})`})(pr(n))}; limitType=${n.limitType})`}function rh(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ol(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,d,m){const v=gv(h,d,m);return h.inclusive?v<=0:v<0})(i.startAt,ol(i),o)||i.endAt&&!(function(h,d,m){const v=gv(h,d,m);return h.inclusive?v>=0:v>0})(i.endAt,ol(i),o))})(n,e)}function uC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ww(n){return(e,t)=>{let i=!1;for(const o of ol(n)){const l=cC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function cC(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,h,d){const m=h.data.field(l),v=d.data.field(l);return m!==null&&v!==null?Bo(m,v):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new st(ve.comparator);function Kr(){return hC}const Gw=new st(ve.comparator);function el(...n){let e=Gw;for(const t of n)e=e.insert(t.key,t);return e}function Kw(n){let e=Gw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function As(){return al()}function Qw(){return al()}function al(){return new Os((n=>n.toString()),((n,e)=>n.isEqual(e)))}const dC=new st(ve.comparator),fC=new St(ve.comparator);function be(...n){let e=fC;for(const t of n)e=e.add(t);return e}const pC=new St(ke);function mC(){return pC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function Xw(n){return{integerValue:""+n}}function gC(n,e){return $1(e)?Xw(e):vp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function yC(n,e,t){return n instanceof vl?(function(o,l){const h={fields:{[Dw]:{stringValue:Nw},[Ow]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&fp(l)&&(l=th(l)),l&&(h.fields[bw]=l),{mapValue:h}})(t,e):n instanceof _l?Yw(n,e):n instanceof wl?Zw(n,e):(function(o,l){const h=Jw(o,l),d=wv(h)+wv(o.Ee);return If(h)&&If(o.Ee)?Xw(d):vp(o.serializer,d)})(n,e)}function vC(n,e,t){return n instanceof _l?Yw(n,e):n instanceof wl?Zw(n,e):t}function Jw(n,e){return n instanceof bc?(function(i){return If(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vl extends ih{}class _l extends ih{constructor(e){super(),this.elements=e}}function Yw(n,e){const t=eE(e);for(const i of n.elements)t.some((o=>wr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class wl extends ih{constructor(e){super(),this.elements=e}}function Zw(n,e){let t=eE(e);for(const i of n.elements)t=t.filter((o=>!wr(o,i)));return{arrayValue:{values:t}}}class bc extends ih{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function wv(n){return ht(n.integerValue||n.doubleValue)}function eE(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.field=e,this.transform=t}}function wC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof _l&&o instanceof _l||i instanceof wl&&o instanceof wl?zo(i.elements,o.elements,wr):i instanceof bc&&o instanceof bc?wr(i.Ee,o.Ee):i instanceof vl&&o instanceof vl})(n.transform,e.transform)}class EC{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sh{}function tE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rE(n.key,mr.none()):new Dl(n.key,n.data,mr.none());{const t=n.data,i=ln.empty();let o=new St(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Wi(n.key,i,new vn(o.toArray()),mr.none())}}function TC(n,e,t){n instanceof Dl?(function(o,l,h){const d=o.value.clone(),m=Tv(o.fieldTransforms,l,h.transformResults);d.setAll(m),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Wi?(function(o,l,h){if(!gc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Tv(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(nE(o)),m.setAll(d),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ll(n,e,t,i){return n instanceof Dl?(function(l,h,d,m){if(!gc(l.precondition,h))return d;const v=l.value.clone(),y=Iv(l.fieldTransforms,m,h);return v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(n,e,t,i):n instanceof Wi?(function(l,h,d,m){if(!gc(l.precondition,h))return d;const v=Iv(l.fieldTransforms,m,h),y=h.data;return y.setAll(nE(l)),y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(n,e,t,i):(function(l,h,d){return gc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d})(n,e,t)}function IC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=Jw(i.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(i.field,l))}return t||null}function Ev(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&zo(i,o,((l,h)=>wC(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dl extends sh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wi extends sh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Tv(n,e,t){const i=new Map;Be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,vC(h,d,t[o]))}return i}function Iv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,yC(l,h,e))}return i}class rE extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SC extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&TC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Qw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const m=tE(h,d);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>Ev(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>Ev(t,i)))}}class _p{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return dC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new _p(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Me;function PC(n){switch(n){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function iE(n){if(n===void 0)return Wr("GRPC error has no .code"),W.UNKNOWN;switch(n){case gt.OK:return W.OK;case gt.CANCELLED:return W.CANCELLED;case gt.UNKNOWN:return W.UNKNOWN;case gt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case gt.INTERNAL:return W.INTERNAL;case gt.UNAVAILABLE:return W.UNAVAILABLE;case gt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case gt.NOT_FOUND:return W.NOT_FOUND;case gt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case gt.ABORTED:return W.ABORTED;case gt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case gt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:n})}}(Me=gt||(gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new bi([4294967295,4294967295],0);function Sv(n){const e=Aw().encode(n),t=new yw;return t.update(e),new Uint8Array(t.digest())}function Av(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new bi([t,i],0),new bi([o,l],0)]}class wp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(i<0)throw new tl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=bi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(bi.fromNumber(i)));return o.compare(kC)===1&&(o=new bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Sv(e),[i,o]=Av(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new wp(l,o,t);return i.forEach((d=>h.insert(d))),h}insert(e){if(this.fe===0)return;const t=Sv(e),[i,o]=Av(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new oh(Ae.min(),o,new st(ke),Kr(),be())}}class bl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new bl(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class sE{constructor(e,t){this.targetId=e,this.De=t}}class oE{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Rv{constructor(){this.ve=0,this.Ce=Cv(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),t=be(),i=be();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:l})}})),new bl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Cv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class xC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Kr(),this.je=ic(),this.Je=ic(),this.He=new st(ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Af(l))if(i===0){const h=new ve(l.path);this.Xe(t,h,qt.newNoDocument(h,Ae.min()))}else Be(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const d=this._t(e),m=d?this.ut(d,e,h):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ui(i).toUint8Array()}catch(m){if(m instanceof xw)return Li("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new wp(h,o,l)}catch(m){return Li(m instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const d=this.st(h);if(d){if(l.current&&Af(d.target)){const m=new ve(d.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,qt.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=be();this.Je.forEach(((l,h)=>{let d=!0;h.forEachWhile((m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new oh(e,t,this.He,this.ze,i);return this.ze=Kr(),this.je=ic(),this.Je=ic(),this.He=new st(ke),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Rv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new St(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new St(ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Rv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ic(){return new st(ve.comparator)}function Cv(){return new st(ve.comparator)}const NC={asc:"ASCENDING",desc:"DESCENDING"},DC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class OC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pf(n,e){return n.useProto3Json||eh(e)?e:{value:e}}function Oc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VC(n,e){return Oc(n,e.toTimestamp())}function gr(n){return Be(!!n,49232),Ae.fromTimestamp((function(t){const i=ji(t);return new Ye(i.seconds,i.nanos)})(n))}function Ep(n,e){return kf(n,e).canonicalString()}function kf(n,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lE(n){const e=Qe.fromString(n);return Be(fE(e),10190,{key:e.toString()}),e}function xf(n,e){return Ep(n.databaseId,e.path)}function tf(n,e){const t=lE(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(cE(t))}function uE(n,e){return Ep(n.databaseId,e)}function LC(n){const e=lE(n);return e.length===4?Qe.emptyPath():cE(e)}function Nf(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cE(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Pv(n,e,t){return{name:xf(n,e),fields:t.value.mapValue.fields}}function MC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,y){return v.useProto3Json?(Be(y===void 0||typeof y=="string",58123),Mt.fromBase64String(y||"")):(Be(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Mt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&(function(v){const y=v.code===void 0?W.UNKNOWN:iE(v.code);return new oe(y,v.message||"")})(h);t=new oE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=tf(n,i.document.name),l=gr(i.document.updateTime),h=i.document.createTime?gr(i.document.createTime):Ae.min(),d=new ln({mapValue:{fields:i.document.fields}}),m=qt.newFoundDocument(o,l,h,d),v=i.targetIds||[],y=i.removedTargetIds||[];t=new yc(v,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=tf(n,i.document),l=i.readTime?gr(i.readTime):Ae.min(),h=qt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new yc([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=tf(n,i.document),l=i.removedTargetIds||[];t=new yc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new CC(o,l),d=i.targetId;t=new sE(d,h)}}return t}function jC(n,e){let t;if(e instanceof Dl)t={update:Pv(n,e.key,e.value)};else if(e instanceof rE)t={delete:xf(n,e.key)};else if(e instanceof Wi)t={update:Pv(n,e.key,e.data),updateMask:GC(e.fieldMask)};else{if(!(e instanceof SC))return Te(16599,{Rt:e.type});t={verify:xf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const d=h.transform;if(d instanceof vl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _l)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bc)return{fieldPath:h.field.canonicalString(),increment:d.Ee};throw Te(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(n,e.precondition)),t}function UC(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?gr(o.updateTime):gr(l);return h.isEqual(Ae.min())&&(h=gr(l)),new EC(h,o.transformResults||[])})(t,e)))):[]}function FC(n,e){return{documents:[uE(n,e.path)]}}function zC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uE(n,o);const l=(function(v){if(v.length!==0)return dE(Jn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((y=>(function(S){return{field:bo(S.field),direction:qC(S.dir)}})(y)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=Pf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function BC(n){let e=LC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1,65062);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(I){const S=hE(I);return S instanceof Jn&&Fw(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((S=>(function(B){return new Dc(Oo(B.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(I){let S;return S=typeof I=="object"?I.value:I,eh(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(I){const S=!!I.before,k=I.values||[];return new Nc(k,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const S=!I.before,k=I.values||[];return new Nc(k,S)})(t.endAt)),aC(e,o,h,l,d,"F",m,v)}function $C(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oo(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Oo(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create(Oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Jn.create(t.compositeFilter.filters.map((i=>hE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function qC(n){return NC[n]}function HC(n){return DC[n]}function WC(n){return bC[n]}function bo(n){return{fieldPath:n.canonicalString()}}function Oo(n){return Lt.fromServerFormat(n.fieldPath)}function dE(n){return n instanceof yt?(function(t){if(t.op==="=="){if(mv(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(pv(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mv(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(pv(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:HC(t.op),value:t.value}}})(n):n instanceof Jn?(function(t){const i=t.getFilters().map((o=>dE(o)));return i.length===1?i[0]:{compositeFilter:{op:WC(t.op),filters:i}}})(n):Te(54877,{filter:n})}function GC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function fE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),d=Mt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.gt=e}}function QC(n){const e=BC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.Dn=new JC}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Mi.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class JC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(Qe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(pE,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new qo(0)}static ur(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",YC=1048576;function Nv([n,e],[t,i]){const o=ke(n,t);return o===0?ke(e,i):o}class ZC{constructor(e){this.Tr=e,this.buffer=new St(Nv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Nv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(xv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?le(xv,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.Rr(3e5)}))}}class tP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Zc.ue);const i=new ZC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(kv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,d,m,v;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,d=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),No()<=De.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-y}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${I} documents in `+(v-m)+`ms
Total Duration: ${v-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function nP(n,e){return new tP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.changes=new Os((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ll(i.mutation,o,vn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=be()){const o=As();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=el();return l.forEach(((d,m)=>{h=h.insert(d,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=As();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,d)=>{t.set(h,d)}))}))}computeViews(e,t,i,o){let l=Kr();const h=al(),d=(function(){return al()})();return t.forEach(((m,v)=>{const y=i.get(v.key);o.has(v.key)&&(y===void 0||y.mutation instanceof Wi)?l=l.insert(v.key,v):y!==void 0?(h.set(v.key,y.mutation.getFieldMask()),ll(y.mutation,v,y.mutation.getFieldMask(),Ye.now())):h.set(v.key,vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,y)=>h.set(v,y))),t.forEach(((v,y)=>{var I;return d.set(v,new iP(y,(I=h.get(v))!==null&&I!==void 0?I:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=al();let o=new st(((h,d)=>h-d)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const d of h)d.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let y=i.get(m)||vn.empty();y=d.applyToLocalView(v,y),i.set(m,y);const I=(o.get(d.batchId)||be()).add(m);o=o.insert(d.batchId,I)}))})).next((()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),v=m.key,y=m.value,I=Qw();y.forEach((S=>{if(!l.has(S)){const k=tE(t.get(S),i.get(S));k!==null&&I.set(S,k),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return G.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(As());let d=pl,m=l;return h.next((v=>G.forEach(v,((y,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),l.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{m=m.insert(y,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,be()))).next((y=>({batchId:d,changes:Kw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=el();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=el();return this.indexManager.getCollectionParents(e,l).next((d=>G.forEach(d,(m=>{const v=(function(I,S){return new Nl(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((y=>{y.forEach(((I,S)=>{h=h.insert(I,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const y=v.getKey();h.get(y)===null&&(h=h.insert(y,qt.newInvalidDocument(y)))}));let d=el();return h.forEach(((m,v)=>{const y=l.get(m);y!==void 0&&ll(y.mutation,v,vn.empty(),Ye.now()),rh(t,v)&&(d=d.insert(m,v))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:QC(o.bundledQuery),readTime:gr(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.overlays=new st(ve.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=As();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=As(),l=t.length+1,h=new ve(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const m=d.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((v,y)=>v-y));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let y=l.get(v.largestBatchId);y===null&&(y=As(),l=l.insert(v.largestBatchId,y)),y.set(v.getKey(),v)}}const d=As(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,y)=>d.set(v,y))),!(d.size()>=o)););return G.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new RC(t,i));let l=this.kr.get(t);l===void 0&&(l=be(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.qr=new St(xt.Qr),this.$r=new St(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ve(new Qe([])),i=new xt(t,e),o=new xt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ve(new Qe([])),i=new xt(t,e),o=new xt(t,e+1);let l=be();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new xt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ve.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new St(xt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new AC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.Yr=this.Yr.add(new xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?dp:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const d=this.Zr(h.Hr);l.push(d)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(ke);return t.forEach((o=>{const l=new xt(o,0),h=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(d=>{i=i.add(d.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const h=new xt(new ve(l),0);let d=new St(ke);return this.Yr.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(d=d.add(m.Hr)),!0)}),h),G.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(t.mutations,(o=>{const l=new xt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new xt(t,0),o=this.Yr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.ni=e,this.docs=(function(){return new st(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let i=Kr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():qt.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Kr();const h=t.path,d=new ve(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:v,value:{document:y}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||U1(j1(y),i)<=0||(o.has(y.key)||rh(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ri(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hP(this)}getSize(e){return G.resolve(this.size)}}class hP extends rP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.persistence=e,this.ii=new Os((t=>mp(t)),gp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Tp,this.targetCount=0,this._i=qo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zc(0),this.ci=!1,this.ci=!0,this.li=new lP,this.referenceDelegate=e(this),this.hi=new dP(this),this.indexManager=new XC,this.remoteDocumentCache=(function(o){return new cP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new KC(t),this.Ti=new oP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new uP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new fP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class fP extends z1{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Ai=new Tp,this.Ri=null}static Vi(e){return new Ip(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const o=ve.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Vc{constructor(e,t){this.persistence=e,this.gi=new Os((i=>q1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=nP(this,t)}static Vi(e,t){return new Vc(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return G.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((d=>{d||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pc(e.data.value)),t}Sr(e,t,i){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return uS()?8:B1(Ht())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new pP;return this.ws(e,t,h).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,h,d.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=De.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Do(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(No()<=De.DEBUG&&le("QueryEngine","Query:",Do(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=De.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Do(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(t))):G.resolve())}ps(e,t){if(_v(t))return G.resolve(null);let i=pr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Cf(t,null,"F"),i=pr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=be(...l);return this.gs.getDocuments(e,h).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.bs(t,d);return this.Ds(t,v,h,m.readTime)?this.ps(e,Cf(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ys(e,t,i,o){return _v(t)||o.isEqual(Ae.min())?G.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?G.resolve(null):(No()<=De.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Do(t)),this.vs(e,h,t,M1(o,pl)).next((d=>d)))}))}bs(e,t){let i=new St(Ww(e));return t.forEach(((o,l)=>{rh(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return No()<=De.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Do(t)),this.gs.getDocumentsMatchingQuery(e,t,Mi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="LocalStore",gP=3e8;class yP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new st(ke),this.Ms=new Os((l=>mp(l)),gp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function vP(n,e,t,i){return new yP(n,e,t,i)}async function gE(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],d=[];let m=be();for(const v of o){h.push(v.batchId);for(const y of v.mutations)m=m.add(y.key)}for(const v of l){d.push(v.batchId);for(const y of v.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:d})))}))}))}function _P(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,m,v,y){const I=v.batch,S=I.keys();let k=G.resolve();return S.forEach((B=>{k=k.next((()=>y.getEntry(m,B))).next((F=>{const O=v.docVersions.get(B);Be(O!==null,48541),F.version.compareTo(O)<0&&(I.applyToRemoteDocument(F,v),F.isValidDocument()&&(F.setReadTime(v.commitVersion),y.addEntry(F)))}))})),k.next((()=>d.mutationQueue.removeMutationBatch(m,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=be();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(m=m.add(d.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function yE(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function wP(n,e){const t=Ce(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((y,I)=>{const S=o.get(I);if(!S)return;d.push(t.hi.removeMatchingKeys(l,y.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,y.addedDocuments,I))));let k=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?k=k.withResumeToken(Mt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,i)),o=o.insert(I,k),(function(F,O,$){return F.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=gP?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,k,y)&&d.push(t.hi.updateTargetData(l,k))}));let m=Kr(),v=be();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(EP(l,h,e.documentUpdates).next((y=>{m=y.Ls,v=y.ks}))),!i.isEqual(Ae.min())){const y=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(y)}return G.waitFor(d).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function EP(n,e,t){let i=be(),o=be();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=Kr();return t.forEach(((d,m)=>{const v=l.get(d);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(d,m.readTime),h=h.insert(d,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(d,m)):le(Ap,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",m.version)})),{Ls:h,ks:o}}))}function TP(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=dp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function IP(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,G.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new Pi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Df(n,e,t){const i=Ce(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Zo(h))throw h;le(Ap,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Dv(n,e,t){const i=Ce(n);let o=Ae.min(),l=be();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,y){const I=Ce(m),S=I.Ms.get(y);return S!==void 0?G.resolve(I.Fs.get(S)):I.hi.getTargetData(v,y)})(i,h,pr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,d.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:be()))).next((d=>(SP(i,uC(e),d),{documents:d,qs:l})))))}function SP(n,e,t){let i=n.xs.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class bv{constructor(){this.activeTargetIds=mC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AP{constructor(){this.Fo=new bv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new bv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="ConnectivityMonitor";class Vv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(Ov,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(Ov,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc=null;function bf(){return sc===null?sc=(function(){return 268435456+Math.round(2147483648*Math.random())})():sc++,"0x"+sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="RestConnection",CP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===kc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=bf(),d=this.Go(e,t.toUriEncodedString());le(nf,`Sending RPC '${e}' ${h}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(d),y=Qr(v);return this.jo(e,d,m,i,y).then((I=>(le(nf,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Li(nf,`RPC '${e}' ${h} failed with error: `,I,"url: ",d,"request:",i),I}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=CP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class xP extends PP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=bf();return new Promise(((d,m)=>{const v=new vw;v.setWithCredentials(!0),v.listenOnce(_w.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case fc.NO_ERROR:const I=v.getResponseJson();le(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),d(I);break;case fc.TIMEOUT:le(Bt,`RPC '${e}' ${h} timed out`),m(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const S=v.getStatus();if(le(Bt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let k=v.getResponseJson();Array.isArray(k)&&(k=k[0]);const B=k==null?void 0:k.error;if(B&&B.status&&B.message){const F=(function($){const ee=$.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ee)>=0?ee:W.UNKNOWN})(B.status);m(new oe(F,B.message))}else m(new oe(W.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new oe(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{le(Bt,`RPC '${e}' ${h} completed.`)}}));const y=JSON.stringify(o);le(Bt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",y,i,15)}))}P_(e,t,i){const o=bf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Tw(),d=Ew(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=l.join("");le(Bt,`Creating RPC '${e}' stream ${o}: ${y}`,m);const I=h.createWebChannel(y,m);this.T_(I);let S=!1,k=!1;const B=new kP({Ho:O=>{k?le(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(S||(le(Bt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),le(Bt,`RPC '${e}' stream ${o} sending:`,O),I.send(O))},Yo:()=>I.close()}),F=(O,$,ee)=>{O.listen($,(ne=>{try{ee(ne)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return F(I,Za.EventType.OPEN,(()=>{k||(le(Bt,`RPC '${e}' stream ${o} transport opened.`),B.s_())})),F(I,Za.EventType.CLOSE,(()=>{k||(k=!0,le(Bt,`RPC '${e}' stream ${o} transport closed`),B.__(),this.I_(I))})),F(I,Za.EventType.ERROR,(O=>{k||(k=!0,Li(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),B.__(new oe(W.UNAVAILABLE,"The operation could not be completed")))})),F(I,Za.EventType.MESSAGE,(O=>{var $;if(!k){const ee=O.data[0];Be(!!ee,16349);const ne=ee,ie=(ne==null?void 0:ne.error)||(($=ne[0])===null||$===void 0?void 0:$.error);if(ie){le(Bt,`RPC '${e}' stream ${o} received error:`,ie);const Re=ie.status;let he=(function(P){const D=gt[P];if(D!==void 0)return iE(D)})(Re),N=ie.message;he===void 0&&(he=W.INTERNAL,N="Unknown error status: "+Re+" with message "+ie.message),k=!0,B.__(new oe(he,N)),I.close()}else le(Bt,`RPC '${e}' stream ${o} received:`,ee),B.a_(ee)}})),F(d,ww.STAT_EVENT,(O=>{O.stat===wf.PROXY?le(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===wf.NOPROXY&&le(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.o_()}),0),B}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n){return new OC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="PersistentStream";class _E{constructor(e,t,i,o,l,h,d,m){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new oe(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return le(Lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(le(Lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NP extends _E{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=MC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?gr(h.readTime):Ae.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Nf(this.serializer),t.addTarget=(function(l,h){let d;const m=h.target;if(d=Af(m)?{documents:FC(l,m)}:{query:zC(l,m).Vt},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=aE(l,h.resumeToken);const v=Pf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Oc(l,h.snapshotVersion.toTimestamp());const v=Pf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}return d})(this.serializer,e);const i=$C(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Nf(this.serializer),t.removeTarget=e,this.k_(t)}}class DP extends _E{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=UC(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Nf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{}class OP extends bP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,kf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(W.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Jo(e,kf(t,i),o,h,d,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(W.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class VP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Wr(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class LP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{Vs(this)&&(le(Ns,"Restarting streams for network reachability change."),await(async function(m){const v=Ce(m);v.Ia.add(4),await Ol(v),v.Aa.set("Unknown"),v.Ia.delete(4),await lh(v)})(this))}))})),this.Aa=new VP(i,o)}}async function lh(n){if(Vs(n))for(const e of n.da)await e(!0)}async function Ol(n){for(const e of n.da)await e(!1)}function wE(n,e){const t=Ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),kp(t)?Pp(t):ea(t).x_()&&Cp(t,e))}function Rp(n,e){const t=Ce(n),i=ea(t);t.Ta.delete(e),i.x_()&&EE(t,e),t.Ta.size===0&&(i.x_()?i.B_():Vs(t)&&t.Aa.set("Unknown"))}function Cp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(n).H_(e)}function EE(n,e){n.Ra.$e(e),ea(n).Y_(e)}function Pp(n){n.Ra=new xC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ea(n).start(),n.Aa.aa()}function kp(n){return Vs(n)&&!ea(n).M_()&&n.Ta.size>0}function Vs(n){return Ce(n).Ia.size===0}function TE(n){n.Ra=void 0}async function MP(n){n.Aa.set("Online")}async function jP(n){n.Ta.forEach(((e,t)=>{Cp(n,e)}))}async function UP(n,e){TE(n),kp(n)?(n.Aa.la(e),Pp(n)):n.Aa.set("Unknown")}async function FP(n,e,t){if(n.Aa.set("Online"),e instanceof oE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){le(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Lc(n,i)}else if(e instanceof yc?n.Ra.Ye(e):e instanceof sE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await yE(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const d=l.Ra.Pt(h);return d.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ta.get(v);y&&l.Ta.set(v,y.withResumeToken(m.resumeToken,h))}})),d.targetMismatches.forEach(((m,v)=>{const y=l.Ta.get(m);if(!y)return;l.Ta.set(m,y.withResumeToken(Mt.EMPTY_BYTE_STRING,y.snapshotVersion)),EE(l,m);const I=new Pi(y.target,m,v,y.sequenceNumber);Cp(l,I)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){le(Ns,"Failed to raise snapshot:",i),await Lc(n,i)}}async function Lc(n,e,t){if(!Zo(e))throw e;n.Ia.add(1),await Ol(n),n.Aa.set("Offline"),t||(t=()=>yE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Ns,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await lh(n)}))}function IE(n,e){return e().catch((t=>Lc(n,t,e)))}async function uh(n){const e=Ce(n),t=zi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:dp;for(;zP(e);)try{const o=await TP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,BP(e,o)}catch(o){await Lc(e,o)}SE(e)&&AE(e)}function zP(n){return Vs(n)&&n.Pa.length<10}function BP(n,e){n.Pa.push(e);const t=zi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function SE(n){return Vs(n)&&!zi(n).M_()&&n.Pa.length>0}function AE(n){zi(n).start()}async function $P(n){zi(n).na()}async function qP(n){const e=zi(n);for(const t of n.Pa)e.X_(t.mutations)}async function HP(n,e,t){const i=n.Pa.shift(),o=_p.from(i,e,t);await IE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await uh(n)}async function WP(n,e){e&&zi(n).Z_&&await(async function(i,o){if((function(h){return PC(h)&&h!==W.ABORTED})(o.code)){const l=i.Pa.shift();zi(i).N_(),await IE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await uh(i)}})(n,e),SE(n)&&AE(n)}async function Mv(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),le(Ns,"RemoteStore received new credentials");const i=Vs(t);t.Ia.add(3),await Ol(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await lh(t)}async function GP(n,e){const t=Ce(n);e?(t.Ia.delete(2),await lh(t)):e||(t.Ia.add(2),await Ol(t),t.Aa.set("Unknown"))}function ea(n){return n.Va||(n.Va=(function(t,i,o){const l=Ce(t);return l.ia(),new NP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:MP.bind(null,n),e_:jP.bind(null,n),n_:UP.bind(null,n),J_:FP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),kp(n)?Pp(n):n.Aa.set("Unknown")):(await n.Va.stop(),TE(n))}))),n.Va}function zi(n){return n.ma||(n.ma=(function(t,i,o){const l=Ce(t);return l.ia(),new DP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$P.bind(null,n),n_:WP.bind(null,n),ea:qP.bind(null,n),ta:HP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await uh(n)):(await n.ma.stop(),n.Pa.length>0&&(le(Ns,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new xp(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Np(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Zo(n))return new oe(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=el(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.fa=new st(ve.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Te(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ho{constructor(e,t,i,o,l,h,d,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((d=>{h.push({type:0,doc:d})})),new Ho(e,t,jo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class QP{constructor(){this.queries=Uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ce(t),l=o.queries;o.queries=Uv(),l.forEach(((h,d)=>{for(const m of d.wa)m.onError(i)}))})(this,new oe(W.ABORTED,"Firestore shutting down"))}}function Uv(){return new Os((n=>Hw(n)),nh)}async function RE(n,e){const t=Ce(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new KP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Np(h,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Dp(t)}async function CE(n,e){const t=Ce(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function XP(n,e){const t=Ce(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.wa)d.Ca(o)&&(i=!0);h.ya=o}}i&&Dp(t)}function JP(n,e,t){const i=Ce(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function Dp(n){n.Da.forEach((e=>{e.next()}))}var Of,Fv;(Fv=Of||(Of={})).Fa="default",Fv.Cache="cache";class PE{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.key=e}}class xE{constructor(e){this.key=e}}class YP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=Ww(e),this.eu=new jo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new jv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,I)=>{const S=o.get(y),k=rh(this.query,I)?I:null,B=!!S&&this.mutatedKeys.has(S.key),F=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let O=!1;S&&k?S.data.isEqual(k.data)?B!==F&&(i.track({type:3,doc:k}),O=!0):this.iu(S,k)||(i.track({type:2,doc:k}),O=!0,(m&&this.Xa(k,m)>0||v&&this.Xa(k,v)<0)&&(d=!0)):!S&&k?(i.track({type:0,doc:k}),O=!0):S&&!k&&(i.track({type:1,doc:S}),O=!0,(m||v)&&(d=!0)),O&&(k?(h=h.add(k),l=F?l.add(y):l.delete(y)):(h=h.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const y=this.query.limitType==="F"?h.last():h.first();h=h.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{eu:h,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((y,I)=>(function(k,B){const F=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:O})}};return F(k)-F(B)})(y.type,I.type)||this.Xa(y.doc,I.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,h.length!==0||v?{snapshot:new Ho(this.query,e.eu,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new jv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=be(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new xE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new kE(i))})),t}uu(e){this.Ha=e.qs,this.Za=be();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const bp="SyncEngine";class ZP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ek{constructor(e){this.key=e,this.lu=!1}}class tk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Os((d=>Hw(d)),nh),this.Tu=new Map,this.Iu=new Set,this.du=new st(ve.comparator),this.Eu=new Map,this.Au=new Tp,this.Ru={},this.Vu=new Map,this.mu=qo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function nk(n,e,t=!0){const i=LE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await NE(i,e,t,!0),o}async function rk(n,e){const t=LE(n);await NE(t,e,!0,!1)}async function NE(n,e,t,i){const o=await IP(n.localStore,pr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await ik(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&wE(n.remoteStore,o),d}async function ik(n,e,t,i,o){n.gu=(I,S,k)=>(async function(F,O,$,ee){let ne=O.view.nu($);ne.Ds&&(ne=await Dv(F.localStore,O.query,!1).then((({documents:N})=>O.view.nu(N,ne))));const ie=ee&&ee.targetChanges.get(O.targetId),Re=ee&&ee.targetMismatches.get(O.targetId)!=null,he=O.view.applyChanges(ne,F.isPrimaryClient,ie,Re);return Bv(F,O.targetId,he._u),he.snapshot})(n,I,S,k);const l=await Dv(n.localStore,e,!0),h=new YP(e,l.qs),d=h.nu(l.documents),m=bl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),v=h.applyChanges(d,n.isPrimaryClient,m);Bv(n,t,v._u);const y=new ZP(e,t,h);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),v.snapshot}async function sk(n,e,t){const i=Ce(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!nh(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Df(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Rp(i.remoteStore,o.targetId),Vf(i,o.targetId)})).catch(Yo)):(Vf(i,o.targetId),await Df(i.localStore,o.targetId,!0))}async function ok(n,e){const t=Ce(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Rp(t.remoteStore,i.targetId))}async function ak(n,e,t){const i=pk(n);try{const o=await(function(h,d){const m=Ce(h),v=Ye.now(),y=d.reduce(((k,B)=>k.add(B.key)),be());let I,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let B=Kr(),F=be();return m.Os.getEntries(k,y).next((O=>{B=O,B.forEach((($,ee)=>{ee.isValidDocument()||(F=F.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,B))).next((O=>{I=O;const $=[];for(const ee of d){const ne=IC(ee,I.get(ee.key).overlayedDocument);ne!=null&&$.push(new Wi(ee.key,ne,Mw(ne.value.mapValue),mr.exists(!0)))}return m.mutationQueue.addMutationBatch(k,v,$,d)})).next((O=>{S=O;const $=O.applyToLocalDocumentSet(I,F);return m.documentOverlayCache.saveOverlays(k,O.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:Kw(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,d,m){let v=h.Ru[h.currentUser.toKey()];v||(v=new st(ke)),v=v.insert(d,m),h.Ru[h.currentUser.toKey()]=v})(i,o.batchId,t),await Vl(i,o.changes),await uh(i.remoteStore)}catch(o){const l=Np(o,"Failed to persist write");t.reject(l)}}async function DE(n,e){const t=Ce(n);try{const i=await wP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Be(h.lu,14607):o.removedDocuments.size>0&&(Be(h.lu,42227),h.lu=!1))})),await Vl(t,i,e)}catch(i){await Yo(i)}}function zv(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const d=h.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(h,d){const m=Ce(h);m.onlineState=d;let v=!1;m.queries.forEach(((y,I)=>{for(const S of I.wa)S.va(d)&&(v=!0)})),v&&Dp(m)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lk(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new st(ve.comparator);h=h.insert(l,qt.newNoDocument(l,Ae.min()));const d=be().add(l),m=new oh(Ae.min(),new Map,new st(ke),h,d);await DE(i,m),i.du=i.du.remove(l),i.Eu.delete(e),Op(i)}else await Df(i.localStore,e,!1).then((()=>Vf(i,e,t))).catch(Yo)}async function uk(n,e){const t=Ce(n),i=e.batch.batchId;try{const o=await _P(t.localStore,e);OE(t,i,null),bE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vl(t,o)}catch(o){await Yo(o)}}async function ck(n,e,t){const i=Ce(n);try{const o=await(function(h,d){const m=Ce(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let y;return m.mutationQueue.lookupMutationBatch(v,d).next((I=>(Be(I!==null,37113),y=I.keys(),m.mutationQueue.removeMutationBatch(v,I)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,y))).next((()=>m.localDocuments.getDocuments(v,y)))}))})(i.localStore,e);OE(i,e,t),bE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vl(i,o)}catch(o){await Yo(o)}}function bE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function OE(n,e,t){const i=Ce(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||VE(n,i)}))}function VE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Rp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Op(n))}function Bv(n,e,t){for(const i of t)i instanceof kE?(n.Au.addReference(i.key,e),hk(n,i)):i instanceof xE?(le(bp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||VE(n,i.key)):Te(19791,{yu:i})}function hk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(le(bp,"New document in limbo: "+t),n.Iu.add(i),Op(n))}function Op(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ve(Qe.fromString(e)),i=n.mu.next();n.Eu.set(i,new ek(t)),n.du=n.du.insert(t,i),wE(n.remoteStore,new Pi(pr(yp(t.path)),i,"TargetPurposeLimboResolution",Zc.ue))}}async function Vl(n,e,t){const i=Ce(n),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,m)=>{h.push(i.gu(m,e,t).then((v=>{var y;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,I?"current":"not-current")}if(v){o.push(v);const I=Sp.Es(m.targetId,v);l.push(I)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(m,v){const y=Ce(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>G.forEach(v,(S=>G.forEach(S.Is,(k=>y.persistence.referenceDelegate.addReference(I,S.targetId,k))).next((()=>G.forEach(S.ds,(k=>y.persistence.referenceDelegate.removeReference(I,S.targetId,k)))))))))}catch(I){if(!Zo(I))throw I;le(Ap,"Failed to update sequence numbers: "+I)}for(const I of v){const S=I.targetId;if(!I.fromCache){const k=y.Fs.get(S),B=k.snapshotVersion,F=k.withLastLimboFreeSnapshotVersion(B);y.Fs=y.Fs.insert(S,F)}}})(i.localStore,l))}async function dk(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){le(bp,"User change. New user:",e.toKey());const i=await gE(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((d=>{d.forEach((m=>{m.reject(new oe(W.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vl(t,i.Bs)}}function fk(n,e){const t=Ce(n),i=t.Eu.get(e);if(i&&i.lu)return be().add(i.key);{let o=be();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const d=t.Pu.get(h);o=o.unionWith(d.view.tu)}return o}}function LE(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lk.bind(null,e),e.hu.J_=XP.bind(null,e.eventManager),e.hu.pu=JP.bind(null,e.eventManager),e}function pk(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,e),e}class Mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ah(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return vP(this.persistence,new mP,e.initialUser,this.serializer)}Du(e){return new mE(Ip.Vi,this.serializer)}bu(e){return new AP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mc.provider={build:()=>new Mc};class mk extends Mc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof Vc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eP(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new mE((i=>Vc.Vi(i,t)),this.serializer)}}class Lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await GP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QP})()}createDatastore(e){const t=ah(e.databaseInfo.databaseId),i=(function(l){return new xP(l)})(e.databaseInfo);return(function(l,h,d,m){return new OP(l,h,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,d){return new LP(i,o,l,h,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>zv(this.syncEngine,t,0)),(function(){return Vv.C()?new Vv:new RP})())}createSyncEngine(e,t){return(function(o,l,h,d,m,v,y){const I=new tk(o,l,h,d,m,v);return y&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);le(Ns,"RemoteStore shutting down."),l.Ia.add(5),await Ol(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lf.provider={build:()=>new Lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="FirestoreClient";class gk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{le(Bi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(le(Bi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Np(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function sf(n,e){n.asyncQueue.verifyOperationInProgress(),le(Bi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await gE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Li("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Li("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function $v(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yk(n);le(Bi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Mv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Mv(e.remoteStore,o))),n._onlineComponents=e}async function yk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Bi,"Using user provided OfflineComponentProvider");try{await sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),await sf(n,new Mc)}}else le(Bi,"Using default OfflineComponentProvider"),await sf(n,new mk(void 0));return n._offlineComponents}async function jE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Bi,"Using user provided OnlineComponentProvider"),await $v(n,n._uninitializedComponentsProvider._online)):(le(Bi,"Using default OnlineComponentProvider"),await $v(n,new Lf))),n._onlineComponents}function vk(n){return jE(n).then((e=>e.syncEngine))}async function UE(n){const e=await jE(n),t=e.eventManager;return t.onListen=nk.bind(null,e.syncEngine),t.onUnlisten=sk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ok.bind(null,e.syncEngine),t}function _k(n,e,t={}){const i=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,m,v){const y=new ME({next:S=>{y.Ou(),h.enqueueAndForget((()=>CE(l,I)));const k=S.docs.has(d);!k&&S.fromCache?v.reject(new oe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&m&&m.source==="server"?v.reject(new oe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new PE(yp(d.path),y,{includeMetadataChanges:!0,ka:!0});return RE(l,I)})(await UE(n),n.asyncQueue,e,t,i))),i.promise}function wk(n,e,t={}){const i=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,m,v){const y=new ME({next:S=>{y.Ou(),h.enqueueAndForget((()=>CE(l,I))),S.fromCache&&m.source==="server"?v.reject(new oe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new PE(d,y,{includeMetadataChanges:!0,ka:!0});return RE(l,I)})(await UE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="firestore.googleapis.com",Hv=!0;class Wv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zE,this.ssl=Hv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Hv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YC)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new C1;switch(i.type){case"firstParty":return new N1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=qv.get(t);i&&(le("ComponentProvider","Removing Datastore"),qv.delete(t),i.terminate())})(this),Promise.resolve()}}function Ek(n,e,t,i={}){var o;n=Gr(n,ch);const l=Qr(e),h=n._getSettings(),d=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Hc(`https://${m}`),Wc("Firestore",!0)),h.host!==zE&&h.host!==m&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:i});if(!Ps(v,d)&&(n._setSettings(v),i.mockUserToken)){let y,I;if(typeof i.mockUserToken=="string")y=i.mockUserToken,I=$t.MOCK_USER;else{y=x_(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new $t(S)}n._authCredentials=new P1(new Sw(y,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ta(this.firestore,e,this._query)}}class dt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(xl(t,dt._jsonSchema))return new dt(e,i||null,new ve(Qe.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:vt("string",dt._jsonSchemaVersion),referencePath:vt("string")};class Oi extends ta{constructor(e,t,i){super(e,t,yp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ve(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function BE(n,e,...t){if(n=tt(n),Rw("collection","path",e),n instanceof ch){const i=Qe.fromString(e,...t);return sv(i),new Oi(n,null,i)}{if(!(n instanceof dt||n instanceof Oi))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Qe.fromString(e,...t));return sv(i),new Oi(n.firestore,null,i)}}function Ls(n,e,...t){if(n=tt(n),arguments.length===1&&(e=hp.newId()),Rw("doc","path",e),n instanceof ch){const i=Qe.fromString(e,...t);return iv(i),new dt(n,null,new ve(i))}{if(!(n instanceof dt||n instanceof Oi))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Qe.fromString(e,...t));return iv(i),new dt(n.firestore,n instanceof Oi?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="AsyncQueue";class Kv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vE(this,"async_queue_retry"),this.oc=()=>{const i=rf();i&&le(Gv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=rf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Br;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zo(e))throw e;le(Gv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Qv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=xp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Te(47125,{hc:Qv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Qv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ll extends ch{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Kv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function Tk(n,e){const t=typeof n=="object"?n:Gc(),i=typeof n=="string"?n:kc,o=Rl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Xf("firestore");l&&Ek(o,...l)}return o}function Vp(n){if(n._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ik(n),n._firestoreClient}function Ik(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,m,v,y){return new G1(d,m,v,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,FE(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new gk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Mt.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:vt("string",Nn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(xl(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:vt("string",yr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vr(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:vt("string",vr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=/^__.*__$/;class Ak{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class $E{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:n})}}class Lp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(qE(this.Ec)&&Sk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Rk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ah(e)}Dc(e,t,i,o=!1){return new Lp({Ec:e,methodName:t,bc:i,path:Lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=ah(n._databaseId);return new Rk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ck(n,e,t,i,o,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Up("Data must be an object, but it was:",h,i);const d=HE(i,h);let m,v;if(l.merge)m=new vn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const y=[];for(const I of l.mergeFields){const S=Mf(e,I,t);if(!h.contains(S))throw new oe(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GE(y,S)||y.push(S)}m=new vn(y),v=h.fieldTransforms.filter((I=>m.covers(I.field)))}else m=null,v=h.fieldTransforms;return new Ak(new ln(d),m,v)}class fh extends dh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fh}}class jp extends dh{_toFieldTransform(e){return new _C(e.path,new vl)}isEqual(e){return e instanceof jp}}function Pk(n,e,t,i){const o=n.Dc(1,e,t);Up("Data must be an object, but it was:",o,i);const l=[],h=ln.empty();Hi(i,((m,v)=>{const y=Fp(e,m,t);v=tt(v);const I=o.gc(y);if(v instanceof fh)l.push(y);else{const S=Ml(v,I);S!=null&&(l.push(y),h.set(y,S))}}));const d=new vn(l);return new $E(h,d,o.fieldTransforms)}function kk(n,e,t,i,o,l){const h=n.Dc(1,e,t),d=[Mf(e,i,t)],m=[o];if(l.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Mf(e,l[S])),m.push(l[S+1]);const v=[],y=ln.empty();for(let S=d.length-1;S>=0;--S)if(!GE(v,d[S])){const k=d[S];let B=m[S];B=tt(B);const F=h.gc(k);if(B instanceof fh)v.push(k);else{const O=Ml(B,F);O!=null&&(v.push(k),y.set(k,O))}}const I=new vn(v);return new $E(y,I,h.fieldTransforms)}function xk(n,e,t,i=!1){return Ml(t,n.Dc(i?4:3,e))}function Ml(n,e){if(WE(n=tt(n)))return Up("Unsupported field value:",e,n),HE(n,e);if(n instanceof dh)return(function(i,o){if(!qE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const d of i){let m=Ml(d,o.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ye.fromDate(i);return{timestampValue:Oc(o.serializer,l)}}if(i instanceof Ye){const l=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Oc(o.serializer,l)}}if(i instanceof yr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:aE(o.serializer,i._byteString)};if(i instanceof dt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ep(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof vr)return(function(h,d){return{mapValue:{fields:{[Vw]:{stringValue:Lw},[xc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw d.wc("VectorValues must only contain numeric values.");return vp(d.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Yc(i)}`)})(n,e)}function HE(n,e){const t={};return kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(n,((i,o)=>{const l=Ml(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function WE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof yr||n instanceof Nn||n instanceof dt||n instanceof dh||n instanceof vr)}function Up(n,e,t){if(!WE(t)||!Cw(t)){const i=Yc(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Mf(n,e,t){if((e=tt(e))instanceof hh)return e._internalPath;if(typeof e=="string")return Fp(n,e);throw jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Nk=new RegExp("[~\\*/\\[\\]]");function Fp(n,e,t){if(e.search(Nk)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new oe(W.INVALID_ARGUMENT,d+n+m)}function GE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Dk extends KE{data(){return super.data()}}function zp(n,e){return typeof e=="string"?Fp(n,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bp{}class Ok extends Bp{}function Vk(n,e,...t){let i=[];e instanceof Bp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof $p)).length,d=l.filter((m=>m instanceof ph)).length;if(h>1||h>0&&d>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class ph extends Ok{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ph(e,t,i)}_apply(e){const t=this._parse(e);return QE(e._query,t),new ta(e.firestore,e.converter,Rf(e._query,t))}_parse(e){const t=Mp(e.firestore);return(function(l,h,d,m,v,y,I){let S;if(v.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Jv(I,y);const B=[];for(const F of I)B.push(Xv(m,l,F));S={arrayValue:{values:B}}}else S=Xv(m,l,I)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Jv(I,y),S=xk(d,h,I,y==="in"||y==="not-in");return yt.create(v,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Lk(n,e,t){const i=e,o=zp("where",n);return ph._create(o,i,t)}class $p extends Bp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $p(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const d=l.getFlattenedFilters();for(const m of d)QE(h,m),h=Rf(h,m)})(e._query,t),new ta(e.firestore,e.converter,Rf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Xv(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qe.fromString(t));if(!ve.isDocumentKey(i))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fv(n,new ve(i))}if(t instanceof dt)return fv(n,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yc(t)}.`)}function Jv(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QE(n,e){const t=(function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Mk{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[xc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ht(h.doubleValue)));return new vr(l)}convertGeoPoint(e){return new yr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=th(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=ji(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);Be(fE(i),9688,{name:e});const o=new gl(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return o.isEqual(t)||Wr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rs extends KE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Rs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rs._jsonSchema={type:vt("string",Rs._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class vc extends Rs{data(e={}){return super.data(e)}}class Uo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new vc(this._firestore,this._userDataWriter,i.key,i,new nl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((d=>{const m=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new nl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new nl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,y=-1;return d.type!==0&&(v=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),y=h.indexOf(d.doc.key)),{type:Uk(d.type),doc:m,oldIndex:v,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(n){n=Gr(n,dt);const e=Gr(n.firestore,Ll);return _k(Vp(e),n._key).then((t=>zk(e,n,t)))}Uo._jsonSchemaVersion="firestore/querySnapshot/1.0",Uo._jsonSchema={type:vt("string",Uo._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class XE extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function JE(n){n=Gr(n,ta);const e=Gr(n.firestore,Ll),t=Vp(e),i=new XE(e);return bk(n._query),wk(t,n._query).then((o=>new Uo(e,i,n,o)))}function Hp(n,e,t){n=Gr(n,dt);const i=Gr(n.firestore,Ll),o=jk(n.converter,e,t);return YE(i,[Ck(Mp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,mr.none())])}function Fk(n,e,t,...i){n=Gr(n,dt);const o=Gr(n.firestore,Ll),l=Mp(o);let h;return h=typeof(e=tt(e))=="string"||e instanceof hh?kk(l,"updateDoc",n._key,e,t,i):Pk(l,"updateDoc",n._key,e),YE(o,[h.toMutation(n._key,mr.exists(!0))])}function YE(n,e){return(function(i,o){const l=new Br;return i.asyncQueue.enqueueAndForget((async()=>ak(await vk(i),o,l))),l.promise})(Vp(n),e)}function zk(n,e,t){const i=t.docs.get(e._key),o=new XE(n);return new Rs(n,o,e._key,i,new nl(t.hasPendingWrites,t.fromCache),e.converter)}function jf(){return new jp("serverTimestamp")}(function(e,t=!0){(function(o){Jo=o})(bs),Vi(new $r("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new Ll(new k1(i.getProvider("auth-internal")),new D1(h,i.getProvider("app-check-internal")),(function(v,y){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(v.options.projectId,y)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),bn(Zy,ev,e),bn(Zy,ev,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="type.googleapis.com/google.protobuf.Int64Value",$k="type.googleapis.com/google.protobuf.UInt64Value";function ZE(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Uc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Uc(e));if(typeof n=="function"||typeof n=="object")return ZE(n,e=>Uc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Wo(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Bk:case $k:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Wo(e)):typeof n=="function"||typeof n=="object"?ZE(n,e=>Wo(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class un extends Yn{constructor(e,t,i){super(`${Wp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,un.prototype)}}function qk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Fc(n,e){let t=qk(n),i=t,o;try{const l=e&&e.error;if(l){const h=l.status;if(typeof h=="string"){if(!Yv[h])return new un("internal","internal");t=Yv[h],i=h}const d=l.message;typeof d=="string"&&(i=d),o=l.details,o!==void 0&&(o=Wo(o))}}catch{}return t==="ok"?null:new un(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,an(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o==null||o.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="us-central1",Wk=/^data: (.*?)(?:\n|$)/;function Gk(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new un("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Kk{constructor(e,t,i,o,l=Uf,h=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Hk(e,t,i,o),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Uf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Qk(n,e,t){const i=Qr(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Hc(n.emulatorOrigin),Wc("Functions",!0))}function Xk(n,e,t){const i=o=>Yk(n,e,o,{});return i.stream=(o,l)=>ex(n,e,o,l),i}async function Jk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function e0(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Yk(n,e,t,i){const o=n._url(e);return Zk(n,o,t,i)}async function Zk(n,e,t,i){t=Uc(t);const o={data:t},l=await e0(n,i),h=i.timeout||7e4,d=Gk(h),m=await Promise.race([Jk(e,o,l,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!m)throw new un("cancelled","Firebase Functions instance was deleted.");const v=Fc(m.status,m.json);if(v)throw v;if(!m.json)throw new un("internal","Response is not valid JSON object.");let y=m.json.data;if(typeof y>"u"&&(y=m.json.result),typeof y>"u")throw new un("internal","Response is missing data field.");return{data:Wo(y)}}function ex(n,e,t,i){const o=n._url(e);return tx(n,o,t,i||{})}async function tx(n,e,t,i){var o;t=Uc(t);const l={data:t},h=await e0(n,i);h["Content-Type"]="application/json",h.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:h,signal:i==null?void 0:i.signal})}catch(k){if(k instanceof Error&&k.name==="AbortError"){const F=new un("cancelled","Request was cancelled.");return{data:Promise.reject(F),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(F)}}}}}}const B=Fc(0,null);return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}let m,v;const y=new Promise((k,B)=>{m=k,v=B});(o=i==null?void 0:i.signal)===null||o===void 0||o.addEventListener("abort",()=>{const k=new un("cancelled","Request was cancelled.");v(k)});const I=d.body.getReader(),S=nx(I,m,v,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const k=S.getReader();return{async next(){const{value:B,done:F}=await k.read();return{value:B,done:F}},async return(){return await k.cancel(),{done:!0,value:void 0}}}}},data:y}}function nx(n,e,t,i){const o=(h,d)=>{const m=h.match(Wk);if(!m)return;const v=m[1];try{const y=JSON.parse(v);if("result"in y){e(Wo(y.result));return}if("message"in y){d.enqueue(Wo(y.message));return}if("error"in y){const I=Fc(0,y);d.error(I),t(I);return}}catch(y){if(y instanceof un){d.error(y),t(y);return}}},l=new TextDecoder;return new ReadableStream({start(h){let d="";return m();async function m(){if(i!=null&&i.aborted){const v=new un("cancelled","Request was cancelled");return h.error(v),t(v),Promise.resolve()}try{const{value:v,done:y}=await n.read();if(y){d.trim()&&o(d.trim(),h),h.close();return}if(i!=null&&i.aborted){const S=new un("cancelled","Request was cancelled");h.error(S),t(S),await n.cancel();return}d+=l.decode(v,{stream:!0});const I=d.split(`
`);d=I.pop()||"";for(const S of I)S.trim()&&o(S.trim(),h);return m()}catch(v){const y=v instanceof un?v:Fc(0,null);h.error(y),t(y)}}},cancel(){return n.cancel()}})}const Zv="@firebase/functions",e_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="auth-internal",ix="app-check-internal",sx="messaging-internal";function ox(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(rx),h=t.getProvider(sx),d=t.getProvider(ix);return new Kk(o,l,h,d,i)};Vi(new $r(Wp,e,"PUBLIC").setMultipleInstances(!0)),bn(Zv,e_,n),bn(Zv,e_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n=Gc(),e=Uf){const i=Rl(tt(n),Wp).getImmediate({identifier:e}),o=Xf("functions");return o&&lx(i,...o),i}function lx(n,e,t){Qk(tt(n),e,t)}function t0(n,e,t){return Xk(tt(n),e)}ox();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="firebasestorage.googleapis.com",r0="storageBucket",ux=120*1e3,cx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends Yn{constructor(e,t,i=0){super(of(e),`Firebase Storage: ${t} (${of(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return of(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function of(n){return"storage/"+n}function Gp(){const n="An unknown error occurred, please check the error payload for server response.";return new lt(at.UNKNOWN,n)}function hx(n){return new lt(at.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function dx(n){return new lt(at.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fx(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(at.UNAUTHENTICATED,n)}function px(){return new lt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mx(n){return new lt(at.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function gx(){return new lt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yx(){return new lt(at.CANCELED,"User canceled the upload/download.")}function vx(n){return new lt(at.INVALID_URL,"Invalid URL '"+n+"'.")}function _x(n){return new lt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wx(){return new lt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+r0+"' property when initializing the app?")}function Ex(){return new lt(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tx(){return new lt(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ix(n){return new lt(at.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ff(n){return new lt(at.INVALID_ARGUMENT,n)}function i0(){return new lt(at.APP_DELETED,"The Firebase app was deleted.")}function Sx(n){return new lt(at.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ul(n,e){return new lt(at.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ya(n){throw new lt(at.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=_n.makeFromUrl(e,t)}catch{return new _n(e,"")}if(i.path==="")return i;throw _x(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function v(ie){ie.path_=decodeURIComponent(ie.path)}const y="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",k=new RegExp(`^https?://${I}/${y}/b/${o}/o${S}`,"i"),B={bucket:1,path:3},F=t===n0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",$=new RegExp(`^https?://${F}/${o}/${O}`,"i"),ne=[{regex:d,indices:m,postModify:l},{regex:k,indices:B,postModify:v},{regex:$,indices:{bucket:1,path:2},postModify:v}];for(let ie=0;ie<ne.length;ie++){const Re=ne[ie],he=Re.regex.exec(e);if(he){const N=he[Re.indices.bucket];let A=he[Re.indices.path];A||(A=""),i=new _n(N,A),Re.postModify(i);break}}if(i==null)throw vx(e);return i}}class Ax{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(n,e,t){let i=1,o=null,l=null,h=!1,d=0;function m(){return d===2}let v=!1;function y(...O){v||(v=!0,e.apply(null,O))}function I(O){o=setTimeout(()=>{o=null,n(k,m())},O)}function S(){l&&clearTimeout(l)}function k(O,...$){if(v){S();return}if(O){S(),y.call(null,O,...$);return}if(m()||h){S(),y.call(null,O,...$);return}i<64&&(i*=2);let ne;d===1?(d=2,ne=0):ne=(i+Math.random())*1e3,I(ne)}let B=!1;function F(O){B||(B=!0,S(),!v&&(o!==null?(O||(d=2),clearTimeout(o),I(0)):O||(d=1)))}return I(0),l=setTimeout(()=>{h=!0,F(!0)},t),F}function Cx(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){return n!==void 0}function kx(n){return typeof n=="object"&&!Array.isArray(n)}function Kp(n){return typeof n=="string"||n instanceof String}function t_(n){return Qp()&&n instanceof Blob}function Qp(){return typeof Blob<"u"}function n_(n,e,t,i){if(i<e)throw Ff(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Ff(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function s0(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Cs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Cs||(Cs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t,i,o,l,h,d,m,v,y,I,S=!0,k=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=y,this.connectionFactory_=I,this.retry=S,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,F)=>{this.resolve_=B,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new oc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=d=>{const m=d.loaded,v=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const d=l.getErrorCode()===Cs.NO_ERROR,m=l.getStatus();if(!d||xx(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Cs.ABORT;i(!1,new oc(!1,null,y));return}const v=this.successCodes_.indexOf(m)!==-1;i(!0,new oc(v,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());Px(m)?l(m):l()}catch(m){h(m)}else if(d!==null){const m=Gp();m.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,m)):h(m)}else if(o.canceled){const m=this.appDelete_?i0():yx();h(m)}else{const m=gx();h(m)}};this.canceled_?t(!1,new oc(!1,null,!0)):this.backoffId_=Rx(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Cx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Dx(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function bx(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ox(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Vx(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Lx(n,e,t,i,o,l,h=!0,d=!1){const m=s0(n.urlParams),v=n.url+m,y=Object.assign({},n.headers);return Ox(y,e),Dx(y,t),bx(y,l),Vx(y,i),new Nx(v,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,h,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jx(...n){const e=Mx();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Qp())return new Blob(n);throw new lt(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ux(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){if(typeof atob>"u")throw Ix("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class af{constructor(e,t){this.data=e,this.contentType=t||null}}function zx(n,e){switch(n){case hr.RAW:return new af(o0(e));case hr.BASE64:case hr.BASE64URL:return new af(a0(n,e));case hr.DATA_URL:return new af($x(e),qx(e))}throw Gp()}function o0(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,h=n.charCodeAt(++t);i=65536|(l&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Bx(n){let e;try{e=decodeURIComponent(n)}catch{throw ul(hr.DATA_URL,"Malformed data URL.")}return o0(e)}function a0(n,e){switch(n){case hr.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw ul(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case hr.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw ul(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Fx(e)}catch(o){throw o.message.includes("polyfill")?o:ul(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class l0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ul(hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Hx(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function $x(n){const e=new l0(n);return e.base64?a0(hr.BASE64,e.rest):Bx(e.rest)}function qx(n){return new l0(n).contentType}function Hx(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){let i=0,o="";t_(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(t_(this.data_)){const i=this.data_,o=Ux(i,e,t);return o===null?null:new Ri(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ri(i,!0)}}static getBlob(...e){if(Qp()){const t=e.map(i=>i instanceof Ri?i.data_:i);return new Ri(jx.apply(null,t))}else{const t=e.map(h=>Kp(h)?zx(hr.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)o[l++]=h[d]}),new Ri(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){let e;try{e=JSON.parse(n)}catch{return null}return kx(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Gx(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function c0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n,e){return e}class Xt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||Kx}}let ac=null;function Qx(n){return!Kp(n)||n.length<2?n:c0(n)}function h0(){if(ac)return ac;const n=[];n.push(new Xt("bucket")),n.push(new Xt("generation")),n.push(new Xt("metageneration")),n.push(new Xt("name","fullPath",!0));function e(l,h){return Qx(h)}const t=new Xt("name");t.xform=e,n.push(t);function i(l,h){return h!==void 0?Number(h):h}const o=new Xt("size");return o.xform=i,n.push(o),n.push(new Xt("timeCreated")),n.push(new Xt("updated")),n.push(new Xt("md5Hash",null,!0)),n.push(new Xt("cacheControl",null,!0)),n.push(new Xt("contentDisposition",null,!0)),n.push(new Xt("contentEncoding",null,!0)),n.push(new Xt("contentLanguage",null,!0)),n.push(new Xt("contentType",null,!0)),n.push(new Xt("metadata","customMetadata",!0)),ac=n,ac}function Xx(n,e){function t(){const i=n.bucket,o=n.fullPath,l=new _n(i,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function Jx(n,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const h=t[l];i[h.local]=h.xform(i,e[h.server])}return Xx(i,n),i}function d0(n,e,t){const i=u0(e);return i===null?null:Jx(n,i,t)}function Yx(n,e,t,i){const o=u0(e);if(o===null||!Kp(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(v=>{const y=n.bucket,I=n.fullPath,S="/b/"+h(y)+"/o/"+h(I),k=Xp(S,t,i),B=s0({alt:"media",token:v});return k+B})[0]}function Zx(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class f0{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n){if(!n)throw Gp()}function eN(n,e){function t(i,o){const l=d0(n,o,e);return p0(l!==null),l}return t}function tN(n,e){function t(i,o){const l=d0(n,o,e);return p0(l!==null),Yx(l,o,n.host,n._protocol)}return t}function m0(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=px():o=fx():t.getStatus()===402?o=dx(n.bucket):t.getStatus()===403?o=mx(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function nN(n){const e=m0(n);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=hx(n.path)),l.serverResponse=o.serverResponse,l}return t}function rN(n,e,t){const i=e.fullServerUrl(),o=Xp(i,n.host,n._protocol),l="GET",h=n.maxOperationRetryTime,d=new f0(o,l,tN(n,t),h);return d.errorHandler=nN(e),d}function iN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sN(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=iN(null,e)),i}function oN(n,e,t,i,o){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let ne="";for(let ie=0;ie<2;ie++)ne=ne+Math.random().toString().slice(2);return ne}const m=d();h["Content-Type"]="multipart/related; boundary="+m;const v=sN(e,i,o),y=Zx(v,t),I="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+v.contentType+`\r
\r
`,S=`\r
--`+m+"--",k=Ri.getBlob(I,i,S);if(k===null)throw Ex();const B={name:v.fullPath},F=Xp(l,n.host,n._protocol),O="POST",$=n.maxUploadRetryTime,ee=new f0(F,O,eN(n,t),$);return ee.urlParams=B,ee.headers=h,ee.body=k.uploadData(),ee.errorHandler=m0(e),ee}class aN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,l){if(this.sent_)throw Ya("cannot .send() more than once");if(Qr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ya("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ya("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ya("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ya("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lN extends aN{initXhr(){this.xhr_.responseType="text"}}function g0(){return new lN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){this._service=e,t instanceof _n?this._location=t:this._location=_n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ds(e,t)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c0(this._location.path)}get storage(){return this._service}get parent(){const e=Wx(this._location.path);if(e===null)return null;const t=new _n(this._location.bucket,e);return new Ds(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Sx(e)}}function uN(n,e,t){n._throwIfRoot("uploadBytes");const i=oN(n.storage,n._location,h0(),new Ri(e,!0),t);return n.storage.makeRequestWithTokens(i,g0).then(o=>({metadata:o,ref:n}))}function cN(n){n._throwIfRoot("getDownloadURL");const e=rN(n.storage,n._location,h0());return n.storage.makeRequestWithTokens(e,g0).then(t=>{if(t===null)throw Tx();return t})}function hN(n,e){const t=Gx(n._location.path,e),i=new _n(n._location.bucket,t);return new Ds(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){return/^[A-Za-z]+:\/\//.test(n)}function fN(n,e){return new Ds(n,e)}function y0(n,e){if(n instanceof Jp){const t=n;if(t._bucket==null)throw wx();const i=new Ds(t,t._bucket);return e!=null?y0(i,e):i}else return e!==void 0?hN(n,e):n}function pN(n,e){if(e&&dN(e)){if(n instanceof Jp)return fN(n,e);throw Ff("To use ref(service, url), the first argument must be a Storage instance.")}else return y0(n,e)}function r_(n,e){const t=e==null?void 0:e[r0];return t==null?null:_n.makeFromBucketSpec(t,n)}function mN(n,e,t,i={}){n.host=`${e}:${t}`;const o=Qr(e);o&&(Hc(`https://${n.host}/b`),Wc("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:x_(l,n.app.options.projectId))}class Jp{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=n0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ux,this._maxUploadRetryTime=cx,this._requests=new Set,o!=null?this._bucket=_n.makeFromBucketSpec(o,this._host):this._bucket=r_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=r_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ds(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new Ax(i0());{const h=Lx(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const i_="@firebase/storage",s_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="storage";function gN(n,e,t){return n=tt(n),uN(n,e,t)}function yN(n){return n=tt(n),cN(n)}function vN(n,e){return n=tt(n),pN(n,e)}function _N(n=Gc(),e){n=tt(n);const i=Rl(n,v0).getImmediate({identifier:e}),o=Xf("storage");return o&&wN(i,...o),i}function wN(n,e,t,i={}){mN(n,e,t,i)}function EN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Jp(t,i,o,e,bs)}function TN(){Vi(new $r(v0,EN,"PUBLIC").setMultipleInstances(!0)),bn(i_,s_,""),bn(i_,s_,"esm2017")}TN();const IN={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},mh=b_(IN),cn=A1(mh),Xr=Tk(mh),SN=_N(mh),_0=ax(mh,"us-central1");fR(cn,sw);t0(_0,"bootstrapFirstAdmin");t0(_0,"setUserRole");async function o_(){return cn.currentUser?cn.currentUser.getIdTokenResult(!0):null}async function zf(n){const e=n??cn.currentUser;if(!e)return null;try{const i=(await e.getIdTokenResult()).claims.role;return i==="admin"||i==="trainer"||i==="client"?i:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const l=(await e.getIdTokenResult()).claims.role;return l==="admin"||l==="trainer"||l==="client"?l:null}catch{return await Qc(cn),null}throw t}}function w0(){return{createdAt:jf(),updatedAt:jf()}}function E0(){return{updatedAt:jf()}}function Ms(){var e;const n=(e=cn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function zc(n={}){const e=Ms(),t=Ls(Xr,"users",e);return await Hp(t,{uid:e,...w0(),...n},{merge:!0}),t}async function Bf(n){const e=n??Ms();return qp(Ls(Xr,"users",e))}async function AN(n,e){const t=Ms();await Hp(Ls(Xr,"users",t,"private",n),{...e,...E0()},{merge:!0})}async function RN(){return JE(BE(Xr,"users"))}async function CN(n,e){return qp(Ls(Xr,"users",n,"private",e))}async function PN(n){const e=Ms(),t=Ls(Xr,"plans",n.clientId);return await Hp(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...w0()}),t}async function T0(n,e){const t=e??Ms(),i=n==="client"?"clientId":"trainerId",o=Vk(BE(Xr,"plans"),Lk(i,"==",t));return JE(o)}async function kN(n){const e=n??Ms();return qp(Ls(Xr,"plans",e))}async function xN(n,e){await Fk(Ls(Xr,"plans",n),{...e,...E0()})}async function NN(n,e){const t=Ms(),i=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),o=`${Date.now()}-${i}`,l=DN(t,n,o);return await gN(l,e,{contentType:e.type||"application/octet-stream"}),yN(l)}function DN(n,e,t){return vN(SN,`workout-media/${n}/${e}/${t}`)}function na(){const[n,e]=Q.useState(!0),[t,i]=Q.useState(cn.currentUser),[o,l]=Q.useState(null);return Q.useEffect(()=>nw(cn,async h=>{try{if(e(!0),i(h),!h){l(null);return}await Yp(h);const d=await zf(h);l(d)}catch(d){(typeof d=="object"&&d&&"code"in d?String(d.code):"").includes("user-token-expired")&&(await Qc(cn),i(null)),l(null)}finally{e(!1)}}),[]),Q.useMemo(()=>({initializing:n,user:t,role:o,isAuthenticated:!!t}),[n,t,o])}const $f=new Ur;$f.setCustomParameters({prompt:"select_account"});async function Yp(n){(await Bf(n.uid)).exists()||await zc({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function a_(){try{const n=await bR(cn,$f);return await Yp(n.user),{redirected:!1,user:n.user}}catch(n){if(ON(n))return await UR(cn,$f),{redirected:!0,user:null};throw n}}async function bN(){try{const n=await zR(cn);return n!=null&&n.user&&await Yp(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await Qc(cn),null;throw n}}async function El(){return Qc(cn)}function ON(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}const VN=["lrnz.sga@gmail.com","beastlyworkoutideas@gmail.com"];function I0(n){return n.trim().toLowerCase()}function LN(n){const e=VN.join(",");return new Set(e.split(",").map(I0).filter(Boolean))}const MN=LN();function lf(n){return n?MN.has(I0(n)):!1}function jN(n){return n.map(e=>({id:e.id,...e.data()}))}function dr(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Es="bw_login_intent";function UN(){const{user:n,role:e}=na(),t=Il(),{showError:i}=$c(),[o,l]=Q.useState(!1),[h,d]=Q.useState(""),[m,v]=Q.useState(!1);if(Q.useEffect(()=>{async function S(){try{await bN()}catch(k){const B=dr(k);d(B),i(B)}}S()},[i]),Q.useEffect(()=>{async function S(){if(!(!n||e||sessionStorage.getItem(Es)!=="coach"||!lf(n.email))){v(!0),d("Sto preparando il tuo accesso coach...");try{await zc({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let B=0;B<10;B+=1){await o_();const F=await zf(n);if(F==="admin"||F==="trainer"){sessionStorage.removeItem(Es),t("/app/coach",{replace:!0});return}await new Promise(O=>setTimeout(O,700))}d("Sto ancora completando laccesso. Riprova tra pochi secondi.")}catch(B){const F=dr(B);d(F),i(F)}finally{v(!1)}}}S()},[n,e,t]),n&&e)return sessionStorage.removeItem(Es),E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0});if(n&&!e)return sessionStorage.getItem(Es)==="coach"&&lf(n.email)?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accesso Coach"}),E.jsx("p",{className:"hero-sub",children:m?"Attendi un attimo...":"Sto verificando il tuo account."}),h?E.jsx("p",{className:"message",children:h}):null,E.jsx("button",{className:"btn btn-ghost",disabled:m,onClick:()=>void El(),type:"button",children:"Esci e cambia account"})]})}):E.jsx(Dn,{to:"/app/client",replace:!0});async function y(){l(!0),d("");try{if(sessionStorage.setItem(Es,"client"),(await a_()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(S){const k=dr(S);d(k),i(k)}finally{l(!1)}}async function I(){l(!0),d("");try{sessionStorage.setItem(Es,"coach");const S=await a_();if(S.redirected){d("Ti sto reindirizzando a Google...");return}if(!S.user){d("Accesso non completato. Riprova.");return}if(!lf(S.user.email)){await El(),d("Questo account non  abilitato per larea coach. Usa accesso utente."),i("Questo account non  abilitato per larea coach.");return}await zc({email:S.user.email??"",displayName:S.user.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let k=0;k<8;k+=1){await o_();const B=await zf(S.user);if(B==="admin"||B==="trainer"){sessionStorage.removeItem(Es),t("/app/coach",{replace:!0});return}await new Promise(F=>setTimeout(F,700))}d("Sto ancora completando laccesso coach. Riprova tra qualche secondo.")}catch(S){const k=dr(S);d(k),i(k)}finally{l(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accedi con Google"}),E.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),E.jsx("button",{className:"btn",disabled:o,onClick:()=>void y(),type:"button",children:o?"Connessione...":"Continua con Google"}),E.jsx("div",{className:"divider"}),E.jsx("h2",{children:"Sei un Coach?"}),E.jsx("p",{className:"hint",children:"Usa il tuo account coach per entrare nell'area professionale."}),E.jsx("button",{className:"btn btn-ghost",disabled:o,onClick:()=>void I(),type:"button",children:"Continua come Coach"}),h?E.jsx("p",{className:"message",children:h}):null,E.jsx(qI,{})]})})}function S0({role:n,title:e,subtitle:t,children:i}){return E.jsxs("main",{className:"page",children:[E.jsxs("section",{className:"hero",children:[E.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),E.jsx("h1",{children:e}),E.jsx("p",{className:"hero-sub",children:t}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void El(),children:"Esci dal profilo"})]}),E.jsx("section",{className:"stack",children:i}),E.jsxs("nav",{className:"mobile-nav",children:[E.jsx(zI,{to:n==="client"?"/app/client":"/app/coach",children:"Home"}),E.jsx("button",{type:"button",onClick:()=>void El(),children:"Esci"})]})]})}function l_(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function FN(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function zN(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function BN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="string"?t.reps:"",weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function $N(){const{role:n,user:e}=na(),t=Il(),{showError:i}=$c(),[o,l]=Q.useState([]),[h,d]=Q.useState(!1),[m,v]=Q.useState(!0),[y,I]=Q.useState(null);Q.useEffect(()=>{async function F(){if(e)try{const $=(await Bf(e.uid)).data();if(!($!=null&&$.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{v(!1)}}F()},[e,t]);async function S(){d(!0);try{const F=(e==null?void 0:e.uid)??"",O=F?await Bf(F):null,$=(O==null?void 0:O.data())??{},ee=Array.from(new Set([F,($.uid??"").trim(),($.clientId??"").trim()].filter(he=>he.length>0))),ne=await Promise.allSettled(ee.flatMap(he=>[T0("client",he),kN(he)])),ie=new Map;for(const he of ne){if(he.status!=="fulfilled")continue;const N=he.value;if("docs"in N)for(const A of jN(N.docs))ie.set(A.id,A);else if(N.exists()){const A={id:N.id,...N.data()};ie.set(A.id,A)}}const Re=Array.from(ie.values()).sort((he,N)=>{const A=ee.includes(he.id)?0:1,P=ee.includes(N.id)?0:1;return A-P});l(Re)}catch(F){i(dr(F))}finally{d(!1)}}Q.useEffect(()=>{e&&(n==="client"||n===null)&&S()},[n,e==null?void 0:e.uid]);const k=o[0],B=BN(k==null?void 0:k.exercises);return e?m?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Prepariamo la tua area"}),E.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):E.jsxs(S0,{role:"client",subtitle:"Tieni traccia di allenamenti e progressi in modo semplice.",title:"La tua area",children:[E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"La tua scheda tecnica"}),k?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"hint",children:E.jsx("strong",{children:k.title})}),E.jsx("ul",{className:"list",children:B.map((F,O)=>E.jsxs("li",{children:[E.jsx("strong",{children:F.name||`Esercizio ${O+1}`}),"  ",F.sets??"-"," serie","  ",F.reps||"-"," reps","  ",F.weight||"-",F.mediaUrl?E.jsxs(E.Fragment,{children:["  ",E.jsx("button",{className:"btn-link",type:"button",onClick:()=>I({url:F.mediaUrl,label:F.name||`Esercizio ${O+1}`}),children:"Apri media"})]}):null]},`plan-ex-${O}`))})]}):E.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]}),h?E.jsx("p",{className:"message",children:"Caricamento..."}):null,y?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:y.label}),l_(y.url)?E.jsx("iframe",{title:y.label,src:l_(y.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):FN(y.url)?E.jsx("img",{src:y.url,alt:y.label,className:"media-frame media-image"}):zN(y.url)?E.jsx("video",{src:y.url,controls:!0,className:"media-frame"}):E.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",E.jsx("a",{href:y.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>I(null),children:"Chiudi"})]})}):null]}):E.jsx(Dn,{to:"/auth",replace:!0})}function xn(n){return typeof n=="string"?n:n==null?"":String(n)}function u_(n){return xn(n.uid).trim()||n.id}function qN(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:xn(t.name),sets:Number(t.sets??3)||3,reps:xn(t.reps)||"10",weight:xn(t.weight),mediaUrl:xn(t.mediaUrl)}}).filter(e=>!!e):[]}function He(n){return xn(n).trim()||"Non compilato"}function HN(){const{role:n,user:e}=na(),{showError:t,showSuccess:i}=$c(),[o,l]=Q.useState([]),[h,d]=Q.useState([]),[m,v]=Q.useState(!1),[y,I]=Q.useState(null),[S,k]=Q.useState(!1),[B,F]=Q.useState(null),[O,$]=Q.useState(""),[ee,ne]=Q.useState(""),[ie,Re]=Q.useState([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]),he=h.find(ce=>ce.id===O)??h.find(ce=>ce.clientId===O);Q.useEffect(()=>{async function ce(){if(!O){I(null);return}try{const ge=await CN(O,"onboarding");I(ge.data()??null)}catch{I(null)}}ce()},[O]),Q.useEffect(()=>{if(!O)return;if(!he){ne(""),Re([{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}]);return}ne(he.title??"");const ce=qN(he.exercises).filter(ge=>ge.name.trim().length>0);Re(ce.length>0?ce:[{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])},[O,he==null?void 0:he.id]);async function N(){if(n){v(!0);try{const _e=(await RN()).docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.id!==(e==null?void 0:e.uid)).filter(X=>{const de=xn(X.role).toLowerCase(),se=xn(X.requestedRole).toLowerCase();return de==="client"||se==="client"||X.onboardingCompleted===!0}).sort((X,de)=>{const se=xn(X.displayName||X.email||X.id).toLowerCase(),L=xn(de.displayName||de.email||de.id).toLowerCase();return se.localeCompare(L)});l(_e),!O&&_e[0]&&$(u_(_e[0]));try{const X=await T0(n);d(X.docs.map(de=>({id:de.id,...de.data()})))}catch(X){d([]),t(dr(X))}}catch(ce){console.error("Coach action failed:",ce),t(dr(ce))}finally{v(!1)}}}Q.useEffect(()=>{N()},[n,e==null?void 0:e.uid]);async function A(ce,ge){v(!0);try{await ce(),i(ge),await N()}catch(_e){t(dr(_e))}finally{v(!1)}}function P(){Re(ce=>[...ce,{name:"",sets:3,reps:"10",weight:"",mediaUrl:""}])}function D(ce){Re(ge=>ge.length<=1?ge:ge.filter((_e,X)=>X!==ce))}function V(ce,ge){Re(_e=>_e.map((X,de)=>de===ce?{...X,...ge}:X))}async function M(){const ce=ie.map(ge=>({name:ge.name.trim(),sets:Number(ge.sets)||0,reps:ge.reps.trim(),weight:ge.weight.trim(),mediaUrl:ge.mediaUrl.trim()})).filter(ge=>ge.name.length>0);if(ce.length===0){t("Aggiungi almeno un esercizio con nome.");return}he?await A(()=>xN(he.id,{title:ee,status:"active",exercises:ce}),"Scheda aggiornata con successo."):await A(()=>PN({clientId:O,title:ee,status:"active",exercises:ce}),"Scheda creata e subito visibile al cliente."),k(!1)}function C(){if(!O){t("Seleziona prima un cliente.");return}if(!ee.trim()){t("Inserisci un titolo per la scheda.");return}k(!0)}async function nt(ce,ge){if(ge){if(!ge.type.startsWith("image/")){t("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!O){t("Seleziona prima un cliente.");return}F(ce);try{const _e=await NN(O,ge);V(ce,{mediaUrl:_e}),i("Media caricato con successo.")}catch(_e){console.error("Media upload failed:",_e),t(dr(_e))}finally{F(null)}}}return E.jsxs(S0,{role:n==="trainer"?"trainer":"admin",subtitle:"Gestisci clienti, programmi e appuntamenti da un unico posto.",title:"Area Coach",children:[E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Crea scheda cliente"}),E.jsxs("label",{children:["Clienti registrati",E.jsxs("select",{value:O,onChange:ce=>$(ce.target.value),children:[o.length===0?E.jsx("option",{value:"",children:"Nessun cliente disponibile"}):null,o.map(ce=>E.jsx("option",{value:u_(ce),children:xn(ce.displayName).trim()||xn(ce.email)||ce.id},ce.id))]})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void N(),children:"Aggiorna lista clienti"}),E.jsxs("label",{children:["Titolo programma",E.jsx("input",{value:ee,onChange:ce=>ne(ce.target.value),placeholder:"Forza 4 settimane"})]}),E.jsx("p",{className:"hint",children:he?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:"Informazioni del cliente"}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Anagrafica"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Nome:"})," ",He(y==null?void 0:y.fullName)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Et:"})," ",He(y==null?void 0:y.age)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Sesso:"})," ",He(y==null?void 0:y.sex)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Email:"})," ",He(y==null?void 0:y.email)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Telefono:"})," ",He(y==null?void 0:y.phone)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Come ci ha conosciuto:"})," ",He(y==null?void 0:y.discoverySource)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Stato fisico e allenamento"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altezza:"})," ",He(y==null?void 0:y.heightCm)," cm"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Peso:"})," ",He(y==null?void 0:y.weightKg)," kg"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Esperienza programmi:"})," ",He((y==null?void 0:y.pastProgram)||(y==null?void 0:y.experienceLevel))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti settimanali:"})," ",He((y==null?void 0:y.trainingFrequency)||(y==null?void 0:y.trainingDaysPerWeek))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Durata sessione:"})," ",He(y==null?void 0:y.workoutDuration)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Luogo allenamento:"})," ",He(y==null?void 0:y.workoutLocation)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Attrezzatura:"})," ",He(y==null?void 0:y.equipment)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti svolti:"})," ",He(y==null?void 0:y.trainingTypeHistory)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Infortuni/problemi:"})," ",He(y==null?void 0:y.hasInjuries)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Dettagli infortuni:"})," ",He(y==null?void 0:y.injuryDetails)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Obiettivi"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Obiettivo principale:"})," ",He((y==null?void 0:y.objectivePrimary)||(y==null?void 0:y.goal))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Perch:"})," ",He(y==null?void 0:y.objectiveReason)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Timeline risultati:"})," ",He(y==null?void 0:y.expectedTimeline)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",He((y==null?void 0:y.whatBlockedSoFar)||(y==null?void 0:y.notes))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",He(y==null?void 0:y.oneThingToImprove)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Importanza obiettivo:"})," ",He(y==null?void 0:y.importanceScore)," / 10"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Rischio se non cambia:"})," ",He(y==null?void 0:y.riskIfNoChange)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Supporto e decisione"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Supporto preferito:"})," ",He(y==null?void 0:y.supportPreference)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altro supporto:"})," ",He(y==null?void 0:y.supportPreferenceOther)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Fascia investimento:"})," ",He(y==null?void 0:y.investmentRange)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Disponibilit a partire:"})," ",He(y==null?void 0:y.readiness)]})]})]}),E.jsx("button",{className:"btn",disabled:!O||!ee||m,onClick:C,type:"button",children:he?"Modifica scheda":"Crea scheda"})]}),S?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:he?"Modifica scheda":"Compila la scheda"}),E.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),ie.map((ce,ge)=>E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[E.jsxs("h2",{children:["Esercizio ",ge+1]}),E.jsxs("label",{children:["Nome esercizio",E.jsx("input",{value:ce.name,onChange:_e=>V(ge,{name:_e.target.value}),placeholder:"Es. Squat bilanciere"})]}),E.jsxs("label",{children:["Numero serie",E.jsx("input",{type:"number",min:1,value:ce.sets,onChange:_e=>V(ge,{sets:Number(_e.target.value)})})]}),E.jsxs("label",{children:["Ripetizioni",E.jsx("input",{value:ce.reps,onChange:_e=>V(ge,{reps:_e.target.value}),placeholder:"Es. 8-10"})]}),E.jsxs("label",{children:["Peso",E.jsx("input",{value:ce.weight,onChange:_e=>V(ge,{weight:_e.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),E.jsxs("label",{children:["URL video (YouTube o link diretto)",E.jsx("input",{value:ce.mediaUrl,onChange:_e=>V(ge,{mediaUrl:_e.target.value}),placeholder:"https://..."})]}),E.jsxs("label",{children:["Oppure carica un'immagine",E.jsx("input",{type:"file",accept:"image/*",onChange:_e=>{var X;return void nt(ge,((X=_e.target.files)==null?void 0:X[0])??null)},disabled:B===ge})]}),B===ge?E.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>D(ge),children:"Rimuovi esercizio"})]},`exercise-${ge}`)),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:P,children:"Aggiungi esercizio"}),E.jsx("button",{className:"btn",type:"button",disabled:m,onClick:()=>void M(),children:he?"Salva modifiche":"Salva scheda tecnica"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>k(!1),children:"Chiudi"})]})}):null,E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Panoramica"}),E.jsxs("p",{className:"hint",children:["Clienti registrati: ",o.length]}),E.jsxs("p",{className:"hint",children:["Programmi creati: ",h.length]}),E.jsx("ul",{className:"list",children:h.slice(0,5).map(ce=>{var ge;return E.jsxs("li",{children:[E.jsx("strong",{children:ce.title}),"  ",((ge=ce.exercises)==null?void 0:ge.length)??0," esercizi  cliente ",ce.clientId]},ce.id)})})]}),m?E.jsx("p",{className:"message",children:"Caricamento..."}):null]})}const lc=5;function WN(){const{user:n,role:e}=na(),t=Il(),{showError:i,showSuccess:o}=$c(),[l,h]=Q.useState(0),[d,m]=Q.useState({fullName:(n==null?void 0:n.displayName)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:""}),[v,y]=Q.useState(!1);if(!n)return E.jsx(Dn,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return E.jsx(Dn,{to:"/app/coach",replace:!0});const I=n.email??"",S=Q.useMemo(()=>Math.round((l+1)/lc*100),[l]);function k($,ee){m(ne=>({...ne,[$]:ee}))}function B($){return $===0?[d.age.trim()?"":"Inserisci et.",d.sex.trim()?"":"Inserisci sesso.",d.email.trim()?"":"Inserisci e-mail.",d.phone.trim()?"":"Inserisci numero di telefono.",d.discoverySource.trim()?"":"Inserisci come ci hai conosciuto."].filter(Boolean):$===1?[d.heightCm.trim()?"":"Inserisci altezza.",d.weightKg.trim()?"":"Inserisci peso attuale.",d.pastProgram.trim()?"":"Seleziona esperienza programmi precedenti.",d.trainingFrequency.trim()?"":"Seleziona frequenza allenamento.",d.workoutDuration.trim()?"":"Seleziona durata allenamento.",d.workoutLocation.trim()?"":"Seleziona dove ti alleni.",d.equipment.trim()?"":"Seleziona attrezzatura disponibile.",d.trainingTypeHistory.trim()?"":"Descrivi tipo di allenamento fatto.",d.hasInjuries.trim()?"":"Indica se hai infortuni/problemi fisici."].filter(Boolean):$===2?[d.objectivePrimary.trim()?"":"Seleziona obiettivo principale.",d.objectiveReason.trim()?"":"Scrivi perch vuoi raggiungere lobiettivo.",d.expectedTimeline.trim()?"":"Scrivi in quanto tempo vuoi vedere risultati."].filter(Boolean):$===3?[d.supportPreference?"":"Seleziona supporto motivazionale preferito.",d.investmentRange.trim()?"":"Seleziona fascia investimento.",d.whatBlockedSoFar.trim()?"":"Spiega cosa ti ha bloccato finora.",d.oneThingToImprove.trim()?"":"Scrivi cosa vorresti migliorare in 3 mesi.",d.importanceScore.trim()?"":"Seleziona importanza obiettivo.",d.riskIfNoChange.trim()?"":"Scrivi cosa rischi se non cambi nulla."].filter(Boolean):$===4?[d.readiness?"":"Seleziona il livello di disponibilit a iniziare."].filter(Boolean):[]}function F(){const $=B(l);if($.length>0){i($[0]);return}h(ee=>Math.min(ee+1,lc-1))}async function O(){const $=B(l);if($.length>0){i($[0]);return}y(!0);try{await zc({displayName:d.fullName.trim()||(n==null?void 0:n.displayName)||"",email:I,role:"client",requestedRole:"client",onboardingStatus:"completed",onboardingCompleted:!0,onboardingUpdatedAt:new Date().toISOString()}),await AN("onboarding",{fullName:d.fullName.trim(),age:d.age.trim(),sex:d.sex.trim(),email:d.email.trim(),phone:d.phone.trim(),discoverySource:d.discoverySource.trim(),heightCm:d.heightCm.trim(),weightKg:d.weightKg.trim(),pastProgram:d.pastProgram,trainingFrequency:d.trainingFrequency,workoutDuration:d.workoutDuration,workoutLocation:d.workoutLocation,equipment:d.equipment.trim(),trainingTypeHistory:d.trainingTypeHistory.trim(),hasInjuries:d.hasInjuries,injuryDetails:d.injuryDetails.trim(),objectivePrimary:d.objectivePrimary.trim(),objectiveReason:d.objectiveReason.trim(),expectedTimeline:d.expectedTimeline.trim(),supportPreference:d.supportPreference,supportPreferenceOther:d.supportPreferenceOther.trim(),investmentRange:d.investmentRange,whatBlockedSoFar:d.whatBlockedSoFar.trim(),oneThingToImprove:d.oneThingToImprove.trim(),importanceScore:Number(d.importanceScore||0),riskIfNoChange:d.riskIfNoChange.trim(),readiness:d.readiness,goal:d.objectivePrimary.trim(),experienceLevel:d.pastProgram.trim(),trainingDaysPerWeek:d.trainingFrequency.includes("1-2")?2:d.trainingFrequency.includes("3-4")?4:5,notes:d.whatBlockedSoFar.trim()}),o("Perfetto, profilo salvato."),t("/app/client",{replace:!0})}catch(ee){i(dr(ee))}finally{y(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),E.jsx("h1",{children:"Partiamo dal tuo percorso"}),E.jsxs("p",{className:"hero-sub",children:["Step ",l+1," di ",lc,"  Completamento ",S,"%"]}),E.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:E.jsx("div",{className:"onboarding-progress-bar",style:{width:`${S}%`}})}),l===0?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Nome e cognome",E.jsx("input",{value:d.fullName,onChange:$=>k("fullName",$.target.value),placeholder:"Nome e cognome"})]}),E.jsxs("label",{children:["Et *",E.jsx("input",{value:d.age,onChange:$=>k("age",$.target.value),type:"number",min:12,max:99,placeholder:"Es. 28"})]}),E.jsxs("label",{children:["Sesso *",E.jsx("input",{value:d.sex,onChange:$=>k("sex",$.target.value),placeholder:"Es. Uomo, Donna, Altro"})]}),E.jsxs("label",{children:["E-mail *",E.jsx("input",{value:d.email,onChange:$=>k("email",$.target.value),type:"email"})]}),E.jsxs("label",{children:["Numero di telefono *",E.jsx("input",{value:d.phone,onChange:$=>k("phone",$.target.value),placeholder:"+39..."})]}),E.jsxs("label",{children:["Come mi hai conosciuto? *",E.jsx("input",{value:d.discoverySource,onChange:$=>k("discoverySource",$.target.value),placeholder:"Instagram, passaparola, ecc."})]})]}):null,l===1?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Altezza (cm) *",E.jsx("input",{value:d.heightCm,onChange:$=>k("heightCm",$.target.value),type:"number",min:100,max:250})]}),E.jsxs("label",{children:["Peso attuale (kg) *",E.jsx("input",{value:d.weightKg,onChange:$=>k("weightKg",$.target.value),type:"number",min:30,max:250})]}),E.jsxs("label",{children:["Hai mai seguito un programma di allenamento? *",E.jsxs("select",{value:d.pastProgram,onChange:$=>k("pastProgram",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si da solo/a",children:"Si da solo/a"}),E.jsx("option",{value:"Si con un coach fisico",children:"Si con un coach fisico"}),E.jsx("option",{value:"Si con coach online",children:"Si con coach online"}),E.jsx("option",{value:"No",children:"No"})]})]}),E.jsxs("label",{children:["Quante volte ti alleni a settimana? *",E.jsxs("select",{value:d.trainingFrequency,onChange:$=>k("trainingFrequency",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"1-2 a settimana",children:"1-2 a settimana"}),E.jsx("option",{value:"3-4 a settimana",children:"3-4 a settimana"}),E.jsx("option",{value:"5+ a settimana",children:"5+ a settimana"})]})]}),E.jsxs("label",{children:["Quanto tempo riesci a dedicare ad ogni allenamento? *",E.jsxs("select",{value:d.workoutDuration,onChange:$=>k("workoutDuration",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Meno di 30 minuti",children:"Meno di 30 minuti"}),E.jsx("option",{value:"30-45 minuti",children:"30-45 minuti"}),E.jsx("option",{value:"1 ora",children:"1 ora"}),E.jsx("option",{value:"Pi di 1 ora",children:"Pi di 1 ora"})]})]}),E.jsxs("label",{children:["Dove ti allenerai? *",E.jsxs("select",{value:d.workoutLocation,onChange:$=>k("workoutLocation",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"In palestra",children:"In palestra"}),E.jsx("option",{value:"A casa con attrezzi",children:"A casa con attrezzi"}),E.jsx("option",{value:"A corpo libero",children:"A corpo libero"}),E.jsx("option",{value:"All'aperto",children:"All'aperto"})]})]}),E.jsxs("label",{children:["Che tipo di attrezzi hai a disposizione? *",E.jsx("input",{value:d.equipment,onChange:$=>k("equipment",$.target.value),placeholder:"Es. manubri, elastici, sbarra..."})]}),E.jsxs("label",{children:["Che tipo di allenamento fai o hai fatto? *",E.jsx("textarea",{value:d.trainingTypeHistory,onChange:$=>k("trainingTypeHistory",$.target.value),placeholder:"Es. sala pesi, corsa, functional..."})]}),E.jsxs("label",{children:["Hai problemi fisici o infortuni? *",E.jsxs("select",{value:d.hasInjuries,onChange:$=>k("hasInjuries",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si",children:"Si"}),E.jsx("option",{value:"No",children:"No"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),d.hasInjuries==="Si"||d.hasInjuries==="Altro"?E.jsxs("label",{children:["Dettagli infortunio/problema",E.jsx("textarea",{value:d.injuryDetails,onChange:$=>k("injuryDetails",$.target.value)})]}):null]}):null,l===2?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Obiettivo principale *",E.jsxs("select",{value:d.objectivePrimary,onChange:$=>k("objectivePrimary",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Tonificazione",children:"Tonificazione"}),E.jsx("option",{value:"Dimagrimento",children:"Dimagrimento"}),E.jsx("option",{value:"Massa muscolare",children:"Massa muscolare"}),E.jsx("option",{value:"Performance",children:"Performance"}),E.jsx("option",{value:"Calisthenics skills",children:"Calisthenics skills"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),E.jsxs("label",{children:["Perch vuoi raggiungere questo obiettivo? *",E.jsx("textarea",{value:d.objectiveReason,onChange:$=>k("objectiveReason",$.target.value)})]}),E.jsxs("label",{children:["In quanto tempo vorresti vedere risultati? *",E.jsx("input",{value:d.expectedTimeline,onChange:$=>k("expectedTimeline",$.target.value),placeholder:"Es. 3 mesi"})]})]}):null,l===3?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Che tipo di supporto ti motiva? *",E.jsxs("select",{value:d.supportPreference,onChange:$=>k("supportPreference",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"call_settimanale",children:"Call settimanale con feedback personalizzato"}),E.jsx("option",{value:"messaggio_motivazionale",children:"Messaggio motivazionale 1-2 volte a settimana"}),E.jsx("option",{value:"checkin_progressi",children:"Check-in di progressi (ogni fine settimana)"}),E.jsx("option",{value:"contatto_libero",children:"Possibilit di scrivere al coach in qualsiasi momento"}),E.jsx("option",{value:"consigli_periodici",children:"Consigli periodici"}),E.jsx("option",{value:"challenge_settimanali",children:"Challenge settimanali per motivarmi"}),E.jsx("option",{value:"autonomo",children:"Preferisco essere autonomo senza troppo contatto"}),E.jsx("option",{value:"other",children:"Altro"})]})]}),d.supportPreference==="other"?E.jsxs("label",{children:["Specifica altro supporto",E.jsx("input",{value:d.supportPreferenceOther,onChange:$=>k("supportPreferenceOther",$.target.value)})]}):null,E.jsxs("label",{children:["Fascia di investimento disponibile *",E.jsxs("select",{value:d.investmentRange,onChange:$=>k("investmentRange",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"fino a 100",children:"fino a 100"}),E.jsx("option",{value:"100-150",children:"100-150"}),E.jsx("option",{value:"150-250",children:"150-250"}),E.jsx("option",{value:"oltre 250",children:"Oltre 250"})]})]}),E.jsxs("label",{children:["Cosa ti ha bloccato fino ad oggi? *",E.jsx("textarea",{value:d.whatBlockedSoFar,onChange:$=>k("whatBlockedSoFar",$.target.value)})]}),E.jsxs("label",{children:["Se migliorassi una sola cosa nei prossimi 3 mesi, quale sarebbe? *",E.jsx("textarea",{value:d.oneThingToImprove,onChange:$=>k("oneThingToImprove",$.target.value)})]}),E.jsxs("label",{children:["Quanto  importante per te raggiungere questo obiettivo? (1-10) *",E.jsx("input",{value:d.importanceScore,onChange:$=>k("importanceScore",$.target.value),type:"number",min:1,max:10})]}),E.jsxs("label",{children:["Cosa rischi se non cambi nulla nei prossimi 3 mesi? *",E.jsx("textarea",{value:d.riskIfNoChange,onChange:$=>k("riskIfNoChange",$.target.value)})]})]}):null,l===4?E.jsxs("label",{children:["Sei pronto/a a iniziare un percorso personalizzato? *",E.jsxs("select",{value:d.readiness,onChange:$=>k("readiness",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"pronto",children:"Si sono pronto/a a investire su me stesso/a e partire"}),E.jsx("option",{value:"dubbio",children:"Si, ma ho ancora qualche dubbio e vorrei parlarne prima"}),E.jsx("option",{value:"non_pronto",children:"No, al momento non sono pronto/a"})]})]}):null,E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:l===0||v,onClick:()=>h($=>Math.max(0,$-1)),children:"Indietro"}),l<lc-1?E.jsx("button",{className:"btn",type:"button",disabled:v,onClick:F,children:"Continua"}):E.jsx("button",{className:"btn",disabled:v,type:"button",onClick:()=>void O(),children:v?"Salvataggio...":"Completa onboarding"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void El(),children:"Esci e cambia account"})]})})}function A0(){return E.jsx("main",{className:"page page-center",children:E.jsxs("div",{className:"card",children:[E.jsx("p",{className:"eyebrow",children:"Gym PT"}),E.jsx("h1",{children:"Caricamento in corso"})]})})}class GN extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Qualcosa non ha funzionato"}),E.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function c_({allow:n,children:e}){const{user:t,role:i,initializing:o}=na();return o?E.jsx(A0,{}):t?i?n.includes(i)?e:E.jsx(Dn,{to:i==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:E.jsx(Dn,{to:"/onboarding",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function KN(){const{user:n,role:e,initializing:t}=na();return t?E.jsx(A0,{}):n?e?E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):E.jsx(Dn,{to:"/app/client",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function QN(){return E.jsx(GN,{children:E.jsxs(NI,{children:[E.jsx(Ts,{path:"/",element:E.jsx(KN,{})}),E.jsx(Ts,{path:"/auth",element:E.jsx(UN,{})}),E.jsx(Ts,{path:"/onboarding",element:E.jsx(WN,{})}),E.jsx(Ts,{path:"/app/coach",element:E.jsx(c_,{allow:["admin","trainer"],children:E.jsx(HN,{})})}),E.jsx(Ts,{path:"/app/client",element:E.jsx(c_,{allow:["client"],children:E.jsx($N,{})})}),E.jsx(Ts,{path:"*",element:E.jsx(Dn,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});UT.createRoot(document.getElementById("root")).render(E.jsx(d_.StrictMode,{children:E.jsx(HI,{children:E.jsx(jI,{children:E.jsx(QN,{})})})}));
