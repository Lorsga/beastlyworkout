function LT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function __(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $d={exports:{}},Za={},qd={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function MT(){if(cy)return ke;cy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),I=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,H={};function x(M,L,X){this.props=M,this.context=L,this.refs=H,this.updater=X||k}x.prototype.isReactComponent={},x.prototype.setState=function(M,L){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,L,"setState")},x.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=x.prototype;function Z(M,L,X){this.props=M,this.context=L,this.refs=H,this.updater=X||k}var te=Z.prototype=new $;te.constructor=Z,z(te,x.prototype),te.isPureReactComponent=!0;var oe=Array.isArray,Te=Object.prototype.hasOwnProperty,Ae={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(M,L,X){var le,he={},we=null,be=null;if(L!=null)for(le in L.ref!==void 0&&(be=L.ref),L.key!==void 0&&(we=""+L.key),L)Te.call(L,le)&&!D.hasOwnProperty(le)&&(he[le]=L[le]);var Ve=arguments.length-2;if(Ve===1)he.children=X;else if(1<Ve){for(var qe=Array(Ve),At=0;At<Ve;At++)qe[At]=arguments[At+2];he.children=qe}if(M&&M.defaultProps)for(le in Ve=M.defaultProps,Ve)he[le]===void 0&&(he[le]=Ve[le]);return{$$typeof:n,type:M,key:we,ref:be,props:he,_owner:Ae.current}}function R(M,L){return{$$typeof:n,type:M.type,key:L,ref:M.ref,props:M.props,_owner:M._owner}}function b(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function V(M){var L={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return L[X]})}var j=/\/+/g;function P(M,L){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):L.toString(36)}function et(M,L,X,le,he){var we=typeof M;(we==="undefined"||we==="boolean")&&(M=null);var be=!1;if(M===null)be=!0;else switch(we){case"string":case"number":be=!0;break;case"object":switch(M.$$typeof){case n:case e:be=!0}}if(be)return be=M,he=he(be),M=le===""?"."+P(be,0):le,oe(he)?(X="",M!=null&&(X=M.replace(j,"$&/")+"/"),et(he,L,X,"",function(At){return At})):he!=null&&(b(he)&&(he=R(he,X+(!he.key||be&&be.key===he.key?"":(""+he.key).replace(j,"$&/")+"/")+M)),L.push(he)),1;if(be=0,le=le===""?".":le+":",oe(M))for(var Ve=0;Ve<M.length;Ve++){we=M[Ve];var qe=le+P(we,Ve);be+=et(we,L,X,qe,he)}else if(qe=S(M),typeof qe=="function")for(M=qe.call(M),Ve=0;!(we=M.next()).done;)we=we.value,qe=le+P(we,Ve++),be+=et(we,L,X,qe,he);else if(we==="object")throw L=String(M),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return be}function It(M,L,X){if(M==null)return M;var le=[],he=0;return et(M,le,"","",function(we){return L.call(X,we,he++)}),le}function St(M){if(M._status===-1){var L=M._result;L=L(),L.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=L)}if(M._status===1)return M._result.default;throw M._result}var Ne={current:null},ie={transition:null},ge={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ie,ReactCurrentOwner:Ae};function ae(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:It,forEach:function(M,L,X){It(M,function(){L.apply(this,arguments)},X)},count:function(M){var L=0;return It(M,function(){L++}),L},toArray:function(M){return It(M,function(L){return L})||[]},only:function(M){if(!b(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ke.Component=x,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=Z,ke.StrictMode=i,ke.Suspense=p,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,ke.act=ae,ke.cloneElement=function(M,L,X){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var le=z({},M.props),he=M.key,we=M.ref,be=M._owner;if(L!=null){if(L.ref!==void 0&&(we=L.ref,be=Ae.current),L.key!==void 0&&(he=""+L.key),M.type&&M.type.defaultProps)var Ve=M.type.defaultProps;for(qe in L)Te.call(L,qe)&&!D.hasOwnProperty(qe)&&(le[qe]=L[qe]===void 0&&Ve!==void 0?Ve[qe]:L[qe])}var qe=arguments.length-2;if(qe===1)le.children=X;else if(1<qe){Ve=Array(qe);for(var At=0;At<qe;At++)Ve[At]=arguments[At+2];le.children=Ve}return{$$typeof:n,type:M.type,key:he,ref:we,props:le,_owner:be}},ke.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ke.createElement=A,ke.createFactory=function(M){var L=A.bind(null,M);return L.type=M,L},ke.createRef=function(){return{current:null}},ke.forwardRef=function(M){return{$$typeof:d,render:M}},ke.isValidElement=b,ke.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:St}},ke.memo=function(M,L){return{$$typeof:v,type:M,compare:L===void 0?null:L}},ke.startTransition=function(M){var L=ie.transition;ie.transition={};try{M()}finally{ie.transition=L}},ke.unstable_act=ae,ke.useCallback=function(M,L){return Ne.current.useCallback(M,L)},ke.useContext=function(M){return Ne.current.useContext(M)},ke.useDebugValue=function(){},ke.useDeferredValue=function(M){return Ne.current.useDeferredValue(M)},ke.useEffect=function(M,L){return Ne.current.useEffect(M,L)},ke.useId=function(){return Ne.current.useId()},ke.useImperativeHandle=function(M,L,X){return Ne.current.useImperativeHandle(M,L,X)},ke.useInsertionEffect=function(M,L){return Ne.current.useInsertionEffect(M,L)},ke.useLayoutEffect=function(M,L){return Ne.current.useLayoutEffect(M,L)},ke.useMemo=function(M,L){return Ne.current.useMemo(M,L)},ke.useReducer=function(M,L,X){return Ne.current.useReducer(M,L,X)},ke.useRef=function(M){return Ne.current.useRef(M)},ke.useState=function(M){return Ne.current.useState(M)},ke.useSyncExternalStore=function(M,L,X){return Ne.current.useSyncExternalStore(M,L,X)},ke.useTransition=function(){return Ne.current.useTransition()},ke.version="18.3.1",ke}var hy;function Gf(){return hy||(hy=1,qd.exports=MT()),qd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function jT(){if(dy)return Za;dy=1;var n=Gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,v){var y,I={},S=null,k=null;v!==void 0&&(S=""+v),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(k=p.ref);for(y in p)i.call(p,y)&&!l.hasOwnProperty(y)&&(I[y]=p[y]);if(d&&d.defaultProps)for(y in p=d.defaultProps,p)I[y]===void 0&&(I[y]=p[y]);return{$$typeof:e,type:d,key:S,ref:k,props:I,_owner:o.current}}return Za.Fragment=t,Za.jsx=h,Za.jsxs=h,Za}var fy;function UT(){return fy||(fy=1,$d.exports=jT()),$d.exports}var E=UT(),Q=Gf();const w_=__(Q),FT=LT({__proto__:null,default:w_},[Q]);var ec={},Hd={exports:{}},on={},Wd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function zT(){return py||(py=1,(function(n){function e(ie,ge){var ae=ie.length;ie.push(ge);e:for(;0<ae;){var M=ae-1>>>1,L=ie[M];if(0<o(L,ge))ie[M]=ge,ie[ae]=L,ae=M;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ge=ie[0],ae=ie.pop();if(ae!==ge){ie[0]=ae;e:for(var M=0,L=ie.length,X=L>>>1;M<X;){var le=2*(M+1)-1,he=ie[le],we=le+1,be=ie[we];if(0>o(he,ae))we<L&&0>o(be,he)?(ie[M]=be,ie[we]=ae,M=we):(ie[M]=he,ie[le]=ae,M=le);else if(we<L&&0>o(be,ae))ie[M]=be,ie[we]=ae,M=we;else break e}}return ge}function o(ie,ge){var ae=ie.sortIndex-ge.sortIndex;return ae!==0?ae:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var p=[],v=[],y=1,I=null,S=3,k=!1,z=!1,H=!1,x=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ie){for(var ge=t(v);ge!==null;){if(ge.callback===null)i(v);else if(ge.startTime<=ie)i(v),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(v)}}function oe(ie){if(H=!1,te(ie),!z)if(t(p)!==null)z=!0,St(Te);else{var ge=t(v);ge!==null&&Ne(oe,ge.startTime-ie)}}function Te(ie,ge){z=!1,H&&(H=!1,$(A),A=-1),k=!0;var ae=S;try{for(te(ge),I=t(p);I!==null&&(!(I.expirationTime>ge)||ie&&!V());){var M=I.callback;if(typeof M=="function"){I.callback=null,S=I.priorityLevel;var L=M(I.expirationTime<=ge);ge=n.unstable_now(),typeof L=="function"?I.callback=L:I===t(p)&&i(p),te(ge)}else i(p);I=t(p)}if(I!==null)var X=!0;else{var le=t(v);le!==null&&Ne(oe,le.startTime-ge),X=!1}return X}finally{I=null,S=ae,k=!1}}var Ae=!1,D=null,A=-1,R=5,b=-1;function V(){return!(n.unstable_now()-b<R)}function j(){if(D!==null){var ie=n.unstable_now();b=ie;var ge=!0;try{ge=D(!0,ie)}finally{ge?P():(Ae=!1,D=null)}}else Ae=!1}var P;if(typeof Z=="function")P=function(){Z(j)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,It=et.port2;et.port1.onmessage=j,P=function(){It.postMessage(null)}}else P=function(){x(j,0)};function St(ie){D=ie,Ae||(Ae=!0,P())}function Ne(ie,ge){A=x(function(){ie(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){z||k||(z=!0,St(Te))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var ae=S;S=ge;try{return ie()}finally{S=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=S;S=ie;try{return ge()}finally{S=ae}},n.unstable_scheduleCallback=function(ie,ge,ae){var M=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,ie){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ae+L,ie={id:y++,callback:ge,priorityLevel:ie,startTime:ae,expirationTime:L,sortIndex:-1},ae>M?(ie.sortIndex=ae,e(v,ie),t(p)===null&&ie===t(v)&&(H?($(A),A=-1):H=!0,Ne(oe,ae-M))):(ie.sortIndex=L,e(p,ie),z||k||(z=!0,St(Te))),ie},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ie){var ge=S;return function(){var ae=S;S=ge;try{return ie.apply(this,arguments)}finally{S=ae}}}})(Gd)),Gd}var my;function BT(){return my||(my=1,Wd.exports=zT()),Wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function $T(){if(gy)return on;gy=1;var n=Gf(),e=BT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},I={};function S(r){return p.call(I,r)?!0:p.call(y,r)?!1:v.test(r)?I[r]=!0:(y[r]=!0,!1)}function k(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function z(r,s,a,c){if(s===null||typeof s>"u"||k(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(r,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new H(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];x[s]=new H(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new H(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new H(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new H(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new H(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new H(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new H(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new H(r,5,!1,r.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace($,Z);x[s]=new H(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace($,Z);x[s]=new H(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace($,Z);x[s]=new H(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new H(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new H(r,1,!1,r.toLowerCase(),null,!0,!0)});function te(r,s,a,c){var f=x.hasOwnProperty(s)?x[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),Ae=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),V=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),It=Symbol.for("react.memo"),St=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ge(r){return r===null||typeof r!="object"?null:(r=ie&&r[ie]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,M;function L(r){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+r}var X=!1;function le(r,s){if(!r||X)return"";X=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var c=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){c=q}r.call(s.prototype)}else{try{throw Error()}catch(q){c=q}r()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var N=`
`+f[w].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=w&&0<=C);break}}}finally{X=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?L(r):""}function he(r){switch(r.tag){case 5:return L(r.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return r=le(r.type,!1),r;case 11:return r=le(r.type.render,!1),r;case 1:return r=le(r.type,!0),r;default:return""}}function we(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case Ae:return"Portal";case R:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case et:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case It:return s=r.displayName||null,s!==null?s:we(r.type)||"Memo";case St:s=r._payload,r=r._init;try{return we(r(s))}catch{}}return null}function be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ve(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function At(r){var s=qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ir(r){r._valueTracker||(r._valueTracker=At(r))}function Us(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=qe(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Jr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ki(r,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Fs(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ve(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function sa(r,s){s=s.checked,s!=null&&te(r,"checked",s,!1)}function oa(r,s){sa(r,s);var a=Ve(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?zs(r,s.type,a):s.hasOwnProperty("defaultValue")&&zs(r,s.type,Ve(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ul(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function zs(r,s,a){(s!=="number"||Jr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Sr=Array.isArray;function Ar(r,s,a,c){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Ve(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function aa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Sr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Ve(a)}}function $s(r,s){var a=Ve(s.value),c=Ve(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function la(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function yt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?yt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rr,ua=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Yr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(r){Xi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Qi[s]=Qi[r]})});function ca(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qi.hasOwnProperty(r)&&Qi[r]?(""+s).trim():s+"px"}function ha(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=ca(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,f):r[a]=f}}var da=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fa(r,s){if(s){if(da[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function pa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ji=null;function qs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hs=null,En=null,tr=null;function Ws(r){if(r=ja(r)){if(typeof Hs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=mu(s),Hs(r.stateNode,r.type,s))}}function nr(r){En?tr?tr.push(r):tr=[r]:En=r}function ma(){if(En){var r=En,s=tr;if(tr=En=null,Ws(r),s)for(r=0;r<s.length;r++)Ws(s[r])}}function Yi(r,s){return r(s)}function ga(){}var Cr=!1;function ya(r,s,a){if(Cr)return r(s,a);Cr=!0;try{return Yi(r,s,a)}finally{Cr=!1,(En!==null||tr!==null)&&(ga(),ma())}}function at(r,s){var a=r.stateNode;if(a===null)return null;var c=mu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Gs=!1;if(d)try{var On={};Object.defineProperty(On,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Gs=!1}function Zi(r,s,a,c,f,g,w,C,N){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(Y){this.onError(Y)}}var es=!1,Ks=null,Vn=!1,va=null,yh={onError:function(r){es=!0,Ks=r}};function Qs(r,s,a,c,f,g,w,C,N){es=!1,Ks=null,Zi.apply(yh,arguments)}function Fl(r,s,a,c,f,g,w,C,N){if(Qs.apply(this,arguments),es){if(es){var q=Ks;es=!1,Ks=null}else throw Error(t(198));Vn||(Vn=!0,va=q)}}function Ln(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function ts(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mn(r){if(Ln(r)!==r)throw Error(t(188))}function zl(r){var s=r.alternate;if(!s){if(s=Ln(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Mn(f),r;if(g===c)return Mn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,c=g;break}if(C===c){w=!0,c=f,a=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===a){w=!0,a=g,c=f;break}if(C===c){w=!0,c=g,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function _a(r){return r=zl(r),r!==null?Xs(r):null}function Xs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Xs(r);if(s!==null)return s;r=r.sibling}return null}var Js=e.unstable_scheduleCallback,wa=e.unstable_cancelCallback,Bl=e.unstable_shouldYield,vh=e.unstable_requestPaint,He=e.unstable_now,$l=e.unstable_getCurrentPriorityLevel,ns=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,Ea=e.unstable_LowPriority,ql=e.unstable_IdlePriority,rs=null,dn=null;function Hl(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(rs,r,void 0,(r.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:Gl,Ta=Math.log,Wl=Math.LN2;function Gl(r){return r>>>=0,r===0?32:31-(Ta(r)/Wl|0)|0}var Ys=64,Zs=4194304;function ei(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function is(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?c=ei(C):(g&=w,g!==0&&(c=ei(g)))}else w=a&~f,w!==0?c=ei(w):g!==0&&(c=ei(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-Gt(s),f=1<<a,c|=r[a],s&=~f;return c}function _h(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Gt(g),C=1<<w,N=f[w];N===-1?((C&a)===0||(C&c)!==0)&&(f[w]=_h(C,s)):N<=s&&(r.expiredLanes|=C),g&=~C}}function fn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ss(){var r=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),r}function ti(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function ni(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Gt(s),r[s]=a}function Be(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Gt(a),g=1<<f;s[f]=0,c[f]=-1,r[f]=-1,a&=~g}}function ri(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-Gt(a),f=1<<c;f&s|r[c]&s&&(r[c]|=s),a&=~f}}var Oe=0;function ii(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Kl,eo,Ql,Xl,Jl,Ia=!1,rr=[],xt=null,jn=null,Un=null,si=new Map,In=new Map,ir=[],wh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yl(r,s){switch(r){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":si.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(s.pointerId)}}function Yt(r,s,a,c,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=ja(s),s!==null&&eo(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Eh(r,s,a,c,f){switch(s){case"focusin":return xt=Yt(xt,r,s,a,c,f),!0;case"dragenter":return jn=Yt(jn,r,s,a,c,f),!0;case"mouseover":return Un=Yt(Un,r,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return si.set(g,Yt(si.get(g)||null,r,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,In.set(g,Yt(In.get(g)||null,r,s,a,c,f)),!0}return!1}function Zl(r){var s=cs(r.target);if(s!==null){var a=Ln(s);if(a!==null){if(s=a.tag,s===13){if(s=ts(a),s!==null){r.blockedOn=s,Jl(r.priority,function(){Ql(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function kr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=to(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Ji=c,a.target.dispatchEvent(c),Ji=null}else return s=ja(a),s!==null&&eo(s),r.blockedOn=a,!1;s.shift()}return!0}function os(r,s,a){kr(r)&&a.delete(s)}function eu(){Ia=!1,xt!==null&&kr(xt)&&(xt=null),jn!==null&&kr(jn)&&(jn=null),Un!==null&&kr(Un)&&(Un=null),si.forEach(os),In.forEach(os)}function Fn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ia||(Ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eu)))}function zn(r){function s(f){return Fn(f,r)}if(0<rr.length){Fn(rr[0],r);for(var a=1;a<rr.length;a++){var c=rr[a];c.blockedOn===r&&(c.blockedOn=null)}}for(xt!==null&&Fn(xt,r),jn!==null&&Fn(jn,r),Un!==null&&Fn(Un,r),si.forEach(s),In.forEach(s),a=0;a<ir.length;a++)c=ir[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)Zl(a),a.blockedOn===null&&ir.shift()}var Nr=oe.ReactCurrentBatchConfig,oi=!0;function Je(r,s,a,c){var f=Oe,g=Nr.transition;Nr.transition=null;try{Oe=1,Sa(r,s,a,c)}finally{Oe=f,Nr.transition=g}}function Th(r,s,a,c){var f=Oe,g=Nr.transition;Nr.transition=null;try{Oe=4,Sa(r,s,a,c)}finally{Oe=f,Nr.transition=g}}function Sa(r,s,a,c){if(oi){var f=to(r,s,a,c);if(f===null)bh(r,s,c,as,a),Yl(r,c);else if(Eh(f,r,s,a,c))c.stopPropagation();else if(Yl(r,c),s&4&&-1<wh.indexOf(r)){for(;f!==null;){var g=ja(f);if(g!==null&&Kl(g),g=to(r,s,a,c),g===null&&bh(r,s,c,as,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else bh(r,s,c,null,a)}}var as=null;function to(r,s,a,c){if(as=null,r=qs(c),r=cs(r),r!==null)if(s=Ln(r),s===null)r=null;else if(a=s.tag,a===13){if(r=ts(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return as=r,null}function Aa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($l()){case ns:return 1;case Zr:return 4;case Tn:case Ea:return 16;case ql:return 536870912;default:return 16}default:return 16}}var pn=null,no=null,Zt=null;function Ra(){if(Zt)return Zt;var r,s=no,a=s.length,c,f="value"in pn?pn.value:pn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return Zt=f.slice(r,1<c?1-c:void 0)}function ro(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function sr(){return!0}function Ca(){return!1}function Dt(r){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(a=r[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?sr:Ca,this.isPropagationStopped=Ca,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),s}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=Dt(Bn),or=ae({},Bn,{view:0,detail:0}),Ih=Dt(or),so,xr,ai,ls=ae({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(so=r.screenX-ai.screenX,xr=r.screenY-ai.screenY):xr=so=0,ai=r),so)},movementY:function(r){return"movementY"in r?r.movementY:xr}}),oo=Dt(ls),Pa=ae({},ls,{dataTransfer:0}),tu=Dt(Pa),ao=ae({},or,{relatedTarget:0}),lo=Dt(ao),nu=ae({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dr=Dt(nu),ru=ae({},Bn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),iu=Dt(ru),su=ae({},Bn,{data:0}),ka=Dt(su),uo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ou[r])?!!s[r]:!1}function ar(){return au}var u=ae({},or,{key:function(r){if(r.key){var s=uo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ro(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(r){return r.type==="keypress"?ro(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ro(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Dt(u),_=ae({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Dt(_),U=ae({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),W=Dt(U),re=ae({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Dt(re),_t=ae({},ls,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Dt(_t),Rt=[9,13,27,32],dt=d&&"CompositionEvent"in window,Sn=null;d&&"documentMode"in document&&(Sn=document.documentMode);var mn=d&&"TextEvent"in window&&!Sn,us=d&&(!dt||Sn&&8<Sn&&11>=Sn),co=" ",im=!1;function sm(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function om(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ho=!1;function b0(r,s){switch(r){case"compositionend":return om(s);case"keypress":return s.which!==32?null:(im=!0,co);case"textInput":return r=s.data,r===co&&im?null:r;default:return null}}function O0(r,s){if(ho)return r==="compositionend"||!dt&&sm(r,s)?(r=Ra(),Zt=no=pn=null,ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return us&&s.locale!=="ko"?null:s.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!V0[r.type]:s==="textarea"}function lm(r,s,a,c){nr(c),s=du(s,"onChange"),0<s.length&&(a=new io("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Na=null,xa=null;function L0(r){Rm(r,0)}function lu(r){var s=yo(r);if(Us(s))return r}function M0(r,s){if(r==="change")return s}var um=!1;if(d){var Sh;if(d){var Ah="oninput"in document;if(!Ah){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Ah=typeof cm.oninput=="function"}Sh=Ah}else Sh=!1;um=Sh&&(!document.documentMode||9<document.documentMode)}function hm(){Na&&(Na.detachEvent("onpropertychange",dm),xa=Na=null)}function dm(r){if(r.propertyName==="value"&&lu(xa)){var s=[];lm(s,xa,r,qs(r)),ya(L0,s)}}function j0(r,s,a){r==="focusin"?(hm(),Na=s,xa=a,Na.attachEvent("onpropertychange",dm)):r==="focusout"&&hm()}function U0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return lu(xa)}function F0(r,s){if(r==="click")return lu(s)}function z0(r,s){if(r==="input"||r==="change")return lu(s)}function B0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var $n=typeof Object.is=="function"?Object.is:B0;function Da(r,s){if($n(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(s,f)||!$n(r[f],s[f]))return!1}return!0}function fm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pm(r,s){var a=fm(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fm(a)}}function mm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?mm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function gm(){for(var r=window,s=Jr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Jr(r.document)}return s}function Rh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function $0(r){var s=gm(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&mm(a.ownerDocument.documentElement,a)){if(c!==null&&Rh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!r.extend&&g>c&&(f=c,c=g,g=f),f=pm(a,g);var w=pm(a,c);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>c?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var q0=d&&"documentMode"in document&&11>=document.documentMode,fo=null,Ch=null,ba=null,Ph=!1;function ym(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ph||fo==null||fo!==Jr(c)||(c=fo,"selectionStart"in c&&Rh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ba&&Da(ba,c)||(ba=c,c=du(Ch,"onSelect"),0<c.length&&(s=new io("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=fo)))}function uu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var po={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},kh={},vm={};d&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function cu(r){if(kh[r])return kh[r];if(!po[r])return r;var s=po[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in vm)return kh[r]=s[a];return r}var _m=cu("animationend"),wm=cu("animationiteration"),Em=cu("animationstart"),Tm=cu("transitionend"),Im=new Map,Sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(r,s){Im.set(r,s),l(s,[r])}for(var Nh=0;Nh<Sm.length;Nh++){var xh=Sm[Nh],H0=xh.toLowerCase(),W0=xh[0].toUpperCase()+xh.slice(1);li(H0,"on"+W0)}li(_m,"onAnimationEnd"),li(wm,"onAnimationIteration"),li(Em,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(Tm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Am(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,Fl(c,s,void 0,r),r.currentTarget=null}function Rm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,q=C.currentTarget;if(C=C.listener,N!==g&&f.isPropagationStopped())break e;Am(f,C,q),g=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,q=C.currentTarget,C=C.listener,N!==g&&f.isPropagationStopped())break e;Am(f,C,q),g=N}}}if(Vn)throw r=va,Vn=!1,va=null,r}function Ke(r,s){var a=s[Uh];a===void 0&&(a=s[Uh]=new Set);var c=r+"__bubble";a.has(c)||(Cm(s,r,2,!1),a.add(c))}function Dh(r,s,a){var c=0;s&&(c|=4),Cm(a,r,c,s)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Va(r){if(!r[hu]){r[hu]=!0,i.forEach(function(a){a!=="selectionchange"&&(G0.has(a)||Dh(a,!1,r),Dh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[hu]||(s[hu]=!0,Dh("selectionchange",!1,s))}}function Cm(r,s,a,c){switch(Aa(s)){case 1:var f=Je;break;case 4:f=Th;break;default:f=Sa}a=f.bind(null,s,a,r),f=void 0,!Gs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function bh(r,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;C!==null;){if(w=cs(C),w===null)return;if(N=w.tag,N===5||N===6){c=g=w;continue e}C=C.parentNode}}c=c.return}ya(function(){var q=g,Y=qs(a),ee=[];e:{var J=Im.get(r);if(J!==void 0){var ue=io,fe=r;switch(r){case"keypress":if(ro(a)===0)break e;case"keydown":case"keyup":ue=m;break;case"focusin":fe="focus",ue=lo;break;case"focusout":fe="blur",ue=lo;break;case"beforeblur":case"afterblur":ue=lo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case _m:case wm:case Em:ue=Dr;break;case Tm:ue=ze;break;case"scroll":ue=Ih;break;case"wheel":ue=Le;break;case"copy":case"cut":case"paste":ue=iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var pe=(s&4)!==0,lt=!pe&&r==="scroll",F=pe?J!==null?J+"Capture":null:J;pe=[];for(var O=q,B;O!==null;){B=O;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,F!==null&&(ne=at(O,F),ne!=null&&pe.push(La(O,ne,B)))),lt)break;O=O.return}0<pe.length&&(J=new ue(J,fe,null,a,Y),ee.push({event:J,listeners:pe}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",J&&a!==Ji&&(fe=a.relatedTarget||a.fromElement)&&(cs(fe)||fe[br]))break e;if((ue||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ue?(fe=a.relatedTarget||a.toElement,ue=q,fe=fe?cs(fe):null,fe!==null&&(lt=Ln(fe),fe!==lt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=q),ue!==fe)){if(pe=oo,ne="onMouseLeave",F="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(pe=T,ne="onPointerLeave",F="onPointerEnter",O="pointer"),lt=ue==null?J:yo(ue),B=fe==null?J:yo(fe),J=new pe(ne,O+"leave",ue,a,Y),J.target=lt,J.relatedTarget=B,ne=null,cs(Y)===q&&(pe=new pe(F,O+"enter",fe,a,Y),pe.target=B,pe.relatedTarget=lt,ne=pe),lt=ne,ue&&fe)t:{for(pe=ue,F=fe,O=0,B=pe;B;B=mo(B))O++;for(B=0,ne=F;ne;ne=mo(ne))B++;for(;0<O-B;)pe=mo(pe),O--;for(;0<B-O;)F=mo(F),B--;for(;O--;){if(pe===F||F!==null&&pe===F.alternate)break t;pe=mo(pe),F=mo(F)}pe=null}else pe=null;ue!==null&&Pm(ee,J,ue,pe,!1),fe!==null&&lt!==null&&Pm(ee,lt,fe,pe,!0)}}e:{if(J=q?yo(q):window,ue=J.nodeName&&J.nodeName.toLowerCase(),ue==="select"||ue==="input"&&J.type==="file")var me=M0;else if(am(J))if(um)me=z0;else{me=U0;var ve=j0}else(ue=J.nodeName)&&ue.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(me=F0);if(me&&(me=me(r,q))){lm(ee,me,a,Y);break e}ve&&ve(r,J,q),r==="focusout"&&(ve=J._wrapperState)&&ve.controlled&&J.type==="number"&&zs(J,"number",J.value)}switch(ve=q?yo(q):window,r){case"focusin":(am(ve)||ve.contentEditable==="true")&&(fo=ve,Ch=q,ba=null);break;case"focusout":ba=Ch=fo=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,ym(ee,a,Y);break;case"selectionchange":if(q0)break;case"keydown":case"keyup":ym(ee,a,Y)}var _e;if(dt)e:{switch(r){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ho?sm(r,a)&&(Ie="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(us&&a.locale!=="ko"&&(ho||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ho&&(_e=Ra()):(pn=Y,no="value"in pn?pn.value:pn.textContent,ho=!0)),ve=du(q,Ie),0<ve.length&&(Ie=new ka(Ie,r,null,a,Y),ee.push({event:Ie,listeners:ve}),_e?Ie.data=_e:(_e=om(a),_e!==null&&(Ie.data=_e)))),(_e=mn?b0(r,a):O0(r,a))&&(q=du(q,"onBeforeInput"),0<q.length&&(Y=new ka("onBeforeInput","beforeinput",null,a,Y),ee.push({event:Y,listeners:q}),Y.data=_e))}Rm(ee,s)})}function La(r,s,a){return{instance:r,listener:s,currentTarget:a}}function du(r,s){for(var a=s+"Capture",c=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=at(r,a),g!=null&&c.unshift(La(r,g,f)),g=at(r,s),g!=null&&c.push(La(r,g,f))),r=r.return}return c}function mo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Pm(r,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,q=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&q!==null&&(C=q,f?(N=at(a,g),N!=null&&w.unshift(La(a,N,C))):f||(N=at(a,g),N!=null&&w.push(La(a,N,C)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var K0=/\r\n?/g,Q0=/\u0000|\uFFFD/g;function km(r){return(typeof r=="string"?r:""+r).replace(K0,`
`).replace(Q0,"")}function fu(r,s,a){if(s=km(s),km(r)!==s&&a)throw Error(t(425))}function pu(){}var Oh=null,Vh=null;function Lh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mh=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(r){return Nm.resolve(null).then(r).catch(Y0)}:Mh;function Y0(r){setTimeout(function(){throw r})}function jh(r,s){var a=s,c=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){r.removeChild(f),zn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);zn(s)}function ui(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function xm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var go=Math.random().toString(36).slice(2),lr="__reactFiber$"+go,Ma="__reactProps$"+go,br="__reactContainer$"+go,Uh="__reactEvents$"+go,Z0="__reactListeners$"+go,eT="__reactHandles$"+go;function cs(r){var s=r[lr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[br]||a[lr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=xm(r);r!==null;){if(a=r[lr])return a;r=xm(r)}return s}r=a,a=r.parentNode}return null}function ja(r){return r=r[lr]||r[br],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function yo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function mu(r){return r[Ma]||null}var Fh=[],vo=-1;function ci(r){return{current:r}}function Qe(r){0>vo||(r.current=Fh[vo],Fh[vo]=null,vo--)}function We(r,s){vo++,Fh[vo]=r.current,r.current=s}var hi={},jt=ci(hi),en=ci(!1),hs=hi;function _o(r,s){var a=r.type.contextTypes;if(!a)return hi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function tn(r){return r=r.childContextTypes,r!=null}function gu(){Qe(en),Qe(jt)}function Dm(r,s,a){if(jt.current!==hi)throw Error(t(168));We(jt,s),We(en,a)}function bm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,be(r)||"Unknown",f));return ae({},a,c)}function yu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hi,hs=jt.current,We(jt,r),We(en,en.current),!0}function Om(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=bm(r,s,hs),c.__reactInternalMemoizedMergedChildContext=r,Qe(en),Qe(jt),We(jt,r)):Qe(en),We(en,a)}var Or=null,vu=!1,zh=!1;function Vm(r){Or===null?Or=[r]:Or.push(r)}function tT(r){vu=!0,Vm(r)}function di(){if(!zh&&Or!==null){zh=!0;var r=0,s=Oe;try{var a=Or;for(Oe=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Or=null,vu=!1}catch(f){throw Or!==null&&(Or=Or.slice(r+1)),Js(ns,di),f}finally{Oe=s,zh=!1}}return null}var wo=[],Eo=0,_u=null,wu=0,An=[],Rn=0,ds=null,Vr=1,Lr="";function fs(r,s){wo[Eo++]=wu,wo[Eo++]=_u,_u=r,wu=s}function Lm(r,s,a){An[Rn++]=Vr,An[Rn++]=Lr,An[Rn++]=ds,ds=r;var c=Vr;r=Lr;var f=32-Gt(c)-1;c&=~(1<<f),a+=1;var g=32-Gt(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Vr=1<<32-Gt(s)+f|a<<f|c,Lr=g+r}else Vr=1<<g|a<<f|c,Lr=r}function Bh(r){r.return!==null&&(fs(r,1),Lm(r,1,0))}function $h(r){for(;r===_u;)_u=wo[--Eo],wo[Eo]=null,wu=wo[--Eo],wo[Eo]=null;for(;r===ds;)ds=An[--Rn],An[Rn]=null,Lr=An[--Rn],An[Rn]=null,Vr=An[--Rn],An[Rn]=null}var gn=null,yn=null,Ye=!1,qn=null;function Mm(r,s){var a=Nn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function jm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gn=r,yn=ui(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gn=r,yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ds!==null?{id:Vr,overflow:Lr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Nn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,gn=r,yn=null,!0):!1;default:return!1}}function qh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Hh(r){if(Ye){var s=yn;if(s){var a=s;if(!jm(r,s)){if(qh(r))throw Error(t(418));s=ui(a.nextSibling);var c=gn;s&&jm(r,s)?Mm(c,a):(r.flags=r.flags&-4097|2,Ye=!1,gn=r)}}else{if(qh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ye=!1,gn=r}}}function Um(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gn=r}function Eu(r){if(r!==gn)return!1;if(!Ye)return Um(r),Ye=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Lh(r.type,r.memoizedProps)),s&&(s=yn)){if(qh(r))throw Fm(),Error(t(418));for(;s;)Mm(r,s),s=ui(s.nextSibling)}if(Um(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){yn=ui(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}yn=null}}else yn=gn?ui(r.stateNode.nextSibling):null;return!0}function Fm(){for(var r=yn;r;)r=ui(r.nextSibling)}function To(){yn=gn=null,Ye=!1}function Wh(r){qn===null?qn=[r]:qn.push(r)}var nT=oe.ReactCurrentBatchConfig;function Ua(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var f=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Tu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function zm(r){var s=r._init;return s(r._payload)}function Bm(r){function s(F,O){if(r){var B=F.deletions;B===null?(F.deletions=[O],F.flags|=16):B.push(O)}}function a(F,O){if(!r)return null;for(;O!==null;)s(F,O),O=O.sibling;return null}function c(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function f(F,O){return F=wi(F,O),F.index=0,F.sibling=null,F}function g(F,O,B){return F.index=B,r?(B=F.alternate,B!==null?(B=B.index,B<O?(F.flags|=2,O):B):(F.flags|=2,O)):(F.flags|=1048576,O)}function w(F){return r&&F.alternate===null&&(F.flags|=2),F}function C(F,O,B,ne){return O===null||O.tag!==6?(O=Md(B,F.mode,ne),O.return=F,O):(O=f(O,B),O.return=F,O)}function N(F,O,B,ne){var me=B.type;return me===D?Y(F,O,B.props.children,ne,B.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===St&&zm(me)===O.type)?(ne=f(O,B.props),ne.ref=Ua(F,O,B),ne.return=F,ne):(ne=Wu(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Ua(F,O,B),ne.return=F,ne)}function q(F,O,B,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=jd(B,F.mode,ne),O.return=F,O):(O=f(O,B.children||[]),O.return=F,O)}function Y(F,O,B,ne,me){return O===null||O.tag!==7?(O=Es(B,F.mode,ne,me),O.return=F,O):(O=f(O,B),O.return=F,O)}function ee(F,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Md(""+O,F.mode,B),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Te:return B=Wu(O.type,O.key,O.props,null,F.mode,B),B.ref=Ua(F,null,O),B.return=F,B;case Ae:return O=jd(O,F.mode,B),O.return=F,O;case St:var ne=O._init;return ee(F,ne(O._payload),B)}if(Sr(O)||ge(O))return O=Es(O,F.mode,B,null),O.return=F,O;Tu(F,O)}return null}function J(F,O,B,ne){var me=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:C(F,O,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Te:return B.key===me?N(F,O,B,ne):null;case Ae:return B.key===me?q(F,O,B,ne):null;case St:return me=B._init,J(F,O,me(B._payload),ne)}if(Sr(B)||ge(B))return me!==null?null:Y(F,O,B,ne,null);Tu(F,B)}return null}function ue(F,O,B,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(B)||null,C(O,F,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Te:return F=F.get(ne.key===null?B:ne.key)||null,N(O,F,ne,me);case Ae:return F=F.get(ne.key===null?B:ne.key)||null,q(O,F,ne,me);case St:var ve=ne._init;return ue(F,O,B,ve(ne._payload),me)}if(Sr(ne)||ge(ne))return F=F.get(B)||null,Y(O,F,ne,me,null);Tu(O,ne)}return null}function fe(F,O,B,ne){for(var me=null,ve=null,_e=O,Ie=O=0,kt=null;_e!==null&&Ie<B.length;Ie++){_e.index>Ie?(kt=_e,_e=null):kt=_e.sibling;var Ue=J(F,_e,B[Ie],ne);if(Ue===null){_e===null&&(_e=kt);break}r&&_e&&Ue.alternate===null&&s(F,_e),O=g(Ue,O,Ie),ve===null?me=Ue:ve.sibling=Ue,ve=Ue,_e=kt}if(Ie===B.length)return a(F,_e),Ye&&fs(F,Ie),me;if(_e===null){for(;Ie<B.length;Ie++)_e=ee(F,B[Ie],ne),_e!==null&&(O=g(_e,O,Ie),ve===null?me=_e:ve.sibling=_e,ve=_e);return Ye&&fs(F,Ie),me}for(_e=c(F,_e);Ie<B.length;Ie++)kt=ue(_e,F,Ie,B[Ie],ne),kt!==null&&(r&&kt.alternate!==null&&_e.delete(kt.key===null?Ie:kt.key),O=g(kt,O,Ie),ve===null?me=kt:ve.sibling=kt,ve=kt);return r&&_e.forEach(function(Ei){return s(F,Ei)}),Ye&&fs(F,Ie),me}function pe(F,O,B,ne){var me=ge(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var ve=me=null,_e=O,Ie=O=0,kt=null,Ue=B.next();_e!==null&&!Ue.done;Ie++,Ue=B.next()){_e.index>Ie?(kt=_e,_e=null):kt=_e.sibling;var Ei=J(F,_e,Ue.value,ne);if(Ei===null){_e===null&&(_e=kt);break}r&&_e&&Ei.alternate===null&&s(F,_e),O=g(Ei,O,Ie),ve===null?me=Ei:ve.sibling=Ei,ve=Ei,_e=kt}if(Ue.done)return a(F,_e),Ye&&fs(F,Ie),me;if(_e===null){for(;!Ue.done;Ie++,Ue=B.next())Ue=ee(F,Ue.value,ne),Ue!==null&&(O=g(Ue,O,Ie),ve===null?me=Ue:ve.sibling=Ue,ve=Ue);return Ye&&fs(F,Ie),me}for(_e=c(F,_e);!Ue.done;Ie++,Ue=B.next())Ue=ue(_e,F,Ie,Ue.value,ne),Ue!==null&&(r&&Ue.alternate!==null&&_e.delete(Ue.key===null?Ie:Ue.key),O=g(Ue,O,Ie),ve===null?me=Ue:ve.sibling=Ue,ve=Ue);return r&&_e.forEach(function(VT){return s(F,VT)}),Ye&&fs(F,Ie),me}function lt(F,O,B,ne){if(typeof B=="object"&&B!==null&&B.type===D&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Te:e:{for(var me=B.key,ve=O;ve!==null;){if(ve.key===me){if(me=B.type,me===D){if(ve.tag===7){a(F,ve.sibling),O=f(ve,B.props.children),O.return=F,F=O;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===St&&zm(me)===ve.type){a(F,ve.sibling),O=f(ve,B.props),O.ref=Ua(F,ve,B),O.return=F,F=O;break e}a(F,ve);break}else s(F,ve);ve=ve.sibling}B.type===D?(O=Es(B.props.children,F.mode,ne,B.key),O.return=F,F=O):(ne=Wu(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Ua(F,O,B),ne.return=F,F=ne)}return w(F);case Ae:e:{for(ve=B.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(F,O.sibling),O=f(O,B.children||[]),O.return=F,F=O;break e}else{a(F,O);break}else s(F,O);O=O.sibling}O=jd(B,F.mode,ne),O.return=F,F=O}return w(F);case St:return ve=B._init,lt(F,O,ve(B._payload),ne)}if(Sr(B))return fe(F,O,B,ne);if(ge(B))return pe(F,O,B,ne);Tu(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,O!==null&&O.tag===6?(a(F,O.sibling),O=f(O,B),O.return=F,F=O):(a(F,O),O=Md(B,F.mode,ne),O.return=F,F=O),w(F)):a(F,O)}return lt}var Io=Bm(!0),$m=Bm(!1),Iu=ci(null),Su=null,So=null,Gh=null;function Kh(){Gh=So=Su=null}function Qh(r){var s=Iu.current;Qe(Iu),r._currentValue=s}function Xh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ao(r,s){Su=r,Gh=So=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(nn=!0),r.firstContext=null)}function Cn(r){var s=r._currentValue;if(Gh!==r)if(r={context:r,memoizedValue:s,next:null},So===null){if(Su===null)throw Error(t(308));So=r,Su.dependencies={lanes:0,firstContext:r}}else So=So.next=r;return s}var ps=null;function Jh(r){ps===null?ps=[r]:ps.push(r)}function qm(r,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Jh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Mr(r,c)}function Mr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var fi=!1;function Yh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function jr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function pi(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Mr(r,a)}return f=c.interleaved,f===null?(s.next=s,Jh(c)):(s.next=f.next,f.next=s),c.interleaved=s,Mr(r,a)}function Au(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ri(r,a)}}function Wm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Ru(r,s,a,c){var f=r.updateQueue;fi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var N=C,q=N.next;N.next=null,w===null?g=q:w.next=q,w=N;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==w&&(C===null?Y.firstBaseUpdate=q:C.next=q,Y.lastBaseUpdate=N))}if(g!==null){var ee=f.baseState;w=0,Y=q=N=null,C=g;do{var J=C.lane,ue=C.eventTime;if((c&J)===J){Y!==null&&(Y=Y.next={eventTime:ue,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var fe=r,pe=C;switch(J=s,ue=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ee=fe.call(ue,ee,J);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,J=typeof fe=="function"?fe.call(ue,ee,J):fe,J==null)break e;ee=ae({},ee,J);break e;case 2:fi=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,J=f.effects,J===null?f.effects=[C]:J.push(C))}else ue={eventTime:ue,lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(q=Y=ue,N=ee):Y=Y.next=ue,w|=J;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;J=C,C=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(Y===null&&(N=ee),f.baseState=N,f.firstBaseUpdate=q,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ys|=w,r.lanes=w,r.memoizedState=ee}}function Gm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Fa={},ur=ci(Fa),za=ci(Fa),Ba=ci(Fa);function ms(r){if(r===Fa)throw Error(t(174));return r}function Zh(r,s){switch(We(Ba,s),We(za,r),We(ur,Fa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}Qe(ur),We(ur,s)}function Ro(){Qe(ur),Qe(za),Qe(Ba)}function Km(r){ms(Ba.current);var s=ms(ur.current),a=vt(s,r.type);s!==a&&(We(za,r),We(ur,a))}function ed(r){za.current===r&&(Qe(ur),Qe(za))}var tt=ci(0);function Cu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var td=[];function nd(){for(var r=0;r<td.length;r++)td[r]._workInProgressVersionPrimary=null;td.length=0}var Pu=oe.ReactCurrentDispatcher,rd=oe.ReactCurrentBatchConfig,gs=0,nt=null,wt=null,Ct=null,ku=!1,$a=!1,qa=0,rT=0;function Ut(){throw Error(t(321))}function id(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!$n(r[a],s[a]))return!1;return!0}function sd(r,s,a,c,f,g){if(gs=g,nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Pu.current=r===null||r.memoizedState===null?aT:lT,r=a(c,f),$a){g=0;do{if($a=!1,qa=0,25<=g)throw Error(t(301));g+=1,Ct=wt=null,s.updateQueue=null,Pu.current=uT,r=a(c,f)}while($a)}if(Pu.current=Du,s=wt!==null&&wt.next!==null,gs=0,Ct=wt=nt=null,ku=!1,s)throw Error(t(300));return r}function od(){var r=qa!==0;return qa=0,r}function cr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?nt.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Pn(){if(wt===null){var r=nt.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var s=Ct===null?nt.memoizedState:Ct.next;if(s!==null)Ct=s,wt=r;else{if(r===null)throw Error(t(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Ct===null?nt.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Ha(r,s){return typeof s=="function"?s(r):s}function ad(r){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=wt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var C=w=null,N=null,q=g;do{var Y=q.lane;if((gs&Y)===Y)N!==null&&(N=N.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:r(c,q.action);else{var ee={lane:Y,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};N===null?(C=N=ee,w=c):N=N.next=ee,nt.lanes|=Y,ys|=Y}q=q.next}while(q!==null&&q!==g);N===null?w=c:N.next=C,$n(c,s.memoizedState)||(nn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(r=a.interleaved,r!==null){f=r;do g=f.lane,nt.lanes|=g,ys|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function ld(r){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);$n(g,s.memoizedState)||(nn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function Qm(){}function Xm(r,s){var a=nt,c=Pn(),f=s(),g=!$n(c.memoizedState,f);if(g&&(c.memoizedState=f,nn=!0),c=c.queue,ud(Zm.bind(null,a,c,r),[r]),c.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Wa(9,Ym.bind(null,a,c,f,s),void 0,null),Pt===null)throw Error(t(349));(gs&30)!==0||Jm(a,s,f)}return f}function Jm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Ym(r,s,a,c){s.value=a,s.getSnapshot=c,eg(s)&&tg(r)}function Zm(r,s,a){return a(function(){eg(s)&&tg(r)})}function eg(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!$n(r,a)}catch{return!0}}function tg(r){var s=Mr(r,1);s!==null&&Kn(s,r,1,-1)}function ng(r){var s=cr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:r},s.queue=r,r=r.dispatch=oT.bind(null,nt,r),[s.memoizedState,r]}function Wa(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function rg(){return Pn().memoizedState}function Nu(r,s,a,c){var f=cr();nt.flags|=r,f.memoizedState=Wa(1|s,a,void 0,c===void 0?null:c)}function xu(r,s,a,c){var f=Pn();c=c===void 0?null:c;var g=void 0;if(wt!==null){var w=wt.memoizedState;if(g=w.destroy,c!==null&&id(c,w.deps)){f.memoizedState=Wa(s,a,g,c);return}}nt.flags|=r,f.memoizedState=Wa(1|s,a,g,c)}function ig(r,s){return Nu(8390656,8,r,s)}function ud(r,s){return xu(2048,8,r,s)}function sg(r,s){return xu(4,2,r,s)}function og(r,s){return xu(4,4,r,s)}function ag(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function lg(r,s,a){return a=a!=null?a.concat([r]):null,xu(4,4,ag.bind(null,s,r),a)}function cd(){}function ug(r,s){var a=Pn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&id(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function cg(r,s){var a=Pn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&id(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function hg(r,s,a){return(gs&21)===0?(r.baseState&&(r.baseState=!1,nn=!0),r.memoizedState=a):($n(a,s)||(a=ss(),nt.lanes|=a,ys|=a,r.baseState=!0),s)}function iT(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var c=rd.transition;rd.transition={};try{r(!1),s()}finally{Oe=a,rd.transition=c}}function dg(){return Pn().memoizedState}function sT(r,s,a){var c=vi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},fg(r))pg(s,a);else if(a=qm(r,s,a,c),a!==null){var f=Xt();Kn(a,r,c,f),mg(a,s,c)}}function oT(r,s,a){var c=vi(r),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(fg(r))pg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,a);if(f.hasEagerState=!0,f.eagerState=C,$n(C,w)){var N=s.interleaved;N===null?(f.next=f,Jh(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}a=qm(r,s,f,c),a!==null&&(f=Xt(),Kn(a,r,c,f),mg(a,s,c))}}function fg(r){var s=r.alternate;return r===nt||s!==null&&s===nt}function pg(r,s){$a=ku=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function mg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,ri(r,a)}}var Du={readContext:Cn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},aT={readContext:Cn,useCallback:function(r,s){return cr().memoizedState=[r,s===void 0?null:s],r},useContext:Cn,useEffect:ig,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Nu(4194308,4,ag.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Nu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Nu(4,2,r,s)},useMemo:function(r,s){var a=cr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=cr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=sT.bind(null,nt,r),[c.memoizedState,r]},useRef:function(r){var s=cr();return r={current:r},s.memoizedState=r},useState:ng,useDebugValue:cd,useDeferredValue:function(r){return cr().memoizedState=r},useTransition:function(){var r=ng(!1),s=r[0];return r=iT.bind(null,r[1]),cr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=nt,f=cr();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Pt===null)throw Error(t(349));(gs&30)!==0||Jm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ig(Zm.bind(null,c,g,r),[r]),c.flags|=2048,Wa(9,Ym.bind(null,c,g,a,s),void 0,null),a},useId:function(){var r=cr(),s=Pt.identifierPrefix;if(Ye){var a=Lr,c=Vr;a=(c&~(1<<32-Gt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=qa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=rT++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},lT={readContext:Cn,useCallback:ug,useContext:Cn,useEffect:ud,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:ad,useRef:rg,useState:function(){return ad(Ha)},useDebugValue:cd,useDeferredValue:function(r){var s=Pn();return hg(s,wt.memoizedState,r)},useTransition:function(){var r=ad(Ha)[0],s=Pn().memoizedState;return[r,s]},useMutableSource:Qm,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1},uT={readContext:Cn,useCallback:ug,useContext:Cn,useEffect:ud,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:ld,useRef:rg,useState:function(){return ld(Ha)},useDebugValue:cd,useDeferredValue:function(r){var s=Pn();return wt===null?s.memoizedState=r:hg(s,wt.memoizedState,r)},useTransition:function(){var r=ld(Ha)[0],s=Pn().memoizedState;return[r,s]},useMutableSource:Qm,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1};function Hn(r,s){if(r&&r.defaultProps){s=ae({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function hd(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:ae({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var bu={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Xt(),f=vi(r),g=jr(c,f);g.payload=s,a!=null&&(g.callback=a),s=pi(r,g,f),s!==null&&(Kn(s,r,f,c),Au(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Xt(),f=vi(r),g=jr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=pi(r,g,f),s!==null&&(Kn(s,r,f,c),Au(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Xt(),c=vi(r),f=jr(a,c);f.tag=2,s!=null&&(f.callback=s),s=pi(r,f,c),s!==null&&(Kn(s,r,c,a),Au(s,r,c))}};function gg(r,s,a,c,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!Da(a,c)||!Da(f,g):!0}function yg(r,s,a){var c=!1,f=hi,g=s.contextType;return typeof g=="object"&&g!==null?g=Cn(g):(f=tn(s)?hs:jt.current,c=s.contextTypes,g=(c=c!=null)?_o(r,f):hi),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=bu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function vg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&bu.enqueueReplaceState(s,s.state,null)}function dd(r,s,a,c){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Yh(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Cn(g):(g=tn(s)?hs:jt.current,f.context=_o(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(hd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&bu.enqueueReplaceState(f,f.state,null),Ru(r,a,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Co(r,s){try{var a="",c=s;do a+=he(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function fd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function pd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function _g(r,s,a){a=jr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Fu||(Fu=!0,kd=c),pd(r,s)},a}function wg(r,s,a){a=jr(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){pd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){pd(r,s),typeof c!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Eg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new cT;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),r=ST.bind(null,r,s,a),s.then(r,r))}function Tg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ig(r,s,a,c,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=jr(-1,1),s.tag=2,pi(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var hT=oe.ReactCurrentOwner,nn=!1;function Qt(r,s,a,c){s.child=r===null?$m(s,null,a,c):Io(s,r.child,a,c)}function Sg(r,s,a,c,f){a=a.render;var g=s.ref;return Ao(s,f),c=sd(r,s,a,c,g,f),a=od(),r!==null&&!nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(Ye&&a&&Bh(s),s.flags|=1,Qt(r,s,c,f),s.child)}function Ag(r,s,a,c,f){if(r===null){var g=a.type;return typeof g=="function"&&!Ld(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Rg(r,s,g,c,f)):(r=Wu(a.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Da,a(w,c)&&r.ref===s.ref)return Ur(r,s,f)}return s.flags|=1,r=wi(g,c),r.ref=s.ref,r.return=s,s.child=r}function Rg(r,s,a,c,f){if(r!==null){var g=r.memoizedProps;if(Da(g,c)&&r.ref===s.ref)if(nn=!1,s.pendingProps=c=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(nn=!0);else return s.lanes=r.lanes,Ur(r,s,f)}return md(r,s,a,c,f)}function Cg(r,s,a){var c=s.pendingProps,f=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ko,vn),vn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,We(ko,vn),vn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(ko,vn),vn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,We(ko,vn),vn|=c;return Qt(r,s,f,a),s.child}function Pg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function md(r,s,a,c,f){var g=tn(a)?hs:jt.current;return g=_o(s,g),Ao(s,f),a=sd(r,s,a,c,g,f),c=od(),r!==null&&!nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ur(r,s,f)):(Ye&&c&&Bh(s),s.flags|=1,Qt(r,s,a,f),s.child)}function kg(r,s,a,c,f){if(tn(a)){var g=!0;yu(s)}else g=!1;if(Ao(s,f),s.stateNode===null)Vu(r,s),yg(s,a,c),dd(s,a,c,f),c=!0;else if(r===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var N=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=Cn(q):(q=tn(a)?hs:jt.current,q=_o(s,q));var Y=a.getDerivedStateFromProps,ee=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==q)&&vg(s,w,c,q),fi=!1;var J=s.memoizedState;w.state=J,Ru(s,c,w,f),N=s.memoizedState,C!==c||J!==N||en.current||fi?(typeof Y=="function"&&(hd(s,a,Y,c),N=s.memoizedState),(C=fi||gg(s,a,C,c,J,N,q))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=q,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Hm(r,s),C=s.memoizedProps,q=s.type===s.elementType?C:Hn(s.type,C),w.props=q,ee=s.pendingProps,J=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Cn(N):(N=tn(a)?hs:jt.current,N=_o(s,N));var ue=a.getDerivedStateFromProps;(Y=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ee||J!==N)&&vg(s,w,c,N),fi=!1,J=s.memoizedState,w.state=J,Ru(s,c,w,f);var fe=s.memoizedState;C!==ee||J!==fe||en.current||fi?(typeof ue=="function"&&(hd(s,a,ue,c),fe=s.memoizedState),(q=fi||gg(s,a,q,c,J,fe,N)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),w.props=c,w.state=fe,w.context=N,c=q):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),c=!1)}return gd(r,s,a,c,g,f)}function gd(r,s,a,c,f,g){Pg(r,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Om(s,a,!1),Ur(r,s,g);c=s.stateNode,hT.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&w?(s.child=Io(s,r.child,null,g),s.child=Io(s,null,C,g)):Qt(r,s,C,g),s.memoizedState=c.state,f&&Om(s,a,!0),s.child}function Ng(r){var s=r.stateNode;s.pendingContext?Dm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Dm(r,s.context,!1),Zh(r,s.containerInfo)}function xg(r,s,a,c,f){return To(),Wh(f),s.flags|=256,Qt(r,s,a,c),s.child}var yd={dehydrated:null,treeContext:null,retryLane:0};function vd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Dg(r,s,a){var c=s.pendingProps,f=tt.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),We(tt,f&1),r===null)return Hh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,r=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Gu(w,c,0,null),r=Es(r,c,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=vd(a),s.memoizedState=yd,r):_d(s,w));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return dT(r,s,w,c,C,f,a);if(g){g=c.fallback,w=s.mode,f=r.child,C=f.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=wi(f,N),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=wi(C,g):(g=Es(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=r.child.memoizedState,w=w===null?vd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=yd,c}return g=r.child,r=g.sibling,c=wi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function _d(r,s){return s=Gu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Ou(r,s,a,c){return c!==null&&Wh(c),Io(s,r.child,null,a),r=_d(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function dT(r,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=fd(Error(t(422))),Ou(r,s,w,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Gu({mode:"visible",children:c.children},f,0,null),g=Es(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Io(s,r.child,null,w),s.child.memoizedState=vd(w),s.memoizedState=yd,g);if((s.mode&1)===0)return Ou(r,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=fd(g,c,void 0),Ou(r,s,w,c)}if(C=(w&r.childLanes)!==0,nn||C){if(c=Pt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Mr(r,f),Kn(c,r,f,-1))}return Vd(),c=fd(Error(t(421))),Ou(r,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=AT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,yn=ui(f.nextSibling),gn=s,Ye=!0,qn=null,r!==null&&(An[Rn++]=Vr,An[Rn++]=Lr,An[Rn++]=ds,Vr=r.id,Lr=r.overflow,ds=s),s=_d(s,c.children),s.flags|=4096,s)}function bg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Xh(r.return,s,a)}function wd(r,s,a,c,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Og(r,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(Qt(r,s,c.children,a),c=tt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&bg(r,a,s);else if(r.tag===19)bg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(We(tt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Cu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),wd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Cu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}wd(s,!0,a,null,g);break;case"together":wd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Vu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ur(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ys|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=wi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=wi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function fT(r,s,a){switch(s.tag){case 3:Ng(s),To();break;case 5:Km(s);break;case 1:tn(s.type)&&yu(s);break;case 4:Zh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;We(Iu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(We(tt,tt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Dg(r,s,a):(We(tt,tt.current&1),r=Ur(r,s,a),r!==null?r.sibling:null);We(tt,tt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Og(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(tt,tt.current),c)break;return null;case 22:case 23:return s.lanes=0,Cg(r,s,a)}return Ur(r,s,a)}var Vg,Ed,Lg,Mg;Vg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ed=function(){},Lg=function(r,s,a,c){var f=r.memoizedProps;if(f!==c){r=s.stateNode,ms(ur.current);var g=null;switch(a){case"input":f=Ki(r,f),c=Ki(r,c),g=[];break;case"select":f=ae({},f,{value:void 0}),c=ae({},c,{value:void 0}),g=[];break;case"textarea":f=aa(r,f),c=aa(r,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=pu)}fa(a,c);var w;a=null;for(q in f)if(!c.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var C=f[q];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in c){var N=c[q];if(C=f!=null?f[q]:void 0,c.hasOwnProperty(q)&&N!==C&&(N!=null||C!=null))if(q==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push(q,a)),a=N;else q==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(g=g||[]).push(q,N)):q==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(q,""+N):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(N!=null&&q==="onScroll"&&Ke("scroll",r),g||C===N||(g=[])):(g=g||[]).push(q,N))}a&&(g=g||[]).push("style",a);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},Mg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Ga(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function pT(r,s,a){var c=s.pendingProps;switch($h(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return tn(s.type)&&gu(),Ft(s),null;case 3:return c=s.stateNode,Ro(),Qe(en),Qe(jt),nd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Eu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qn!==null&&(Dd(qn),qn=null))),Ed(r,s),Ft(s),null;case 5:ed(s);var f=ms(Ba.current);if(a=s.type,r!==null&&s.stateNode!=null)Lg(r,s,a,c,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(r=ms(ur.current),Eu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[lr]=s,c[Ma]=g,r=(s.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(f=0;f<Oa.length;f++)Ke(Oa[f],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":Fs(c,g),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ke("invalid",c);break;case"textarea":Bs(c,g),Ke("invalid",c)}fa(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&fu(c.textContent,C,r),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&fu(c.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Ke("scroll",c)}switch(a){case"input":Ir(c),Ul(c,g,!0);break;case"textarea":Ir(c),la(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=pu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=yt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=w.createElement(a,{is:c.is}):(r=w.createElement(a),a==="select"&&(w=r,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):r=w.createElementNS(r,a),r[lr]=s,r[Ma]=c,Vg(r,s,!1,!1),s.stateNode=r;e:{switch(w=pa(a,c),a){case"dialog":Ke("cancel",r),Ke("close",r),f=c;break;case"iframe":case"object":case"embed":Ke("load",r),f=c;break;case"video":case"audio":for(f=0;f<Oa.length;f++)Ke(Oa[f],r);f=c;break;case"source":Ke("error",r),f=c;break;case"img":case"image":case"link":Ke("error",r),Ke("load",r),f=c;break;case"details":Ke("toggle",r),f=c;break;case"input":Fs(r,c),f=Ki(r,c),Ke("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=ae({},c,{value:void 0}),Ke("invalid",r);break;case"textarea":Bs(r,c),f=aa(r,c),Ke("invalid",r);break;default:f=c}fa(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var N=C[g];g==="style"?ha(r,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ua(r,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Yr(r,N):typeof N=="number"&&Yr(r,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&Ke("scroll",r):N!=null&&te(r,g,N,w))}switch(a){case"input":Ir(r),Ul(r,c,!1);break;case"textarea":Ir(r),la(r);break;case"option":c.value!=null&&r.setAttribute("value",""+Ve(c.value));break;case"select":r.multiple=!!c.multiple,g=c.value,g!=null?Ar(r,!!c.multiple,g,!1):c.defaultValue!=null&&Ar(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=pu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(r&&s.stateNode!=null)Mg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ms(Ba.current),ms(ur.current),Eu(s)){if(c=s.stateNode,a=s.memoizedProps,c[lr]=s,(g=c.nodeValue!==a)&&(r=gn,r!==null))switch(r.tag){case 3:fu(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&fu(c.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[lr]=s,s.stateNode=c}return Ft(s),null;case 13:if(Qe(tt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ye&&yn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Fm(),To(),s.flags|=98560,g=!1;else if(g=Eu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[lr]=s}else To(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),g=!1}else qn!==null&&(Dd(qn),qn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(tt.current&1)!==0?Et===0&&(Et=3):Vd())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return Ro(),Ed(r,s),r===null&&Va(s.stateNode.containerInfo),Ft(s),null;case 10:return Qh(s.type._context),Ft(s),null;case 17:return tn(s.type)&&gu(),Ft(s),null;case 19:if(Qe(tt),g=s.memoizedState,g===null)return Ft(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Ga(g,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Cu(r),w!==null){for(s.flags|=128,Ga(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,r=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return We(tt,tt.current&1|2),s.child}r=r.sibling}g.tail!==null&&He()>No&&(s.flags|=128,c=!0,Ga(g,!1),s.lanes=4194304)}else{if(!c)if(r=Cu(w),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ga(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Ye)return Ft(s),null}else 2*He()-g.renderingStartTime>No&&a!==1073741824&&(s.flags|=128,c=!0,Ga(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=He(),s.sibling=null,a=tt.current,We(tt,c?a&1|2:a&1),s):(Ft(s),null);case 22:case 23:return Od(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(vn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function mT(r,s){switch($h(s),s.tag){case 1:return tn(s.type)&&gu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ro(),Qe(en),Qe(jt),nd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return ed(s),null;case 13:if(Qe(tt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));To()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Qe(tt),null;case 4:return Ro(),null;case 10:return Qh(s.type._context),null;case 22:case 23:return Od(),null;case 24:return null;default:return null}}var Lu=!1,zt=!1,gT=typeof WeakSet=="function"?WeakSet:Set,de=null;function Po(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(r,s,c)}else a.current=null}function Td(r,s,a){try{a()}catch(c){it(r,s,c)}}var jg=!1;function yT(r,s){if(Oh=oi,r=gm(),Rh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,q=0,Y=0,ee=r,J=null;t:for(;;){for(var ue;ee!==a||f!==0&&ee.nodeType!==3||(C=w+f),ee!==g||c!==0&&ee.nodeType!==3||(N=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(ue=ee.firstChild)!==null;)J=ee,ee=ue;for(;;){if(ee===r)break t;if(J===a&&++q===f&&(C=w),J===g&&++Y===c&&(N=w),(ue=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=ue}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vh={focusedElem:r,selectionRange:a},oi=!1,de=s;de!==null;)if(s=de,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,de=r;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,lt=fe.memoizedState,F=s.stateNode,O=F.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Hn(s.type,pe),lt);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){it(s,s.return,ne)}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}return fe=jg,jg=!1,fe}function Ka(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Td(s,a,g)}f=f.next}while(f!==c)}}function Mu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Id(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Ug(r){var s=r.alternate;s!==null&&(r.alternate=null,Ug(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[lr],delete s[Ma],delete s[Uh],delete s[Z0],delete s[eT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Fg(r){return r.tag===5||r.tag===3||r.tag===4}function zg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Fg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=pu));else if(c!==4&&(r=r.child,r!==null))for(Sd(r,s,a),r=r.sibling;r!==null;)Sd(r,s,a),r=r.sibling}function Ad(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Ad(r,s,a),r=r.sibling;r!==null;)Ad(r,s,a),r=r.sibling}var bt=null,Wn=!1;function mi(r,s,a){for(a=a.child;a!==null;)Bg(r,s,a),a=a.sibling}function Bg(r,s,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(rs,a)}catch{}switch(a.tag){case 5:zt||Po(a,s);case 6:var c=bt,f=Wn;bt=null,mi(r,s,a),bt=c,Wn=f,bt!==null&&(Wn?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Wn?(r=bt,a=a.stateNode,r.nodeType===8?jh(r.parentNode,a):r.nodeType===1&&jh(r,a),zn(r)):jh(bt,a.stateNode));break;case 4:c=bt,f=Wn,bt=a.stateNode.containerInfo,Wn=!0,mi(r,s,a),bt=c,Wn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Td(a,s,w),f=f.next}while(f!==c)}mi(r,s,a);break;case 1:if(!zt&&(Po(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){it(a,s,C)}mi(r,s,a);break;case 21:mi(r,s,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,mi(r,s,a),zt=c):mi(r,s,a);break;default:mi(r,s,a)}}function $g(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new gT),s.forEach(function(c){var f=RT.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Gn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=r,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:bt=C.stateNode,Wn=!1;break e;case 3:bt=C.stateNode.containerInfo,Wn=!0;break e;case 4:bt=C.stateNode.containerInfo,Wn=!0;break e}C=C.return}if(bt===null)throw Error(t(160));Bg(g,w,f),bt=null,Wn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(q){it(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)qg(s,r),s=s.sibling}function qg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Gn(s,r),hr(r),c&4){try{Ka(3,r,r.return),Mu(3,r)}catch(pe){it(r,r.return,pe)}try{Ka(5,r,r.return)}catch(pe){it(r,r.return,pe)}}break;case 1:Gn(s,r),hr(r),c&512&&a!==null&&Po(a,a.return);break;case 5:if(Gn(s,r),hr(r),c&512&&a!==null&&Po(a,a.return),r.flags&32){var f=r.stateNode;try{Yr(f,"")}catch(pe){it(r,r.return,pe)}}if(c&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,C=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&sa(f,g),pa(C,w);var q=pa(C,g);for(w=0;w<N.length;w+=2){var Y=N[w],ee=N[w+1];Y==="style"?ha(f,ee):Y==="dangerouslySetInnerHTML"?ua(f,ee):Y==="children"?Yr(f,ee):te(f,Y,ee,q)}switch(C){case"input":oa(f,g);break;case"textarea":$s(f,g);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?Ar(f,!!g.multiple,ue,!1):J!==!!g.multiple&&(g.defaultValue!=null?Ar(f,!!g.multiple,g.defaultValue,!0):Ar(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ma]=g}catch(pe){it(r,r.return,pe)}}break;case 6:if(Gn(s,r),hr(r),c&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(pe){it(r,r.return,pe)}}break;case 3:if(Gn(s,r),hr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{zn(s.containerInfo)}catch(pe){it(r,r.return,pe)}break;case 4:Gn(s,r),hr(r);break;case 13:Gn(s,r),hr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Pd=He())),c&4&&$g(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(zt=(q=zt)||Y,Gn(s,r),zt=q):Gn(s,r),hr(r),c&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!Y&&(r.mode&1)!==0)for(de=r,Y=r.child;Y!==null;){for(ee=de=Y;de!==null;){switch(J=de,ue=J.child,J.tag){case 0:case 11:case 14:case 15:Ka(4,J,J.return);break;case 1:Po(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){it(c,a,pe)}}break;case 5:Po(J,J.return);break;case 22:if(J.memoizedState!==null){Gg(ee);continue}}ue!==null?(ue.return=J,de=ue):Gg(ee)}Y=Y.sibling}e:for(Y=null,ee=r;;){if(ee.tag===5){if(Y===null){Y=ee;try{f=ee.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=ee.stateNode,N=ee.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=ca("display",w))}catch(pe){it(r,r.return,pe)}}}else if(ee.tag===6){if(Y===null)try{ee.stateNode.nodeValue=q?"":ee.memoizedProps}catch(pe){it(r,r.return,pe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;Y===ee&&(Y=null),ee=ee.return}Y===ee&&(Y=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Gn(s,r),hr(r),c&4&&$g(r);break;case 21:break;default:Gn(s,r),hr(r)}}function hr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Fg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Yr(f,""),c.flags&=-33);var g=zg(r);Ad(r,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,C=zg(r);Sd(r,C,w);break;default:throw Error(t(161))}}catch(N){it(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function vT(r,s,a){de=r,Hg(r)}function Hg(r,s,a){for(var c=(r.mode&1)!==0;de!==null;){var f=de,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Lu;if(!w){var C=f.alternate,N=C!==null&&C.memoizedState!==null||zt;C=Lu;var q=zt;if(Lu=w,(zt=N)&&!q)for(de=f;de!==null;)w=de,N=w.child,w.tag===22&&w.memoizedState!==null?Kg(f):N!==null?(N.return=w,de=N):Kg(f);for(;g!==null;)de=g,Hg(g),g=g.sibling;de=f,Lu=C,zt=q}Wg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,de=g):Wg(r)}}function Wg(r){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||Mu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Hn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Gm(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Gm(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Y=q.memoizedState;if(Y!==null){var ee=Y.dehydrated;ee!==null&&zn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&Id(s)}catch(J){it(s,s.return,J)}}if(s===r){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function Gg(r){for(;de!==null;){var s=de;if(s===r){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function Kg(r){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Mu(4,s)}catch(N){it(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(N){it(s,f,N)}}var g=s.return;try{Id(s)}catch(N){it(s,g,N)}break;case 5:var w=s.return;try{Id(s)}catch(N){it(s,w,N)}}}catch(N){it(s,s.return,N)}if(s===r){de=null;break}var C=s.sibling;if(C!==null){C.return=s.return,de=C;break}de=s.return}}var _T=Math.ceil,ju=oe.ReactCurrentDispatcher,Rd=oe.ReactCurrentOwner,kn=oe.ReactCurrentBatchConfig,je=0,Pt=null,ft=null,Ot=0,vn=0,ko=ci(0),Et=0,Qa=null,ys=0,Uu=0,Cd=0,Xa=null,rn=null,Pd=0,No=1/0,Fr=null,Fu=!1,kd=null,gi=null,zu=!1,yi=null,Bu=0,Ja=0,Nd=null,$u=-1,qu=0;function Xt(){return(je&6)!==0?He():$u!==-1?$u:$u=He()}function vi(r){return(r.mode&1)===0?1:(je&2)!==0&&Ot!==0?Ot&-Ot:nT.transition!==null?(qu===0&&(qu=ss()),qu):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:Aa(r.type)),r)}function Kn(r,s,a,c){if(50<Ja)throw Ja=0,Nd=null,Error(t(185));ni(r,a,c),((je&2)===0||r!==Pt)&&(r===Pt&&((je&2)===0&&(Uu|=a),Et===4&&_i(r,Ot)),sn(r,c),a===1&&je===0&&(s.mode&1)===0&&(No=He()+500,vu&&di()))}function sn(r,s){var a=r.callbackNode;Pr(r,s);var c=is(r,r===Pt?Ot:0);if(c===0)a!==null&&wa(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&wa(a),s===1)r.tag===0?tT(Xg.bind(null,r)):Vm(Xg.bind(null,r)),J0(function(){(je&6)===0&&di()}),a=null;else{switch(ii(c)){case 1:a=ns;break;case 4:a=Zr;break;case 16:a=Tn;break;case 536870912:a=ql;break;default:a=Tn}a=iy(a,Qg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Qg(r,s){if($u=-1,qu=0,(je&6)!==0)throw Error(t(327));var a=r.callbackNode;if(xo()&&r.callbackNode!==a)return null;var c=is(r,r===Pt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Hu(r,c);else{s=c;var f=je;je|=2;var g=Yg();(Pt!==r||Ot!==s)&&(Fr=null,No=He()+500,_s(r,s));do try{TT();break}catch(C){Jg(r,C)}while(!0);Kh(),ju.current=g,je=f,ft!==null?s=0:(Pt=null,Ot=0,s=Et)}if(s!==0){if(s===2&&(f=fn(r),f!==0&&(c=f,s=xd(r,f))),s===1)throw a=Qa,_s(r,0),_i(r,c),sn(r,He()),a;if(s===6)_i(r,c);else{if(f=r.current.alternate,(c&30)===0&&!wT(f)&&(s=Hu(r,c),s===2&&(g=fn(r),g!==0&&(c=g,s=xd(r,g))),s===1))throw a=Qa,_s(r,0),_i(r,c),sn(r,He()),a;switch(r.finishedWork=f,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ws(r,rn,Fr);break;case 3:if(_i(r,c),(c&130023424)===c&&(s=Pd+500-He(),10<s)){if(is(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){Xt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Mh(ws.bind(null,r,rn,Fr),s);break}ws(r,rn,Fr);break;case 4:if(_i(r,c),(c&4194240)===c)break;for(s=r.eventTimes,f=-1;0<c;){var w=31-Gt(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*_T(c/1960))-c,10<c){r.timeoutHandle=Mh(ws.bind(null,r,rn,Fr),c);break}ws(r,rn,Fr);break;case 5:ws(r,rn,Fr);break;default:throw Error(t(329))}}}return sn(r,He()),r.callbackNode===a?Qg.bind(null,r):null}function xd(r,s){var a=Xa;return r.current.memoizedState.isDehydrated&&(_s(r,s).flags|=256),r=Hu(r,s),r!==2&&(s=rn,rn=a,s!==null&&Dd(s)),r}function Dd(r){rn===null?rn=r:rn.push.apply(rn,r)}function wT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!$n(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _i(r,s){for(s&=~Cd,s&=~Uu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Gt(s),c=1<<a;r[a]=-1,s&=~c}}function Xg(r){if((je&6)!==0)throw Error(t(327));xo();var s=is(r,0);if((s&1)===0)return sn(r,He()),null;var a=Hu(r,s);if(r.tag!==0&&a===2){var c=fn(r);c!==0&&(s=c,a=xd(r,c))}if(a===1)throw a=Qa,_s(r,0),_i(r,s),sn(r,He()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ws(r,rn,Fr),sn(r,He()),null}function bd(r,s){var a=je;je|=1;try{return r(s)}finally{je=a,je===0&&(No=He()+500,vu&&di())}}function vs(r){yi!==null&&yi.tag===0&&(je&6)===0&&xo();var s=je;je|=1;var a=kn.transition,c=Oe;try{if(kn.transition=null,Oe=1,r)return r()}finally{Oe=c,kn.transition=a,je=s,(je&6)===0&&di()}}function Od(){vn=ko.current,Qe(ko)}function _s(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,X0(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch($h(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&gu();break;case 3:Ro(),Qe(en),Qe(jt),nd();break;case 5:ed(c);break;case 4:Ro();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:Qh(c.type._context);break;case 22:case 23:Od()}a=a.return}if(Pt=r,ft=r=wi(r.current,null),Ot=vn=s,Et=0,Qa=null,Cd=Uu=ys=0,rn=Xa=null,ps!==null){for(s=0;s<ps.length;s++)if(a=ps[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}ps=null}return r}function Jg(r,s){do{var a=ft;try{if(Kh(),Pu.current=Du,ku){for(var c=nt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}ku=!1}if(gs=0,Ct=wt=nt=null,$a=!1,qa=0,Rd.current=null,a===null||a.return===null){Et=1,Qa=s,ft=null;break}e:{var g=r,w=a.return,C=a,N=s;if(s=Ot,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=N,Y=C,ee=Y.tag;if((Y.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ue=Tg(w);if(ue!==null){ue.flags&=-257,Ig(ue,w,C,g,s),ue.mode&1&&Eg(g,q,s),s=ue,N=q;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(N),s.updateQueue=pe}else fe.add(N);break e}else{if((s&1)===0){Eg(g,q,s),Vd();break e}N=Error(t(426))}}else if(Ye&&C.mode&1){var lt=Tg(w);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Ig(lt,w,C,g,s),Wh(Co(N,C));break e}}g=N=Co(N,C),Et!==4&&(Et=2),Xa===null?Xa=[g]:Xa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=_g(g,N,s);Wm(g,F);break e;case 1:C=N;var O=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(gi===null||!gi.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var ne=wg(g,C,s);Wm(g,ne);break e}}g=g.return}while(g!==null)}ey(a)}catch(me){s=me,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Yg(){var r=ju.current;return ju.current=Du,r===null?Du:r}function Vd(){(Et===0||Et===3||Et===2)&&(Et=4),Pt===null||(ys&268435455)===0&&(Uu&268435455)===0||_i(Pt,Ot)}function Hu(r,s){var a=je;je|=2;var c=Yg();(Pt!==r||Ot!==s)&&(Fr=null,_s(r,s));do try{ET();break}catch(f){Jg(r,f)}while(!0);if(Kh(),je=a,ju.current=c,ft!==null)throw Error(t(261));return Pt=null,Ot=0,Et}function ET(){for(;ft!==null;)Zg(ft)}function TT(){for(;ft!==null&&!Bl();)Zg(ft)}function Zg(r){var s=ry(r.alternate,r,vn);r.memoizedProps=r.pendingProps,s===null?ey(r):ft=s,Rd.current=null}function ey(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=pT(a,s,vn),a!==null){ft=a;return}}else{if(a=mT(a,s),a!==null){a.flags&=32767,ft=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=r}while(s!==null);Et===0&&(Et=5)}function ws(r,s,a){var c=Oe,f=kn.transition;try{kn.transition=null,Oe=1,IT(r,s,a,c)}finally{kn.transition=f,Oe=c}return null}function IT(r,s,a,c){do xo();while(yi!==null);if((je&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Be(r,g),r===Pt&&(ft=Pt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zu||(zu=!0,iy(Tn,function(){return xo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=kn.transition,kn.transition=null;var w=Oe;Oe=1;var C=je;je|=4,Rd.current=null,yT(r,a),qg(a,r),$0(Vh),oi=!!Oh,Vh=Oh=null,r.current=a,vT(a),vh(),je=C,Oe=w,kn.transition=g}else r.current=a;if(zu&&(zu=!1,yi=r,Bu=f),g=r.pendingLanes,g===0&&(gi=null),Hl(a.stateNode),sn(r,He()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Fu)throw Fu=!1,r=kd,kd=null,r;return(Bu&1)!==0&&r.tag!==0&&xo(),g=r.pendingLanes,(g&1)!==0?r===Nd?Ja++:(Ja=0,Nd=r):Ja=0,di(),null}function xo(){if(yi!==null){var r=ii(Bu),s=kn.transition,a=Oe;try{if(kn.transition=null,Oe=16>r?16:r,yi===null)var c=!1;else{if(r=yi,yi=null,Bu=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,de=r.current;de!==null;){var g=de,w=g.child;if((de.flags&16)!==0){var C=g.deletions;if(C!==null){for(var N=0;N<C.length;N++){var q=C[N];for(de=q;de!==null;){var Y=de;switch(Y.tag){case 0:case 11:case 15:Ka(8,Y,g)}var ee=Y.child;if(ee!==null)ee.return=Y,de=ee;else for(;de!==null;){Y=de;var J=Y.sibling,ue=Y.return;if(Ug(Y),Y===q){de=null;break}if(J!==null){J.return=ue,de=J;break}de=ue}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var lt=pe.sibling;pe.sibling=null,pe=lt}while(pe!==null)}}de=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,de=w;else e:for(;de!==null;){if(g=de,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ka(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,de=F;break e}de=g.return}}var O=r.current;for(de=O;de!==null;){w=de;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,de=B;else e:for(w=O;de!==null;){if(C=de,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Mu(9,C)}}catch(me){it(C,C.return,me)}if(C===w){de=null;break e}var ne=C.sibling;if(ne!==null){ne.return=C.return,de=ne;break e}de=C.return}}if(je=f,di(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(rs,r)}catch{}c=!0}return c}finally{Oe=a,kn.transition=s}}return!1}function ty(r,s,a){s=Co(a,s),s=_g(r,s,1),r=pi(r,s,1),s=Xt(),r!==null&&(ni(r,1,s),sn(r,s))}function it(r,s,a){if(r.tag===3)ty(r,r,a);else for(;s!==null;){if(s.tag===3){ty(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gi===null||!gi.has(c))){r=Co(a,r),r=wg(s,r,1),s=pi(s,r,1),r=Xt(),s!==null&&(ni(s,1,r),sn(s,r));break}}s=s.return}}function ST(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=Xt(),r.pingedLanes|=r.suspendedLanes&a,Pt===r&&(Ot&a)===a&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>He()-Pd?_s(r,0):Cd|=a),sn(r,s)}function ny(r,s){s===0&&((r.mode&1)===0?s=1:(s=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var a=Xt();r=Mr(r,s),r!==null&&(ni(r,s,a),sn(r,a))}function AT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),ny(r,a)}function RT(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ny(r,a)}var ry;ry=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||en.current)nn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return nn=!1,fT(r,s,a);nn=(r.flags&131072)!==0}else nn=!1,Ye&&(s.flags&1048576)!==0&&Lm(s,wu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Vu(r,s),r=s.pendingProps;var f=_o(s,jt.current);Ao(s,a),f=sd(null,s,c,r,f,a);var g=od();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,tn(c)?(g=!0,yu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Yh(s),f.updater=bu,s.stateNode=f,f._reactInternals=s,dd(s,c,r,a),s=gd(null,s,c,!0,g,a)):(s.tag=0,Ye&&g&&Bh(s),Qt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Vu(r,s),r=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=PT(c),r=Hn(c,r),f){case 0:s=md(null,s,c,r,a);break e;case 1:s=kg(null,s,c,r,a);break e;case 11:s=Sg(null,s,c,r,a);break e;case 14:s=Ag(null,s,c,Hn(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),md(r,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),kg(r,s,c,f,a);case 3:e:{if(Ng(s),r===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,Hm(r,s),Ru(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Co(Error(t(423)),s),s=xg(r,s,c,a,f);break e}else if(c!==f){f=Co(Error(t(424)),s),s=xg(r,s,c,a,f);break e}else for(yn=ui(s.stateNode.containerInfo.firstChild),gn=s,Ye=!0,qn=null,a=$m(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(To(),c===f){s=Ur(r,s,a);break e}Qt(r,s,c,a)}s=s.child}return s;case 5:return Km(s),r===null&&Hh(s),c=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Lh(c,f)?w=null:g!==null&&Lh(c,g)&&(s.flags|=32),Pg(r,s),Qt(r,s,w,a),s.child;case 6:return r===null&&Hh(s),null;case 13:return Dg(r,s,a);case 4:return Zh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Io(s,null,c,a):Qt(r,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),Sg(r,s,c,f,a);case 7:return Qt(r,s,s.pendingProps,a),s.child;case 8:return Qt(r,s,s.pendingProps.children,a),s.child;case 12:return Qt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,We(Iu,c._currentValue),c._currentValue=w,g!==null)if($n(g.value,w)){if(g.children===f.children&&!en.current){s=Ur(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(g.tag===1){N=jr(-1,a&-a),N.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var Y=q.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),q.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),Xh(g.return,a,s),C.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Xh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Qt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Ao(s,a),f=Cn(f),c=c(f),s.flags|=1,Qt(r,s,c,a),s.child;case 14:return c=s.type,f=Hn(c,s.pendingProps),f=Hn(c.type,f),Ag(r,s,c,f,a);case 15:return Rg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Hn(c,f),Vu(r,s),s.tag=1,tn(c)?(r=!0,yu(s)):r=!1,Ao(s,a),yg(s,c,f),dd(s,c,f,a),gd(null,s,c,!0,r,a);case 19:return Og(r,s,a);case 22:return Cg(r,s,a)}throw Error(t(156,s.tag))};function iy(r,s){return Js(r,s)}function CT(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,a,c){return new CT(r,s,a,c)}function Ld(r){return r=r.prototype,!(!r||!r.isReactComponent)}function PT(r){if(typeof r=="function")return Ld(r)?1:0;if(r!=null){if(r=r.$$typeof,r===j)return 11;if(r===It)return 14}return 2}function wi(r,s){var a=r.alternate;return a===null?(a=Nn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Wu(r,s,a,c,f,g){var w=2;if(c=r,typeof r=="function")Ld(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case D:return Es(a.children,f,g,s);case A:w=8,f|=8;break;case R:return r=Nn(12,a,s,f|2),r.elementType=R,r.lanes=g,r;case P:return r=Nn(13,a,s,f),r.elementType=P,r.lanes=g,r;case et:return r=Nn(19,a,s,f),r.elementType=et,r.lanes=g,r;case Ne:return Gu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:w=10;break e;case V:w=9;break e;case j:w=11;break e;case It:w=14;break e;case St:w=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Nn(w,a,s,f),s.elementType=r,s.type=c,s.lanes=g,s}function Es(r,s,a,c){return r=Nn(7,r,c,s),r.lanes=a,r}function Gu(r,s,a,c){return r=Nn(22,r,c,s),r.elementType=Ne,r.lanes=a,r.stateNode={isHidden:!1},r}function Md(r,s,a){return r=Nn(6,r,null,s),r.lanes=a,r}function jd(r,s,a){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function kT(r,s,a,c,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ti(0),this.expirationTimes=ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ud(r,s,a,c,f,g,w,C,N){return r=new kT(r,s,a,C,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yh(g),r}function NT(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ae,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function sy(r){if(!r)return hi;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(tn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(tn(a))return bm(r,a,s)}return s}function oy(r,s,a,c,f,g,w,C,N){return r=Ud(a,c,!0,r,f,g,w,C,N),r.context=sy(null),a=r.current,c=Xt(),f=vi(a),g=jr(c,f),g.callback=s??null,pi(a,g,f),r.current.lanes=f,ni(r,f,c),sn(r,c),r}function Ku(r,s,a,c){var f=s.current,g=Xt(),w=vi(f);return a=sy(a),s.context===null?s.context=a:s.pendingContext=a,s=jr(g,w),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=pi(f,s,w),r!==null&&(Kn(r,f,w,g),Au(r,f,w)),w}function Qu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ay(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Fd(r,s){ay(r,s),(r=r.alternate)&&ay(r,s)}function xT(){return null}var ly=typeof reportError=="function"?reportError:function(r){console.error(r)};function zd(r){this._internalRoot=r}Xu.prototype.render=zd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Ku(r,s,null,null)},Xu.prototype.unmount=zd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;vs(function(){Ku(null,r,null,null)}),s[br]=null}};function Xu(r){this._internalRoot=r}Xu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<ir.length&&s!==0&&s<ir[a].priority;a++);ir.splice(a,0,r),a===0&&Zl(r)}};function Bd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function uy(){}function DT(r,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var q=Qu(w);g.call(q)}}var w=oy(s,c,r,0,null,!1,!1,"",uy);return r._reactRootContainer=w,r[br]=w.current,Va(r.nodeType===8?r.parentNode:r),vs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var q=Qu(N);C.call(q)}}var N=Ud(r,0,!1,null,null,!1,!1,"",uy);return r._reactRootContainer=N,r[br]=N.current,Va(r.nodeType===8?r.parentNode:r),vs(function(){Ku(s,N,a,c)}),N}function Yu(r,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var N=Qu(w);C.call(N)}}Ku(s,w,r,f)}else w=DT(a,s,r,f,c);return Qu(w)}Kl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ei(s.pendingLanes);a!==0&&(ri(s,a|1),sn(s,He()),(je&6)===0&&(No=He()+500,di()))}break;case 13:vs(function(){var c=Mr(r,1);if(c!==null){var f=Xt();Kn(c,r,1,f)}}),Fd(r,1)}},eo=function(r){if(r.tag===13){var s=Mr(r,134217728);if(s!==null){var a=Xt();Kn(s,r,134217728,a)}Fd(r,134217728)}},Ql=function(r){if(r.tag===13){var s=vi(r),a=Mr(r,s);if(a!==null){var c=Xt();Kn(a,r,s,c)}Fd(r,s)}},Xl=function(){return Oe},Jl=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},Hs=function(r,s,a){switch(s){case"input":if(oa(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var f=mu(c);if(!f)throw Error(t(90));Us(c),oa(c,f)}}}break;case"textarea":$s(r,a);break;case"select":s=a.value,s!=null&&Ar(r,!!a.multiple,s,!1)}},Yi=bd,ga=vs;var bT={usingClientEntryPoint:!1,Events:[ja,yo,mu,nr,ma,bd]},Ya={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OT={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=_a(r),r===null?null:r.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||xT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{rs=Zu.inject(OT),dn=Zu}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT,on.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(s))throw Error(t(200));return NT(r,s,null,a)},on.createRoot=function(r,s){if(!Bd(r))throw Error(t(299));var a=!1,c="",f=ly;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ud(r,1,!1,null,null,a,!1,c,f),r[br]=s.current,Va(r.nodeType===8?r.parentNode:r),new zd(s)},on.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=_a(s),r=r===null?null:r.stateNode,r},on.flushSync=function(r){return vs(r)},on.hydrate=function(r,s,a){if(!Ju(s))throw Error(t(200));return Yu(null,r,s,!0,a)},on.hydrateRoot=function(r,s,a){if(!Bd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=ly;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=oy(s,null,r,1,a??null,f,!1,g,w),r[br]=s.current,Va(r),c)for(r=0;r<c.length;r++)a=c[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Xu(s)},on.render=function(r,s,a){if(!Ju(s))throw Error(t(200));return Yu(null,r,s,!1,a)},on.unmountComponentAtNode=function(r){if(!Ju(r))throw Error(t(40));return r._reactRootContainer?(vs(function(){Yu(null,null,r,!1,function(){r._reactRootContainer=null,r[br]=null})}),!0):!1},on.unstable_batchedUpdates=bd,on.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Ju(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Yu(r,s,a,!1,c)},on.version="18.3.1-next-f1338f8080-20240426",on}var yy;function E_(){if(yy)return Hd.exports;yy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hd.exports=$T(),Hd.exports}var vy;function qT(){if(vy)return ec;vy=1;var n=E_();return ec.createRoot=n.createRoot,ec.hydrateRoot=n.hydrateRoot,ec}var HT=qT();const WT=__(HT);E_();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dl.apply(this,arguments)}var Ci;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ci||(Ci={}));const _y="popstate";function GT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:h,hash:d}=i.location;return df("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:wc(o)}return QT(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KT(){return Math.random().toString(36).substr(2,8)}function wy(n,e){return{usr:n.state,key:n.key,idx:e}}function df(n,e,t,i){return t===void 0&&(t=null),dl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:t,key:e&&e.key||i||KT()})}function wc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ko(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function QT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d=Ci.Pop,p=null,v=y();v==null&&(v=0,h.replaceState(dl({},h.state,{idx:v}),""));function y(){return(h.state||{idx:null}).idx}function I(){d=Ci.Pop;let x=y(),$=x==null?null:x-v;v=x,p&&p({action:d,location:H.location,delta:$})}function S(x,$){d=Ci.Push;let Z=df(H.location,x,$);v=y()+1;let te=wy(Z,v),oe=H.createHref(Z);try{h.pushState(te,"",oe)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(oe)}l&&p&&p({action:d,location:H.location,delta:1})}function k(x,$){d=Ci.Replace;let Z=df(H.location,x,$);v=y();let te=wy(Z,v),oe=H.createHref(Z);h.replaceState(te,"",oe),l&&p&&p({action:d,location:H.location,delta:0})}function z(x){let $=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof x=="string"?x:wc(x);return Z=Z.replace(/ $/,"%20"),ht($,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,$)}let H={get action(){return d},get location(){return n(o,h)},listen(x){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(_y,I),p=x,()=>{o.removeEventListener(_y,I),p=null}},createHref(x){return e(o,x)},createURL:z,encodeLocation(x){let $=z(x);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:S,replace:k,go(x){return h.go(x)}};return H}var Ey;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ey||(Ey={}));function XT(n,e,t){return t===void 0&&(t="/"),JT(n,e,t)}function JT(n,e,t,i){let o=typeof e=="string"?Ko(e):e,l=Qf(o.pathname||"/",t);if(l==null)return null;let h=T_(n);YT(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let v=cI(l);d=aI(h[p],v)}return d}function T_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let v=ki([i,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(ht(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),T_(l.children,e,y,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:sI(v,l.index),routesMeta:y})};return n.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of I_(l.path))o(l,h,p)}),e}function I_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=I_(i.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function YT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const ZT=/^:[\w-]+$/,eI=3,tI=2,nI=1,rI=10,iI=-2,Ty=n=>n==="*";function sI(n,e){let t=n.split("/"),i=t.length;return t.some(Ty)&&(i+=iI),e&&(i+=tI),t.filter(o=>!Ty(o)).reduce((o,l)=>o+(ZT.test(l)?eI:l===""?nI:rI),i)}function oI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function aI(n,e,t){let{routesMeta:i}=n,o={},l="/",h=[];for(let d=0;d<i.length;++d){let p=i[d],v=d===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",I=lI({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},y),S=p.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:ki([l,I.pathname]),pathnameBase:mI(ki([l,I.pathnameBase])),route:S}),I.pathnameBase!=="/"&&(l=ki([l,I.pathnameBase]))}return h}function lI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=uI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((v,y,I)=>{let{paramName:S,isOptional:k}=y;if(S==="*"){let H=d[I]||"";h=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const z=d[I];return k&&!z?v[S]=void 0:v[S]=(z||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:n}}function uI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Kf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function cI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Qf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const hI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dI=n=>hI.test(n);function fI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ko(n):n,l;if(t)if(dI(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Iy(t.substring(1),"/"):l=Iy(t,e)}else l=e;return{pathname:l,search:gI(i),hash:yI(o)}}function Iy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Kd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xf(n,e){let t=pI(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Jf(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ko(n):(o=dl({},n),ht(!o.pathname||!o.pathname.includes("?"),Kd("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Kd("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Kd("#","search","hash",o)));let l=n===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),I-=1;o.pathname=S.join("/")}d=I>=0?e[I]:"/"}let p=fI(o,d),v=h&&h!=="/"&&h.endsWith("/"),y=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||y)&&(p.pathname+="/"),p}const ki=n=>n.join("/").replace(/\/\/+/g,"/"),mI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const S_=["post","put","patch","delete"];new Set(S_);const _I=["get",...S_];new Set(_I);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},fl.apply(this,arguments)}const Yf=Q.createContext(null),wI=Q.createContext(null),$i=Q.createContext(null),$c=Q.createContext(null),qi=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=Q.createContext(null);function EI(n,e){let{relative:t}=e===void 0?{}:e;Qo()||ht(!1);let{basename:i,navigator:o}=Q.useContext($i),{hash:l,pathname:h,search:d}=C_(n,{relative:t}),p=h;return i!=="/"&&(p=h==="/"?i:ki([i,h])),o.createHref({pathname:p,search:d,hash:l})}function Qo(){return Q.useContext($c)!=null}function Sl(){return Qo()||ht(!1),Q.useContext($c).location}function R_(n){Q.useContext($i).static||Q.useLayoutEffect(n)}function Al(){let{isDataRoute:n}=Q.useContext(qi);return n?OI():TI()}function TI(){Qo()||ht(!1);let n=Q.useContext(Yf),{basename:e,future:t,navigator:i}=Q.useContext($i),{matches:o}=Q.useContext(qi),{pathname:l}=Sl(),h=JSON.stringify(Xf(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return R_(()=>{d.current=!0}),Q.useCallback(function(v,y){if(y===void 0&&(y={}),!d.current)return;if(typeof v=="number"){i.go(v);return}let I=Jf(v,JSON.parse(h),l,y.relative==="path");n==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ki([e,I.pathname])),(y.replace?i.replace:i.push)(I,y.state,y)},[e,i,h,l,n])}function C_(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext($i),{matches:o}=Q.useContext(qi),{pathname:l}=Sl(),h=JSON.stringify(Xf(o,i.v7_relativeSplatPath));return Q.useMemo(()=>Jf(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function II(n,e){return SI(n,e)}function SI(n,e,t,i){Qo()||ht(!1);let{navigator:o}=Q.useContext($i),{matches:l}=Q.useContext(qi),h=l[l.length-1],d=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let v=Sl(),y;if(e){var I;let x=typeof e=="string"?Ko(e):e;p==="/"||(I=x.pathname)!=null&&I.startsWith(p)||ht(!1),y=x}else y=v;let S=y.pathname||"/",k=S;if(p!=="/"){let x=p.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(x.length).join("/")}let z=XT(n,{pathname:k}),H=kI(z&&z.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:ki([p,o.encodeLocation?o.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?p:ki([p,o.encodeLocation?o.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,t,i);return e&&H?Q.createElement($c.Provider,{value:{location:fl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Ci.Pop}},H):H}function AI(){let n=bI(),e=vI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const RI=Q.createElement(AI,null);class CI extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(qi.Provider,{value:this.props.routeContext},Q.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PI(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(Yf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(qi.Provider,{value:e},i)}function kI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let y=h.findIndex(I=>I.route.id&&(d==null?void 0:d[I.route.id])!==void 0);y>=0||ht(!1),h=h.slice(0,Math.min(h.length,y+1))}let p=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let y=0;y<h.length;y++){let I=h[y];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=y),I.route.id){let{loaderData:S,errors:k}=t,z=I.route.loader&&S[I.route.id]===void 0&&(!k||k[I.route.id]===void 0);if(I.route.lazy||z){p=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((y,I,S)=>{let k,z=!1,H=null,x=null;t&&(k=d&&I.route.id?d[I.route.id]:void 0,H=I.route.errorElement||RI,p&&(v<0&&S===0?(VI("route-fallback"),z=!0,x=null):v===S&&(z=!0,x=I.route.hydrateFallbackElement||null)));let $=e.concat(h.slice(0,S+1)),Z=()=>{let te;return k?te=H:z?te=x:I.route.Component?te=Q.createElement(I.route.Component,null):I.route.element?te=I.route.element:te=y,Q.createElement(PI,{match:I,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:te})};return t&&(I.route.ErrorBoundary||I.route.errorElement||S===0)?Q.createElement(CI,{location:t.location,revalidation:t.revalidation,component:H,error:k,children:Z(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):Z()},null)}var P_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(P_||{}),k_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(k_||{});function NI(n){let e=Q.useContext(Yf);return e||ht(!1),e}function xI(n){let e=Q.useContext(wI);return e||ht(!1),e}function DI(n){let e=Q.useContext(qi);return e||ht(!1),e}function N_(n){let e=DI(),t=e.matches[e.matches.length-1];return t.route.id||ht(!1),t.route.id}function bI(){var n;let e=Q.useContext(A_),t=xI(),i=N_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function OI(){let{router:n}=NI(P_.UseNavigateStable),e=N_(k_.UseNavigateStable),t=Q.useRef(!1);return R_(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,fl({fromRouteId:e},l)))},[n,e])}const Sy={};function VI(n,e,t){Sy[n]||(Sy[n]=!0)}function LI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Dn(n){let{to:e,replace:t,state:i,relative:o}=n;Qo()||ht(!1);let{future:l,static:h}=Q.useContext($i),{matches:d}=Q.useContext(qi),{pathname:p}=Sl(),v=Al(),y=Jf(e,Xf(d,l.v7_relativeSplatPath),p,o==="path"),I=JSON.stringify(y);return Q.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function Ss(n){ht(!1)}function MI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ci.Pop,navigator:l,static:h=!1,future:d}=n;Qo()&&ht(!1);let p=e.replace(/^\/*/,"/"),v=Q.useMemo(()=>({basename:p,navigator:l,static:h,future:fl({v7_relativeSplatPath:!1},d)}),[p,d,l,h]);typeof i=="string"&&(i=Ko(i));let{pathname:y="/",search:I="",hash:S="",state:k=null,key:z="default"}=i,H=Q.useMemo(()=>{let x=Qf(y,p);return x==null?null:{location:{pathname:x,search:I,hash:S,state:k,key:z},navigationType:o}},[p,y,I,S,k,z,o]);return H==null?null:Q.createElement($i.Provider,{value:v},Q.createElement($c.Provider,{children:t,value:H}))}function jI(n){let{children:e,location:t}=n;return II(ff(e),t)}new Promise(()=>{});function ff(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,ff(i.props.children,l));return}i.type!==Ss&&ht(!1),!i.props.index||!i.props.children||ht(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=ff(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pf.apply(this,arguments)}function UI(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function FI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zI(n,e){return n.button===0&&(!e||e==="_self")&&!FI(n)}const BI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$I="6";try{window.__reactRouterVersion=$I}catch{}const qI="startTransition",Ay=FT[qI];function HI(n){let{basename:e,children:t,future:i,window:o}=n,l=Q.useRef();l.current==null&&(l.current=GT({window:o,v5Compat:!0}));let h=l.current,[d,p]=Q.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},y=Q.useCallback(I=>{v&&Ay?Ay(()=>p(I)):p(I)},[p,v]);return Q.useLayoutEffect(()=>h.listen(y),[h,y]),Q.useEffect(()=>LI(i),[i]),Q.createElement(MI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:h,future:i})}const WI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KI=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:d,target:p,to:v,preventScrollReset:y,viewTransition:I}=e,S=UI(e,BI),{basename:k}=Q.useContext($i),z,H=!1;if(typeof v=="string"&&GI.test(v)&&(z=v,WI))try{let te=new URL(window.location.href),oe=v.startsWith("//")?new URL(te.protocol+v):new URL(v),Te=Qf(oe.pathname,k);oe.origin===te.origin&&Te!=null?v=Te+oe.search+oe.hash:H=!0}catch{}let x=EI(v,{relative:o}),$=QI(v,{replace:h,state:d,target:p,preventScrollReset:y,relative:o,viewTransition:I});function Z(te){i&&i(te),te.defaultPrevented||$(te)}return Q.createElement("a",pf({},S,{href:z||x,onClick:H||l?i:Z,ref:t,target:p}))});var Ry;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ry||(Ry={}));var Cy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Cy||(Cy={}));function QI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:d}=e===void 0?{}:e,p=Al(),v=Sl(),y=C_(n,{relative:h});return Q.useCallback(I=>{if(zI(I,t)){I.preventDefault();let S=i!==void 0?i:wc(v)===wc(y);p(n,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:d})}},[v,p,y,i,o,t,n,l,h,d])}function Py(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function XI(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function JI(){const[n,e]=Q.useState(null),[t,i]=Q.useState(!1);Q.useEffect(()=>{function d(p){p.preventDefault(),e(p)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const o=Q.useMemo(()=>!Py()&&XI()&&!t&&!n,[t,n]),l=Q.useMemo(()=>!Py()&&!t&&!!n,[n,t]);async function h(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),i(!0)}return!o&&!l?null:E.jsxs("section",{className:"install-banner","aria-live":"polite",children:[E.jsx("p",{className:"hint",children:l?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),E.jsxs("div",{className:"install-actions",children:[l?E.jsx("button",{className:"btn",type:"button",onClick:()=>void h(),children:"Aggiungi alla Home"}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>i(!0),children:"Chiudi"})]})]})}const x_=Q.createContext(null);function YI({children:n}){const[e,t]=Q.useState([]),i=Q.useCallback((l,h)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(p=>[...p,{id:d,type:l,message:h}]),window.setTimeout(()=>{t(p=>p.filter(v=>v.id!==d))},3200)},[]),o=Q.useMemo(()=>({showSuccess:l=>i("success",l),showError:l=>i("error",l)}),[i]);return E.jsxs(x_.Provider,{value:o,children:[n,E.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(l=>E.jsx("div",{className:`toast toast-${l.type}`,children:l.message},l.id))})]})}function qc(){const n=Q.useContext(x_);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const ZI=()=>{};var ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},eS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,d=h?n[o+1]:0,p=o+2<n.length,v=p?n[o+2]:0,y=l>>2,I=(l&3)<<4|d>>4;let S=(d&15)<<2|v>>6,k=v&63;p||(k=64,h||(S=64)),i.push(t[y],t[I],t[S],t[k])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(D_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const I=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||v==null||I==null)throw new tS;const S=l<<2|d>>4;if(i.push(S),v!==64){const k=d<<4&240|v>>2;if(i.push(k),I!==64){const z=v<<6&192|I;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nS=function(n){const e=D_(n);return b_.encodeByteArray(e,!0)},Ec=function(n){return nS(n).replace(/\./g,"")},O_=function(n){try{return b_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=()=>rS().__FIREBASE_DEFAULTS__,sS=()=>{if(typeof process>"u"||typeof ky>"u")return;const n=ky.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&O_(n[1]);return e&&JSON.parse(e)},Hc=()=>{try{return ZI()||iS()||sS()||oS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},V_=n=>{var e,t;return(t=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Zf=n=>{const e=V_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},L_=()=>{var n;return(n=Hc())===null||n===void 0?void 0:n.config},M_=n=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wc(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ec(JSON.stringify(t)),Ec(JSON.stringify(h)),""].join(".")}const sl={};function lS(){const n={prod:[],emulator:[]};for(const e of Object.keys(sl))sl[e]?n.emulator.push(e):n.prod.push(e);return n}function uS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ny=!1;function Gc(n,e){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||sl[n]===e||sl[n]||Ny)return;sl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=lS().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,k){S.setAttribute("width","24"),S.setAttribute("id",k),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ny=!0,h()},S}function y(S,k){S.setAttribute("id",k),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function I(){const S=uS(i),k=t("text"),z=document.getElementById(k)||document.createElement("span"),H=t("learnmore"),x=document.getElementById(H)||document.createElement("a"),$=t("preprendIcon"),Z=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;d(te),y(x,H);const oe=v();p(Z,$),te.append(Z,z,x,oe),document.body.appendChild(te)}l?(z.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function hS(){var n;const e=(n=Hc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mS(){const n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gS(){return!hS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yS(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="FirebaseError";class er extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=_S,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rl.prototype.create)}}class Rl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?wS(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new er(o,d,i)}}function wS(n,e){return n.replace(ES,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ES=/\{\$([^}]+)}/g;function TS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ns(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(xy(l)&&xy(h)){if(!Ns(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function xy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function IS(n,e){const t=new SS(n,e);return t.subscribe.bind(t)}class SS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");AS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Qd),o.error===void 0&&(o.error=Qd),o.complete===void 0&&(o.complete=Qd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n){return n&&n._delegate?n._delegate:n}class Hr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new aS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PS(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(n){return n===As?void 0:n}function PS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xe||(xe={}));const NS={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},xS=xe.INFO,DS={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},bS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=DS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ep{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=bS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const OS=(n,e)=>e.some(t=>n instanceof t);let Dy,by;function VS(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LS(){return by||(by=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U_=new WeakMap,mf=new WeakMap,F_=new WeakMap,Xd=new WeakMap,tp=new WeakMap;function MS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Ni(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&U_.set(t,n)}).catch(()=>{}),tp.set(e,n),e}function jS(n){if(mf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});mf.set(n,e)}let gf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||F_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ni(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function US(n){gf=n(gf)}function FS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Jd(this),e,...t);return F_.set(i,e.sort?e.sort():[e]),Ni(i)}:LS().includes(n)?function(...e){return n.apply(Jd(this),e),Ni(U_.get(this))}:function(...e){return Ni(n.apply(Jd(this),e))}}function zS(n){return typeof n=="function"?FS(n):(n instanceof IDBTransaction&&jS(n),OS(n,VS())?new Proxy(n,gf):n)}function Ni(n){if(n instanceof IDBRequest)return MS(n);if(Xd.has(n))return Xd.get(n);const e=zS(n);return e!==n&&(Xd.set(n,e),tp.set(e,n)),e}const Jd=n=>tp.get(n);function BS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),d=Ni(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Ni(h.result),p.oldVersion,p.newVersion,Ni(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const $S=["get","getKey","getAll","getAllKeys","count"],qS=["put","add","delete","clear"],Yd=new Map;function Oy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yd.get(e))return Yd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=qS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||$S.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let v=p.store;return i&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),o&&p.done]))[0]};return Yd.set(e,l),l}US(n=>({...n,get:(e,t,i)=>Oy(e,t)||n.get(e,t,i),has:(e,t)=>!!Oy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function WS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yf="@firebase/app",Vy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new ep("@firebase/app"),GS="@firebase/app-compat",KS="@firebase/analytics-compat",QS="@firebase/analytics",XS="@firebase/app-check-compat",JS="@firebase/app-check",YS="@firebase/auth",ZS="@firebase/auth-compat",eA="@firebase/database",tA="@firebase/data-connect",nA="@firebase/database-compat",rA="@firebase/functions",iA="@firebase/functions-compat",sA="@firebase/installations",oA="@firebase/installations-compat",aA="@firebase/messaging",lA="@firebase/messaging-compat",uA="@firebase/performance",cA="@firebase/performance-compat",hA="@firebase/remote-config",dA="@firebase/remote-config-compat",fA="@firebase/storage",pA="@firebase/storage-compat",mA="@firebase/firestore",gA="@firebase/ai",yA="@firebase/firestore-compat",vA="firebase",_A="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",wA={[yf]:"fire-core",[GS]:"fire-core-compat",[QS]:"fire-analytics",[KS]:"fire-analytics-compat",[JS]:"fire-app-check",[XS]:"fire-app-check-compat",[YS]:"fire-auth",[ZS]:"fire-auth-compat",[eA]:"fire-rtdb",[tA]:"fire-data-connect",[nA]:"fire-rtdb-compat",[rA]:"fire-fn",[iA]:"fire-fn-compat",[sA]:"fire-iid",[oA]:"fire-iid-compat",[aA]:"fire-fcm",[lA]:"fire-fcm-compat",[uA]:"fire-perf",[cA]:"fire-perf-compat",[hA]:"fire-rc",[dA]:"fire-rc-compat",[fA]:"fire-gcs",[pA]:"fire-gcs-compat",[mA]:"fire-fst",[yA]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[vA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,EA=new Map,_f=new Map;function Ly(n,e){try{n.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vi(n){const e=n.name;if(_f.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of Tc.values())Ly(t,n);for(const t of EA.values())Ly(t,n);return!0}function Pl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ln(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Rl("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=_A;function z_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(t||(t=L_()),!t)throw xi.create("no-options");const l=Tc.get(o);if(l){if(Ns(t,l.options)&&Ns(i,l.config))return l;throw xi.create("duplicate-app",{appName:o})}const h=new kS(o);for(const p of _f.values())h.addComponent(p);const d=new IA(t,i,h);return Tc.set(o,d),d}function Kc(n=vf){const e=Tc.get(n);if(!e&&n===vf&&L_())return z_();if(!e)throw xi.create("no-app",{appName:n});return e}function bn(n,e,t){var i;let o=(i=wA[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(d.join(" "));return}Vi(new Hr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-heartbeat-database",AA=1,pl="firebase-heartbeat-store";let Zd=null;function B_(){return Zd||(Zd=BS(SA,AA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),Zd}async function RA(n){try{const t=(await B_()).transaction(pl),i=await t.objectStore(pl).get($_(n));return await t.done,i}catch(e){if(e instanceof er)Wr.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(t.message)}}}async function My(n,e){try{const i=(await B_()).transaction(pl,"readwrite");await i.objectStore(pl).put(e,$_(n)),await i.done}catch(t){if(t instanceof er)Wr.warn(t.message);else{const i=xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wr.warn(i.message)}}}function $_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,PA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>PA){const h=DA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jy(),{heartbeatsToSend:i,unsentEntries:o}=NA(this._heartbeatsCache.heartbeats),l=Ec(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wr.warn(t),""}}}function jy(){return new Date().toISOString().substring(0,10)}function NA(n,e=CA){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Uy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Uy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class xA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yS()?vS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return My(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return My(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Uy(n){return Ec(JSON.stringify({version:2,heartbeats:n})).length}function DA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n){Vi(new Hr("platform-logger",e=>new HS(e),"PRIVATE")),Vi(new Hr("heartbeat",e=>new kA(e),"PRIVATE")),bn(yf,Vy,n),bn(yf,Vy,"esm2017"),bn("fire-js","")}bA("");var OA="firebase",VA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(OA,VA,"app");function np(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LA=q_,H_=new Rl("auth","Firebase",q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new ep("@firebase/auth");function MA(n,...e){Ic.logLevel<=xe.WARN&&Ic.warn(`Auth (${Vs}): ${n}`,...e)}function cc(n,...e){Ic.logLevel<=xe.ERROR&&Ic.error(`Auth (${Vs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(n,...e){throw ip(n,...e)}function Jn(n,...e){return ip(n,...e)}function rp(n,e,t){const i=Object.assign(Object.assign({},LA()),{[e]:t});return new Rl("auth","Firebase",i).create(e,{appName:n.name})}function Di(n){return rp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W_(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&_r(n,"argument-error"),rp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ip(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return H_.create(n,...e)}function Se(n,e,...t){if(!n)throw ip(e,...t)}function Br(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cc(e),new Error(e)}function Gr(n,e){n||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jA(){return Fy()==="http:"||Fy()==="https:"}function Fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jA()||fS()||"connection"in navigator)?navigator.onLine:!0}function FA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=cS()||pS()}get(){return UA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){Gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$A=new kl(3e4,6e4);function op(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xo(n,e,t,i,o={}){return K_(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=Cl(Object.assign({key:n.config.apiKey},h)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:p},l);return dS()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&Xr(n.emulatorConfig.host)&&(v.credentials="include"),G_.fetch()(await Q_(n,n.config.apiHost,t,d),v)})}async function K_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},zA),e);try{const o=new HA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw tc(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,v]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw tc(n,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw tc(n,"email-already-in-use",h);if(p==="USER_DISABLED")throw tc(n,"user-disabled",h);const y=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw rp(n,y,v);_r(n,y)}}catch(o){if(o instanceof er)throw o;_r(n,"network-request-failed",{message:String(o)})}}async function qA(n,e,t,i,o={}){const l=await Xo(n,e,t,i,o);return"mfaPendingCredential"in l&&_r(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Q_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?sp(n.config,o):`${n.config.apiScheme}://${o}`;return BA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class HA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Jn(this.auth,"network-request-failed")),$A.get())})}}function tc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Jn(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(n,e){return Xo(n,"POST","/v1/accounts:delete",e)}async function Sc(n,e){return Xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GA(n,e=!1){const t=Ze(n),i=await t.getIdToken(e),o=ap(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ol(ef(o.auth_time)),issuedAtTime:ol(ef(o.iat)),expirationTime:ol(ef(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ef(n){return Number(n)*1e3}function ap(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const o=O_(t);return o?JSON.parse(o):(cc("Failed to decode base64 JWT payload"),null)}catch(o){return cc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function zy(n){const e=ap(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof er&&KA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function KA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n){var e;const t=n.auth,i=await n.getIdToken(),o=await ml(n,Sc(t,{idToken:i}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?X_(l.providerUserInfo):[],d=JA(n.providerData,h),p=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),y=p?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ef(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,I)}async function XA(n){const e=Ze(n);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function X_(n){return n.map(e=>{var{providerId:t}=e,i=np(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(n,e){const t=await K_(n,{},async()=>{const i=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await Q_(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Xr(n.emulatorConfig.host)&&(p.credentials="include"),G_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZA(n,e){return Xo(n,"POST","/v2/accounts:revokeToken",op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=zy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await YA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Lo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=np(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ef(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ml(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GA(this,e)}reload(){return XA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await ml(this,WA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,p,v,y;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,k=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,z=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(d=t.tenantId)!==null&&d!==void 0?d:void 0,x=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(v=t.createdAt)!==null&&v!==void 0?v:void 0,Z=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:te,emailVerified:oe,isAnonymous:Te,providerData:Ae,stsTokenManager:D}=t;Se(te&&D,e,"internal-error");const A=Lo.fromJSON(this.name,D);Se(typeof te=="string",e,"internal-error"),Ti(I,e.name),Ti(S,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof Te=="boolean",e,"internal-error"),Ti(k,e.name),Ti(z,e.name),Ti(H,e.name),Ti(x,e.name),Ti($,e.name),Ti(Z,e.name);const R=new Xn({uid:te,auth:e,email:S,emailVerified:oe,displayName:I,isAnonymous:Te,photoURL:z,phoneNumber:k,tenantId:H,stsTokenManager:A,createdAt:$,lastLoginAt:Z});return Ae&&Array.isArray(Ae)&&(R.providerData=Ae.map(b=>Object.assign({},b))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Lo;o.updateFromServerResponse(t);const l=new Xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ac(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?X_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Lo;d.updateFromIdToken(i);const p=new Xn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;function $r(n){Gr(n instanceof Function,"Expected a class definition");let e=By.get(n);return e?(Gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,By.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J_.type="NONE";const $y=J_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n,e,t){return`firebase:${n}:${e}:${t}`}class Mo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=hc(this.userKey,o.apiKey,l),this.fullPersistenceKey=hc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sc(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Mo($r($y),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||$r($y);const h=hc(i,e.config.apiKey,e.name);let d=null;for(const v of t)try{const y=await v._get(h);if(y){let I;if(typeof y=="string"){const S=await Sc(e,{idToken:y}).catch(()=>{});if(!S)break;I=await Xn._fromGetAccountInfoResponse(e,S,y)}else I=Xn._fromJSON(e,y);v!==l&&(d=I),l=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Mo(l,e,i):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Mo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rw(e))return"Blackberry";if(iw(e))return"Webos";if(Z_(e))return"Safari";if((e.includes("chrome/")||ew(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Y_(n=Wt()){return/firefox\//i.test(n)}function Z_(n=Wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(n=Wt()){return/crios\//i.test(n)}function tw(n=Wt()){return/iemobile/i.test(n)}function nw(n=Wt()){return/android/i.test(n)}function rw(n=Wt()){return/blackberry/i.test(n)}function iw(n=Wt()){return/webos/i.test(n)}function lp(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function e1(n=Wt()){var e;return lp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t1(){return mS()&&document.documentMode===10}function sw(n=Wt()){return lp(n)||nw(n)||iw(n)||rw(n)||/windows phone/i.test(n)||tw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e=[]){let t;switch(n){case"Browser":t=qy(Wt());break;case"Worker":t=`${qy(Wt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",op(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=6;class s1{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:i1,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hy(this),this.idTokenSubscription=new Hy(this),this.beforeStateQueue=new n1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$r(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sc(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ln(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Di(this));const t=e?Ze(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r1(this),t=new s1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$r(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[$r(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&MA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jo(n){return Ze(n)}class Hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=IS(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a1(n){up=n}function l1(n){return up.loadJS(n)}function u1(){return up.gapiScript}function c1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(n,e){const t=Pl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ns(l,e??{}))return o;_r(o,"already-initialized")}return t.initialize({options:e})}function d1(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map($r);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function f1(n,e,t){const i=Jo(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=aw(e),{host:h,port:d}=p1(e),p=d===null?"":`:${d}`,v={url:`${l}//${h}${p}/`},y=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(Ns(v,i.config.emulator)&&Ns(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Xr(h)?(Wc(`${l}//${h}${p}`),Gc("Auth",!0)):m1()}function aw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function p1(n){const e=aw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Wy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Wy(h)}}}function Wy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function m1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(n,e){return qA(n,"POST","/v1/accounts:signInWithIdp",op(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="http://localhost";class xs extends lw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=np(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new xs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:g1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Qc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Nl{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zr.credential(t,i)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Nl{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Nl{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Xn._fromIdTokenResponse(e,i,o),h=Gy(i);return new zo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Gy(i);return new zo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Gy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends er{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Rc(e,t,i,o)}}function uw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(n,l,e,i):l})}async function y1(n,e,t=!1){const i=await ml(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(n,e,t=!1){const{auth:i}=n;if(ln(i.app))return Promise.reject(Di(i));const o="reauthenticate";try{const l=await ml(n,uw(i,o,e,n),t);Se(l.idToken,i,"internal-error");const h=ap(l.idToken);Se(h,i,"internal-error");const{sub:d}=h;return Se(n.uid===d,i,"user-mismatch"),zo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_r(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(n,e,t=!1){if(ln(n.app))return Promise.reject(Di(n));const i="signIn",o=await uw(n,i,e),l=await zo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n,e){return Ze(n).setPersistence(e)}function cw(n,e,t,i){return Ze(n).onIdTokenChanged(e,t,i)}function E1(n,e,t){return Ze(n).beforeAuthStateChanged(e,t)}function Xc(n){return Ze(n).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1e3,I1=10;class dw extends hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);t1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,I1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},T1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dw.type="LOCAL";const fw=dw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pw.type="SESSION";const mw=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async v=>v(t.origin,l)),p=await S1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const v=cp("",20);o.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function R1(n){pr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function C1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function k1(){return gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebaseLocalStorageDb",N1=1,Pc="firebaseLocalStorage",vw="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yc(n,e){return n.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function x1(){const n=indexedDB.deleteDatabase(yw);return new xl(n).toPromise()}function Tf(){const n=indexedDB.open(yw,N1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Pc,{keyPath:vw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Pc)?e(i):(i.close(),await x1(),e(await Tf()))})})}async function Ky(n,e,t){const i=Yc(n,!0).put({[vw]:e,value:t});return new xl(i).toPromise()}async function D1(n,e){const t=Yc(n,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function Qy(n,e){const t=Yc(n,!0).delete(e);return new xl(t).toPromise()}const b1=800,O1=3;class _w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>O1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(k1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await C1(),!this.activeServiceWorker)return;this.sender=new A1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tf();return await Ky(e,Cc,"1"),await Qy(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ky(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>D1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Yc(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_w.type="LOCAL";const V1=_w;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(n,e){return e?$r(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends lw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function L1(n){return _1(n.auth,new dp(n),n.bypassAuthState)}function M1(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),v1(t,new dp(n),n.bypassAuthState)}async function j1(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),y1(t,new dp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L1;case"linkViaPopup":case"linkViaRedirect":return j1;case"reauthViaPopup":case"reauthViaRedirect":return M1;default:_r(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new kl(2e3,1e4);async function F1(n,e,t){if(ln(n.app))return Promise.reject(Jn(n,"operation-not-supported-in-this-environment"));const i=Jo(n);W_(n,e,Qc);const o=hp(i,t);return new Rs(i,"signInViaPopup",e,o).executeNotNull()}class Rs extends ww{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U1.get())};e()}}Rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="pendingRedirect",dc=new Map;class B1 extends ww{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const i=await $1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $1(n,e){const t=Tw(e),i=Ew(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function q1(n,e){return Ew(n)._set(Tw(e),"true")}function H1(n,e){dc.set(n._key(),e)}function Ew(n){return $r(n._redirectPersistence)}function Tw(n){return hc(z1,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n,e,t){return G1(n,e,t)}async function G1(n,e,t){if(ln(n.app))return Promise.reject(Di(n));const i=Jo(n);W_(n,e,Qc),await i._initializationPromise;const o=hp(i,t);return await q1(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function K1(n,e){return await Jo(n)._initializationPromise,Iw(n,e,!1)}async function Iw(n,e,t=!1){if(ln(n.app))return Promise.reject(Di(n));const i=Jo(n),o=hp(i,e),h=await new B1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=600*1e3;class X1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Sw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Jn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xy(e))}saveEventToCache(e){this.cachedEventUids.add(Xy(e)),this.lastProcessedEventTime=Date.now()}}function Xy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(n,e={}){return Xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eR=/^https?/;async function tR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Y1(n);for(const t of e)try{if(nR(t))return}catch{}_r(n,"unauthorized-domain")}function nR(n){const e=wf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!eR.test(t))return!1;if(Z1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new kl(3e4,6e4);function Jy(){const n=pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iR(n){return new Promise((e,t)=>{var i,o,l;function h(){Jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jy(),t(Jn(n,"network-request-failed"))},timeout:rR.get()})}if(!((o=(i=pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=pr().gapi)===null||l===void 0)&&l.load)h();else{const d=c1("iframefcb");return pr()[d]=()=>{gapi.load?h():t(Jn(n,"network-request-failed"))},l1(`${u1()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw fc=null,e})}let fc=null;function sR(n){return fc=fc||iR(n),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new kl(5e3,15e3),aR="__/auth/iframe",lR="emulator/auth/iframe",uR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hR(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sp(e,lR):`https://${n.config.authDomain}/${aR}`,i={apiKey:e.apiKey,appName:n.name,v:Vs},o=cR.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Cl(i).slice(1)}`}async function dR(n){const e=await sR(n),t=pr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:hR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Jn(n,"network-request-failed"),d=pr().setTimeout(()=>{l(h)},oR.get());function p(){pr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pR=500,mR=600,gR="_blank",yR="http://localhost";class Yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vR(n,e,t,i=pR,o=mR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},fR),{width:i.toString(),height:o.toString(),top:l,left:h}),v=Wt().toLowerCase();t&&(d=ew(v)?gR:t),Y_(v)&&(e=e||yR,p.scrollbars="yes");const y=Object.entries(p).reduce((S,[k,z])=>`${S}${k}=${z},`,"");if(e1(v)&&d!=="_self")return _R(e||"",d),new Yy(null);const I=window.open(e||"",d,y);Se(I,n,"popup-blocked");try{I.focus()}catch{}return new Yy(I)}function _R(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="__/auth/handler",ER="emulator/auth/handler",TR=encodeURIComponent("fac");async function Zy(n,e,t,i,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Vs,eventId:o};if(e instanceof Qc){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",TS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,I]of Object.entries({}))h[y]=I}if(e instanceof Nl){const y=e.getScopes().filter(I=>I!=="");y.length>0&&(h.scopes=y.join(","))}n.tenantId&&(h.tid=n.tenantId);const d=h;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),v=p?`#${TR}=${encodeURIComponent(p)}`:"";return`${IR(n)}?${Cl(d).slice(1)}${v}`}function IR({config:n}){return n.emulator?sp(n,ER):`https://${n.authDomain}/${wR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class SR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mw,this._completeRedirectFn=Iw,this._overrideRedirectResult=H1}async _openPopup(e,t,i,o){var l;Gr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Zy(e,t,i,wf(),o);return vR(e,h,cp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Zy(e,t,i,wf(),o);return R1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Gr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await dR(e),i=new X1(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tf,{type:tf},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[tf];h!==void 0&&t(!!h),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sw()||Z_()||lp()}}const AR=SR;var ev="@firebase/auth",tv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PR(n){Vi(new Hr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(n)},v=new o1(i,o,l,p);return d1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vi(new Hr("auth-internal",e=>{const t=Jo(e.getProvider("auth").getImmediate());return(i=>new RR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(ev,tv,CR(n)),bn(ev,tv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=300,NR=M_("authIdTokenMaxAge")||kR;let nv=null;const xR=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>NR)return;const o=t==null?void 0:t.token;nv!==o&&(nv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DR(n=Kc()){const e=Pl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=h1(n,{popupRedirectResolver:AR,persistence:[V1,fw,mw]}),i=M_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=xR(l.toString());E1(t,h,()=>h(t.currentUser)),cw(t,d=>h(d))}}const o=V_("auth");return o&&f1(t,`http://${o}`),t}function bR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}a1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Jn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",bR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PR("Browser");var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,Aw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function R(){}R.prototype=A.prototype,D.D=A.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(b,V,j){for(var P=Array(arguments.length-2),et=2;et<arguments.length;et++)P[et-2]=arguments[et];return A.prototype[V].apply(b,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,R){R||(R=0);var b=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)b[V]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(V=0;16>V;++V)b[V]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=D.g[0],R=D.g[1],V=D.g[2];var j=D.g[3],P=A+(j^R&(V^j))+b[0]+3614090360&4294967295;A=R+(P<<7&4294967295|P>>>25),P=j+(V^A&(R^V))+b[1]+3905402710&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(R^j&(A^R))+b[2]+606105819&4294967295,V=j+(P<<17&4294967295|P>>>15),P=R+(A^V&(j^A))+b[3]+3250441966&4294967295,R=V+(P<<22&4294967295|P>>>10),P=A+(j^R&(V^j))+b[4]+4118548399&4294967295,A=R+(P<<7&4294967295|P>>>25),P=j+(V^A&(R^V))+b[5]+1200080426&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(R^j&(A^R))+b[6]+2821735955&4294967295,V=j+(P<<17&4294967295|P>>>15),P=R+(A^V&(j^A))+b[7]+4249261313&4294967295,R=V+(P<<22&4294967295|P>>>10),P=A+(j^R&(V^j))+b[8]+1770035416&4294967295,A=R+(P<<7&4294967295|P>>>25),P=j+(V^A&(R^V))+b[9]+2336552879&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(R^j&(A^R))+b[10]+4294925233&4294967295,V=j+(P<<17&4294967295|P>>>15),P=R+(A^V&(j^A))+b[11]+2304563134&4294967295,R=V+(P<<22&4294967295|P>>>10),P=A+(j^R&(V^j))+b[12]+1804603682&4294967295,A=R+(P<<7&4294967295|P>>>25),P=j+(V^A&(R^V))+b[13]+4254626195&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(R^j&(A^R))+b[14]+2792965006&4294967295,V=j+(P<<17&4294967295|P>>>15),P=R+(A^V&(j^A))+b[15]+1236535329&4294967295,R=V+(P<<22&4294967295|P>>>10),P=A+(V^j&(R^V))+b[1]+4129170786&4294967295,A=R+(P<<5&4294967295|P>>>27),P=j+(R^V&(A^R))+b[6]+3225465664&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^R&(j^A))+b[11]+643717713&4294967295,V=j+(P<<14&4294967295|P>>>18),P=R+(j^A&(V^j))+b[0]+3921069994&4294967295,R=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(R^V))+b[5]+3593408605&4294967295,A=R+(P<<5&4294967295|P>>>27),P=j+(R^V&(A^R))+b[10]+38016083&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^R&(j^A))+b[15]+3634488961&4294967295,V=j+(P<<14&4294967295|P>>>18),P=R+(j^A&(V^j))+b[4]+3889429448&4294967295,R=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(R^V))+b[9]+568446438&4294967295,A=R+(P<<5&4294967295|P>>>27),P=j+(R^V&(A^R))+b[14]+3275163606&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^R&(j^A))+b[3]+4107603335&4294967295,V=j+(P<<14&4294967295|P>>>18),P=R+(j^A&(V^j))+b[8]+1163531501&4294967295,R=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(R^V))+b[13]+2850285829&4294967295,A=R+(P<<5&4294967295|P>>>27),P=j+(R^V&(A^R))+b[2]+4243563512&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^R&(j^A))+b[7]+1735328473&4294967295,V=j+(P<<14&4294967295|P>>>18),P=R+(j^A&(V^j))+b[12]+2368359562&4294967295,R=V+(P<<20&4294967295|P>>>12),P=A+(R^V^j)+b[5]+4294588738&4294967295,A=R+(P<<4&4294967295|P>>>28),P=j+(A^R^V)+b[8]+2272392833&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^R)+b[11]+1839030562&4294967295,V=j+(P<<16&4294967295|P>>>16),P=R+(V^j^A)+b[14]+4259657740&4294967295,R=V+(P<<23&4294967295|P>>>9),P=A+(R^V^j)+b[1]+2763975236&4294967295,A=R+(P<<4&4294967295|P>>>28),P=j+(A^R^V)+b[4]+1272893353&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^R)+b[7]+4139469664&4294967295,V=j+(P<<16&4294967295|P>>>16),P=R+(V^j^A)+b[10]+3200236656&4294967295,R=V+(P<<23&4294967295|P>>>9),P=A+(R^V^j)+b[13]+681279174&4294967295,A=R+(P<<4&4294967295|P>>>28),P=j+(A^R^V)+b[0]+3936430074&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^R)+b[3]+3572445317&4294967295,V=j+(P<<16&4294967295|P>>>16),P=R+(V^j^A)+b[6]+76029189&4294967295,R=V+(P<<23&4294967295|P>>>9),P=A+(R^V^j)+b[9]+3654602809&4294967295,A=R+(P<<4&4294967295|P>>>28),P=j+(A^R^V)+b[12]+3873151461&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^R)+b[15]+530742520&4294967295,V=j+(P<<16&4294967295|P>>>16),P=R+(V^j^A)+b[2]+3299628645&4294967295,R=V+(P<<23&4294967295|P>>>9),P=A+(V^(R|~j))+b[0]+4096336452&4294967295,A=R+(P<<6&4294967295|P>>>26),P=j+(R^(A|~V))+b[7]+1126891415&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~R))+b[14]+2878612391&4294967295,V=j+(P<<15&4294967295|P>>>17),P=R+(j^(V|~A))+b[5]+4237533241&4294967295,R=V+(P<<21&4294967295|P>>>11),P=A+(V^(R|~j))+b[12]+1700485571&4294967295,A=R+(P<<6&4294967295|P>>>26),P=j+(R^(A|~V))+b[3]+2399980690&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~R))+b[10]+4293915773&4294967295,V=j+(P<<15&4294967295|P>>>17),P=R+(j^(V|~A))+b[1]+2240044497&4294967295,R=V+(P<<21&4294967295|P>>>11),P=A+(V^(R|~j))+b[8]+1873313359&4294967295,A=R+(P<<6&4294967295|P>>>26),P=j+(R^(A|~V))+b[15]+4264355552&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~R))+b[6]+2734768916&4294967295,V=j+(P<<15&4294967295|P>>>17),P=R+(j^(V|~A))+b[13]+1309151649&4294967295,R=V+(P<<21&4294967295|P>>>11),P=A+(V^(R|~j))+b[4]+4149444226&4294967295,A=R+(P<<6&4294967295|P>>>26),P=j+(R^(A|~V))+b[11]+3174756917&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~R))+b[2]+718787259&4294967295,V=j+(P<<15&4294967295|P>>>17),P=R+(j^(V|~A))+b[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+j&4294967295}i.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var R=A-this.blockSize,b=this.B,V=this.h,j=0;j<A;){if(V==0)for(;j<=R;)o(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<A;)if(b[V++]=D.charCodeAt(j++),V==this.blockSize){o(this,b),V=0;break}}else for(;j<A;)if(b[V++]=D[j++],V==this.blockSize){o(this,b),V=0;break}}this.h=V,this.o+=A},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var R=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=R&255,R/=256;for(this.u(D),D=Array(16),A=R=0;4>A;++A)for(var b=0;32>b;b+=8)D[R++]=this.g[A]>>>b&255;return D};function l(D,A){var R=d;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=A(D)}function h(D,A){this.h=A;for(var R=[],b=!0,V=D.length-1;0<=V;V--){var j=D[V]|0;b&&j==A||(R[V]=j,b=!1)}this.g=R}var d={};function p(D){return-128<=D&&128>D?l(D,function(A){return new h([A|0],0>A?-1:0)}):new h([D|0],0>D?-1:0)}function v(D){if(isNaN(D)||!isFinite(D))return I;if(0>D)return x(v(-D));for(var A=[],R=1,b=0;D>=R;b++)A[b]=D/R|0,R*=4294967296;return new h(A,0)}function y(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return x(y(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(A,8)),b=I,V=0;V<D.length;V+=8){var j=Math.min(8,D.length-V),P=parseInt(D.substring(V,V+j),A);8>j?(j=v(Math.pow(A,j)),b=b.j(j).add(v(P))):(b=b.j(R),b=b.add(v(P)))}return b}var I=p(0),S=p(1),k=p(16777216);n=h.prototype,n.m=function(){if(H(this))return-x(this).m();for(var D=0,A=1,R=0;R<this.g.length;R++){var b=this.i(R);D+=(0<=b?b:4294967296+b)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(z(this))return"0";if(H(this))return"-"+x(this).toString(D);for(var A=v(Math.pow(D,6)),R=this,b="";;){var V=oe(R,A).g;R=$(R,V.j(A));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=V,z(R))return j+b;for(;6>j.length;)j="0"+j;b=j+b}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function z(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function H(D){return D.h==-1}n.l=function(D){return D=$(this,D),H(D)?-1:z(D)?0:1};function x(D){for(var A=D.g.length,R=[],b=0;b<A;b++)R[b]=~D.g[b];return new h(R,~D.h).add(S)}n.abs=function(){return H(this)?x(this):this},n.add=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],b=0,V=0;V<=A;V++){var j=b+(this.i(V)&65535)+(D.i(V)&65535),P=(j>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);b=P>>>16,j&=65535,P&=65535,R[V]=P<<16|j}return new h(R,R[R.length-1]&-2147483648?-1:0)};function $(D,A){return D.add(x(A))}n.j=function(D){if(z(this)||z(D))return I;if(H(this))return H(D)?x(this).j(x(D)):x(x(this).j(D));if(H(D))return x(this.j(x(D)));if(0>this.l(k)&&0>D.l(k))return v(this.m()*D.m());for(var A=this.g.length+D.g.length,R=[],b=0;b<2*A;b++)R[b]=0;for(b=0;b<this.g.length;b++)for(var V=0;V<D.g.length;V++){var j=this.i(b)>>>16,P=this.i(b)&65535,et=D.i(V)>>>16,It=D.i(V)&65535;R[2*b+2*V]+=P*It,Z(R,2*b+2*V),R[2*b+2*V+1]+=j*It,Z(R,2*b+2*V+1),R[2*b+2*V+1]+=P*et,Z(R,2*b+2*V+1),R[2*b+2*V+2]+=j*et,Z(R,2*b+2*V+2)}for(b=0;b<A;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=A;b<2*A;b++)R[b]=0;return new h(R,0)};function Z(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function te(D,A){this.g=D,this.h=A}function oe(D,A){if(z(A))throw Error("division by zero");if(z(D))return new te(I,I);if(H(D))return A=oe(x(D),A),new te(x(A.g),x(A.h));if(H(A))return A=oe(D,x(A)),new te(x(A.g),A.h);if(30<D.g.length){if(H(D)||H(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,b=A;0>=b.l(D);)R=Te(R),b=Te(b);var V=Ae(R,1),j=Ae(b,1);for(b=Ae(b,2),R=Ae(R,2);!z(b);){var P=j.add(b);0>=P.l(D)&&(V=V.add(R),j=P),b=Ae(b,1),R=Ae(R,1)}return A=$(D,V.j(A)),new te(V,A)}for(V=I;0<=D.l(A);){for(R=Math.max(1,Math.floor(D.m()/A.m())),b=Math.ceil(Math.log(R)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),j=v(R),P=j.j(A);H(P)||0<P.l(D);)R-=b,j=v(R),P=j.j(A);z(j)&&(j=S),V=V.add(j),D=$(D,P)}return new te(V,D)}n.A=function(D){return oe(this,D).h},n.and=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)&D.i(b);return new h(R,this.h&D.h)},n.or=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)|D.i(b);return new h(R,this.h|D.h)},n.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)^D.i(b);return new h(R,this.h^D.h)};function Te(D){for(var A=D.g.length+1,R=[],b=0;b<A;b++)R[b]=D.i(b)<<1|D.i(b-1)>>>31;return new h(R,D.h)}function Ae(D,A){var R=A>>5;A%=32;for(var b=D.g.length-R,V=[],j=0;j<b;j++)V[j]=0<A?D.i(j+R)>>>A|D.i(j+R+1)<<32-A:D.i(j+R);return new h(V,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Aw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=y,bi=h}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rw,tl,Cw,pc,If,Pw,kw,Nw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,U={next:function(){if(!T&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:I,S.apply(null,arguments)}function k(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function z(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,U,W){for(var re=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)re[ze-2]=arguments[ze];return m.prototype[U].apply(T,re)}}function H(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function x(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const U=u.length||0,W=T.length||0;u.length=U+W;for(let re=0;re<W;re++)u[U+re]=T[re]}else u.push(T)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var Te=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Ae(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function A(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let W=0;W<R.length;W++)_=R[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function j(u){d.setTimeout(()=>{throw u},0)}function P(){var u=ge;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class et{constructor(){this.h=this.g=null}add(m,_){const T=It.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var It=new $(()=>new St,u=>u.reset());class St{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,ie=!1,ge=new et,ae=()=>{const u=d.Promise.resolve(void 0);Ne=()=>{u.then(M)}};var M=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(_){j(_)}var m=It;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u})();function he(u,m){if(X.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Te){e:{try{oe(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&he.aa.h.call(this)}}z(he,X);var we={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function qe(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Ve,this.da=this.fa=!1}function At(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ir(u){this.src=u,this.g={},this.h=0}Ir.prototype.add=function(u,m,_,T,U){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var re=Jr(u,m,T,U);return-1<re?(m=u[re],_||(m.fa=!1)):(m=new qe(m,this.src,W,!!T,U),m.fa=_,u.push(m)),m};function Us(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=U)&&Array.prototype.splice.call(T,U,1),W&&(At(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Jr(u,m,_,T){for(var U=0;U<u.length;++U){var W=u[U];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==T)return U}return-1}var Ki="closure_lm_"+(1e6*Math.random()|0),Fs={};function sa(u,m,_,T,U){if(Array.isArray(m)){for(var W=0;W<m.length;W++)sa(u,m[W],_,T,U);return null}return _=la(_),u&&u[be]?u.K(m,_,v(T)?!!T.capture:!1,U):oa(u,m,_,!1,T,U)}function oa(u,m,_,T,U,W){if(!m)throw Error("Invalid event type");var re=v(U)?!!U.capture:!!U,ze=Bs(u);if(ze||(u[Ki]=ze=new Ir(u)),_=ze.add(m,_,T,re,W),_.proxy)return _;if(T=Ul(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)le||(U=re),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Ar(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ul(){function u(_){return m.call(u.src,u.listener,_)}const m=aa;return u}function zs(u,m,_,T,U){if(Array.isArray(m))for(var W=0;W<m.length;W++)zs(u,m[W],_,T,U);else T=v(T)?!!T.capture:!!T,_=la(_),u&&u[be]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=Jr(W,_,T,U),-1<_&&(At(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Bs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Jr(m,_,T,U)),(_=-1<u?m[u]:null)&&Sr(_))}function Sr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[be])Us(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Ar(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Bs(m))?(Us(_,u),_.h==0&&(_.src=null,m[Ki]=null)):At(u)}}}function Ar(u){return u in Fs?Fs[u]:Fs[u]="on"+u}function aa(u,m){if(u.da)u=!0;else{m=new he(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Sr(u),u=_.call(T,m)}return u}function Bs(u){return u=u[Ki],u instanceof Ir?u:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function la(u){return typeof u=="function"?u:(u[$s]||(u[$s]=function(m){return u.handleEvent(m)}),u[$s])}function yt(){L.call(this),this.i=new Ir(this),this.M=this,this.F=null}z(yt,L),yt.prototype[be]=!0,yt.prototype.removeEventListener=function(u,m,_,T){zs(this,u,m,_,T)};function vt(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new X(m,u);else if(m instanceof X)m.target=m.target||u;else{var U=m;m=new X(T,u),b(m,U)}if(U=!0,_)for(var W=_.length-1;0<=W;W--){var re=m.g=_[W];U=Rr(re,T,!0,m)&&U}if(re=m.g=u,U=Rr(re,T,!0,m)&&U,U=Rr(re,T,!1,m)&&U,_)for(W=0;W<_.length;W++)re=m.g=_[W],U=Rr(re,T,!1,m)&&U}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)At(_[T]);delete u.g[m],u.h--}}this.F=null},yt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},yt.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Rr(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,W=0;W<m.length;++W){var re=m[W];if(re&&!re.da&&re.capture==_){var ze=re.listener,_t=re.ha||re.src;re.fa&&Us(u.i,re),U=ze.call(_t,T)!==!1&&U}}return U&&!T.defaultPrevented}function ua(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Yr(u){u.g=ua(()=>{u.g=null,u.i&&(u.i=!1,Yr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Qi extends L{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Yr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(u){L.call(this),this.h=u,this.g={}}z(Xi,L);var ca=[];function ha(u){Ae(u.g,function(m,_){this.g.hasOwnProperty(_)&&Sr(m)},u),u.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),ha(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var da=d.JSON.stringify,fa=d.JSON.parse,pa=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ji(){}Ji.prototype.h=null;function qs(u){return u.h||(u.h=u.i())}function Hs(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){X.call(this,"d")}z(tr,X);function Ws(){X.call(this,"c")}z(Ws,X);var nr={},ma=null;function Yi(){return ma=ma||new yt}nr.La="serverreachability";function ga(u){X.call(this,nr.La,u)}z(ga,X);function Cr(u){const m=Yi();vt(m,new ga(m))}nr.STAT_EVENT="statevent";function ya(u,m){X.call(this,nr.STAT_EVENT,u),this.stat=m}z(ya,X);function at(u){const m=Yi();vt(m,new ya(m,u))}nr.Ma="timingevent";function Gs(u,m){X.call(this,nr.Ma,u),this.size=m}z(Gs,X);function On(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function es(u,m,_,T,U,W){u.info(function(){if(u.g)if(W)for(var re="",ze=W.split("&"),_t=0;_t<ze.length;_t++){var Le=ze[_t].split("=");if(1<Le.length){var Rt=Le[0];Le=Le[1];var dt=Rt.split("_");re=2<=dt.length&&dt[1]=="type"?re+(Rt+"="+Le+"&"):re+(Rt+"=redacted&")}}else re=null;else re=W;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+re})}function Ks(u,m,_,T,U,W,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+W+" "+re})}function Vn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+yh(u,_)+(T?" "+T:"")})}function va(u,m){u.info(function(){return"TIMEOUT: "+m})}Zi.prototype.info=function(){};function yh(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var re=1;re<U.length;re++)U[re]=""}}}}return da(_)}catch{return m}}var Qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function ts(){}z(ts,Ji),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Ln=new ts;function Mn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zl}function zl(){this.i=null,this.g="",this.h=!1}var _a={},Xs={};function Js(u,m,_){u.L=1,u.v=ri(fn(m)),u.m=_,u.P=!0,wa(u,null)}function wa(u,m){u.F=Date.now(),He(u),u.A=fn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),si(_.i,"t",T),u.C=0,_=u.j.J,u.h=new zl,u.g=su(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Qi(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ca[0]=U.toString()),U=ca);for(var W=0;W<U.length;W++){var re=sa(_,U[W],T||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Cr(),es(u.i,u.u,u.A,u.l,u.R,u.m)}Mn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Zt(u)==3?m.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Zt(this.g);var m=this.g.Ba();const Sn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||dt!=4||m==7||(m==8||0>=Sn?Cr(3):Cr(2)),ns(this);var _=this.g.Z();this.X=_;t:if(Bl(this)){var T=Ra(this.g);u="";var U=T.length,W=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Zr(this);var re="";break t}this.h.i=new d.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Ks(this.i,this.u,this.A,this.l,this.R,dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,_t=this.g;if((ze=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ze)){var Le=ze;break t}}Le=null}if(_=Le)Vn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,_);else{this.o=!1,this.s=3,at(12),Tn(this),Zr(this);break e}}if(this.P){_=!0;let mn;for(;!this.J&&this.C<re.length;)if(mn=vh(this,re),mn==Xs){dt==4&&(this.s=4,at(14),_=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==_a){this.s=4,at(15),Vn(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Vn(this.i,this.l,mn,null),Ea(this,mn);if(Bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||re.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)Vn(this.i,this.l,re,"[Invalid Chunked Response]"),Tn(this),Zr(this);else if(0<re.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Pa(Rt),Rt.M=!0,at(11))}}else Vn(this.i,this.l,re,null),Ea(this,re);dt==4&&Tn(this),this.o&&!this.J&&(dt==4?lo(this.j,this):(this.o=!1,He(this)))}else ro(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Tn(this),Zr(this)}}}catch{}finally{}};function Bl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function vh(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Xs:(_=Number(m.substring(_,T)),isNaN(_)?_a:(T+=1,T+_>m.length?Xs:(m=m.slice(T,T+_),u.C=T+_,m)))}Mn.prototype.cancel=function(){this.J=!0,Tn(this)};function He(u){u.S=Date.now()+u.I,$l(u,u.I)}function $l(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=On(S(u.ba,u),m)}function ns(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Mn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(va(this.i,this.A),this.L!=2&&(Cr(),at(17)),Tn(this),this.s=2,Zr(this)):$l(this,this.S-u)};function Zr(u){u.j.G==0||u.J||lo(u.j,u)}function Tn(u){ns(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ha(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ea(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Gt(_.h,u))){if(!u.K&&Gt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ao(_),Bn(_);else break e;oo(_),at(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=On(S(_.Za,_),6e3));if(1>=Hl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Dr(_,11)}else if((u.K||_.g==u)&&ao(_),!Z(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Le=U[m];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Rt=Le[3];Rt!=null&&(_.la=Rt,_.j.info("VER="+_.la));const dt=Le[4];dt!=null&&(_.Aa=dt,_.j.info("SVER="+_.Aa));const Sn=Le[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(T=1.5*Sn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const mn=u.g;if(mn){const us=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var W=T.h;W.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ta(W,W.h),W.h=null))}if(T.D){const co=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(T.ya=co,Be(T.I,T.D,co))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var re=u;if(T.qa=iu(T,T.J?T.ia:null,T.W),re.K){Wl(T.h,re);var ze=re,_t=T.L;_t&&(ze.I=_t),ze.B&&(ns(ze),He(ze)),T.g=re}else ls(T);0<_.i.length&&or(_)}else Le[0]!="stop"&&Le[0]!="close"||Dr(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Dr(_,7):Dt(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}Cr(4)}catch{}}var ql=class{constructor(u,m){this.g=u,this.map=m}};function rs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hl(u){return u.h?1:u.g?u.g.size:0}function Gt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ta(u,m){u.g?u.g.add(m):u.h=m}function Wl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}rs.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return H(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Zs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function ei(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Zs(u),T=Ys(u),U=T.length,W=0;W<U;W++)m.call(void 0,T[W],_&&_[W],u)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _h(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),U=null;if(0<=T){var W=u[_].substring(0,T);U=u[_].substring(T+1)}else W=u[_];m(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Pr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pr){this.h=u.h,ss(this,u.j),this.o=u.o,this.g=u.g,ti(this,u.s),this.l=u.l;var m=u.i,_=new rr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),ni(this,_),this.m=u.m}else u&&(m=String(u).match(is))?(this.h=!1,ss(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),ti(this,m[4]),this.l=Oe(m[5]||"",!0),ni(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Pr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ii(m,eo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ii(m,eo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ii(_,_.charAt(0)=="/"?Xl:Ql,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ii(_,Ia)),u.join("")};function fn(u){return new Pr(u)}function ss(u,m,_){u.j=_?Oe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ti(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function ni(u,m,_){m instanceof rr?(u.i=m,ir(u.i,u.h)):(_||(m=ii(m,Jl)),u.i=new rr(m,u.h))}function Be(u,m,_){u.i.set(m,_)}function ri(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ii(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Kl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eo=/[#\/\?@]/g,Ql=/[#\?:]/g,Xl=/[#\?]/g,Jl=/[#\?@]/g,Ia=/#/g;function rr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xt(u){u.g||(u.g=new Map,u.h=0,u.i&&_h(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=rr.prototype,n.add=function(u,m){xt(this),this.i=null,u=In(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function jn(u,m){xt(u),m=In(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Un(u,m){return xt(u),m=In(u,m),u.g.has(m)}n.forEach=function(u,m){xt(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)},n.na=function(){xt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const U=u[T];for(let W=0;W<U.length;W++)_.push(m[T])}return _},n.V=function(u){xt(this);let m=[];if(typeof u=="string")Un(this,u)&&(m=m.concat(this.g.get(In(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},n.set=function(u,m){return xt(this),this.i=null,u=In(this,u),Un(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function si(u,m,_){jn(u,m),0<_.length&&(u.i=null,u.g.set(In(u,m),H(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const W=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var U=W;re[T]!==""&&(U+="="+encodeURIComponent(String(re[T]))),u.push(U)}}return this.i=u.join("&")};function In(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ir(u,m){m&&!u.j&&(xt(u),u.i=null,u.g.forEach(function(_,T){var U=T.toLowerCase();T!=U&&(jn(this,T),si(this,U,_))},u)),u.j=m}function wh(u,m){const _=new Zi;if(d.Image){const T=new Image;T.onload=k(Yt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=k(Yt,_,"TestLoadImage: error",!1,m,T),T.onabort=k(Yt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=k(Yt,_,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Yl(u,m){const _=new Zi,T=new AbortController,U=setTimeout(()=>{T.abort(),Yt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(U),W.ok?Yt(_,"TestPingServer: ok",!0,m):Yt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Yt(_,"TestPingServer: error",!1,m)})}function Yt(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Eh(){this.g=new pa}function Zl(u,m,_){const T=_||"";try{ei(u,function(U,W){let re=U;v(U)&&(re=da(U)),m.push(T+W+"="+encodeURIComponent(re))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function kr(u){this.l=u.Ub||null,this.j=u.eb||!1}z(kr,Ji),kr.prototype.g=function(){return new os(this.l,this.j)},kr.prototype.i=(function(u){return function(){return u}})({});function os(u,m){yt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(os,yt),n=os.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,zn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function eu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fn(this):zn(this),this.readyState==3&&eu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Fn(this))},n.Qa=function(u){this.g&&(this.response=u,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nr(u){let m="";return Ae(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function oi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Nr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Be(u,m,_))}function Je(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Je,yt);var Th=/^https?$/i,Sa=["POST","PUT"];n=Je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?qs(this.o):qs(Ln),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){as(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Sa,m,void 0))||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,re]of _)this.g.setRequestHeader(W,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{no(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){as(this,W)}};function as(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,to(u),pn(u)}function to(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Aa(this):this.bb())},n.bb=function(){Aa(this)};function Aa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Zt(u)!=4||u.Z()!=2)){if(u.u&&Zt(u)==4)ua(u.Ea,0,u);else if(vt(u,"readystatechange"),Zt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=re===0){var U=String(u.D).match(is)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),T=!Th.test(U?U.toLowerCase():"")}_=T}if(_)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var W=2<Zt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",to(u)}}finally{pn(u)}}}}function pn(u,m){if(u.g){no(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||vt(u,"ready");try{_.onreadystatechange=T}catch{}}}function no(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Zt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),fa(m)}};function Ra(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ro(u){const m={};u=(u.g&&2<=Zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Z(u[T]))continue;var _=V(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[U]||[];m[U]=W,W.push(_)}D(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ca(u){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,u),this.cb=sr("retryDelaySeedMs",1e4,u),this.Wa=sr("forwardChannelMaxRetries",2,u),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(u&&u.concurrentRequestLimit),this.Da=new Eh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ca.prototype,n.la=8,n.G=1,n.connect=function(u,m,_,T){at(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=iu(this,null,this.W),or(this)};function Dt(u){if(io(u),u.G==3){var m=u.U++,_=fn(u.I);if(Be(_,"SID",u.K),Be(_,"RID",m),Be(_,"TYPE","terminate"),xr(u,_),m=new Mn(u,u.j,m),m.L=2,m.v=ri(fn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=su(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}ru(u)}function Bn(u){u.g&&(Pa(u),u.g.cancel(),u.g=null)}function io(u){Bn(u),u.u&&(d.clearTimeout(u.u),u.u=null),ao(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function or(u){if(!dn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ne||ae(),ie||(Ne(),ie=!0),ge.add(m,u),u.B=0}}function Ih(u,m){return Hl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=On(S(u.Ga,u,m),nu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Mn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=A(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ai(this,U,m),_=fn(this.I),Be(_,"RID",u),Be(_,"CVER",22),this.D&&Be(_,"X-HTTP-Session-Id",this.D),xr(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(Nr(W)))+"&"+m:this.m&&oi(_,this.m,W)),Ta(this.h,U),this.Ua&&Be(_,"TYPE","init"),this.P?(Be(_,"$req",m),Be(_,"SID","null"),U.T=!0,Js(U,_,null)):Js(U,_,m),this.G=2}}else this.G==3&&(u?so(this,u):this.i.length==0||dn(this.h)||so(this))};function so(u,m){var _;m?_=m.l:_=u.U++;const T=fn(u.I);Be(T,"SID",u.K),Be(T,"RID",_),Be(T,"AID",u.T),xr(u,T),u.m&&u.o&&oi(T,u.m,u.o),_=new Mn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ai(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ta(u.h,_),Js(_,T,m)}function xr(u,m){u.H&&Ae(u.H,function(_,T){Be(m,T,_)}),u.l&&ei({},function(_,T){Be(m,T,_)})}function ai(u,m,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let W=-1;for(;;){const re=["count="+_];W==-1?0<_?(W=U[0].g,re.push("ofs="+W)):W=0:re.push("ofs="+W);let ze=!0;for(let _t=0;_t<_;_t++){let Le=U[_t].g;const Rt=U[_t].map;if(Le-=W,0>Le)W=Math.max(0,U[_t].g-100),ze=!1;else try{Zl(Rt,re,"req"+Le+"_")}catch{T&&T(Rt)}}if(ze){T=re.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function ls(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ne||ae(),ie||(Ne(),ie=!0),ge.add(m,u),u.v=0}}function oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=On(S(u.Fa,u),nu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=On(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Bn(this),tu(this))};function Pa(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function tu(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=fn(u.qa);Be(m,"RID","rpc"),Be(m,"SID",u.K),Be(m,"AID",u.T),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(m,"TO",u.ja),Be(m,"TYPE","xmlhttp"),xr(u,m),u.m&&u.o&&oi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ri(fn(m)),_.m=null,_.P=!0,wa(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Bn(this),oo(this),at(19))};function ao(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function lo(u,m){var _=null;if(u.g==m){ao(u),Pa(u),u.g=null;var T=2}else if(Gt(u.h,m))_=m.D,Wl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=Yi(),vt(T,new Gs(T,_)),or(u)}else ls(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&Ih(u,m)||T==2&&oo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Dr(u,5);break;case 4:Dr(u,10);break;case 3:Dr(u,6);break;default:Dr(u,2)}}}function nu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Dr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),T=u.Xa;const U=!T;T=new Pr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ss(T,"https"),ri(T),U?wh(T.toString(),_):Yl(T.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(m),ru(u),io(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ru(u){if(u.G=0,u.ka=[],u.l){const m=Gl(u.h);(m.length!=0||u.i.length!=0)&&(x(u.ka,m),x(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function iu(u,m,_){var T=_ instanceof Pr?fn(_):new Pr(_);if(T.g!="")m&&(T.g=m+"."+T.g),ti(T,T.s);else{var U=d.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var W=new Pr(null);T&&ss(W,T),m&&(W.g=m),U&&ti(W,U),_&&(W.l=_),T=W}return _=u.D,m=u.ya,_&&m&&Be(T,_,m),Be(T,"VER",u.la),xr(u,T),T}function su(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Je(new kr({eb:_})):new Je(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ka(){}n=ka.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uo(){}uo.prototype.g=function(u,m){return new Kt(u,m)};function Kt(u,m){yt.call(this),this.g=new Ca(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Z(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ar(this)}z(Kt,yt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Dt(this.g)},Kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=da(u),u=_);m.i.push(new ql(m.Ya++,u)),m.G==3&&or(m)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Kt.aa.N.call(this)};function ou(u){tr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}z(ou,tr);function au(){Ws.call(this),this.status=1}z(au,Ws);function ar(u){this.g=u}z(ar,ka),ar.prototype.ua=function(){vt(this.g,"a")},ar.prototype.ta=function(u){vt(this.g,new ou(u))},ar.prototype.sa=function(u){vt(this.g,new au)},ar.prototype.ra=function(){vt(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Nw=function(){return new uo},kw=function(){return Yi()},Pw=nr,If={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,pc=Qs,Fl.COMPLETE="complete",Cw=Fl,Hs.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",yt.prototype.listen=yt.prototype.K,tl=Hs,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Rw=Je}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const iv="@firebase/firestore",sv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new ep("@firebase/firestore");function Do(){return Ds.logLevel}function ce(n,...e){if(Ds.logLevel<=xe.DEBUG){const t=e.map(fp);Ds.debug(`Firestore (${Yo}): ${n}`,...t)}}function Kr(n,...e){if(Ds.logLevel<=xe.ERROR){const t=e.map(fp);Ds.error(`Firestore (${Yo}): ${n}`,...t)}}function Li(n,...e){if(Ds.logLevel<=xe.WARN){const t=e.map(fp);Ds.warn(`Firestore (${Yo}): ${n}`,...t)}}function fp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,xw(n,i,t)}function xw(n,e,t){let i=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Kr(i),new Error(i)}function Fe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||xw(e,o,i)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qt.UNAUTHENTICATED)))}shutdown(){}}class VR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class LR{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new Dw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class MR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new MR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ov(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=FR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function Sf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Pe(i,o);{const l=bw(),h=zR(l.encode(av(n,t)),l.encode(av(e,t)));return h!==0?h:Pe(i,o)}}t+=i>65535?2:1}return Pe(n.length,e.length)}function av(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function zR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function Bo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=dr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),o=dr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?dr.extractNumericId(e).compare(dr.extractNumericId(t)):Sf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class Ge extends dr{construct(e,t,i){return new Ge(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const BR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends dr{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return BR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lv}static keyField(){return new Lt([lv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ge.fromString(e))}static fromName(e){return new ye(Ge.fromString(e).popFirst(5))}static empty(){return new ye(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n,e,t){if(!t)throw new se(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $R(n,e,t,i){if(e===!0&&i===!0)throw new se(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uv(n){if(!ye.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cv(n){if(ye.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zc(n);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Dl(n,e){if(!Vw(n))throw new se(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=-62135596800,dv=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*dv);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hv)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:gt("string",Xe._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Xe(0,0))}static max(){return new Re(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;function qR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Mi(o,ye.empty(),e)}function HR(n){return new Mi(n.readTime,n.key,gl)}class Mi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mi(Re.min(),ye.empty(),gl)}static max(){return new Mi(Re.max(),ye.empty(),gl)}}function WR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==GR)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,l=0,h=!1;e.forEach((d=>{++o,d.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((y=>{h[v]=y,++d,d===l&&i(h)}),(y=>o(y)))}}))}static doWhile(e,t){return new K(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function QR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ea(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}eh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-1;function th(n){return n==null}function kc(n){return n===0&&1/n==-1/0}function XR(n){return typeof n=="number"&&Number.isInteger(n)&&!kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="";function JR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fv(e)),e=YR(n.get(t),e);return fv(e)}function YR(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Lw:t+="";break;default:t+=l}}return t}function fv(n){return n+Lw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Mw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=l??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(e){return new mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new _n([])}unionWith(e){let t=new Tt(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jw("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const ZR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=ZR.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ui(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="server_timestamp",Fw="__type__",zw="__previous_value__",Bw="__local_write_time__";function gp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fw])===null||t===void 0?void 0:t.stringValue)===Uw}function nh(n){const e=n.mapValue.fields[zw];return gp(e)?nh(e):e}function yl(n){const e=ji(n.mapValue.fields[Bw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,i,o,l,h,d,p,v,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=y}}const Nc="(default)";class vl{constructor(e,t){this.projectId=e,this.database=t||Nc}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database===Nc}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="__type__",tC="__max__",ic={mapValue:{}},qw="__vector__",xc="value";function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gp(n)?4:rC(n)?9007199254740991:nC(n)?10:11:Ee(28295,{value:n})}function Er(n,e){if(n===e)return!0;const t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yl(n).isEqual(yl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ji(o.timestampValue),d=ji(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ui(o.bytesValue).isEqual(Ui(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),d=ut(l.doubleValue);return h===d?kc(h)===kc(d):isNaN(h)&&isNaN(d)}return!1})(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(pv(h)!==pv(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!Er(h[p],d[p])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function _l(n,e){return(n.values||[]).find((t=>Er(t,e)))!==void 0}function $o(n,e){if(n===e)return 0;const t=Fi(n),i=Fi(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const d=ut(l.integerValue||l.doubleValue),p=ut(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return gv(n.timestampValue,e.timestampValue);case 4:return gv(yl(n),yl(e));case 5:return Sf(n.stringValue,e.stringValue);case 6:return(function(l,h){const d=Ui(l),p=Ui(h);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const d=l.split("/"),p=h.split("/");for(let v=0;v<d.length&&v<p.length;v++){const y=Pe(d[v],p[v]);if(y!==0)return y}return Pe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const d=Pe(ut(l.latitude),ut(h.latitude));return d!==0?d:Pe(ut(l.longitude),ut(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return yv(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var d,p,v,y;const I=l.fields||{},S=h.fields||{},k=(d=I[xc])===null||d===void 0?void 0:d.arrayValue,z=(p=S[xc])===null||p===void 0?void 0:p.arrayValue,H=Pe(((v=k==null?void 0:k.values)===null||v===void 0?void 0:v.length)||0,((y=z==null?void 0:z.values)===null||y===void 0?void 0:y.length)||0);return H!==0?H:yv(k,z)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===ic.mapValue&&h===ic.mapValue)return 0;if(l===ic.mapValue)return 1;if(h===ic.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),v=h.fields||{},y=Object.keys(v);p.sort(),y.sort();for(let I=0;I<p.length&&I<y.length;++I){const S=Sf(p[I],y[I]);if(S!==0)return S;const k=$o(d[p[I]],v[y[I]]);if(k!==0)return k}return Pe(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function gv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=ji(n),i=ji(e),o=Pe(t.seconds,i.seconds);return o!==0?o:Pe(t.nanos,i.nanos)}function yv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=$o(t[o],i[o]);if(l)return l}return Pe(t.length,i.length)}function qo(n){return Af(n)}function Af(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ji(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ui(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Af(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Af(t.fields[h])}`;return o+"}"})(n.mapValue):Ee(61005,{value:n})}function mc(n){switch(Fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nh(n);return e?16+mc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ui(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+mc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Hi(i.fields,((l,h)=>{o+=l.length+mc(h)})),o})(n.mapValue);default:throw Ee(13486,{value:n})}}function vv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rf(n){return!!n&&"integerValue"in n}function yp(n){return!!n&&"arrayValue"in n}function _v(n){return!!n&&"nullValue"in n}function wv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gc(n){return!!n&&"mapValue"in n}function nC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[$w])===null||t===void 0?void 0:t.stringValue)===qw}function al(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=al(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=al(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach(((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=al(h):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];gc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Hi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new un(al(this.value))}}function Hw(n){const e=[];return Hi(n.fields,((t,i)=>{const o=new Lt([t]);if(gc(i)){const l=Hw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ht(e,0,Re.min(),Re.min(),Re.min(),un.empty(),0)}static newFoundDocument(e,t,i,o){return new Ht(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,Re.min(),Re.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,Re.min(),Re.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function Ev(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=$o(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Er(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function iC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class mt extends Ww{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new oC(e,t,i):t==="array-contains"?new uC(e,i):t==="in"?new cC(e,i):t==="not-in"?new hC(e,i):t==="array-contains-any"?new dC(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new aC(e,i):new lC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($o(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends Ww{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Zn(e,t)}matches(e){return Gw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Gw(n){return n.op==="and"}function Kw(n){return sC(n)&&Gw(n)}function sC(n){for(const e of n.filters)if(e instanceof Zn)return!1;return!0}function Cf(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(Kw(n))return n.filters.map((e=>Cf(e))).join(",");{const e=n.filters.map((t=>Cf(t))).join(",");return`${n.op}(${e})`}}function Qw(n,e){return n instanceof mt?(function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&Er(i.value,o.value)})(n,e):n instanceof Zn?(function(i,o){return o instanceof Zn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,d)=>l&&Qw(h,o.filters[d])),!0):!1})(n,e):void Ee(19439)}function Xw(n){return n instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(n):n instanceof Zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xw).join(" ,")+"}"})(n):"Filter"}class oC extends mt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class aC extends mt{constructor(e,t){super(e,"in",t),this.keys=Jw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lC extends mt{constructor(e,t){super(e,"not-in",t),this.keys=Jw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class uC extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&_l(t.arrayValue,this.value)}}class cC extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_l(this.value.arrayValue,t)}}class hC extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_l(this.value.arrayValue,t)}}class dC extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>_l(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.Pe=null}}function Iv(n,e=null,t=[],i=[],o=null,l=null,h=null){return new fC(n,e,t,i,o,l,h)}function vp(n){const e=Ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Cf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>qo(i))).join(",")),e.Pe=t}return e.Pe}function _p(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tv(n.startAt,e.startAt)&&Tv(n.endAt,e.endAt)}function Pf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function pC(n,e,t,i,o,l,h,d){return new bl(n,e,t,i,o,l,h,d)}function wp(n){return new bl(n)}function Sv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Yw(n){return n.collectionGroup!==null}function ll(n){const e=Ce(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Tt(Lt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(d=d.add(v.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new bc(l,i))})),t.has(Lt.keyField().canonicalString())||e.Te.push(new bc(Lt.keyField(),i))}return e.Te}function mr(n){const e=Ce(n);return e.Ie||(e.Ie=mC(e,ll(n))),e.Ie}function mC(n,e){if(n.limitType==="F")return Iv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new bc(o.field,l)}));const t=n.endAt?new Dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Dc(n.startAt.position,n.startAt.inclusive):null;return Iv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function kf(n,e){const t=n.filters.concat([e]);return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nf(n,e,t){return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rh(n,e){return _p(mr(n),mr(e))&&n.limitType===e.limitType}function Zw(n){return`${vp(mr(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Xw(o))).join(", ")}]`),th(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${i})`})(mr(n))}; limitType=${n.limitType})`}function ih(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ll(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,d,p){const v=Ev(h,d,p);return h.inclusive?v<=0:v<0})(i.startAt,ll(i),o)||i.endAt&&!(function(h,d,p){const v=Ev(h,d,p);return h.inclusive?v>=0:v>0})(i.endAt,ll(i),o))})(n,e)}function gC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eE(n){return(e,t)=>{let i=!1;for(const o of ll(n)){const l=yC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function yC(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,d){const p=h.data.field(l),v=d.data.field(l);return p!==null&&v!==null?$o(p,v):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new rt(ye.comparator);function Qr(){return vC}const tE=new rt(ye.comparator);function nl(...n){let e=tE;for(const t of n)e=e.insert(t.key,t);return e}function nE(n){let e=tE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Cs(){return ul()}function rE(){return ul()}function ul(){return new Ls((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _C=new rt(ye.comparator),wC=new Tt(ye.comparator);function De(...n){let e=wC;for(const t of n)e=e.add(t);return e}const EC=new Tt(Pe);function TC(){return EC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function iE(n){return{integerValue:""+n}}function IC(n,e){return XR(e)?iE(e):Ep(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function SC(n,e,t){return n instanceof wl?(function(o,l){const h={fields:{[Fw]:{stringValue:Uw},[Bw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&gp(l)&&(l=nh(l)),l&&(h.fields[zw]=l),{mapValue:h}})(t,e):n instanceof El?oE(n,e):n instanceof Tl?aE(n,e):(function(o,l){const h=sE(o,l),d=Av(h)+Av(o.Ee);return Rf(h)&&Rf(o.Ee)?iE(d):Ep(o.serializer,d)})(n,e)}function AC(n,e,t){return n instanceof El?oE(n,e):n instanceof Tl?aE(n,e):t}function sE(n,e){return n instanceof Oc?(function(i){return Rf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class wl extends sh{}class El extends sh{constructor(e){super(),this.elements=e}}function oE(n,e){const t=lE(e);for(const i of n.elements)t.some((o=>Er(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Tl extends sh{constructor(e){super(),this.elements=e}}function aE(n,e){let t=lE(e);for(const i of n.elements)t=t.filter((o=>!Er(o,i)));return{arrayValue:{values:t}}}class Oc extends sh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Av(n){return ut(n.integerValue||n.doubleValue)}function lE(n){return yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.field=e,this.transform=t}}function CC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof El&&o instanceof El||i instanceof Tl&&o instanceof Tl?Bo(i.elements,o.elements,Er):i instanceof Oc&&o instanceof Oc?Er(i.Ee,o.Ee):i instanceof wl&&o instanceof wl})(n.transform,e.transform)}class PC{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class oh{}function uE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tp(n.key,Yn.none()):new Ol(n.key,n.data,Yn.none());{const t=n.data,i=un.empty();let o=new Tt(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Wi(n.key,i,new _n(o.toArray()),Yn.none())}}function kC(n,e,t){n instanceof Ol?(function(o,l,h){const d=o.value.clone(),p=Cv(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Wi?(function(o,l,h){if(!yc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Cv(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(cE(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function cl(n,e,t,i){return n instanceof Ol?(function(l,h,d,p){if(!yc(l.precondition,h))return d;const v=l.value.clone(),y=Pv(l.fieldTransforms,p,h);return v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(n,e,t,i):n instanceof Wi?(function(l,h,d,p){if(!yc(l.precondition,h))return d;const v=Pv(l.fieldTransforms,p,h),y=h.data;return y.setAll(cE(l)),y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(n,e,t,i):(function(l,h,d){return yc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d})(n,e,t)}function NC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=sE(i.transform,o||null);l!=null&&(t===null&&(t=un.empty()),t.set(i.field,l))}return t||null}function Rv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Bo(i,o,((l,h)=>CC(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends oh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wi extends oh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Cv(n,e,t){const i=new Map;Fe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,AC(h,d,t[o]))}return i}function Pv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,SC(l,h,e))}return i}class Tp extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xC extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&kC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=rE();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=uE(h,d);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,i)=>Rv(t,i)))&&Bo(this.baseMutations,e.baseMutations,((t,i)=>Rv(t,i)))}}class Ip{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return _C})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Ip(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Me;function VC(n){switch(n){case G.OK:return Ee(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function hE(n){if(n===void 0)return Kr("GRPC error has no .code"),G.UNKNOWN;switch(n){case pt.OK:return G.OK;case pt.CANCELLED:return G.CANCELLED;case pt.UNKNOWN:return G.UNKNOWN;case pt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case pt.INTERNAL:return G.INTERNAL;case pt.UNAVAILABLE:return G.UNAVAILABLE;case pt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case pt.NOT_FOUND:return G.NOT_FOUND;case pt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case pt.ABORTED:return G.ABORTED;case pt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case pt.DATA_LOSS:return G.DATA_LOSS;default:return Ee(39323,{code:n})}}(Me=pt||(pt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new bi([4294967295,4294967295],0);function kv(n){const e=bw().encode(n),t=new Aw;return t.update(e),new Uint8Array(t.digest())}function Nv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new bi([t,i],0),new bi([o,l],0)]}class Sp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new rl(`Invalid padding: ${t}`);if(i<0)throw new rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new rl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=bi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(bi.fromNumber(i)));return o.compare(LC)===1&&(o=new bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=kv(e),[i,o]=Nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Sp(l,o,t);return i.forEach((d=>h.insert(d))),h}insert(e){if(this.fe===0)return;const t=kv(e),[i,o]=Nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Vl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ah(Re.min(),o,new rt(Pe),Qr(),De())}}class Vl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vl(i,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class dE{constructor(e,t){this.targetId=e,this.De=t}}class fE{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class xv{constructor(){this.ve=0,this.Ce=Dv(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),i=De();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ee(38017,{changeType:l})}})),new Vl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Dv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class MC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qr(),this.je=sc(),this.Je=sc(),this.He=new rt(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Pf(l))if(i===0){const h=new ye(l.path);this.Xe(t,h,Ht.newNoDocument(h,Re.min()))}else Fe(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const d=this._t(e),p=d?this.ut(d,e,h):1;if(p!==0){this.rt(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ui(i).toUint8Array()}catch(p){if(p instanceof jw)return Li("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Sp(h,o,l)}catch(p){return Li(p instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const d=this.st(h);if(d){if(l.current&&Pf(d.target)){const p=new ye(d.target.path);this.Tt(p).has(h)||this.It(h,p)||this.Xe(h,p,Ht.newNoDocument(p,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=De();this.Je.forEach(((l,h)=>{let d=!0;h.forEachWhile((p=>{const v=this.st(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new ah(e,t,this.He,this.ze,i);return this.ze=Qr(),this.je=sc(),this.Je=sc(),this.He=new rt(Pe),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new xv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Tt(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Tt(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new xv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function sc(){return new rt(ye.comparator)}function Dv(){return new rt(ye.comparator)}const jC={asc:"ASCENDING",desc:"DESCENDING"},UC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FC={and:"AND",or:"OR"};class zC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xf(n,e){return n.useProto3Json||th(e)?e:{value:e}}function Vc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function BC(n,e){return Vc(n,e.toTimestamp())}function gr(n){return Fe(!!n,49232),Re.fromTimestamp((function(t){const i=ji(t);return new Xe(i.seconds,i.nanos)})(n))}function Ap(n,e){return Df(n,e).canonicalString()}function Df(n,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mE(n){const e=Ge.fromString(n);return Fe(wE(e),10190,{key:e.toString()}),e}function bf(n,e){return Ap(n.databaseId,e.path)}function nf(n,e){const t=mE(e);if(t.get(1)!==n.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(yE(t))}function gE(n,e){return Ap(n.databaseId,e)}function $C(n){const e=mE(n);return e.length===4?Ge.emptyPath():yE(e)}function Of(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yE(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bv(n,e,t){return{name:bf(n,e),fields:t.value.mapValue.fields}}function qC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,y){return v.useProto3Json?(Fe(y===void 0||typeof y=="string",58123),Mt.fromBase64String(y||"")):(Fe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Mt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&(function(v){const y=v.code===void 0?G.UNKNOWN:hE(v.code);return new se(y,v.message||"")})(h);t=new fE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=nf(n,i.document.name),l=gr(i.document.updateTime),h=i.document.createTime?gr(i.document.createTime):Re.min(),d=new un({mapValue:{fields:i.document.fields}}),p=Ht.newFoundDocument(o,l,h,d),v=i.targetIds||[],y=i.removedTargetIds||[];t=new vc(v,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=nf(n,i.document),l=i.readTime?gr(i.readTime):Re.min(),h=Ht.newNoDocument(o,l),d=i.removedTargetIds||[];t=new vc([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=nf(n,i.document),l=i.removedTargetIds||[];t=new vc([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new OC(o,l),d=i.targetId;t=new dE(d,h)}}return t}function HC(n,e){let t;if(e instanceof Ol)t={update:bv(n,e.key,e.value)};else if(e instanceof Tp)t={delete:bf(n,e.key)};else if(e instanceof Wi)t={update:bv(n,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof xC))return Ee(16599,{Rt:e.type});t={verify:bf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const d=h.transform;if(d instanceof wl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof El)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Tl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Oc)return{fieldPath:h.field.canonicalString(),increment:d.Ee};throw Ee(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:BC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function WC(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?gr(o.updateTime):gr(l);return h.isEqual(Re.min())&&(h=gr(l)),new PC(h,o.transformResults||[])})(t,e)))):[]}function GC(n,e){return{documents:[gE(n,e.path)]}}function KC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gE(n,o);const l=(function(v){if(v.length!==0)return _E(Zn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((y=>(function(S){return{field:Oo(S.field),direction:JC(S.dir)}})(y)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=xf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function QC(n){let e=$C(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Fe(i===1,65062);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(I){const S=vE(I);return S instanceof Zn&&Kw(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((S=>(function(z){return new bc(Vo(z.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(I){let S;return S=typeof I=="object"?I.value:I,th(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(I){const S=!!I.before,k=I.values||[];return new Dc(k,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const S=!I.before,k=I.values||[];return new Dc(k,S)})(t.endAt)),pC(e,o,h,l,d,"F",p,v)}function XC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Vo(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Vo(t.unaryFilter.field);return mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Vo(t.unaryFilter.field);return mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mt.create(Vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zn.create(t.compositeFilter.filters.map((i=>vE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function JC(n){return jC[n]}function YC(n){return UC[n]}function ZC(n){return FC[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function Vo(n){return Lt.fromServerFormat(n.fieldPath)}function _E(n){return n instanceof mt?(function(t){if(t.op==="=="){if(wv(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(_v(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wv(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(_v(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:YC(t.op),value:t.value}}})(n):n instanceof Zn?(function(t){const i=t.getFilters().map((o=>_E(o)));return i.length===1?i[0]:{compositeFilter:{op:ZC(t.op),filters:i}}})(n):Ee(54877,{filter:n})}function eP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,i,o,l=Re.min(),h=Re.min(),d=Mt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.gt=e}}function nP(n){const e=QC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.Dn=new iP}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Mi.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class iP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Tt(Ge.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Tt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EE=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(EE,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ho(0)}static ur(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",sP=1048576;function Lv([n,e],[t,i]){const o=Pe(n,t);return o===0?Pe(e,i):o}class oP{constructor(e){this.Tr=e,this.buffer=new Tt(Lv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Lv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(Vv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ea(t)?ce(Vv,"Ignoring IndexedDB error during garbage collection: ",t):await Zo(t)}await this.Rr(3e5)}))}}class lP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(eh.ue);const i=new oP(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Ov)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,d,p,v;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,d=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),Do()<=xe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-y}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function uP(n,e){return new lP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.changes=new Ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&cl(i.mutation,o,_n.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,De()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=De()){const o=Cs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=nl();return l.forEach(((d,p)=>{h=h.insert(d,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Cs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,De())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,d)=>{t.set(h,d)}))}))}computeViews(e,t,i,o){let l=Qr();const h=ul(),d=(function(){return ul()})();return t.forEach(((p,v)=>{const y=i.get(v.key);o.has(v.key)&&(y===void 0||y.mutation instanceof Wi)?l=l.insert(v.key,v):y!==void 0?(h.set(v.key,y.mutation.getFieldMask()),cl(y.mutation,v,y.mutation.getFieldMask(),Xe.now())):h.set(v.key,_n.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,y)=>h.set(v,y))),t.forEach(((v,y)=>{var I;return d.set(v,new hP(y,(I=h.get(v))!==null&&I!==void 0?I:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=ul();let o=new rt(((h,d)=>h-d)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const d of h)d.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let y=i.get(p)||_n.empty();y=d.applyToLocalView(v,y),i.set(p,y);const I=(o.get(d.batchId)||De()).add(p);o=o.insert(d.batchId,I)}))})).next((()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,y=p.value,I=rE();y.forEach((S=>{if(!l.has(S)){const k=uE(t.get(S),i.get(S));k!==null&&I.set(S,k),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return K.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(Cs());let d=gl,p=l;return h.next((v=>K.forEach(v,((y,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),l.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{p=p.insert(y,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,De()))).next((y=>({batchId:d,changes:nE(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=nl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=nl();return this.indexManager.getCollectionParents(e,l).next((d=>K.forEach(d,(p=>{const v=(function(I,S){return new bl(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((y=>{y.forEach(((I,S)=>{h=h.insert(I,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,v)=>{const y=v.getKey();h.get(y)===null&&(h=h.insert(y,Ht.newInvalidDocument(y)))}));let d=nl();return h.forEach(((p,v)=>{const y=l.get(p);y!==void 0&&cl(y.mutation,v,_n.empty(),Xe.now()),ih(t,v)&&(d=d.insert(p,v))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:nP(o.bundledQuery),readTime:gr(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.overlays=new rt(ye.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Cs();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=Cs(),l=t.length+1,h=new ye(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new rt(((v,y)=>v-y));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let y=l.get(v.largestBatchId);y===null&&(y=Cs(),l=l.insert(v.largestBatchId,y)),y.set(v.getKey(),v)}}const d=Cs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,y)=>d.set(v,y))),!(d.size()>=o)););return K.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new bC(t,i));let l=this.kr.get(t);l===void 0&&(l=De(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.qr=new Tt(Nt.Qr),this.$r=new Tt(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Nt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Nt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ye(new Ge([])),i=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ye(new Ge([])),i=new Nt(t,e),o=new Nt(t,e+1);let l=De();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Nt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ye.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Tt(Nt.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new DC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.Yr=this.Yr.add(new Nt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?mp:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const d=this.Zr(h.Hr);l.push(d)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tt(Pe);return t.forEach((o=>{const l=new Nt(o,0),h=new Nt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(d=>{i=i.add(d.Hr)}))})),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new Nt(new ye(l),0);let d=new Tt(Pe);return this.Yr.forEachWhile((p=>{const v=p.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(d=d.add(p.Hr)),!0)}),h),K.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Fe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Nt(t,0),o=this.Yr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.ni=e,this.docs=(function(){return new rt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=Qr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ht.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Qr();const h=t.path,d=new ye(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:y}}=p.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||WR(HR(y),i)<=0||(o.has(y.key)||ih(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ee(9500)}ri(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vP(this)}getSize(e){return K.resolve(this.size)}}class vP extends cP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.persistence=e,this.ii=new Ls((t=>vp(t)),_p),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new Rp,this.targetCount=0,this._i=Ho.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t){this.ai={},this.overlays={},this.ui=new eh(0),this.ci=!1,this.ci=!0,this.li=new mP,this.referenceDelegate=e(this),this.hi=new _P(this),this.indexManager=new rP,this.remoteDocumentCache=(function(o){return new yP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new tP(t),this.Ti=new fP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new gP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new wP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class wP extends KR{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ai=new Rp,this.Ri=null}static Vi(e){return new Cp(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,(i=>{const o=ye.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Lc{constructor(e,t){this.persistence=e,this.gi=new Ls((i=>JR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=uP(this,t)}static Vi(e,t){return new Lc(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return K.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((d=>{d||(i++,l.removeEntry(h,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mc(e.data.value)),t}Sr(e,t,i){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=De(),o=De();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Pp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return gS()?8:QR(Wt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new EP;return this.ws(e,t,h).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,h,d.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Do()<=xe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Do()<=xe.DEBUG&&ce("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Do()<=xe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(t))):K.resolve())}ps(e,t){if(Sv(t))return K.resolve(null);let i=mr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Nf(t,null,"F"),i=mr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=De(...l);return this.gs.getDocuments(e,h).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const v=this.bs(t,d);return this.Ds(t,v,h,p.readTime)?this.ps(e,Nf(t,null,"F")):this.vs(e,v,t,p)}))))})))))}ys(e,t,i,o){return Sv(t)||o.isEqual(Re.min())?K.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?K.resolve(null):(Do()<=xe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,h,t,qR(o,gl)).next((d=>d)))}))}bs(e,t){let i=new Tt(eE(e));return t.forEach(((o,l)=>{ih(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Do()<=xe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,Mi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="LocalStore",IP=3e8;class SP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new rt(Pe),this.Ms=new Ls((l=>vp(l)),_p),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function AP(n,e,t,i){return new SP(n,e,t,i)}async function IE(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],d=[];let p=De();for(const v of o){h.push(v.batchId);for(const y of v.mutations)p=p.add(y.key)}for(const v of l){d.push(v.batchId);for(const y of v.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(i,p).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:d})))}))}))}function RP(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,v,y){const I=v.batch,S=I.keys();let k=K.resolve();return S.forEach((z=>{k=k.next((()=>y.getEntry(p,z))).next((H=>{const x=v.docVersions.get(z);Fe(x!==null,48541),H.version.compareTo(x)<0&&(I.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),y.addEntry(H)))}))})),k.next((()=>d.mutationQueue.removeMutationBatch(p,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=De();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function SE(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function CP(n,e){const t=Ce(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((y,I)=>{const S=o.get(I);if(!S)return;d.push(t.hi.removeMatchingKeys(l,y.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,y.addedDocuments,I))));let k=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?k=k.withResumeToken(Mt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,i)),o=o.insert(I,k),(function(H,x,$){return H.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=IP?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,k,y)&&d.push(t.hi.updateTargetData(l,k))}));let p=Qr(),v=De();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(PP(l,h,e.documentUpdates).next((y=>{p=y.Ls,v=y.ks}))),!i.isEqual(Re.min())){const y=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(y)}return K.waitFor(d).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function PP(n,e,t){let i=De(),o=De();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=Qr();return t.forEach(((d,p)=>{const v=l.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):ce(kp,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)})),{Ls:h,ks:o}}))}function kP(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=mp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function NP(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,K.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new Pi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Vf(n,e,t){const i=Ce(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ea(h))throw h;ce(kp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Mv(n,e,t){const i=Ce(n);let o=Re.min(),l=De();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,v,y){const I=Ce(p),S=I.Ms.get(y);return S!==void 0?K.resolve(I.Fs.get(S)):I.hi.getTargetData(v,y)})(i,h,mr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?l:De()))).next((d=>(xP(i,gC(e),d),{documents:d,qs:l})))))}function xP(n,e,t){let i=n.xs.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class jv{constructor(){this.activeTargetIds=TC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DP{constructor(){this.Fo=new jv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class Fv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function Lf(){return oc===null?oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="RestConnection",OP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Nc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Lf(),d=this.Go(e,t.toUriEncodedString());ce(rf,`Sending RPC '${e}' ${h}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:v}=new URL(d),y=Xr(v);return this.jo(e,d,p,i,y).then((I=>(ce(rf,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Li(rf,`RPC '${e}' ${h} failed with error: `,I,"url: ",d,"request:",i),I}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=OP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class MP extends VP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=Lf();return new Promise(((d,p)=>{const v=new Rw;v.setWithCredentials(!0),v.listenOnce(Cw.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case pc.NO_ERROR:const I=v.getResponseJson();ce(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),d(I);break;case pc.TIMEOUT:ce(Bt,`RPC '${e}' ${h} timed out`),p(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const S=v.getStatus();if(ce(Bt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let k=v.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const H=(function($){const Z=$.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Z)>=0?Z:G.UNKNOWN})(z.status);p(new se(H,z.message))}else p(new se(G.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new se(G.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ce(Bt,`RPC '${e}' ${h} completed.`)}}));const y=JSON.stringify(o);ce(Bt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",y,i,15)}))}P_(e,t,i){const o=Lf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Nw(),d=kw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=l.join("");ce(Bt,`Creating RPC '${e}' stream ${o}: ${y}`,p);const I=h.createWebChannel(y,p);this.T_(I);let S=!1,k=!1;const z=new LP({Ho:x=>{k?ce(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,x):(S||(ce(Bt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),ce(Bt,`RPC '${e}' stream ${o} sending:`,x),I.send(x))},Yo:()=>I.close()}),H=(x,$,Z)=>{x.listen($,(te=>{try{Z(te)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return H(I,tl.EventType.OPEN,(()=>{k||(ce(Bt,`RPC '${e}' stream ${o} transport opened.`),z.s_())})),H(I,tl.EventType.CLOSE,(()=>{k||(k=!0,ce(Bt,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(I))})),H(I,tl.EventType.ERROR,(x=>{k||(k=!0,Li(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,x.name,"Message:",x.message),z.__(new se(G.UNAVAILABLE,"The operation could not be completed")))})),H(I,tl.EventType.MESSAGE,(x=>{var $;if(!k){const Z=x.data[0];Fe(!!Z,16349);const te=Z,oe=(te==null?void 0:te.error)||(($=te[0])===null||$===void 0?void 0:$.error);if(oe){ce(Bt,`RPC '${e}' stream ${o} received error:`,oe);const Te=oe.status;let Ae=(function(R){const b=pt[R];if(b!==void 0)return hE(b)})(Te),D=oe.message;Ae===void 0&&(Ae=G.INTERNAL,D="Unknown error status: "+Te+" with message "+oe.message),k=!0,z.__(new se(Ae,D)),I.close()}else ce(Bt,`RPC '${e}' stream ${o} received:`,Z),z.a_(Z)}})),H(d,Pw.STAT_EVENT,(x=>{x.stat===If.PROXY?ce(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):x.stat===If.NOPROXY&&ce(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n){return new zC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="PersistentStream";class RE{constructor(e,t,i,o,l,h,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new AE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new se(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ce(zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ce(zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jP extends RE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=qC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?gr(h.readTime):Re.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Of(this.serializer),t.addTarget=(function(l,h){let d;const p=h.target;if(d=Pf(p)?{documents:GC(l,p)}:{query:KC(l,p).Vt},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=pE(l,h.resumeToken);const v=xf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}else if(h.snapshotVersion.compareTo(Re.min())>0){d.readTime=Vc(l,h.snapshotVersion.toTimestamp());const v=xf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}return d})(this.serializer,e);const i=XC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Of(this.serializer),t.removeTarget=e,this.k_(t)}}class UP extends RE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WC(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Of(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>HC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{}class zP extends FP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Df(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(G.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Jo(e,Df(t,i),o,h,d,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new se(G.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class BP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Kr(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="RemoteStore";class $P{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{Ms(this)&&(ce(bs,"Restarting streams for network reachability change."),await(async function(p){const v=Ce(p);v.Ia.add(4),await Ll(v),v.Aa.set("Unknown"),v.Ia.delete(4),await uh(v)})(this))}))})),this.Aa=new BP(i,o)}}async function uh(n){if(Ms(n))for(const e of n.da)await e(!0)}async function Ll(n){for(const e of n.da)await e(!1)}function CE(n,e){const t=Ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),bp(t)?Dp(t):ta(t).x_()&&xp(t,e))}function Np(n,e){const t=Ce(n),i=ta(t);t.Ta.delete(e),i.x_()&&PE(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ms(t)&&t.Aa.set("Unknown"))}function xp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(n).H_(e)}function PE(n,e){n.Ra.$e(e),ta(n).Y_(e)}function Dp(n){n.Ra=new MC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ta(n).start(),n.Aa.aa()}function bp(n){return Ms(n)&&!ta(n).M_()&&n.Ta.size>0}function Ms(n){return Ce(n).Ia.size===0}function kE(n){n.Ra=void 0}async function qP(n){n.Aa.set("Online")}async function HP(n){n.Ta.forEach(((e,t)=>{xp(n,e)}))}async function WP(n,e){kE(n),bp(n)?(n.Aa.la(e),Dp(n)):n.Aa.set("Unknown")}async function GP(n,e,t){if(n.Aa.set("Online"),e instanceof fE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){ce(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mc(n,i)}else if(e instanceof vc?n.Ra.Ye(e):e instanceof dE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{const i=await SE(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const d=l.Ra.Pt(h);return d.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.Ta.get(v);y&&l.Ta.set(v,y.withResumeToken(p.resumeToken,h))}})),d.targetMismatches.forEach(((p,v)=>{const y=l.Ta.get(p);if(!y)return;l.Ta.set(p,y.withResumeToken(Mt.EMPTY_BYTE_STRING,y.snapshotVersion)),PE(l,p);const I=new Pi(y.target,p,v,y.sequenceNumber);xp(l,I)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ce(bs,"Failed to raise snapshot:",i),await Mc(n,i)}}async function Mc(n,e,t){if(!ea(e))throw e;n.Ia.add(1),await Ll(n),n.Aa.set("Offline"),t||(t=()=>SE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(bs,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await uh(n)}))}function NE(n,e){return e().catch((t=>Mc(n,t,e)))}async function ch(n){const e=Ce(n),t=zi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mp;for(;KP(e);)try{const o=await kP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,QP(e,o)}catch(o){await Mc(e,o)}xE(e)&&DE(e)}function KP(n){return Ms(n)&&n.Pa.length<10}function QP(n,e){n.Pa.push(e);const t=zi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function xE(n){return Ms(n)&&!zi(n).M_()&&n.Pa.length>0}function DE(n){zi(n).start()}async function XP(n){zi(n).na()}async function JP(n){const e=zi(n);for(const t of n.Pa)e.X_(t.mutations)}async function YP(n,e,t){const i=n.Pa.shift(),o=Ip.from(i,e,t);await NE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ch(n)}async function ZP(n,e){e&&zi(n).Z_&&await(async function(i,o){if((function(h){return VC(h)&&h!==G.ABORTED})(o.code)){const l=i.Pa.shift();zi(i).N_(),await NE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await ch(i)}})(n,e),xE(n)&&DE(n)}async function Bv(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),ce(bs,"RemoteStore received new credentials");const i=Ms(t);t.Ia.add(3),await Ll(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await uh(t)}async function ek(n,e){const t=Ce(n);e?(t.Ia.delete(2),await uh(t)):e||(t.Ia.add(2),await Ll(t),t.Aa.set("Unknown"))}function ta(n){return n.Va||(n.Va=(function(t,i,o){const l=Ce(t);return l.ia(),new jP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:qP.bind(null,n),e_:HP.bind(null,n),n_:WP.bind(null,n),J_:GP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),bp(n)?Dp(n):n.Aa.set("Unknown")):(await n.Va.stop(),kE(n))}))),n.Va}function zi(n){return n.ma||(n.ma=(function(t,i,o){const l=Ce(t);return l.ia(),new UP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XP.bind(null,n),n_:ZP.bind(null,n),ea:JP.bind(null,n),ta:YP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await ch(n)):(await n.ma.stop(),n.Pa.length>0&&(ce(bs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new Op(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),ea(n))return new se(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=nl(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.fa=new rt(ye.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wo{constructor(e,t,i,o,l,h,d,p,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((d=>{h.push({type:0,doc:d})})),new Wo(e,t,Uo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class nk{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ce(t),l=o.queries;o.queries=qv(),l.forEach(((h,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new se(G.ABORTED,"Firestore shutting down"))}}function qv(){return new Ls((n=>Zw(n)),rh)}async function bE(n,e){const t=Ce(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new tk,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Vp(h,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Lp(t)}async function OE(n,e){const t=Ce(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function rk(n,e){const t=Ce(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.wa)d.Ca(o)&&(i=!0);h.ya=o}}i&&Lp(t)}function ik(n,e,t){const i=Ce(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function Lp(n){n.Da.forEach((e=>{e.next()}))}var Mf,Hv;(Hv=Mf||(Mf={})).Fa="default",Hv.Cache="cache";class VE{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class sk{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=eE(e),this.eu=new Uo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new $v,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,I)=>{const S=o.get(y),k=ih(this.query,I)?I:null,z=!!S&&this.mutatedKeys.has(S.key),H=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let x=!1;S&&k?S.data.isEqual(k.data)?z!==H&&(i.track({type:3,doc:k}),x=!0):this.iu(S,k)||(i.track({type:2,doc:k}),x=!0,(p&&this.Xa(k,p)>0||v&&this.Xa(k,v)<0)&&(d=!0)):!S&&k?(i.track({type:0,doc:k}),x=!0):S&&!k&&(i.track({type:1,doc:S}),x=!0,(p||v)&&(d=!0)),x&&(k?(h=h.add(k),l=H?l.add(y):l.delete(y)):(h=h.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const y=this.query.limitType==="F"?h.last():h.first();h=h.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{eu:h,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((y,I)=>(function(k,z){const H=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:x})}};return H(k)-H(z)})(y.type,I.type)||this.Xa(y.doc,I.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,v=p!==this.Ya;return this.Ya=p,h.length!==0||v?{snapshot:new Wo(this.query,e.eu,l,h,e.mutatedKeys,p===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $v,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=De(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new ME(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new LE(i))})),t}uu(e){this.Ha=e.qs,this.Za=De();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Mp="SyncEngine";class ok{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ak{constructor(e){this.key=e,this.lu=!1}}class lk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Ls((d=>Zw(d)),rh),this.Tu=new Map,this.Iu=new Set,this.du=new rt(ye.comparator),this.Eu=new Map,this.Au=new Rp,this.Ru={},this.Vu=new Map,this.mu=Ho.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function uk(n,e,t=!0){const i=$E(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await jE(i,e,t,!0),o}async function ck(n,e){const t=$E(n);await jE(t,e,!0,!1)}async function jE(n,e,t,i){const o=await NP(n.localStore,mr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await hk(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&CE(n.remoteStore,o),d}async function hk(n,e,t,i,o){n.gu=(I,S,k)=>(async function(H,x,$,Z){let te=x.view.nu($);te.Ds&&(te=await Mv(H.localStore,x.query,!1).then((({documents:D})=>x.view.nu(D,te))));const oe=Z&&Z.targetChanges.get(x.targetId),Te=Z&&Z.targetMismatches.get(x.targetId)!=null,Ae=x.view.applyChanges(te,H.isPrimaryClient,oe,Te);return Gv(H,x.targetId,Ae._u),Ae.snapshot})(n,I,S,k);const l=await Mv(n.localStore,e,!0),h=new sk(e,l.qs),d=h.nu(l.documents),p=Vl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),v=h.applyChanges(d,n.isPrimaryClient,p);Gv(n,t,v._u);const y=new ok(e,t,h);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),v.snapshot}async function dk(n,e,t){const i=Ce(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!rh(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Vf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Np(i.remoteStore,o.targetId),jf(i,o.targetId)})).catch(Zo)):(jf(i,o.targetId),await Vf(i.localStore,o.targetId,!0))}async function fk(n,e){const t=Ce(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Np(t.remoteStore,i.targetId))}async function pk(n,e,t){const i=Ek(n);try{const o=await(function(h,d){const p=Ce(h),v=Xe.now(),y=d.reduce(((k,z)=>k.add(z.key)),De());let I,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let z=Qr(),H=De();return p.Os.getEntries(k,y).next((x=>{z=x,z.forEach((($,Z)=>{Z.isValidDocument()||(H=H.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(k,z))).next((x=>{I=x;const $=[];for(const Z of d){const te=NC(Z,I.get(Z.key).overlayedDocument);te!=null&&$.push(new Wi(Z.key,te,Hw(te.value.mapValue),Yn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,v,$,d)})).next((x=>{S=x;const $=x.applyToLocalDocumentSet(I,H);return p.documentOverlayCache.saveOverlays(k,x.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:nE(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,d,p){let v=h.Ru[h.currentUser.toKey()];v||(v=new rt(Pe)),v=v.insert(d,p),h.Ru[h.currentUser.toKey()]=v})(i,o.batchId,t),await Ml(i,o.changes),await ch(i.remoteStore)}catch(o){const l=Vp(o,"Failed to persist write");t.reject(l)}}async function UE(n,e){const t=Ce(n);try{const i=await CP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Fe(h.lu,14607):o.removedDocuments.size>0&&(Fe(h.lu,42227),h.lu=!1))})),await Ml(t,i,e)}catch(i){await Zo(i)}}function Wv(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const d=h.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(h,d){const p=Ce(h);p.onlineState=d;let v=!1;p.queries.forEach(((y,I)=>{for(const S of I.wa)S.va(d)&&(v=!0)})),v&&Lp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function mk(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new rt(ye.comparator);h=h.insert(l,Ht.newNoDocument(l,Re.min()));const d=De().add(l),p=new ah(Re.min(),new Map,new rt(Pe),h,d);await UE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),jp(i)}else await Vf(i.localStore,e,!1).then((()=>jf(i,e,t))).catch(Zo)}async function gk(n,e){const t=Ce(n),i=e.batch.batchId;try{const o=await RP(t.localStore,e);zE(t,i,null),FE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ml(t,o)}catch(o){await Zo(o)}}async function yk(n,e,t){const i=Ce(n);try{const o=await(function(h,d){const p=Ce(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let y;return p.mutationQueue.lookupMutationBatch(v,d).next((I=>(Fe(I!==null,37113),y=I.keys(),p.mutationQueue.removeMutationBatch(v,I)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,y))).next((()=>p.localDocuments.getDocuments(v,y)))}))})(i.localStore,e);zE(i,e,t),FE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ml(i,o)}catch(o){await Zo(o)}}function FE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function zE(n,e,t){const i=Ce(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||BE(n,i)}))}function BE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Np(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),jp(n))}function Gv(n,e,t){for(const i of t)i instanceof LE?(n.Au.addReference(i.key,e),vk(n,i)):i instanceof ME?(ce(Mp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||BE(n,i.key)):Ee(19791,{yu:i})}function vk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ce(Mp,"New document in limbo: "+t),n.Iu.add(i),jp(n))}function jp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ye(Ge.fromString(e)),i=n.mu.next();n.Eu.set(i,new ak(t)),n.du=n.du.insert(t,i),CE(n.remoteStore,new Pi(mr(wp(t.path)),i,"TargetPurposeLimboResolution",eh.ue))}}async function Ml(n,e,t){const i=Ce(n),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{h.push(i.gu(p,e,t).then((v=>{var y;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(v){o.push(v);const I=Pp.Es(p.targetId,v);l.push(I)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(p,v){const y=Ce(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>K.forEach(v,(S=>K.forEach(S.Is,(k=>y.persistence.referenceDelegate.addReference(I,S.targetId,k))).next((()=>K.forEach(S.ds,(k=>y.persistence.referenceDelegate.removeReference(I,S.targetId,k)))))))))}catch(I){if(!ea(I))throw I;ce(kp,"Failed to update sequence numbers: "+I)}for(const I of v){const S=I.targetId;if(!I.fromCache){const k=y.Fs.get(S),z=k.snapshotVersion,H=k.withLastLimboFreeSnapshotVersion(z);y.Fs=y.Fs.insert(S,H)}}})(i.localStore,l))}async function _k(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){ce(Mp,"User change. New user:",e.toKey());const i=await IE(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new se(G.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ml(t,i.Bs)}}function wk(n,e){const t=Ce(n),i=t.Eu.get(e);if(i&&i.lu)return De().add(i.key);{let o=De();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const d=t.Pu.get(h);o=o.unionWith(d.view.tu)}return o}}function $E(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mk.bind(null,e),e.hu.J_=rk.bind(null,e.eventManager),e.hu.pu=ik.bind(null,e.eventManager),e}function Ek(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yk.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return AP(this.persistence,new TP,e.initialUser,this.serializer)}Du(e){return new TE(Cp.Vi,this.serializer)}bu(e){return new DP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class Tk extends jc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Fe(this.persistence.referenceDelegate instanceof Lc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aP(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new TE((i=>Lc.Vi(i,t)),this.serializer)}}class Uf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_k.bind(null,this.syncEngine),await ek(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nk})()}createDatastore(e){const t=lh(e.databaseInfo.databaseId),i=(function(l){return new MP(l)})(e.databaseInfo);return(function(l,h,d,p){return new zP(l,h,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,d){return new $P(i,o,l,h,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wv(this.syncEngine,t,0)),(function(){return Fv.C()?new Fv:new bP})())}createSyncEngine(e,t){return(function(o,l,h,d,p,v,y){const I=new lk(o,l,h,d,p,v);return y&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);ce(bs,"RemoteStore shutting down."),l.Ia.add(5),await Ll(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Uf.provider={build:()=>new Uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="FirestoreClient";class Ik{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=qt.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ce(Bi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ce(Bi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Vp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function of(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Bi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await IE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Li("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Li("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Kv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Sk(n);ce(Bi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Bv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Bv(e.remoteStore,o))),n._onlineComponents=e}async function Sk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Bi,"Using user provided OfflineComponentProvider");try{await of(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),await of(n,new jc)}}else ce(Bi,"Using default OfflineComponentProvider"),await of(n,new Tk(void 0));return n._offlineComponents}async function HE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Bi,"Using user provided OnlineComponentProvider"),await Kv(n,n._uninitializedComponentsProvider._online)):(ce(Bi,"Using default OnlineComponentProvider"),await Kv(n,new Uf))),n._onlineComponents}function Ak(n){return HE(n).then((e=>e.syncEngine))}async function WE(n){const e=await HE(n),t=e.eventManager;return t.onListen=uk.bind(null,e.syncEngine),t.onUnlisten=dk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ck.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fk.bind(null,e.syncEngine),t}function Rk(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,p,v){const y=new qE({next:S=>{y.Ou(),h.enqueueAndForget((()=>OE(l,I)));const k=S.docs.has(d);!k&&S.fromCache?v.reject(new se(G.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&p&&p.source==="server"?v.reject(new se(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new VE(wp(d.path),y,{includeMetadataChanges:!0,ka:!0});return bE(l,I)})(await WE(n),n.asyncQueue,e,t,i))),i.promise}function Ck(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,p,v){const y=new qE({next:S=>{y.Ou(),h.enqueueAndForget((()=>OE(l,I))),S.fromCache&&p.source==="server"?v.reject(new se(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new VE(d,y,{includeMetadataChanges:!0,ka:!0});return bE(l,I)})(await WE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firestore.googleapis.com",Xv=!0;class Jv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KE,this.ssl=Xv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sP)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new OR;switch(i.type){case"firstParty":return new jR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Qv.get(t);i&&(ce("ComponentProvider","Removing Datastore"),Qv.delete(t),i.terminate())})(this),Promise.resolve()}}function Pk(n,e,t,i={}){var o;n=wr(n,hh);const l=Xr(e),h=n._getSettings(),d=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Wc(`https://${p}`),Gc("Firestore",!0)),h.host!==KE&&h.host!==p&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:p,ssl:l,emulatorOptions:i});if(!Ns(v,d)&&(n._setSettings(v),i.mockUserToken)){let y,I;if(typeof i.mockUserToken=="string")y=i.mockUserToken,I=qt.MOCK_USER;else{y=j_(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new qt(S)}n._authCredentials=new VR(new Dw(y,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new na(this.firestore,e,this._query)}}class ct{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Dl(t,ct._jsonSchema))return new ct(e,i||null,new ye(Ge.fromString(t.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:gt("string",ct._jsonSchemaVersion),referencePath:gt("string")};class Oi extends na{constructor(e,t,i){super(e,t,wp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new ye(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function QE(n,e,...t){if(n=Ze(n),Ow("collection","path",e),n instanceof hh){const i=Ge.fromString(e,...t);return cv(i),new Oi(n,null,i)}{if(!(n instanceof ct||n instanceof Oi))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ge.fromString(e,...t));return cv(i),new Oi(n.firestore,null,i)}}function Gi(n,e,...t){if(n=Ze(n),arguments.length===1&&(e=pp.newId()),Ow("doc","path",e),n instanceof hh){const i=Ge.fromString(e,...t);return uv(i),new ct(n,null,new ye(i))}{if(!(n instanceof ct||n instanceof Oi))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ge.fromString(e,...t));return uv(i),new ct(n.firestore,n instanceof Oi?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";class Zv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new AE(this,"async_queue_retry"),this.oc=()=>{const i=sf();i&&ce(Yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new qr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ea(e))throw e;ce(Yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Kr("INTERNAL UNHANDLED ERROR: ",e_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Op.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ee(47125,{hc:e_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function e_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ra extends hh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Zv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zv(e),this._firestoreClient=void 0,await e}}}function kk(n,e){const t=typeof n=="object"?n:Kc(),i=typeof n=="string"?n:Nc,o=Pl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Zf("firestore");l&&Pk(o,...l)}return o}function Up(n){if(n._terminated)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Nk(n),n._firestoreClient}function Nk(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,p,v,y){return new eC(d,p,v,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,GE(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Ik(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(Mt.fromBase64String(e))}catch(t){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:gt("string",xn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:gt("string",yr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vr(e.vectorValues);throw new se(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:gt("string",vr._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=/^__.*__$/;class Dk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class XE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}class Fp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Uc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(JE(this.Ec)&&xk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||lh(e)}Dc(e,t,i,o=!1){return new Fp({Ec:e,methodName:t,bc:i,path:Lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zp(n){const e=n._freezeSettings(),t=lh(n._databaseId);return new bk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ok(n,e,t,i,o,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);$p("Data must be an object, but it was:",h,i);const d=YE(i,h);let p,v;if(l.merge)p=new _n(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const y=[];for(const I of l.mergeFields){const S=Ff(e,I,t);if(!h.contains(S))throw new se(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);e0(y,S)||y.push(S)}p=new _n(y),v=h.fieldTransforms.filter((I=>p.covers(I.field)))}else p=null,v=h.fieldTransforms;return new Dk(new un(d),p,v)}class ph extends fh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class Bp extends fh{_toFieldTransform(e){return new RC(e.path,new wl)}isEqual(e){return e instanceof Bp}}function Vk(n,e,t,i){const o=n.Dc(1,e,t);$p("Data must be an object, but it was:",o,i);const l=[],h=un.empty();Hi(i,((p,v)=>{const y=qp(e,p,t);v=Ze(v);const I=o.gc(y);if(v instanceof ph)l.push(y);else{const S=jl(v,I);S!=null&&(l.push(y),h.set(y,S))}}));const d=new _n(l);return new XE(h,d,o.fieldTransforms)}function Lk(n,e,t,i,o,l){const h=n.Dc(1,e,t),d=[Ff(e,i,t)],p=[o];if(l.length%2!=0)throw new se(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Ff(e,l[S])),p.push(l[S+1]);const v=[],y=un.empty();for(let S=d.length-1;S>=0;--S)if(!e0(v,d[S])){const k=d[S];let z=p[S];z=Ze(z);const H=h.gc(k);if(z instanceof ph)v.push(k);else{const x=jl(z,H);x!=null&&(v.push(k),y.set(k,x))}}const I=new _n(v);return new XE(y,I,h.fieldTransforms)}function Mk(n,e,t,i=!1){return jl(t,n.Dc(i?4:3,e))}function jl(n,e){if(ZE(n=Ze(n)))return $p("Unsupported field value:",e,n),YE(n,e);if(n instanceof fh)return(function(i,o){if(!JE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const d of i){let p=jl(d,o.yc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Xe.fromDate(i);return{timestampValue:Vc(o.serializer,l)}}if(i instanceof Xe){const l=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vc(o.serializer,l)}}if(i instanceof yr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xn)return{bytesValue:pE(o.serializer,i._byteString)};if(i instanceof ct){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ap(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof vr)return(function(h,d){return{mapValue:{fields:{[$w]:{stringValue:qw},[xc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw d.wc("VectorValues must only contain numeric values.");return Ep(d.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Zc(i)}`)})(n,e)}function YE(n,e){const t={};return Mw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(n,((i,o)=>{const l=jl(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ZE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof yr||n instanceof xn||n instanceof ct||n instanceof fh||n instanceof vr)}function $p(n,e,t){if(!ZE(t)||!Vw(t)){const i=Zc(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Ff(n,e,t){if((e=Ze(e))instanceof dh)return e._internalPath;if(typeof e=="string")return qp(n,e);throw Uc("Field path arguments must be of type string or ",n,!1,void 0,t)}const jk=new RegExp("[~\\*/\\[\\]]");function qp(n,e,t){if(e.search(jk)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dh(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new se(G.INVALID_ARGUMENT,d+n+p)}function e0(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Uk extends t0{data(){return super.data()}}function Hp(n,e){return typeof e=="string"?qp(n,e):e instanceof dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class zk extends Wp{}function Bk(n,e,...t){let i=[];e instanceof Wp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof Gp)).length,d=l.filter((p=>p instanceof mh)).length;if(h>1||h>0&&d>0)throw new se(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class mh extends zk{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new mh(e,t,i)}_apply(e){const t=this._parse(e);return n0(e._query,t),new na(e.firestore,e.converter,kf(e._query,t))}_parse(e){const t=zp(e.firestore);return(function(l,h,d,p,v,y,I){let S;if(v.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new se(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){n_(I,y);const z=[];for(const H of I)z.push(t_(p,l,H));S={arrayValue:{values:z}}}else S=t_(p,l,I)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||n_(I,y),S=Mk(d,h,I,y==="in"||y==="not-in");return mt.create(v,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $k(n,e,t){const i=e,o=Hp("where",n);return mh._create(o,i,t)}class Gp extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const d=l.getFlattenedFilters();for(const p of d)n0(h,p),h=kf(h,p)})(e._query,t),new na(e.firestore,e.converter,kf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function t_(n,e,t){if(typeof(t=Ze(t))=="string"){if(t==="")throw new se(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yw(e)&&t.indexOf("/")!==-1)throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ge.fromString(t));if(!ye.isDocumentKey(i))throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vv(n,new ye(i))}if(t instanceof ct)return vv(n,t._key);throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zc(t)}.`)}function n_(n,e){if(!Array.isArray(n)||n.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n0(n,e){const t=(function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qk{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[xc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ut(h.doubleValue)));return new vr(l)}convertGeoPoint(e){return new yr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=nh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yl(e));default:return null}}convertTimestamp(e){const t=ji(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ge.fromString(e);Fe(wE(i),9688,{name:e});const o=new vl(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Kr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends t0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Hp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ps._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:gt("string",Ps._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class _c extends Ps{data(e={}){return super.data(e)}}class Fo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _c(this._firestore,this._userDataWriter,i.key,i,new il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((d=>{const p=new _c(o._firestore,o._userDataWriter,d.doc.key,d.doc,new il(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new _c(o._firestore,o._userDataWriter,d.doc.key,d.doc,new il(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,y=-1;return d.type!==0&&(v=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),y=h.indexOf(d.doc.key)),{type:Wk(d.type),doc:p,oldIndex:v,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Wk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n){n=wr(n,ct);const e=wr(n.firestore,ra);return Rk(Up(e),n._key).then((t=>Qk(e,n,t)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:gt("string",Fo._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class r0 extends qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function i0(n){n=wr(n,na);const e=wr(n.firestore,ra),t=Up(e),i=new r0(e);return Fk(n._query),Ck(t,n._query).then((o=>new Fo(e,i,n,o)))}function Qp(n,e,t){n=wr(n,ct);const i=wr(n.firestore,ra),o=Hk(n.converter,e,t);return Xp(i,[Ok(zp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Yn.none())])}function Gk(n,e,t,...i){n=wr(n,ct);const o=wr(n.firestore,ra),l=zp(o);let h;return h=typeof(e=Ze(e))=="string"||e instanceof dh?Lk(l,"updateDoc",n._key,e,t,i):Vk(l,"updateDoc",n._key,e),Xp(o,[h.toMutation(n._key,Yn.exists(!0))])}function Kk(n){return Xp(wr(n.firestore,ra),[new Tp(n._key,Yn.none())])}function Xp(n,e){return(function(i,o){const l=new qr;return i.asyncQueue.enqueueAndForget((async()=>pk(await Ak(i),o,l))),l.promise})(Up(n),e)}function Qk(n,e,t){const i=t.docs.get(e._key),o=new r0(n);return new Ps(n,o,e._key,i,new il(t.hasPendingWrites,t.fromCache),e.converter)}function zf(){return new Bp("serverTimestamp")}(function(e,t=!0){(function(o){Yo=o})(Vs),Vi(new Hr("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new ra(new LR(i.getProvider("auth-internal")),new UR(h,i.getProvider("app-check-internal")),(function(v,y){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(v.options.projectId,y)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),bn(iv,sv,e),bn(iv,sv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="type.googleapis.com/google.protobuf.Int64Value",Jk="type.googleapis.com/google.protobuf.UInt64Value";function s0(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Fc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Fc(e));if(typeof n=="function"||typeof n=="object")return s0(n,e=>Fc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Go(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Xk:case Jk:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Go(e)):typeof n=="function"||typeof n=="object"?s0(n,e=>Go(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cn extends er{constructor(e,t,i){super(`${Jp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,cn.prototype)}}function Yk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function zc(n,e){let t=Yk(n),i=t,o;try{const l=e&&e.error;if(l){const h=l.status;if(typeof h=="string"){if(!r_[h])return new cn("internal","internal");t=r_[h],i=h}const d=l.message;typeof d=="string"&&(i=d),o=l.details,o!==void 0&&(o=Go(o))}}catch{}return t==="ok"?null:new cn(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ln(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o==null||o.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="us-central1",eN=/^data: (.*?)(?:\n|$)/;function tN(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new cn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class nN{constructor(e,t,i,o,l=Bf,h=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new Zk(e,t,i,o),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Bf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function rN(n,e,t){const i=Xr(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Wc(n.emulatorOrigin),Gc("Functions",!0))}function iN(n,e,t){const i=o=>oN(n,e,o,{});return i.stream=(o,l)=>lN(n,e,o,l),i}async function sN(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function o0(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function oN(n,e,t,i){const o=n._url(e);return aN(n,o,t,i)}async function aN(n,e,t,i){t=Fc(t);const o={data:t},l=await o0(n,i),h=i.timeout||7e4,d=tN(h),p=await Promise.race([sN(e,o,l,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!p)throw new cn("cancelled","Firebase Functions instance was deleted.");const v=zc(p.status,p.json);if(v)throw v;if(!p.json)throw new cn("internal","Response is not valid JSON object.");let y=p.json.data;if(typeof y>"u"&&(y=p.json.result),typeof y>"u")throw new cn("internal","Response is missing data field.");return{data:Go(y)}}function lN(n,e,t,i){const o=n._url(e);return uN(n,o,t,i||{})}async function uN(n,e,t,i){var o;t=Fc(t);const l={data:t},h=await o0(n,i);h["Content-Type"]="application/json",h.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:h,signal:i==null?void 0:i.signal})}catch(k){if(k instanceof Error&&k.name==="AbortError"){const H=new cn("cancelled","Request was cancelled.");return{data:Promise.reject(H),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(H)}}}}}}const z=zc(0,null);return{data:Promise.reject(z),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(z)}}}}}}let p,v;const y=new Promise((k,z)=>{p=k,v=z});(o=i==null?void 0:i.signal)===null||o===void 0||o.addEventListener("abort",()=>{const k=new cn("cancelled","Request was cancelled.");v(k)});const I=d.body.getReader(),S=cN(I,p,v,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const k=S.getReader();return{async next(){const{value:z,done:H}=await k.read();return{value:z,done:H}},async return(){return await k.cancel(),{done:!0,value:void 0}}}}},data:y}}function cN(n,e,t,i){const o=(h,d)=>{const p=h.match(eN);if(!p)return;const v=p[1];try{const y=JSON.parse(v);if("result"in y){e(Go(y.result));return}if("message"in y){d.enqueue(Go(y.message));return}if("error"in y){const I=zc(0,y);d.error(I),t(I);return}}catch(y){if(y instanceof cn){d.error(y),t(y);return}}},l=new TextDecoder;return new ReadableStream({start(h){let d="";return p();async function p(){if(i!=null&&i.aborted){const v=new cn("cancelled","Request was cancelled");return h.error(v),t(v),Promise.resolve()}try{const{value:v,done:y}=await n.read();if(y){d.trim()&&o(d.trim(),h),h.close();return}if(i!=null&&i.aborted){const S=new cn("cancelled","Request was cancelled");h.error(S),t(S),await n.cancel();return}d+=l.decode(v,{stream:!0});const I=d.split(`
`);d=I.pop()||"";for(const S of I)S.trim()&&o(S.trim(),h);return p()}catch(v){const y=v instanceof cn?v:zc(0,null);h.error(y),t(y)}}},cancel(){return n.cancel()}})}const i_="@firebase/functions",s_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="auth-internal",dN="app-check-internal",fN="messaging-internal";function pN(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(hN),h=t.getProvider(fN),d=t.getProvider(dN);return new nN(o,l,h,d,i)};Vi(new Hr(Jp,e,"PUBLIC").setMultipleInstances(!0)),bn(i_,s_,n),bn(i_,s_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(n=Kc(),e=Bf){const i=Pl(Ze(n),Jp).getImmediate({identifier:e}),o=Zf("functions");return o&&gN(i,...o),i}function gN(n,e,t){rN(Ze(n),e,t)}function a0(n,e,t){return iN(Ze(n),e)}pN();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="firebasestorage.googleapis.com",u0="storageBucket",yN=120*1e3,vN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends er{constructor(e,t,i=0){super(af(e),`Firebase Storage: ${t} (${af(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return af(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function af(n){return"storage/"+n}function Yp(){const n="An unknown error occurred, please check the error payload for server response.";return new ot(st.UNKNOWN,n)}function _N(n){return new ot(st.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function wN(n){return new ot(st.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EN(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(st.UNAUTHENTICATED,n)}function TN(){return new ot(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IN(n){return new ot(st.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function SN(){return new ot(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AN(){return new ot(st.CANCELED,"User canceled the upload/download.")}function RN(n){return new ot(st.INVALID_URL,"Invalid URL '"+n+"'.")}function CN(n){return new ot(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function PN(){return new ot(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u0+"' property when initializing the app?")}function kN(){return new ot(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NN(){return new ot(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xN(n){return new ot(st.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $f(n){return new ot(st.INVALID_ARGUMENT,n)}function c0(){return new ot(st.APP_DELETED,"The Firebase app was deleted.")}function DN(n){return new ot(st.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hl(n,e){return new ot(st.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function el(n){throw new ot(st.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=wn.makeFromUrl(e,t)}catch{return new wn(e,"")}if(i.path==="")return i;throw CN(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function v(oe){oe.path_=decodeURIComponent(oe.path)}const y="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",k=new RegExp(`^https?://${I}/${y}/b/${o}/o${S}`,"i"),z={bucket:1,path:3},H=t===l0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",$=new RegExp(`^https?://${H}/${o}/${x}`,"i"),te=[{regex:d,indices:p,postModify:l},{regex:k,indices:z,postModify:v},{regex:$,indices:{bucket:1,path:2},postModify:v}];for(let oe=0;oe<te.length;oe++){const Te=te[oe],Ae=Te.regex.exec(e);if(Ae){const D=Ae[Te.indices.bucket];let A=Ae[Te.indices.path];A||(A=""),i=new wn(D,A),Te.postModify(i);break}}if(i==null)throw RN(e);return i}}class bN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(n,e,t){let i=1,o=null,l=null,h=!1,d=0;function p(){return d===2}let v=!1;function y(...x){v||(v=!0,e.apply(null,x))}function I(x){o=setTimeout(()=>{o=null,n(k,p())},x)}function S(){l&&clearTimeout(l)}function k(x,...$){if(v){S();return}if(x){S(),y.call(null,x,...$);return}if(p()||h){S(),y.call(null,x,...$);return}i<64&&(i*=2);let te;d===1?(d=2,te=0):te=(i+Math.random())*1e3,I(te)}let z=!1;function H(x){z||(z=!0,S(),!v&&(o!==null?(x||(d=2),clearTimeout(o),I(0)):x||(d=1)))}return I(0),l=setTimeout(()=>{h=!0,H(!0)},t),H}function VN(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){return n!==void 0}function MN(n){return typeof n=="object"&&!Array.isArray(n)}function Zp(n){return typeof n=="string"||n instanceof String}function o_(n){return em()&&n instanceof Blob}function em(){return typeof Blob<"u"}function a_(n,e,t,i){if(i<e)throw $f(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw $f(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function h0(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var ks;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ks||(ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,i,o,l,h,d,p,v,y,I,S=!0,k=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=y,this.connectionFactory_=I,this.retry=S,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,H)=>{this.resolve_=z,this.reject_=H,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new ac(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=d=>{const p=d.loaded,v=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const d=l.getErrorCode()===ks.NO_ERROR,p=l.getStatus();if(!d||jN(p,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===ks.ABORT;i(!1,new ac(!1,null,y));return}const v=this.successCodes_.indexOf(p)!==-1;i(!0,new ac(v,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());LN(p)?l(p):l()}catch(p){h(p)}else if(d!==null){const p=Yp();p.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,p)):h(p)}else if(o.canceled){const p=this.appDelete_?c0():AN();h(p)}else{const p=SN();h(p)}};this.canceled_?t(!1,new ac(!1,null,!0)):this.backoffId_=ON(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ac{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function FN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function zN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $N(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function qN(n,e,t,i,o,l,h=!0,d=!1){const p=h0(n.urlParams),v=n.url+p,y=Object.assign({},n.headers);return BN(y,e),FN(y,t),zN(y,l),$N(y,i),new UN(v,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,h,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WN(...n){const e=HN();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(em())return new Blob(n);throw new ot(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GN(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){if(typeof atob>"u")throw xN("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lf{constructor(e,t){this.data=e,this.contentType=t||null}}function QN(n,e){switch(n){case fr.RAW:return new lf(d0(e));case fr.BASE64:case fr.BASE64URL:return new lf(f0(n,e));case fr.DATA_URL:return new lf(JN(e),YN(e))}throw Yp()}function d0(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,h=n.charCodeAt(++t);i=65536|(l&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function XN(n){let e;try{e=decodeURIComponent(n)}catch{throw hl(fr.DATA_URL,"Malformed data URL.")}return d0(e)}function f0(n,e){switch(n){case fr.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw hl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case fr.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw hl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=KN(e)}catch(o){throw o.message.includes("polyfill")?o:hl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class p0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hl(fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=ZN(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function JN(n){const e=new p0(n);return e.base64?f0(fr.BASE64,e.rest):XN(e.rest)}function YN(n){return new p0(n).contentType}function ZN(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){let i=0,o="";o_(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(o_(this.data_)){const i=this.data_,o=GN(i,e,t);return o===null?null:new Ri(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ri(i,!0)}}static getBlob(...e){if(em()){const t=e.map(i=>i instanceof Ri?i.data_:i);return new Ri(WN.apply(null,t))}else{const t=e.map(h=>Zp(h)?QN(fr.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)o[l++]=h[d]}),new Ri(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){let e;try{e=JSON.parse(n)}catch{return null}return MN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function tx(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function g0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n,e){return e}class Jt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||nx}}let lc=null;function rx(n){return!Zp(n)||n.length<2?n:g0(n)}function y0(){if(lc)return lc;const n=[];n.push(new Jt("bucket")),n.push(new Jt("generation")),n.push(new Jt("metageneration")),n.push(new Jt("name","fullPath",!0));function e(l,h){return rx(h)}const t=new Jt("name");t.xform=e,n.push(t);function i(l,h){return h!==void 0?Number(h):h}const o=new Jt("size");return o.xform=i,n.push(o),n.push(new Jt("timeCreated")),n.push(new Jt("updated")),n.push(new Jt("md5Hash",null,!0)),n.push(new Jt("cacheControl",null,!0)),n.push(new Jt("contentDisposition",null,!0)),n.push(new Jt("contentEncoding",null,!0)),n.push(new Jt("contentLanguage",null,!0)),n.push(new Jt("contentType",null,!0)),n.push(new Jt("metadata","customMetadata",!0)),lc=n,lc}function ix(n,e){function t(){const i=n.bucket,o=n.fullPath,l=new wn(i,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function sx(n,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const h=t[l];i[h.local]=h.xform(i,e[h.server])}return ix(i,n),i}function v0(n,e,t){const i=m0(e);return i===null?null:sx(n,i,t)}function ox(n,e,t,i){const o=m0(e);if(o===null||!Zp(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(v=>{const y=n.bucket,I=n.fullPath,S="/b/"+h(y)+"/o/"+h(I),k=tm(S,t,i),z=h0({alt:"media",token:v});return k+z})[0]}function ax(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class _0{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(n){if(!n)throw Yp()}function lx(n,e){function t(i,o){const l=v0(n,o,e);return w0(l!==null),l}return t}function ux(n,e){function t(i,o){const l=v0(n,o,e);return w0(l!==null),ox(l,o,n.host,n._protocol)}return t}function E0(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=TN():o=EN():t.getStatus()===402?o=wN(n.bucket):t.getStatus()===403?o=IN(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function cx(n){const e=E0(n);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=_N(n.path)),l.serverResponse=o.serverResponse,l}return t}function hx(n,e,t){const i=e.fullServerUrl(),o=tm(i,n.host,n._protocol),l="GET",h=n.maxOperationRetryTime,d=new _0(o,l,ux(n,t),h);return d.errorHandler=cx(e),d}function dx(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function fx(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=dx(null,e)),i}function px(n,e,t,i,o){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let te="";for(let oe=0;oe<2;oe++)te=te+Math.random().toString().slice(2);return te}const p=d();h["Content-Type"]="multipart/related; boundary="+p;const v=fx(e,i,o),y=ax(v,t),I="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+v.contentType+`\r
\r
`,S=`\r
--`+p+"--",k=Ri.getBlob(I,i,S);if(k===null)throw kN();const z={name:v.fullPath},H=tm(l,n.host,n._protocol),x="POST",$=n.maxUploadRetryTime,Z=new _0(H,x,lx(n,t),$);return Z.urlParams=z,Z.headers=h,Z.body=k.uploadData(),Z.errorHandler=E0(e),Z}class mx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,l){if(this.sent_)throw el("cannot .send() more than once");if(Xr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gx extends mx{initXhr(){this.xhr_.responseType="text"}}function T0(){return new gx}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this._service=e,t instanceof wn?this._location=t:this._location=wn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Os(e,t)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g0(this._location.path)}get storage(){return this._service}get parent(){const e=ex(this._location.path);if(e===null)return null;const t=new wn(this._location.bucket,e);return new Os(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DN(e)}}function yx(n,e,t){n._throwIfRoot("uploadBytes");const i=px(n.storage,n._location,y0(),new Ri(e,!0),t);return n.storage.makeRequestWithTokens(i,T0).then(o=>({metadata:o,ref:n}))}function vx(n){n._throwIfRoot("getDownloadURL");const e=hx(n.storage,n._location,y0());return n.storage.makeRequestWithTokens(e,T0).then(t=>{if(t===null)throw NN();return t})}function _x(n,e){const t=tx(n._location.path,e),i=new wn(n._location.bucket,t);return new Os(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n){return/^[A-Za-z]+:\/\//.test(n)}function Ex(n,e){return new Os(n,e)}function I0(n,e){if(n instanceof nm){const t=n;if(t._bucket==null)throw PN();const i=new Os(t,t._bucket);return e!=null?I0(i,e):i}else return e!==void 0?_x(n,e):n}function Tx(n,e){if(e&&wx(e)){if(n instanceof nm)return Ex(n,e);throw $f("To use ref(service, url), the first argument must be a Storage instance.")}else return I0(n,e)}function l_(n,e){const t=e==null?void 0:e[u0];return t==null?null:wn.makeFromBucketSpec(t,n)}function Ix(n,e,t,i={}){n.host=`${e}:${t}`;const o=Xr(e);o&&(Wc(`https://${n.host}/b`),Gc("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:j_(l,n.app.options.projectId))}class nm{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=l0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yN,this._maxUploadRetryTime=vN,this._requests=new Set,o!=null?this._bucket=wn.makeFromBucketSpec(o,this._host):this._bucket=l_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=l_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Os(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new bN(c0());{const h=qN(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const u_="@firebase/storage",c_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="storage";function Sx(n,e,t){return n=Ze(n),yx(n,e,t)}function Ax(n){return n=Ze(n),vx(n)}function Rx(n,e){return n=Ze(n),Tx(n,e)}function Cx(n=Kc(),e){n=Ze(n);const i=Pl(n,S0).getImmediate({identifier:e}),o=Zf("storage");return o&&Px(i,...o),i}function Px(n,e,t,i={}){Ix(n,e,t,i)}function kx(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new nm(t,i,o,e,Vs)}function Nx(){Vi(new Hr(S0,kx,"PUBLIC").setMultipleInstances(!0)),bn(u_,c_,""),bn(u_,c_,"esm2017")}Nx();const xx={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},gh=z_(xx),hn=DR(gh),Tr=kk(gh),Dx=Cx(gh),A0=mN(gh,"us-central1");w1(hn,fw);a0(A0,"bootstrapFirstAdmin");a0(A0,"setUserRole");async function h_(){return hn.currentUser?hn.currentUser.getIdTokenResult(!0):null}async function qf(n){const e=n??hn.currentUser;if(!e)return null;try{const i=(await e.getIdTokenResult()).claims.role;return i==="admin"||i==="trainer"||i==="client"?i:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const l=(await e.getIdTokenResult()).claims.role;return l==="admin"||l==="trainer"||l==="client"?l:null}catch{return await Xc(hn),null}throw t}}function R0(){return{createdAt:zf(),updatedAt:zf()}}function C0(){return{updatedAt:zf()}}function js(){var e;const n=(e=hn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function Bc(n={}){const e=js(),t=Gi(Tr,"users",e);return await Qp(t,{uid:e,...R0(),...n},{merge:!0}),t}async function Hf(n){const e=n??js();return Kp(Gi(Tr,"users",e))}async function bx(n,e){const t=js();await Qp(Gi(Tr,"users",t,"private",n),{...e,...C0()},{merge:!0})}async function Ox(){return i0(QE(Tr,"users"))}async function Vx(n,e){return Kp(Gi(Tr,"users",n,"private",e))}async function Lx(n){const e=js(),t=Gi(Tr,"plans",n.clientId);return await Qp(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...R0()}),t}async function P0(n,e){const t=e??js(),i=n==="client"?"clientId":"trainerId",o=Bk(QE(Tr,"plans"),$k(i,"==",t));return i0(o)}async function Mx(n){const e=n??js();return Kp(Gi(Tr,"plans",e))}async function d_(n,e){await Gk(Gi(Tr,"plans",n),{...e,...C0()})}async function jx(n){await Kk(Gi(Tr,"plans",n))}async function Ux(n,e){const t=js(),i=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),o=`${Date.now()}-${i}`,l=Fx(t,n,o);return await Sx(l,e,{contentType:e.type||"application/octet-stream"}),Ax(l)}function Fx(n,e,t){return Rx(Dx,`workout-media/${n}/${e}/${t}`)}function ia(){const[n,e]=Q.useState(!0),[t,i]=Q.useState(hn.currentUser),[o,l]=Q.useState(null);return Q.useEffect(()=>cw(hn,async h=>{try{if(e(!0),i(h),!h){l(null);return}await rm(h);const d=await qf(h);l(d)}catch(d){(typeof d=="object"&&d&&"code"in d?String(d.code):"").includes("user-token-expired")&&(await Xc(hn),i(null)),l(null)}finally{e(!1)}}),[]),Q.useMemo(()=>({initializing:n,user:t,role:o,isAuthenticated:!!t}),[n,t,o])}const Wf=new zr;Wf.setCustomParameters({prompt:"select_account"});async function rm(n){(await Hf(n.uid)).exists()||await Bc({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function f_(){try{const n=await F1(hn,Wf);return await rm(n.user),{redirected:!1,user:n.user}}catch(n){if(Bx(n))return await W1(hn,Wf),{redirected:!0,user:null};throw n}}async function zx(){try{const n=await K1(hn);return n!=null&&n.user&&await rm(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await Xc(hn),null;throw n}}async function Il(){return Xc(hn)}function Bx(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}const $x=["lrnz.sga@gmail.com","beastlyworkoutideas@gmail.com"];function k0(n){return n.trim().toLowerCase()}function qx(n){const e=$x.join(",");return new Set(e.split(",").map(k0).filter(Boolean))}const Hx=qx();function uf(n){return n?Hx.has(k0(n)):!1}function Wx(n){return n.map(e=>({id:e.id,...e.data()}))}function Qn(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Ts="bw_login_intent";function Gx(){const{user:n,role:e}=ia(),t=Al(),{showError:i}=qc(),[o,l]=Q.useState(!1),[h,d]=Q.useState(""),[p,v]=Q.useState(!1);if(Q.useEffect(()=>{async function S(){try{await zx()}catch(k){const z=Qn(k);d(z),i(z)}}S()},[i]),Q.useEffect(()=>{async function S(){if(!(!n||e||sessionStorage.getItem(Ts)!=="coach"||!uf(n.email))){v(!0),d("Sto preparando il tuo accesso coach...");try{await Bc({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let z=0;z<10;z+=1){await h_();const H=await qf(n);if(H==="admin"||H==="trainer"){sessionStorage.removeItem(Ts),t("/app/coach",{replace:!0});return}await new Promise(x=>setTimeout(x,700))}d("Sto ancora completando laccesso. Riprova tra pochi secondi.")}catch(z){const H=Qn(z);d(H),i(H)}finally{v(!1)}}}S()},[n,e,t]),n&&e)return sessionStorage.removeItem(Ts),E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0});if(n&&!e)return sessionStorage.getItem(Ts)==="coach"&&uf(n.email)?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accesso Coach"}),E.jsx("p",{className:"hero-sub",children:p?"Attendi un attimo...":"Sto verificando il tuo account."}),h?E.jsx("p",{className:"message",children:h}):null,E.jsx("button",{className:"btn btn-ghost",disabled:p,onClick:()=>void Il(),type:"button",children:"Esci e cambia account"})]})}):E.jsx(Dn,{to:"/app/client",replace:!0});async function y(){l(!0),d("");try{if(sessionStorage.setItem(Ts,"client"),(await f_()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(S){const k=Qn(S);d(k),i(k)}finally{l(!1)}}async function I(){l(!0),d("");try{sessionStorage.setItem(Ts,"coach");const S=await f_();if(S.redirected){d("Ti sto reindirizzando a Google...");return}if(!S.user){d("Accesso non completato. Riprova.");return}if(!uf(S.user.email)){await Il(),d("Questo account non  abilitato per larea coach. Usa accesso utente."),i("Questo account non  abilitato per larea coach.");return}await Bc({email:S.user.email??"",displayName:S.user.displayName??"",coachAccessRequestedAt:new Date().toISOString()});for(let k=0;k<8;k+=1){await h_();const z=await qf(S.user);if(z==="admin"||z==="trainer"){sessionStorage.removeItem(Ts),t("/app/coach",{replace:!0});return}await new Promise(H=>setTimeout(H,700))}d("Sto ancora completando laccesso coach. Riprova tra qualche secondo.")}catch(S){const k=Qn(S);d(k),i(k)}finally{l(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Accedi con Google"}),E.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),E.jsx("button",{className:"btn",disabled:o,onClick:()=>void y(),type:"button",children:o?"Connessione...":"Continua con Google"}),E.jsx("div",{className:"divider"}),E.jsx("h2",{children:"Sei un Coach?"}),E.jsx("p",{className:"hint",children:"Usa il tuo account coach per entrare nell'area professionale."}),E.jsx("button",{className:"btn btn-ghost",disabled:o,onClick:()=>void I(),type:"button",children:"Continua come Coach"}),h?E.jsx("p",{className:"message",children:h}):null,E.jsx(JI,{})]})})}function N0({role:n,title:e,subtitle:t,headerAction:i,children:o}){return E.jsxs("main",{className:"page",children:[E.jsxs("section",{className:"hero",children:[E.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),E.jsx("h1",{children:e}),E.jsx("p",{className:"hero-sub",children:t}),i,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Il(),children:"Esci dal profilo"})]}),E.jsx("section",{className:"stack",children:o}),E.jsxs("nav",{className:"mobile-nav",children:[E.jsx(KI,{to:n==="client"?"/app/client":"/app/coach",children:"Home"}),E.jsx("button",{type:"button",onClick:()=>void Il(),children:"Esci"})]})]})}function Kx(n){return n.replace(/[^\d]/g,"")}const Qx="393405882404".trim(),x0=Kx(Qx),Is=x0.length>6;function p_(n){const e=encodeURIComponent(n);return`https://wa.me/${x0}?text=${e}`}function cf(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function m_(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function g_(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Xx(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function Jx(){const{role:n,user:e}=ia(),t=Al(),{showError:i}=qc(),[o,l]=Q.useState([]),[h,d]=Q.useState(!1),[p,v]=Q.useState(!0),[y,I]=Q.useState(null),S="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";Q.useEffect(()=>{async function x(){if(e)try{const Z=(await Hf(e.uid)).data();if(!(Z!=null&&Z.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{v(!1)}}x()},[e,t]);async function k(){d(!0);try{const x=(e==null?void 0:e.uid)??"",$=x?await Hf(x):null,Z=($==null?void 0:$.data())??{},te=Array.from(new Set([x,(Z.uid??"").trim(),(Z.clientId??"").trim()].filter(D=>D.length>0))),oe=await Promise.allSettled(te.flatMap(D=>[P0("client",D),Mx(D)])),Te=new Map;for(const D of oe){if(D.status!=="fulfilled")continue;const A=D.value;if("docs"in A)for(const R of Wx(A.docs))Te.set(R.id,R);else if(A.exists()){const R={id:A.id,...A.data()};Te.set(R.id,R)}}const Ae=Array.from(Te.values()).sort((D,A)=>{const R=te.includes(D.id)?0:1,b=te.includes(A.id)?0:1;return R-b});l(Ae)}catch(x){i(Qn(x))}finally{d(!1)}}Q.useEffect(()=>{e&&(n==="client"||n===null)&&k()},[n,e==null?void 0:e.uid]);const z=o[0],H=Xx(z==null?void 0:z.exercises);return e?p?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Prepariamo la tua area"}),E.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):E.jsxs(N0,{role:"client",subtitle:"Tieni traccia di allenamenti e progressi in modo semplice.",title:"La tua area",headerAction:E.jsx("div",{className:"mobile-only",children:E.jsx("a",{className:`btn btn-whatsapp ${Is?"":"btn-disabled"}`.trim(),href:Is?p_(S):"#",onClick:x=>{Is||x.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[E.jsxs("article",{className:"card desktop-only",children:[E.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),E.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),E.jsx("a",{className:`btn btn-whatsapp ${Is?"":"btn-disabled"}`.trim(),href:Is?p_(S):"#",onClick:x=>{Is||x.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),Is?null:E.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}),E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"La tua scheda tecnica"}),z?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"plan-head",children:[E.jsx("p",{className:"hint",children:"Programma attivo"}),E.jsx("h3",{children:z.title})]}),E.jsx("div",{className:"exercise-grid",children:H.map((x,$)=>E.jsxs("article",{className:"exercise-card",children:[E.jsx("p",{className:"exercise-name",children:x.name||`Esercizio ${$+1}`}),E.jsxs("div",{className:"exercise-meta",children:[E.jsxs("span",{children:[x.sets??"-"," serie"]}),E.jsxs("span",{children:[x.reps||"-"," reps"]}),E.jsx("span",{children:x.weight||"Peso libero"})]}),x.mediaUrl?E.jsx("button",{className:"btn-link",type:"button",onClick:()=>I({url:x.mediaUrl,label:x.name||`Esercizio ${$+1}`}),children:cf(x.mediaUrl)||g_(x.mediaUrl)?"Apri video":m_(x.mediaUrl)?"Apri immagine":"Apri link"}):E.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${$}`))})]}):E.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]}),h?E.jsx("p",{className:"message",children:"Caricamento..."}):null,y?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:y.label}),cf(y.url)?E.jsx("iframe",{title:y.label,src:cf(y.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):m_(y.url)?E.jsx("img",{src:y.url,alt:y.label,className:"media-frame media-image"}):g_(y.url)?E.jsx("video",{src:y.url,controls:!0,className:"media-frame"}):E.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",E.jsx("a",{href:y.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>I(null),children:"Chiudi"})]})}):null]}):E.jsx(Dn,{to:"/auth",replace:!0})}function $t(n){return typeof n=="string"?n:n==null?"":String(n)}function hf(n){return $t(n.uid).trim()||n.id}function Yx(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:$t(t.name),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,weight:$t(t.weight),mediaUrl:$t(t.mediaUrl)}}).filter(e=>!!e):[]}function $e(n){return $t(n).trim()||"Non compilato"}function Zx(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function eD(n,e){const t=Zx(n),i=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",o=encodeURIComponent(`${i} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${o}`:""}function tD(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function y_(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function nD(){const{role:n,user:e}=ia(),{showError:t,showSuccess:i}=qc(),[o,l]=Q.useState([]),[h,d]=Q.useState([]),[p,v]=Q.useState(!1),[y,I]=Q.useState(null),[S,k]=Q.useState(!1),[z,H]=Q.useState(null),[x,$]=Q.useState(""),[Z,te]=Q.useState(""),[oe,Te]=Q.useState([{name:"",sets:3,reps:10,weight:"",mediaUrl:""}]),Ae=z!==null,[D,A]=Q.useState(!1),R=h.find(L=>L.id===x)??h.find(L=>L.clientId===x),b=eD($t(y==null?void 0:y.phone),$t(y==null?void 0:y.fullName)),V=o.reduce((L,X)=>{const le=$t(X.displayName).trim()||$t(X.email).trim()||X.id;return L[hf(X)]=le,L[X.id]=le,L},{});Q.useEffect(()=>{async function L(){if(!x){I(null);return}try{const X=await Vx(x,"onboarding");I(X.data()??null)}catch{I(null)}}L()},[x]),Q.useEffect(()=>{if(!x)return;if(!R){te(""),Te([{name:"",sets:3,reps:10,weight:"",mediaUrl:""}]);return}te(R.title??"");const L=Yx(R.exercises).filter(X=>X.name.trim().length>0);Te(L.length>0?L:[{name:"",sets:3,reps:10,weight:"",mediaUrl:""}])},[x,R==null?void 0:R.id]),Q.useEffect(()=>{if(!R)return;const L=Z.trim(),X=$t(R.title).trim();if(!L||L===X)return;const le=window.setTimeout(async()=>{try{A(!0),await d_(R.id,{title:L}),d(he=>he.map(we=>we.id===R.id?{...we,title:L}:we))}catch(he){t(Qn(he))}finally{A(!1)}},700);return()=>window.clearTimeout(le)},[Z,R==null?void 0:R.id]);async function j(){if(n){v(!0);try{const le=(await Ox()).docs.map(he=>({id:he.id,...he.data()})).filter(he=>he.id!==(e==null?void 0:e.uid)).filter(he=>{const we=$t(he.role).toLowerCase(),be=$t(he.requestedRole).toLowerCase();return we==="client"||be==="client"||he.onboardingCompleted===!0}).sort((he,we)=>{const be=$t(he.displayName||he.email||he.id).toLowerCase(),Ve=$t(we.displayName||we.email||we.id).toLowerCase();return be.localeCompare(Ve)});l(le),!x&&le[0]&&$(hf(le[0]));try{const he=await P0(n);d(he.docs.map(we=>({id:we.id,...we.data()})))}catch(he){d([]),t(Qn(he))}}catch(L){console.error("Coach action failed:",L),t(Qn(L))}finally{v(!1)}}}Q.useEffect(()=>{j()},[n,e==null?void 0:e.uid]);async function P(L,X){v(!0);try{await L(),i(X),await j()}catch(le){t(Qn(le))}finally{v(!1)}}function et(){Te(L=>[...L,{name:"",sets:3,reps:10,weight:"",mediaUrl:""}])}function It(L){Te(X=>X.length<=1?X:X.filter((le,he)=>he!==L))}function St(L){Ne(L,{name:"",sets:3,reps:10,weight:"",mediaUrl:""})}function Ne(L,X){Te(le=>le.map((he,we)=>we===L?{...he,...X}:he))}async function ie(){const L=oe.map(X=>({name:X.name.trim(),sets:Number(X.sets)||0,reps:Number(X.reps)||0,weight:X.weight.trim(),mediaUrl:X.mediaUrl.trim()})).filter(X=>X.name.length>0);if(L.length===0){t("Aggiungi almeno un esercizio con nome.");return}R?await P(()=>d_(R.id,{title:Z,status:"active",exercises:L}),"Scheda aggiornata con successo."):await P(()=>Lx({clientId:x,title:Z,status:"active",exercises:L}),"Scheda creata e subito visibile al cliente."),k(!1)}function ge(){if(!x){t("Seleziona prima un cliente.");return}if(!Z.trim()){t("Inserisci un titolo per la scheda.");return}k(!0)}async function ae(L,X){if(X){if(!X.type.startsWith("image/")){t("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!x){t("Seleziona prima un cliente.");return}H(L);try{const le=await Ux(x,X);Ne(L,{mediaUrl:le}),i("Media caricato con successo.")}catch(le){console.error("Media upload failed:",le),t(Qn(le))}finally{H(null)}}}async function M(){!R||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await P(()=>jx(R.id),"Scheda eliminata con successo."),te(""),Te([{name:"",sets:3,reps:10,weight:"",mediaUrl:""}]),k(!1))}return E.jsxs(N0,{role:n==="trainer"?"trainer":"admin",subtitle:"Gestisci clienti, programmi e appuntamenti da un unico posto.",title:"Area Coach",children:[E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Crea scheda cliente"}),E.jsxs("label",{children:["Clienti registrati",E.jsxs("select",{value:x,onChange:L=>$(L.target.value),children:[o.length===0?E.jsx("option",{value:"",children:"Nessun cliente disponibile"}):null,o.map(L=>E.jsx("option",{value:hf(L),children:$t(L.displayName).trim()||$t(L.email)||L.id},L.id))]})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void j(),children:"Aggiorna lista clienti"}),E.jsxs("label",{children:["Titolo programma",E.jsx("input",{value:Z,onChange:L=>te(L.target.value),placeholder:"Forza 4 settimane"})]}),R?E.jsx("p",{className:"hint",children:D?"Salvataggio titolo in corso...":"Titolo salvato automaticamente."}):null,E.jsx("p",{className:"hint",children:R?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[E.jsx("h2",{children:"Informazioni del cliente"}),b?E.jsx("a",{className:"btn btn-whatsapp",href:b,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):E.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Anagrafica"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Nome:"})," ",$e(y==null?void 0:y.fullName)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Et:"})," ",$e(y==null?void 0:y.age)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Sesso:"})," ",$e(y==null?void 0:y.sex)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Email:"})," ",$e(y==null?void 0:y.email)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Telefono:"})," ",$e(y==null?void 0:y.phone)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Come ci ha conosciuto:"})," ",$e(y==null?void 0:y.discoverySource)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Stato fisico e allenamento"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altezza:"})," ",$e(y==null?void 0:y.heightCm)," cm"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Peso:"})," ",$e(y==null?void 0:y.weightKg)," kg"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Esperienza programmi:"})," ",$e((y==null?void 0:y.pastProgram)||(y==null?void 0:y.experienceLevel))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti settimanali:"})," ",$e((y==null?void 0:y.trainingFrequency)||(y==null?void 0:y.trainingDaysPerWeek))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Durata sessione:"})," ",$e(y==null?void 0:y.workoutDuration)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Luogo allenamento:"})," ",$e(y==null?void 0:y.workoutLocation)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Attrezzatura:"})," ",$e(y==null?void 0:y.equipment)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Allenamenti svolti:"})," ",$e(y==null?void 0:y.trainingTypeHistory)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Infortuni/problemi:"})," ",$e(y==null?void 0:y.hasInjuries)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Dettagli infortuni:"})," ",$e(y==null?void 0:y.injuryDetails)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Obiettivi"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Obiettivo principale:"})," ",$e((y==null?void 0:y.objectivePrimary)||(y==null?void 0:y.goal))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Perch:"})," ",$e(y==null?void 0:y.objectiveReason)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Timeline risultati:"})," ",$e(y==null?void 0:y.expectedTimeline)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",$e((y==null?void 0:y.whatBlockedSoFar)||(y==null?void 0:y.notes))]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",$e(y==null?void 0:y.oneThingToImprove)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Importanza obiettivo:"})," ",$e(y==null?void 0:y.importanceScore)," / 10"]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Rischio se non cambia:"})," ",$e(y==null?void 0:y.riskIfNoChange)]})]}),E.jsxs("div",{className:"client-info-block",children:[E.jsx("h3",{children:"Supporto e decisione"}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Supporto preferito:"})," ",$e(y==null?void 0:y.supportPreference)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Altro supporto:"})," ",$e(y==null?void 0:y.supportPreferenceOther)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Fascia investimento:"})," ",$e(y==null?void 0:y.investmentRange)]}),E.jsxs("p",{className:"hint",children:[E.jsx("strong",{children:"Disponibilit a partire:"})," ",$e(y==null?void 0:y.readiness)]})]})]}),E.jsx("button",{className:"btn",disabled:!x||!Z||p,onClick:ge,type:"button",children:R?"Modifica scheda":"Crea scheda"}),R?E.jsx("button",{className:"btn btn-danger",disabled:p,onClick:()=>void M(),type:"button",children:"Elimina scheda"}):null]}),S?E.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:E.jsxs("article",{className:"card modal-card",children:[E.jsx("h2",{children:R?"Modifica scheda":"Compila la scheda"}),E.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),oe.map((L,X)=>E.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[E.jsxs("div",{className:"exercise-head",children:[E.jsxs("h2",{children:["Esercizio ",X+1]}),E.jsx("button",{className:"icon-btn",type:"button",onClick:()=>St(X),"aria-label":`Reset esercizio ${X+1}`,title:"Reset esercizio",children:""})]}),E.jsxs("label",{children:["Nome esercizio",E.jsx("input",{value:L.name,onChange:le=>Ne(X,{name:le.target.value}),placeholder:"Es. Squat bilanciere"})]}),E.jsxs("label",{children:["Numero serie",E.jsx("input",{type:"number",min:1,value:L.sets,onChange:le=>Ne(X,{sets:Number(le.target.value)})})]}),E.jsxs("label",{children:["Ripetizioni",E.jsx("input",{type:"number",min:1,value:L.reps,onChange:le=>Ne(X,{reps:Number(le.target.value)}),placeholder:"10"})]}),E.jsxs("label",{children:["Peso",E.jsx("input",{value:L.weight,onChange:le=>Ne(X,{weight:le.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),E.jsxs("label",{children:["URL video (YouTube o link diretto)",E.jsx("input",{value:tD(L.mediaUrl)?L.mediaUrl:"",onChange:le=>Ne(X,{mediaUrl:le.target.value}),placeholder:"https://..."})]}),E.jsxs("label",{children:["Oppure carica un'immagine",E.jsx("input",{type:"file",accept:"image/*",onChange:le=>{var he;return void ae(X,((he=le.target.files)==null?void 0:he[0])??null)},disabled:z===X}),y_(L.mediaUrl)?E.jsx("img",{src:L.mediaUrl,alt:`Anteprima esercizio ${X+1}`,className:"exercise-upload-preview"}):null]}),y_(L.mediaUrl)?E.jsxs("p",{className:"hint",children:["Immagine caricata."," ",E.jsx("button",{className:"btn-link",type:"button",onClick:()=>Ne(X,{mediaUrl:""}),children:"Rimuovi"})]}):null,z===X?E.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>It(X),children:"Rimuovi esercizio"})]},`exercise-${X}`)),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:et,children:"Aggiungi esercizio"}),E.jsx("button",{className:"btn",type:"button",disabled:p||Ae,onClick:()=>void ie(),children:Ae?"Attendi caricamento media...":R?"Salva modifiche":"Salva scheda tecnica"}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>k(!1),children:"Chiudi"})]})}):null,E.jsxs("article",{className:"card",children:[E.jsx("h2",{children:"Panoramica"}),E.jsxs("p",{className:"hint",children:["Clienti registrati: ",o.length]}),E.jsxs("p",{className:"hint",children:["Programmi creati: ",h.length]}),E.jsx("ul",{className:"list",children:h.slice(0,5).map(L=>{var X;return E.jsxs("li",{children:[E.jsx("strong",{children:L.title}),"  ",((X=L.exercises)==null?void 0:X.length)??0," esercizi  cliente ",V[L.clientId]||L.clientId]},L.id)})})]}),p?E.jsx("p",{className:"message",children:"Caricamento..."}):null]})}const uc=5;function rD(){const{user:n,role:e}=ia(),t=Al(),{showError:i,showSuccess:o}=qc(),[l,h]=Q.useState(0),[d,p]=Q.useState({fullName:(n==null?void 0:n.displayName)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:""}),[v,y]=Q.useState(!1);if(!n)return E.jsx(Dn,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return E.jsx(Dn,{to:"/app/coach",replace:!0});const I=n.email??"",S=Q.useMemo(()=>Math.round((l+1)/uc*100),[l]);function k($,Z){p(te=>({...te,[$]:Z}))}function z($){return $===0?[d.age.trim()?"":"Inserisci et.",d.sex.trim()?"":"Inserisci sesso.",d.email.trim()?"":"Inserisci e-mail.",d.phone.trim()?"":"Inserisci numero di telefono.",d.discoverySource.trim()?"":"Inserisci come ci hai conosciuto."].filter(Boolean):$===1?[d.heightCm.trim()?"":"Inserisci altezza.",d.weightKg.trim()?"":"Inserisci peso attuale.",d.pastProgram.trim()?"":"Seleziona esperienza programmi precedenti.",d.trainingFrequency.trim()?"":"Seleziona frequenza allenamento.",d.workoutDuration.trim()?"":"Seleziona durata allenamento.",d.workoutLocation.trim()?"":"Seleziona dove ti alleni.",d.equipment.trim()?"":"Seleziona attrezzatura disponibile.",d.trainingTypeHistory.trim()?"":"Descrivi tipo di allenamento fatto.",d.hasInjuries.trim()?"":"Indica se hai infortuni/problemi fisici."].filter(Boolean):$===2?[d.objectivePrimary.trim()?"":"Seleziona obiettivo principale.",d.objectiveReason.trim()?"":"Scrivi perch vuoi raggiungere lobiettivo.",d.expectedTimeline.trim()?"":"Scrivi in quanto tempo vuoi vedere risultati."].filter(Boolean):$===3?[d.supportPreference?"":"Seleziona supporto motivazionale preferito.",d.investmentRange.trim()?"":"Seleziona fascia investimento.",d.whatBlockedSoFar.trim()?"":"Spiega cosa ti ha bloccato finora.",d.oneThingToImprove.trim()?"":"Scrivi cosa vorresti migliorare in 3 mesi.",d.importanceScore.trim()?"":"Seleziona importanza obiettivo.",d.riskIfNoChange.trim()?"":"Scrivi cosa rischi se non cambi nulla."].filter(Boolean):$===4?[d.readiness?"":"Seleziona il livello di disponibilit a iniziare."].filter(Boolean):[]}function H(){const $=z(l);if($.length>0){i($[0]);return}h(Z=>Math.min(Z+1,uc-1))}async function x(){const $=z(l);if($.length>0){i($[0]);return}y(!0);try{await Bc({displayName:d.fullName.trim()||(n==null?void 0:n.displayName)||"",email:I,role:"client",requestedRole:"client",onboardingStatus:"completed",onboardingCompleted:!0,onboardingUpdatedAt:new Date().toISOString()}),await bx("onboarding",{fullName:d.fullName.trim(),age:d.age.trim(),sex:d.sex.trim(),email:d.email.trim(),phone:d.phone.trim(),discoverySource:d.discoverySource.trim(),heightCm:d.heightCm.trim(),weightKg:d.weightKg.trim(),pastProgram:d.pastProgram,trainingFrequency:d.trainingFrequency,workoutDuration:d.workoutDuration,workoutLocation:d.workoutLocation,equipment:d.equipment.trim(),trainingTypeHistory:d.trainingTypeHistory.trim(),hasInjuries:d.hasInjuries,injuryDetails:d.injuryDetails.trim(),objectivePrimary:d.objectivePrimary.trim(),objectiveReason:d.objectiveReason.trim(),expectedTimeline:d.expectedTimeline.trim(),supportPreference:d.supportPreference,supportPreferenceOther:d.supportPreferenceOther.trim(),investmentRange:d.investmentRange,whatBlockedSoFar:d.whatBlockedSoFar.trim(),oneThingToImprove:d.oneThingToImprove.trim(),importanceScore:Number(d.importanceScore||0),riskIfNoChange:d.riskIfNoChange.trim(),readiness:d.readiness,goal:d.objectivePrimary.trim(),experienceLevel:d.pastProgram.trim(),trainingDaysPerWeek:d.trainingFrequency.includes("1-2")?2:d.trainingFrequency.includes("3-4")?4:5,notes:d.whatBlockedSoFar.trim()}),o("Perfetto, profilo salvato."),t("/app/client",{replace:!0})}catch(Z){i(Qn(Z))}finally{y(!1)}}return E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),E.jsx("h1",{children:"Partiamo dal tuo percorso"}),E.jsxs("p",{className:"hero-sub",children:["Step ",l+1," di ",uc,"  Completamento ",S,"%"]}),E.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:E.jsx("div",{className:"onboarding-progress-bar",style:{width:`${S}%`}})}),l===0?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Nome e cognome",E.jsx("input",{value:d.fullName,onChange:$=>k("fullName",$.target.value),placeholder:"Nome e cognome"})]}),E.jsxs("label",{children:["Et *",E.jsx("input",{value:d.age,onChange:$=>k("age",$.target.value),type:"number",min:12,max:99,placeholder:"Es. 28"})]}),E.jsxs("label",{children:["Sesso *",E.jsx("input",{value:d.sex,onChange:$=>k("sex",$.target.value),placeholder:"Es. Uomo, Donna, Altro"})]}),E.jsxs("label",{children:["E-mail *",E.jsx("input",{value:d.email,onChange:$=>k("email",$.target.value),type:"email"})]}),E.jsxs("label",{children:["Numero di telefono *",E.jsx("input",{value:d.phone,onChange:$=>k("phone",$.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),E.jsxs("label",{children:["Come mi hai conosciuto? *",E.jsx("input",{value:d.discoverySource,onChange:$=>k("discoverySource",$.target.value),placeholder:"Instagram, passaparola, ecc."})]})]}):null,l===1?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Altezza (cm) *",E.jsx("input",{value:d.heightCm,onChange:$=>k("heightCm",$.target.value),type:"number",min:100,max:250})]}),E.jsxs("label",{children:["Peso attuale (kg) *",E.jsx("input",{value:d.weightKg,onChange:$=>k("weightKg",$.target.value),type:"number",min:30,max:250})]}),E.jsxs("label",{children:["Hai mai seguito un programma di allenamento? *",E.jsxs("select",{value:d.pastProgram,onChange:$=>k("pastProgram",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si da solo/a",children:"Si da solo/a"}),E.jsx("option",{value:"Si con un coach fisico",children:"Si con un coach fisico"}),E.jsx("option",{value:"Si con coach online",children:"Si con coach online"}),E.jsx("option",{value:"No",children:"No"})]})]}),E.jsxs("label",{children:["Quante volte ti alleni a settimana? *",E.jsxs("select",{value:d.trainingFrequency,onChange:$=>k("trainingFrequency",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"1-2 a settimana",children:"1-2 a settimana"}),E.jsx("option",{value:"3-4 a settimana",children:"3-4 a settimana"}),E.jsx("option",{value:"5+ a settimana",children:"5+ a settimana"})]})]}),E.jsxs("label",{children:["Quanto tempo riesci a dedicare ad ogni allenamento? *",E.jsxs("select",{value:d.workoutDuration,onChange:$=>k("workoutDuration",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Meno di 30 minuti",children:"Meno di 30 minuti"}),E.jsx("option",{value:"30-45 minuti",children:"30-45 minuti"}),E.jsx("option",{value:"1 ora",children:"1 ora"}),E.jsx("option",{value:"Pi di 1 ora",children:"Pi di 1 ora"})]})]}),E.jsxs("label",{children:["Dove ti allenerai? *",E.jsxs("select",{value:d.workoutLocation,onChange:$=>k("workoutLocation",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"In palestra",children:"In palestra"}),E.jsx("option",{value:"A casa con attrezzi",children:"A casa con attrezzi"}),E.jsx("option",{value:"A corpo libero",children:"A corpo libero"}),E.jsx("option",{value:"All'aperto",children:"All'aperto"})]})]}),E.jsxs("label",{children:["Che tipo di attrezzi hai a disposizione? *",E.jsx("input",{value:d.equipment,onChange:$=>k("equipment",$.target.value),placeholder:"Es. manubri, elastici, sbarra..."})]}),E.jsxs("label",{children:["Che tipo di allenamento fai o hai fatto? *",E.jsx("textarea",{value:d.trainingTypeHistory,onChange:$=>k("trainingTypeHistory",$.target.value),placeholder:"Es. sala pesi, corsa, functional..."})]}),E.jsxs("label",{children:["Hai problemi fisici o infortuni? *",E.jsxs("select",{value:d.hasInjuries,onChange:$=>k("hasInjuries",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Si",children:"Si"}),E.jsx("option",{value:"No",children:"No"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),d.hasInjuries==="Si"||d.hasInjuries==="Altro"?E.jsxs("label",{children:["Dettagli infortunio/problema",E.jsx("textarea",{value:d.injuryDetails,onChange:$=>k("injuryDetails",$.target.value)})]}):null]}):null,l===2?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Obiettivo principale *",E.jsxs("select",{value:d.objectivePrimary,onChange:$=>k("objectivePrimary",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"Tonificazione",children:"Tonificazione"}),E.jsx("option",{value:"Dimagrimento",children:"Dimagrimento"}),E.jsx("option",{value:"Massa muscolare",children:"Massa muscolare"}),E.jsx("option",{value:"Performance",children:"Performance"}),E.jsx("option",{value:"Calisthenics skills",children:"Calisthenics skills"}),E.jsx("option",{value:"Altro",children:"Altro"})]})]}),E.jsxs("label",{children:["Perch vuoi raggiungere questo obiettivo? *",E.jsx("textarea",{value:d.objectiveReason,onChange:$=>k("objectiveReason",$.target.value)})]}),E.jsxs("label",{children:["In quanto tempo vorresti vedere risultati? *",E.jsx("input",{value:d.expectedTimeline,onChange:$=>k("expectedTimeline",$.target.value),placeholder:"Es. 3 mesi"})]})]}):null,l===3?E.jsxs(E.Fragment,{children:[E.jsxs("label",{children:["Che tipo di supporto ti motiva? *",E.jsxs("select",{value:d.supportPreference,onChange:$=>k("supportPreference",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"call_settimanale",children:"Call settimanale con feedback personalizzato"}),E.jsx("option",{value:"messaggio_motivazionale",children:"Messaggio motivazionale 1-2 volte a settimana"}),E.jsx("option",{value:"checkin_progressi",children:"Check-in di progressi (ogni fine settimana)"}),E.jsx("option",{value:"contatto_libero",children:"Possibilit di scrivere al coach in qualsiasi momento"}),E.jsx("option",{value:"consigli_periodici",children:"Consigli periodici"}),E.jsx("option",{value:"challenge_settimanali",children:"Challenge settimanali per motivarmi"}),E.jsx("option",{value:"autonomo",children:"Preferisco essere autonomo senza troppo contatto"}),E.jsx("option",{value:"other",children:"Altro"})]})]}),d.supportPreference==="other"?E.jsxs("label",{children:["Specifica altro supporto",E.jsx("input",{value:d.supportPreferenceOther,onChange:$=>k("supportPreferenceOther",$.target.value)})]}):null,E.jsxs("label",{children:["Fascia di investimento disponibile *",E.jsxs("select",{value:d.investmentRange,onChange:$=>k("investmentRange",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"fino a 100",children:"fino a 100"}),E.jsx("option",{value:"100-150",children:"100-150"}),E.jsx("option",{value:"150-250",children:"150-250"}),E.jsx("option",{value:"oltre 250",children:"Oltre 250"})]})]}),E.jsxs("label",{children:["Cosa ti ha bloccato fino ad oggi? *",E.jsx("textarea",{value:d.whatBlockedSoFar,onChange:$=>k("whatBlockedSoFar",$.target.value)})]}),E.jsxs("label",{children:["Se migliorassi una sola cosa nei prossimi 3 mesi, quale sarebbe? *",E.jsx("textarea",{value:d.oneThingToImprove,onChange:$=>k("oneThingToImprove",$.target.value)})]}),E.jsxs("label",{children:["Quanto  importante per te raggiungere questo obiettivo? (1-10) *",E.jsx("input",{value:d.importanceScore,onChange:$=>k("importanceScore",$.target.value),type:"number",min:1,max:10})]}),E.jsxs("label",{children:["Cosa rischi se non cambi nulla nei prossimi 3 mesi? *",E.jsx("textarea",{value:d.riskIfNoChange,onChange:$=>k("riskIfNoChange",$.target.value)})]})]}):null,l===4?E.jsxs("label",{children:["Sei pronto/a a iniziare un percorso personalizzato? *",E.jsxs("select",{value:d.readiness,onChange:$=>k("readiness",$.target.value),children:[E.jsx("option",{value:"",children:"Seleziona"}),E.jsx("option",{value:"pronto",children:"Si sono pronto/a a investire su me stesso/a e partire"}),E.jsx("option",{value:"dubbio",children:"Si, ma ho ancora qualche dubbio e vorrei parlarne prima"}),E.jsx("option",{value:"non_pronto",children:"No, al momento non sono pronto/a"})]})]}):null,E.jsxs("div",{className:"onboarding-actions",children:[E.jsx("button",{className:"btn btn-ghost",type:"button",disabled:l===0||v,onClick:()=>h($=>Math.max(0,$-1)),children:"Indietro"}),l<uc-1?E.jsx("button",{className:"btn",type:"button",disabled:v,onClick:H,children:"Continua"}):E.jsx("button",{className:"btn",disabled:v,type:"button",onClick:()=>void x(),children:v?"Salvataggio...":"Completa onboarding"})]}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Il(),children:"Esci e cambia account"})]})})}function D0(){return E.jsx("main",{className:"page page-center",children:E.jsxs("div",{className:"card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Caricamento in corso"})]})})}class iD extends Q.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?E.jsx("main",{className:"page page-center",children:E.jsxs("section",{className:"card auth-card",children:[E.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),E.jsx("h1",{children:"Qualcosa non ha funzionato"}),E.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),E.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function v_({allow:n,children:e}){const{user:t,role:i,initializing:o}=ia();return o?E.jsx(D0,{}):t?i?n.includes(i)?e:E.jsx(Dn,{to:i==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:E.jsx(Dn,{to:"/onboarding",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function sD(){const{user:n,role:e,initializing:t}=ia();return t?E.jsx(D0,{}):n?e?E.jsx(Dn,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):E.jsx(Dn,{to:"/app/client",replace:!0}):E.jsx(Dn,{to:"/auth",replace:!0})}function oD(){return E.jsx(iD,{children:E.jsxs(jI,{children:[E.jsx(Ss,{path:"/",element:E.jsx(sD,{})}),E.jsx(Ss,{path:"/auth",element:E.jsx(Gx,{})}),E.jsx(Ss,{path:"/onboarding",element:E.jsx(rD,{})}),E.jsx(Ss,{path:"/app/coach",element:E.jsx(v_,{allow:["admin","trainer"],children:E.jsx(nD,{})})}),E.jsx(Ss,{path:"/app/client",element:E.jsx(v_,{allow:["client"],children:E.jsx(Jx,{})})}),E.jsx(Ss,{path:"*",element:E.jsx(Dn,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});WT.createRoot(document.getElementById("root")).render(E.jsx(w_.StrictMode,{children:E.jsx(YI,{children:E.jsx(HI,{children:E.jsx(oD,{})})})}));
