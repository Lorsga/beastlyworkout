function rC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function z0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tp={exports:{}},ql={},np={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function iC(){if(Qy)return qe;Qy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function E($){return $===null||typeof $!="object"?null:($=S&&$[S]||$["@@iterator"],typeof $=="function"?$:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function C($,U,pe){this.props=$,this.context=U,this.refs=R,this.updater=pe||P}C.prototype.isReactComponent={},C.prototype.setState=function($,U){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,U,"setState")},C.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function B(){}B.prototype=C.prototype;function Q($,U,pe){this.props=$,this.context=U,this.refs=R,this.updater=pe||P}var K=Q.prototype=new B;K.constructor=Q,O(K,C.prototype),K.isPureReactComponent=!0;var ee=Array.isArray,X=Object.prototype.hasOwnProperty,se={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A($,U,pe){var Ce,Z={},ie=null,Ie=null;if(U!=null)for(Ce in U.ref!==void 0&&(Ie=U.ref),U.key!==void 0&&(ie=""+U.key),U)X.call(U,Ce)&&!k.hasOwnProperty(Ce)&&(Z[Ce]=U[Ce]);var Te=arguments.length-2;if(Te===1)Z.children=pe;else if(1<Te){for(var je=Array(Te),Ye=0;Ye<Te;Ye++)je[Ye]=arguments[Ye+2];Z.children=je}if($&&$.defaultProps)for(Ce in Te=$.defaultProps,Te)Z[Ce]===void 0&&(Z[Ce]=Te[Ce]);return{$$typeof:n,type:$,key:ie,ref:Ie,props:Z,_owner:se.current}}function N($,U){return{$$typeof:n,type:$.type,key:U,ref:$.ref,props:$.props,_owner:$._owner}}function j($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function M($){var U={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(pe){return U[pe]})}var L=/\/+/g;function x($,U){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):U.toString(36)}function ze($,U,pe,Ce,Z){var ie=typeof $;(ie==="undefined"||ie==="boolean")&&($=null);var Ie=!1;if($===null)Ie=!0;else switch(ie){case"string":case"number":Ie=!0;break;case"object":switch($.$$typeof){case n:case e:Ie=!0}}if(Ie)return Ie=$,Z=Z(Ie),$=Ce===""?"."+x(Ie,0):Ce,ee(Z)?(pe="",$!=null&&(pe=$.replace(L,"$&/")+"/"),ze(Z,U,pe,"",function(Ye){return Ye})):Z!=null&&(j(Z)&&(Z=N(Z,pe+(!Z.key||Ie&&Ie.key===Z.key?"":(""+Z.key).replace(L,"$&/")+"/")+$)),U.push(Z)),1;if(Ie=0,Ce=Ce===""?".":Ce+":",ee($))for(var Te=0;Te<$.length;Te++){ie=$[Te];var je=Ce+x(ie,Te);Ie+=ze(ie,U,pe,je,Z)}else if(je=E($),typeof je=="function")for($=je.call($),Te=0;!(ie=$.next()).done;)ie=ie.value,je=Ce+x(ie,Te++),Ie+=ze(ie,U,pe,je,Z);else if(ie==="object")throw U=String($),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ie}function De($,U,pe){if($==null)return $;var Ce=[],Z=0;return ze($,Ce,"","",function(ie){return U.call(pe,ie,Z++)}),Ce}function $e($){if($._status===-1){var U=$._result;U=U(),U.then(function(pe){($._status===0||$._status===-1)&&($._status=1,$._result=pe)},function(pe){($._status===0||$._status===-1)&&($._status=2,$._result=pe)}),$._status===-1&&($._status=0,$._result=U)}if($._status===1)return $._result.default;throw $._result}var Ve={current:null},le={transition:null},de={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:le,ReactCurrentOwner:se};function he(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:De,forEach:function($,U,pe){De($,function(){U.apply(this,arguments)},pe)},count:function($){var U=0;return De($,function(){U++}),U},toArray:function($){return De($,function(U){return U})||[]},only:function($){if(!j($))throw Error("React.Children.only expected to receive a single React element child.");return $}},qe.Component=C,qe.Fragment=t,qe.Profiler=s,qe.PureComponent=Q,qe.StrictMode=r,qe.Suspense=f,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,qe.act=he,qe.cloneElement=function($,U,pe){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Ce=O({},$.props),Z=$.key,ie=$.ref,Ie=$._owner;if(U!=null){if(U.ref!==void 0&&(ie=U.ref,Ie=se.current),U.key!==void 0&&(Z=""+U.key),$.type&&$.type.defaultProps)var Te=$.type.defaultProps;for(je in U)X.call(U,je)&&!k.hasOwnProperty(je)&&(Ce[je]=U[je]===void 0&&Te!==void 0?Te[je]:U[je])}var je=arguments.length-2;if(je===1)Ce.children=pe;else if(1<je){Te=Array(je);for(var Ye=0;Ye<je;Ye++)Te[Ye]=arguments[Ye+2];Ce.children=Te}return{$$typeof:n,type:$.type,key:Z,ref:ie,props:Ce,_owner:Ie}},qe.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},qe.createElement=A,qe.createFactory=function($){var U=A.bind(null,$);return U.type=$,U},qe.createRef=function(){return{current:null}},qe.forwardRef=function($){return{$$typeof:d,render:$}},qe.isValidElement=j,qe.lazy=function($){return{$$typeof:_,_payload:{_status:-1,_result:$},_init:$e}},qe.memo=function($,U){return{$$typeof:m,type:$,compare:U===void 0?null:U}},qe.startTransition=function($){var U=le.transition;le.transition={};try{$()}finally{le.transition=U}},qe.unstable_act=he,qe.useCallback=function($,U){return Ve.current.useCallback($,U)},qe.useContext=function($){return Ve.current.useContext($)},qe.useDebugValue=function(){},qe.useDeferredValue=function($){return Ve.current.useDeferredValue($)},qe.useEffect=function($,U){return Ve.current.useEffect($,U)},qe.useId=function(){return Ve.current.useId()},qe.useImperativeHandle=function($,U,pe){return Ve.current.useImperativeHandle($,U,pe)},qe.useInsertionEffect=function($,U){return Ve.current.useInsertionEffect($,U)},qe.useLayoutEffect=function($,U){return Ve.current.useLayoutEffect($,U)},qe.useMemo=function($,U){return Ve.current.useMemo($,U)},qe.useReducer=function($,U,pe){return Ve.current.useReducer($,U,pe)},qe.useRef=function($){return Ve.current.useRef($)},qe.useState=function($){return Ve.current.useState($)},qe.useSyncExternalStore=function($,U,pe){return Ve.current.useSyncExternalStore($,U,pe)},qe.useTransition=function(){return Ve.current.useTransition()},qe.version="18.3.1",qe}var Xy;function Tm(){return Xy||(Xy=1,np.exports=iC()),np.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function sC(){if(Yy)return ql;Yy=1;var n=Tm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,S={},E=null,P=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(S[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)S[_]===void 0&&(S[_]=f[_]);return{$$typeof:e,type:d,key:E,ref:P,props:S,_owner:s.current}}return ql.Fragment=t,ql.jsx=u,ql.jsxs=u,ql}var Jy;function oC(){return Jy||(Jy=1,tp.exports=sC()),tp.exports}var g=oC(),V=Tm();const $0=z0(V),Dp=rC({__proto__:null,default:$0},[V]);var Bc={},rp={exports:{}},Xn={},ip={exports:{}},sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function aC(){return Zy||(Zy=1,(function(n){function e(le,de){var he=le.length;le.push(de);e:for(;0<he;){var $=he-1>>>1,U=le[$];if(0<s(U,de))le[$]=de,le[he]=U,he=$;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var de=le[0],he=le.pop();if(he!==de){le[0]=he;e:for(var $=0,U=le.length,pe=U>>>1;$<pe;){var Ce=2*($+1)-1,Z=le[Ce],ie=Ce+1,Ie=le[ie];if(0>s(Z,he))ie<U&&0>s(Ie,Z)?(le[$]=Ie,le[ie]=he,$=ie):(le[$]=Z,le[Ce]=he,$=Ce);else if(ie<U&&0>s(Ie,he))le[$]=Ie,le[ie]=he,$=ie;else break e}}return de}function s(le,de){var he=le.sortIndex-de.sortIndex;return he!==0?he:le.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,S=null,E=3,P=!1,O=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(le){for(var de=t(m);de!==null;){if(de.callback===null)r(m);else if(de.startTime<=le)r(m),de.sortIndex=de.expirationTime,e(f,de);else break;de=t(m)}}function ee(le){if(R=!1,K(le),!O)if(t(f)!==null)O=!0,$e(X);else{var de=t(m);de!==null&&Ve(ee,de.startTime-le)}}function X(le,de){O=!1,R&&(R=!1,B(A),A=-1),P=!0;var he=E;try{for(K(de),S=t(f);S!==null&&(!(S.expirationTime>de)||le&&!M());){var $=S.callback;if(typeof $=="function"){S.callback=null,E=S.priorityLevel;var U=$(S.expirationTime<=de);de=n.unstable_now(),typeof U=="function"?S.callback=U:S===t(f)&&r(f),K(de)}else r(f);S=t(f)}if(S!==null)var pe=!0;else{var Ce=t(m);Ce!==null&&Ve(ee,Ce.startTime-de),pe=!1}return pe}finally{S=null,E=he,P=!1}}var se=!1,k=null,A=-1,N=5,j=-1;function M(){return!(n.unstable_now()-j<N)}function L(){if(k!==null){var le=n.unstable_now();j=le;var de=!0;try{de=k(!0,le)}finally{de?x():(se=!1,k=null)}}else se=!1}var x;if(typeof Q=="function")x=function(){Q(L)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,De=ze.port2;ze.port1.onmessage=L,x=function(){De.postMessage(null)}}else x=function(){C(L,0)};function $e(le){k=le,se||(se=!0,x())}function Ve(le,de){A=C(function(){le(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){O||P||(O=!0,$e(X))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(le){switch(E){case 1:case 2:case 3:var de=3;break;default:de=E}var he=E;E=de;try{return le()}finally{E=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,de){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var he=E;E=le;try{return de()}finally{E=he}},n.unstable_scheduleCallback=function(le,de,he){var $=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?$+he:$):he=$,le){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=he+U,le={id:_++,callback:de,priorityLevel:le,startTime:he,expirationTime:U,sortIndex:-1},he>$?(le.sortIndex=he,e(m,le),t(f)===null&&le===t(m)&&(R?(B(A),A=-1):R=!0,Ve(ee,he-$))):(le.sortIndex=U,e(f,le),O||P||(O=!0,$e(X))),le},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(le){var de=E;return function(){var he=E;E=de;try{return le.apply(this,arguments)}finally{E=he}}}})(sp)),sp}var e_;function lC(){return e_||(e_=1,ip.exports=aC()),ip.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function uC(){if(t_)return Xn;t_=1;var n=Tm(),e=lC();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},S={};function E(i){return f.call(S,i)?!0:f.call(_,i)?!1:m.test(i)?S[i]=!0:(_[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function R(i,o,l,h,p,y,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=T}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new R(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(B,Q);C[o]=new R(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(B,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(B,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,o,l,h){var p=C.hasOwnProperty(o)?C[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,l,p,h)&&(l=null),h||p===null?E(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),se=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),le=Symbol.iterator;function de(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,$;function U(i){if($===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+i}var pe=!1;function Ce(i,o){if(!i||pe)return"";pe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var h=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){h=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){h=Y}i()}}catch(Y){if(Y&&h&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,D=y.length-1;1<=T&&0<=D&&p[T]!==y[D];)D--;for(;1<=T&&0<=D;T--,D--)if(p[T]!==y[D]){if(T!==1||D!==1)do if(T--,D--,0>D||p[T]!==y[D]){var F=`
`+p[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=D);break}}}finally{pe=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?U(i):""}function Z(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case se:return"Portal";case N:return"Profiler";case A:return"StrictMode";case x:return"Suspense";case ze:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case De:return o=i.displayName||null,o!==null?o:ie(i.type)||"Memo";case $e:o=i._payload,i=i._init;try{return ie(i(o))}catch{}}return null}function Ie(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function je(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ye(i){var o=je(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function St(i){i._valueTracker||(i._valueTracker=Ye(i))}function Pt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=je(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function nt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function rt(i,o){var l=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function fn(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Te(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Tt(i,o){o=o.checked,o!=null&&K(i,"checked",o,!1)}function ps(i,o){Tt(i,o);var l=Te(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Oi(i,o.type,l):o.hasOwnProperty("defaultValue")&&Oi(i,o.type,Te(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Cn(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Oi(i,o,l){(o!=="number"||nt(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var An=Array.isArray;function Gt(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Te(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function ms(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Lr(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(An(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Te(l)}}function pn(i,o){var l=Te(o.value),h=Te(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function jr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Rt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Rt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Dn,Er=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Dn=Dn||document.createElement("div"),Dn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Dn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ir(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fr=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(i){Fr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Vn[o]=Vn[i]})});function Mn(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Vn.hasOwnProperty(i)&&Vn[i]?(""+o).trim():o+"px"}function Ur(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Mn(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Di=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lo(i,o){if(o){if(Di[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ai(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sr=null;function Vi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Sr=null,mn=null,Ln=null;function Mi(i){if(i=xl(i)){if(typeof Sr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=ic(o),Sr(i.stateNode,i.type,o))}}function jn(i){mn?Ln?Ln.push(i):Ln=[i]:mn=i}function gs(){if(mn){var i=mn,o=Ln;if(Ln=mn=null,Mi(i),o)for(i=0;i<o.length;i++)Mi(o[i])}}function li(i,o){return i(o)}function Jt(){}var yt=!1;function Be(i,o,l){if(yt)return i(o,l);yt=!0;try{return li(i,o,l)}finally{yt=!1,(mn!==null||Ln!==null)&&(Jt(),gs())}}function ht(i,o){var l=i.stateNode;if(l===null)return null;var h=ic(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Lt=!1;if(d)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Lt=!1}function or(i,o,l,h,p,y,T,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(ae){this.onError(ae)}}var ar=!1,Li=null,lr=!1,uo=null,Yo={onError:function(i){ar=!0,Li=i}};function vs(i,o,l,h,p,y,T,D,F){ar=!1,Li=null,or.apply(Yo,arguments)}function co(i,o,l,h,p,y,T,D,F){if(vs.apply(this,arguments),ar){if(ar){var Y=Li;ar=!1,Li=null}else throw Error(t(198));lr||(lr=!0,uo=Y)}}function Un(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function zr(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function zn(i){if(Un(i)!==i)throw Error(t(188))}function ur(i){var o=i.alternate;if(!o){if(o=Un(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return zn(p),i;if(y===h)return zn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,D=p.child;D;){if(D===l){T=!0,l=p,h=y;break}if(D===h){T=!0,h=p,l=y;break}D=D.sibling}if(!T){for(D=y.child;D;){if(D===l){T=!0,l=y,h=p;break}if(D===h){T=!0,h=y,l=p;break}D=D.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function ho(i){return i=ur(i),i!==null?ys(i):null}function ys(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=ys(i);if(o!==null)return o;i=i.sibling}return null}var _s=e.unstable_scheduleCallback,jt=e.unstable_cancelCallback,ot=e.unstable_shouldYield,gl=e.unstable_requestPaint,at=e.unstable_now,Jo=e.unstable_getCurrentPriorityLevel,ji=e.unstable_ImmediatePriority,$r=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,fo=e.unstable_LowPriority,Zo=e.unstable_IdlePriority,Fi=null,Pn=null;function ea(i){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Fi,i,void 0,(i.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:na,po=Math.log,ta=Math.LN2;function na(i){return i>>>=0,i===0?32:31-(po(i)/ta|0)|0}var ws=64,Es=4194304;function ui(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ui(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,T=l&268435455;if(T!==0){var D=T&~p;D!==0?h=ui(D):(y&=T,y!==0&&(h=ui(y)))}else T=l&~p,T!==0?h=ui(T):y!==0&&(h=ui(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-Zt(o),p=1<<l,h|=i[l],o&=~p;return h}function mo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Br(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var T=31-Zt(y),D=1<<T,F=p[T];F===-1?((D&l)===0||(D&h)!==0)&&(p[T]=mo(D,o)):F<=o&&(i.expiredLanes|=D),y&=~D}}function gn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function zi(){var i=ws;return ws<<=1,(ws&4194240)===0&&(ws=64),i}function ci(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function hi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Zt(o),i[o]=l}function lt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Zt(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function I(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-Zt(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var H=0;function te(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var be,He,Tr,Ir,ra,go=!1,cr=[],Ft=null,Hr=null,Wr=null,Ss=new Map,br=new Map,di=[],xd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zu(i,o){switch(i){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Ss.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(o.pointerId)}}function Bn(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=xl(o),o!==null&&He(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Nd(i,o,l,h,p){switch(o){case"focusin":return Ft=Bn(Ft,i,o,l,h,p),!0;case"dragenter":return Hr=Bn(Hr,i,o,l,h,p),!0;case"mouseover":return Wr=Bn(Wr,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return Ss.set(y,Bn(Ss.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,br.set(y,Bn(br.get(y)||null,i,o,l,h,p)),!0}return!1}function $u(i){var o=Eo(i.target);if(o!==null){var l=Un(o);if(l!==null){if(o=l.tag,o===13){if(o=zr(l),o!==null){i.blockedOn=o,ra(i.priority,function(){Tr(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $i(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=ia(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);sr=h,l.target.dispatchEvent(h),sr=null}else return o=xl(l),o!==null&&He(o),i.blockedOn=l,!1;o.shift()}return!0}function vo(i,o,l){$i(i)&&l.delete(o)}function Bu(){go=!1,Ft!==null&&$i(Ft)&&(Ft=null),Hr!==null&&$i(Hr)&&(Hr=null),Wr!==null&&$i(Wr)&&(Wr=null),Ss.forEach(vo),br.forEach(vo)}function qr(i,o){i.blockedOn===o&&(i.blockedOn=null,go||(go=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bu)))}function Gr(i){function o(p){return qr(p,i)}if(0<cr.length){qr(cr[0],i);for(var l=1;l<cr.length;l++){var h=cr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Ft!==null&&qr(Ft,i),Hr!==null&&qr(Hr,i),Wr!==null&&qr(Wr,i),Ss.forEach(o),br.forEach(o),l=0;l<di.length;l++)h=di[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<di.length&&(l=di[0],l.blockedOn===null);)$u(l),l.blockedOn===null&&di.shift()}var Bi=ee.ReactCurrentBatchConfig,Ts=!0;function _t(i,o,l,h){var p=H,y=Bi.transition;Bi.transition=null;try{H=1,vl(i,o,l,h)}finally{H=p,Bi.transition=y}}function Od(i,o,l,h){var p=H,y=Bi.transition;Bi.transition=null;try{H=4,vl(i,o,l,h)}finally{H=p,Bi.transition=y}}function vl(i,o,l,h){if(Ts){var p=ia(i,o,l,h);if(p===null)Hd(i,o,h,yo,l),zu(i,h);else if(Nd(p,i,o,l,h))h.stopPropagation();else if(zu(i,h),o&4&&-1<xd.indexOf(i)){for(;p!==null;){var y=xl(p);if(y!==null&&be(y),y=ia(i,o,l,h),y===null&&Hd(i,o,h,yo,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Hd(i,o,h,null,l)}}var yo=null;function ia(i,o,l,h){if(yo=null,i=Vi(h),i=Eo(i),i!==null)if(o=Un(i),o===null)i=null;else if(l=o.tag,l===13){if(i=zr(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return yo=i,null}function yl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jo()){case ji:return 1;case $r:return 4;case $n:case fo:return 16;case Zo:return 536870912;default:return 16}default:return 16}}var hr=null,sa=null,Hn=null;function _l(){if(Hn)return Hn;var i,o=sa,l=o.length,h,p="value"in hr?hr.value:hr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var T=l-i;for(h=1;h<=T&&o[l-h]===p[y-h];h++);return Hn=p.slice(i,1<h?1-h:void 0)}function oa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function fi(){return!0}function wl(){return!1}function on(i){function o(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fi:wl,this.isPropagationStopped=wl,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),o}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=on(Kr),pi=he({},Kr,{view:0,detail:0}),Dd=on(pi),la,Hi,Is,_o=he({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Is&&(Is&&i.type==="mousemove"?(la=i.screenX-Is.screenX,Hi=i.screenY-Is.screenY):Hi=la=0,Is=i),la)},movementY:function(i){return"movementY"in i?i.movementY:Hi}}),ua=on(_o),El=he({},_o,{dataTransfer:0}),Hu=on(El),ca=he({},pi,{relatedTarget:0}),ha=on(ca),Wu=he({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wi=on(Wu),qu=he({},Kr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Gu=on(qu),Ku=he({},Kr,{data:0}),Sl=on(Ku),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Qu[i])?!!o[i]:!1}function mi(){return Xu}var c=he({},pi,{key:function(i){if(i.key){var o=da[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=oa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(i){return i.type==="keypress"?oa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?oa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=on(c),w=he({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=on(w),W=he({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),J=on(W),fe=he({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ut=on(fe),Kt=he({},_o,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=on(Kt),en=[9,13,27,32],Ut=d&&"CompositionEvent"in window,Cr=null;d&&"documentMode"in document&&(Cr=document.documentMode);var dr=d&&"TextEvent"in window&&!Cr,wo=d&&(!Ut||Cr&&8<Cr&&11>=Cr),fa=" ",Bg=!1;function Hg(i,o){switch(i){case"keyup":return en.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pa=!1;function eb(i,o){switch(i){case"compositionend":return Wg(o);case"keypress":return o.which!==32?null:(Bg=!0,fa);case"textInput":return i=o.data,i===fa&&Bg?null:i;default:return null}}function tb(i,o){if(pa)return i==="compositionend"||!Ut&&Hg(i,o)?(i=_l(),Hn=sa=hr=null,pa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wo&&o.locale!=="ko"?null:o.data;default:return null}}var nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!nb[i.type]:o==="textarea"}function Gg(i,o,l,h){jn(h),o=tc(o,"onChange"),0<o.length&&(l=new aa("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var Tl=null,Il=null;function rb(i){hv(i,0)}function Yu(i){var o=_a(i);if(Pt(o))return i}function ib(i,o){if(i==="change")return o}var Kg=!1;if(d){var Vd;if(d){var Md="oninput"in document;if(!Md){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Md=typeof Qg.oninput=="function"}Vd=Md}else Vd=!1;Kg=Vd&&(!document.documentMode||9<document.documentMode)}function Xg(){Tl&&(Tl.detachEvent("onpropertychange",Yg),Il=Tl=null)}function Yg(i){if(i.propertyName==="value"&&Yu(Il)){var o=[];Gg(o,Il,i,Vi(i)),Be(rb,o)}}function sb(i,o,l){i==="focusin"?(Xg(),Tl=o,Il=l,Tl.attachEvent("onpropertychange",Yg)):i==="focusout"&&Xg()}function ob(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yu(Il)}function ab(i,o){if(i==="click")return Yu(o)}function lb(i,o){if(i==="input"||i==="change")return Yu(o)}function ub(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Qr=typeof Object.is=="function"?Object.is:ub;function bl(i,o){if(Qr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!Qr(i[p],o[p]))return!1}return!0}function Jg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Zg(i,o){var l=Jg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Jg(l)}}function ev(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ev(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function tv(){for(var i=window,o=nt();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=nt(i.document)}return o}function Ld(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function cb(i){var o=tv(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&ev(l.ownerDocument.documentElement,l)){if(h!==null&&Ld(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Zg(l,y);var T=Zg(l,h);p&&T&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var hb=d&&"documentMode"in document&&11>=document.documentMode,ma=null,jd=null,Cl=null,Fd=!1;function nv(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Fd||ma==null||ma!==nt(h)||(h=ma,"selectionStart"in h&&Ld(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Cl&&bl(Cl,h)||(Cl=h,h=tc(jd,"onSelect"),0<h.length&&(o=new aa("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=ma)))}function Ju(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var ga={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},Ud={},rv={};d&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Zu(i){if(Ud[i])return Ud[i];if(!ga[i])return i;var o=ga[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in rv)return Ud[i]=o[l];return i}var iv=Zu("animationend"),sv=Zu("animationiteration"),ov=Zu("animationstart"),av=Zu("transitionend"),lv=new Map,uv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(i,o){lv.set(i,o),a(o,[i])}for(var zd=0;zd<uv.length;zd++){var $d=uv[zd],db=$d.toLowerCase(),fb=$d[0].toUpperCase()+$d.slice(1);bs(db,"on"+fb)}bs(iv,"onAnimationEnd"),bs(sv,"onAnimationIteration"),bs(ov,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(av,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function cv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,co(h,o,void 0,i),i.currentTarget=null}function hv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var T=h.length-1;0<=T;T--){var D=h[T],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==y&&p.isPropagationStopped())break e;cv(p,D,Y),y=F}else for(T=0;T<h.length;T++){if(D=h[T],F=D.instance,Y=D.currentTarget,D=D.listener,F!==y&&p.isPropagationStopped())break e;cv(p,D,Y),y=F}}}if(lr)throw i=uo,lr=!1,uo=null,i}function mt(i,o){var l=o[Xd];l===void 0&&(l=o[Xd]=new Set);var h=i+"__bubble";l.has(h)||(dv(o,i,2,!1),l.add(h))}function Bd(i,o,l){var h=0;o&&(h|=4),dv(l,i,h,o)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Pl(i){if(!i[ec]){i[ec]=!0,r.forEach(function(l){l!=="selectionchange"&&(pb.has(l)||Bd(l,!1,i),Bd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ec]||(o[ec]=!0,Bd("selectionchange",!1,o))}}function dv(i,o,l,h){switch(yl(o)){case 1:var p=_t;break;case 4:p=Od;break;default:p=vl}l=p.bind(null,o,l,i),p=void 0,!Lt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Hd(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var D=h.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;T=T.return}for(;D!==null;){if(T=Eo(D),T===null)return;if(F=T.tag,F===5||F===6){h=y=T;continue e}D=D.parentNode}}h=h.return}Be(function(){var Y=y,ae=Vi(l),ue=[];e:{var oe=lv.get(i);if(oe!==void 0){var ge=aa,_e=i;switch(i){case"keypress":if(oa(l)===0)break e;case"keydown":case"keyup":ge=v;break;case"focusin":_e="focus",ge=ha;break;case"focusout":_e="blur",ge=ha;break;case"beforeblur":case"afterblur":ge=ha;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=J;break;case iv:case sv:case ov:ge=Wi;break;case av:ge=ut;break;case"scroll":ge=Dd;break;case"wheel":ge=Qe;break;case"copy":case"cut":case"paste":ge=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=b}var we=(o&4)!==0,Dt=!we&&i==="scroll",q=we?oe!==null?oe+"Capture":null:oe;we=[];for(var z=Y,G;z!==null;){G=z;var ce=G.stateNode;if(G.tag===5&&ce!==null&&(G=ce,q!==null&&(ce=ht(z,q),ce!=null&&we.push(Rl(z,ce,G)))),Dt)break;z=z.return}0<we.length&&(oe=new ge(oe,_e,null,l,ae),ue.push({event:oe,listeners:we}))}}if((o&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",oe&&l!==sr&&(_e=l.relatedTarget||l.fromElement)&&(Eo(_e)||_e[qi]))break e;if((ge||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,ge?(_e=l.relatedTarget||l.toElement,ge=Y,_e=_e?Eo(_e):null,_e!==null&&(Dt=Un(_e),_e!==Dt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ge=null,_e=Y),ge!==_e)){if(we=ua,ce="onMouseLeave",q="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(we=b,ce="onPointerLeave",q="onPointerEnter",z="pointer"),Dt=ge==null?oe:_a(ge),G=_e==null?oe:_a(_e),oe=new we(ce,z+"leave",ge,l,ae),oe.target=Dt,oe.relatedTarget=G,ce=null,Eo(ae)===Y&&(we=new we(q,z+"enter",_e,l,ae),we.target=G,we.relatedTarget=Dt,ce=we),Dt=ce,ge&&_e)t:{for(we=ge,q=_e,z=0,G=we;G;G=va(G))z++;for(G=0,ce=q;ce;ce=va(ce))G++;for(;0<z-G;)we=va(we),z--;for(;0<G-z;)q=va(q),G--;for(;z--;){if(we===q||q!==null&&we===q.alternate)break t;we=va(we),q=va(q)}we=null}else we=null;ge!==null&&fv(ue,oe,ge,we,!1),_e!==null&&Dt!==null&&fv(ue,Dt,_e,we,!0)}}e:{if(oe=Y?_a(Y):window,ge=oe.nodeName&&oe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&oe.type==="file")var Se=ib;else if(qg(oe))if(Kg)Se=lb;else{Se=ob;var Re=sb}else(ge=oe.nodeName)&&ge.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Se=ab);if(Se&&(Se=Se(i,Y))){Gg(ue,Se,l,ae);break e}Re&&Re(i,oe,Y),i==="focusout"&&(Re=oe._wrapperState)&&Re.controlled&&oe.type==="number"&&Oi(oe,"number",oe.value)}switch(Re=Y?_a(Y):window,i){case"focusin":(qg(Re)||Re.contentEditable==="true")&&(ma=Re,jd=Y,Cl=null);break;case"focusout":Cl=jd=ma=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,nv(ue,l,ae);break;case"selectionchange":if(hb)break;case"keydown":case"keyup":nv(ue,l,ae)}var ke;if(Ut)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else pa?Hg(i,l)&&(Me="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(wo&&l.locale!=="ko"&&(pa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&pa&&(ke=_l()):(hr=ae,sa="value"in hr?hr.value:hr.textContent,pa=!0)),Re=tc(Y,Me),0<Re.length&&(Me=new Sl(Me,i,null,l,ae),ue.push({event:Me,listeners:Re}),ke?Me.data=ke:(ke=Wg(l),ke!==null&&(Me.data=ke)))),(ke=dr?eb(i,l):tb(i,l))&&(Y=tc(Y,"onBeforeInput"),0<Y.length&&(ae=new Sl("onBeforeInput","beforeinput",null,l,ae),ue.push({event:ae,listeners:Y}),ae.data=ke))}hv(ue,o)})}function Rl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function tc(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ht(i,l),y!=null&&h.unshift(Rl(i,y,p)),y=ht(i,o),y!=null&&h.push(Rl(i,y,p))),i=i.return}return h}function va(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function fv(i,o,l,h,p){for(var y=o._reactName,T=[];l!==null&&l!==h;){var D=l,F=D.alternate,Y=D.stateNode;if(F!==null&&F===h)break;D.tag===5&&Y!==null&&(D=Y,p?(F=ht(l,y),F!=null&&T.unshift(Rl(l,F,D))):p||(F=ht(l,y),F!=null&&T.push(Rl(l,F,D)))),l=l.return}T.length!==0&&i.push({event:o,listeners:T})}var mb=/\r\n?/g,gb=/\u0000|\uFFFD/g;function pv(i){return(typeof i=="string"?i:""+i).replace(mb,`
`).replace(gb,"")}function nc(i,o,l){if(o=pv(o),pv(i)!==o&&l)throw Error(t(425))}function rc(){}var Wd=null,qd=null;function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,vb=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(i){return mv.resolve(null).then(i).catch(_b)}:Kd;function _b(i){setTimeout(function(){throw i})}function Qd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Gr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Gr(o)}function Cs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function gv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ya=Math.random().toString(36).slice(2),gi="__reactFiber$"+ya,kl="__reactProps$"+ya,qi="__reactContainer$"+ya,Xd="__reactEvents$"+ya,wb="__reactListeners$"+ya,Eb="__reactHandles$"+ya;function Eo(i){var o=i[gi];if(o)return o;for(var l=i.parentNode;l;){if(o=l[qi]||l[gi]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=gv(i);i!==null;){if(l=i[gi])return l;i=gv(i)}return o}i=l,l=i.parentNode}return null}function xl(i){return i=i[gi]||i[qi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function ic(i){return i[kl]||null}var Yd=[],wa=-1;function As(i){return{current:i}}function gt(i){0>wa||(i.current=Yd[wa],Yd[wa]=null,wa--)}function dt(i,o){wa++,Yd[wa]=i.current,i.current=o}var Ps={},vn=As(Ps),Wn=As(!1),So=Ps;function Ea(i,o){var l=i.type.contextTypes;if(!l)return Ps;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function qn(i){return i=i.childContextTypes,i!=null}function sc(){gt(Wn),gt(vn)}function vv(i,o,l){if(vn.current!==Ps)throw Error(t(168));dt(vn,o),dt(Wn,l)}function yv(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Ie(i)||"Unknown",p));return he({},l,h)}function oc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ps,So=vn.current,dt(vn,i),dt(Wn,Wn.current),!0}function _v(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=yv(i,o,So),h.__reactInternalMemoizedMergedChildContext=i,gt(Wn),gt(vn),dt(vn,i)):gt(Wn),dt(Wn,l)}var Gi=null,ac=!1,Jd=!1;function wv(i){Gi===null?Gi=[i]:Gi.push(i)}function Sb(i){ac=!0,wv(i)}function Rs(){if(!Jd&&Gi!==null){Jd=!0;var i=0,o=H;try{var l=Gi;for(H=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Gi=null,ac=!1}catch(p){throw Gi!==null&&(Gi=Gi.slice(i+1)),_s(ji,Rs),p}finally{H=o,Jd=!1}}return null}var Sa=[],Ta=0,lc=null,uc=0,Ar=[],Pr=0,To=null,Ki=1,Qi="";function Io(i,o){Sa[Ta++]=uc,Sa[Ta++]=lc,lc=i,uc=o}function Ev(i,o,l){Ar[Pr++]=Ki,Ar[Pr++]=Qi,Ar[Pr++]=To,To=i;var h=Ki;i=Qi;var p=32-Zt(h)-1;h&=~(1<<p),l+=1;var y=32-Zt(o)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Ki=1<<32-Zt(o)+p|l<<p|h,Qi=y+i}else Ki=1<<y|l<<p|h,Qi=i}function Zd(i){i.return!==null&&(Io(i,1),Ev(i,1,0))}function ef(i){for(;i===lc;)lc=Sa[--Ta],Sa[Ta]=null,uc=Sa[--Ta],Sa[Ta]=null;for(;i===To;)To=Ar[--Pr],Ar[Pr]=null,Qi=Ar[--Pr],Ar[Pr]=null,Ki=Ar[--Pr],Ar[Pr]=null}var fr=null,pr=null,wt=!1,Xr=null;function Sv(i,o){var l=Nr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Tv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,fr=i,pr=Cs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,fr=i,pr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=To!==null?{id:Ki,overflow:Qi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Nr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,fr=i,pr=null,!0):!1;default:return!1}}function tf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function nf(i){if(wt){var o=pr;if(o){var l=o;if(!Tv(i,o)){if(tf(i))throw Error(t(418));o=Cs(l.nextSibling);var h=fr;o&&Tv(i,o)?Sv(h,l):(i.flags=i.flags&-4097|2,wt=!1,fr=i)}}else{if(tf(i))throw Error(t(418));i.flags=i.flags&-4097|2,wt=!1,fr=i}}}function Iv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fr=i}function cc(i){if(i!==fr)return!1;if(!wt)return Iv(i),wt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Gd(i.type,i.memoizedProps)),o&&(o=pr)){if(tf(i))throw bv(),Error(t(418));for(;o;)Sv(i,o),o=Cs(o.nextSibling)}if(Iv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){pr=Cs(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}pr=null}}else pr=fr?Cs(i.stateNode.nextSibling):null;return!0}function bv(){for(var i=pr;i;)i=Cs(i.nextSibling)}function Ia(){pr=fr=null,wt=!1}function rf(i){Xr===null?Xr=[i]:Xr.push(i)}var Tb=ee.ReactCurrentBatchConfig;function Nl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(T){var D=p.refs;T===null?delete D[y]:D[y]=T},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function hc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Cv(i){var o=i._init;return o(i._payload)}function Av(i){function o(q,z){if(i){var G=q.deletions;G===null?(q.deletions=[z],q.flags|=16):G.push(z)}}function l(q,z){if(!i)return null;for(;z!==null;)o(q,z),z=z.sibling;return null}function h(q,z){for(q=new Map;z!==null;)z.key!==null?q.set(z.key,z):q.set(z.index,z),z=z.sibling;return q}function p(q,z){return q=Ls(q,z),q.index=0,q.sibling=null,q}function y(q,z,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<z?(q.flags|=2,z):G):(q.flags|=2,z)):(q.flags|=1048576,z)}function T(q){return i&&q.alternate===null&&(q.flags|=2),q}function D(q,z,G,ce){return z===null||z.tag!==6?(z=Qf(G,q.mode,ce),z.return=q,z):(z=p(z,G),z.return=q,z)}function F(q,z,G,ce){var Se=G.type;return Se===k?ae(q,z,G.props.children,ce,G.key):z!==null&&(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===$e&&Cv(Se)===z.type)?(ce=p(z,G.props),ce.ref=Nl(q,z,G),ce.return=q,ce):(ce=Vc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Nl(q,z,G),ce.return=q,ce)}function Y(q,z,G,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=Xf(G,q.mode,ce),z.return=q,z):(z=p(z,G.children||[]),z.return=q,z)}function ae(q,z,G,ce,Se){return z===null||z.tag!==7?(z=No(G,q.mode,ce,Se),z.return=q,z):(z=p(z,G),z.return=q,z)}function ue(q,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Qf(""+z,q.mode,G),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return G=Vc(z.type,z.key,z.props,null,q.mode,G),G.ref=Nl(q,null,z),G.return=q,G;case se:return z=Xf(z,q.mode,G),z.return=q,z;case $e:var ce=z._init;return ue(q,ce(z._payload),G)}if(An(z)||de(z))return z=No(z,q.mode,G,null),z.return=q,z;hc(q,z)}return null}function oe(q,z,G,ce){var Se=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Se!==null?null:D(q,z,""+G,ce);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case X:return G.key===Se?F(q,z,G,ce):null;case se:return G.key===Se?Y(q,z,G,ce):null;case $e:return Se=G._init,oe(q,z,Se(G._payload),ce)}if(An(G)||de(G))return Se!==null?null:ae(q,z,G,ce,null);hc(q,G)}return null}function ge(q,z,G,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return q=q.get(G)||null,D(z,q,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return q=q.get(ce.key===null?G:ce.key)||null,F(z,q,ce,Se);case se:return q=q.get(ce.key===null?G:ce.key)||null,Y(z,q,ce,Se);case $e:var Re=ce._init;return ge(q,z,G,Re(ce._payload),Se)}if(An(ce)||de(ce))return q=q.get(G)||null,ae(z,q,ce,Se,null);hc(z,ce)}return null}function _e(q,z,G,ce){for(var Se=null,Re=null,ke=z,Me=z=0,rn=null;ke!==null&&Me<G.length;Me++){ke.index>Me?(rn=ke,ke=null):rn=ke.sibling;var Ze=oe(q,ke,G[Me],ce);if(Ze===null){ke===null&&(ke=rn);break}i&&ke&&Ze.alternate===null&&o(q,ke),z=y(Ze,z,Me),Re===null?Se=Ze:Re.sibling=Ze,Re=Ze,ke=rn}if(Me===G.length)return l(q,ke),wt&&Io(q,Me),Se;if(ke===null){for(;Me<G.length;Me++)ke=ue(q,G[Me],ce),ke!==null&&(z=y(ke,z,Me),Re===null?Se=ke:Re.sibling=ke,Re=ke);return wt&&Io(q,Me),Se}for(ke=h(q,ke);Me<G.length;Me++)rn=ge(ke,q,Me,G[Me],ce),rn!==null&&(i&&rn.alternate!==null&&ke.delete(rn.key===null?Me:rn.key),z=y(rn,z,Me),Re===null?Se=rn:Re.sibling=rn,Re=rn);return i&&ke.forEach(function(js){return o(q,js)}),wt&&Io(q,Me),Se}function we(q,z,G,ce){var Se=de(G);if(typeof Se!="function")throw Error(t(150));if(G=Se.call(G),G==null)throw Error(t(151));for(var Re=Se=null,ke=z,Me=z=0,rn=null,Ze=G.next();ke!==null&&!Ze.done;Me++,Ze=G.next()){ke.index>Me?(rn=ke,ke=null):rn=ke.sibling;var js=oe(q,ke,Ze.value,ce);if(js===null){ke===null&&(ke=rn);break}i&&ke&&js.alternate===null&&o(q,ke),z=y(js,z,Me),Re===null?Se=js:Re.sibling=js,Re=js,ke=rn}if(Ze.done)return l(q,ke),wt&&Io(q,Me),Se;if(ke===null){for(;!Ze.done;Me++,Ze=G.next())Ze=ue(q,Ze.value,ce),Ze!==null&&(z=y(Ze,z,Me),Re===null?Se=Ze:Re.sibling=Ze,Re=Ze);return wt&&Io(q,Me),Se}for(ke=h(q,ke);!Ze.done;Me++,Ze=G.next())Ze=ge(ke,q,Me,Ze.value,ce),Ze!==null&&(i&&Ze.alternate!==null&&ke.delete(Ze.key===null?Me:Ze.key),z=y(Ze,z,Me),Re===null?Se=Ze:Re.sibling=Ze,Re=Ze);return i&&ke.forEach(function(nC){return o(q,nC)}),wt&&Io(q,Me),Se}function Dt(q,z,G,ce){if(typeof G=="object"&&G!==null&&G.type===k&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case X:e:{for(var Se=G.key,Re=z;Re!==null;){if(Re.key===Se){if(Se=G.type,Se===k){if(Re.tag===7){l(q,Re.sibling),z=p(Re,G.props.children),z.return=q,q=z;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===$e&&Cv(Se)===Re.type){l(q,Re.sibling),z=p(Re,G.props),z.ref=Nl(q,Re,G),z.return=q,q=z;break e}l(q,Re);break}else o(q,Re);Re=Re.sibling}G.type===k?(z=No(G.props.children,q.mode,ce,G.key),z.return=q,q=z):(ce=Vc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Nl(q,z,G),ce.return=q,q=ce)}return T(q);case se:e:{for(Re=G.key;z!==null;){if(z.key===Re)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){l(q,z.sibling),z=p(z,G.children||[]),z.return=q,q=z;break e}else{l(q,z);break}else o(q,z);z=z.sibling}z=Xf(G,q.mode,ce),z.return=q,q=z}return T(q);case $e:return Re=G._init,Dt(q,z,Re(G._payload),ce)}if(An(G))return _e(q,z,G,ce);if(de(G))return we(q,z,G,ce);hc(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,z!==null&&z.tag===6?(l(q,z.sibling),z=p(z,G),z.return=q,q=z):(l(q,z),z=Qf(G,q.mode,ce),z.return=q,q=z),T(q)):l(q,z)}return Dt}var ba=Av(!0),Pv=Av(!1),dc=As(null),fc=null,Ca=null,sf=null;function of(){sf=Ca=fc=null}function af(i){var o=dc.current;gt(dc),i._currentValue=o}function lf(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Aa(i,o){fc=i,sf=Ca=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Gn=!0),i.firstContext=null)}function Rr(i){var o=i._currentValue;if(sf!==i)if(i={context:i,memoizedValue:o,next:null},Ca===null){if(fc===null)throw Error(t(308));Ca=i,fc.dependencies={lanes:0,firstContext:i}}else Ca=Ca.next=i;return o}var bo=null;function uf(i){bo===null?bo=[i]:bo.push(i)}function Rv(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,uf(o)):(l.next=p.next,p.next=l),o.interleaved=l,Xi(i,h)}function Xi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var ks=!1;function cf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Yi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function xs(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Je&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,Xi(i,l)}return p=h.interleaved,p===null?(o.next=o,uf(h)):(o.next=p.next,p.next=o),h.interleaved=o,Xi(i,l)}function pc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,I(i,l)}}function xv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function mc(i,o,l,h){var p=i.updateQueue;ks=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var F=D,Y=F.next;F.next=null,T===null?y=Y:T.next=Y,T=F;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==T&&(D===null?ae.firstBaseUpdate=Y:D.next=Y,ae.lastBaseUpdate=F))}if(y!==null){var ue=p.baseState;T=0,ae=Y=F=null,D=y;do{var oe=D.lane,ge=D.eventTime;if((h&oe)===oe){ae!==null&&(ae=ae.next={eventTime:ge,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var _e=i,we=D;switch(oe=o,ge=l,we.tag){case 1:if(_e=we.payload,typeof _e=="function"){ue=_e.call(ge,ue,oe);break e}ue=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,oe=typeof _e=="function"?_e.call(ge,ue,oe):_e,oe==null)break e;ue=he({},ue,oe);break e;case 2:ks=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,oe=p.effects,oe===null?p.effects=[D]:oe.push(D))}else ge={eventTime:ge,lane:oe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(Y=ae=ge,F=ue):ae=ae.next=ge,T|=oe;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;oe=D,D=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);if(ae===null&&(F=ue),p.baseState=F,p.firstBaseUpdate=Y,p.lastBaseUpdate=ae,o=p.shared.interleaved,o!==null){p=o;do T|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Po|=T,i.lanes=T,i.memoizedState=ue}}function Nv(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ol={},vi=As(Ol),Dl=As(Ol),Vl=As(Ol);function Co(i){if(i===Ol)throw Error(t(174));return i}function hf(i,o){switch(dt(Vl,o),dt(Dl,i),dt(vi,Ol),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:pt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=pt(o,i)}gt(vi),dt(vi,o)}function Pa(){gt(vi),gt(Dl),gt(Vl)}function Ov(i){Co(Vl.current);var o=Co(vi.current),l=pt(o,i.type);o!==l&&(dt(Dl,i),dt(vi,l))}function df(i){Dl.current===i&&(gt(vi),gt(Dl))}var It=As(0);function gc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ff=[];function pf(){for(var i=0;i<ff.length;i++)ff[i]._workInProgressVersionPrimary=null;ff.length=0}var vc=ee.ReactCurrentDispatcher,mf=ee.ReactCurrentBatchConfig,Ao=0,bt=null,Qt=null,tn=null,yc=!1,Ml=!1,Ll=0,Ib=0;function yn(){throw Error(t(321))}function gf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Qr(i[l],o[l]))return!1;return!0}function vf(i,o,l,h,p,y){if(Ao=y,bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,vc.current=i===null||i.memoizedState===null?Pb:Rb,i=l(h,p),Ml){y=0;do{if(Ml=!1,Ll=0,25<=y)throw Error(t(301));y+=1,tn=Qt=null,o.updateQueue=null,vc.current=kb,i=l(h,p)}while(Ml)}if(vc.current=Ec,o=Qt!==null&&Qt.next!==null,Ao=0,tn=Qt=bt=null,yc=!1,o)throw Error(t(300));return i}function yf(){var i=Ll!==0;return Ll=0,i}function yi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?bt.memoizedState=tn=i:tn=tn.next=i,tn}function kr(){if(Qt===null){var i=bt.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var o=tn===null?bt.memoizedState:tn.next;if(o!==null)tn=o,Qt=i;else{if(i===null)throw Error(t(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},tn===null?bt.memoizedState=tn=i:tn=tn.next=i}return tn}function jl(i,o){return typeof o=="function"?o(i):o}function _f(i){var o=kr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Qt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var D=T=null,F=null,Y=y;do{var ae=Y.lane;if((Ao&ae)===ae)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),h=Y.hasEagerState?Y.eagerState:i(h,Y.action);else{var ue={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=ue,T=h):F=F.next=ue,bt.lanes|=ae,Po|=ae}Y=Y.next}while(Y!==null&&Y!==y);F===null?T=h:F.next=D,Qr(h,o.memoizedState)||(Gn=!0),o.memoizedState=h,o.baseState=T,o.baseQueue=F,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,bt.lanes|=y,Po|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function wf(i){var o=kr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);Qr(y,o.memoizedState)||(Gn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Dv(){}function Vv(i,o){var l=bt,h=kr(),p=o(),y=!Qr(h.memoizedState,p);if(y&&(h.memoizedState=p,Gn=!0),h=h.queue,Ef(jv.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||tn!==null&&tn.memoizedState.tag&1){if(l.flags|=2048,Fl(9,Lv.bind(null,l,h,p,o),void 0,null),nn===null)throw Error(t(349));(Ao&30)!==0||Mv(l,o,p)}return p}function Mv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Lv(i,o,l,h){o.value=l,o.getSnapshot=h,Fv(o)&&Uv(i)}function jv(i,o,l){return l(function(){Fv(o)&&Uv(i)})}function Fv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Qr(i,l)}catch{return!0}}function Uv(i){var o=Xi(i,1);o!==null&&ei(o,i,1,-1)}function zv(i){var o=yi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:i},o.queue=i,i=i.dispatch=Ab.bind(null,bt,i),[o.memoizedState,i]}function Fl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function $v(){return kr().memoizedState}function _c(i,o,l,h){var p=yi();bt.flags|=i,p.memoizedState=Fl(1|o,l,void 0,h===void 0?null:h)}function wc(i,o,l,h){var p=kr();h=h===void 0?null:h;var y=void 0;if(Qt!==null){var T=Qt.memoizedState;if(y=T.destroy,h!==null&&gf(h,T.deps)){p.memoizedState=Fl(o,l,y,h);return}}bt.flags|=i,p.memoizedState=Fl(1|o,l,y,h)}function Bv(i,o){return _c(8390656,8,i,o)}function Ef(i,o){return wc(2048,8,i,o)}function Hv(i,o){return wc(4,2,i,o)}function Wv(i,o){return wc(4,4,i,o)}function qv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Gv(i,o,l){return l=l!=null?l.concat([i]):null,wc(4,4,qv.bind(null,o,i),l)}function Sf(){}function Kv(i,o){var l=kr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&gf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Qv(i,o){var l=kr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&gf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Xv(i,o,l){return(Ao&21)===0?(i.baseState&&(i.baseState=!1,Gn=!0),i.memoizedState=l):(Qr(l,o)||(l=zi(),bt.lanes|=l,Po|=l,i.baseState=!0),o)}function bb(i,o){var l=H;H=l!==0&&4>l?l:4,i(!0);var h=mf.transition;mf.transition={};try{i(!1),o()}finally{H=l,mf.transition=h}}function Yv(){return kr().memoizedState}function Cb(i,o,l){var h=Vs(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Jv(i))Zv(o,l);else if(l=Rv(i,o,l,h),l!==null){var p=xn();ei(l,i,h,p),ey(l,o,h)}}function Ab(i,o,l){var h=Vs(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jv(i))Zv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,D=y(T,l);if(p.hasEagerState=!0,p.eagerState=D,Qr(D,T)){var F=o.interleaved;F===null?(p.next=p,uf(o)):(p.next=F.next,F.next=p),o.interleaved=p;return}}catch{}finally{}l=Rv(i,o,p,h),l!==null&&(p=xn(),ei(l,i,h,p),ey(l,o,h))}}function Jv(i){var o=i.alternate;return i===bt||o!==null&&o===bt}function Zv(i,o){Ml=yc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function ey(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,I(i,l)}}var Ec={readContext:Rr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},Pb={readContext:Rr,useCallback:function(i,o){return yi().memoizedState=[i,o===void 0?null:o],i},useContext:Rr,useEffect:Bv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,_c(4194308,4,qv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return _c(4194308,4,i,o)},useInsertionEffect:function(i,o){return _c(4,2,i,o)},useMemo:function(i,o){var l=yi();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=yi();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=Cb.bind(null,bt,i),[h.memoizedState,i]},useRef:function(i){var o=yi();return i={current:i},o.memoizedState=i},useState:zv,useDebugValue:Sf,useDeferredValue:function(i){return yi().memoizedState=i},useTransition:function(){var i=zv(!1),o=i[0];return i=bb.bind(null,i[1]),yi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=bt,p=yi();if(wt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),nn===null)throw Error(t(349));(Ao&30)!==0||Mv(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Bv(jv.bind(null,h,y,i),[i]),h.flags|=2048,Fl(9,Lv.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=yi(),o=nn.identifierPrefix;if(wt){var l=Qi,h=Ki;l=(h&~(1<<32-Zt(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Ll++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Ib++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Rb={readContext:Rr,useCallback:Kv,useContext:Rr,useEffect:Ef,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:Wv,useMemo:Qv,useReducer:_f,useRef:$v,useState:function(){return _f(jl)},useDebugValue:Sf,useDeferredValue:function(i){var o=kr();return Xv(o,Qt.memoizedState,i)},useTransition:function(){var i=_f(jl)[0],o=kr().memoizedState;return[i,o]},useMutableSource:Dv,useSyncExternalStore:Vv,useId:Yv,unstable_isNewReconciler:!1},kb={readContext:Rr,useCallback:Kv,useContext:Rr,useEffect:Ef,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:Wv,useMemo:Qv,useReducer:wf,useRef:$v,useState:function(){return wf(jl)},useDebugValue:Sf,useDeferredValue:function(i){var o=kr();return Qt===null?o.memoizedState=i:Xv(o,Qt.memoizedState,i)},useTransition:function(){var i=wf(jl)[0],o=kr().memoizedState;return[i,o]},useMutableSource:Dv,useSyncExternalStore:Vv,useId:Yv,unstable_isNewReconciler:!1};function Yr(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Tf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:he({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Sc={isMounted:function(i){return(i=i._reactInternals)?Un(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=xn(),p=Vs(i),y=Yi(h,p);y.payload=o,l!=null&&(y.callback=l),o=xs(i,y,p),o!==null&&(ei(o,i,p,h),pc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=xn(),p=Vs(i),y=Yi(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=xs(i,y,p),o!==null&&(ei(o,i,p,h),pc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=xn(),h=Vs(i),p=Yi(l,h);p.tag=2,o!=null&&(p.callback=o),o=xs(i,p,h),o!==null&&(ei(o,i,h,l),pc(o,i,h))}};function ty(i,o,l,h,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,T):o.prototype&&o.prototype.isPureReactComponent?!bl(l,h)||!bl(p,y):!0}function ny(i,o,l){var h=!1,p=Ps,y=o.contextType;return typeof y=="object"&&y!==null?y=Rr(y):(p=qn(o)?So:vn.current,h=o.contextTypes,y=(h=h!=null)?Ea(i,p):Ps),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Sc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function ry(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Sc.enqueueReplaceState(o,o.state,null)}function If(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},cf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Rr(y):(y=qn(o)?So:vn.current,p.context=Ea(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Tf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Sc.enqueueReplaceState(p,p.state,null),mc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Ra(i,o){try{var l="",h=o;do l+=Z(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function bf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Cf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var xb=typeof WeakMap=="function"?WeakMap:Map;function iy(i,o,l){l=Yi(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Rc||(Rc=!0,zf=h),Cf(i,o)},l}function sy(i,o,l){l=Yi(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Cf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Cf(i,o),typeof h!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),l}function oy(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new xb;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=Wb.bind(null,i,o,l),o.then(i,i))}function ay(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function ly(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Yi(-1,1),o.tag=2,xs(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var Nb=ee.ReactCurrentOwner,Gn=!1;function kn(i,o,l,h){o.child=i===null?Pv(o,null,l,h):ba(o,i.child,l,h)}function uy(i,o,l,h,p){l=l.render;var y=o.ref;return Aa(o,p),h=vf(i,o,l,h,y,p),l=yf(),i!==null&&!Gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ji(i,o,p)):(wt&&l&&Zd(o),o.flags|=1,kn(i,o,h,p),o.child)}function cy(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Kf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,hy(i,o,y,h,p)):(i=Vc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:bl,l(T,h)&&i.ref===o.ref)return Ji(i,o,p)}return o.flags|=1,i=Ls(y,h),i.ref=o.ref,i.return=o,o.child=i}function hy(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(bl(y,h)&&i.ref===o.ref)if(Gn=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(Gn=!0);else return o.lanes=i.lanes,Ji(i,o,p)}return Af(i,o,l,h,p)}function dy(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(xa,mr),mr|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,dt(xa,mr),mr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,dt(xa,mr),mr|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,dt(xa,mr),mr|=h;return kn(i,o,p,l),o.child}function fy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Af(i,o,l,h,p){var y=qn(l)?So:vn.current;return y=Ea(o,y),Aa(o,p),l=vf(i,o,l,h,y,p),h=yf(),i!==null&&!Gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ji(i,o,p)):(wt&&h&&Zd(o),o.flags|=1,kn(i,o,l,p),o.child)}function py(i,o,l,h,p){if(qn(l)){var y=!0;oc(o)}else y=!1;if(Aa(o,p),o.stateNode===null)Ic(i,o),ny(o,l,h),If(o,l,h,p),h=!0;else if(i===null){var T=o.stateNode,D=o.memoizedProps;T.props=D;var F=T.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=Rr(Y):(Y=qn(l)?So:vn.current,Y=Ea(o,Y));var ae=l.getDerivedStateFromProps,ue=typeof ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";ue||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==h||F!==Y)&&ry(o,T,h,Y),ks=!1;var oe=o.memoizedState;T.state=oe,mc(o,h,T,p),F=o.memoizedState,D!==h||oe!==F||Wn.current||ks?(typeof ae=="function"&&(Tf(o,l,ae,h),F=o.memoizedState),(D=ks||ty(o,l,D,h,oe,F,Y))?(ue||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=F),T.props=h,T.state=F,T.context=Y,h=D):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{T=o.stateNode,kv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:Yr(o.type,D),T.props=Y,ue=o.pendingProps,oe=T.context,F=l.contextType,typeof F=="object"&&F!==null?F=Rr(F):(F=qn(l)?So:vn.current,F=Ea(o,F));var ge=l.getDerivedStateFromProps;(ae=typeof ge=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ue||oe!==F)&&ry(o,T,h,F),ks=!1,oe=o.memoizedState,T.state=oe,mc(o,h,T,p);var _e=o.memoizedState;D!==ue||oe!==_e||Wn.current||ks?(typeof ge=="function"&&(Tf(o,l,ge,h),_e=o.memoizedState),(Y=ks||ty(o,l,Y,h,oe,_e,F)||!1)?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,_e,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,_e,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=_e),T.props=h,T.state=_e,T.context=F,h=Y):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),h=!1)}return Pf(i,o,l,h,y,p)}function Pf(i,o,l,h,p,y){fy(i,o);var T=(o.flags&128)!==0;if(!h&&!T)return p&&_v(o,l,!1),Ji(i,o,y);h=o.stateNode,Nb.current=o;var D=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&T?(o.child=ba(o,i.child,null,y),o.child=ba(o,null,D,y)):kn(i,o,D,y),o.memoizedState=h.state,p&&_v(o,l,!0),o.child}function my(i){var o=i.stateNode;o.pendingContext?vv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&vv(i,o.context,!1),hf(i,o.containerInfo)}function gy(i,o,l,h,p){return Ia(),rf(p),o.flags|=256,kn(i,o,l,h),o.child}var Rf={dehydrated:null,treeContext:null,retryLane:0};function kf(i){return{baseLanes:i,cachePool:null,transitions:null}}function vy(i,o,l){var h=o.pendingProps,p=It.current,y=!1,T=(o.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(p&2)!==0),D?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),dt(It,p&1),i===null)return nf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=h.children,i=h.fallback,y?(h=o.mode,y=o.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=Mc(T,h,0,null),i=No(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=kf(l),o.memoizedState=Rf,i):xf(o,T));if(p=i.memoizedState,p!==null&&(D=p.dehydrated,D!==null))return Ob(i,o,T,h,D,p,l);if(y){y=h.fallback,T=o.mode,p=i.child,D=p.sibling;var F={mode:"hidden",children:h.children};return(T&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=F,o.deletions=null):(h=Ls(p,F),h.subtreeFlags=p.subtreeFlags&14680064),D!==null?y=Ls(D,y):(y=No(y,T,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,T=i.child.memoizedState,T=T===null?kf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=i.childLanes&~l,o.memoizedState=Rf,h}return y=i.child,i=y.sibling,h=Ls(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function xf(i,o){return o=Mc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Tc(i,o,l,h){return h!==null&&rf(h),ba(o,i.child,null,l),i=xf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ob(i,o,l,h,p,y,T){if(l)return o.flags&256?(o.flags&=-257,h=bf(Error(t(422))),Tc(i,o,T,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Mc({mode:"visible",children:h.children},p,0,null),y=No(y,p,T,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&ba(o,i.child,null,T),o.child.memoizedState=kf(T),o.memoizedState=Rf,y);if((o.mode&1)===0)return Tc(i,o,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var D=h.dgst;return h=D,y=Error(t(419)),h=bf(y,h,void 0),Tc(i,o,T,h)}if(D=(T&i.childLanes)!==0,Gn||D){if(h=nn,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Xi(i,p),ei(h,i,p,-1))}return Gf(),h=bf(Error(t(421))),Tc(i,o,T,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=qb.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,pr=Cs(p.nextSibling),fr=o,wt=!0,Xr=null,i!==null&&(Ar[Pr++]=Ki,Ar[Pr++]=Qi,Ar[Pr++]=To,Ki=i.id,Qi=i.overflow,To=o),o=xf(o,h.children),o.flags|=4096,o)}function yy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),lf(i.return,o,l)}function Nf(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function _y(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(kn(i,o,h.children,l),h=It.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&yy(i,l,o);else if(i.tag===19)yy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(dt(It,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&gc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Nf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&gc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Nf(o,!0,l,null,y);break;case"together":Nf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ic(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ji(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Po|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Ls(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Ls(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Db(i,o,l){switch(o.tag){case 3:my(o),Ia();break;case 5:Ov(o);break;case 1:qn(o.type)&&oc(o);break;case 4:hf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;dt(dc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(dt(It,It.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?vy(i,o,l):(dt(It,It.current&1),i=Ji(i,o,l),i!==null?i.sibling:null);dt(It,It.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return _y(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),dt(It,It.current),h)break;return null;case 22:case 23:return o.lanes=0,dy(i,o,l)}return Ji(i,o,l)}var wy,Of,Ey,Sy;wy=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Of=function(){},Ey=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Co(vi.current);var y=null;switch(l){case"input":p=rt(i,p),h=rt(i,h),y=[];break;case"select":p=he({},p,{value:void 0}),h=he({},h,{value:void 0}),y=[];break;case"textarea":p=ms(i,p),h=ms(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=rc)}lo(l,h);var T;l=null;for(Y in p)if(!h.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var D=p[Y];for(T in D)D.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in h){var F=h[Y];if(D=p!=null?p[Y]:void 0,h.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(T in D)!D.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in F)F.hasOwnProperty(T)&&D[T]!==F[T]&&(l||(l={}),l[T]=F[T])}else l||(y||(y=[]),y.push(Y,l)),l=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(y=y||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&mt("scroll",i),y||D===F||(y=[])):(y=y||[]).push(Y,F))}l&&(y=y||[]).push("style",l);var Y=y;(o.updateQueue=Y)&&(o.flags|=4)}},Sy=function(i,o,l,h){l!==h&&(o.flags|=4)};function Ul(i,o){if(!wt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function _n(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function Vb(i,o,l){var h=o.pendingProps;switch(ef(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(o),null;case 1:return qn(o.type)&&sc(),_n(o),null;case 3:return h=o.stateNode,Pa(),gt(Wn),gt(vn),pf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(cc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Xr!==null&&(Hf(Xr),Xr=null))),Of(i,o),_n(o),null;case 5:df(o);var p=Co(Vl.current);if(l=o.type,i!==null&&o.stateNode!=null)Ey(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return _n(o),null}if(i=Co(vi.current),cc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[gi]=o,h[kl]=y,i=(o.mode&1)!==0,l){case"dialog":mt("cancel",h),mt("close",h);break;case"iframe":case"object":case"embed":mt("load",h);break;case"video":case"audio":for(p=0;p<Al.length;p++)mt(Al[p],h);break;case"source":mt("error",h);break;case"img":case"image":case"link":mt("error",h),mt("load",h);break;case"details":mt("toggle",h);break;case"input":fn(h,y),mt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},mt("invalid",h);break;case"textarea":Lr(h,y),mt("invalid",h)}lo(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var D=y[T];T==="children"?typeof D=="string"?h.textContent!==D&&(y.suppressHydrationWarning!==!0&&nc(h.textContent,D,i),p=["children",D]):typeof D=="number"&&h.textContent!==""+D&&(y.suppressHydrationWarning!==!0&&nc(h.textContent,D,i),p=["children",""+D]):s.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&mt("scroll",h)}switch(l){case"input":St(h),Cn(h,y,!0);break;case"textarea":St(h),jr(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=rc)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Rt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=T.createElement(l,{is:h.is}):(i=T.createElement(l),l==="select"&&(T=i,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):i=T.createElementNS(i,l),i[gi]=o,i[kl]=h,wy(i,o,!1,!1),o.stateNode=i;e:{switch(T=ai(l,h),l){case"dialog":mt("cancel",i),mt("close",i),p=h;break;case"iframe":case"object":case"embed":mt("load",i),p=h;break;case"video":case"audio":for(p=0;p<Al.length;p++)mt(Al[p],i);p=h;break;case"source":mt("error",i),p=h;break;case"img":case"image":case"link":mt("error",i),mt("load",i),p=h;break;case"details":mt("toggle",i),p=h;break;case"input":fn(i,h),p=rt(i,h),mt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=he({},h,{value:void 0}),mt("invalid",i);break;case"textarea":Lr(i,h),p=ms(i,h),mt("invalid",i);break;default:p=h}lo(l,p),D=p;for(y in D)if(D.hasOwnProperty(y)){var F=D[y];y==="style"?Ur(i,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Er(i,F)):y==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&ir(i,F):typeof F=="number"&&ir(i,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?F!=null&&y==="onScroll"&&mt("scroll",i):F!=null&&K(i,y,F,T))}switch(l){case"input":St(i),Cn(i,h,!1);break;case"textarea":St(i),jr(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Te(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Gt(i,!!h.multiple,y,!1):h.defaultValue!=null&&Gt(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=rc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return _n(o),null;case 6:if(i&&o.stateNode!=null)Sy(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=Co(Vl.current),Co(vi.current),cc(o)){if(h=o.stateNode,l=o.memoizedProps,h[gi]=o,(y=h.nodeValue!==l)&&(i=fr,i!==null))switch(i.tag){case 3:nc(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&nc(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[gi]=o,o.stateNode=h}return _n(o),null;case 13:if(gt(It),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(wt&&pr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)bv(),Ia(),o.flags|=98560,y=!1;else if(y=cc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[gi]=o}else Ia(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_n(o),y=!1}else Xr!==null&&(Hf(Xr),Xr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(It.current&1)!==0?Xt===0&&(Xt=3):Gf())),o.updateQueue!==null&&(o.flags|=4),_n(o),null);case 4:return Pa(),Of(i,o),i===null&&Pl(o.stateNode.containerInfo),_n(o),null;case 10:return af(o.type._context),_n(o),null;case 17:return qn(o.type)&&sc(),_n(o),null;case 19:if(gt(It),y=o.memoizedState,y===null)return _n(o),null;if(h=(o.flags&128)!==0,T=y.rendering,T===null)if(h)Ul(y,!1);else{if(Xt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=gc(i),T!==null){for(o.flags|=128,Ul(y,!1),h=T.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,i=T.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return dt(It,It.current&1|2),o.child}i=i.sibling}y.tail!==null&&at()>Na&&(o.flags|=128,h=!0,Ul(y,!1),o.lanes=4194304)}else{if(!h)if(i=gc(T),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Ul(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!wt)return _n(o),null}else 2*at()-y.renderingStartTime>Na&&l!==1073741824&&(o.flags|=128,h=!0,Ul(y,!1),o.lanes=4194304);y.isBackwards?(T.sibling=o.child,o.child=T):(l=y.last,l!==null?l.sibling=T:o.child=T,y.last=T)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=at(),o.sibling=null,l=It.current,dt(It,h?l&1|2:l&1),o):(_n(o),null);case 22:case 23:return qf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(mr&1073741824)!==0&&(_n(o),o.subtreeFlags&6&&(o.flags|=8192)):_n(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Mb(i,o){switch(ef(o),o.tag){case 1:return qn(o.type)&&sc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pa(),gt(Wn),gt(vn),pf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return df(o),null;case 13:if(gt(It),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return gt(It),null;case 4:return Pa(),null;case 10:return af(o.type._context),null;case 22:case 23:return qf(),null;case 24:return null;default:return null}}var bc=!1,wn=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ka(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){kt(i,o,h)}else l.current=null}function Df(i,o,l){try{l()}catch(h){kt(i,o,h)}}var Ty=!1;function jb(i,o){if(Wd=Ts,i=tv(),Ld(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,D=-1,F=-1,Y=0,ae=0,ue=i,oe=null;t:for(;;){for(var ge;ue!==l||p!==0&&ue.nodeType!==3||(D=T+p),ue!==y||h!==0&&ue.nodeType!==3||(F=T+h),ue.nodeType===3&&(T+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)oe=ue,ue=ge;for(;;){if(ue===i)break t;if(oe===l&&++Y===p&&(D=T),oe===y&&++ae===h&&(F=T),(ge=ue.nextSibling)!==null)break;ue=oe,oe=ue.parentNode}ue=ge}l=D===-1||F===-1?null:{start:D,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(qd={focusedElem:i,selectionRange:l},Ts=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var _e=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var we=_e.memoizedProps,Dt=_e.memoizedState,q=o.stateNode,z=q.getSnapshotBeforeUpdate(o.elementType===o.type?we:Yr(o.type,we),Dt);q.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){kt(o,o.return,ce)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return _e=Ty,Ty=!1,_e}function zl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Df(o,l,y)}p=p.next}while(p!==h)}}function Cc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Vf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function Iy(i){var o=i.alternate;o!==null&&(i.alternate=null,Iy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[gi],delete o[kl],delete o[Xd],delete o[wb],delete o[Eb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function by(i){return i.tag===5||i.tag===3||i.tag===4}function Cy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||by(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=rc));else if(h!==4&&(i=i.child,i!==null))for(Mf(i,o,l),i=i.sibling;i!==null;)Mf(i,o,l),i=i.sibling}function Lf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Lf(i,o,l),i=i.sibling;i!==null;)Lf(i,o,l),i=i.sibling}var an=null,Jr=!1;function Ns(i,o,l){for(l=l.child;l!==null;)Ay(i,o,l),l=l.sibling}function Ay(i,o,l){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Fi,l)}catch{}switch(l.tag){case 5:wn||ka(l,o);case 6:var h=an,p=Jr;an=null,Ns(i,o,l),an=h,Jr=p,an!==null&&(Jr?(i=an,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):an.removeChild(l.stateNode));break;case 18:an!==null&&(Jr?(i=an,l=l.stateNode,i.nodeType===8?Qd(i.parentNode,l):i.nodeType===1&&Qd(i,l),Gr(i)):Qd(an,l.stateNode));break;case 4:h=an,p=Jr,an=l.stateNode.containerInfo,Jr=!0,Ns(i,o,l),an=h,Jr=p;break;case 0:case 11:case 14:case 15:if(!wn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Df(l,o,T),p=p.next}while(p!==h)}Ns(i,o,l);break;case 1:if(!wn&&(ka(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(D){kt(l,o,D)}Ns(i,o,l);break;case 21:Ns(i,o,l);break;case 22:l.mode&1?(wn=(h=wn)||l.memoizedState!==null,Ns(i,o,l),wn=h):Ns(i,o,l);break;default:Ns(i,o,l)}}function Py(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Lb),o.forEach(function(h){var p=Gb.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Zr(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,T=o,D=T;e:for(;D!==null;){switch(D.tag){case 5:an=D.stateNode,Jr=!1;break e;case 3:an=D.stateNode.containerInfo,Jr=!0;break e;case 4:an=D.stateNode.containerInfo,Jr=!0;break e}D=D.return}if(an===null)throw Error(t(160));Ay(y,T,p),an=null,Jr=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(Y){kt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ry(o,i),o=o.sibling}function Ry(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Zr(o,i),_i(i),h&4){try{zl(3,i,i.return),Cc(3,i)}catch(we){kt(i,i.return,we)}try{zl(5,i,i.return)}catch(we){kt(i,i.return,we)}}break;case 1:Zr(o,i),_i(i),h&512&&l!==null&&ka(l,l.return);break;case 5:if(Zr(o,i),_i(i),h&512&&l!==null&&ka(l,l.return),i.flags&32){var p=i.stateNode;try{ir(p,"")}catch(we){kt(i,i.return,we)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,T=l!==null?l.memoizedProps:y,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&y.type==="radio"&&y.name!=null&&Tt(p,y),ai(D,T);var Y=ai(D,y);for(T=0;T<F.length;T+=2){var ae=F[T],ue=F[T+1];ae==="style"?Ur(p,ue):ae==="dangerouslySetInnerHTML"?Er(p,ue):ae==="children"?ir(p,ue):K(p,ae,ue,Y)}switch(D){case"input":ps(p,y);break;case"textarea":pn(p,y);break;case"select":var oe=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Gt(p,!!y.multiple,ge,!1):oe!==!!y.multiple&&(y.defaultValue!=null?Gt(p,!!y.multiple,y.defaultValue,!0):Gt(p,!!y.multiple,y.multiple?[]:"",!1))}p[kl]=y}catch(we){kt(i,i.return,we)}}break;case 6:if(Zr(o,i),_i(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(we){kt(i,i.return,we)}}break;case 3:if(Zr(o,i),_i(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Gr(o.containerInfo)}catch(we){kt(i,i.return,we)}break;case 4:Zr(o,i),_i(i);break;case 13:Zr(o,i),_i(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Uf=at())),h&4&&Py(i);break;case 22:if(ae=l!==null&&l.memoizedState!==null,i.mode&1?(wn=(Y=wn)||ae,Zr(o,i),wn=Y):Zr(o,i),_i(i),h&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ae&&(i.mode&1)!==0)for(ye=i,ae=i.child;ae!==null;){for(ue=ye=ae;ye!==null;){switch(oe=ye,ge=oe.child,oe.tag){case 0:case 11:case 14:case 15:zl(4,oe,oe.return);break;case 1:ka(oe,oe.return);var _e=oe.stateNode;if(typeof _e.componentWillUnmount=="function"){h=oe,l=oe.return;try{o=h,_e.props=o.memoizedProps,_e.state=o.memoizedState,_e.componentWillUnmount()}catch(we){kt(h,l,we)}}break;case 5:ka(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Ny(ue);continue}}ge!==null?(ge.return=oe,ye=ge):Ny(ue)}ae=ae.sibling}e:for(ae=null,ue=i;;){if(ue.tag===5){if(ae===null){ae=ue;try{p=ue.stateNode,Y?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(D=ue.stateNode,F=ue.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Mn("display",T))}catch(we){kt(i,i.return,we)}}}else if(ue.tag===6){if(ae===null)try{ue.stateNode.nodeValue=Y?"":ue.memoizedProps}catch(we){kt(i,i.return,we)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;ae===ue&&(ae=null),ue=ue.return}ae===ue&&(ae=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Zr(o,i),_i(i),h&4&&Py(i);break;case 21:break;default:Zr(o,i),_i(i)}}function _i(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(by(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ir(p,""),h.flags&=-33);var y=Cy(i);Lf(i,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,D=Cy(i);Mf(i,D,T);break;default:throw Error(t(161))}}catch(F){kt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Fb(i,o,l){ye=i,ky(i)}function ky(i,o,l){for(var h=(i.mode&1)!==0;ye!==null;){var p=ye,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||bc;if(!T){var D=p.alternate,F=D!==null&&D.memoizedState!==null||wn;D=bc;var Y=wn;if(bc=T,(wn=F)&&!Y)for(ye=p;ye!==null;)T=ye,F=T.child,T.tag===22&&T.memoizedState!==null?Oy(p):F!==null?(F.return=T,ye=F):Oy(p);for(;y!==null;)ye=y,ky(y),y=y.sibling;ye=p,bc=D,wn=Y}xy(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ye=y):xy(i)}}function xy(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:wn||Cc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!wn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Yr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Nv(o,y,h);break;case 3:var T=o.updateQueue;if(T!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Nv(o,T,l)}break;case 5:var D=o.stateNode;if(l===null&&o.flags&4){l=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var ue=ae.dehydrated;ue!==null&&Gr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wn||o.flags&512&&Vf(o)}catch(oe){kt(o,o.return,oe)}}if(o===i){ye=null;break}if(l=o.sibling,l!==null){l.return=o.return,ye=l;break}ye=o.return}}function Ny(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ye=l;break}ye=o.return}}function Oy(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Cc(4,o)}catch(F){kt(o,l,F)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(F){kt(o,p,F)}}var y=o.return;try{Vf(o)}catch(F){kt(o,y,F)}break;case 5:var T=o.return;try{Vf(o)}catch(F){kt(o,T,F)}}}catch(F){kt(o,o.return,F)}if(o===i){ye=null;break}var D=o.sibling;if(D!==null){D.return=o.return,ye=D;break}ye=o.return}}var Ub=Math.ceil,Ac=ee.ReactCurrentDispatcher,jf=ee.ReactCurrentOwner,xr=ee.ReactCurrentBatchConfig,Je=0,nn=null,zt=null,ln=0,mr=0,xa=As(0),Xt=0,$l=null,Po=0,Pc=0,Ff=0,Bl=null,Kn=null,Uf=0,Na=1/0,Zi=null,Rc=!1,zf=null,Os=null,kc=!1,Ds=null,xc=0,Hl=0,$f=null,Nc=-1,Oc=0;function xn(){return(Je&6)!==0?at():Nc!==-1?Nc:Nc=at()}function Vs(i){return(i.mode&1)===0?1:(Je&2)!==0&&ln!==0?ln&-ln:Tb.transition!==null?(Oc===0&&(Oc=zi()),Oc):(i=H,i!==0||(i=window.event,i=i===void 0?16:yl(i.type)),i)}function ei(i,o,l,h){if(50<Hl)throw Hl=0,$f=null,Error(t(185));hi(i,l,h),((Je&2)===0||i!==nn)&&(i===nn&&((Je&2)===0&&(Pc|=l),Xt===4&&Ms(i,ln)),Qn(i,h),l===1&&Je===0&&(o.mode&1)===0&&(Na=at()+500,ac&&Rs()))}function Qn(i,o){var l=i.callbackNode;Br(i,o);var h=Ui(i,i===nn?ln:0);if(h===0)l!==null&&jt(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&jt(l),o===1)i.tag===0?Sb(Vy.bind(null,i)):wv(Vy.bind(null,i)),yb(function(){(Je&6)===0&&Rs()}),l=null;else{switch(te(h)){case 1:l=ji;break;case 4:l=$r;break;case 16:l=$n;break;case 536870912:l=Zo;break;default:l=$n}l=By(l,Dy.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Dy(i,o){if(Nc=-1,Oc=0,(Je&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Oa()&&i.callbackNode!==l)return null;var h=Ui(i,i===nn?ln:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Dc(i,h);else{o=h;var p=Je;Je|=2;var y=Ly();(nn!==i||ln!==o)&&(Zi=null,Na=at()+500,ko(i,o));do try{Bb();break}catch(D){My(i,D)}while(!0);of(),Ac.current=y,Je=p,zt!==null?o=0:(nn=null,ln=0,o=Xt)}if(o!==0){if(o===2&&(p=gn(i),p!==0&&(h=p,o=Bf(i,p))),o===1)throw l=$l,ko(i,0),Ms(i,h),Qn(i,at()),l;if(o===6)Ms(i,h);else{if(p=i.current.alternate,(h&30)===0&&!zb(p)&&(o=Dc(i,h),o===2&&(y=gn(i),y!==0&&(h=y,o=Bf(i,y))),o===1))throw l=$l,ko(i,0),Ms(i,h),Qn(i,at()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:xo(i,Kn,Zi);break;case 3:if(Ms(i,h),(h&130023424)===h&&(o=Uf+500-at(),10<o)){if(Ui(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){xn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Kd(xo.bind(null,i,Kn,Zi),o);break}xo(i,Kn,Zi);break;case 4:if(Ms(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var T=31-Zt(h);y=1<<T,T=o[T],T>p&&(p=T),h&=~y}if(h=p,h=at()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Ub(h/1960))-h,10<h){i.timeoutHandle=Kd(xo.bind(null,i,Kn,Zi),h);break}xo(i,Kn,Zi);break;case 5:xo(i,Kn,Zi);break;default:throw Error(t(329))}}}return Qn(i,at()),i.callbackNode===l?Dy.bind(null,i):null}function Bf(i,o){var l=Bl;return i.current.memoizedState.isDehydrated&&(ko(i,o).flags|=256),i=Dc(i,o),i!==2&&(o=Kn,Kn=l,o!==null&&Hf(o)),i}function Hf(i){Kn===null?Kn=i:Kn.push.apply(Kn,i)}function zb(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Qr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ms(i,o){for(o&=~Ff,o&=~Pc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Zt(o),h=1<<l;i[l]=-1,o&=~h}}function Vy(i){if((Je&6)!==0)throw Error(t(327));Oa();var o=Ui(i,0);if((o&1)===0)return Qn(i,at()),null;var l=Dc(i,o);if(i.tag!==0&&l===2){var h=gn(i);h!==0&&(o=h,l=Bf(i,h))}if(l===1)throw l=$l,ko(i,0),Ms(i,o),Qn(i,at()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,xo(i,Kn,Zi),Qn(i,at()),null}function Wf(i,o){var l=Je;Je|=1;try{return i(o)}finally{Je=l,Je===0&&(Na=at()+500,ac&&Rs())}}function Ro(i){Ds!==null&&Ds.tag===0&&(Je&6)===0&&Oa();var o=Je;Je|=1;var l=xr.transition,h=H;try{if(xr.transition=null,H=1,i)return i()}finally{H=h,xr.transition=l,Je=o,(Je&6)===0&&Rs()}}function qf(){mr=xa.current,gt(xa)}function ko(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,vb(l)),zt!==null)for(l=zt.return;l!==null;){var h=l;switch(ef(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&sc();break;case 3:Pa(),gt(Wn),gt(vn),pf();break;case 5:df(h);break;case 4:Pa();break;case 13:gt(It);break;case 19:gt(It);break;case 10:af(h.type._context);break;case 22:case 23:qf()}l=l.return}if(nn=i,zt=i=Ls(i.current,null),ln=mr=o,Xt=0,$l=null,Ff=Pc=Po=0,Kn=Bl=null,bo!==null){for(o=0;o<bo.length;o++)if(l=bo[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}bo=null}return i}function My(i,o){do{var l=zt;try{if(of(),vc.current=Ec,yc){for(var h=bt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}yc=!1}if(Ao=0,tn=Qt=bt=null,Ml=!1,Ll=0,jf.current=null,l===null||l.return===null){Xt=1,$l=o,zt=null;break}e:{var y=i,T=l.return,D=l,F=o;if(o=ln,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ae=D,ue=ae.tag;if((ae.mode&1)===0&&(ue===0||ue===11||ue===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ge=ay(T);if(ge!==null){ge.flags&=-257,ly(ge,T,D,y,o),ge.mode&1&&oy(y,Y,o),o=ge,F=Y;var _e=o.updateQueue;if(_e===null){var we=new Set;we.add(F),o.updateQueue=we}else _e.add(F);break e}else{if((o&1)===0){oy(y,Y,o),Gf();break e}F=Error(t(426))}}else if(wt&&D.mode&1){var Dt=ay(T);if(Dt!==null){(Dt.flags&65536)===0&&(Dt.flags|=256),ly(Dt,T,D,y,o),rf(Ra(F,D));break e}}y=F=Ra(F,D),Xt!==4&&(Xt=2),Bl===null?Bl=[y]:Bl.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var q=iy(y,F,o);xv(y,q);break e;case 1:D=F;var z=y.type,G=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Os===null||!Os.has(G)))){y.flags|=65536,o&=-o,y.lanes|=o;var ce=sy(y,D,o);xv(y,ce);break e}}y=y.return}while(y!==null)}Fy(l)}catch(Se){o=Se,zt===l&&l!==null&&(zt=l=l.return);continue}break}while(!0)}function Ly(){var i=Ac.current;return Ac.current=Ec,i===null?Ec:i}function Gf(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),nn===null||(Po&268435455)===0&&(Pc&268435455)===0||Ms(nn,ln)}function Dc(i,o){var l=Je;Je|=2;var h=Ly();(nn!==i||ln!==o)&&(Zi=null,ko(i,o));do try{$b();break}catch(p){My(i,p)}while(!0);if(of(),Je=l,Ac.current=h,zt!==null)throw Error(t(261));return nn=null,ln=0,Xt}function $b(){for(;zt!==null;)jy(zt)}function Bb(){for(;zt!==null&&!ot();)jy(zt)}function jy(i){var o=$y(i.alternate,i,mr);i.memoizedProps=i.pendingProps,o===null?Fy(i):zt=o,jf.current=null}function Fy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=Vb(l,o,mr),l!==null){zt=l;return}}else{if(l=Mb(l,o),l!==null){l.flags&=32767,zt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Xt=6,zt=null;return}}if(o=o.sibling,o!==null){zt=o;return}zt=o=i}while(o!==null);Xt===0&&(Xt=5)}function xo(i,o,l){var h=H,p=xr.transition;try{xr.transition=null,H=1,Hb(i,o,l,h)}finally{xr.transition=p,H=h}return null}function Hb(i,o,l,h){do Oa();while(Ds!==null);if((Je&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(lt(i,y),i===nn&&(zt=nn=null,ln=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||kc||(kc=!0,By($n,function(){return Oa(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=xr.transition,xr.transition=null;var T=H;H=1;var D=Je;Je|=4,jf.current=null,jb(i,l),Ry(l,i),cb(qd),Ts=!!Wd,qd=Wd=null,i.current=l,Fb(l),gl(),Je=D,H=T,xr.transition=y}else i.current=l;if(kc&&(kc=!1,Ds=i,xc=p),y=i.pendingLanes,y===0&&(Os=null),ea(l.stateNode),Qn(i,at()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Rc)throw Rc=!1,i=zf,zf=null,i;return(xc&1)!==0&&i.tag!==0&&Oa(),y=i.pendingLanes,(y&1)!==0?i===$f?Hl++:(Hl=0,$f=i):Hl=0,Rs(),null}function Oa(){if(Ds!==null){var i=te(xc),o=xr.transition,l=H;try{if(xr.transition=null,H=16>i?16:i,Ds===null)var h=!1;else{if(i=Ds,Ds=null,xc=0,(Je&6)!==0)throw Error(t(331));var p=Je;for(Je|=4,ye=i.current;ye!==null;){var y=ye,T=y.child;if((ye.flags&16)!==0){var D=y.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(ye=Y;ye!==null;){var ae=ye;switch(ae.tag){case 0:case 11:case 15:zl(8,ae,y)}var ue=ae.child;if(ue!==null)ue.return=ae,ye=ue;else for(;ye!==null;){ae=ye;var oe=ae.sibling,ge=ae.return;if(Iy(ae),ae===Y){ye=null;break}if(oe!==null){oe.return=ge,ye=oe;break}ye=ge}}}var _e=y.alternate;if(_e!==null){var we=_e.child;if(we!==null){_e.child=null;do{var Dt=we.sibling;we.sibling=null,we=Dt}while(we!==null)}}ye=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,ye=T;else e:for(;ye!==null;){if(y=ye,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:zl(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,ye=q;break e}ye=y.return}}var z=i.current;for(ye=z;ye!==null;){T=ye;var G=T.child;if((T.subtreeFlags&2064)!==0&&G!==null)G.return=T,ye=G;else e:for(T=z;ye!==null;){if(D=ye,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Cc(9,D)}}catch(Se){kt(D,D.return,Se)}if(D===T){ye=null;break e}var ce=D.sibling;if(ce!==null){ce.return=D.return,ye=ce;break e}ye=D.return}}if(Je=p,Rs(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Fi,i)}catch{}h=!0}return h}finally{H=l,xr.transition=o}}return!1}function Uy(i,o,l){o=Ra(l,o),o=iy(i,o,1),i=xs(i,o,1),o=xn(),i!==null&&(hi(i,1,o),Qn(i,o))}function kt(i,o,l){if(i.tag===3)Uy(i,i,l);else for(;o!==null;){if(o.tag===3){Uy(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Os===null||!Os.has(h))){i=Ra(l,i),i=sy(o,i,1),o=xs(o,i,1),i=xn(),o!==null&&(hi(o,1,i),Qn(o,i));break}}o=o.return}}function Wb(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=xn(),i.pingedLanes|=i.suspendedLanes&l,nn===i&&(ln&l)===l&&(Xt===4||Xt===3&&(ln&130023424)===ln&&500>at()-Uf?ko(i,0):Ff|=l),Qn(i,o)}function zy(i,o){o===0&&((i.mode&1)===0?o=1:(o=Es,Es<<=1,(Es&130023424)===0&&(Es=4194304)));var l=xn();i=Xi(i,o),i!==null&&(hi(i,o,l),Qn(i,l))}function qb(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),zy(i,l)}function Gb(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),zy(i,l)}var $y;$y=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wn.current)Gn=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return Gn=!1,Db(i,o,l);Gn=(i.flags&131072)!==0}else Gn=!1,wt&&(o.flags&1048576)!==0&&Ev(o,uc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Ic(i,o),i=o.pendingProps;var p=Ea(o,vn.current);Aa(o,l),p=vf(null,o,h,i,p,l);var y=yf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qn(h)?(y=!0,oc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,cf(o),p.updater=Sc,o.stateNode=p,p._reactInternals=o,If(o,h,i,l),o=Pf(null,o,h,!0,y,l)):(o.tag=0,wt&&y&&Zd(o),kn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(Ic(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=Qb(h),i=Yr(h,i),p){case 0:o=Af(null,o,h,i,l);break e;case 1:o=py(null,o,h,i,l);break e;case 11:o=uy(null,o,h,i,l);break e;case 14:o=cy(null,o,h,Yr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Yr(h,p),Af(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Yr(h,p),py(i,o,h,p,l);case 3:e:{if(my(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,kv(i,o),mc(o,h,null,l);var T=o.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Ra(Error(t(423)),o),o=gy(i,o,h,l,p);break e}else if(h!==p){p=Ra(Error(t(424)),o),o=gy(i,o,h,l,p);break e}else for(pr=Cs(o.stateNode.containerInfo.firstChild),fr=o,wt=!0,Xr=null,l=Pv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ia(),h===p){o=Ji(i,o,l);break e}kn(i,o,h,l)}o=o.child}return o;case 5:return Ov(o),i===null&&nf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,T=p.children,Gd(h,p)?T=null:y!==null&&Gd(h,y)&&(o.flags|=32),fy(i,o),kn(i,o,T,l),o.child;case 6:return i===null&&nf(o),null;case 13:return vy(i,o,l);case 4:return hf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ba(o,null,h,l):kn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Yr(h,p),uy(i,o,h,p,l);case 7:return kn(i,o,o.pendingProps,l),o.child;case 8:return kn(i,o,o.pendingProps.children,l),o.child;case 12:return kn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,T=p.value,dt(dc,h._currentValue),h._currentValue=T,y!==null)if(Qr(y.value,T)){if(y.children===p.children&&!Wn.current){o=Ji(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var D=y.dependencies;if(D!==null){T=y.child;for(var F=D.firstContext;F!==null;){if(F.context===h){if(y.tag===1){F=Yi(-1,l&-l),F.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),Y.pending=F}}y.lanes|=l,F=y.alternate,F!==null&&(F.lanes|=l),lf(y.return,l,o),D.lanes|=l;break}F=F.next}}else if(y.tag===10)T=y.type===o.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,D=T.alternate,D!==null&&(D.lanes|=l),lf(T,l,o),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===o){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}kn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Aa(o,l),p=Rr(p),h=h(p),o.flags|=1,kn(i,o,h,l),o.child;case 14:return h=o.type,p=Yr(h,o.pendingProps),p=Yr(h.type,p),cy(i,o,h,p,l);case 15:return hy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Yr(h,p),Ic(i,o),o.tag=1,qn(h)?(i=!0,oc(o)):i=!1,Aa(o,l),ny(o,h,p),If(o,h,p,l),Pf(null,o,h,!0,i,l);case 19:return _y(i,o,l);case 22:return dy(i,o,l)}throw Error(t(156,o.tag))};function By(i,o){return _s(i,o)}function Kb(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(i,o,l,h){return new Kb(i,o,l,h)}function Kf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qb(i){if(typeof i=="function")return Kf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===De)return 14}return 2}function Ls(i,o){var l=i.alternate;return l===null?(l=Nr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Vc(i,o,l,h,p,y){var T=2;if(h=i,typeof i=="function")Kf(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case k:return No(l.children,p,y,o);case A:T=8,p|=8;break;case N:return i=Nr(12,l,o,p|2),i.elementType=N,i.lanes=y,i;case x:return i=Nr(13,l,o,p),i.elementType=x,i.lanes=y,i;case ze:return i=Nr(19,l,o,p),i.elementType=ze,i.lanes=y,i;case Ve:return Mc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:T=10;break e;case M:T=9;break e;case L:T=11;break e;case De:T=14;break e;case $e:T=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Nr(T,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function No(i,o,l,h){return i=Nr(7,i,h,o),i.lanes=l,i}function Mc(i,o,l,h){return i=Nr(22,i,h,o),i.elementType=Ve,i.lanes=l,i.stateNode={isHidden:!1},i}function Qf(i,o,l){return i=Nr(6,i,null,o),i.lanes=l,i}function Xf(i,o,l){return o=Nr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Xb(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Yf(i,o,l,h,p,y,T,D,F){return i=new Xb(i,o,l,D,F),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Nr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(y),i}function Yb(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function Hy(i){if(!i)return Ps;i=i._reactInternals;e:{if(Un(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(qn(l))return yv(i,l,o)}return o}function Wy(i,o,l,h,p,y,T,D,F){return i=Yf(l,h,!0,i,p,y,T,D,F),i.context=Hy(null),l=i.current,h=xn(),p=Vs(l),y=Yi(h,p),y.callback=o??null,xs(l,y,p),i.current.lanes=p,hi(i,p,h),Qn(i,h),i}function Lc(i,o,l,h){var p=o.current,y=xn(),T=Vs(p);return l=Hy(l),o.context===null?o.context=l:o.pendingContext=l,o=Yi(y,T),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=xs(p,o,T),i!==null&&(ei(i,p,T,y),pc(i,p,T)),T}function jc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function qy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Jf(i,o){qy(i,o),(i=i.alternate)&&qy(i,o)}function Jb(){return null}var Gy=typeof reportError=="function"?reportError:function(i){console.error(i)};function Zf(i){this._internalRoot=i}Fc.prototype.render=Zf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Lc(i,o,null,null)},Fc.prototype.unmount=Zf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ro(function(){Lc(null,i,null,null)}),o[qi]=null}};function Fc(i){this._internalRoot=i}Fc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ir();i={blockedOn:null,target:i,priority:o};for(var l=0;l<di.length&&o!==0&&o<di[l].priority;l++);di.splice(l,0,i),l===0&&$u(i)}};function ep(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Uc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Ky(){}function Zb(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var Y=jc(T);y.call(Y)}}var T=Wy(o,h,i,0,null,!1,!1,"",Ky);return i._reactRootContainer=T,i[qi]=T.current,Pl(i.nodeType===8?i.parentNode:i),Ro(),T}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var D=h;h=function(){var Y=jc(F);D.call(Y)}}var F=Yf(i,0,!1,null,null,!1,!1,"",Ky);return i._reactRootContainer=F,i[qi]=F.current,Pl(i.nodeType===8?i.parentNode:i),Ro(function(){Lc(o,F,l,h)}),F}function zc(i,o,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var D=p;p=function(){var F=jc(T);D.call(F)}}Lc(o,T,i,p)}else T=Zb(l,o,i,p,h);return jc(T)}be=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ui(o.pendingLanes);l!==0&&(I(o,l|1),Qn(o,at()),(Je&6)===0&&(Na=at()+500,Rs()))}break;case 13:Ro(function(){var h=Xi(i,1);if(h!==null){var p=xn();ei(h,i,1,p)}}),Jf(i,1)}},He=function(i){if(i.tag===13){var o=Xi(i,134217728);if(o!==null){var l=xn();ei(o,i,134217728,l)}Jf(i,134217728)}},Tr=function(i){if(i.tag===13){var o=Vs(i),l=Xi(i,o);if(l!==null){var h=xn();ei(l,i,o,h)}Jf(i,o)}},Ir=function(){return H},ra=function(i,o){var l=H;try{return H=i,o()}finally{H=l}},Sr=function(i,o,l){switch(o){case"input":if(ps(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=ic(h);if(!p)throw Error(t(90));Pt(h),ps(h,p)}}}break;case"textarea":pn(i,l);break;case"select":o=l.value,o!=null&&Gt(i,!!l.multiple,o,!1)}},li=Wf,Jt=Ro;var eC={usingClientEntryPoint:!1,Events:[xl,_a,ic,jn,gs,Wf]},Wl={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tC={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ho(i),i===null?null:i.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||Jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Fi=$c.inject(tC),Pn=$c}catch{}}return Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eC,Xn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(o))throw Error(t(200));return Yb(i,o,null,l)},Xn.createRoot=function(i,o){if(!ep(i))throw Error(t(299));var l=!1,h="",p=Gy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Yf(i,1,!1,null,null,l,!1,h,p),i[qi]=o.current,Pl(i.nodeType===8?i.parentNode:i),new Zf(o)},Xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ho(o),i=i===null?null:i.stateNode,i},Xn.flushSync=function(i){return Ro(i)},Xn.hydrate=function(i,o,l){if(!Uc(o))throw Error(t(200));return zc(null,i,o,!0,l)},Xn.hydrateRoot=function(i,o,l){if(!ep(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=Gy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),o=Wy(o,null,i,1,l??null,p,!1,y,T),i[qi]=o.current,Pl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Fc(o)},Xn.render=function(i,o,l){if(!Uc(o))throw Error(t(200));return zc(null,i,o,!1,l)},Xn.unmountComponentAtNode=function(i){if(!Uc(i))throw Error(t(40));return i._reactRootContainer?(Ro(function(){zc(null,null,i,!1,function(){i._reactRootContainer=null,i[qi]=null})}),!0):!1},Xn.unstable_batchedUpdates=Wf,Xn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!Uc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return zc(i,o,l,!1,h)},Xn.version="18.3.1-next-f1338f8080-20240426",Xn}var n_;function B0(){if(n_)return rp.exports;n_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=uC(),rp.exports}var r_;function cC(){if(r_)return Bc;r_=1;var n=B0();return Bc.createRoot=n.createRoot,Bc.hydrateRoot=n.hydrateRoot,Bc}var hC=cC();const dC=z0(hC);var fC=B0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hu.apply(this,arguments)}var Ws;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ws||(Ws={}));const i_="popstate";function pC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Vp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:H0(s)}return gC(e,t,null,n)}function qt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Im(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mC(){return Math.random().toString(36).substr(2,8)}function s_(n,e){return{usr:n.state,key:n.key,idx:e}}function Vp(n,e,t,r){return t===void 0&&(t=null),hu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?il(e):e,{state:t,key:e&&e.key||r||mC()})}function H0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function gC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=Ws.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(hu({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function S(){d=Ws.Pop;let C=_(),B=C==null?null:C-m;m=C,f&&f({action:d,location:R.location,delta:B})}function E(C,B){d=Ws.Push;let Q=Vp(R.location,C,B);m=_()+1;let K=s_(Q,m),ee=R.createHref(Q);try{u.pushState(K,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(ee)}a&&f&&f({action:d,location:R.location,delta:1})}function P(C,B){d=Ws.Replace;let Q=Vp(R.location,C,B);m=_();let K=s_(Q,m),ee=R.createHref(Q);u.replaceState(K,"",ee),a&&f&&f({action:d,location:R.location,delta:0})}function O(C){let B=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof C=="string"?C:H0(C);return Q=Q.replace(/ $/,"%20"),qt(B,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,B)}let R={get action(){return d},get location(){return n(s,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(i_,S),f=C,()=>{s.removeEventListener(i_,S),f=null}},createHref(C){return e(s,C)},createURL:O,encodeLocation(C){let B=O(C);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:P,go(C){return u.go(C)}};return R}var o_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(o_||(o_={}));function vC(n,e,t){return t===void 0&&(t="/"),yC(n,e,t)}function yC(n,e,t,r){let s=typeof e=="string"?il(e):e,a=G0(s.pathname||"/",t);if(a==null)return null;let u=W0(n);_C(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=xC(a);d=PC(u[f],m)}return d}function W0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(qt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Lo([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(qt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),W0(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:CC(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of q0(a.path))s(a,u,f)}),e}function q0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=q0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function _C(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wC=/^:[\w-]+$/,EC=3,SC=2,TC=1,IC=10,bC=-2,a_=n=>n==="*";function CC(n,e){let t=n.split("/"),r=t.length;return t.some(a_)&&(r+=bC),e&&(r+=SC),t.filter(s=>!a_(s)).reduce((s,a)=>s+(wC.test(a)?EC:a===""?TC:IC),r)}function AC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function PC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",S=RC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),E=f.route;if(!S)return null;Object.assign(s,S.params),u.push({params:s,pathname:Lo([a,S.pathname]),pathnameBase:MC(Lo([a,S.pathnameBase])),route:E}),S.pathnameBase!=="/"&&(a=Lo([a,S.pathnameBase]))}return u}function RC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,_,S)=>{let{paramName:E,isOptional:P}=_;if(E==="*"){let R=d[S]||"";u=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const O=d[S];return P&&!O?m[E]=void 0:m[E]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function kC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Im(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Im(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function G0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const NC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OC=n=>NC.test(n);function DC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?il(n):n,a;if(t)if(OC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Im(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=l_(t.substring(1),"/"):a=l_(t,e)}else a=e;return{pathname:a,search:LC(r),hash:jC(s)}}function l_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function op(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function K0(n,e){let t=VC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Q0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=il(n):(s=hu({},n),qt(!s.pathname||!s.pathname.includes("?"),op("?","pathname","search",s)),qt(!s.pathname||!s.pathname.includes("#"),op("#","pathname","hash",s)),qt(!s.search||!s.search.includes("#"),op("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let S=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),S-=1;s.pathname=E.join("/")}d=S>=0?e[S]:"/"}let f=DC(s,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Lo=n=>n.join("/").replace(/\/\/+/g,"/"),MC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const X0=["post","put","patch","delete"];new Set(X0);const UC=["get",...X0];new Set(UC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},du.apply(this,arguments)}const bm=V.createContext(null),zC=V.createContext(null),Tu=V.createContext(null),Qh=V.createContext(null),Wo=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Y0=V.createContext(null);function Iu(){return V.useContext(Qh)!=null}function Cm(){return Iu()||qt(!1),V.useContext(Qh).location}function J0(n){V.useContext(Tu).static||V.useLayoutEffect(n)}function bu(){let{isDataRoute:n}=V.useContext(Wo);return n?e1():$C()}function $C(){Iu()||qt(!1);let n=V.useContext(bm),{basename:e,future:t,navigator:r}=V.useContext(Tu),{matches:s}=V.useContext(Wo),{pathname:a}=Cm(),u=JSON.stringify(K0(s,t.v7_relativeSplatPath)),d=V.useRef(!1);return J0(()=>{d.current=!0}),V.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let S=Q0(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Lo([e,S.pathname])),(_.replace?r.replace:r.push)(S,_.state,_)},[e,r,u,a,n])}function BC(n,e){return HC(n,e)}function HC(n,e,t,r){Iu()||qt(!1);let{navigator:s}=V.useContext(Tu),{matches:a}=V.useContext(Wo),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Cm(),_;if(e){var S;let C=typeof e=="string"?il(e):e;f==="/"||(S=C.pathname)!=null&&S.startsWith(f)||qt(!1),_=C}else _=m;let E=_.pathname||"/",P=E;if(f!=="/"){let C=f.replace(/^\//,"").split("/");P="/"+E.replace(/^\//,"").split("/").slice(C.length).join("/")}let O=vC(n,{pathname:P}),R=QC(O&&O.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Lo([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Lo([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,r);return e&&R?V.createElement(Qh.Provider,{value:{location:du({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ws.Pop}},R):R}function WC(){let n=ZC(),e=FC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const qC=V.createElement(WC,null);class GC extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Wo.Provider,{value:this.props.routeContext},V.createElement(Y0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KC(n){let{routeContext:e,match:t,children:r}=n,s=V.useContext(bm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Wo.Provider,{value:e},r)}function QC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let _=u.findIndex(S=>S.route.id&&(d==null?void 0:d[S.route.id])!==void 0);_>=0||qt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let S=u[_];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=_),S.route.id){let{loaderData:E,errors:P}=t,O=S.route.loader&&E[S.route.id]===void 0&&(!P||P[S.route.id]===void 0);if(S.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,S,E)=>{let P,O=!1,R=null,C=null;t&&(P=d&&S.route.id?d[S.route.id]:void 0,R=S.route.errorElement||qC,f&&(m<0&&E===0?(t1("route-fallback"),O=!0,C=null):m===E&&(O=!0,C=S.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,E+1)),Q=()=>{let K;return P?K=R:O?K=C:S.route.Component?K=V.createElement(S.route.Component,null):S.route.element?K=S.route.element:K=_,V.createElement(KC,{match:S,routeContext:{outlet:_,matches:B,isDataRoute:t!=null},children:K})};return t&&(S.route.ErrorBoundary||S.route.errorElement||E===0)?V.createElement(GC,{location:t.location,revalidation:t.revalidation,component:R,error:P,children:Q(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):Q()},null)}var Z0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Z0||{}),eE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(eE||{});function XC(n){let e=V.useContext(bm);return e||qt(!1),e}function YC(n){let e=V.useContext(zC);return e||qt(!1),e}function JC(n){let e=V.useContext(Wo);return e||qt(!1),e}function tE(n){let e=JC(),t=e.matches[e.matches.length-1];return t.route.id||qt(!1),t.route.id}function ZC(){var n;let e=V.useContext(Y0),t=YC(),r=tE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function e1(){let{router:n}=XC(Z0.UseNavigateStable),e=tE(eE.UseNavigateStable),t=V.useRef(!1);return J0(()=>{t.current=!0}),V.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,du({fromRouteId:e},a)))},[n,e])}const u_={};function t1(n,e,t){u_[n]||(u_[n]=!0)}function n1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ni(n){let{to:e,replace:t,state:r,relative:s}=n;Iu()||qt(!1);let{future:a,static:u}=V.useContext(Tu),{matches:d}=V.useContext(Wo),{pathname:f}=Cm(),m=bu(),_=Q0(e,K0(d,a.v7_relativeSplatPath),f,s==="path"),S=JSON.stringify(_);return V.useEffect(()=>m(JSON.parse(S),{replace:t,state:r,relative:s}),[m,S,s,t,r]),null}function Oo(n){qt(!1)}function r1(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ws.Pop,navigator:a,static:u=!1,future:d}=n;Iu()&&qt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:u,future:du({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=il(r));let{pathname:_="/",search:S="",hash:E="",state:P=null,key:O="default"}=r,R=V.useMemo(()=>{let C=G0(_,f);return C==null?null:{location:{pathname:C,search:S,hash:E,state:P,key:O},navigationType:s}},[f,_,S,E,P,O,s]);return R==null?null:V.createElement(Tu.Provider,{value:m},V.createElement(Qh.Provider,{children:t,value:R}))}function i1(n){let{children:e,location:t}=n;return BC(Mp(e),t)}new Promise(()=>{});function Mp(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,s)=>{if(!V.isValidElement(r))return;let a=[...e,s];if(r.type===V.Fragment){t.push.apply(t,Mp(r.props.children,a));return}r.type!==Oo&&qt(!1),!r.props.index||!r.props.children||qt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Mp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const s1="6";try{window.__reactRouterVersion=s1}catch{}const o1="startTransition",c_=Dp[o1];function a1(n){let{basename:e,children:t,future:r,window:s}=n,a=V.useRef();a.current==null&&(a.current=pC({window:s,v5Compat:!0}));let u=a.current,[d,f]=V.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},_=V.useCallback(S=>{m&&c_?c_(()=>f(S)):f(S)},[f,m]);return V.useLayoutEffect(()=>u.listen(_),[u,_]),V.useEffect(()=>n1(r),[r]),V.createElement(r1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var h_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(h_||(h_={}));var d_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(d_||(d_={}));function f_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function l1(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function u1(){const[n,e]=V.useState(null),[t,r]=V.useState(!1);V.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=V.useMemo(()=>!f_()&&l1()&&!t&&!n,[t,n]),a=V.useMemo(()=>!f_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:g.jsxs("section",{className:"install-banner","aria-live":"polite",children:[g.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),g.jsxs("div",{className:"install-actions",children:[a?g.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const nE=V.createContext(null);function c1({children:n}){const[e,t]=V.useState([]),r=V.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=V.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return g.jsxs(nE.Provider,{value:s,children:[n,g.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>g.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Xh(){const n=V.useContext(nE);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const h1=()=>{};var p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},d1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,S=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(E=64)),r.push(t[_],t[S],t[E],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const S=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||S==null)throw new f1;const E=a<<2|d>>4;if(r.push(E),m!==64){const P=d<<4&240|m>>2;if(r.push(P),S!==64){const O=m<<6&192|S;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class f1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p1=function(n){const e=rE(n);return iE.encodeByteArray(e,!0)},_h=function(n){return p1(n).replace(/\./g,"")},sE=function(n){try{return iE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=()=>m1().__FIREBASE_DEFAULTS__,v1=()=>{if(typeof process>"u"||typeof p_>"u")return;const n=p_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sE(n[1]);return e&&JSON.parse(e)},Yh=()=>{try{return h1()||g1()||v1()||y1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oE=n=>{var e,t;return(t=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Am=n=>{const e=oE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aE=()=>{var n;return(n=Yh())===null||n===void 0?void 0:n.config},lE=n=>{var e;return(e=Yh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_h(JSON.stringify(t)),_h(JSON.stringify(u)),""].join(".")}const iu={};function w1(){const n={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?n.emulator.push(e):n.prod.push(e);return n}function E1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let m_=!1;function Zh(n,e){if(typeof window>"u"||typeof document>"u"||!ds(window.location.host)||iu[n]===e||iu[n]||m_)return;iu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=w1().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,P){E.setAttribute("width","24"),E.setAttribute("id",P),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{m_=!0,u()},E}function _(E,P){E.setAttribute("id",P),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function S(){const E=E1(r),P=t("text"),O=document.getElementById(P)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),B=t("preprendIcon"),Q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const K=E.element;d(K),_(C,R);const ee=m();f(Q,B),K.append(Q,O,C,ee),document.body.appendChild(K)}a?(O.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function T1(){var n;const e=(n=Yh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A1(){const n=bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function P1(){return!T1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R1(){try{return typeof indexedDB=="object"}catch{return!1}}function k1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="FirebaseError";class oi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=x1,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?N1(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new oi(s,d,r)}}function N1(n,e){return n.replace(O1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const O1=/\{\$([^}]+)}/g;function D1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ss(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(g_(a)&&g_(u)){if(!ss(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function g_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V1(n,e){const t=new M1(n,e);return t.subscribe.bind(t)}class M1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");L1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ap),s.error===void 0&&(s.error=ap),s.complete===void 0&&(s.complete=ap);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n){return n&&n._delegate?n._delegate:n}class os{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U1(e))try{this.getOrInitializeService({instanceIdentifier:Do})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Do){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Do){return this.instances.has(e)}getOptions(e=Do){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Do){return this.component?this.component.multipleInstances?e:Do:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F1(n){return n===Do?void 0:n}function U1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const $1={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},B1=Ge.INFO,H1={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},W1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=H1[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=B1,this._logHandler=W1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const q1=(n,e)=>e.some(t=>n instanceof t);let v_,y_;function G1(){return v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K1(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cE=new WeakMap,Lp=new WeakMap,hE=new WeakMap,lp=new WeakMap,Rm=new WeakMap;function Q1(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Gs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&cE.set(t,n)}).catch(()=>{}),Rm.set(e,n),e}function X1(n){if(Lp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Lp.set(n,e)}let jp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Y1(n){jp=n(jp)}function J1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(up(this),e,...t);return hE.set(r,e.sort?e.sort():[e]),Gs(r)}:K1().includes(n)?function(...e){return n.apply(up(this),e),Gs(cE.get(this))}:function(...e){return Gs(n.apply(up(this),e))}}function Z1(n){return typeof n=="function"?J1(n):(n instanceof IDBTransaction&&X1(n),q1(n,G1())?new Proxy(n,jp):n)}function Gs(n){if(n instanceof IDBRequest)return Q1(n);if(lp.has(n))return lp.get(n);const e=Z1(n);return e!==n&&(lp.set(n,e),Rm.set(e,n)),e}const up=n=>Rm.get(n);function eA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Gs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Gs(u.result),f.oldVersion,f.newVersion,Gs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],cp=new Map;function __(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=nA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tA.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return cp.set(e,a),a}Y1(n=>({...n,get:(e,t,r)=>__(e,t)||n.get(e,t,r),has:(e,t)=>!!__(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function iA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fp="@firebase/app",w_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Pm("@firebase/app"),sA="@firebase/app-compat",oA="@firebase/analytics-compat",aA="@firebase/analytics",lA="@firebase/app-check-compat",uA="@firebase/app-check",cA="@firebase/auth",hA="@firebase/auth-compat",dA="@firebase/database",fA="@firebase/data-connect",pA="@firebase/database-compat",mA="@firebase/functions",gA="@firebase/functions-compat",vA="@firebase/installations",yA="@firebase/installations-compat",_A="@firebase/messaging",wA="@firebase/messaging-compat",EA="@firebase/performance",SA="@firebase/performance-compat",TA="@firebase/remote-config",IA="@firebase/remote-config-compat",bA="@firebase/storage",CA="@firebase/storage-compat",AA="@firebase/firestore",PA="@firebase/ai",RA="@firebase/firestore-compat",kA="firebase",xA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",NA={[Fp]:"fire-core",[sA]:"fire-core-compat",[aA]:"fire-analytics",[oA]:"fire-analytics-compat",[uA]:"fire-app-check",[lA]:"fire-app-check-compat",[cA]:"fire-auth",[hA]:"fire-auth-compat",[dA]:"fire-rtdb",[fA]:"fire-data-connect",[pA]:"fire-rtdb-compat",[mA]:"fire-fn",[gA]:"fire-fn-compat",[vA]:"fire-iid",[yA]:"fire-iid-compat",[_A]:"fire-fcm",[wA]:"fire-fcm-compat",[EA]:"fire-perf",[SA]:"fire-perf-compat",[TA]:"fire-rc",[IA]:"fire-rc-compat",[bA]:"fire-gcs",[CA]:"fire-gcs-compat",[AA]:"fire-fst",[RA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,OA=new Map,zp=new Map;function E_(n,e){try{n.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Js(n){const e=n.name;if(zp.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,n);for(const t of wh.values())E_(t,n);for(const t of OA.values())E_(t,n);return!0}function Pu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new Cu("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=xA;function dE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Up,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(t||(t=aE()),!t)throw Ks.create("no-options");const a=wh.get(s);if(a){if(ss(t,a.options)&&ss(r,a.config))return a;throw Ks.create("duplicate-app",{appName:s})}const u=new z1(s);for(const f of zp.values())u.addComponent(f);const d=new VA(t,r,u);return wh.set(s,d),d}function ed(n=Up){const e=wh.get(n);if(!e&&n===Up&&aE())return dE();if(!e)throw Ks.create("no-app",{appName:n});return e}function Vr(n,e,t){var r;let s=(r=NA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(d.join(" "));return}Js(new os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebase-heartbeat-database",LA=1,fu="firebase-heartbeat-store";let hp=null;function fE(){return hp||(hp=eA(MA,LA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ks.create("idb-open",{originalErrorMessage:n.message})})),hp}async function jA(n){try{const t=(await fE()).transaction(fu),r=await t.objectStore(fu).get(pE(n));return await t.done,r}catch(e){if(e instanceof oi)as.warn(e.message);else{const t=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(t.message)}}}async function S_(n,e){try{const r=(await fE()).transaction(fu,"readwrite");await r.objectStore(fu).put(e,pE(n)),await r.done}catch(t){if(t instanceof oi)as.warn(t.message);else{const r=Ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});as.warn(r.message)}}}function pE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=1024,UA=30;class zA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>UA){const u=HA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=T_(),{heartbeatsToSend:r,unsentEntries:s}=$A(this._heartbeatsCache.heartbeats),a=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return as.warn(t),""}}}function T_(){return new Date().toISOString().substring(0,10)}function $A(n,e=FA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),I_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),I_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class BA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R1()?k1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function I_(n){return _h(JSON.stringify({version:2,heartbeats:n})).length}function HA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n){Js(new os("platform-logger",e=>new rA(e),"PRIVATE")),Js(new os("heartbeat",e=>new zA(e),"PRIVATE")),Vr(Fp,w_,n),Vr(Fp,w_,"esm2017"),Vr("fire-js","")}WA("");var qA="firebase",GA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(qA,GA,"app");function km(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function mE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KA=mE,gE=new Cu("auth","Firebase",mE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Pm("@firebase/auth");function QA(n,...e){Eh.logLevel<=Ge.WARN&&Eh.warn(`Auth (${qo}): ${n}`,...e)}function sh(n,...e){Eh.logLevel<=Ge.ERROR&&Eh.error(`Auth (${qo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,...e){throw Nm(n,...e)}function ri(n,...e){return Nm(n,...e)}function xm(n,e,t){const r=Object.assign(Object.assign({},KA()),{[e]:t});return new Cu("auth","Firebase",r).create(e,{appName:n.name})}function Qs(n){return xm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ki(n,"argument-error"),xm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gE.create(n,...e)}function Le(n,e,...t){if(!n)throw Nm(e,...t)}function ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sh(e),new Error(e)}function ls(n,e){n||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function XA(){return b_()==="http:"||b_()==="https:"}function b_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XA()||b1()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=S1()||C1()}get(){return YA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tP=new Ru(3e4,6e4);function Dm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function sl(n,e,t,r,s={}){return _E(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=Au(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return I1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ds(n.emulatorConfig.host)&&(m.credentials="include"),yE.fetch()(await wE(n,n.config.apiHost,t,d),m)})}async function _E(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZA),e);try{const s=new rP(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Hc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Hc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Hc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xm(n,_,m);ki(n,_)}}catch(s){if(s instanceof oi)throw s;ki(n,"network-request-failed",{message:String(s)})}}async function nP(n,e,t,r,s={}){const a=await sl(n,e,t,r,s);return"mfaPendingCredential"in a&&ki(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function wE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Om(n.config,s):`${n.config.apiScheme}://${s}`;return eP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class rP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),tP.get())})}}function Hc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ri(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e){return sl(n,"POST","/v1/accounts:delete",e)}async function Sh(n,e){return sl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sP(n,e=!1){const t=vt(n),r=await t.getIdToken(e),s=Vm(r);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:su(dp(s.auth_time)),issuedAtTime:su(dp(s.iat)),expirationTime:su(dp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function dp(n){return Number(n)*1e3}function Vm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const s=sE(t);return s?JSON.parse(s):(sh("Failed to decode base64 JWT payload"),null)}catch(s){return sh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function C_(n){const e=Vm(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof oi&&oP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(n){var e;const t=n.auth,r=await n.getIdToken(),s=await pu(n,Sh(t,{idToken:r}));Le(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?EE(a.providerUserInfo):[],d=uP(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?m:!1,S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Bp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,S)}async function lP(n){const e=vt(n);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EE(n){return n.map(e=>{var{providerId:t}=e,r=km(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e){const t=await _E(n,{},async()=>{const r=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await wE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&ds(n.emulatorConfig.host)&&(f.credentials="include"),yE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hP(n,e){return sl(n,"POST","/v2/accounts:revokeToken",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=C_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await cP(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Ua;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Le(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sP(this,e)}reload(){return lP(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Qs(this.auth));const e=await this.getIdToken();return await pu(this,iP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,_;const S=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,R=(d=t.tenantId)!==null&&d!==void 0?d:void 0,C=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,B=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:ee,isAnonymous:X,providerData:se,stsTokenManager:k}=t;Le(K&&k,e,"internal-error");const A=Ua.fromJSON(this.name,k);Le(typeof K=="string",e,"internal-error"),Fs(S,e.name),Fs(E,e.name),Le(typeof ee=="boolean",e,"internal-error"),Le(typeof X=="boolean",e,"internal-error"),Fs(P,e.name),Fs(O,e.name),Fs(R,e.name),Fs(C,e.name),Fs(B,e.name),Fs(Q,e.name);const N=new ti({uid:K,auth:e,email:E,emailVerified:ee,displayName:S,isAnonymous:X,photoURL:O,phoneNumber:P,tenantId:R,stsTokenManager:A,createdAt:B,lastLoginAt:Q});return se&&Array.isArray(se)&&(N.providerData=se.map(j=>Object.assign({},j))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ua;s.updateFromServerResponse(t);const a=new ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Th(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?EE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new Ua;d.updateFromIdToken(r);const f=new ti({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function ns(n){ls(n instanceof Function,"Expected a class definition");let e=A_.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,A_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SE.type="NONE";const P_=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n,e,t){return`firebase:${n}:${e}:${t}`}class za{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=oh(this.userKey,s.apiKey,a),this.fullPersistenceKey=oh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sh(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new za(ns(P_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ns(P_);const u=oh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(u);if(_){let S;if(typeof _=="string"){const E=await Sh(e,{idToken:_}).catch(()=>{});if(!E)break;S=await ti._fromGetAccountInfoResponse(e,E,_)}else S=ti._fromJSON(e,_);m!==a&&(d=S),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new za(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new za(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PE(e))return"Blackberry";if(RE(e))return"Webos";if(IE(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TE(n=bn()){return/firefox\//i.test(n)}function IE(n=bn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(n=bn()){return/crios\//i.test(n)}function CE(n=bn()){return/iemobile/i.test(n)}function AE(n=bn()){return/android/i.test(n)}function PE(n=bn()){return/blackberry/i.test(n)}function RE(n=bn()){return/webos/i.test(n)}function Mm(n=bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dP(n=bn()){var e;return Mm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fP(){return A1()&&document.documentMode===10}function kE(n=bn()){return Mm(n)||AE(n)||RE(n)||PE(n)||/windows phone/i.test(n)||CE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n,e=[]){let t;switch(n){case"Browser":t=R_(bn());break;case"Worker":t=`${R_(bn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e={}){return sl(n,"GET","/v2/passwordPolicy",Dm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=6;class vP{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:gP,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k_(this),this.idTokenSubscription=new k_(this),this.beforeStateQueue=new pP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ns(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sh(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Qs(this));const t=e?vt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mP(this),t=new vP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ns(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&QA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ol(n){return vt(n)}class k_{constructor(e){this.auth=e,this.observer=null,this.addObserver=V1(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _P(n){Lm=n}function wP(n){return Lm.loadJS(n)}function EP(){return Lm.gapiScript}function SP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e){const t=Pu(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ss(a,e??{}))return s;ki(s,"already-initialized")}return t.initialize({options:e})}function IP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ns);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bP(n,e,t){const r=ol(n);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=NE(e),{host:u,port:d}=CP(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(ss(m,r.config.emulator)&&ss(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,ds(u)?(Jh(`${a}//${u}${f}`),Zh("Auth",!0)):AP()}function NE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CP(n){const e=NE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:x_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:x_(u)}}}function x_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function AP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,t){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(n,e){return nP(n,"POST","/v1/accounts:signInWithIdp",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="http://localhost";class Uo extends OE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=km(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Uo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return $a(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$a(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$a(e,t)}buildRequest(){const e={requestUri:PP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends td{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends ku{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return es.credential(t,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends ku{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends ku{constructor(){super("twitter.com")}static credential(e,t){return Uo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ti._fromIdTokenResponse(e,r,s),u=N_(r);return new Ga({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=N_(r);return new Ga({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function N_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends oi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ih(e,t,r,s)}}function DE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(n,a,e,r):a})}async function RP(n,e,t=!1){const r=await pu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e,t=!1){const{auth:r}=n;if(Jn(r.app))return Promise.reject(Qs(r));const s="reauthenticate";try{const a=await pu(n,DE(r,s,e,n),t);Le(a.idToken,r,"internal-error");const u=Vm(a.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(n.uid===d,r,"user-mismatch"),Ga._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ki(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e,t=!1){if(Jn(n.app))return Promise.reject(Qs(n));const r="signIn",s=await DE(n,r,e),a=await Ga._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n,e){return vt(n).setPersistence(e)}function VE(n,e,t,r){return vt(n).onIdTokenChanged(e,t,r)}function OP(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}function nd(n){return vt(n).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=1e3,VP=10;class LE extends ME{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);fP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LE.type="LOCAL";const jE=LE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE extends ME{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FE.type="SESSION";const UE=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await MP(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=jm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(S){const E=S;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function jP(n){Ii().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function FP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zP(){return zE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebaseLocalStorageDb",$P=1,Ch="firebaseLocalStorage",BE="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function BP(){const n=indexedDB.deleteDatabase($E);return new xu(n).toPromise()}function Hp(){const n=indexedDB.open($E,$P);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ch,{keyPath:BE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ch)?e(r):(r.close(),await BP(),e(await Hp()))})})}async function O_(n,e,t){const r=id(n,!0).put({[BE]:e,value:t});return new xu(r).toPromise()}async function HP(n,e){const t=id(n,!1).get(e),r=await new xu(t).toPromise();return r===void 0?null:r.value}function D_(n,e){const t=id(n,!0).delete(e);return new xu(t).toPromise()}const WP=800,qP=3;class HE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(zP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await FP(),!this.activeServiceWorker)return;this.sender=new LP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await O_(e,bh,"1"),await D_(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>HP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>D_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=id(s,!1).getAll();return new xu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HE.type="LOCAL";const GP=HE;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){return e?ns(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends OE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KP(n){return xP(n.auth,new Um(n),n.bypassAuthState)}function QP(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),kP(t,new Um(n),n.bypassAuthState)}async function XP(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),RP(t,new Um(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return QP;default:ki(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new Ru(2e3,1e4);async function JP(n,e,t){if(Jn(n.app))return Promise.reject(ri(n,"operation-not-supported-in-this-environment"));const r=ol(n);vE(n,e,td);const s=Fm(r,t);return new Vo(r,"signInViaPopup",e,s).executeNotNull()}class Vo extends WE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YP.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="pendingRedirect",ah=new Map;class eR extends WE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const r=await tR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tR(n,e){const t=GE(e),r=qE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function nR(n,e){return qE(n)._set(GE(e),"true")}function rR(n,e){ah.set(n._key(),e)}function qE(n){return ns(n._redirectPersistence)}function GE(n){return oh(ZP,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n,e,t){return sR(n,e,t)}async function sR(n,e,t){if(Jn(n.app))return Promise.reject(Qs(n));const r=ol(n);vE(n,e,td),await r._initializationPromise;const s=Fm(r,t);return await nR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function oR(n,e){return await ol(n)._initializationPromise,KE(n,e,!1)}async function KE(n,e,t=!1){if(Jn(n.app))return Promise.reject(Qs(n));const r=ol(n),s=Fm(r,e),u=await new eR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=600*1e3;class lR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!QE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aR&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n,e={}){return sl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function fR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cR(n);for(const t of e)try{if(pR(t))return}catch{}ki(n,"unauthorized-domain")}function pR(n){const e=$p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!dR.test(t))return!1;if(hR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Ru(3e4,6e4);function M_(){const n=Ii().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gR(n){return new Promise((e,t)=>{var r,s,a;function u(){M_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M_(),t(ri(n,"network-request-failed"))},timeout:mR.get()})}if(!((s=(r=Ii().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ii().gapi)===null||a===void 0)&&a.load)u();else{const d=SP("iframefcb");return Ii()[d]=()=>{gapi.load?u():t(ri(n,"network-request-failed"))},wP(`${EP()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw lh=null,e})}let lh=null;function vR(n){return lh=lh||gR(n),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Ru(5e3,15e3),_R="__/auth/iframe",wR="emulator/auth/iframe",ER={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TR(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Om(e,wR):`https://${n.config.authDomain}/${_R}`,r={apiKey:e.apiKey,appName:n.name,v:qo},s=SR.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Au(r).slice(1)}`}async function IR(n){const e=await vR(n),t=Ii().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:TR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ER,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=ri(n,"network-request-failed"),d=Ii().setTimeout(()=>{a(u)},yR.get());function f(){Ii().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CR=500,AR=600,PR="_blank",RR="http://localhost";class L_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kR(n,e,t,r=CR,s=AR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},bR),{width:r.toString(),height:s.toString(),top:a,left:u}),m=bn().toLowerCase();t&&(d=bE(m)?PR:t),TE(m)&&(e=e||RR,f.scrollbars="yes");const _=Object.entries(f).reduce((E,[P,O])=>`${E}${P}=${O},`,"");if(dP(m)&&d!=="_self")return xR(e||"",d),new L_(null);const S=window.open(e||"",d,_);Le(S,n,"popup-blocked");try{S.focus()}catch{}return new L_(S)}function xR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="__/auth/handler",OR="emulator/auth/handler",DR=encodeURIComponent("fac");async function j_(n,e,t,r,s,a){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qo,eventId:s};if(e instanceof td){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",D1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))u[_]=S}if(e instanceof ku){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${DR}=${encodeURIComponent(f)}`:"";return`${VR(n)}?${Au(d).slice(1)}${m}`}function VR({config:n}){return n.emulator?Om(n,OR):`https://${n.authDomain}/${NR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class MR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UE,this._completeRedirectFn=KE,this._overrideRedirectResult=rR}async _openPopup(e,t,r,s){var a;ls((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await j_(e,t,r,$p(),s);return kR(e,u,jm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await j_(e,t,r,$p(),s);return jP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ls(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await IR(e),r=new lR(e);return t.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fp,{type:fp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[fp];u!==void 0&&t(!!u),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kE()||IE()||Mm()}}const LR=MR;var F_="@firebase/auth",U_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UR(n){Js(new os("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(n)},m=new yP(r,s,a,f);return IP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Js(new os("auth-internal",e=>{const t=ol(e.getProvider("auth").getImmediate());return(r=>new jR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(F_,U_,FR(n)),Vr(F_,U_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=300,$R=lE("authIdTokenMaxAge")||zR;let z_=null;const BR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$R)return;const s=t==null?void 0:t.token;z_!==s&&(z_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HR(n=ed()){const e=Pu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TP(n,{popupRedirectResolver:LR,persistence:[GP,jE,UE]}),r=lE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=BR(a.toString());OP(t,u,()=>u(t.currentUser)),VE(t,d=>u(d))}}const s=oE("auth");return s&&bP(t,`http://${s}`),t}function WR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_P({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=ri("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",WR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UR("Browser");var $_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,XE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function N(){}N.prototype=A.prototype,k.D=A.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function(j,M,L){for(var x=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)x[ze-2]=arguments[ze];return A.prototype[M].apply(j,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,A,N){N||(N=0);var j=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)j[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;16>M;++M)j[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=k.g[0],N=k.g[1],M=k.g[2];var L=k.g[3],x=A+(L^N&(M^L))+j[0]+3614090360&4294967295;A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[1]+3905402710&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[2]+606105819&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[4]+4118548399&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[5]+1200080426&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[6]+2821735955&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[8]+1770035416&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[9]+2336552879&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[10]+4294925233&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[12]+1804603682&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[13]+4254626195&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[14]+2792965006&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(M^L&(N^M))+j[1]+4129170786&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[6]+3225465664&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[11]+643717713&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[5]+3593408605&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[10]+38016083&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[15]+3634488961&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[9]+568446438&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[14]+3275163606&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[3]+4107603335&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[13]+2850285829&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[2]+4243563512&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[7]+1735328473&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(N^M^L)+j[5]+4294588738&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[8]+2272392833&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[11]+1839030562&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[1]+2763975236&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[4]+1272893353&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[7]+4139469664&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[13]+681279174&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[0]+3936430074&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[3]+3572445317&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[9]+3654602809&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[12]+3873151461&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[15]+530742520&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(M^(N|~L))+j[0]+4096336452&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[7]+1126891415&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[14]+2878612391&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[12]+1700485571&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[3]+2399980690&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[10]+4293915773&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[8]+1873313359&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[15]+4264355552&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[6]+2734768916&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[4]+4149444226&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[11]+3174756917&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[2]+718787259&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var N=A-this.blockSize,j=this.B,M=this.h,L=0;L<A;){if(M==0)for(;L<=N;)s(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<A;)if(j[M++]=k.charCodeAt(L++),M==this.blockSize){s(this,j),M=0;break}}else for(;L<A;)if(j[M++]=k[L++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=A},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var N=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=N&255,N/=256;for(this.u(k),k=Array(16),A=N=0;4>A;++A)for(var j=0;32>j;j+=8)k[N++]=this.g[A]>>>j&255;return k};function a(k,A){var N=d;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=A(k)}function u(k,A){this.h=A;for(var N=[],j=!0,M=k.length-1;0<=M;M--){var L=k[M]|0;j&&L==A||(N[M]=L,j=!1)}this.g=N}var d={};function f(k){return-128<=k&&128>k?a(k,function(A){return new u([A|0],0>A?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return C(m(-k));for(var A=[],N=1,j=0;k>=N;j++)A[j]=k/N|0,N*=4294967296;return new u(A,0)}function _(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return C(_(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(A,8)),j=S,M=0;M<k.length;M+=8){var L=Math.min(8,k.length-M),x=parseInt(k.substring(M,M+L),A);8>L?(L=m(Math.pow(A,L)),j=j.j(L).add(m(x))):(j=j.j(N),j=j.add(m(x)))}return j}var S=f(0),E=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(R(this))return-C(this).m();for(var k=0,A=1,N=0;N<this.g.length;N++){var j=this.i(N);k+=(0<=j?j:4294967296+j)*A,A*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(R(this))return"-"+C(this).toString(k);for(var A=m(Math.pow(k,6)),N=this,j="";;){var M=ee(N,A).g;N=B(N,M.j(A));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=M,O(N))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function R(k){return k.h==-1}n.l=function(k){return k=B(this,k),R(k)?-1:O(k)?0:1};function C(k){for(var A=k.g.length,N=[],j=0;j<A;j++)N[j]=~k.g[j];return new u(N,~k.h).add(E)}n.abs=function(){return R(this)?C(this):this},n.add=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0,M=0;M<=A;M++){var L=j+(this.i(M)&65535)+(k.i(M)&65535),x=(L>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);j=x>>>16,L&=65535,x&=65535,N[M]=x<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(k,A){return k.add(C(A))}n.j=function(k){if(O(this)||O(k))return S;if(R(this))return R(k)?C(this).j(C(k)):C(C(this).j(k));if(R(k))return C(this.j(C(k)));if(0>this.l(P)&&0>k.l(P))return m(this.m()*k.m());for(var A=this.g.length+k.g.length,N=[],j=0;j<2*A;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<k.g.length;M++){var L=this.i(j)>>>16,x=this.i(j)&65535,ze=k.i(M)>>>16,De=k.i(M)&65535;N[2*j+2*M]+=x*De,Q(N,2*j+2*M),N[2*j+2*M+1]+=L*De,Q(N,2*j+2*M+1),N[2*j+2*M+1]+=x*ze,Q(N,2*j+2*M+1),N[2*j+2*M+2]+=L*ze,Q(N,2*j+2*M+2)}for(j=0;j<A;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=A;j<2*A;j++)N[j]=0;return new u(N,0)};function Q(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function K(k,A){this.g=k,this.h=A}function ee(k,A){if(O(A))throw Error("division by zero");if(O(k))return new K(S,S);if(R(k))return A=ee(C(k),A),new K(C(A.g),C(A.h));if(R(A))return A=ee(k,C(A)),new K(C(A.g),A.h);if(30<k.g.length){if(R(k)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,j=A;0>=j.l(k);)N=X(N),j=X(j);var M=se(N,1),L=se(j,1);for(j=se(j,2),N=se(N,2);!O(j);){var x=L.add(j);0>=x.l(k)&&(M=M.add(N),L=x),j=se(j,1),N=se(N,1)}return A=B(k,M.j(A)),new K(M,A)}for(M=S;0<=k.l(A);){for(N=Math.max(1,Math.floor(k.m()/A.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=m(N),x=L.j(A);R(x)||0<x.l(k);)N-=j,L=m(N),x=L.j(A);O(L)&&(L=E),M=M.add(L),k=B(k,x)}return new K(M,k)}n.A=function(k){return ee(this,k).h},n.and=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)&k.i(j);return new u(N,this.h&k.h)},n.or=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)|k.i(j);return new u(N,this.h|k.h)},n.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)^k.i(j);return new u(N,this.h^k.h)};function X(k){for(var A=k.g.length+1,N=[],j=0;j<A;j++)N[j]=k.i(j)<<1|k.i(j-1)>>>31;return new u(N,k.h)}function se(k,A){var N=A>>5;A%=32;for(var j=k.g.length-N,M=[],L=0;L<j;L++)M[L]=0<A?k.i(L+N)>>>A|k.i(L+N+1)<<32-A:k.i(L+N);return new u(M,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Xs=u}).apply(typeof $_<"u"?$_:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YE,Jl,JE,uh,Wp,ZE,eS,tS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,w){return c==Array.prototype||c==Object.prototype||(c[v]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,v){if(v)e:{var w=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var W=c[b];if(!(W in w))break e;w=w[W]}c=c[c.length-1],b=w[c],v=v(b),v!=b&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var w=0,b=!1,W={next:function(){if(!b&&w<c.length){var J=w++;return{value:v(J,c[J]),done:!1}}return b=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(c){return c||function(){return a(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function m(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,w){return c.call.apply(c.bind,arguments)}function S(c,v,w){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,b),c.apply(v,W)}}return function(){return c.apply(v,arguments)}}function E(c,v,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,E.apply(null,arguments)}function P(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function O(c,v){function w(){}w.prototype=v.prototype,c.aa=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(b,W,J){for(var fe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)fe[ut-2]=arguments[ut];return v.prototype[W].apply(b,fe)}}function R(c){const v=c.length;if(0<v){const w=Array(v);for(let b=0;b<v;b++)w[b]=c[b];return w}return[]}function C(c,v){for(let w=1;w<arguments.length;w++){const b=arguments[w];if(f(b)){const W=c.length||0,J=b.length||0;c.length=W+J;for(let fe=0;fe<J;fe++)c[W+fe]=b[fe]}else c.push(b)}}class B{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Q(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var X=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function se(c,v,w){for(const b in c)v.call(w,c[b],b,c)}function k(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function A(c){const v={};for(const w in c)v[w]=c[w];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,v){let w,b;for(let W=1;W<arguments.length;W++){b=arguments[W];for(w in b)c[w]=b[w];for(let J=0;J<N.length;J++)w=N[J],Object.prototype.hasOwnProperty.call(b,w)&&(c[w]=b[w])}}function M(c){var v=1;c=c.split(":");const w=[];for(;0<v&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function L(c){d.setTimeout(()=>{throw c},0)}function x(){var c=de;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class ze{constructor(){this.h=this.g=null}add(v,w){const b=De.get();b.set(v,w),this.h?this.h.next=b:this.g=b,this.h=b}}var De=new B(()=>new $e,c=>c.reset());class $e{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,le=!1,de=new ze,he=()=>{const c=d.Promise.resolve(void 0);Ve=()=>{c.then($)}};var $=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(w){L(w)}var v=De;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}le=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return c})();function Z(c,v){if(pe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(X){e:{try{ee(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ie[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Z.aa.h.call(this)}}O(Z,pe);var ie={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Te=0;function je(c,v,w,b,W){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!b,this.ha=W,this.key=++Te,this.da=this.fa=!1}function Ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function St(c){this.src=c,this.g={},this.h=0}St.prototype.add=function(c,v,w,b,W){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var fe=nt(c,v,b,W);return-1<fe?(v=c[fe],w||(v.fa=!1)):(v=new je(v,this.src,J,!!b,W),v.fa=w,c.push(v)),v};function Pt(c,v){var w=v.type;if(w in c.g){var b=c.g[w],W=Array.prototype.indexOf.call(b,v,void 0),J;(J=0<=W)&&Array.prototype.splice.call(b,W,1),J&&(Ye(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function nt(c,v,w,b){for(var W=0;W<c.length;++W){var J=c[W];if(!J.da&&J.listener==v&&J.capture==!!w&&J.ha==b)return W}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),fn={};function Tt(c,v,w,b,W){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Tt(c,v[J],w,b,W);return null}return w=jr(w),c&&c[Ie]?c.K(v,w,m(b)?!!b.capture:!1,W):ps(c,v,w,!1,b,W)}function ps(c,v,w,b,W,J){if(!v)throw Error("Invalid event type");var fe=m(W)?!!W.capture:!!W,ut=Lr(c);if(ut||(c[rt]=ut=new St(c)),w=ut.add(v,w,b,fe,J),w.proxy)return w;if(b=Cn(),w.proxy=b,b.src=c,b.listener=w,c.addEventListener)Ce||(W=fe),W===void 0&&(W=!1),c.addEventListener(v.toString(),b,W);else if(c.attachEvent)c.attachEvent(Gt(v.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Cn(){function c(w){return v.call(c.src,c.listener,w)}const v=ms;return c}function Oi(c,v,w,b,W){if(Array.isArray(v))for(var J=0;J<v.length;J++)Oi(c,v[J],w,b,W);else b=m(b)?!!b.capture:!!b,w=jr(w),c&&c[Ie]?(c=c.i,v=String(v).toString(),v in c.g&&(J=c.g[v],w=nt(J,w,b,W),-1<w&&(Ye(J[w]),Array.prototype.splice.call(J,w,1),J.length==0&&(delete c.g[v],c.h--)))):c&&(c=Lr(c))&&(v=c.g[v.toString()],c=-1,v&&(c=nt(v,w,b,W)),(w=-1<c?v[c]:null)&&An(w))}function An(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Ie])Pt(v.i,c);else{var w=c.type,b=c.proxy;v.removeEventListener?v.removeEventListener(w,b,c.capture):v.detachEvent?v.detachEvent(Gt(w),b):v.addListener&&v.removeListener&&v.removeListener(b),(w=Lr(v))?(Pt(w,c),w.h==0&&(w.src=null,v[rt]=null)):Ye(c)}}}function Gt(c){return c in fn?fn[c]:fn[c]="on"+c}function ms(c,v){if(c.da)c=!0;else{v=new Z(v,this);var w=c.listener,b=c.ha||c.src;c.fa&&An(c),c=w.call(b,v)}return c}function Lr(c){return c=c[rt],c instanceof St?c:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(c){return typeof c=="function"?c:(c[pn]||(c[pn]=function(v){return c.handleEvent(v)}),c[pn])}function Rt(){U.call(this),this.i=new St(this),this.M=this,this.F=null}O(Rt,U),Rt.prototype[Ie]=!0,Rt.prototype.removeEventListener=function(c,v,w,b){Oi(this,c,v,w,b)};function pt(c,v){var w,b=c.F;if(b)for(w=[];b;b=b.F)w.push(b);if(c=c.M,b=v.type||v,typeof v=="string")v=new pe(v,c);else if(v instanceof pe)v.target=v.target||c;else{var W=v;v=new pe(b,c),j(v,W)}if(W=!0,w)for(var J=w.length-1;0<=J;J--){var fe=v.g=w[J];W=Dn(fe,b,!0,v)&&W}if(fe=v.g=c,W=Dn(fe,b,!0,v)&&W,W=Dn(fe,b,!1,v)&&W,w)for(J=0;J<w.length;J++)fe=v.g=w[J],W=Dn(fe,b,!1,v)&&W}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var w=c.g[v],b=0;b<w.length;b++)Ye(w[b]);delete c.g[v],c.h--}}this.F=null},Rt.prototype.K=function(c,v,w,b){return this.i.add(String(c),v,!1,w,b)},Rt.prototype.L=function(c,v,w,b){return this.i.add(String(c),v,!0,w,b)};function Dn(c,v,w,b){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,J=0;J<v.length;++J){var fe=v[J];if(fe&&!fe.da&&fe.capture==w){var ut=fe.listener,Kt=fe.ha||fe.src;fe.fa&&Pt(c.i,fe),W=ut.call(Kt,b)!==!1&&W}}return W&&!b.defaultPrevented}function Er(c,v,w){if(typeof c=="function")w&&(c=E(c,w));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(c,v||0)}function ir(c){c.g=Er(()=>{c.g=null,c.i&&(c.i=!1,ir(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Vn extends U{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ir(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(c){U.call(this),this.h=c,this.g={}}O(Fr,U);var Mn=[];function Ur(c){se(c.g,function(v,w){this.g.hasOwnProperty(w)&&An(v)},c),c.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),Ur(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=d.JSON.stringify,lo=d.JSON.parse,ai=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function sr(){}sr.prototype.h=null;function Vi(c){return c.h||(c.h=c.i())}function Sr(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){pe.call(this,"d")}O(Ln,pe);function Mi(){pe.call(this,"c")}O(Mi,pe);var jn={},gs=null;function li(){return gs=gs||new Rt}jn.La="serverreachability";function Jt(c){pe.call(this,jn.La,c)}O(Jt,pe);function yt(c){const v=li();pt(v,new Jt(v))}jn.STAT_EVENT="statevent";function Be(c,v){pe.call(this,jn.STAT_EVENT,c),this.stat=v}O(Be,pe);function ht(c){const v=li();pt(v,new Be(v,c))}jn.Ma="timingevent";function Lt(c,v){pe.call(this,jn.Ma,c),this.size=v}O(Lt,pe);function Fn(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function or(){this.g=!0}or.prototype.xa=function(){this.g=!1};function ar(c,v,w,b,W,J){c.info(function(){if(c.g)if(J)for(var fe="",ut=J.split("&"),Kt=0;Kt<ut.length;Kt++){var Qe=ut[Kt].split("=");if(1<Qe.length){var en=Qe[0];Qe=Qe[1];var Ut=en.split("_");fe=2<=Ut.length&&Ut[1]=="type"?fe+(en+"="+Qe+"&"):fe+(en+"=redacted&")}}else fe=null;else fe=J;return"XMLHTTP REQ ("+b+") [attempt "+W+"]: "+v+`
`+w+`
`+fe})}function Li(c,v,w,b,W,J,fe){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+W+"]: "+v+`
`+w+`
`+J+" "+fe})}function lr(c,v,w,b){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Yo(c,w)+(b?" "+b:"")})}function uo(c,v){c.info(function(){return"TIMEOUT: "+v})}or.prototype.info=function(){};function Yo(c,v){if(!c.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var b=w[c];if(!(2>b.length)){var W=b[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var fe=1;fe<W.length;fe++)W[fe]=""}}}}return Di(w)}catch{return v}}var vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},co={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Un;function zr(){}O(zr,sr),zr.prototype.g=function(){return new XMLHttpRequest},zr.prototype.i=function(){return{}},Un=new zr;function zn(c,v,w,b){this.j=c,this.i=v,this.l=w,this.R=b||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var ho={},ys={};function _s(c,v,w){c.L=1,c.v=I(gn(v)),c.m=w,c.P=!0,jt(c,null)}function jt(c,v){c.F=Date.now(),at(c),c.A=gn(c.v);var w=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Ss(w.i,"t",b),c.C=0,w=c.j.J,c.h=new ur,c.g=Ku(c.j,w?v:null,!c.m),0<c.O&&(c.M=new Vn(E(c.Y,c,c.g),c.O)),v=c.U,w=c.g,b=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Mn[0]=W.toString()),W=Mn);for(var J=0;J<W.length;J++){var fe=Tt(w,W[J],b||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),yt(),ar(c.i,c.u,c.A,c.l,c.R,c.m)}zn.prototype.ca=function(c){c=c.target;const v=this.M;v&&Hn(c)==3?v.j():this.Y(c)},zn.prototype.Y=function(c){try{if(c==this.g)e:{const Ut=Hn(this.g);var v=this.g.Ba();const Cr=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||_l(this.g)))){this.J||Ut!=4||v==7||(v==8||0>=Cr?yt(3):yt(2)),ji(this);var w=this.g.Z();this.X=w;t:if(ot(this)){var b=_l(this.g);c="";var W=b.length,J=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),$r(this);var fe="";break t}this.h.i=new d.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,c+=this.h.i.decode(b[v],{stream:!(J&&v==W-1)});b.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=w==200,Li(this.i,this.u,this.A,this.l,this.R,Ut,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Kt=this.g;if((ut=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ut)){var Qe=ut;break t}}Qe=null}if(w=Qe)lr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fo(this,w);else{this.o=!1,this.s=3,ht(12),$n(this),$r(this);break e}}if(this.P){w=!0;let dr;for(;!this.J&&this.C<fe.length;)if(dr=gl(this,fe),dr==ys){Ut==4&&(this.s=4,ht(14),w=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==ho){this.s=4,ht(15),lr(this.i,this.l,fe,"[Invalid Chunk]"),w=!1;break}else lr(this.i,this.l,dr,null),fo(this,dr);if(ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||fe.length!=0||this.h.h||(this.s=1,ht(16),w=!1),this.o=this.o&&w,!w)lr(this.i,this.l,fe,"[Invalid Chunked Response]"),$n(this),$r(this);else if(0<fe.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),El(en),en.M=!0,ht(11))}}else lr(this.i,this.l,fe,null),fo(this,fe);Ut==4&&$n(this),this.o&&!this.J&&(Ut==4?ha(this.j,this):(this.o=!1,at(this)))}else oa(this.g),w==400&&0<fe.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),$n(this),$r(this)}}}catch{}finally{}};function ot(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gl(c,v){var w=c.C,b=v.indexOf(`
`,w);return b==-1?ys:(w=Number(v.substring(w,b)),isNaN(w)?ho:(b+=1,b+w>v.length?ys:(v=v.slice(b,b+w),c.C=b+w,v)))}zn.prototype.cancel=function(){this.J=!0,$n(this)};function at(c){c.S=Date.now()+c.I,Jo(c,c.I)}function Jo(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fn(E(c.ba,c),v)}function ji(c){c.B&&(d.clearTimeout(c.B),c.B=null)}zn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(uo(this.i,this.A),this.L!=2&&(yt(),ht(17)),$n(this),this.s=2,$r(this)):Jo(this,this.S-c)};function $r(c){c.j.G==0||c.J||ha(c.j,c)}function $n(c){ji(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,Ur(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function fo(c,v){try{var w=c.j;if(w.G!=0&&(w.g==c||Zt(w.h,c))){if(!c.K&&Zt(w.h,c)&&w.G==3){try{var b=w.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var W=b;if(W[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)ca(w),Kr(w);else break e;ua(w),ht(18)}}else w.za=W[1],0<w.za-w.T&&37500>W[2]&&w.F&&w.v==0&&!w.C&&(w.C=Fn(E(w.Za,w),6e3));if(1>=ea(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Wi(w,11)}else if((c.K||w.g==c)&&ca(w),!Q(v))for(W=w.Da.g.parse(v),v=0;v<W.length;v++){let Qe=W[v];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const en=Qe[3];en!=null&&(w.la=en,w.j.info("VER="+w.la));const Ut=Qe[4];Ut!=null&&(w.Aa=Ut,w.j.info("SVER="+w.Aa));const Cr=Qe[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(b=1.5*Cr,w.L=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const dr=c.g;if(dr){const wo=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var J=b.h;J.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(po(J,J.h),J.h=null))}if(b.D){const fa=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(b.ya=fa,lt(b.I,b.D,fa))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),b=w;var fe=c;if(b.qa=Gu(b,b.J?b.ia:null,b.W),fe.K){ta(b.h,fe);var ut=fe,Kt=b.L;Kt&&(ut.I=Kt),ut.B&&(ji(ut),at(ut)),b.g=fe}else _o(b);0<w.i.length&&pi(w)}else Qe[0]!="stop"&&Qe[0]!="close"||Wi(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Wi(w,7):on(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}yt(4)}catch{}}var Zo=class{constructor(c,v){this.g=c,this.map=v}};function Fi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ea(c){return c.h?1:c.g?c.g.size:0}function Zt(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function po(c,v){c.g?c.g.add(v):c.h=v}function ta(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Fi.prototype.cancel=function(){if(this.i=na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function na(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.D);return v}return R(c.i)}function ws(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],w=c.length,b=0;b<w;b++)v.push(c[b]);return v}v=[],w=0;for(b in c)v[w++]=c[b];return v}function Es(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var w=0;w<c;w++)v.push(w);return v}v=[],w=0;for(const b in c)v[w++]=b;return v}}}function ui(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var w=Es(c),b=ws(c),W=b.length,J=0;J<W;J++)v.call(void 0,b[J],w&&w[J],c)}var Ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(c,v){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var b=c[w].indexOf("="),W=null;if(0<=b){var J=c[w].substring(0,b);W=c[w].substring(b+1)}else J=c[w];v(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Br(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Br){this.h=c.h,zi(this,c.j),this.o=c.o,this.g=c.g,ci(this,c.s),this.l=c.l;var v=c.i,w=new cr;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),hi(this,w),this.m=c.m}else c&&(v=String(c).match(Ui))?(this.h=!1,zi(this,v[1]||"",!0),this.o=H(v[2]||""),this.g=H(v[3]||"",!0),ci(this,v[4]),this.l=H(v[5]||"",!0),hi(this,v[6]||"",!0),this.m=H(v[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}Br.prototype.toString=function(){var c=[],v=this.j;v&&c.push(te(v,He,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(te(v,He,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(te(w,w.charAt(0)=="/"?Ir:Tr,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",te(w,go)),c.join("")};function gn(c){return new Br(c)}function zi(c,v,w){c.j=w?H(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function ci(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function hi(c,v,w){v instanceof cr?(c.i=v,di(c.i,c.h)):(w||(v=te(v,ra)),c.i=new cr(v,c.h))}function lt(c,v,w){c.i.set(v,w)}function I(c){return lt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function H(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function te(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,be),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function be(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var He=/[#\/\?@]/g,Tr=/[#\?:]/g,Ir=/[#\?]/g,ra=/[#\?@]/g,go=/#/g;function cr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Ft(c){c.g||(c.g=new Map,c.h=0,c.i&&mo(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=cr.prototype,n.add=function(c,v){Ft(this),this.i=null,c=br(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function Hr(c,v){Ft(c),v=br(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Wr(c,v){return Ft(c),v=br(c,v),c.g.has(v)}n.forEach=function(c,v){Ft(this),this.g.forEach(function(w,b){w.forEach(function(W){c.call(v,W,b,this)},this)},this)},n.na=function(){Ft(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let b=0;b<v.length;b++){const W=c[b];for(let J=0;J<W.length;J++)w.push(v[b])}return w},n.V=function(c){Ft(this);let v=[];if(typeof c=="string")Wr(this,c)&&(v=v.concat(this.g.get(br(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)v=v.concat(c[w])}return v},n.set=function(c,v){return Ft(this),this.i=null,c=br(this,c),Wr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},n.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Ss(c,v,w){Hr(c,v),0<w.length&&(c.i=null,c.g.set(br(c,v),R(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var b=v[w];const J=encodeURIComponent(String(b)),fe=this.V(b);for(b=0;b<fe.length;b++){var W=J;fe[b]!==""&&(W+="="+encodeURIComponent(String(fe[b]))),c.push(W)}}return this.i=c.join("&")};function br(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function di(c,v){v&&!c.j&&(Ft(c),c.i=null,c.g.forEach(function(w,b){var W=b.toLowerCase();b!=W&&(Hr(this,b),Ss(this,W,w))},c)),c.j=v}function xd(c,v){const w=new or;if(d.Image){const b=new Image;b.onload=P(Bn,w,"TestLoadImage: loaded",!0,v,b),b.onerror=P(Bn,w,"TestLoadImage: error",!1,v,b),b.onabort=P(Bn,w,"TestLoadImage: abort",!1,v,b),b.ontimeout=P(Bn,w,"TestLoadImage: timeout",!1,v,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else v(!1)}function zu(c,v){const w=new or,b=new AbortController,W=setTimeout(()=>{b.abort(),Bn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:b.signal}).then(J=>{clearTimeout(W),J.ok?Bn(w,"TestPingServer: ok",!0,v):Bn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Bn(w,"TestPingServer: error",!1,v)})}function Bn(c,v,w,b,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),b(w)}catch{}}function Nd(){this.g=new ai}function $u(c,v,w){const b=w||"";try{ui(c,function(W,J){let fe=W;m(W)&&(fe=Di(W)),v.push(b+J+"="+encodeURIComponent(fe))})}catch(W){throw v.push(b+"type="+encodeURIComponent("_badmap")),W}}function $i(c){this.l=c.Ub||null,this.j=c.eb||!1}O($i,sr),$i.prototype.g=function(){return new vo(this.l,this.j)},$i.prototype.i=(function(c){return function(){return c}})({});function vo(c,v){Rt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(vo,Rt),n=vo.prototype,n.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Gr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?qr(this):Gr(this),this.readyState==3&&Bu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,qr(this))},n.Qa=function(c){this.g&&(this.response=c,qr(this))},n.ga=function(){this.g&&qr(this)};function qr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Gr(c)}n.setRequestHeader=function(c,v){this.u.append(c,v)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function Gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bi(c){let v="";return se(c,function(w,b){v+=b,v+=":",v+=w,v+=`\r
`}),v}function Ts(c,v,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=Bi(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):lt(c,v,w))}function _t(c){Rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(_t,Rt);var Od=/^https?$/i,vl=["POST","PUT"];n=_t.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,v,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Un.g(),this.v=this.o?Vi(this.o):Vi(Un),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(J){yo(this,J);return}if(c=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var W in b)w.set(W,b[W]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())w.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),W=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(vl,v,void 0))||b||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,fe]of w)this.g.setRequestHeader(J,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){yo(this,J)}};function yo(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,ia(c),hr(c)}function ia(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),hr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hr(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},n.bb=function(){yl(this)};function yl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)Er(c.Ea,0,c);else if(pt(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var b;if(b=fe===0){var W=String(c.D).match(Ui)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),b=!Od.test(W?W.toLowerCase():"")}w=b}if(w)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var J=2<Hn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ia(c)}}finally{hr(c)}}}}function hr(c,v){if(c.g){sa(c);const w=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||pt(c,"ready");try{w.onreadystatechange=b}catch{}}}function sa(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),lo(v)}};function _l(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(c){const v={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(Q(c[b]))continue;var w=M(c[b]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=v[W]||[];v[W]=J,J.push(w)}k(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function wl(c){this.Aa=0,this.i=[],this.j=new or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fi("baseRetryDelayMs",5e3,c),this.cb=fi("retryDelaySeedMs",1e4,c),this.Wa=fi("forwardChannelMaxRetries",2,c),this.wa=fi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(c&&c.concurrentRequestLimit),this.Da=new Nd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wl.prototype,n.la=8,n.G=1,n.connect=function(c,v,w,b){ht(0),this.W=c,this.H=v||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.I=Gu(this,null,this.W),pi(this)};function on(c){if(aa(c),c.G==3){var v=c.U++,w=gn(c.I);if(lt(w,"SID",c.K),lt(w,"RID",v),lt(w,"TYPE","terminate"),Hi(c,w),v=new zn(c,c.j,v),v.L=2,v.v=I(gn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.v,w=!0),w||(v.g=Ku(v.j,null),v.g.ea(v.v)),v.F=Date.now(),at(v)}qu(c)}function Kr(c){c.g&&(El(c),c.g.cancel(),c.g=null)}function aa(c){Kr(c),c.u&&(d.clearTimeout(c.u),c.u=null),ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function pi(c){if(!Pn(c.h)&&!c.s){c.s=!0;var v=c.Ga;Ve||he(),le||(Ve(),le=!0),de.add(v,c),c.B=0}}function Dd(c,v){return ea(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fn(E(c.Ga,c,v),Wu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new zn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=A(J),j(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Is(this,W,v),w=gn(this.I),lt(w,"RID",c),lt(w,"CVER",22),this.D&&lt(w,"X-HTTP-Session-Id",this.D),Hi(this,w),J&&(this.O?v="headers="+encodeURIComponent(String(Bi(J)))+"&"+v:this.m&&Ts(w,this.m,J)),po(this.h,W),this.Ua&&lt(w,"TYPE","init"),this.P?(lt(w,"$req",v),lt(w,"SID","null"),W.T=!0,_s(W,w,null)):_s(W,w,v),this.G=2}}else this.G==3&&(c?la(this,c):this.i.length==0||Pn(this.h)||la(this))};function la(c,v){var w;v?w=v.l:w=c.U++;const b=gn(c.I);lt(b,"SID",c.K),lt(b,"RID",w),lt(b,"AID",c.T),Hi(c,b),c.m&&c.o&&Ts(b,c.m,c.o),w=new zn(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Is(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),po(c.h,w),_s(w,b,v)}function Hi(c,v){c.H&&se(c.H,function(w,b){lt(v,b,w)}),c.l&&ui({},function(w,b){lt(v,b,w)})}function Is(c,v,w){w=Math.min(c.i.length,w);var b=c.l?E(c.l.Na,c.l,c):null;e:{var W=c.i;let J=-1;for(;;){const fe=["count="+w];J==-1?0<w?(J=W[0].g,fe.push("ofs="+J)):J=0:fe.push("ofs="+J);let ut=!0;for(let Kt=0;Kt<w;Kt++){let Qe=W[Kt].g;const en=W[Kt].map;if(Qe-=J,0>Qe)J=Math.max(0,W[Kt].g-100),ut=!1;else try{$u(en,fe,"req"+Qe+"_")}catch{b&&b(en)}}if(ut){b=fe.join("&");break e}}}return c=c.i.splice(0,w),v.D=c,b}function _o(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Ve||he(),le||(Ve(),le=!0),de.add(v,c),c.v=0}}function ua(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fn(E(c.Fa,c),Wu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Kr(this),Hu(this))};function El(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Hu(c){c.g=new zn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=gn(c.qa);lt(v,"RID","rpc"),lt(v,"SID",c.K),lt(v,"AID",c.T),lt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&lt(v,"TO",c.ja),lt(v,"TYPE","xmlhttp"),Hi(c,v),c.m&&c.o&&Ts(v,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=I(gn(v)),w.m=null,w.P=!0,jt(w,c)}n.Za=function(){this.C!=null&&(this.C=null,Kr(this),ua(this),ht(19))};function ca(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ha(c,v){var w=null;if(c.g==v){ca(c),El(c),c.g=null;var b=2}else if(Zt(c.h,v))w=v.D,ta(c.h,v),b=1;else return;if(c.G!=0){if(v.o)if(b==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var W=c.B;b=li(),pt(b,new Lt(b,w)),pi(c)}else _o(c);else if(W=v.s,W==3||W==0&&0<v.X||!(b==1&&Dd(c,v)||b==2&&ua(c)))switch(w&&0<w.length&&(v=c.h,v.i=v.i.concat(w)),W){case 1:Wi(c,5);break;case 4:Wi(c,10);break;case 3:Wi(c,6);break;default:Wi(c,2)}}}function Wu(c,v){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*v}function Wi(c,v){if(c.j.info("Error code "+v),v==2){var w=E(c.fb,c),b=c.Xa;const W=!b;b=new Br(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zi(b,"https"),I(b),W?xd(b.toString(),w):zu(b.toString(),w)}else ht(2);c.G=0,c.l&&c.l.sa(v),qu(c),aa(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function qu(c){if(c.G=0,c.ka=[],c.l){const v=na(c.h);(v.length!=0||c.i.length!=0)&&(C(c.ka,v),C(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Gu(c,v,w){var b=w instanceof Br?gn(w):new Br(w);if(b.g!="")v&&(b.g=v+"."+b.g),ci(b,b.s);else{var W=d.location;b=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var J=new Br(null);b&&zi(J,b),v&&(J.g=v),W&&ci(J,W),w&&(J.l=w),b=J}return w=c.D,v=c.ya,w&&v&&lt(b,w,v),lt(b,"VER",c.la),Hi(c,b),b}function Ku(c,v,w){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new _t(new $i({eb:w})):new _t(c.pa),v.Ha(c.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sl(){}n=Sl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function da(){}da.prototype.g=function(c,v){return new Rn(c,v)};function Rn(c,v){Rt.call(this),this.g=new wl(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!Q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new mi(this)}O(Rn,Rt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){on(this.g)},Rn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Di(c),c=w);v.i.push(new Zo(v.Ya++,c)),v.G==3&&pi(v)},Rn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Rn.aa.N.call(this)};function Qu(c){Ln.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}O(Qu,Ln);function Xu(){Mi.call(this),this.status=1}O(Xu,Mi);function mi(c){this.g=c}O(mi,Sl),mi.prototype.ua=function(){pt(this.g,"a")},mi.prototype.ta=function(c){pt(this.g,new Qu(c))},mi.prototype.sa=function(c){pt(this.g,new Xu)},mi.prototype.ra=function(){pt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,tS=function(){return new da},eS=function(){return li()},ZE=jn,Wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,uh=vs,co.COMPLETE="complete",JE=co,Sr.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Jl=Sr,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,YE=_t}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const B_="@firebase/firestore",H_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new Pm("@firebase/firestore");function Ma(){return zo.logLevel}function ve(n,...e){if(zo.logLevel<=Ge.DEBUG){const t=e.map(zm);zo.debug(`Firestore (${al}): ${n}`,...t)}}function us(n,...e){if(zo.logLevel<=Ge.ERROR){const t=e.map(zm);zo.error(`Firestore (${al}): ${n}`,...t)}}function Zs(n,...e){if(zo.logLevel<=Ge.WARN){const t=e.map(zm);zo.warn(`Firestore (${al}): ${n}`,...t)}}function zm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nS(n,r,t)}function nS(n,e,t){let r=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw us(r),new Error(r)}function st(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||nS(e,s,r)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends oi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tn.UNAUTHENTICATED)))}shutdown(){}}class GR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KR{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new rs,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new rS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class QR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const r=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new W_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JR(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function qp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return We(r,s);{const a=iS(),u=ZR(a.encode(q_(n,t)),a.encode(q_(e,t)));return u!==0?u:We(r,s)}}t+=r>65535?2:1}return We(n.length,e.length)}function q_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ZR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return We(n[t],e[t]);return We(n.length,e.length)}function Ka(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__name__";class wi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=wi.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return We(e.length,t.length)}static compareSegments(e,t){const r=wi.isNumericId(e),s=wi.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?wi.extractNumericId(e).compare(wi.extractNumericId(t)):qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class ft extends wi{construct(e,t,r){return new ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends wi{construct(e,t,r){return new hn(e,t,r)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G_}static keyField(){return new hn([G_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(ft.fromString(e))}static fromName(e){return new Pe(ft.fromString(e).popFirst(5))}static empty(){return new Pe(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tk(n,e,t,r){if(e===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function K_(n){if(!Pe.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q_(n){if(Pe.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function ii(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sd(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!oS(n))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new me(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=-62135596800,Y_=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Y_);return new ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<X_)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y_}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Wt("string",ct._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new ct(0,0))}static max(){return new Fe(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function nk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new eo(s,Pe.empty(),e)}function rk(n){return new eo(n.readTime,n.key,mu)}class eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eo(Fe.min(),Pe.empty(),mu)}static max(){return new eo(Fe.max(),Pe.empty(),mu)}}function ik(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ok{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==sk)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,r)=>{t(e)}))}static reject(e){return new re(((t,r)=>{r(e)}))}static waitFor(e){return new re(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next((s=>s?re.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new re(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new re(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function ak(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}od.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function ad(n){return n==null}function Ah(n){return n===0&&1/n==-1/0}function lk(n){return typeof n=="number"&&Number.isInteger(n)&&!Ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="";function uk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=J_(e)),e=ck(n.get(t),e);return J_(e)}function ck(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case aS:t+="";break;default:t+=a}}return t}function J_(n){return n+aS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??un.RED,this.left=s??un.EMPTY,this.right=a??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new un(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return un.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ew(this.data.getIterator())}getIteratorFrom(e){return new ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new gr([])}unionWith(e){let t=new Yt(hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uS("Invalid base64 string: "+a):a}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const hk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=hk.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function no(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="server_timestamp",hS="__type__",dS="__previous_value__",fS="__local_write_time__";function Hm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[hS])===null||t===void 0?void 0:t.stringValue)===cS}function ld(n){const e=n.mapValue.fields[dS];return Hm(e)?ld(e):e}function gu(n){const e=to(n.mapValue.fields[fS].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t,r,s,a,u,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Ph="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||Ph}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="__type__",fk="__max__",Gc={mapValue:{}},mS="__vector__",Rh="value";function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hm(n)?4:mk(n)?9007199254740991:pk(n)?10:11:Oe(28295,{value:n})}function xi(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gu(n).isEqual(gu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=to(s.timestampValue),d=to(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return no(s.bytesValue).isEqual(no(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Vt(s.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Vt(s.integerValue)===Vt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Vt(s.doubleValue),d=Vt(a.doubleValue);return u===d?Ah(u)===Ah(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ka(n.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(Z_(u)!==Z_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!xi(u[f],d[f])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function yu(n,e){return(n.values||[]).find((t=>xi(t,e)))!==void 0}function Qa(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Vt(a.integerValue||a.doubleValue),f=Vt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return tw(n.timestampValue,e.timestampValue);case 4:return tw(gu(n),gu(e));case 5:return qp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=no(a),f=no(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=We(d[m],f[m]);if(_!==0)return _}return We(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=We(Vt(a.latitude),Vt(u.latitude));return d!==0?d:We(Vt(a.longitude),Vt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const S=a.fields||{},E=u.fields||{},P=(d=S[Rh])===null||d===void 0?void 0:d.arrayValue,O=(f=E[Rh])===null||f===void 0?void 0:f.arrayValue,R=We(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return R!==0?R:nw(P,O)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Gc.mapValue&&u===Gc.mapValue)return 0;if(a===Gc.mapValue)return 1;if(u===Gc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let S=0;S<f.length&&S<_.length;++S){const E=qp(f[S],_[S]);if(E!==0)return E;const P=Qa(d[f[S]],m[_[S]]);if(P!==0)return P}return We(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{le:t})}}function tw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=to(n),r=to(e),s=We(t.seconds,r.seconds);return s!==0?s:We(t.nanos,r.nanos)}function nw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Qa(t[s],r[s]);if(a)return a}return We(t.length,r.length)}function Xa(n){return Gp(n)}function Gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=to(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return no(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Gp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Gp(t.fields[u])}`;return s+"}"})(n.mapValue):Oe(61005,{value:n})}function ch(n){switch(ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(n);return e?16+ch(e):16;case 5:return 2*n.stringValue.length;case 6:return no(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+ch(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return oo(r.fields,((a,u)=>{s+=a.length+ch(u)})),s})(n.mapValue);default:throw Oe(13486,{value:n})}}function rw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kp(n){return!!n&&"integerValue"in n}function Wm(n){return!!n&&"arrayValue"in n}function iw(n){return!!n&&"nullValue"in n}function sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function pk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[pS])===null||t===void 0?void 0:t.stringValue)===mS}function ou(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return oo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ou(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=hn.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=ou(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){oo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Zn(ou(this.value))}}function gS(n){const e=[];return oo(n.fields,((t,r)=>{const s=new hn([t]);if(hh(r)){const a=gS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new In(e,0,Fe.min(),Fe.min(),Fe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,s){return new In(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new In(e,2,t,Fe.min(),Fe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Fe.min(),Fe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function ow(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Pe.comparator(Pe.fromName(u.referenceValue),t.key):r=Qa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function aw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function gk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{}class Ht extends vS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yk(e,t,r):t==="array-contains"?new Ek(e,r):t==="in"?new Sk(e,r):t==="not-in"?new Tk(e,r):t==="array-contains-any"?new Ik(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _k(e,r):new wk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qa(t,this.value)):t!==null&&ro(this.value)===ro(t)&&this.matchesComparison(Qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends vS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new si(e,t)}matches(e){return yS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yS(n){return n.op==="and"}function _S(n){return vk(n)&&yS(n)}function vk(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}function Qp(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+Xa(n.value);if(_S(n))return n.filters.map((e=>Qp(e))).join(",");{const e=n.filters.map((t=>Qp(t))).join(",");return`${n.op}(${e})`}}function wS(n,e){return n instanceof Ht?(function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&xi(r.value,s.value)})(n,e):n instanceof si?(function(r,s){return s instanceof si&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&wS(u,s.filters[d])),!0):!1})(n,e):void Oe(19439)}function ES(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xa(t.value)}`})(n):n instanceof si?(function(t){return t.op.toString()+" {"+t.getFilters().map(ES).join(" ,")+"}"})(n):"Filter"}class yk extends Ht{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class _k extends Ht{constructor(e,t){super(e,"in",t),this.keys=SS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wk extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=SS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Pe.fromName(r.referenceValue)))}class Ek extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wm(t)&&yu(t.arrayValue,this.value)}}class Sk extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}}class Tk extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yu(this.value.arrayValue,t)}}class Ik extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function lw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new bk(n,e,t,r,s,a,u)}function qm(n){const e=Ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Qp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xa(r))).join(",")),e.Pe=t}return e.Pe}function Gm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aw(n.startAt,e.startAt)&&aw(n.endAt,e.endAt)}function Xp(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ck(n,e,t,r,s,a,u,d){return new Ou(n,e,t,r,s,a,u,d)}function Km(n){return new Ou(n)}function uw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TS(n){return n.collectionGroup!==null}function au(n){const e=Ue(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Yt(hn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new xh(a,r))})),t.has(hn.keyField().canonicalString())||e.Te.push(new xh(hn.keyField(),r))}return e.Te}function bi(n){const e=Ue(n);return e.Ie||(e.Ie=Ak(e,au(n))),e.Ie}function Ak(n,e){if(n.limitType==="F")return lw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new xh(s.field,a)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return lw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yp(n,e){const t=n.filters.concat([e]);return new Ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jp(n,e,t){return new Ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ud(n,e){return Gm(bi(n),bi(e))&&n.limitType===e.limitType}function IS(n){return`${qm(bi(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>ES(s))).join(", ")}]`),ad(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Xa(s))).join(",")),`Target(${r})`})(bi(n))}; limitType=${n.limitType})`}function cd(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of au(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=ow(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,au(r),s)||r.endAt&&!(function(u,d,f){const m=ow(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,au(r),s))})(n,e)}function Pk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bS(n){return(e,t)=>{let r=!1;for(const s of au(n)){const a=Rk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Rk(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Qa(f,m):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return lS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new At(Pe.comparator);function cs(){return kk}const CS=new At(Pe.comparator);function Zl(...n){let e=CS;for(const t of n)e=e.insert(t.key,t);return e}function AS(n){let e=CS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Mo(){return lu()}function PS(){return lu()}function lu(){return new Go((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xk=new At(Pe.comparator),Nk=new Yt(Pe.comparator);function Ke(...n){let e=Nk;for(const t of n)e=e.add(t);return e}const Ok=new Yt(We);function Dk(){return Ok}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function RS(n){return{integerValue:""+n}}function Vk(n,e){return lk(e)?RS(e):Qm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function Mk(n,e,t){return n instanceof _u?(function(s,a){const u={fields:{[hS]:{stringValue:cS},[fS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Hm(a)&&(a=ld(a)),a&&(u.fields[dS]=a),{mapValue:u}})(t,e):n instanceof Ya?xS(n,e):n instanceof Ja?NS(n,e):(function(s,a){const u=kS(s,a),d=cw(u)+cw(s.Ee);return Kp(u)&&Kp(s.Ee)?RS(d):Qm(s.serializer,d)})(n,e)}function Lk(n,e,t){return n instanceof Ya?xS(n,e):n instanceof Ja?NS(n,e):t}function kS(n,e){return n instanceof Nh?(function(r){return Kp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class _u extends hd{}class Ya extends hd{constructor(e){super(),this.elements=e}}function xS(n,e){const t=OS(e);for(const r of n.elements)t.some((s=>xi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ja extends hd{constructor(e){super(),this.elements=e}}function NS(n,e){let t=OS(e);for(const r of n.elements)t=t.filter((s=>!xi(s,r)));return{arrayValue:{values:t}}}class Nh extends hd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function cw(n){return Vt(n.integerValue||n.doubleValue)}function OS(n){return Wm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t){this.field=e,this.transform=t}}function jk(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ya&&s instanceof Ya||r instanceof Ja&&s instanceof Ja?Ka(r.elements,s.elements,xi):r instanceof Nh&&s instanceof Nh?xi(r.Ee,s.Ee):r instanceof _u&&s instanceof _u})(n.transform,e.transform)}class Fk{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dd{}function DS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ym(n.key,Mr.none()):new Du(n.key,n.data,Mr.none());{const t=n.data,r=Zn.empty();let s=new Yt(hn.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new ao(n.key,r,new gr(s.toArray()),Mr.none())}}function Uk(n,e,t){n instanceof Du?(function(s,a,u){const d=s.value.clone(),f=dw(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ao?(function(s,a,u){if(!dh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=dw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(VS(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function uu(n,e,t,r){return n instanceof Du?(function(a,u,d,f){if(!dh(a.precondition,u))return d;const m=a.value.clone(),_=fw(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof ao?(function(a,u,d,f){if(!dh(a.precondition,u))return d;const m=fw(a.fieldTransforms,f,u),_=u.data;return _.setAll(VS(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((S=>S.field)))})(n,e,t,r):(function(a,u,d){return dh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function zk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=kS(r.transform,s||null);a!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,a))}return t||null}function hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ka(r,s,((a,u)=>jk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Du extends dd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ao extends dd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function VS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function dw(n,e,t){const r=new Map;st(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Lk(u,d,t[s]))}return r}function fw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Mk(a,u,e))}return r}class Ym extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $k extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Uk(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PS();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=DS(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,((t,r)=>hw(t,r)))&&Ka(this.baseMutations,e.baseMutations,((t,r)=>hw(t,r)))}}class Jm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){st(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return xk})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Jm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Xe;function qk(n){switch(n){case ne.OK:return Oe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function MS(n){if(n===void 0)return us("GRPC error has no .code"),ne.UNKNOWN;switch(n){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return Oe(39323,{code:n})}}(Xe=$t||($t={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new Xs([4294967295,4294967295],0);function pw(n){const e=iS().encode(n),t=new XE;return t.update(e),new Uint8Array(t.digest())}function mw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Xs([t,r],0),new Xs([s,a],0)]}class Zm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(r<0)throw new eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Xs.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Xs.fromNumber(r)));return s.compare(Gk)===1&&(s=new Xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=pw(e),[r,s]=mw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Zm(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=pw(e),[r,s]=mw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fd(Fe.min(),s,new At(We),cs(),Ke())}}class Vu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vu(r,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class LS{constructor(e,t){this.targetId=e,this.De=t}}class jS{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class gw{constructor(){this.ve=0,this.Ce=vw(),this.Fe=dn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),r=Ke();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:a})}})),new Vu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=vw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Kk{constructor(e){this.We=e,this.Ge=new Map,this.ze=cs(),this.je=Kc(),this.Je=Kc(),this.He=new At(We)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Xp(a))if(r===0){const u=new Pe(a.path);this.Xe(t,u,In.newNoDocument(u,Fe.min()))}else st(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=no(r).toUint8Array()}catch(f){if(f instanceof uS)return Zs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Zm(u,s,a)}catch(f){return Zs(f instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&Xp(d.target)){const f=new Pe(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,In.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ke();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new fd(e,t,this.He,this.ze,r);return this.ze=cs(),this.je=Kc(),this.Je=Kc(),this.He=new At(We),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new gw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Yt(We),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Yt(We),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new At(Pe.comparator)}function vw(){return new At(Pe.comparator)}const Qk={asc:"ASCENDING",desc:"DESCENDING"},Xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zp(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zk(n,e){return Oh(n,e.toTimestamp())}function Ci(n){return st(!!n,49232),Fe.fromTimestamp((function(t){const r=to(t);return new ct(r.seconds,r.nanos)})(n))}function eg(n,e){return em(n,e).canonicalString()}function em(n,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function US(n){const e=ft.fromString(n);return st(WS(e),10190,{key:e.toString()}),e}function tm(n,e){return eg(n.databaseId,e.path)}function pp(n,e){const t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe($S(t))}function zS(n,e){return eg(n.databaseId,e)}function ex(n){const e=US(n);return e.length===4?ft.emptyPath():$S(e)}function nm(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $S(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yw(n,e,t){return{name:tm(n,e),fields:t.value.mapValue.fields}}function tx(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Oe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(st(_===void 0||typeof _=="string",58123),dn.fromBase64String(_||"")):(st(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),dn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?ne.UNKNOWN:MS(m.code);return new me(_,m.message||"")})(u);t=new jS(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=pp(n,r.document.name),a=Ci(r.document.updateTime),u=r.document.createTime?Ci(r.document.createTime):Fe.min(),d=new Zn({mapValue:{fields:r.document.fields}}),f=In.newFoundDocument(s,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new fh(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=pp(n,r.document),a=r.readTime?Ci(r.readTime):Fe.min(),u=In.newNoDocument(s,a),d=r.removedTargetIds||[];t=new fh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=pp(n,r.document),a=r.removedTargetIds||[];t=new fh([],a,s,null)}else{if(!("filter"in e))return Oe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Wk(s,a),d=r.targetId;t=new LS(d,u)}}return t}function nx(n,e){let t;if(e instanceof Du)t={update:yw(n,e.key,e.value)};else if(e instanceof Ym)t={delete:tm(n,e.key)};else if(e instanceof ao)t={update:yw(n,e.key,e.data),updateMask:hx(e.fieldMask)};else{if(!(e instanceof $k))return Oe(16599,{Rt:e.type});t={verify:tm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof _u)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ja)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Oe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Zk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe(27497)})(n,e.precondition)),t}function rx(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Ci(s.updateTime):Ci(a);return u.isEqual(Fe.min())&&(u=Ci(a)),new Fk(u,s.transformResults||[])})(t,e)))):[]}function ix(n,e){return{documents:[zS(n,e.path)]}}function sx(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zS(n,s);const a=(function(m){if(m.length!==0)return HS(si.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(E){return{field:ja(E.field),direction:lx(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Zp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function ox(n){let e=ex(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){st(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(S){const E=BS(S);return E instanceof si&&_S(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(S){return S.map((E=>(function(O){return new xh(Fa(O.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(S){let E;return E=typeof S=="object"?S.value:S,ad(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(S){const E=!!S.before,P=S.values||[];return new kh(P,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(S){const E=!S.before,P=S.values||[];return new kh(P,E)})(t.endAt)),Ck(e,s,u,a,d,"F",f,m)}function ax(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fa(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fa(t.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fa(t.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Fa(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(Fa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return si.create(t.compositeFilter.filters.map((r=>BS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function lx(n){return Qk[n]}function ux(n){return Xk[n]}function cx(n){return Yk[n]}function ja(n){return{fieldPath:n.canonicalString()}}function Fa(n){return hn.fromServerFormat(n.fieldPath)}function HS(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(iw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(iw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:ux(t.op),value:t.value}}})(n):n instanceof si?(function(t){const r=t.getFilters().map((s=>HS(s)));return r.length===1?r[0]:{compositeFilter:{op:cx(t.op),filters:r}}})(n):Oe(54877,{filter:n})}function hx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r,s,a=Fe.min(),u=Fe.min(),d=dn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.gt=e}}function fx(n){const e=ox({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Dn=new mx}addToCollectionParentIndex(e,t){return this.Dn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(eo.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class mx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Yt(ft.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qS=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(qS,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Za(0)}static ur(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="LruGarbageCollector",gx=1048576;function Ew([n,e],[t,r]){const s=We(n,t);return s===0?We(e,r):s}class vx{constructor(e){this.Tr=e,this.buffer=new Yt(Ew),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ew(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(ww,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ul(t)?ve(ww,"Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Rr(3e5)}))}}class _x{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(od.ue);const r=new vx(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(_w)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_w):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,u=Date.now(),this.nthSequenceNumber(e,s)))).next((S=>(r=S,d=Date.now(),this.removeTargets(e,r,t)))).next((S=>(a=S,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(m=Date.now(),Ma()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${S} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:S}))))}}function wx(n,e){return new _x(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.changes=new Go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&uu(r.mutation,s,gr.empty(),ct.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ke()){const s=Mo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=Zl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Mo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ke())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=cs();const u=lu(),d=(function(){return lu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof ao)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),uu(_.mutation,m,_.mutation.getFieldMask(),ct.now())):u.set(m.key,gr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var S;return d.set(m,new Sx(_,(S=u.get(m))!==null&&S!==void 0?S:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=lu();let s=new At(((u,d)=>u-d)),a=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||gr.empty();_=d.applyToLocalView(m,_),r.set(f,_);const S=(s.get(d.batchId)||Ke()).add(f);s=s.insert(d.batchId,S)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,S=PS();_.forEach((E=>{if(!a.has(E)){const P=DS(t.get(E),r.get(E));P!==null&&S.set(E,P),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,S))}return re.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Pe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):re.resolve(Mo());let d=mu,f=a;return u.next((m=>re.forEach(m,((_,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{f=f.insert(_,E)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ke()))).next((_=>({batchId:d,changes:AS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let s=Zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=Zl();return this.indexManager.getCollectionParents(e,a).next((d=>re.forEach(d,(f=>{const m=(function(S,E){return new Ou(E,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((S,E)=>{u=u.insert(S,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,In.newInvalidDocument(_)))}));let d=Zl();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&uu(_.mutation,m,gr.empty(),ct.now()),cd(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return re.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ci(s.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:fx(s.bundledQuery),readTime:Ci(s.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.overlays=new At(Pe.comparator),this.kr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mo();return re.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=Mo(),a=t.length+1,u=new Pe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new At(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=Mo(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Mo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return re.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Hk(t,r));let a=this.kr.get(t);a===void 0&&(a=Ke(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.qr=new Yt(sn.Qr),this.$r=new Yt(sn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new sn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new sn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Pe(new ft([])),r=new sn(t,e),s=new sn(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Pe(new ft([])),r=new sn(t,e),s=new sn(t,e+1);let a=Ke();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new sn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Pe.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Yt(sn.Qr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Bk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new sn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Bm:this.er-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new sn(t,0),s=new sn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Yt(We);return t.forEach((s=>{const a=new sn(s,0),u=new sn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),re.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Pe.isDocumentKey(a)||(a=a.child(""));const u=new sn(new Pe(a),0);let d=new Yt(We);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),re.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){st(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return re.forEach(t.mutations,(s=>{const a=new sn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new sn(t,0),s=this.Yr.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.ni=e,this.docs=(function(){return new At(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():In.newInvalidDocument(s))})),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=cs();const u=t.path,d=new Pe(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||ik(rk(_),r)<=0||(s.has(_.key)||cd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Oe(9500)}ri(e,t){return re.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Rx(this)}getSize(e){return re.resolve(this.size)}}class Rx extends Ex{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),re.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.persistence=e,this.ii=new Go((t=>qm(t)),Gm),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new tg,this.targetCount=0,this._i=Za.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),re.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.hr(t),re.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),re.waitFor(a).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.ai={},this.overlays={},this.ui=new od(0),this.ci=!1,this.ci=!0,this.li=new Cx,this.referenceDelegate=e(this),this.hi=new kx(this),this.indexManager=new px,this.remoteDocumentCache=(function(s){return new Px(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new dx(t),this.Ti=new Ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Ax(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const s=new xx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return re.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class xx extends ok{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ai=new tg,this.Ri=null}static Vi(e){return new ng(e)}get mi(){if(this.Ri)return this.Ri;throw Oe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.mi,(r=>{const s=Pe.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,Fe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return re.or([()=>re.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dh{constructor(e,t){this.persistence=e,this.gi=new Go((r=>uk(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=wx(this,t)}static Vi(e,t){return new Dh(e,t)}Ii(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return re.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?re.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Fe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ch(e.data.value)),t}Sr(e,t,r){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ke(),s=Ke();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new rg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return P1()?8:ak(bn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Nx;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ma()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Ma()<=Ge.DEBUG&&ve("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ma()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(t))):re.resolve())}ps(e,t){if(uw(t))return re.resolve(null);let r=bi(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Jp(t,null,"F"),r=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ke(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Jp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return uw(t)||s.isEqual(Fe.min())?re.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?re.resolve(null):(Ma()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),La(t)),this.vs(e,u,t,nk(s,mu)).next((d=>d)))}))}bs(e,t){let r=new Yt(bS(e));return t.forEach(((s,a)=>{cd(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ma()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",La(t)),this.gs.getDocumentsMatchingQuery(e,t,eo.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="LocalStore",Dx=3e8;class Vx{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new At(We),this.Ms=new Go((a=>qm(a)),Gm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Mx(n,e,t,r){return new Vx(n,e,t,r)}async function KS(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ke();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Lx(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const S=m.batch,E=S.keys();let P=re.resolve();return E.forEach((O=>{P=P.next((()=>_.getEntry(f,O))).next((R=>{const C=m.docVersions.get(O);st(C!==null,48541),R.version.compareTo(C)<0&&(S.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),_.addEntry(R)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,S)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function QS(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function jx(n,e){const t=Ue(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,S)=>{const E=s.get(S);if(!E)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,S).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,S))));let P=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(dn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),s=s.insert(S,P),(function(R,C,B){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Dx?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,P,_)&&d.push(t.hi.updateTargetData(a,P))}));let f=cs(),m=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Fx(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!r.isEqual(Fe.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((S=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return re.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function Fx(n,e,t){let r=Ke(),s=Ke();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=cs();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Fe.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ve(ig,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Ux(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zx(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,re.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new qs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function rm(n,e,t){const r=Ue(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ul(u))throw u;ve(ig,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Sw(n,e,t){const r=Ue(n);let s=Fe.min(),a=Ke();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const S=Ue(f),E=S.Ms.get(_);return E!==void 0?re.resolve(S.Fs.get(E)):S.hi.getTargetData(m,_)})(r,u,bi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:Fe.min(),t?a:Ke()))).next((d=>($x(r,Pk(e),d),{documents:d,qs:a})))))}function $x(n,e,t){let r=n.xs.get(e)||Fe.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class Tw{constructor(){this.activeTargetIds=Dk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bx{constructor(){this.Fo=new Tw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="ConnectivityMonitor";class bw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(Iw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(Iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function im(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="RestConnection",Wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=im(),d=this.Go(e,t.toUriEncodedString());ve(mp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),_=ds(m);return this.jo(e,d,f,r,_).then((S=>(ve(mp,`Received RPC '${e}' ${u}: `,S),S)),(S=>{throw Zs(mp,`RPC '${e}' ${u} failed with error: `,S,"url: ",d,"request:",r),S}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Wx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class Kx extends qx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=im();return new Promise(((d,f)=>{const m=new YE;m.setWithCredentials(!0),m.listenOnce(JE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case uh.NO_ERROR:const S=m.getResponseJson();ve(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case uh.TIMEOUT:ve(En,`RPC '${e}' ${u} timed out`),f(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const E=m.getStatus();if(ve(En,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const O=P==null?void 0:P.error;if(O&&O.status&&O.message){const R=(function(B){const Q=B.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN})(O.status);f(new me(R,O.message))}else f(new me(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ve(En,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ve(En,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const s=im(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tS(),d=eS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ve(En,`Creating RPC '${e}' stream ${s}: ${_}`,f);const S=u.createWebChannel(_,f);this.T_(S);let E=!1,P=!1;const O=new Gx({Ho:C=>{P?ve(En,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(E||(ve(En,`Opening RPC '${e}' stream ${s} transport.`),S.open(),E=!0),ve(En,`RPC '${e}' stream ${s} sending:`,C),S.send(C))},Yo:()=>S.close()}),R=(C,B,Q)=>{C.listen(B,(K=>{try{Q(K)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return R(S,Jl.EventType.OPEN,(()=>{P||(ve(En,`RPC '${e}' stream ${s} transport opened.`),O.s_())})),R(S,Jl.EventType.CLOSE,(()=>{P||(P=!0,ve(En,`RPC '${e}' stream ${s} transport closed`),O.__(),this.I_(S))})),R(S,Jl.EventType.ERROR,(C=>{P||(P=!0,Zs(En,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),O.__(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),R(S,Jl.EventType.MESSAGE,(C=>{var B;if(!P){const Q=C.data[0];st(!!Q,16349);const K=Q,ee=(K==null?void 0:K.error)||((B=K[0])===null||B===void 0?void 0:B.error);if(ee){ve(En,`RPC '${e}' stream ${s} received error:`,ee);const X=ee.status;let se=(function(N){const j=$t[N];if(j!==void 0)return MS(j)})(X),k=ee.message;se===void 0&&(se=ne.INTERNAL,k="Unknown error status: "+X+" with message "+ee.message),P=!0,O.__(new me(se,k)),S.close()}else ve(En,`RPC '${e}' stream ${s} received:`,Q),O.a_(Q)}})),R(d,ZE.STAT_EVENT,(C=>{C.stat===Wp.PROXY?ve(En,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Wp.NOPROXY&&ve(En,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(n){return new Jk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="PersistentStream";class YS{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new XS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(us(t.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(Cw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ve(Cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qx extends YS{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=tx(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Fe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Fe.min():u.readTime?Ci(u.readTime):Fe.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=nm(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Xp(f)?{documents:ix(a,f)}:{query:sx(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=FS(a,u.resumeToken);const m=Zp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Fe.min())>0){d.readTime=Oh(a,u.snapshotVersion.toTimestamp());const m=Zp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=ax(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=nm(this.serializer),t.removeTarget=e,this.k_(t)}}class Xx extends YS{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=rx(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=nm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>nx(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{}class Jx extends Yx{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,em(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ne.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,em(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Zx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(us(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class eN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Ko(this)&&(ve($o,"Restarting streams for network reachability change."),await(async function(f){const m=Ue(f);m.Ia.add(4),await Mu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await md(m)})(this))}))})),this.Aa=new Zx(r,s)}}async function md(n){if(Ko(n))for(const e of n.da)await e(!0)}async function Mu(n){for(const e of n.da)await e(!1)}function JS(n,e){const t=Ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),lg(t)?ag(t):cl(t).x_()&&og(t,e))}function sg(n,e){const t=Ue(n),r=cl(t);t.Ta.delete(e),r.x_()&&ZS(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ko(t)&&t.Aa.set("Unknown"))}function og(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).H_(e)}function ZS(n,e){n.Ra.$e(e),cl(n).Y_(e)}function ag(n){n.Ra=new Kk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.Aa.aa()}function lg(n){return Ko(n)&&!cl(n).M_()&&n.Ta.size>0}function Ko(n){return Ue(n).Ia.size===0}function eT(n){n.Ra=void 0}async function tN(n){n.Aa.set("Online")}async function nN(n){n.Ta.forEach(((e,t)=>{og(n,e)}))}async function rN(n,e){eT(n),lg(n)?(n.Aa.la(e),ag(n)):n.Aa.set("Unknown")}async function iN(n,e,t){if(n.Aa.set("Online"),e instanceof jS&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){ve($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(n,r)}else if(e instanceof fh?n.Ra.Ye(e):e instanceof LS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Fe.min()))try{const r=await QS(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),ZS(a,f);const S=new qs(_.target,f,m,_.sequenceNumber);og(a,S)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ve($o,"Failed to raise snapshot:",r),await Vh(n,r)}}async function Vh(n,e,t){if(!ul(e))throw e;n.Ia.add(1),await Mu(n),n.Aa.set("Offline"),t||(t=()=>QS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve($o,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await md(n)}))}function tT(n,e){return e().catch((t=>Vh(n,t,e)))}async function gd(n){const e=Ue(n),t=io(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Bm;for(;sN(e);)try{const s=await Ux(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,oN(e,s)}catch(s){await Vh(e,s)}nT(e)&&rT(e)}function sN(n){return Ko(n)&&n.Pa.length<10}function oN(n,e){n.Pa.push(e);const t=io(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function nT(n){return Ko(n)&&!io(n).M_()&&n.Pa.length>0}function rT(n){io(n).start()}async function aN(n){io(n).na()}async function lN(n){const e=io(n);for(const t of n.Pa)e.X_(t.mutations)}async function uN(n,e,t){const r=n.Pa.shift(),s=Jm.from(r,e,t);await tT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await gd(n)}async function cN(n,e){e&&io(n).Z_&&await(async function(r,s){if((function(u){return qk(u)&&u!==ne.ABORTED})(s.code)){const a=r.Pa.shift();io(r).N_(),await tT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await gd(r)}})(n,e),nT(n)&&rT(n)}async function Aw(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),ve($o,"RemoteStore received new credentials");const r=Ko(t);t.Ia.add(3),await Mu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await md(t)}async function hN(n,e){const t=Ue(n);e?(t.Ia.delete(2),await md(t)):e||(t.Ia.add(2),await Mu(t),t.Aa.set("Unknown"))}function cl(n){return n.Va||(n.Va=(function(t,r,s){const a=Ue(t);return a.ia(),new Qx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:tN.bind(null,n),e_:nN.bind(null,n),n_:rN.bind(null,n),J_:iN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),lg(n)?ag(n):n.Aa.set("Unknown")):(await n.Va.stop(),eT(n))}))),n.Va}function io(n){return n.ma||(n.ma=(function(t,r,s){const a=Ue(t);return a.ia(),new Xx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:aN.bind(null,n),n_:cN.bind(null,n),ea:lN.bind(null,n),ta:uN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await gd(n)):(await n.ma.stop(),n.Pa.length>0&&(ve($o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new ug(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(n,e){if(us("AsyncQueue",`${e}: ${n}`),ul(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Zl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.fa=new At(Pe.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Oe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class el{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new el(e,t,Ba.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class fN{constructor(){this.queries=Rw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=Ue(t),a=s.queries;s.queries=Rw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function Rw(){return new Go((n=>IS(n)),ud)}async function iT(n,e){const t=Ue(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new dN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=cg(u,`Initialization of query '${La(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&hg(t)}async function sT(n,e){const t=Ue(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pN(n,e){const t=Ue(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&hg(t)}function mN(n,e,t){const r=Ue(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function hg(n){n.Da.forEach((e=>{e.next()}))}var sm,kw;(kw=sm||(sm={})).Fa="default",kw.Cache="cache";class oT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new el(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class gN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=bS(e),this.eu=new Ba(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Pw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,S)=>{const E=s.get(_),P=cd(this.query,S)?S:null,O=!!E&&this.mutatedKeys.has(E.key),R=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let C=!1;E&&P?E.data.isEqual(P.data)?O!==R&&(r.track({type:3,doc:P}),C=!0):this.iu(E,P)||(r.track({type:2,doc:P}),C=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(d=!0)):!E&&P?(r.track({type:0,doc:P}),C=!0):E&&!P&&(r.track({type:1,doc:E}),C=!0,(f||m)&&(d=!0)),C&&(P?(u=u.add(P),a=R?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,S)=>(function(P,O){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{At:C})}};return R(P)-R(O)})(_.type,S.type)||this.Xa(_.doc,S.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new el(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Pw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ke(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new lT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new aT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return el.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const dg="SyncEngine";class vN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yN{constructor(e){this.key=e,this.lu=!1}}class _N{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Go((d=>IS(d)),ud),this.Tu=new Map,this.Iu=new Set,this.du=new At(Pe.comparator),this.Eu=new Map,this.Au=new tg,this.Ru={},this.Vu=new Map,this.mu=Za.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function wN(n,e,t=!0){const r=pT(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await uT(r,e,t,!0),s}async function EN(n,e){const t=pT(n);await uT(t,e,!0,!1)}async function uT(n,e,t,r){const s=await zx(n.localStore,bi(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await SN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&JS(n.remoteStore,s),d}async function SN(n,e,t,r,s){n.gu=(S,E,P)=>(async function(R,C,B,Q){let K=C.view.nu(B);K.Ds&&(K=await Sw(R.localStore,C.query,!1).then((({documents:k})=>C.view.nu(k,K))));const ee=Q&&Q.targetChanges.get(C.targetId),X=Q&&Q.targetMismatches.get(C.targetId)!=null,se=C.view.applyChanges(K,R.isPrimaryClient,ee,X);return Nw(R,C.targetId,se._u),se.snapshot})(n,S,E,P);const a=await Sw(n.localStore,e,!0),u=new gN(e,a.qs),d=u.nu(a.documents),f=Vu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Nw(n,t,m._u);const _=new vN(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function TN(n,e,t){const r=Ue(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!ud(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&sg(r.remoteStore,s.targetId),om(r,s.targetId)})).catch(ll)):(om(r,s.targetId),await rm(r.localStore,s.targetId,!0))}async function IN(n,e){const t=Ue(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sg(t.remoteStore,r.targetId))}async function bN(n,e,t){const r=NN(n);try{const s=await(function(u,d){const f=Ue(u),m=ct.now(),_=d.reduce(((P,O)=>P.add(O.key)),Ke());let S,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let O=cs(),R=Ke();return f.Os.getEntries(P,_).next((C=>{O=C,O.forEach(((B,Q)=>{Q.isValidDocument()||(R=R.add(B))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,O))).next((C=>{S=C;const B=[];for(const Q of d){const K=zk(Q,S.get(Q.key).overlayedDocument);K!=null&&B.push(new ao(Q.key,K,gS(K.value.mapValue),Mr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,B,d)})).next((C=>{E=C;const B=C.applyToLocalDocumentSet(S,R);return f.documentOverlayCache.saveOverlays(P,C.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:AS(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new At(We)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await Lu(r,s.changes),await gd(r.remoteStore)}catch(s){const a=cg(s,"Failed to persist write");t.reject(a)}}async function cT(n,e){const t=Ue(n);try{const r=await jx(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?st(u.lu,14607):s.removedDocuments.size>0&&(st(u.lu,42227),u.lu=!1))})),await Lu(t,r,e)}catch(r){await ll(r)}}function xw(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=Ue(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,S)=>{for(const E of S.wa)E.va(d)&&(m=!0)})),m&&hg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CN(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new At(Pe.comparator);u=u.insert(a,In.newNoDocument(a,Fe.min()));const d=Ke().add(a),f=new fd(Fe.min(),new Map,new At(We),u,d);await cT(r,f),r.du=r.du.remove(a),r.Eu.delete(e),fg(r)}else await rm(r.localStore,e,!1).then((()=>om(r,e,t))).catch(ll)}async function AN(n,e){const t=Ue(n),r=e.batch.batchId;try{const s=await Lx(t.localStore,e);dT(t,r,null),hT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(t,s)}catch(s){await ll(s)}}async function PN(n,e,t){const r=Ue(n);try{const s=await(function(u,d){const f=Ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((S=>(st(S!==null,37113),_=S.keys(),f.mutationQueue.removeMutationBatch(m,S)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);dT(r,e,t),hT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lu(r,s)}catch(s){await ll(s)}}function hT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function dT(n,e,t){const r=Ue(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function om(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||fT(n,r)}))}function fT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(sg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),fg(n))}function Nw(n,e,t){for(const r of t)r instanceof aT?(n.Au.addReference(r.key,e),RN(n,r)):r instanceof lT?(ve(dg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||fT(n,r.key)):Oe(19791,{yu:r})}function RN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ve(dg,"New document in limbo: "+t),n.Iu.add(r),fg(n))}function fg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Pe(ft.fromString(e)),r=n.mu.next();n.Eu.set(r,new yN(t)),n.du=n.du.insert(t,r),JS(n.remoteStore,new qs(bi(Km(t.path)),r,"TargetPurposeLimboResolution",od.ue))}}async function Lu(n,e,t){const r=Ue(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const S=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,S?"current":"not-current")}if(m){s.push(m);const S=rg.Es(f.targetId,m);a.push(S)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const _=Ue(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>re.forEach(m,(E=>re.forEach(E.Is,(P=>_.persistence.referenceDelegate.addReference(S,E.targetId,P))).next((()=>re.forEach(E.ds,(P=>_.persistence.referenceDelegate.removeReference(S,E.targetId,P)))))))))}catch(S){if(!ul(S))throw S;ve(ig,"Failed to update sequence numbers: "+S)}for(const S of m){const E=S.targetId;if(!S.fromCache){const P=_.Fs.get(E),O=P.snapshotVersion,R=P.withLastLimboFreeSnapshotVersion(O);_.Fs=_.Fs.insert(E,R)}}})(r.localStore,a))}async function kN(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){ve(dg,"User change. New user:",e.toKey());const r=await KS(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new me(ne.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(t,r.Bs)}}function xN(n,e){const t=Ue(n),r=t.Eu.get(e);if(r&&r.lu)return Ke().add(r.key);{let s=Ke();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function pT(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CN.bind(null,e),e.hu.J_=pN.bind(null,e.eventManager),e.hu.pu=mN.bind(null,e.eventManager),e}function NN(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PN.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Mx(this.persistence,new Ox,e.initialUser,this.serializer)}Du(e){return new GS(ng.Vi,this.serializer)}bu(e){return new Bx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class ON extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){st(this.persistence.referenceDelegate instanceof Dh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new GS((r=>Dh.Vi(r,t)),this.serializer)}}class am{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await hN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fN})()}createDatastore(e){const t=pd(e.databaseInfo.databaseId),r=(function(a){return new Kx(a)})(e.databaseInfo);return(function(a,u,d,f){return new Jx(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new eN(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>xw(this.syncEngine,t,0)),(function(){return bw.C()?new bw:new Hx})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const S=new _N(s,a,u,d,f,m);return _&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Ue(s);ve($o,"RemoteStore shutting down."),a.Ia.add(5),await Mu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}am.provider={build:()=>new am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class DN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ve(so,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ve(so,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=cg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vp(n,e){n.asyncQueue.verifyOperationInProgress(),ve(so,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await KS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Zs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Zs("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Ow(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VN(n);ve(so,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Aw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Aw(e.remoteStore,s))),n._onlineComponents=e}async function VN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(so,"Using user provided OfflineComponentProvider");try{await vp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Zs("Error using user provided cache. Falling back to memory cache: "+t),await vp(n,new Mh)}}else ve(so,"Using default OfflineComponentProvider"),await vp(n,new ON(void 0));return n._offlineComponents}async function gT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(so,"Using user provided OnlineComponentProvider"),await Ow(n,n._uninitializedComponentsProvider._online)):(ve(so,"Using default OnlineComponentProvider"),await Ow(n,new am))),n._onlineComponents}function MN(n){return gT(n).then((e=>e.syncEngine))}async function vT(n){const e=await gT(n),t=e.eventManager;return t.onListen=wN.bind(null,e.syncEngine),t.onUnlisten=TN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IN.bind(null,e.syncEngine),t}function LN(n,e,t={}){const r=new rs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new mT({next:E=>{_.Ou(),u.enqueueAndForget((()=>sT(a,S)));const P=E.docs.has(d);!P&&E.fromCache?m.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&E.fromCache&&f&&f.source==="server"?m.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),S=new oT(Km(d.path),_,{includeMetadataChanges:!0,ka:!0});return iT(a,S)})(await vT(n),n.asyncQueue,e,t,r))),r.promise}function jN(n,e,t={}){const r=new rs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new mT({next:E=>{_.Ou(),u.enqueueAndForget((()=>sT(a,S))),E.fromCache&&f.source==="server"?m.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),S=new oT(d,_,{includeMetadataChanges:!0,ka:!0});return iT(a,S)})(await vT(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="firestore.googleapis.com",Vw=!0;class Mw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_T,this.ssl=Vw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gx)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new XR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Dw.get(t);r&&(ve("ComponentProvider","Removing Datastore"),Dw.delete(t),r.terminate())})(this),Promise.resolve()}}function FN(n,e,t,r={}){var s;n=ii(n,vd);const a=ds(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Jh(`https://${f}`),Zh("Firestore",!0)),u.host!==_T&&u.host!==f&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!ss(m,d)&&(n._setSettings(m),r.mockUserToken)){let _,S;if(typeof r.mockUserToken=="string")_=r.mockUserToken,S=Tn.MOCK_USER;else{_=uE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Tn(E)}n._authCredentials=new GR(new rS(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hl(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Nu(t,Mt._jsonSchema))return new Mt(e,r||null,new Pe(ft.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Wt("string",Mt._jsonSchemaVersion),referencePath:Wt("string")};class Ys extends hl{constructor(e,t,r){super(e,t,Km(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Pe(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function Lh(n,e,...t){if(n=vt(n),sS("collection","path",e),n instanceof vd){const r=ft.fromString(e,...t);return Q_(r),new Ys(n,null,r)}{if(!(n instanceof Mt||n instanceof Ys))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ft.fromString(e,...t));return Q_(r),new Ys(n.firestore,null,r)}}function Ni(n,e,...t){if(n=vt(n),arguments.length===1&&(e=$m.newId()),sS("doc","path",e),n instanceof vd){const r=ft.fromString(e,...t);return K_(r),new Mt(n,null,new Pe(r))}{if(!(n instanceof Mt||n instanceof Ys))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ft.fromString(e,...t));return K_(r),new Mt(n.firestore,n instanceof Ys?n.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="AsyncQueue";class jw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new XS(this,"async_queue_retry"),this.oc=()=>{const r=gp();r&&ve(Lw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new rs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ul(e))throw e;ve(Lw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,us("INTERNAL UNHANDLED ERROR: ",Fw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=ug.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Oe(47125,{hc:Fw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Fw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Qo extends vd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,await e}}}function UN(n,e){const t=typeof n=="object"?n:ed(),r=typeof n=="string"?n:Ph,s=Pu(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Am("firestore");a&&FN(s,...a)}return s}function pg(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zN(n),n._firestoreClient}function zN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,_){return new dk(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,yT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new DN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(dn.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:Wt("string",Dr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Wt("string",Ai._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Pi(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:Wt("string",Pi._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^__.*__$/;class BN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Du(e,this.data,t,this.fieldTransforms)}}class wT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ET(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ec:n})}}class _d{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new _d(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ET(this.Ec)&&$N.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class HN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pd(e)}Dc(e,t,r,s=!1){return new _d({Ec:e,methodName:t,bc:r,path:hn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wd(n){const e=n._freezeSettings(),t=pd(n._databaseId);return new HN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ST(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);yg("Data must be an object, but it was:",u,r);const d=IT(r,u);let f,m;if(a.merge)f=new gr(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const S of a.mergeFields){const E=lm(e,S,t);if(!u.contains(E))throw new me(ne.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CT(_,E)||_.push(E)}f=new gr(_),m=u.fieldTransforms.filter((S=>f.covers(S.field)))}else f=null,m=u.fieldTransforms;return new BN(new Zn(d),f,m)}class ju extends dl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ju}}function TT(n,e,t){return new _d({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mg extends dl{_toFieldTransform(e){return new Xm(e.path,new _u)}isEqual(e){return e instanceof mg}}class gg extends dl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=TT(this,e,!0),r=this.vc.map((a=>Xo(a,t))),s=new Ya(r);return new Xm(e.path,s)}isEqual(e){return e instanceof gg&&ss(this.vc,e.vc)}}class vg extends dl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=TT(this,e,!0),r=this.vc.map((a=>Xo(a,t))),s=new Ja(r);return new Xm(e.path,s)}isEqual(e){return e instanceof vg&&ss(this.vc,e.vc)}}function WN(n,e,t,r){const s=n.Dc(1,e,t);yg("Data must be an object, but it was:",s,r);const a=[],u=Zn.empty();oo(r,((f,m)=>{const _=_g(e,f,t);m=vt(m);const S=s.gc(_);if(m instanceof ju)a.push(_);else{const E=Xo(m,S);E!=null&&(a.push(_),u.set(_,E))}}));const d=new gr(a);return new wT(u,d,s.fieldTransforms)}function qN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[lm(e,r,t)],f=[s];if(a.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(lm(e,a[E])),f.push(a[E+1]);const m=[],_=Zn.empty();for(let E=d.length-1;E>=0;--E)if(!CT(m,d[E])){const P=d[E];let O=f[E];O=vt(O);const R=u.gc(P);if(O instanceof ju)m.push(P);else{const C=Xo(O,R);C!=null&&(m.push(P),_.set(P,C))}}const S=new gr(m);return new wT(_,S,u.fieldTransforms)}function GN(n,e,t,r=!1){return Xo(t,n.Dc(r?4:3,e))}function Xo(n,e){if(bT(n=vt(n)))return yg("Unsupported field value:",e,n),IT(n,e);if(n instanceof dl)return(function(r,s){if(!ET(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=Xo(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ct.fromDate(r);return{timestampValue:Oh(s.serializer,a)}}if(r instanceof ct){const a=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(s.serializer,a)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:FS(s.serializer,r._byteString)};if(r instanceof Mt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:eg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pi)return(function(u,d){return{mapValue:{fields:{[pS]:{stringValue:mS},[Rh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Qm(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${sd(r)}`)})(n,e)}function IT(n,e){const t={};return lS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(n,((r,s)=>{const a=Xo(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function bT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Ai||n instanceof Dr||n instanceof Mt||n instanceof dl||n instanceof Pi)}function yg(n,e,t){if(!bT(t)||!oS(t)){const r=sd(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function lm(n,e,t){if((e=vt(e))instanceof yd)return e._internalPath;if(typeof e=="string")return _g(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const KN=new RegExp("[~\\*/\\[\\]]");function _g(n,e,t){if(e.search(KN)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yd(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new me(ne.INVALID_ARGUMENT,d+n+f)}function CT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QN extends AT{data(){return super.data()}}function wg(n,e){return typeof e=="string"?_g(n,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class YN extends Eg{}function um(n,e,...t){let r=[];e instanceof Eg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Sg)).length,d=a.filter((f=>f instanceof Ed)).length;if(u>1||u>0&&d>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ed extends YN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=this._parse(e);return PT(e._query,t),new hl(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=wd(e.firestore);return(function(a,u,d,f,m,_,S){let E;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zw(S,_);const O=[];for(const R of S)O.push(Uw(f,a,R));E={arrayValue:{values:O}}}else E=Uw(f,a,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zw(S,_),E=GN(d,u,S,_==="in"||_==="not-in");return Ht.create(m,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cm(n,e,t){const r=e,s=wg("where",n);return Ed._create(s,r,t)}class Sg extends Eg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)PT(u,f),u=Yp(u,f)})(e._query,t),new hl(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Uw(n,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TS(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ft.fromString(t));if(!Pe.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rw(n,new Pe(r))}if(t instanceof Mt)return rw(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(t)}.`)}function zw(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PT(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JN{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return oo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Rh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Vt(u.doubleValue)));return new Pi(a)}convertGeoPoint(e){return new Ai(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ld(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const t=to(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ft.fromString(e);st(WS(r),9688,{name:e});const s=new vu(r.get(1),r.get(3)),a=new Pe(r.popFirst(5));return s.isEqual(t)||us(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends AT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=jo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:Wt("string",jo._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class ph extends jo{data(e={}){return super.data(e)}}class Ha{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new tu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ph(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new tu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new tu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:ZN(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n){n=ii(n,Mt);const e=ii(n.firestore,Qo);return LN(pg(e),n._key).then((t=>nO(e,n,t)))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:Wt("string",Ha._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class kT extends JN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function xT(n){n=ii(n,hl);const e=ii(n.firestore,Qo),t=pg(e),r=new kT(e);return XN(n._query),jN(t,n._query).then((s=>new Ha(e,r,n,s)))}function NT(n,e,t){n=ii(n,Mt);const r=ii(n.firestore,Qo),s=RT(n.converter,e,t);return Td(r,[ST(wd(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Mr.none())])}function Sd(n,e,t,...r){n=ii(n,Mt);const s=ii(n.firestore,Qo),a=wd(s);let u;return u=typeof(e=vt(e))=="string"||e instanceof yd?qN(a,"updateDoc",n._key,e,t,r):WN(a,"updateDoc",n._key,e),Td(s,[u.toMutation(n._key,Mr.exists(!0))])}function eO(n){return Td(ii(n.firestore,Qo),[new Ym(n._key,Mr.none())])}function tO(n,e){const t=ii(n.firestore,Qo),r=Ni(n),s=RT(n.converter,e);return Td(t,[ST(wd(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then((()=>r))}function Td(n,e){return(function(r,s){const a=new rs;return r.asyncQueue.enqueueAndForget((async()=>bN(await MN(r),s,a))),a.promise})(pg(n),e)}function nO(n,e,t){const r=t.docs.get(e._key),s=new kT(n);return new jo(n,s,e._key,r,new tu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){return new ju("deleteField")}function tl(){return new mg("serverTimestamp")}function OT(...n){return new gg("arrayUnion",n)}function iO(...n){return new vg("arrayRemove",n)}(function(e,t=!0){(function(s){al=s})(qo),Js(new os("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Qo(new KR(r.getProvider("auth-internal")),new YR(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Vr(B_,H_,e),Vr(B_,H_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="type.googleapis.com/google.protobuf.Int64Value",oO="type.googleapis.com/google.protobuf.UInt64Value";function DT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Fh(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Fh(e));if(typeof n=="function"||typeof n=="object")return DT(n,e=>Fh(e));throw new Error("Data cannot be encoded in JSON: "+n)}function nl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case sO:case oO:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>nl(e)):typeof n=="function"||typeof n=="object"?DT(n,e=>nl(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class er extends oi{constructor(e,t,r){super(`${Ig}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,er.prototype)}}function aO(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Uh(n,e){let t=aO(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!$w[u])return new er("internal","internal");t=$w[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=nl(s))}}catch{}return t==="ok"?null:new er(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="us-central1",uO=/^data: (.*?)(?:\n|$)/;function cO(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new er("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class hO{constructor(e,t,r,s,a=hm,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new lO(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=hm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function dO(n,e,t){const r=ds(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Jh(n.emulatorOrigin),Zh("Functions",!0))}function fO(n,e,t){const r=s=>mO(n,e,s,{});return r.stream=(s,a)=>vO(n,e,s,a),r}async function pO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function VT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function mO(n,e,t,r){const s=n._url(e);return gO(n,s,t,r)}async function gO(n,e,t,r){t=Fh(t);const s={data:t},a=await VT(n,r),u=r.timeout||7e4,d=cO(u),f=await Promise.race([pO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new er("cancelled","Firebase Functions instance was deleted.");const m=Uh(f.status,f.json);if(m)throw m;if(!f.json)throw new er("internal","Response is not valid JSON object.");let _=f.json.data;if(typeof _>"u"&&(_=f.json.result),typeof _>"u")throw new er("internal","Response is missing data field.");return{data:nl(_)}}function vO(n,e,t,r){const s=n._url(e);return yO(n,s,t,r||{})}async function yO(n,e,t,r){var s;t=Fh(t);const a={data:t},u=await VT(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const R=new er("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const O=Uh(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const _=new Promise((P,O)=>{f=P,m=O});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const P=new er("cancelled","Request was cancelled.");m(P)});const S=d.body.getReader(),E=_O(S,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const P=E.getReader();return{async next(){const{value:O,done:R}=await P.read();return{value:O,done:R}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function _O(n,e,t,r){const s=(u,d)=>{const f=u.match(uO);if(!f)return;const m=f[1];try{const _=JSON.parse(m);if("result"in _){e(nl(_.result));return}if("message"in _){d.enqueue(nl(_.message));return}if("error"in _){const S=Uh(0,_);d.error(S),t(S);return}}catch(_){if(_ instanceof er){d.error(_),t(_);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new er("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const E=new er("cancelled","Request was cancelled");u.error(E),t(E),await n.cancel();return}d+=a.decode(m,{stream:!0});const S=d.split(`
`);d=S.pop()||"";for(const E of S)E.trim()&&s(E.trim(),u);return f()}catch(m){const _=m instanceof er?m:Uh(0,null);u.error(_),t(_)}}},cancel(){return n.cancel()}})}const Bw="@firebase/functions",Hw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="auth-internal",EO="app-check-internal",SO="messaging-internal";function TO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(wO),u=t.getProvider(SO),d=t.getProvider(EO);return new hO(s,a,u,d,r)};Js(new os(Ig,e,"PUBLIC").setMultipleInstances(!0)),Vr(Bw,Hw,n),Vr(Bw,Hw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n=ed(),e=hm){const r=Pu(vt(n),Ig).getImmediate({identifier:e}),s=Am("functions");return s&&bO(r,...s),r}function bO(n,e,t){dO(vt(n),e,t)}function nr(n,e,t){return fO(vt(n),e)}TO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebasestorage.googleapis.com",LT="storageBucket",CO=120*1e3,AO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends oi{constructor(e,t,r=0){super(yp(e),`Firebase Storage: ${t} (${yp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function yp(n){return"storage/"+n}function bg(){const n="An unknown error occurred, please check the error payload for server response.";return new Ot(Nt.UNKNOWN,n)}function PO(n){return new Ot(Nt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function RO(n){return new Ot(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Nt.UNAUTHENTICATED,n)}function xO(){return new Ot(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NO(n){return new Ot(Nt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function OO(){return new Ot(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DO(){return new Ot(Nt.CANCELED,"User canceled the upload/download.")}function VO(n){return new Ot(Nt.INVALID_URL,"Invalid URL '"+n+"'.")}function MO(n){return new Ot(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function LO(){return new Ot(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LT+"' property when initializing the app?")}function jO(){return new Ot(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FO(){return new Ot(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UO(n){return new Ot(Nt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dm(n){return new Ot(Nt.INVALID_ARGUMENT,n)}function jT(){return new Ot(Nt.APP_DELETED,"The Firebase app was deleted.")}function zO(n){return new Ot(Nt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cu(n,e){return new Ot(Nt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Gl(n){throw new Ot(Nt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vr.makeFromUrl(e,t)}catch{return new vr(e,"")}if(r.path==="")return r;throw MO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(ee){ee.path_=decodeURIComponent(ee.path)}const _="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",P=new RegExp(`^https?://${S}/${_}/b/${s}/o${E}`,"i"),O={bucket:1,path:3},R=t===MT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",B=new RegExp(`^https?://${R}/${s}/${C}`,"i"),K=[{regex:d,indices:f,postModify:a},{regex:P,indices:O,postModify:m},{regex:B,indices:{bucket:1,path:2},postModify:m}];for(let ee=0;ee<K.length;ee++){const X=K[ee],se=X.regex.exec(e);if(se){const k=se[X.indices.bucket];let A=se[X.indices.path];A||(A=""),r=new vr(k,A),X.postModify(r);break}}if(r==null)throw VO(e);return r}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function _(...C){m||(m=!0,e.apply(null,C))}function S(C){s=setTimeout(()=>{s=null,n(P,f())},C)}function E(){a&&clearTimeout(a)}function P(C,...B){if(m){E();return}if(C){E(),_.call(null,C,...B);return}if(f()||u){E(),_.call(null,C,...B);return}r<64&&(r*=2);let K;d===1?(d=2,K=0):K=(r+Math.random())*1e3,S(K)}let O=!1;function R(C){O||(O=!0,E(),!m&&(s!==null?(C||(d=2),clearTimeout(s),S(0)):C||(d=1)))}return S(0),a=setTimeout(()=>{u=!0,R(!0)},t),R}function HO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){return n!==void 0}function qO(n){return typeof n=="object"&&!Array.isArray(n)}function Cg(n){return typeof n=="string"||n instanceof String}function Ww(n){return Ag()&&n instanceof Blob}function Ag(){return typeof Blob<"u"}function qw(n,e,t,r){if(r<e)throw dm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Fo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Fo||(Fo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,r,s,a,u,d,f,m,_,S,E=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=S,this.retry=E,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,R)=>{this.resolve_=O,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Fo.NO_ERROR,f=a.getStatus();if(!d||GO(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Fo.ABORT;r(!1,new Xc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new Xc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());WO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=bg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?jT():DO();u(f)}else{const f=OO();u(f)}};this.canceled_?t(!1,new Xc(!1,null,!0)):this.backoffId_=BO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function QO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function XO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function JO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ZO(n,e,t,r,s,a,u=!0,d=!1){const f=FT(n.urlParams),m=n.url+f,_=Object.assign({},n.headers);return YO(_,e),QO(_,t),XO(_,a),JO(_,r),new KO(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tD(...n){const e=eD();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ag())return new Blob(n);throw new Ot(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){if(typeof atob>"u")throw UO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,t){this.data=e,this.contentType=t||null}}function iD(n,e){switch(n){case Ti.RAW:return new _p(UT(e));case Ti.BASE64:case Ti.BASE64URL:return new _p(zT(n,e));case Ti.DATA_URL:return new _p(oD(e),aD(e))}throw bg()}function UT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sD(n){let e;try{e=decodeURIComponent(n)}catch{throw cu(Ti.DATA_URL,"Malformed data URL.")}return UT(e)}function zT(n,e){switch(n){case Ti.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw cu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ti.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw cu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rD(e)}catch(s){throw s.message.includes("polyfill")?s:cu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class $T{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw cu(Ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=lD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oD(n){const e=new $T(n);return e.base64?zT(Ti.BASE64,e.rest):sD(e.rest)}function aD(n){return new $T(n).contentType}function lD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){let r=0,s="";Ww(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ww(this.data_)){const r=this.data_,s=nD(r,e,t);return s===null?null:new Hs(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Hs(r,!0)}}static getBlob(...e){if(Ag()){const t=e.map(r=>r instanceof Hs?r.data_:r);return new Hs(tD.apply(null,t))}else{const t=e.map(u=>Cg(u)?iD(Ti.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new Hs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n){let e;try{e=JSON.parse(n)}catch{return null}return qO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function HT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n,e){return e}class Nn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||hD}}let Yc=null;function dD(n){return!Cg(n)||n.length<2?n:HT(n)}function WT(){if(Yc)return Yc;const n=[];n.push(new Nn("bucket")),n.push(new Nn("generation")),n.push(new Nn("metageneration")),n.push(new Nn("name","fullPath",!0));function e(a,u){return dD(u)}const t=new Nn("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new Nn("size");return s.xform=r,n.push(s),n.push(new Nn("timeCreated")),n.push(new Nn("updated")),n.push(new Nn("md5Hash",null,!0)),n.push(new Nn("cacheControl",null,!0)),n.push(new Nn("contentDisposition",null,!0)),n.push(new Nn("contentEncoding",null,!0)),n.push(new Nn("contentLanguage",null,!0)),n.push(new Nn("contentType",null,!0)),n.push(new Nn("metadata","customMetadata",!0)),Yc=n,Yc}function fD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new vr(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function pD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return fD(r,n),r}function qT(n,e,t){const r=BT(e);return r===null?null:pD(n,r,t)}function mD(n,e,t,r){const s=BT(e);if(s===null||!Cg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,S=n.fullPath,E="/b/"+u(_)+"/o/"+u(S),P=Id(E,t,r),O=FT({alt:"media",token:m});return P+O})[0]}function gD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Pg{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n){if(!n)throw bg()}function vD(n,e){function t(r,s){const a=qT(n,s,e);return GT(a!==null),a}return t}function yD(n,e){function t(r,s){const a=qT(n,s,e);return GT(a!==null),mD(a,s,n.host,n._protocol)}return t}function KT(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=xO():s=kO():t.getStatus()===402?s=RO(n.bucket):t.getStatus()===403?s=NO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function QT(n){const e=KT(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=PO(n.path)),a.serverResponse=s.serverResponse,a}return t}function _D(n,e,t){const r=e.fullServerUrl(),s=Id(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new Pg(s,a,yD(n,t),u);return d.errorHandler=QT(e),d}function wD(n,e){const t=e.fullServerUrl(),r=Id(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new Pg(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=QT(e),d}function ED(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function SD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ED(null,e)),r}function TD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let ee=0;ee<2;ee++)K=K+Math.random().toString().slice(2);return K}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=SD(e,r,s),_=gD(m,t),S="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,E=`\r
--`+f+"--",P=Hs.getBlob(S,r,E);if(P===null)throw jO();const O={name:m.fullPath},R=Id(a,n.host,n._protocol),C="POST",B=n.maxUploadRetryTime,Q=new Pg(R,C,vD(n,t),B);return Q.urlParams=O,Q.headers=u,Q.body=P.uploadData(),Q.errorHandler=KT(e),Q}class ID{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw Gl("cannot .send() more than once");if(ds(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bD extends ID{initXhr(){this.xhr_.responseType="text"}}function Rg(){return new bD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this._service=e,t instanceof vr?this._location=t:this._location=vr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bo(e,t)}get root(){const e=new vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HT(this._location.path)}get storage(){return this._service}get parent(){const e=uD(this._location.path);if(e===null)return null;const t=new vr(this._location.bucket,e);return new Bo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw zO(e)}}function CD(n,e,t){n._throwIfRoot("uploadBytes");const r=TD(n.storage,n._location,WT(),new Hs(e,!0),t);return n.storage.makeRequestWithTokens(r,Rg).then(s=>({metadata:s,ref:n}))}function AD(n){n._throwIfRoot("getDownloadURL");const e=_D(n.storage,n._location,WT());return n.storage.makeRequestWithTokens(e,Rg).then(t=>{if(t===null)throw FO();return t})}function PD(n){n._throwIfRoot("deleteObject");const e=wD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rg)}function RD(n,e){const t=cD(n._location.path,e),r=new vr(n._location.bucket,t);return new Bo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){return/^[A-Za-z]+:\/\//.test(n)}function xD(n,e){return new Bo(n,e)}function XT(n,e){if(n instanceof kg){const t=n;if(t._bucket==null)throw LO();const r=new Bo(t,t._bucket);return e!=null?XT(r,e):r}else return e!==void 0?RD(n,e):n}function ND(n,e){if(e&&kD(e)){if(n instanceof kg)return xD(n,e);throw dm("To use ref(service, url), the first argument must be a Storage instance.")}else return XT(n,e)}function Gw(n,e){const t=e==null?void 0:e[LT];return t==null?null:vr.makeFromBucketSpec(t,n)}function OD(n,e,t,r={}){n.host=`${e}:${t}`;const s=ds(e);s&&(Jh(`https://${n.host}/b`),Zh("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:uE(a,n.app.options.projectId))}class kg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=MT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CO,this._maxUploadRetryTime=AO,this._requests=new Set,s!=null?this._bucket=vr.makeFromBucketSpec(s,this._host):this._bucket=Gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vr.makeFromBucketSpec(this._url,e):this._bucket=Gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new $O(jT());{const u=ZO(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Kw="@firebase/storage",Qw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="storage";function DD(n,e,t){return n=vt(n),CD(n,e,t)}function VD(n){return n=vt(n),AD(n)}function MD(n){return n=vt(n),PD(n)}function JT(n,e){return n=vt(n),ND(n,e)}function LD(n=ed(),e){n=vt(n);const r=Pu(n,YT).getImmediate({identifier:e}),s=Am("storage");return s&&jD(r,...s),r}function jD(n,e,t,r={}){OD(n,e,t,r)}function FD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new kg(t,r,s,e,qo)}function UD(){Js(new os(YT,FD,"PUBLIC").setMultipleInstances(!0)),Vr(Kw,Qw,""),Vr(Kw,Qw,"esm2017")}UD();const zD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},bd=dE(zD),On=HR(bd),wr=UN(bd),ZT=LD(bd),rr=IO(bd,"us-central1");NP(On,jE);nr(rr,"bootstrapFirstAdmin");nr(rr,"setUserRole");const $D=nr(rr,"ensureCoachAccess"),BD=nr(rr,"acceptCoachTrial"),HD=nr(rr,"getCoachAccessState"),WD=nr(rr,"completeClientOnboarding"),qD=nr(rr,"listCoachesForSupervisor"),GD=nr(rr,"activateCoachSubscription"),KD=nr(rr,"renewCoachSubscription"),QD=nr(rr,"disableCoachSubscription"),XD=nr(rr,"deleteMyProfile"),YD=nr(rr,"updateMyCoachPhone"),JD=nr(rr,"getMyAssignedPlans"),ZD=nr(rr,"updateMyPlanExerciseWeight");async function e2(){return(await $D()).data}async function eI(){return(await BD()).data}async function Xw(){return(await HD()).data}async function t2(n){return(await WD(n)).data}async function n2(){return(await qD()).data}async function Yw(n){return(await GD({uid:n})).data}async function r2(n){return(await KD({uid:n})).data}async function i2(n){return(await QD({uid:n})).data}async function tI(){return(await XD()).data}async function s2(n){return(await YD({phone:n})).data}async function o2(){return(await JD()).data}async function a2(n,e,t){return(await ZD({planId:n,exerciseIndex:e,weightKg:t})).data}async function l2(){return On.currentUser?On.currentUser.getIdTokenResult(!0):null}async function nI(n){const e=n??On.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await nd(On),null}throw t}}async function u2(n){const e=n??On.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function rI(){return{createdAt:tl(),updatedAt:tl()}}function Fu(){return{updatedAt:tl()}}function fl(){var e;const n=(e=On.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function fm(n={}){const e=fl(),t=Ni(wr,"users",e);return await NT(t,{uid:e,...rI(),...n},{merge:!0}),t}async function Wa(n){const e=n??fl();return Tg(Ni(wr,"users",e))}async function c2(n){const e=n??fl(),t=um(Lh(wr,"users"),cm("assignedCoachId","==",e));return xT(t)}async function iI(n,e){return Tg(Ni(wr,"users",n,"private",e))}async function h2(n,e){await NT(Ni(wr,"users",n,"private","onboarding"),{...e,...Fu()},{merge:!0})}async function Jw(n){const e=fl();return await tO(Lh(wr,"plans"),{trainerId:e,clientId:n.clientId??"",status:n.status,title:n.title,warmup:n.warmup??"",description:n.description??"",kind:n.kind??"series_reps",notes:n.notes??"",assignedClientIds:n.assignedClientIds??[],exercises:n.exercises,clientNotes:"",lastViewedAt:null,...rI()})}async function sI(n,e){const t=e??fl(),r=n==="client"?um(Lh(wr,"plans"),cm("assignedClientIds","array-contains",t)):um(Lh(wr,"plans"),cm("trainerId","==",t));return xT(r)}async function d2(n,e){await Sd(Ni(wr,"plans",n),{assignedClientIds:OT(e),[`assignmentDetails.${e}`]:{mode:"permanent",weeks:null,expiresAt:null,assignedAt:tl()},...Fu()})}async function Zw(n,e,t,r){const s=r?new Date(r):new Date,a=Number.isNaN(s.getTime())?new Date:s,u=t&&t>0?{mode:"timed",weeks:t,startsAt:ct.fromDate(a),expiresAt:ct.fromDate(new Date(a.getTime()+t*7*24*60*60*1e3)),assignedAt:tl()}:{mode:"permanent",weeks:null,startsAt:null,expiresAt:null,assignedAt:tl()};await Sd(Ni(wr,"plans",n),{assignedClientIds:OT(e),[`assignmentDetails.${e}`]:u,...Fu()})}async function f2(n,e){await Sd(Ni(wr,"plans",n),{assignedClientIds:iO(e),[`assignmentDetails.${e}`]:rO(),...Fu()})}async function p2(n,e){await Sd(Ni(wr,"plans",n),{...e,...Fu()})}async function m2(n){const e=Ni(wr,"plans",n),t=await Tg(e);if(t.exists()){const r=t.data(),s=y2(r.exercises);await Promise.allSettled(s.map(a=>_2(a)))}await eO(e)}async function g2(n,e){const t=fl(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=v2(t,n,s);return await DD(a,e,{contentType:e.type||"application/octet-stream"}),VD(a)}function v2(n,e,t){return JT(ZT,`workout-media/${n}/${e}/${t}`)}function y2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;e0(r)&&e.add(r),e0(s)&&e.add(s)}return[...e]}function e0(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function _2(n){try{await MD(JT(ZT,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}function pl(){const[n,e]=V.useState(!0),[t,r]=V.useState(On.currentUser),[s,a]=V.useState(null),[u,d]=V.useState(!1);return V.useEffect(()=>VE(On,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await xg(f);const m=await nI(f);a(m),d(await u2(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await nd(On),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),V.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const pm=new es;pm.setCustomParameters({prompt:"select_account"});async function xg(n){(await Wa(n.uid)).exists()||await fm({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function t0(){try{const n=await JP(On,pm);return await xg(n.user),{redirected:!1,user:n.user}}catch(n){if(E2(n))return await iR(On,pm),{redirected:!0,user:null};throw n}}async function w2(){try{const n=await oR(On);return n!=null&&n.user&&await xg(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await nd(On),null;throw n}}async function yr(){return nd(On)}function E2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function oI(n){return n.replace(/[^\d]/g,"")}const S2="393405882404".trim(),aI=oI(S2);aI.length>6;function lI(n,e){const t=oI(e??aI),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function T2(n){return n.map(e=>({id:e.id,...e.data()}))}function Ct(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Or="bw_login_intent";function I2(n){return n==="trainer"||n==="admin"}function b2(){const{user:n,role:e}=pl(),t=bu(),{showError:r}=Xh(),[s,a]=V.useState(!1),[u,d]=V.useState(""),[f,m]=V.useState(!1),[_,S]=V.useState(!1),[E,P]=V.useState(null),[O,R]=V.useState(null),[C,B]=V.useState(!1),Q=V.useRef(0),K=V.useMemo(()=>lI("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);V.useEffect(()=>{async function M(){try{await w2()}catch(L){const x=Ct(L);d(x),r(x)}}M()},[r]);async function ee(M=10){if(!n)return!1;for(let L=0;L<M;L+=1){await l2();const x=await nI(n);if(I2(x))return!0;await new Promise(ze=>setTimeout(ze,500))}return!1}async function X(){if(!n)return;const M=++Q.current,L=()=>M!==Q.current||_;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await fm({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),L())return;const x=await e2();if(L())return;const De=(await Wa(n.uid)).data();if(!(typeof(De==null?void 0:De.phone)=="string"?De.phone.trim():"")){R({access:x,phone:""}),m(!1),d("");return}if(x.isExpired){if(await yr(),sessionStorage.removeItem(Or),L())return;P({mode:"expired",access:x});return}if(x.requiresTrialAcceptance){if(L())return;P({mode:"trial",access:x});return}const Ve=await ee();if(L())return;if(!Ve){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Or),t("/app/coach",{replace:!0})}catch(x){if(L())return;const ze=Ct(x);d(ze),r(ze)}finally{L()||m(!1)}}async function se(){if(!O||!n)return;const M=O.phone.replace(/[^\d+]/g,"").trim();if(M.length<8){d("Inserisci un numero WhatsApp valido.");return}B(!0),d("Salvo il tuo numero e completo la registrazione coach...");try{await fm({phone:M});const L=O.access;if(R(null),L.isExpired){await yr(),sessionStorage.removeItem(Or),P({mode:"expired",access:L});return}if(L.requiresTrialAcceptance){P({mode:"trial",access:L});return}if(!await ee()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Or),t("/app/coach",{replace:!0})}catch(L){const x=Ct(L);d(x),r(x)}finally{B(!1)}}V.useEffect(()=>{async function M(){if(!n){m(!1),_||d("");return}if(f||_||O)return;if(sessionStorage.getItem(Or)==="coach"){await X();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}M()},[n,e,f,_,O]),V.useEffect(()=>{_&&(n||(S(!1),t("/auth",{replace:!0})))},[_,n,t]);async function k(){Q.current+=1,S(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(Or),P(null),R(null);try{await yr()}catch(M){d(Ct(M)),S(!1)}}async function A(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const M=await eI();if(M.isExpired){await yr(),sessionStorage.removeItem(Or),P({mode:"expired",access:M});return}if(!await ee()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}P(null),sessionStorage.removeItem(Or),t("/app/coach",{replace:!0})}catch(M){const L=Ct(M);d(L),r(L)}finally{a(!1)}}async function N(){a(!0),d(""),P(null);try{if(sessionStorage.setItem(Or,"client"),(await t0()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(M){const L=Ct(M);d(L),r(L)}finally{a(!1)}}async function j(){a(!0),d(""),P(null);try{sessionStorage.setItem(Or,"coach");const M=await t0();if(M.redirected){d("Ti sto reindirizzando a Google...");return}if(!M.user){d("Accesso non completato. Riprova.");return}await X()}catch(M){const L=Ct(M);d(L),r(L)}finally{a(!1)}}return(E==null?void 0:E.mode)==="trial"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:s,onClick:()=>void A(),children:s?"Attivazione...":"Accetta e continua"})]})]})}):(E==null?void 0:E.mode)==="expired"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Periodo di prova terminato"}),g.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{P(null),sessionStorage.removeItem(Or)},children:"Torna all'accesso"}),g.jsx("a",{className:"btn btn-whatsapp btn-primary",href:K,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"})]})]})}):O?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Registrazione Coach"}),g.jsx("h1",{children:"Inserisci numero WhatsApp"}),g.jsx("p",{className:"hero-sub",children:"Ultimo step obbligatorio: questo numero verr condiviso ai clienti associati al tuo codice coach."}),g.jsxs("label",{children:["Numero di telefono / WhatsApp *",g.jsx("input",{type:"tel",placeholder:"Es. 3405882404",value:O.phone,onChange:M=>R(L=>L&&{...L,phone:M.target.value})})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:C,onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:C,onClick:()=>void se(),children:C?"Salvataggio...":"Continua"})]}),u?g.jsx("p",{className:"message",children:u}):null]})}):n&&e&&sessionStorage.getItem(Or)!=="coach"?g.jsx(ni,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Accedi con Google"}),g.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),g.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void N(),type:"button",children:s?"Connessione...":"Continua con Google"}),g.jsx("div",{className:"divider"}),g.jsx("h2",{children:"Sei un Coach?"}),g.jsx("p",{className:"hint",children:"Accedi o registrati come coach con Google."}),g.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void j(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach"}),u?g.jsx("p",{className:"message",children:u}):null,g.jsx(u1,{})]})})}function uI({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u,[m,_]=V.useState(!1),S=V.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),E=V.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),P=m?"__more__":a,O=m||!m&&E.some(C=>C.id===a);function R(C,B){const Q=(B==="mobile"?P:a)===C.id,K=B==="mobile"?C.mobileLabel??C.label:C.label;return g.jsxs("button",{className:`shell-tab shell-tab-${B} ${Q?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),B==="mobile"&&_(!1)},"aria-current":Q?"page":void 0,children:[C.icon?g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:C.icon}):null,g.jsx("span",{className:"shell-tab-label",children:K})]},`${B}-${C.id}`)}return g.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?g.jsxs("aside",{className:"shell-sidebar desktop-only",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h2",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hint",children:t}):null,g.jsx("nav",{className:"shell-sidebar-nav",children:s.map(C=>R(C,"desktop"))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void yr(),children:"Esci dal profilo"})]}):null,g.jsxs("section",{className:"shell-main",children:[g.jsxs("section",{className:"hero hero-compact",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h1",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hero-sub",children:t}):null,r,f?null:g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void yr(),children:"Esci dal profilo"})]}),g.jsx("section",{className:"stack app-stack",children:d})]}),g.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?S.map(C=>R(C,"mobile")):g.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Home"})]}),E.length>0?g.jsxs("button",{className:`shell-tab shell-tab-mobile ${O||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>_(C=>!C),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,g.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void yr(),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&E.length>0?g.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",onClick:C=>C.currentTarget===C.target&&_(!1),children:g.jsxs("article",{className:"card mobile-more-card",onClick:C=>C.stopPropagation(),children:[g.jsx("h3",{children:"Altre sezioni"}),g.jsx("div",{className:"mobile-more-list",children:E.map(C=>g.jsxs("button",{className:`step-tab ${a===C.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),_(!1)},children:[C.icon?`${C.icon} `:"",C.label]},`more-${C.id}`))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>_(!1),children:"Chiudi"})]})}):null]})}function wp(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Ep(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function n0(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Sp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number((typeof t.weight=="string"?t.weight:"").replace(/[^\d.-]/g,"")),s=typeof t.advancedMethod=="string"?t.advancedMethod.trim():"",a=s==="rest_pause"||s==="drop_set"?s:"";return{name:typeof t.name=="string"?t.name:"",notes:typeof t.notes=="string"?t.notes:"",advancedMethod:a,advancedMethodNotes:typeof t.advancedMethodNotes=="string"?t.advancedMethodNotes:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,workValue:typeof t.workValue=="number"?t.workValue:Number(t.workValue??t.reps??0)||0,weightKg:typeof t.weightKg=="number"?t.weightKg:Number(t.weightKg??r??0)||0,restSeconds:typeof t.restSeconds=="number"?t.restSeconds:Number(t.restSeconds??0)||0,mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function r0(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function C2(){const{role:n,user:e}=pl(),t=bu(),{showError:r,showSuccess:s}=Xh(),[a,u]=V.useState([]),[d,f]=V.useState(!1),[m,_]=V.useState(!0),[S,E]=V.useState(null),[P,O]=V.useState(!1),[R,C]=V.useState(null),[B,Q]=V.useState("plan"),[K,ee]=V.useState(""),[X,se]=V.useState(!1),[k,A]=V.useState(!1),[N,j]=V.useState(""),[M,L]=V.useState({}),[x,ze]=V.useState(""),De="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";V.useEffect(()=>{async function Z(){if(e)try{const Ie=(await Wa(e.uid)).data();if(!(Ie!=null&&Ie.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{_(!1)}}Z()},[e,t]);async function $e(){f(!0);try{const Z=(e==null?void 0:e.uid)??"";if(!Z){u([]),ee("");return}const ie=Z?await Wa(Z):null,Ie=(ie==null?void 0:ie.data())??{},Te=Z?await iI(Z,"onboarding"):null;C((Te==null?void 0:Te.data())??null);let je=r0(Ie.assignedCoachPhone??"");if(!je&&Ie.assignedCoachId)try{const rt=(await Wa(Ie.assignedCoachId)).data();je=r0(typeof(rt==null?void 0:rt.phone)=="string"?rt.phone:"")}catch{je=""}j(je);const Ye=new Map;let St=!1;try{const nt=await o2();if(nt!=null&&nt.ok&&Array.isArray(nt.plans))for(const rt of nt.plans)Ye.set(rt.id,rt)}catch{St=!0}if(St)try{const nt=await sI("client",Z);for(const rt of T2(nt.docs))Ye.set(rt.id,rt)}catch(nt){r(`Errore caricamento schede: ${Ct(nt)}`)}const Pt=Array.from(Ye.values()).sort((nt,rt)=>{const fn=new Date(String(nt.updatedAt??"")).getTime()||0;return(new Date(String(rt.updatedAt??"")).getTime()||0)-fn});u(Pt),Pt.length>0?ee(nt=>nt&&Pt.some(rt=>rt.id===nt)?nt:Pt[0].id):ee("")}catch(Z){r(Ct(Z))}finally{f(!1)}}V.useEffect(()=>{e&&(n==="client"||n===null)&&$e()},[n,e==null?void 0:e.uid]);async function Ve(){A(!0);try{await tI(),await yr().catch(()=>{}),t("/auth",{replace:!0})}catch(Z){r(Ct(Z))}finally{A(!1),se(!1)}}function le(Z,ie){E({url:Z,label:ie}),O(Ep(Z))}const de=a.find(Z=>Z.id===K)??a[0],he=Sp(de==null?void 0:de.exercises),$=N.length>6,U=$?lI(De,N):"#",pe=[{label:"Nome e cognome",value:R==null?void 0:R.fullName},{label:"E-mail",value:(R==null?void 0:R.email)??(e==null?void 0:e.email)},{label:"Telefono",value:R==null?void 0:R.phone},{label:"Et",value:R==null?void 0:R.age},{label:"Sesso",value:R==null?void 0:R.sex},{label:"Altezza",value:R!=null&&R.heightCm?`${R.heightCm} cm`:""},{label:"Peso",value:R!=null&&R.weightKg?`${R.weightKg} kg`:""},{label:"Obiettivo",value:R==null?void 0:R.objectivePrimary}].filter(Z=>(Z.value??"").toString().trim().length>0);V.useEffect(()=>{const Z={};for(const ie of a)Sp(ie.exercises).forEach((Te,je)=>{Z[`${ie.id}:${je}`]=String(Te.weightKg||0)});L(Z)},[a]);async function Ce(Z,ie,Ie){const Te=`${Z}:${ie}`,je=(M[Te]??String(Ie)).trim(),Ye=Number(je);if(!Number.isFinite(Ye)||Ye<0){r("Inserisci un peso valido (numero >= 0).");return}ze(Te);try{await a2(Z,ie,Ye),u(St=>St.map(Pt=>{if(Pt.id!==Z)return Pt;const rt=Sp(Pt.exercises).map((fn,Tt)=>Tt===ie?{...fn,weightKg:Ye}:fn);return{...Pt,exercises:rt}})),L(St=>({...St,[Te]:String(Ye)})),s("Peso aggiornato.")}catch(St){r(Ct(St))}finally{ze("")}}return e?m?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Prepariamo la tua area"}),g.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):g.jsxs(uI,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:B,onSectionChange:Z=>Q(Z),headerAction:g.jsx("div",{className:"mobile-only",children:g.jsx("a",{className:`btn btn-whatsapp btn-block ${$?"":"btn-disabled"}`.trim(),href:U,onClick:Z=>{$||Z.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[B==="plan"?g.jsxs(g.Fragment,{children:[g.jsxs("article",{className:"card desktop-only",children:[g.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),g.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${$?"":"btn-disabled"}`.trim(),href:U,onClick:Z=>{$||Z.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),$?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."})]}),g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"La tua scheda tecnica"}),de?g.jsxs(g.Fragment,{children:[a.length>1?g.jsxs("label",{children:["Scegli scheda",g.jsx("select",{value:de.id,onChange:Z=>ee(Z.target.value),children:a.map(Z=>g.jsx("option",{value:Z.id,children:Z.title||"Scheda senza titolo"},Z.id))})]}):null,g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Programma attivo"}),g.jsx("h3",{children:de.title})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:de.kind==="circuit"?"Circuito":"Serie e reps"})]}),(de.warmup??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",de.warmup]})}):null,(de.notes??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",de.notes]})}):null,g.jsx("div",{className:"exercise-grid",children:he.map((Z,ie)=>g.jsxs("article",{className:"exercise-card",children:[g.jsx("p",{className:"exercise-name",children:Z.name||`Esercizio ${ie+1}`}),g.jsxs("div",{className:"exercise-meta",children:[de.kind==="circuit"?g.jsxs("span",{children:[Z.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[Z.sets??"-"," serie"]}),g.jsxs("span",{children:[Z.reps||"-"," reps"]})]}),g.jsxs("span",{children:[Z.weightKg||0," kg"]}),g.jsxs("span",{children:[Z.restSeconds||0," sec recupero"]})]}),Z.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",Z.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,Z.advancedMethod&&Z.advancedMethodNotes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",Z.advancedMethodNotes]}):null,g.jsxs("div",{className:"exercise-weight-edit-row",children:[g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:M[`${de.id}:${ie}`]??String(Z.weightKg||0),onChange:Ie=>L(Te=>({...Te,[`${de.id}:${ie}`]:Ie.target.value}))})]}),g.jsx("button",{className:"btn",type:"button",disabled:x===`${de.id}:${ie}`,onClick:()=>void Ce(de.id,ie,Z.weightKg||0),children:x===`${de.id}:${ie}`?"Salvataggio...":"Salva peso"})]}),Z.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",Z.notes]}):null,Z.mediaUrl?g.jsx("button",{className:"btn-link",type:"button",onClick:()=>le(Z.mediaUrl,Z.name||`Esercizio ${ie+1}`),children:wp(Z.mediaUrl)||n0(Z.mediaUrl)?"Apri video":Ep(Z.mediaUrl)?"Apri immagine":"Apri link"}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${ie}`))})]}):g.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,B==="profile"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Profilo e anagrafica"}),pe.length>0?g.jsx("div",{className:"client-info-block",children:pe.map(Z=>g.jsxs("p",{className:"hint",children:[g.jsxs("strong",{children:[Z.label,":"]})," ",Z.value]},Z.label))}):g.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${$?"":"btn-disabled"}`.trim(),href:U,onClick:Z=>{$||Z.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),$?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo perderai tutti i dati associati al tuo account, in linea con le policy aziendali."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>se(!0),children:"Elimina il mio profilo"})]}):null,d?g.jsx("section",{className:"modal-overlay",role:"status","aria-live":"polite","aria-label":"Caricamento in corso",children:g.jsxs("article",{className:"card loading-overlay-card",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("p",{className:"hint",children:"Caricamento scheda..."})]})}):null,S?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:Z=>{Z.currentTarget===Z.target&&(E(null),O(!1))},children:g.jsxs("article",{className:"card modal-card",onClick:Z=>Z.stopPropagation(),children:[g.jsx("h2",{children:S.label}),wp(S.url)?g.jsx("iframe",{title:S.label,src:wp(S.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Ep(S.url)?g.jsxs(g.Fragment,{children:[P?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:S.url,alt:S.label,className:"media-frame media-image",style:{display:P?"none":"block"},onLoad:()=>O(!1),onError:()=>O(!1)})]}):n0(S.url)?g.jsx("video",{src:S.url,controls:!0,className:"media-frame"}):g.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",g.jsx("a",{href:S.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{E(null),O(!1)},children:"Chiudi"})]})}):null,X?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:Z=>Z.currentTarget===Z.target&&se(!1),children:g.jsxs("article",{className:"card modal-card",onClick:Z=>Z.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente account, anagrafica, scheda e dati collegati."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:k,onClick:()=>se(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:k,onClick:()=>void Ve(),children:k?"Eliminazione...":"Conferma eliminazione"})]})]})}):null]}):g.jsx(ni,{to:"/auth",replace:!0})}function Ho(n){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(n)}function A2(n,e){if(Ho(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ho(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cI(n){var e=A2(n,"string");return Ho(e)=="symbol"?e:e+""}function nu(n,e,t){return(e=cI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function xe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i0(Object(t),!0).forEach(function(r){nu(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function P2(n){if(Array.isArray(n))return n}function R2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(_){m=!0,s=_}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function mm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function hI(n,e){if(n){if(typeof n=="string")return mm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mm(n,e):void 0}}function k2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function is(n,e){return P2(n)||R2(n,e)||hI(n,e)||k2()}function x2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function fs(n,e){if(n==null)return{};var t,r,s=x2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var N2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function O2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,_=n.onInputChange,S=n.onMenuClose,E=n.onMenuOpen,P=n.value,O=fs(n,N2),R=V.useState(d!==void 0?d:t),C=is(R,2),B=C[0],Q=C[1],K=V.useState(f!==void 0?f:s),ee=is(K,2),X=ee[0],se=ee[1],k=V.useState(P!==void 0?P:u),A=is(k,2),N=A[0],j=A[1],M=V.useCallback(function(le,de){typeof m=="function"&&m(le,de),j(le)},[m]),L=V.useCallback(function(le,de){var he;typeof _=="function"&&(he=_(le,de)),Q(he!==void 0?he:le)},[_]),x=V.useCallback(function(){typeof E=="function"&&E(),se(!0)},[E]),ze=V.useCallback(function(){typeof S=="function"&&S(),se(!1)},[S]),De=d!==void 0?d:B,$e=f!==void 0?f:X,Ve=P!==void 0?P:N;return xe(xe({},O),{},{inputValue:De,menuIsOpen:$e,onChange:M,onInputChange:L,onMenuClose:ze,onMenuOpen:x,value:Ve})}function Ne(){return Ne=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ne.apply(null,arguments)}function D2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function s0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,cI(r.key),r)}}function V2(n,e,t){return e&&s0(n.prototype,e),t&&s0(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function gm(n,e){return gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},gm(n,e)}function M2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gm(n,e)}function zh(n){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zh(n)}function dI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dI=function(){return!!n})()}function L2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function j2(n,e){if(e&&(Ho(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L2(n)}function F2(n){var e=dI();return function(){var t,r=zh(n);if(e){var s=zh(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return j2(this,t)}}function U2(n){if(Array.isArray(n))return mm(n)}function z2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ng(n){return U2(n)||z2(n)||hI(n)||$2()}function B2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function H2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var W2=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(H2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=B2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),Sn="-ms-",$h="-moz-",et="-webkit-",fI="comm",Og="rule",Dg="decl",q2="@import",pI="@keyframes",G2="@layer",K2=Math.abs,Cd=String.fromCharCode,Q2=Object.assign;function X2(n,e){return cn(n,0)^45?(((e<<2^cn(n,0))<<2^cn(n,1))<<2^cn(n,2))<<2^cn(n,3):0}function mI(n){return n.trim()}function Y2(n,e){return(n=e.exec(n))?n[0]:n}function tt(n,e,t){return n.replace(e,t)}function vm(n,e){return n.indexOf(e)}function cn(n,e){return n.charCodeAt(e)|0}function wu(n,e,t){return n.slice(e,t)}function Ei(n){return n.length}function Vg(n){return n.length}function Jc(n,e){return e.push(n),n}function J2(n,e){return n.map(e).join("")}var Ad=1,rl=1,gI=0,tr=0,Bt=0,ml="";function Pd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:Ad,column:rl,length:u,return:""}}function Kl(n,e){return Q2(Pd("",null,null,"",null,null,0),n,{length:-n.length},e)}function Z2(){return Bt}function eV(){return Bt=tr>0?cn(ml,--tr):0,rl--,Bt===10&&(rl=1,Ad--),Bt}function _r(){return Bt=tr<gI?cn(ml,tr++):0,rl++,Bt===10&&(rl=1,Ad++),Bt}function Ri(){return cn(ml,tr)}function mh(){return tr}function Uu(n,e){return wu(ml,n,e)}function Eu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vI(n){return Ad=rl=1,gI=Ei(ml=n),tr=0,[]}function yI(n){return ml="",n}function gh(n){return mI(Uu(tr-1,ym(n===91?n+2:n===40?n+1:n)))}function tV(n){for(;(Bt=Ri())&&Bt<33;)_r();return Eu(n)>2||Eu(Bt)>3?"":" "}function nV(n,e){for(;--e&&_r()&&!(Bt<48||Bt>102||Bt>57&&Bt<65||Bt>70&&Bt<97););return Uu(n,mh()+(e<6&&Ri()==32&&_r()==32))}function ym(n){for(;_r();)switch(Bt){case n:return tr;case 34:case 39:n!==34&&n!==39&&ym(Bt);break;case 40:n===41&&ym(n);break;case 92:_r();break}return tr}function rV(n,e){for(;_r()&&n+Bt!==57;)if(n+Bt===84&&Ri()===47)break;return"/*"+Uu(e,tr-1)+"*"+Cd(n===47?n:_r())}function iV(n){for(;!Eu(Ri());)_r();return Uu(n,tr)}function sV(n){return yI(vh("",null,null,null,[""],n=vI(n),0,[0],n))}function vh(n,e,t,r,s,a,u,d,f){for(var m=0,_=0,S=u,E=0,P=0,O=0,R=1,C=1,B=1,Q=0,K="",ee=s,X=a,se=r,k=K;C;)switch(O=Q,Q=_r()){case 40:if(O!=108&&cn(k,S-1)==58){vm(k+=tt(gh(Q),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:k+=gh(Q);break;case 9:case 10:case 13:case 32:k+=tV(O);break;case 92:k+=nV(mh()-1,7);continue;case 47:switch(Ri()){case 42:case 47:Jc(oV(rV(_r(),mh()),e,t),f);break;default:k+="/"}break;case 123*R:d[m++]=Ei(k)*B;case 125*R:case 59:case 0:switch(Q){case 0:case 125:C=0;case 59+_:B==-1&&(k=tt(k,/\f/g,"")),P>0&&Ei(k)-S&&Jc(P>32?a0(k+";",r,t,S-1):a0(tt(k," ","")+";",r,t,S-2),f);break;case 59:k+=";";default:if(Jc(se=o0(k,e,t,m,_,s,d,K,ee=[],X=[],S),a),Q===123)if(_===0)vh(k,e,se,se,ee,a,S,d,X);else switch(E===99&&cn(k,3)===110?100:E){case 100:case 108:case 109:case 115:vh(n,se,se,r&&Jc(o0(n,se,se,0,0,s,d,K,s,ee=[],S),X),s,X,S,d,r?ee:X);break;default:vh(k,se,se,se,[""],X,0,d,X)}}m=_=P=0,R=B=1,K=k="",S=u;break;case 58:S=1+Ei(k),P=O;default:if(R<1){if(Q==123)--R;else if(Q==125&&R++==0&&eV()==125)continue}switch(k+=Cd(Q),Q*R){case 38:B=_>0?1:(k+="\f",-1);break;case 44:d[m++]=(Ei(k)-1)*B,B=1;break;case 64:Ri()===45&&(k+=gh(_r())),E=Ri(),_=S=Ei(K=k+=iV(mh())),Q++;break;case 45:O===45&&Ei(k)==2&&(R=0)}}return a}function o0(n,e,t,r,s,a,u,d,f,m,_){for(var S=s-1,E=s===0?a:[""],P=Vg(E),O=0,R=0,C=0;O<r;++O)for(var B=0,Q=wu(n,S+1,S=K2(R=u[O])),K=n;B<P;++B)(K=mI(R>0?E[B]+" "+Q:tt(Q,/&\f/g,E[B])))&&(f[C++]=K);return Pd(n,e,t,s===0?Og:d,f,m,_)}function oV(n,e,t){return Pd(n,e,t,fI,Cd(Z2()),wu(n,2,-2),0)}function a0(n,e,t,r){return Pd(n,e,t,Dg,wu(n,0,r),wu(n,r+1,-1),r)}function qa(n,e){for(var t="",r=Vg(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function aV(n,e,t,r){switch(n.type){case G2:if(n.children.length)break;case q2:case Dg:return n.return=n.return||n.value;case fI:return"";case pI:return n.return=n.value+"{"+qa(n.children,r)+"}";case Og:n.value=n.props.join(",")}return Ei(t=qa(n.children,r))?n.return=n.value+"{"+t+"}":""}function lV(n){var e=Vg(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function uV(n){return function(e){e.root||(e=e.return)&&n(e)}}function cV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var hV=function(e,t,r){for(var s=0,a=0;s=a,a=Ri(),s===38&&a===12&&(t[r]=1),!Eu(a);)_r();return Uu(e,tr)},dV=function(e,t){var r=-1,s=44;do switch(Eu(s)){case 0:s===38&&Ri()===12&&(t[r]=1),e[r]+=hV(tr-1,t,r);break;case 2:e[r]+=gh(s);break;case 4:if(s===44){e[++r]=Ri()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Cd(s)}while(s=_r());return e},fV=function(e,t){return yI(dV(vI(e),t))},l0=new WeakMap,pV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!l0.get(r))&&!s){l0.set(e,!0);for(var a=[],u=fV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var _=0;_<d.length;_++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[_]):d[_]+" "+u[f]}}},mV=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function _I(n,e){switch(X2(n,e)){case 5103:return et+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return et+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return et+n+$h+n+Sn+n+n;case 6828:case 4268:return et+n+Sn+n+n;case 6165:return et+n+Sn+"flex-"+n+n;case 5187:return et+n+tt(n,/(\w+).+(:[^]+)/,et+"box-$1$2"+Sn+"flex-$1$2")+n;case 5443:return et+n+Sn+"flex-item-"+tt(n,/flex-|-self/,"")+n;case 4675:return et+n+Sn+"flex-line-pack"+tt(n,/align-content|flex-|-self/,"")+n;case 5548:return et+n+Sn+tt(n,"shrink","negative")+n;case 5292:return et+n+Sn+tt(n,"basis","preferred-size")+n;case 6060:return et+"box-"+tt(n,"-grow","")+et+n+Sn+tt(n,"grow","positive")+n;case 4554:return et+tt(n,/([^-])(transform)/g,"$1"+et+"$2")+n;case 6187:return tt(tt(tt(n,/(zoom-|grab)/,et+"$1"),/(image-set)/,et+"$1"),n,"")+n;case 5495:case 3959:return tt(n,/(image-set\([^]*)/,et+"$1$`$1");case 4968:return tt(tt(n,/(.+:)(flex-)?(.*)/,et+"box-pack:$3"+Sn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+et+n+n;case 4095:case 3583:case 4068:case 2532:return tt(n,/(.+)-inline(.+)/,et+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ei(n)-1-e>6)switch(cn(n,e+1)){case 109:if(cn(n,e+4)!==45)break;case 102:return tt(n,/(.+:)(.+)-([^]+)/,"$1"+et+"$2-$3$1"+$h+(cn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~vm(n,"stretch")?_I(tt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(cn(n,e+1)!==115)break;case 6444:switch(cn(n,Ei(n)-3-(~vm(n,"!important")&&10))){case 107:return tt(n,":",":"+et)+n;case 101:return tt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+et+(cn(n,14)===45?"inline-":"")+"box$3$1"+et+"$2$3$1"+Sn+"$2box$3")+n}break;case 5936:switch(cn(n,e+11)){case 114:return et+n+Sn+tt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return et+n+Sn+tt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return et+n+Sn+tt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return et+n+Sn+n+n}return n}var gV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Dg:e.return=_I(e.value,e.length);break;case pI:return qa([Kl(e,{value:tt(e.value,"@","@"+et)})],s);case Og:if(e.length)return J2(e.props,function(a){switch(Y2(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qa([Kl(e,{props:[tt(a,/:(read-\w+)/,":"+$h+"$1")]})],s);case"::placeholder":return qa([Kl(e,{props:[tt(a,/:(plac\w+)/,":"+et+"input-$1")]}),Kl(e,{props:[tt(a,/:(plac\w+)/,":"+$h+"$1")]}),Kl(e,{props:[tt(a,/:(plac\w+)/,Sn+"input-$1")]})],s)}return""})}},vV=[gV],yV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(R){var C=R.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var s=e.stylisPlugins||vV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(R){for(var C=R.getAttribute("data-emotion").split(" "),B=1;B<C.length;B++)a[C[B]]=!0;d.push(R)});var f,m=[pV,mV];{var _,S=[aV,uV(function(R){_.insert(R)})],E=lV(m.concat(s,S)),P=function(C){return qa(sV(C),E)};f=function(C,B,Q,K){_=Q,P(C?C+"{"+B.styles+"}":B.styles),K&&(O.inserted[B.name]=!0)}}var O={key:t,sheet:new W2({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return O.sheet.hydrate(d),O},Tp={exports:{}},it={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function _V(){if(u0)return it;u0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,S=n?Symbol.for("react.suspense"):60113,E=n?Symbol.for("react.suspense_list"):60120,P=n?Symbol.for("react.memo"):60115,O=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,C=n?Symbol.for("react.fundamental"):60117,B=n?Symbol.for("react.responder"):60118,Q=n?Symbol.for("react.scope"):60119;function K(X){if(typeof X=="object"&&X!==null){var se=X.$$typeof;switch(se){case e:switch(X=X.type,X){case f:case m:case r:case a:case s:case S:return X;default:switch(X=X&&X.$$typeof,X){case d:case _:case O:case P:case u:return X;default:return se}}case t:return se}}}function ee(X){return K(X)===m}return it.AsyncMode=f,it.ConcurrentMode=m,it.ContextConsumer=d,it.ContextProvider=u,it.Element=e,it.ForwardRef=_,it.Fragment=r,it.Lazy=O,it.Memo=P,it.Portal=t,it.Profiler=a,it.StrictMode=s,it.Suspense=S,it.isAsyncMode=function(X){return ee(X)||K(X)===f},it.isConcurrentMode=ee,it.isContextConsumer=function(X){return K(X)===d},it.isContextProvider=function(X){return K(X)===u},it.isElement=function(X){return typeof X=="object"&&X!==null&&X.$$typeof===e},it.isForwardRef=function(X){return K(X)===_},it.isFragment=function(X){return K(X)===r},it.isLazy=function(X){return K(X)===O},it.isMemo=function(X){return K(X)===P},it.isPortal=function(X){return K(X)===t},it.isProfiler=function(X){return K(X)===a},it.isStrictMode=function(X){return K(X)===s},it.isSuspense=function(X){return K(X)===S},it.isValidElementType=function(X){return typeof X=="string"||typeof X=="function"||X===r||X===m||X===a||X===s||X===S||X===E||typeof X=="object"&&X!==null&&(X.$$typeof===O||X.$$typeof===P||X.$$typeof===u||X.$$typeof===d||X.$$typeof===_||X.$$typeof===C||X.$$typeof===B||X.$$typeof===Q||X.$$typeof===R)},it.typeOf=K,it}var c0;function wV(){return c0||(c0=1,Tp.exports=_V()),Tp.exports}var Ip,h0;function EV(){if(h0)return Ip;h0=1;var n=wV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(O){return n.isMemo(O)?s:a[O.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf,E=Object.prototype;function P(O,R,C){if(typeof R!="string"){if(E){var B=S(R);B&&B!==E&&P(O,B,C)}var Q=f(R);m&&(Q=Q.concat(m(R)));for(var K=u(O),ee=u(R),X=0;X<Q.length;++X){var se=Q[X];if(!t[se]&&!(C&&C[se])&&!(ee&&ee[se])&&!(K&&K[se])){var k=_(R,se);try{d(O,se,k)}catch{}}}}return O}return Ip=P,Ip}EV();var SV=!0;function TV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var wI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||SV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},IV=function(e,t,r){wI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function bV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var CV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AV=/[A-Z]|^ms/g,PV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,EI=function(e){return e.charCodeAt(1)===45},d0=function(e){return e!=null&&typeof e!="boolean"},bp=cV(function(n){return EI(n)?n:n.replace(AV,"-$&").toLowerCase()}),f0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(PV,function(r,s,a){return Si={name:s,styles:a,next:Si},s})}return CV[e]!==1&&!EI(e)&&typeof t=="number"&&t!==0?t+"px":t};function Su(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Si={name:s.name,styles:s.styles,next:Si},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)Si={name:u.name,styles:u.styles,next:Si},u=u.next;var d=a.styles+";";return d}return RV(n,e,t)}case"function":{if(n!==void 0){var f=Si,m=t(n);return Si=f,Su(n,e,m)}break}}var _=t;return _}function RV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=Su(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;d0(d)&&(r+=bp(a)+":"+f0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)d0(u[f])&&(r+=bp(a)+":"+f0(a,u[f])+";");else{var m=Su(n,e,u);switch(a){case"animation":case"animationName":{r+=bp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var p0=/label:\s*([^\s;{]+)\s*(;|$)/g,Si;function SI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Si=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=Su(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=Su(t,e,n[d]),r){var f=a;s+=f[d]}p0.lastIndex=0;for(var m="",_;(_=p0.exec(s))!==null;)m+="-"+_[1];var S=bV(s)+m;return{name:S,styles:s,next:Si}}var kV=function(e){return e()},xV=Dp.useInsertionEffect?Dp.useInsertionEffect:!1,NV=xV||kV,TI=V.createContext(typeof HTMLElement<"u"?yV({key:"css"}):null);TI.Provider;var OV=function(e){return V.forwardRef(function(t,r){var s=V.useContext(TI);return e(t,s,r)})},DV=V.createContext({}),Mg={}.hasOwnProperty,_m="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",VV=function(e,t){var r={};for(var s in t)Mg.call(t,s)&&(r[s]=t[s]);return r[_m]=e,r},MV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return wI(t,r,s),NV(function(){return IV(t,r,s)}),null},LV=OV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[_m],a=[r],u="";typeof n.className=="string"?u=TV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=SI(a,void 0,V.useContext(DV));u+=e.key+"-"+d.name;var f={};for(var m in n)Mg.call(n,m)&&m!=="css"&&m!==_m&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),V.createElement(V.Fragment,null,V.createElement(MV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),V.createElement(s,f))}),jV=LV,Ae=function(e,t){var r=arguments;if(t==null||!Mg.call(t,"css"))return V.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=jV,a[1]=VV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return V.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Ae||(Ae={}));function Lg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return SI(e)}function FV(){var n=Lg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function UV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const zV=Math.min,$V=Math.max,Bh=Math.round,Zc=Math.floor,Hh=n=>({x:n,y:n});function BV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Rd(){return typeof window<"u"}function II(n){return CI(n)?(n.nodeName||"").toLowerCase():"#document"}function hs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function bI(n){var e;return(e=(CI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function CI(n){return Rd()?n instanceof Node||n instanceof hs(n).Node:!1}function HV(n){return Rd()?n instanceof Element||n instanceof hs(n).Element:!1}function jg(n){return Rd()?n instanceof HTMLElement||n instanceof hs(n).HTMLElement:!1}function m0(n){return!Rd()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof hs(n).ShadowRoot}const WV=new Set(["inline","contents"]);function AI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Fg(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!WV.has(s)}function qV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const GV=new Set(["html","body","#document"]);function KV(n){return GV.has(II(n))}function Fg(n){return hs(n).getComputedStyle(n)}function QV(n){if(II(n)==="html")return n;const e=n.assignedSlot||n.parentNode||m0(n)&&n.host||bI(n);return m0(e)?e.host:e}function PI(n){const e=QV(n);return KV(e)?n.ownerDocument?n.ownerDocument.body:n.body:jg(e)&&AI(e)?e:PI(e)}function Wh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=PI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=hs(s);if(a){const d=wm(u);return e.concat(u,u.visualViewport||[],AI(s)?s:[],d&&t?Wh(d):[])}return e.concat(s,Wh(s,[],t))}function wm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function XV(n){const e=Fg(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=jg(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Bh(t)!==a||Bh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function Ug(n){return HV(n)?n:n.contextElement}function g0(n){const e=Ug(n);if(!jg(e))return Hh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=XV(e);let u=(a?Bh(t.width):t.width)/r,d=(a?Bh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const YV=Hh(0);function JV(n){const e=hs(n);return!qV()||!e.visualViewport?YV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ZV(n,e,t){return!1}function v0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=Ug(n);let u=Hh(1);e&&(u=g0(n));const d=ZV()?JV(a):Hh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,_=s.width/u.x,S=s.height/u.y;if(a){const E=hs(a),P=r;let O=E,R=wm(O);for(;R&&r&&P!==O;){const C=g0(R),B=R.getBoundingClientRect(),Q=Fg(R),K=B.left+(R.clientLeft+parseFloat(Q.paddingLeft))*C.x,ee=B.top+(R.clientTop+parseFloat(Q.paddingTop))*C.y;f*=C.x,m*=C.y,_*=C.x,S*=C.y,f+=K,m+=ee,O=hs(R),R=wm(O)}}return BV({width:_,height:S,x:f,y:m})}function RI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function eM(n,e){let t=null,r;const s=bI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:_,top:S,width:E,height:P}=m;if(d||e(),!E||!P)return;const O=Zc(S),R=Zc(s.clientWidth-(_+E)),C=Zc(s.clientHeight-(S+P)),B=Zc(_),K={rootMargin:-O+"px "+-R+"px "+-C+"px "+-B+"px",threshold:$V(0,zV(1,f))||1};let ee=!0;function X(se){const k=se[0].intersectionRatio;if(k!==f){if(!ee)return u();k?u(!1,k):r=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!RI(m,n.getBoundingClientRect())&&u(),ee=!1}try{t=new IntersectionObserver(X,{...K,root:s.ownerDocument})}catch{t=new IntersectionObserver(X,K)}t.observe(n)}return u(!0),a}function tM(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Ug(n),_=s||a?[...m?Wh(m):[],...Wh(e)]:[];_.forEach(B=>{s&&B.addEventListener("scroll",t,{passive:!0}),a&&B.addEventListener("resize",t)});const S=m&&d?eM(m,t):null;let E=-1,P=null;u&&(P=new ResizeObserver(B=>{let[Q]=B;Q&&Q.target===m&&P&&(P.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var K;(K=P)==null||K.observe(e)})),t()}),m&&!f&&P.observe(m),P.observe(e));let O,R=f?v0(n):null;f&&C();function C(){const B=v0(n);R&&!RI(R,B)&&t(),R=B,O=requestAnimationFrame(C)}return t(),()=>{var B;_.forEach(Q=>{s&&Q.removeEventListener("scroll",t),a&&Q.removeEventListener("resize",t)}),S==null||S(),(B=P)==null||B.disconnect(),P=null,f&&cancelAnimationFrame(O)}}var Em=V.useLayoutEffect,nM=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],qh=function(){};function rM(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function iM(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(rM(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var y0=function(e){return fM(e)?e.filter(Boolean):Ho(e)==="object"&&e!==null?[e]:[]},kI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=fs(e,nM);return xe({},t)},xt=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function kd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function sM(n){return kd(n)?window.innerHeight:n.clientHeight}function xI(n){return kd(n)?window.pageYOffset:n.scrollTop}function Gh(n,e){if(kd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function oM(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function aM(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function eh(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qh,s=xI(n),a=e-s,u=10,d=0;function f(){d+=u;var m=aM(d,s,a,t);Gh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function _0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Gh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Gh(n,Math.max(e.offsetTop-s,0))}function lM(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function w0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function uM(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var NI=!1,cM={get passive(){return NI=!0}},th=typeof window<"u"?window:{};th.addEventListener&&th.removeEventListener&&(th.addEventListener("p",qh,cM),th.removeEventListener("p",qh,!1));var hM=NI;function dM(n){return n!=null}function fM(n){return Array.isArray(n)}function nh(n,e,t){return n?e:t}var pM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=is(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=is(d,2),m=f[0],_=f[1];return u[m]=_,u},{})},mM=["children","innerProps"],gM=["children","innerProps"];function vM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=oM(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var _=f.getBoundingClientRect(),S=_.height,E=t.getBoundingClientRect(),P=E.bottom,O=E.height,R=E.top,C=t.offsetParent.getBoundingClientRect(),B=C.top,Q=u?window.innerHeight:sM(f),K=xI(f),ee=parseInt(getComputedStyle(t).marginBottom,10),X=parseInt(getComputedStyle(t).marginTop,10),se=B-X,k=Q-R,A=se+K,N=S-K-R,j=P-Q+K+ee,M=K+R-X,L=160;switch(s){case"auto":case"bottom":if(k>=O)return{placement:"bottom",maxHeight:e};if(N>=O&&!u)return a&&eh(f,j,L),{placement:"bottom",maxHeight:e};if(!u&&N>=r||u&&k>=r){a&&eh(f,j,L);var x=u?k-ee:N-ee;return{placement:"bottom",maxHeight:x}}if(s==="auto"||u){var ze=e,De=u?se:A;return De>=r&&(ze=Math.min(De-ee-d,e)),{placement:"top",maxHeight:ze}}if(s==="bottom")return a&&Gh(f,j),{placement:"bottom",maxHeight:e};break;case"top":if(se>=O)return{placement:"top",maxHeight:e};if(A>=O&&!u)return a&&eh(f,M,L),{placement:"top",maxHeight:e};if(!u&&A>=r||u&&se>=r){var $e=e;return(!u&&A>=r||u&&se>=r)&&($e=u?se-X:A-X),a&&eh(f,M,L),{placement:"top",maxHeight:$e}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function yM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var OI=function(e){return e==="auto"?"bottom":e},_M=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return xe((r={label:"menu"},nu(r,yM(s),"100%"),nu(r,"position","absolute"),nu(r,"width","100%"),nu(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},DI=V.createContext(null),wM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=V.useContext(DI)||{},_=m.setPortalPlacement,S=V.useRef(null),E=V.useState(s),P=is(E,2),O=P[0],R=P[1],C=V.useState(null),B=is(C,2),Q=B[0],K=B[1],ee=f.spacing.controlHeight;return Em(function(){var X=S.current;if(X){var se=u==="fixed",k=d&&!se,A=vM({maxHeight:s,menuEl:X,minHeight:r,placement:a,shouldScroll:k,isFixedPosition:se,controlHeight:ee});R(A.maxHeight),K(A.placement),_==null||_(A.placement)}},[s,a,u,d,r,_,ee]),t({ref:S,placerProps:xe(xe({},e),{},{placement:Q||OI(a),maxHeight:O})})},EM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return Ae("div",Ne({},xt(e,"menu",{menu:!0}),{ref:r},s),t)},SM=EM,TM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return xe({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},IM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return Ae("div",Ne({},xt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},VI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return xe({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},bM=VI,CM=VI,AM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=fs(e,mM);return Ae("div",Ne({},xt(xe(xe({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},PM=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=fs(e,gM);return Ae("div",Ne({},xt(xe(xe({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},RM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},kM=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=V.useRef(null),m=V.useRef(null),_=V.useState(OI(u)),S=is(_,2),E=S[0],P=S[1],O=V.useMemo(function(){return{setPortalPlacement:P}},[]),R=V.useState(null),C=is(R,2),B=C[0],Q=C[1],K=V.useCallback(function(){if(s){var k=lM(s),A=d==="fixed"?0:window.pageYOffset,N=k[E]+A;(N!==(B==null?void 0:B.offset)||k.left!==(B==null?void 0:B.rect.left)||k.width!==(B==null?void 0:B.rect.width))&&Q({offset:N,rect:k})}},[s,d,E,B==null?void 0:B.offset,B==null?void 0:B.rect.left,B==null?void 0:B.rect.width]);Em(function(){K()},[K]);var ee=V.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=tM(s,f.current,K,{elementResize:"ResizeObserver"in window}))},[s,K]);Em(function(){ee()},[ee]);var X=V.useCallback(function(k){f.current=k,ee()},[ee]);if(!t&&d!=="fixed"||!B)return null;var se=Ae("div",Ne({ref:X},xt(xe(xe({},e),{},{offset:B.offset,position:d,rect:B.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Ae(DI.Provider,{value:O},t?fC.createPortal(se,t):se)},xM=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},NM=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return Ae("div",Ne({},xt(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},OM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return xe({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},DM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return Ae("div",Ne({},xt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},VM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},MM=function(e){var t=e.children,r=e.innerProps;return Ae("div",Ne({},xt(e,"indicatorsContainer",{indicators:!0}),r),t)},E0,LM=["size"],jM=["innerProps","isRtl","size"],FM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},MI=function(e){var t=e.size,r=fs(e,LM);return Ae("svg",Ne({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:FM},r))},zg=function(e){return Ae(MI,Ne({size:20},e),Ae("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},LI=function(e){return Ae(MI,Ne({size:20},e),Ae("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},jI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return xe({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},UM=jI,zM=function(e){var t=e.children,r=e.innerProps;return Ae("div",Ne({},xt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ae(LI,null))},$M=jI,BM=function(e){var t=e.children,r=e.innerProps;return Ae("div",Ne({},xt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ae(zg,null))},HM=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return xe({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},WM=function(e){var t=e.innerProps;return Ae("span",Ne({},t,xt(e,"indicatorSeparator",{"indicator-separator":!0})))},qM=FV(E0||(E0=UV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),GM=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return xe({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},Cp=function(e){var t=e.delay,r=e.offset;return Ae("span",{css:Lg({animation:"".concat(qM," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},KM=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=fs(e,jM);return Ae("div",Ne({},xt(xe(xe({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ae(Cp,{delay:0,offset:r}),Ae(Cp,{delay:160,offset:!0}),Ae(Cp,{delay:320,offset:!r}))},QM=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return xe({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},XM=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return Ae("div",Ne({ref:a},xt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},YM=XM,JM=["data"],ZM=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},eL=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,_=e.theme,S=e.selectProps;return Ae("div",Ne({},xt(e,"group",{group:!0}),f),Ae(u,Ne({},d,{selectProps:S,theme:_,getStyles:s,getClassNames:a,cx:r}),m),Ae("div",null,t))},tL=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return xe({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},nL=function(e){var t=kI(e);t.data;var r=fs(t,JM);return Ae("div",Ne({},xt(e,"groupHeading",{"group-heading":!0}),r))},rL=eL,iL=["innerRef","isDisabled","isHidden","inputClassName"],sL=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return xe(xe({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},oL),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},FI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},oL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":xe({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},FI)},aL=function(e){return xe({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},FI)},lL=function(e){var t=e.cx,r=e.value,s=kI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=fs(s,iL);return Ae("div",Ne({},xt(e,"input",{"input-container":!0}),{"data-value":r||""}),Ae("input",Ne({className:t({input:!0},f),ref:a,style:aL(d),disabled:u},m)))},uL=lL,cL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return xe({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},hL=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return xe({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},dL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return xe({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},UI=function(e){var t=e.children,r=e.innerProps;return Ae("div",r,t)},fL=UI,pL=UI;function mL(n){var e=n.children,t=n.innerProps;return Ae("div",Ne({role:"button"},t),e||Ae(zg,{size:14}))}var gL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,_=r.Label,S=r.Remove;return Ae(m,{data:s,innerProps:xe(xe({},xt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},Ae(_,{data:s,innerProps:xe({},xt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),Ae(S,{data:s,innerProps:xe(xe({},xt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},vL=gL,yL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return xe({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},_L=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return Ae("div",Ne({},xt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},wL=_L,EL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return xe({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},SL=function(e){var t=e.children,r=e.innerProps;return Ae("div",Ne({},xt(e,"placeholder",{placeholder:!0}),r),t)},TL=SL,IL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return xe({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},bL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return Ae("div",Ne({},xt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},CL=bL,AL={ClearIndicator:BM,Control:YM,DropdownIndicator:zM,DownChevron:LI,CrossIcon:zg,Group:rL,GroupHeading:nL,IndicatorsContainer:MM,IndicatorSeparator:WM,Input:uL,LoadingIndicator:KM,Menu:SM,MenuList:IM,MenuPortal:kM,LoadingMessage:PM,NoOptionsMessage:AM,MultiValue:vL,MultiValueContainer:fL,MultiValueLabel:pL,MultiValueRemove:mL,Option:wL,Placeholder:TL,SelectContainer:NM,SingleValue:CL,ValueContainer:DM},PL=function(e){return xe(xe({},AL),e.components)},S0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function RL(n,e){return!!(n===e||S0(n)&&S0(e))}function kL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!RL(n[t],e[t]))return!1;return!0}function xL(n,e){e===void 0&&(e=kL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var NL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},OL=function(e){return Ae("span",Ne({css:NL},e))},T0=OL,DL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,_=e.isAppleDevice,S=function(R,C){return R&&R.length?"".concat(R.indexOf(C)+1," of ").concat(R.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(S(d,r),".");if(t==="menu"&&_){var E=f?" disabled":"",P="".concat(m?" selected":"").concat(E);return"".concat(u).concat(P,", ").concat(S(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},VL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,_=e.isAppleDevice,S=f.ariaLiveMessages,E=f.getOptionLabel,P=f.inputValue,O=f.isMulti,R=f.isOptionDisabled,C=f.isSearchable,B=f.menuIsOpen,Q=f.options,K=f.screenReaderStatus,ee=f.tabSelectsValue,X=f.isLoading,se=f["aria-label"],k=f["aria-live"],A=V.useMemo(function(){return xe(xe({},DL),S||{})},[S]),N=V.useMemo(function(){var De="";if(t&&A.onChange){var $e=t.option,Ve=t.options,le=t.removedValue,de=t.removedValues,he=t.value,$=function(Te){return Array.isArray(Te)?null:Te},U=le||$e||$(he),pe=U?E(U):"",Ce=Ve||de||void 0,Z=Ce?Ce.map(E):[],ie=xe({isDisabled:U&&R(U,d),label:pe,labels:Z},t);De=A.onChange(ie)}return De},[t,A,R,d,E]),j=V.useMemo(function(){var De="",$e=r||s,Ve=!!(r&&d&&d.includes(r));if($e&&A.onFocus){var le={focused:$e,label:E($e),isDisabled:R($e,d),isSelected:Ve,options:a,context:$e===r?"menu":"value",selectValue:d,isAppleDevice:_};De=A.onFocus(le)}return De},[r,s,E,R,A,a,d,_]),M=V.useMemo(function(){var De="";if(B&&Q.length&&!X&&A.onFilter){var $e=K({count:a.length});De=A.onFilter({inputValue:P,resultsMessage:$e})}return De},[a,P,B,A,Q,K,X]),L=(t==null?void 0:t.action)==="initial-input-focus",x=V.useMemo(function(){var De="";if(A.guidance){var $e=s?"value":B?"menu":"input";De=A.guidance({"aria-label":se,context:$e,isDisabled:r&&R(r,d),isMulti:O,isSearchable:C,tabSelectsValue:ee,isInitialFocus:L})}return De},[se,r,s,O,R,C,B,A,d,ee,L]),ze=Ae(V.Fragment,null,Ae("span",{id:"aria-selection"},N),Ae("span",{id:"aria-focused"},j),Ae("span",{id:"aria-results"},M),Ae("span",{id:"aria-guidance"},x));return Ae(V.Fragment,null,Ae(T0,{id:m},L&&ze),Ae(T0,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!L&&ze))},ML=VL,Sm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],LL=new RegExp("["+Sm.map(function(n){return n.letters}).join("")+"]","g"),zI={};for(var Ap=0;Ap<Sm.length;Ap++)for(var Pp=Sm[Ap],Rp=0;Rp<Pp.letters.length;Rp++)zI[Pp.letters[Rp]]=Pp.base;var $I=function(e){return e.replace(LL,function(t){return zI[t]})},jL=xL($I),I0=function(e){return e.replace(/^\s+|\s+$/g,"")},FL=function(e){return"".concat(e.label," ").concat(e.value)},UL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=xe({ignoreCase:!0,ignoreAccents:!0,stringify:FL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,_=f?I0(r):r,S=f?I0(d(t)):d(t);return a&&(_=_.toLowerCase(),S=S.toLowerCase()),u&&(_=jL(_),S=$I(S)),m==="start"?S.substr(0,_.length)===_:S.indexOf(_)>-1}},zL=["innerRef"];function $L(n){var e=n.innerRef,t=fs(n,zL),r=pM(t,"onExited","in","enter","exit","appear");return Ae("input",Ne({ref:e},r,{css:Lg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var BL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function HL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=V.useRef(!1),d=V.useRef(!1),f=V.useRef(0),m=V.useRef(null),_=V.useCallback(function(C,B){if(m.current!==null){var Q=m.current,K=Q.scrollTop,ee=Q.scrollHeight,X=Q.clientHeight,se=m.current,k=B>0,A=ee-X-K,N=!1;A>B&&u.current&&(r&&r(C),u.current=!1),k&&d.current&&(a&&a(C),d.current=!1),k&&B>A?(t&&!u.current&&t(C),se.scrollTop=ee,N=!0,u.current=!0):!k&&-B>K&&(s&&!d.current&&s(C),se.scrollTop=0,N=!0,d.current=!0),N&&BL(C)}},[t,r,s,a]),S=V.useCallback(function(C){_(C,C.deltaY)},[_]),E=V.useCallback(function(C){f.current=C.changedTouches[0].clientY},[]),P=V.useCallback(function(C){var B=f.current-C.changedTouches[0].clientY;_(C,B)},[_]),O=V.useCallback(function(C){if(C){var B=hM?{passive:!1}:!1;C.addEventListener("wheel",S,B),C.addEventListener("touchstart",E,B),C.addEventListener("touchmove",P,B)}},[P,E,S]),R=V.useCallback(function(C){C&&(C.removeEventListener("wheel",S,!1),C.removeEventListener("touchstart",E,!1),C.removeEventListener("touchmove",P,!1))},[P,E,S]);return V.useEffect(function(){if(e){var C=m.current;return O(C),function(){R(C)}}},[e,O,R]),function(C){m.current=C}}var b0=["boxSizing","height","overflow","paddingRight","position"],C0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function A0(n){n.cancelable&&n.preventDefault()}function P0(n){n.stopPropagation()}function R0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function k0(){return"ontouchstart"in window||navigator.maxTouchPoints}var x0=!!(typeof window<"u"&&window.document&&window.document.createElement),Ql=0,Da={capture:!1,passive:!1};function WL(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=V.useRef({}),a=V.useRef(null),u=V.useCallback(function(f){if(x0){var m=document.body,_=m&&m.style;if(r&&b0.forEach(function(O){var R=_&&_[O];s.current[O]=R}),r&&Ql<1){var S=parseInt(s.current.paddingRight,10)||0,E=document.body?document.body.clientWidth:0,P=window.innerWidth-E+S||0;Object.keys(C0).forEach(function(O){var R=C0[O];_&&(_[O]=R)}),_&&(_.paddingRight="".concat(P,"px"))}m&&k0()&&(m.addEventListener("touchmove",A0,Da),f&&(f.addEventListener("touchstart",R0,Da),f.addEventListener("touchmove",P0,Da))),Ql+=1}},[r]),d=V.useCallback(function(f){if(x0){var m=document.body,_=m&&m.style;Ql=Math.max(Ql-1,0),r&&Ql<1&&b0.forEach(function(S){var E=s.current[S];_&&(_[S]=E)}),m&&k0()&&(m.removeEventListener("touchmove",A0,Da),f&&(f.removeEventListener("touchstart",R0,Da),f.removeEventListener("touchmove",P0,Da)))}},[r]);return V.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var qL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},GL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function KL(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=HL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),_=WL({isEnabled:t}),S=function(P){m(P),_(P)};return Ae(V.Fragment,null,t&&Ae("div",{onClick:qL,css:GL}),e(S))}var QL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},XL=function(e){var t=e.name,r=e.onFocus;return Ae("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:QL,value:"",onChange:function(){}})},YL=XL;function $g(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function JL(){return $g(/^iPhone/i)}function BI(){return $g(/^Mac/i)}function ZL(){return $g(/^iPad/i)||BI()&&navigator.maxTouchPoints>1}function ej(){return JL()||ZL()}function tj(){return BI()||ej()}var nj=function(e){return e.label},rj=function(e){return e.label},ij=function(e){return e.value},sj=function(e){return!!e.isDisabled},oj={clearIndicator:$M,container:xM,control:QM,dropdownIndicator:UM,group:ZM,groupHeading:tL,indicatorsContainer:VM,indicatorSeparator:HM,input:sL,loadingIndicator:GM,loadingMessage:CM,menu:_M,menuList:TM,menuPortal:RM,multiValue:cL,multiValueLabel:hL,multiValueRemove:dL,noOptionsMessage:bM,option:yL,placeholder:EL,singleValue:IL,valueContainer:OM},aj={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},lj=4,HI=4,uj=38,cj=HI*2,hj={baseUnit:HI,controlHeight:uj,menuGutter:cj},kp={borderRadius:lj,colors:aj,spacing:hj},dj={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:w0(),captureMenuScroll:!w0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:UL(),formatGroupLabel:nj,getOptionLabel:rj,getOptionValue:ij,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:sj,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!uM(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function N0(n,e,t,r){var s=GI(n,e,t),a=KI(n,e,t),u=qI(n,e),d=Kh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function yh(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return N0(n,u,e,d)}).filter(function(u){return D0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=N0(n,t,e,r);return D0(n,a)?a:void 0}).filter(dM)}function WI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Ng(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function O0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Ng(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function fj(n,e){return WI(yh(n,e))}function D0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!XI(n)||!a)&&QI(n,{label:u,value:d,data:s},r)}function pj(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function mj(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var xp=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},qI=function(e,t){return e.getOptionLabel(t)},Kh=function(e,t){return e.getOptionValue(t)};function GI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function KI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Kh(n,e);return t.some(function(s){return Kh(n,s)===r})}function QI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var XI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},gj=1,YI=(function(n){M2(t,n);var e=F2(t);function t(r){var s;if(D2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var _=s.props,S=_.onChange,E=_.name;m.name=E,s.ariaOnChange(f,m),S(f,m)},s.setValue=function(f,m,_){var S=s.props,E=S.closeMenuOnSelect,P=S.isMulti,O=S.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:O}),E&&(s.setState({inputIsHiddenAfterUpdate:!P}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:_})},s.selectOption=function(f){var m=s.props,_=m.blurInputOnSelect,S=m.isMulti,E=m.name,P=s.state.selectValue,O=S&&s.isOptionSelected(f,P),R=s.isOptionDisabled(f,P);if(O){var C=s.getOptionValue(f);s.setValue(P.filter(function(B){return s.getOptionValue(B)!==C}),"deselect-option",f)}else if(!R)S?s.setValue([].concat(Ng(P),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:E});return}_&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,_=s.state.selectValue,S=s.getOptionValue(f),E=_.filter(function(O){return s.getOptionValue(O)!==S}),P=nh(m,E,E[0]||null);s.onChange(P,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(nh(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,_=m[m.length-1],S=m.slice(0,m.length-1),E=nh(f,S,S[0]||null);_&&s.onChange(E,{action:"pop-value",removedValue:_})},s.getFocusedOptionId=function(f){return xp(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return O0(yh(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return iM.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return qI(s.props,f)},s.getOptionValue=function(f){return Kh(s.props,f)},s.getStyles=function(f,m){var _=s.props.unstyled,S=oj[f](m,_);S.boxSizing="border-box";var E=s.props.styles[f];return E?E(S,m):S},s.getClassNames=function(f,m){var _,S;return(_=(S=s.props.classNames)[f])===null||_===void 0?void 0:_.call(S,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return PL(s.props)},s.buildCategorizedOptions=function(){return yh(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return WI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:xe({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,_=m.isMulti,S=m.menuIsOpen;s.focusInput(),S?(s.setState({inputIsHiddenAfterUpdate:!_}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&kd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,_=m&&m.item(0);_&&(s.initialTouchX=_.clientX,s.initialTouchY=_.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,_=m&&m.item(0);if(_){var S=Math.abs(_.clientX-s.initialTouchX),E=Math.abs(_.clientY-s.initialTouchY),P=5;s.userIsDragging=S>P||E>P}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,_=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(_,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),_=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:_>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return XI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,_=m.isMulti,S=m.backspaceRemovesValue,E=m.escapeClearsValue,P=m.inputValue,O=m.isClearable,R=m.isDisabled,C=m.menuIsOpen,B=m.onKeyDown,Q=m.tabSelectsValue,K=m.openMenuOnFocus,ee=s.state,X=ee.focusedOption,se=ee.focusedValue,k=ee.selectValue;if(!R&&!(typeof B=="function"&&(B(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!_||P)return;s.focusValue("previous");break;case"ArrowRight":if(!_||P)return;s.focusValue("next");break;case"Delete":case"Backspace":if(P)return;if(se)s.removeValue(se);else{if(!S)return;_?s.popValue():O&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!C||!Q||!X||K&&s.isOptionSelected(X,k))return;s.selectOption(X);break;case"Enter":if(f.keyCode===229)break;if(C){if(!X||s.isComposing)return;s.selectOption(X);break}return;case"Escape":C?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:P}),s.onMenuClose()):O&&E&&s.clearValue();break;case" ":if(P)return;if(!C){s.openMenu("first");break}if(!X)return;s.selectOption(X);break;case"ArrowUp":C?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":C?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!C)return;s.focusOption("pageup");break;case"PageDown":if(!C)return;s.focusOption("pagedown");break;case"Home":if(!C)return;s.focusOption("first");break;case"End":if(!C)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++gj),s.state.selectValue=y0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=xp(a,u[d])}return s}return V2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_0(this.menuListRef,this.focusedOptionRef),tj()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),_=s==="first"?0:m.length-1;if(!this.props.isMulti){var S=m.indexOf(d[0]);S>-1&&(_=S)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[_],focusedOptionId:this.getFocusedOptionId(m[_])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,_=-1;if(u.length){switch(s){case"previous":f===0?_=0:f===-1?_=m:_=f-1;break;case"next":f>-1&&f<m&&(_=f+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:u[_]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(kp):xe(xe({},kp),this.props.theme):kp})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,_=this.setValue,S=this.props,E=S.isMulti,P=S.isRtl,O=S.options,R=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:R,isMulti:E,isRtl:P,options:O,selectOption:m,selectProps:S,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return GI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return KI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return QI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,_=s.form,S=s.menuIsOpen,E=s.required,P=this.getComponents(),O=P.Input,R=this.state,C=R.inputIsHidden,B=R.ariaSelection,Q=this.commonProps,K=d||this.getElementId("input"),ee=xe(xe(xe({"aria-autocomplete":"list","aria-expanded":S,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":E,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},S&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?(B==null?void 0:B.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?V.createElement(O,Ne({},Q,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:K,innerRef:this.getInputRef,isDisabled:a,isHidden:C,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:_,type:"text",value:f},ee)):V.createElement($L,Ne({id:K,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:qh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:_,value:""},ee))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,_=a.SingleValue,S=a.Placeholder,E=this.commonProps,P=this.props,O=P.controlShouldRenderValue,R=P.isDisabled,C=P.isMulti,B=P.inputValue,Q=P.placeholder,K=this.state,ee=K.selectValue,X=K.focusedValue,se=K.isFocused;if(!this.hasValue()||!O)return B?null:V.createElement(S,Ne({},E,{key:"placeholder",isDisabled:R,isFocused:se,innerProps:{id:this.getElementId("placeholder")}}),Q);if(C)return ee.map(function(A,N){var j=A===X,M="".concat(s.getOptionLabel(A),"-").concat(s.getOptionValue(A));return V.createElement(u,Ne({},E,{components:{Container:d,Label:f,Remove:m},isFocused:j,isDisabled:R,key:M,index:N,removeProps:{onClick:function(){return s.removeValue(A)},onTouchEnd:function(){return s.removeValue(A)},onMouseDown:function(x){x.preventDefault()}},data:A}),s.formatOptionLabel(A,"value"))});if(B)return null;var k=ee[0];return V.createElement(_,Ne({},E,{data:k,isDisabled:R}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Ne({},u,{innerProps:S,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!a||!m)return null;var S={"aria-hidden":"true"};return V.createElement(a,Ne({},u,{innerProps:S,isDisabled:f,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return V.createElement(u,Ne({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Ne({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,_=a.MenuPortal,S=a.LoadingMessage,E=a.NoOptionsMessage,P=a.Option,O=this.commonProps,R=this.state.focusedOption,C=this.props,B=C.captureMenuScroll,Q=C.inputValue,K=C.isLoading,ee=C.loadingMessage,X=C.minMenuHeight,se=C.maxMenuHeight,k=C.menuIsOpen,A=C.menuPlacement,N=C.menuPosition,j=C.menuPortalTarget,M=C.menuShouldBlockScroll,L=C.menuShouldScrollIntoView,x=C.noOptionsMessage,ze=C.onMenuScrollToTop,De=C.onMenuScrollToBottom;if(!k)return null;var $e=function(pe,Ce){var Z=pe.type,ie=pe.data,Ie=pe.isDisabled,Te=pe.isSelected,je=pe.label,Ye=pe.value,St=R===ie,Pt=Ie?void 0:function(){return s.onOptionHover(ie)},nt=Ie?void 0:function(){return s.selectOption(ie)},rt="".concat(s.getElementId("option"),"-").concat(Ce),fn={id:rt,onClick:nt,onMouseMove:Pt,onMouseOver:Pt,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:Te};return V.createElement(P,Ne({},O,{innerProps:fn,data:ie,isDisabled:Ie,isSelected:Te,key:rt,label:je,type:Z,value:Ye,isFocused:St,innerRef:St?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(pe.data,"menu"))},Ve;if(this.hasOptions())Ve=this.getCategorizedOptions().map(function(U){if(U.type==="group"){var pe=U.data,Ce=U.options,Z=U.index,ie="".concat(s.getElementId("group"),"-").concat(Z),Ie="".concat(ie,"-heading");return V.createElement(u,Ne({},O,{key:ie,data:pe,options:Ce,Heading:d,headingProps:{id:Ie,data:U.data},label:s.formatGroupLabel(U.data)}),U.options.map(function(Te){return $e(Te,"".concat(Z,"-").concat(Te.index))}))}else if(U.type==="option")return $e(U,"".concat(U.index))});else if(K){var le=ee({inputValue:Q});if(le===null)return null;Ve=V.createElement(S,O,le)}else{var de=x({inputValue:Q});if(de===null)return null;Ve=V.createElement(E,O,de)}var he={minMenuHeight:X,maxMenuHeight:se,menuPlacement:A,menuPosition:N,menuShouldScrollIntoView:L},$=V.createElement(wM,Ne({},O,he),function(U){var pe=U.ref,Ce=U.placerProps,Z=Ce.placement,ie=Ce.maxHeight;return V.createElement(f,Ne({},O,he,{innerRef:pe,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:K,placement:Z}),V.createElement(KL,{captureEnabled:B,onTopArrive:ze,onBottomArrive:De,lockEnabled:M},function(Ie){return V.createElement(m,Ne({},O,{innerRef:function(je){s.getMenuListRef(je),Ie(je)},innerProps:{role:"listbox","aria-multiselectable":O.isMulti,id:s.getElementId("listbox")},isLoading:K,maxHeight:ie,focusedOption:R}),Ve)}))});return j||N==="fixed"?V.createElement(_,Ne({},O,{appendTo:j,controlElement:this.controlRef,menuPlacement:A,menuPosition:N}),$):$}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,_=a.required,S=this.state.selectValue;if(_&&!this.hasValue()&&!d)return V.createElement(YL,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var E=S.map(function(R){return s.getOptionValue(R)}).join(u);return V.createElement("input",{name:m,type:"hidden",value:E})}else{var P=S.length>0?S.map(function(R,C){return V.createElement("input",{key:"i-".concat(C),name:m,type:"hidden",value:s.getOptionValue(R)})}):V.createElement("input",{name:m,type:"hidden",value:""});return V.createElement("div",null,P)}else{var O=S[0]?this.getOptionValue(S[0]):"";return V.createElement("input",{name:m,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,_=a.selectValue,S=this.getFocusableOptions();return V.createElement(ML,Ne({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:_,focusableOptions:S,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,_=m.className,S=m.id,E=m.isDisabled,P=m.menuIsOpen,O=this.state.isFocused,R=this.commonProps=this.getCommonProps();return V.createElement(d,Ne({},R,{className:_,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:E,isFocused:O}),this.renderLiveRegion(),V.createElement(a,Ne({},R,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:E,isFocused:O,menuIsOpen:P}),V.createElement(f,Ne({},R,{isDisabled:E}),this.renderPlaceholderOrValue(),this.renderInput()),V.createElement(u,Ne({},R,{isDisabled:E}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,_=a.isFocused,S=a.prevWasFocused,E=a.instancePrefix,P=s.options,O=s.value,R=s.menuIsOpen,C=s.inputValue,B=s.isMulti,Q=y0(O),K={};if(u&&(O!==u.value||P!==u.options||R!==u.menuIsOpen||C!==u.inputValue)){var ee=R?fj(s,Q):[],X=R?O0(yh(s,Q),"".concat(E,"-option")):[],se=d?pj(a,Q):null,k=mj(a,ee),A=xp(X,k);K={selectValue:Q,focusedOption:k,focusedOptionId:A,focusableOptionsWithIds:X,focusedValue:se,clearFocusValueOnUpdate:!1}}var N=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},j=m,M=_&&S;return _&&!M&&(j={value:nh(B,Q,Q[0]||null),options:Q,action:"initial-input-focus"},M=!S),(m==null?void 0:m.action)==="initial-input-focus"&&(j=null),xe(xe(xe({},K),N),{},{prevProps:s,ariaSelection:j,prevWasFocused:M})}}]),t})(V.Component);YI.defaultProps=dj;var vj=V.forwardRef(function(n,e){var t=O2(n);return V.createElement(YI,Ne({ref:e},t))}),V0=vj;const Xl=["Anagrafica","Stato fisico","Obiettivi"];function Ee(n){return typeof n=="string"?n:n==null?"":String(n)}function rh(n){const e=Ee(n.id).trim(),t=Ee(n.uid).trim();return e||t}function Yl(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number(Ee(t.weight).replace(/[^\d.-]/g,"")),s=Ee(t.advancedMethod).trim(),a=s==="rest_pause"||s==="drop_set"?s:"";return{name:Ee(t.name),notes:Ee(t.notes),advancedMethod:a,advancedMethodNotes:Ee(t.advancedMethodNotes),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,workValue:Number(t.workValue??t.reps??10)||10,weightKg:Number(t.weightKg??r??0)||0,restSeconds:Number(t.restSeconds??60)||60,mediaUrl:Ee(t.mediaUrl)}}).filter(e=>!!e):[]}function Et(n){return Ee(n).trim()||"Non compilato"}function yj(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function _j(n,e){const t=yj(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function M0(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function ih(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function Us(){return{name:"",notes:"",advancedMethod:"",advancedMethodNotes:"",sets:3,reps:10,workValue:10,weightKg:0,restSeconds:60,mediaUrl:""}}function wj(n){return n.name.trim().length>0||n.notes.trim().length>0||n.advancedMethod.trim().length>0||n.advancedMethodNotes.trim().length>0||n.mediaUrl.trim().length>0||n.sets!==3||n.reps!==10||n.workValue!==10||n.weightKg>0||n.restSeconds!==60}function JI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function L0(n,e){const t=JI(e);return n?{...t,fullName:Ee(n.fullName).trim()||t.fullName,age:Ee(n.age).trim(),sex:Ee(n.sex).trim(),email:Ee(n.email).trim()||t.email,phone:Ee(n.phone).trim(),discoverySource:Ee(n.discoverySource).trim(),heightCm:Ee(n.heightCm).trim(),weightKg:Ee(n.weightKg).trim(),pastProgram:Ee(n.pastProgram).trim(),trainingFrequency:Ee(n.trainingFrequency).trim(),workoutDuration:Ee(n.workoutDuration).trim(),workoutLocation:Ee(n.workoutLocation).trim(),equipment:Ee(n.equipment).trim(),trainingTypeHistory:Ee(n.trainingTypeHistory).trim(),hasInjuries:Ee(n.hasInjuries).trim(),injuryDetails:Ee(n.injuryDetails).trim(),objectivePrimary:Ee(n.objectivePrimary).trim(),objectiveReason:Ee(n.objectiveReason).trim(),expectedTimeline:Ee(n.expectedTimeline).trim(),supportPreference:Ee(n.supportPreference).trim(),supportPreferenceOther:Ee(n.supportPreferenceOther).trim(),investmentRange:Ee(n.investmentRange).trim(),whatBlockedSoFar:Ee(n.whatBlockedSoFar).trim(),oneThingToImprove:Ee(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:Ee(n.riskIfNoChange).trim(),readiness:Ee(n.readiness).trim(),notes:Ee(n.notes).trim()}:t}function Ej(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function Va(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function Np(n){if(!n)return null;if(typeof n=="string"){const e=new Date(n);return Number.isNaN(e.getTime())?null:e.toISOString()}if(n instanceof Date)return Number.isNaN(n.getTime())?null:n.toISOString();if(typeof n=="object"&&n&&"toDate"in n&&typeof n.toDate=="function"){const e=n.toDate();return Number.isNaN(e.getTime())?null:e.toISOString()}return null}function j0(n){return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function F0(n){switch(n){case"trial_pending":return"Prova da attivare";case"trial_active":return"Prova attiva";case"active_paid":return"Abbonamento attivo";case"expired":return"Scaduto";case"disabled":return"Disattivato";case"supervisor_active":return"Supervisor attivo";default:return"Non disponibile"}}function ru(n){if(!n)return null;const e=new Date(n).getTime();return Number.isNaN(e)?null:e}function Op(n){return n.status==="trial_active"?n.trialEndsAt??n.expiresAt??n.subscriptionEndsAt??null:n.status==="active_paid"?n.subscriptionEndsAt??n.expiresAt??n.trialEndsAt??null:n.expiresAt??n.trialEndsAt??n.subscriptionEndsAt??null}function Sj(n,e){if(n==="expired")return{label:"Scaduto",tone:"danger"};const t=ru(e);if(!t)return null;const r=Date.now();if(t<=r)return{label:"Scaduto",tone:"danger"};const s=10080*60*1e3;return t-r<=s?{label:"In scadenza",tone:"warning"}:null}function Tj(){const{role:n,user:e,isSupervisor:t}=pl(),r=bu(),{showError:s,showSuccess:a}=Xh(),[u,d]=V.useState([]),[f,m]=V.useState([]),[_,S]=V.useState(!1),[E,P]=V.useState(null),[O,R]=V.useState(!1),[C,B]=V.useState(!1),[Q,K]=V.useState(!1),[ee,X]=V.useState({}),[se,k]=V.useState(!1),[A,N]=V.useState(!1),[j,M]=V.useState(!1),[L,x]=V.useState(""),[ze,De]=V.useState(""),[$e,Ve]=V.useState(!1),[le,de]=V.useState(!1),[he,$]=V.useState(0),[U,pe]=V.useState(JI()),[Ce,Z]=V.useState(null),[ie,Ie]=V.useState(null),[Te,je]=V.useState(!1),[Ye,St]=V.useState([]),[Pt,nt]=V.useState(""),[rt,fn]=V.useState(""),[Tt,ps]=V.useState("clients"),[Cn,Oi]=V.useState(""),[An,Gt]=V.useState(""),[ms,Lr]=V.useState(!1),[pn,jr]=V.useState("series_reps"),[Rt,pt]=V.useState(""),[Dn,Er]=V.useState(""),[ir,Vn]=V.useState(""),[Fr,Mn]=V.useState([Us()]),[Ur,Di]=V.useState([]),[lo,ai]=V.useState(!1),[sr,Vi]=V.useState(""),[Sr,mn]=V.useState("permanent"),[Ln,Mi]=V.useState("4"),[jn,gs]=V.useState(j0(new Date)),li=Ce!==null,Jt=u.find(I=>rh(I)===Cn)??null,yt=[...f].sort((I,H)=>{const te=ru(Ee(I.createdAt))??0;return(ru(Ee(H.createdAt))??0)-te}),Be=yt.find(I=>I.id===An)??null,ht=O?Be:null,Lt=C?Be:null,Fn=_j(Ee(E==null?void 0:E.phone),Ee(E==null?void 0:E.fullName)),or=u.reduce((I,H)=>{const te=Ee(H.displayName).trim()||Ee(H.email).trim()||H.id;return I[rh(H)]=te,I[H.id]=te,I},{}),ar=u.map(I=>({value:rh(I),label:Ee(I.displayName).trim()||Ee(I.email)||I.id})),Li=Be?ar.filter(I=>!(Be.assignedClientIds??[]).includes(I.value)):ar,lr=ar.filter(I=>Ur.includes(I.value)),uo=ar.find(I=>I.value===Cn)??null,Yo=Math.round((he+1)/Xl.length*100),vs=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],co=Ye.filter(I=>I.uid!==(e==null?void 0:e.uid)).filter(I=>!I.isSupervisor).filter(I=>{const H=Pt.trim().toLowerCase();return H?I.displayName.toLowerCase().includes(H)||I.email.toLowerCase().includes(H):!0}).sort((I,H)=>{const te=ru(Op(I))??Number.MAX_SAFE_INTEGER,be=ru(Op(H))??Number.MAX_SAFE_INTEGER;return te-be});V.useEffect(()=>{!t&&Tt==="supervisor"&&ps("clients")},[t,Tt]);const Un=V.useMemo(()=>({control:(I,H)=>({...I,minHeight:48,borderRadius:12,borderColor:H.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:H.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:I=>({...I,borderRadius:12,overflow:"hidden",zIndex:50}),option:(I,H)=>({...I,backgroundColor:H.isSelected?"#ff6a00":H.isFocused?"rgba(255,106,0,0.10)":"#fff",color:H.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);V.useEffect(()=>{async function I(){if(!Cn){P(null);return}try{const H=await iI(Cn,"onboarding");P(H.data()??null)}catch{P(null)}}I()},[Cn]),V.useEffect(()=>{var I;!An&&yt.length>0&&!ms&&Gt(yt[0].id),An&&!yt.some(H=>H.id===An)&&Gt(((I=yt[0])==null?void 0:I.id)??"")},[An,ms,yt.map(I=>I.id).join("|")]),V.useEffect(()=>{Be||B(!1)},[Be==null?void 0:Be.id]),V.useEffect(()=>{C||X({})},[C,Be==null?void 0:Be.id]);async function zr(){if(n){S(!0);try{const te=(await c2(e==null?void 0:e.uid)).docs.map(be=>({id:be.id,...be.data()})).sort((be,He)=>{const Tr=Ee(be.displayName||be.email||be.id).toLowerCase(),Ir=Ee(He.displayName||He.email||He.id).toLowerCase();return Tr.localeCompare(Ir)});d(te),!Cn&&te[0]&&Oi(rh(te[0]));try{const be=await sI(n);m(be.docs.map(He=>({id:He.id,...He.data()})))}catch(be){m([]),s(Ct(be))}}catch(I){console.error("Coach action failed:",I),s(Ct(I))}finally{S(!1)}}}V.useEffect(()=>{zr()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{!ie||ie.isSupervisor||ie.isExpired&&yr().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[ie==null?void 0:ie.status,ie==null?void 0:ie.isExpired,ie==null?void 0:ie.isSupervisor]),V.useEffect(()=>{async function I(){if(!(!n||n==="client")){je(!0);try{const H=await Xw();Ie(H)}catch(H){s(Ct(H))}finally{je(!1)}}}I()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{async function I(){if(e!=null&&e.uid)try{const te=(await Wa(e.uid)).data(),be=Ee(te==null?void 0:te.phone).trim();x(be),De(be)}catch{x(""),De("")}}I()},[e==null?void 0:e.uid]);async function zn(){if(t)try{const I=await n2();St(I.coaches??[])}catch(I){s(Ct(I))}}V.useEffect(()=>{zn()},[t,e==null?void 0:e.uid]);async function ur(I,H){S(!0);try{const te=await I();return a(H),await zr(),te}catch(te){s(Ct(te))}finally{S(!1)}}function ho(){Mn(I=>[...I,Us()])}function ys(I){Mn(H=>H.length<=1?H:H.filter((te,be)=>be!==I))}function _s(I){jt(I,Us())}function jt(I,H){Mn(te=>te.map((be,He)=>He===I?{...be,...H}:be))}function ot(I,H){pe(te=>({...te,[I]:H}))}function gl(){if(!Be){jr("series_reps"),pt(""),Er(""),Vn(""),Mn([Us()]);return}jr(Be.kind==="circuit"?"circuit":"series_reps"),pt(Be.title??""),Er(Ee(Be.warmup)),Vn(Ee(Be.notes));const I=Yl(Be.exercises).filter(H=>H.name.trim().length>0);Mn(I.length>0?I:[Us()])}function at(I){if(I===pn)return;if(Fr.some(te=>wj(te))||ir.trim().length>0||Dn.trim().length>0){if(!window.confirm("Cambiando categoria di allenamento, i dati inseriti in questa scheda verranno cancellati. Vuoi continuare?"))return;Mn([Us()]),Vn(""),Er("")}jr(I)}function Jo(){const I=document.body;let H=!1;const te=()=>{H||(H=!0,I.classList.remove("print-plan-only"))};I.classList.add("print-plan-only"),window.addEventListener("afterprint",te,{once:!0}),window.print(),window.setTimeout(te,1200)}function ji(){if(!Cn){s("Seleziona prima un cliente.");return}const I={name:Ee(Jt==null?void 0:Jt.displayName).trim(),email:Ee(Jt==null?void 0:Jt.email).trim()};pe(L0(E,I)),$(0),k(!0)}function $r(){const I={name:Ee(Jt==null?void 0:Jt.displayName).trim(),email:Ee(Jt==null?void 0:Jt.email).trim()};pe(L0(E,I)),$(0),k(!1)}function $n(){return U.fullName.trim()?U.email.trim()?U.phone.trim()?U.age.trim()?U.sex.trim()?U.heightCm.trim()?U.weightKg.trim()?U.pastProgram.trim()?U.trainingFrequency.trim()?U.workoutDuration.trim()?U.workoutLocation.trim()?U.equipment.trim()?U.objectivePrimary.trim()?U.objectiveReason.trim()?U.expectedTimeline.trim()?null:"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function fo(){if(!Cn){s("Seleziona prima un cliente.");return}const I=$n();if(I){s(I);return}const H={fullName:U.fullName.trim(),age:U.age.trim(),sex:U.sex.trim(),email:U.email.trim(),phone:U.phone.trim(),discoverySource:U.discoverySource.trim(),heightCm:U.heightCm.trim(),weightKg:U.weightKg.trim(),pastProgram:U.pastProgram.trim(),trainingFrequency:U.trainingFrequency.trim(),workoutDuration:U.workoutDuration.trim(),workoutLocation:U.workoutLocation.trim(),equipment:U.equipment.trim(),trainingTypeHistory:U.trainingTypeHistory.trim(),hasInjuries:U.hasInjuries.trim(),injuryDetails:U.injuryDetails.trim(),objectivePrimary:U.objectivePrimary.trim(),objectiveReason:U.objectiveReason.trim(),expectedTimeline:U.expectedTimeline.trim(),supportPreference:U.supportPreference.trim(),supportPreferenceOther:U.supportPreferenceOther.trim(),investmentRange:U.investmentRange.trim(),whatBlockedSoFar:U.whatBlockedSoFar.trim(),oneThingToImprove:U.oneThingToImprove.trim(),importanceScore:Number(U.importanceScore||0),riskIfNoChange:U.riskIfNoChange.trim(),readiness:U.readiness.trim(),goal:U.objectivePrimary.trim(),experienceLevel:U.pastProgram.trim(),trainingDaysPerWeek:Ej(U.trainingFrequency),notes:U.notes.trim(),compiledBy:"coach"};S(!0);try{await h2(Cn,H),P(H),a("Anagrafica cliente salvata con successo."),k(!1)}catch(te){s(Ct(te))}finally{S(!1)}}async function Zo(){const I=Rt.trim();if(!I){s("Inserisci un titolo per la scheda.");return}const H=Fr.map(te=>({name:te.name.trim(),notes:te.notes.trim(),advancedMethod:te.advancedMethod||"",advancedMethodNotes:te.advancedMethod?te.advancedMethodNotes.trim():"",sets:pn==="series_reps"&&Number(te.sets)||0,reps:pn==="series_reps"&&Number(te.reps)||0,workValue:pn==="circuit"&&Number(te.workValue)||0,weightKg:Number(te.weightKg)||0,restSeconds:Number(te.restSeconds)||0,mediaUrl:te.mediaUrl.trim()})).filter(te=>te.name.length>0);if(H.length===0){s("Aggiungi almeno un esercizio con nome.");return}if(ht)await ur(()=>p2(ht.id,{title:I,kind:pn,warmup:Dn.trim(),notes:ir.trim(),status:"active",exercises:H}),"Scheda aggiornata con successo."),Gt(ht.id);else{const te=await ur(()=>Jw({title:I,kind:pn,warmup:Dn.trim(),notes:ir.trim(),status:"active",exercises:H}),"Scheda creata.");te!=null&&te.id&&Gt(te.id)}Lr(!1),R(!1)}function Fi(){Lr(!0),Gt(""),jr("series_reps"),pt(""),Er(""),Vn(""),Mn([Us()]),R(!0)}function Pn(I){const H=yt.find(be=>be.id===I);if(!H)return;Lr(!1),Gt(H.id),jr(H.kind==="circuit"?"circuit":"series_reps"),pt(H.title??""),Er(Ee(H.warmup)),Vn(Ee(H.notes));const te=Yl(H.exercises).filter(be=>be.name.trim().length>0);Mn(te.length>0?te:[Us()]),R(!0)}function ea(I){const H=yt.find(te=>te.id===I);H&&(Gt(H.id),B(!0))}function Zt(){Lr(!1),gl(),R(!1)}async function po(I,H){if(H){if(!H.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}Z(I);try{const te=(Be==null?void 0:Be.id)||(e==null?void 0:e.uid)||"coach-draft",be=await g2(te,H);jt(I,{mediaUrl:be}),a("Media caricato con successo.")}catch(te){console.error("Media upload failed:",te),s(Ct(te))}finally{Z(null)}}}async function ta(I){const H=yt.find(be=>be.id===I);!H||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await ur(()=>m2(H.id),"Scheda eliminata con successo."),Gt(be=>be===H.id?"":be),R(!1),B(!1))}async function na(I){const H=yt.find(He=>He.id===I);if(!H)return;const te=Yl(H.exercises).map(He=>({name:He.name,notes:He.notes,advancedMethod:He.advancedMethod,advancedMethodNotes:He.advancedMethodNotes,sets:He.sets,reps:He.reps,workValue:He.workValue,weightKg:He.weightKg,restSeconds:He.restSeconds,mediaUrl:He.mediaUrl})),be=await ur(()=>Jw({title:`${H.title||"Scheda"} (Copia)`,kind:H.kind==="circuit"?"circuit":"series_reps",notes:Ee(H.notes),status:H.status==="archived"?"draft":"active",exercises:te}),"Scheda duplicata.");be!=null&&be.id&&Gt(be.id)}async function ws(){if(!Be){s("Seleziona prima una scheda.");return}if(Ur.length===0){s("Seleziona almeno un cliente da assegnare.");return}await ur(()=>Promise.all(Ur.map(I=>d2(Be.id,I))),Ur.length===1?"Scheda assegnata al cliente.":"Scheda assegnata ai clienti selezionati."),Di([])}async function Es(I){Be&&await ur(()=>f2(Be.id,I),"Assegnazione rimossa.")}function ui(I,H){var cr;const te=(cr=I.assignmentDetails)==null?void 0:cr[H];if(!te||te.mode!=="timed")return{label:"Permanente",tone:"success"};const be=Np(te.startsAt),He=Np(te.expiresAt);if(!He)return{label:"Permanente",tone:"success"};if(be){const Ft=new Date(be).getTime();if(!Number.isNaN(Ft)&&Ft>Date.now())return{label:`Inizia il ${Va(be)}`,tone:"warning"}}const Tr=new Date(He).getTime();if(Number.isNaN(Tr))return{label:"Permanente",tone:"success"};const Ir=Date.now();if(Tr<=Ir)return{label:"Scaduta",tone:"danger"};const ra=10080*60*1e3,go=Tr-Ir<=ra?"warning":"success";return{label:`Scade il ${Va(He)}`,tone:go}}function Ui(I){var Ir;if(!Be)return;const H=(Ir=Be.assignmentDetails)==null?void 0:Ir[I],te=(H==null?void 0:H.mode)==="timed",be=typeof(H==null?void 0:H.weeks)=="number"&&H.weeks>0?H.weeks:4,He=Np(H==null?void 0:H.startsAt),Tr=He?new Date(He):new Date;Vi(I),mn(te?"timed":"permanent"),Mi(String(be)),gs(j0(Tr)),ai(!0)}function mo(){if(Sr!=="timed")return null;const I=Number(Ln);if(!Number.isFinite(I)||I<1)return null;const H=new Date(jn);if(Number.isNaN(H.getTime()))return null;const te=new Date(H.getTime()+I*7*24*60*60*1e3);return{from:Va(H.toISOString()),to:Va(te.toISOString())}}async function Br(){if(!(!Be||!sr)){if(Sr==="timed"){const I=Number(Ln);if(!Number.isFinite(I)||I<1){s("Inserisci un numero settimane valido.");return}const H=new Date(jn);if(Number.isNaN(H.getTime())){s("Seleziona una data di inizio valida.");return}await ur(()=>Zw(Be.id,sr,I,H.toISOString()),"Durata assegnazione aggiornata.")}else await ur(()=>Zw(Be.id,sr,null,null),"Assegnazione impostata come permanente.");ai(!1),Vi("")}}async function gn(I,H){fn(I);try{if(H==="activate"){const te=Ye.find(be=>be.uid===I);(te==null?void 0:te.status)==="disabled"?(await Yw(I),a("Coach sbloccato con successo.")):(te==null?void 0:te.status)==="active_paid"?(await r2(I),a("Abbonamento rinnovato di 1 anno.")):(await Yw(I),a("Abbonamento attivato."))}else await i2(I),a("Abbonamento disattivato.");await zn()}catch(te){s(Ct(te))}finally{fn("")}}async function zi(){je(!0);try{await eI();const I=await Xw();Ie(I),a("Periodo di prova attivato.")}catch(I){s(Ct(I))}finally{je(!1)}}async function ci(){M(!0);try{await tI(),await yr().catch(()=>{}),r("/auth",{replace:!0})}catch(I){s(Ct(I))}finally{M(!1),N(!1)}}async function hi(){const I=ze.replace(/[^\d+]/g,"").trim();if(I.length<8){s("Inserisci un numero WhatsApp valido.");return}de(!0);try{const H=await s2(I);x(H.phone),De(H.phone),Ve(!1),a("Numero aggiornato. I clienti associati useranno subito il nuovo contatto.")}catch(H){s(Ct(H))}finally{de(!1)}}async function lt(){const I=Ee(ie==null?void 0:ie.coachCode).trim();if(!I){s("Codice coach non disponibile.");return}try{await navigator.clipboard.writeText(I),a("Codice coach copiato.")}catch{s("Copia non riuscita. Copia manualmente il codice.")}}return g.jsxs(uI,{role:n==="trainer"?"trainer":"admin",subtitle:"",title:"Area Coach",sections:vs,activeSection:Tt,onSectionChange:I=>ps(I),children:[ie!=null&&ie.requiresTrialAcceptance?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>{I.currentTarget===I.target&&yr().finally(()=>r("/auth",{replace:!0}))},children:g.jsxs("article",{className:"card modal-card fullscreen-gate",onClick:I=>I.stopPropagation(),children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h2",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),g.jsx("button",{className:"btn",type:"button",disabled:Te,onClick:()=>void zi(),children:Te?"Attivazione...":"Accetta e continua"}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{yr().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,Tt==="code"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Il tuo codice coach"}),g.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),g.jsxs("div",{className:"coach-code-wrap",children:[g.jsx("p",{className:"coach-code",children:(ie==null?void 0:ie.coachCode)||"Caricamento..."}),g.jsx("button",{className:"icon-btn coach-copy-btn",type:"button","aria-label":"Copia codice coach",title:"Copia codice coach",onClick:()=>void lt(),children:""})]}),Te?g.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,g.jsxs("div",{className:"client-info-block",children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:"Numero WhatsApp coach"}),$e?null:g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica numero coach",title:"Modifica numero coach",onClick:()=>Ve(!0),children:""})]}),$e?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Numero telefono / WhatsApp",g.jsx("input",{type:"tel",value:ze,onChange:I=>De(I.target.value),placeholder:"Es. 3405882404"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:le,onClick:()=>{De(L),Ve(!1)},children:"Annulla"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:le,onClick:()=>void hi(),children:le?"Salvataggio...":"Salva"})]})]}):g.jsx("p",{className:"hint",children:g.jsx("strong",{children:L||"Non configurato"})})]}),ie!=null&&ie.isSupervisor?g.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"hint",children:["Stato accesso: ",g.jsx("strong",{children:F0(ie==null?void 0:ie.status)}),"  ","Scadenza: ",g.jsx("strong",{children:Va((ie==null?void 0:ie.expiresAt)??(ie==null?void 0:ie.trialEndsAt)??(ie==null?void 0:ie.subscriptionEndsAt))})]}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo coach perderai accesso, abbonamento, clienti associati e tutti i dati collegati."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>N(!0),children:"Elimina il mio profilo"})]})]}):null,t&&Tt==="supervisor"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Gestione coach (Supervisor)"}),g.jsxs("label",{children:["Cerca coach per nome o email",g.jsx("input",{value:Pt,onChange:I=>nt(I.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),g.jsxs("div",{className:"supervisor-list",children:[co.map(I=>{const H=Op(I),te=Sj(I.status,H);return g.jsxs("article",{className:"supervisor-row",children:[g.jsxs("div",{children:[g.jsx("p",{children:g.jsx("strong",{children:I.displayName||"Coach senza nome"})}),g.jsx("p",{className:"hint",children:I.email}),g.jsxs("p",{className:"hint",children:["Codice: ",I.coachCode||"-"]}),g.jsxs("p",{className:"hint",children:["Stato: ",F0(I.isSupervisor?"supervisor_active":I.status)]}),g.jsxs("p",{className:"hint",children:["Scadenza: ",Va(H)]}),te?g.jsx("span",{className:`status-chip status-chip-${te.tone}`.trim(),children:te.label}):null]}),g.jsxs("div",{className:"supervisor-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void gn(I.uid,"activate"),children:I.status==="disabled"?"Sblocca":I.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:I.isSupervisor||rt===I.uid,onClick:()=>void gn(I.uid,"disable"),children:"Disattiva"})]})]},I.uid)}),co.length===0?g.jsx("article",{className:"supervisor-row",children:g.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,Tt==="clients"||Tt==="plans"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:Tt==="plans"?"Schede tecniche":"Gestione cliente"}),Tt==="clients"?g.jsxs("label",{children:["Clienti registrati",g.jsx(V0,{styles:Un,options:ar,value:uo,onChange:I=>Oi((I==null?void 0:I.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}):null,Tt!=="plans"?g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void zr(),children:"Aggiorna dati"}):null,Tt==="clients"&&u.length===0?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Nessun cliente associato"}),g.jsx("p",{className:"hint",children:"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):g.jsxs(g.Fragment,{children:[Tt==="clients"?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Anagrafica cliente"}),g.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),g.jsx("button",{className:"btn",type:"button",onClick:ji,disabled:_||!Cn,children:E?"Modifica anagrafica completa":"Compila anagrafica completa"}),Fn?g.jsx("a",{className:"btn btn-whatsapp",href:Fn,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):g.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Anagrafica"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Nome:"})," ",Et(E==null?void 0:E.fullName)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Et:"})," ",Et(E==null?void 0:E.age)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Sesso:"})," ",Et(E==null?void 0:E.sex)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Email:"})," ",Et(E==null?void 0:E.email)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Telefono:"})," ",Et(E==null?void 0:E.phone)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Come ci ha conosciuto:"})," ",Et(E==null?void 0:E.discoverySource)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Stato fisico e allenamento"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Altezza:"})," ",Et(E==null?void 0:E.heightCm)," cm"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Peso:"})," ",Et(E==null?void 0:E.weightKg)," kg"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Esperienza programmi:"})," ",Et((E==null?void 0:E.pastProgram)||(E==null?void 0:E.experienceLevel))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti settimanali:"})," ",Et((E==null?void 0:E.trainingFrequency)||(E==null?void 0:E.trainingDaysPerWeek))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Durata sessione:"})," ",Et(E==null?void 0:E.workoutDuration)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Luogo allenamento:"})," ",Et(E==null?void 0:E.workoutLocation)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Attrezzatura:"})," ",Et(E==null?void 0:E.equipment)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti svolti:"})," ",Et(E==null?void 0:E.trainingTypeHistory)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Infortuni/problemi:"})," ",Et(E==null?void 0:E.hasInjuries)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Dettagli infortuni:"})," ",Et(E==null?void 0:E.injuryDetails)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Obiettivi"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Obiettivo principale:"})," ",Et((E==null?void 0:E.objectivePrimary)||(E==null?void 0:E.goal))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Perch:"})," ",Et(E==null?void 0:E.objectiveReason)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Timeline risultati:"})," ",Et(E==null?void 0:E.expectedTimeline)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",Et(E==null?void 0:E.whatBlockedSoFar)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",Et(E==null?void 0:E.oneThingToImprove)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Importanza obiettivo:"})," ",Et(E==null?void 0:E.importanceScore)," / 10"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Rischio se non cambia:"})," ",Et(E==null?void 0:E.riskIfNoChange)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",Et(E==null?void 0:E.notes)]})]})]}):null,Tt==="plans"?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"hint",children:yt.length>0?`Hai ${yt.length} scheda/e create: puoi modificarle, eliminarle o assegnarle ai clienti.`:"Non hai ancora schede create: inizia con una nuova scheda."}),g.jsx("div",{className:"supervisor-actions",children:g.jsx("button",{className:"btn",disabled:_,onClick:Fi,type:"button",children:"Crea nuova scheda"})}),yt.length>0?g.jsx("div",{className:"plan-carousel",children:yt.map(I=>g.jsxs("article",{className:"card plan-card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:I.title||"Scheda senza titolo"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Duplica scheda",title:"Duplica scheda",onClick:()=>void na(I.id),children:""})]}),g.jsxs("p",{className:"hint",children:["Tipo: ",I.kind==="circuit"?"Circuito":"Serie e reps"]}),g.jsxs("p",{className:"hint",children:["Esercizi: ",Yl(I.exercises).length]}),g.jsxs("p",{className:"hint",children:["Assegnata a: ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]}),g.jsxs("div",{className:"plan-card-actions",children:[g.jsx("button",{className:"btn btn-ghost",disabled:_,onClick:()=>ea(I.id),type:"button",children:"Visualizza"}),g.jsx("button",{className:"btn",disabled:_,onClick:()=>Pn(I.id),type:"button",children:"Modifica"}),g.jsx("button",{className:"btn btn-danger",disabled:_,onClick:()=>void ta(I.id),type:"button",children:"Elimina"})]})]},I.id))}):g.jsx("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:g.jsx("p",{className:"hint",children:"Nessuna scheda creata al momento."})})]}):null]})]}):null,se?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&$r(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Anagrafica completa cliente"}),g.jsxs("p",{className:"hero-sub",children:["Step ",he+1," di ",Xl.length,"  Completamento ",Yo,"%"]}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:`${Yo}%`}})}),g.jsx("div",{className:"step-tabs",children:Xl.map((I,H)=>g.jsx("button",{className:`step-tab ${he===H?"step-tab-active":""}`.trim(),type:"button",onClick:()=>$(H),children:I},I))}),he===0?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:U.fullName,onChange:I=>ot("fullName",I.target.value)})]}),g.jsxs("label",{children:["Et *",g.jsx("input",{type:"number",min:12,max:99,value:U.age,onChange:I=>ot("age",I.target.value)})]}),g.jsxs("label",{children:["Sesso *",g.jsx("input",{value:U.sex,onChange:I=>ot("sex",I.target.value)})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{type:"email",value:U.email,onChange:I=>ot("email",I.target.value)})]}),g.jsxs("label",{children:["Telefono *",g.jsx("input",{type:"tel",value:U.phone,onChange:I=>ot("phone",I.target.value)})]}),g.jsxs("label",{children:["Come ci ha conosciuto",g.jsx("input",{value:U.discoverySource,onChange:I=>ot("discoverySource",I.target.value)})]})]}):null,he===1?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Altezza (cm) *",g.jsx("input",{type:"number",min:100,max:250,value:U.heightCm,onChange:I=>ot("heightCm",I.target.value)})]}),g.jsxs("label",{children:["Peso (kg) *",g.jsx("input",{type:"number",min:30,max:250,value:U.weightKg,onChange:I=>ot("weightKg",I.target.value)})]}),g.jsxs("label",{children:["Programmi precedenti *",g.jsx("input",{value:U.pastProgram,onChange:I=>ot("pastProgram",I.target.value),placeholder:"Es. Si con coach online"})]}),g.jsxs("label",{children:["Frequenza allenamenti *",g.jsx("input",{value:U.trainingFrequency,onChange:I=>ot("trainingFrequency",I.target.value),placeholder:"Es. 3-4 a settimana"})]}),g.jsxs("label",{children:["Durata allenamento *",g.jsx("input",{value:U.workoutDuration,onChange:I=>ot("workoutDuration",I.target.value),placeholder:"Es. 45 minuti"})]}),g.jsxs("label",{children:["Dove si allena *",g.jsx("input",{value:U.workoutLocation,onChange:I=>ot("workoutLocation",I.target.value)})]}),g.jsxs("label",{children:["Attrezzatura disponibile *",g.jsx("input",{value:U.equipment,onChange:I=>ot("equipment",I.target.value)})]}),g.jsxs("label",{children:["Allenamenti fatti",g.jsx("textarea",{value:U.trainingTypeHistory,onChange:I=>ot("trainingTypeHistory",I.target.value)})]}),g.jsxs("label",{children:["Infortuni/problemi",g.jsx("input",{value:U.hasInjuries,onChange:I=>ot("hasInjuries",I.target.value),placeholder:"Si/No"})]}),g.jsxs("label",{children:["Dettagli infortuni",g.jsx("textarea",{value:U.injuryDetails,onChange:I=>ot("injuryDetails",I.target.value)})]})]}):null,he===2?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Obiettivo principale *",g.jsx("input",{value:U.objectivePrimary,onChange:I=>ot("objectivePrimary",I.target.value)})]}),g.jsxs("label",{children:["Perch questo obiettivo? *",g.jsx("textarea",{value:U.objectiveReason,onChange:I=>ot("objectiveReason",I.target.value)})]}),g.jsxs("label",{children:["Timeline risultati *",g.jsx("input",{value:U.expectedTimeline,onChange:I=>ot("expectedTimeline",I.target.value)})]}),g.jsxs("label",{children:["Cosa lo ha bloccato",g.jsx("textarea",{value:U.whatBlockedSoFar,onChange:I=>ot("whatBlockedSoFar",I.target.value)})]}),g.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",g.jsx("textarea",{value:U.oneThingToImprove,onChange:I=>ot("oneThingToImprove",I.target.value)})]}),g.jsxs("label",{children:["Importanza obiettivo (1-10)",g.jsx("input",{type:"number",min:1,max:10,value:U.importanceScore,onChange:I=>ot("importanceScore",I.target.value)})]}),g.jsxs("label",{children:["Rischio se non cambia",g.jsx("textarea",{value:U.riskIfNoChange,onChange:I=>ot("riskIfNoChange",I.target.value)})]}),g.jsxs("label",{children:["Note coach (opzionale)",g.jsx("textarea",{value:U.notes,onChange:I=>ot("notes",I.target.value)})]})]}):null,g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:he===0,onClick:()=>$(I=>Math.max(I-1,0)),children:"Indietro"}),he<Xl.length-1?g.jsx("button",{className:"btn",type:"button",onClick:()=>$(I=>Math.min(I+1,Xl.length-1)),children:"Continua"}):g.jsx("button",{className:"btn",type:"button",onClick:()=>void fo(),disabled:_,children:_?"Salvataggio...":"Salva"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:$r,children:"Chiudi"})]})}):null,O?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&Zt(),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:ht?"Modifica scheda":"Compila la scheda"}),g.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),g.jsxs("div",{className:"step-tabs plan-kind-tabs",children:[g.jsx("button",{className:`step-tab ${pn==="series_reps"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>at("series_reps"),children:"Serie e reps"}),g.jsx("button",{className:`step-tab ${pn==="circuit"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>at("circuit"),children:"Circuito"})]}),g.jsxs("label",{children:["Titolo scheda *",g.jsx("input",{value:Rt,onChange:I=>pt(I.target.value),placeholder:"Forza 4 settimane",required:!0})]}),g.jsxs("label",{children:["Riscaldamento (opzionale)",g.jsx("textarea",{value:Dn,onChange:I=>Er(I.target.value),placeholder:"Es. 8-10 min mobilit, attivazione scapole, squat a corpo libero..."})]}),g.jsxs("label",{children:["Note (opzionale)",g.jsx("textarea",{value:ir,onChange:I=>Vn(I.target.value),placeholder:"Note utili per il cliente"})]}),Fr.map((I,H)=>g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("h2",{children:["Esercizio ",H+1]}),g.jsx("button",{className:"icon-btn",type:"button",onClick:()=>_s(H),"aria-label":`Reset esercizio ${H+1}`,title:"Reset esercizio",children:""})]}),g.jsxs("label",{children:["Nome esercizio",g.jsx("input",{value:I.name,onChange:te=>jt(H,{name:te.target.value}),placeholder:"Es. Squat bilanciere"})]}),g.jsxs("label",{children:["Note esercizio",g.jsx("textarea",{value:I.notes,onChange:te=>jt(H,{notes:te.target.value}),placeholder:"Note utili per questo esercizio"})]}),g.jsxs("div",{className:"exercise-fields-inline",children:[pn==="series_reps"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Serie",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.sets,onChange:te=>jt(H,{sets:Number(te.target.value)})})]}),g.jsxs("label",{children:["Ripetizioni",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.reps,onChange:te=>jt(H,{reps:Number(te.target.value)})})]})]}):g.jsxs("label",{children:["Reps/tempo di lavoro",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.workValue,onChange:te=>jt(H,{workValue:Number(te.target.value)})})]}),g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:I.weightKg,onChange:te=>jt(H,{weightKg:Number(te.target.value)})})]}),g.jsxs("label",{children:["Recupero (sec)",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I.restSeconds,onChange:te=>jt(H,{restSeconds:Number(te.target.value)})})]})]}),g.jsxs("div",{className:"exercise-method-toggle",children:[g.jsx("p",{className:"hint",children:"Metodo opzionale"}),g.jsxs("div",{className:"exercise-method-toggle-row",children:[g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="rest_pause"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>jt(H,I.advancedMethod==="rest_pause"?{advancedMethod:"",advancedMethodNotes:""}:{advancedMethod:"rest_pause",advancedMethodNotes:""}),children:"Rest Pause"}),g.jsx("button",{className:`btn btn-ghost ${I.advancedMethod==="drop_set"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>jt(H,I.advancedMethod==="drop_set"?{advancedMethod:"",advancedMethodNotes:""}:{advancedMethod:"drop_set",advancedMethodNotes:""}),children:"Drop set"})]})]}),I.advancedMethod?g.jsxs("label",{children:[I.advancedMethod==="rest_pause"?"Note Rest Pause":"Note Drop set",g.jsx("textarea",{value:I.advancedMethodNotes,onChange:te=>jt(H,{advancedMethodNotes:te.target.value}),placeholder:"Inserisci indicazioni per il cliente"})]}):null,g.jsxs("label",{children:["URL video (YouTube o link diretto)",g.jsx("input",{value:M0(I.mediaUrl)?I.mediaUrl:"",onChange:te=>jt(H,{mediaUrl:te.target.value}),placeholder:"https://..."})]}),g.jsxs("label",{children:["Oppure carica un'immagine",g.jsx("input",{type:"file",accept:"image/*",onChange:te=>{var be;return void po(H,((be=te.target.files)==null?void 0:be[0])??null)},disabled:Ce===H}),ih(I.mediaUrl)?g.jsx("img",{src:I.mediaUrl,alt:`Anteprima esercizio ${H+1}`,className:"exercise-upload-preview"}):null]}),ih(I.mediaUrl)?g.jsxs("p",{className:"hint",children:["Immagine caricata."," ",g.jsx("button",{className:"btn-link",type:"button",onClick:()=>jt(H,{mediaUrl:""}),children:"Rimuovi"})]}):null,Ce===H?g.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>ys(H),children:"Rimuovi esercizio"})]},`exercise-${H}`)),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:ho,children:"Aggiungi esercizio"}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Zt,children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||li,onClick:()=>void Zo(),children:li?"Attendi caricamento media...":"Salva"})]})]})}):null,C&&Lt?g.jsx("section",{className:"modal-overlay preview-modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&B(!1),children:g.jsxs("article",{className:"card modal-card print-sheet preview-modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("div",{className:"preview-head-main",children:[g.jsx("button",{className:"icon-btn mobile-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>B(!1),children:""}),g.jsx("h2",{children:"Scheda"})]}),g.jsxs("div",{className:"preview-head-actions screen-only",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:u.length===0,onClick:()=>{Di([]),K(!0)},children:"Assegna"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Stampa scheda",title:"Stampa scheda",onClick:Jo,children:""}),g.jsx("button",{className:"icon-btn desktop-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>B(!1),children:""})]})]}),g.jsxs("p",{className:"hint",children:["Clienti assegnati:"," ",g.jsx("strong",{children:Array.isArray(Lt.assignedClientIds)&&Lt.assignedClientIds.length>0?Lt.assignedClientIds.map(I=>or[I]||I).join(", "):"Nessuno"})]}),g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Titolo programma"}),g.jsx("h3",{children:Lt.title||"Senza titolo"})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:Lt.kind==="circuit"?"Circuito":"Serie e reps"})]}),Ee(Lt.warmup).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",Ee(Lt.warmup)]})}):null,Ee(Lt.notes).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",Ee(Lt.notes)]})}):null,g.jsx("div",{className:"exercise-grid",children:Yl(Lt.exercises).map((I,H)=>g.jsx("article",{className:"exercise-card",children:(()=>{const te=`${Lt.id}-${H}`,be=ee[te]!==!1;return g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"exercise-name",children:I.name||`Esercizio ${H+1}`}),g.jsxs("div",{className:"exercise-meta",children:[Lt.kind==="circuit"?g.jsxs("span",{children:[I.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[I.sets||"-"," serie"]}),g.jsxs("span",{children:[I.reps||"-"," reps"]})]}),g.jsxs("span",{children:[I.weightKg||0," kg"]}),g.jsxs("span",{children:[I.restSeconds||0," sec recupero"]})]}),I.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",I.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,I.advancedMethod&&I.advancedMethodNotes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",I.advancedMethodNotes]}):null,I.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",I.notes]}):null,I.mediaUrl?g.jsxs(g.Fragment,{children:[ih(I.mediaUrl)?g.jsxs(g.Fragment,{children:[be?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:I.mediaUrl,alt:`Media esercizio ${H+1}`,className:"exercise-upload-preview",style:{display:be?"none":"block"},onLoad:()=>X(He=>({...He,[te]:!1})),onError:()=>X(He=>({...He,[te]:!1}))})]}):null,M0(I.mediaUrl)?g.jsxs(g.Fragment,{children:[g.jsx("a",{className:"btn-link screen-only",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri video"}),g.jsxs("a",{className:"hint print-only print-video-link",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:["URL video: ",I.mediaUrl]})]}):ih(I.mediaUrl)?null:g.jsx("a",{className:"btn-link",href:I.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri link"})]}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]})})()},`preview-ex-${H}`))})]})}):null,Q&&Be?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&K(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h2",{children:"Gestisci assegnazioni"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Chiudi gestione assegnazioni",title:"Chiudi",onClick:()=>K(!1),children:""})]}),g.jsxs("p",{className:"hint",children:["Scheda: ",Be.title||"Scheda senza titolo"]}),g.jsxs("label",{children:["Clienti",g.jsx(V0,{styles:Un,options:Li,value:lr,onChange:I=>Di(I.map(H=>H.value)),placeholder:Li.length===0?"Tutti i clienti sono gi assegnati":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1})]}),g.jsx("div",{className:"action-row-split",children:g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||Ur.length===0,onClick:()=>void ws(),children:"Assegna"})}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Clienti assegnati"}),Array.isArray(Be.assignedClientIds)&&Be.assignedClientIds.length>0?g.jsx("ul",{className:"assigned-client-list",children:Be.assignedClientIds.map(I=>{const H=ui(Be,I);return g.jsxs("li",{className:"assigned-client-item",children:[g.jsxs("div",{children:[g.jsx("span",{className:"assigned-client-name",children:or[I]||I}),g.jsx("span",{className:`assignment-status assignment-status-${H.tone}`.trim(),children:H.label})]}),g.jsxs("div",{className:"assigned-client-actions",children:[g.jsx("button",{className:"icon-btn assigned-client-time-btn",type:"button","aria-label":`Imposta durata ${or[I]||I}`,title:"Imposta durata",disabled:_,onClick:()=>Ui(I),children:""}),g.jsx("button",{className:"icon-btn icon-btn-danger assigned-client-remove-btn",type:"button","aria-label":`Rimuovi ${or[I]||I}`,title:"Rimuovi cliente",disabled:_,onClick:()=>void Es(I),children:""})]})]},I)})}):g.jsx("p",{className:"hint",children:"Nessun cliente assegnato a questa scheda."})]})]})}):null,lo&&Be?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&ai(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Durata assegnazione"}),g.jsxs("p",{className:"hint",children:["Cliente: ",g.jsx("strong",{children:or[sr]||sr})]}),g.jsxs("div",{className:"step-tabs",children:[g.jsx("button",{className:`step-tab ${Sr==="permanent"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>mn("permanent"),children:"Permanente"}),g.jsx("button",{className:`step-tab ${Sr==="timed"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>mn("timed"),children:"A tempo"})]}),Sr==="timed"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Data inizio",g.jsx("input",{type:"date",value:jn,onChange:I=>gs(I.target.value)})]}),g.jsxs("label",{children:["Settimane",g.jsx("input",{type:"number",min:1,step:1,value:Ln,onChange:I=>Mi(I.target.value)})]}),mo()?g.jsxs("p",{className:"hint",children:["Disponibile dal ",g.jsx("strong",{children:mo().from})," al ",g.jsx("strong",{children:mo().to})]}):null]}):g.jsx("p",{className:"hint",children:"La scheda rester sempre disponibile finch non rimuovi l'assegnazione."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>ai(!1),children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_,onClick:()=>void Br(),children:"Salva"})]})]})}):null,A&&!(ie!=null&&ie.isSupervisor)?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:I=>I.currentTarget===I.target&&N(!1),children:g.jsxs("article",{className:"card modal-card",onClick:I=>I.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo coach"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente dati, abbonamento e associazioni clienti legate al tuo account coach."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:j,onClick:()=>N(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:j,onClick:()=>void ci(),children:j?"Eliminazione...":"Conferma eliminazione"})]})]})}):null,Tt==="overview"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Panoramica"}),g.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),g.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),g.jsx("ul",{className:"list",children:f.slice(0,5).map(I=>{var H;return g.jsxs("li",{children:[g.jsx("strong",{children:I.title}),"  ",((H=I.exercises)==null?void 0:H.length)??0," esercizi  assegnata a ",Array.isArray(I.assignedClientIds)?I.assignedClientIds.length:0," clienti"]},I.id)})})]}):null,_?g.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function Ij(){const{user:n,role:e}=pl(),t=bu(),{showError:r,showSuccess:s}=Xh(),[a,u]=V.useState(!1),[d,f]=V.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return g.jsx(ni,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return g.jsx(ni,{to:"/app/coach",replace:!0});function m(E,P){f(O=>({...O,[E]:P}))}function _(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function S(){const E=_();if(E){r(E);return}u(!0);try{await t2({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(P){r(Ct(P))}finally{u(!1)}}return g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),g.jsx("h1",{children:"Completa il tuo profilo"}),g.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:d.fullName,onChange:E=>m("fullName",E.target.value),placeholder:"Nome e cognome"})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{value:d.email,onChange:E=>m("email",E.target.value),type:"email",placeholder:"nome@esempio.com"})]}),g.jsxs("label",{children:["Numero di telefono *",g.jsx("input",{value:d.phone,onChange:E=>m("phone",E.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),g.jsxs("label",{children:["Codice coach *",g.jsx("input",{value:d.coachCode,onChange:E=>m("coachCode",E.target.value),placeholder:"Es. lorenzobeastly"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void yr(),children:"Esci e cambia account"}),g.jsx("button",{className:"btn btn-primary",disabled:a,type:"button",onClick:()=>void S(),children:a?"Salvataggio...":"Continua"})]})]})})}function ZI(){return g.jsx("main",{className:"page page-center",children:g.jsxs("div",{className:"card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Caricamento in corso"})]})})}class bj extends V.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Qualcosa non ha funzionato"}),g.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function U0({allow:n,children:e}){const{user:t,role:r,initializing:s}=pl();return s?g.jsx(ZI,{}):t?r?n.includes(r)?e:g.jsx(ni,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:g.jsx(ni,{to:"/onboarding",replace:!0}):g.jsx(ni,{to:"/auth",replace:!0})}function Cj(){const{user:n,role:e,initializing:t}=pl();return t?g.jsx(ZI,{}):n?e?g.jsx(ni,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx(ni,{to:"/app/client",replace:!0}):g.jsx(ni,{to:"/auth",replace:!0})}function Aj(){return g.jsx(bj,{children:g.jsxs(i1,{children:[g.jsx(Oo,{path:"/",element:g.jsx(Cj,{})}),g.jsx(Oo,{path:"/auth",element:g.jsx(b2,{})}),g.jsx(Oo,{path:"/onboarding",element:g.jsx(Ij,{})}),g.jsx(Oo,{path:"/app/coach",element:g.jsx(U0,{allow:["admin","trainer"],children:g.jsx(Tj,{})})}),g.jsx(Oo,{path:"/app/client",element:g.jsx(U0,{allow:["client"],children:g.jsx(C2,{})})}),g.jsx(Oo,{path:"*",element:g.jsx(ni,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});dC.createRoot(document.getElementById("root")).render(g.jsx($0.StrictMode,{children:g.jsx(c1,{children:g.jsx(a1,{children:g.jsx(Aj,{})})})}));
