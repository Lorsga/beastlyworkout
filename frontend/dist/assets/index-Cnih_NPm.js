function rC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function $0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var np={exports:{}},Gl={},rp={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function iC(){if(Xy)return Qe;Xy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function C(B,U,ue){this.props=B,this.context=U,this.refs=R,this.updater=ue||P}C.prototype.isReactComponent={},C.prototype.setState=function(B,U){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,U,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=C.prototype;function Q(B,U,ue){this.props=B,this.context=U,this.refs=R,this.updater=ue||P}var G=Q.prototype=new $;G.constructor=Q,O(G,C.prototype),G.isPureReactComponent=!0;var Z=Array.isArray,X=Object.prototype.hasOwnProperty,ie={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(B,U,ue){var be,Se={},ce=null,je=null;if(U!=null)for(be in U.ref!==void 0&&(je=U.ref),U.key!==void 0&&(ce=""+U.key),U)X.call(U,be)&&!k.hasOwnProperty(be)&&(Se[be]=U[be]);var Ve=arguments.length-2;if(Ve===1)Se.children=ue;else if(1<Ve){for(var Ge=Array(Ve),ne=0;ne<Ve;ne++)Ge[ne]=arguments[ne+2];Se.children=Ge}if(B&&B.defaultProps)for(be in Ve=B.defaultProps,Ve)Se[be]===void 0&&(Se[be]=Ve[be]);return{$$typeof:n,type:B,key:ce,ref:je,props:Se,_owner:ie.current}}function N(B,U){return{$$typeof:n,type:B.type,key:U,ref:B.ref,props:B.props,_owner:B._owner}}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var U={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ue){return U[ue]})}var L=/\/+/g;function x(B,U){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):U.toString(36)}function Fe(B,U,ue,be,Se){var ce=typeof B;(ce==="undefined"||ce==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(ce){case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case n:case e:je=!0}}if(je)return je=B,Se=Se(je),B=be===""?"."+x(je,0):be,Z(Se)?(ue="",B!=null&&(ue=B.replace(L,"$&/")+"/"),Fe(Se,U,ue,"",function(ne){return ne})):Se!=null&&(j(Se)&&(Se=N(Se,ue+(!Se.key||je&&je.key===Se.key?"":(""+Se.key).replace(L,"$&/")+"/")+B)),U.push(Se)),1;if(je=0,be=be===""?".":be+":",Z(B))for(var Ve=0;Ve<B.length;Ve++){ce=B[Ve];var Ge=be+x(ce,Ve);je+=Fe(ce,U,ue,Ge,Se)}else if(Ge=w(B),typeof Ge=="function")for(B=Ge.call(B),Ve=0;!(ce=B.next()).done;)ce=ce.value,Ge=be+x(ce,Ve++),je+=Fe(ce,U,ue,Ge,Se);else if(ce==="object")throw U=String(B),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return je}function Oe(B,U,ue){if(B==null)return B;var be=[],Se=0;return Fe(B,be,"","",function(ce){return U.call(ue,ce,Se++)}),be}function $e(B){if(B._status===-1){var U=B._result;U=U(),U.then(function(ue){(B._status===0||B._status===-1)&&(B._status=1,B._result=ue)},function(ue){(B._status===0||B._status===-1)&&(B._status=2,B._result=ue)}),B._status===-1&&(B._status=0,B._result=U)}if(B._status===1)return B._result.default;throw B._result}var De={current:null},ae={transition:null},ve={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ie};function de(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:Oe,forEach:function(B,U,ue){Oe(B,function(){U.apply(this,arguments)},ue)},count:function(B){var U=0;return Oe(B,function(){U++}),U},toArray:function(B){return Oe(B,function(U){return U})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Qe.Component=C,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=Q,Qe.StrictMode=r,Qe.Suspense=f,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Qe.act=de,Qe.cloneElement=function(B,U,ue){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var be=O({},B.props),Se=B.key,ce=B.ref,je=B._owner;if(U!=null){if(U.ref!==void 0&&(ce=U.ref,je=ie.current),U.key!==void 0&&(Se=""+U.key),B.type&&B.type.defaultProps)var Ve=B.type.defaultProps;for(Ge in U)X.call(U,Ge)&&!k.hasOwnProperty(Ge)&&(be[Ge]=U[Ge]===void 0&&Ve!==void 0?Ve[Ge]:U[Ge])}var Ge=arguments.length-2;if(Ge===1)be.children=ue;else if(1<Ge){Ve=Array(Ge);for(var ne=0;ne<Ge;ne++)Ve[ne]=arguments[ne+2];be.children=Ve}return{$$typeof:n,type:B.type,key:Se,ref:ce,props:be,_owner:je}},Qe.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Qe.createElement=A,Qe.createFactory=function(B){var U=A.bind(null,B);return U.type=B,U},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(B){return{$$typeof:d,render:B}},Qe.isValidElement=j,Qe.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:$e}},Qe.memo=function(B,U){return{$$typeof:m,type:B,compare:U===void 0?null:U}},Qe.startTransition=function(B){var U=ae.transition;ae.transition={};try{B()}finally{ae.transition=U}},Qe.unstable_act=de,Qe.useCallback=function(B,U){return De.current.useCallback(B,U)},Qe.useContext=function(B){return De.current.useContext(B)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(B){return De.current.useDeferredValue(B)},Qe.useEffect=function(B,U){return De.current.useEffect(B,U)},Qe.useId=function(){return De.current.useId()},Qe.useImperativeHandle=function(B,U,ue){return De.current.useImperativeHandle(B,U,ue)},Qe.useInsertionEffect=function(B,U){return De.current.useInsertionEffect(B,U)},Qe.useLayoutEffect=function(B,U){return De.current.useLayoutEffect(B,U)},Qe.useMemo=function(B,U){return De.current.useMemo(B,U)},Qe.useReducer=function(B,U,ue){return De.current.useReducer(B,U,ue)},Qe.useRef=function(B){return De.current.useRef(B)},Qe.useState=function(B){return De.current.useState(B)},Qe.useSyncExternalStore=function(B,U,ue){return De.current.useSyncExternalStore(B,U,ue)},Qe.useTransition=function(){return De.current.useTransition()},Qe.version="18.3.1",Qe}var Yy;function Im(){return Yy||(Yy=1,rp.exports=iC()),rp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function sC(){if(Jy)return Gl;Jy=1;var n=Im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,S={},w=null,P=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(S[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)S[_]===void 0&&(S[_]=f[_]);return{$$typeof:e,type:d,key:w,ref:P,props:S,_owner:s.current}}return Gl.Fragment=t,Gl.jsx=u,Gl.jsxs=u,Gl}var Zy;function oC(){return Zy||(Zy=1,np.exports=sC()),np.exports}var g=oC(),V=Im();const B0=$0(V),Vp=rC({__proto__:null,default:B0},[V]);var Bc={},ip={exports:{}},ir={},sp={exports:{}},op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function aC(){return e_||(e_=1,(function(n){function e(ae,ve){var de=ae.length;ae.push(ve);e:for(;0<de;){var B=de-1>>>1,U=ae[B];if(0<s(U,ve))ae[B]=ve,ae[de]=U,de=B;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ve=ae[0],de=ae.pop();if(de!==ve){ae[0]=de;e:for(var B=0,U=ae.length,ue=U>>>1;B<ue;){var be=2*(B+1)-1,Se=ae[be],ce=be+1,je=ae[ce];if(0>s(Se,de))ce<U&&0>s(je,Se)?(ae[B]=je,ae[ce]=de,B=ce):(ae[B]=Se,ae[be]=de,B=be);else if(ce<U&&0>s(je,de))ae[B]=je,ae[ce]=de,B=ce;else break e}}return ve}function s(ae,ve){var de=ae.sortIndex-ve.sortIndex;return de!==0?de:ae.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,S=null,w=3,P=!1,O=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ae){for(var ve=t(m);ve!==null;){if(ve.callback===null)r(m);else if(ve.startTime<=ae)r(m),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(m)}}function Z(ae){if(R=!1,G(ae),!O)if(t(f)!==null)O=!0,$e(X);else{var ve=t(m);ve!==null&&De(Z,ve.startTime-ae)}}function X(ae,ve){O=!1,R&&(R=!1,$(A),A=-1),P=!0;var de=w;try{for(G(ve),S=t(f);S!==null&&(!(S.expirationTime>ve)||ae&&!M());){var B=S.callback;if(typeof B=="function"){S.callback=null,w=S.priorityLevel;var U=B(S.expirationTime<=ve);ve=n.unstable_now(),typeof U=="function"?S.callback=U:S===t(f)&&r(f),G(ve)}else r(f);S=t(f)}if(S!==null)var ue=!0;else{var be=t(m);be!==null&&De(Z,be.startTime-ve),ue=!1}return ue}finally{S=null,w=de,P=!1}}var ie=!1,k=null,A=-1,N=5,j=-1;function M(){return!(n.unstable_now()-j<N)}function L(){if(k!==null){var ae=n.unstable_now();j=ae;var ve=!0;try{ve=k(!0,ae)}finally{ve?x():(ie=!1,k=null)}}else ie=!1}var x;if(typeof Q=="function")x=function(){Q(L)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Oe=Fe.port2;Fe.port1.onmessage=L,x=function(){Oe.postMessage(null)}}else x=function(){C(L,0)};function $e(ae){k=ae,ie||(ie=!0,x())}function De(ae,ve){A=C(function(){ae(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){O||P||(O=!0,$e(X))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(w){case 1:case 2:case 3:var ve=3;break;default:ve=w}var de=w;w=ve;try{return ae()}finally{w=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var de=w;w=ae;try{return ve()}finally{w=de}},n.unstable_scheduleCallback=function(ae,ve,de){var B=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?B+de:B):de=B,ae){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=de+U,ae={id:_++,callback:ve,priorityLevel:ae,startTime:de,expirationTime:U,sortIndex:-1},de>B?(ae.sortIndex=de,e(m,ae),t(f)===null&&ae===t(m)&&(R?($(A),A=-1):R=!0,De(Z,de-B))):(ae.sortIndex=U,e(f,ae),O||P||(O=!0,$e(X))),ae},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ae){var ve=w;return function(){var de=w;w=ve;try{return ae.apply(this,arguments)}finally{w=de}}}})(op)),op}var t_;function lC(){return t_||(t_=1,sp.exports=aC()),sp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function uC(){if(n_)return ir;n_=1;var n=Im(),e=lC();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},S={};function w(i){return f.call(S,i)?!0:f.call(_,i)?!1:m.test(i)?S[i]=!0:(_[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function R(i,o,l,h,p,y,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new R(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace($,Q);C[o]=new R(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,l,h){var p=C.hasOwnProperty(o)?C[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,l,p,h)&&(l=null),h||p===null?w(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),ie=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,B;function U(i){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var ue=!1;function be(i,o){if(!i||ue)return"";ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var h=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){h=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){h=Y}i()}}catch(Y){if(Y&&h&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),y=h.stack.split(`
`),I=p.length-1,D=y.length-1;1<=I&&0<=D&&p[I]!==y[D];)D--;for(;1<=I&&0<=D;I--,D--)if(p[I]!==y[D]){if(I!==1||D!==1)do if(I--,D--,0>D||p[I]!==y[D]){var F=`
`+p[I].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=I&&0<=D);break}}}finally{ue=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?U(i):""}function Se(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case ie:return"Portal";case N:return"Profiler";case A:return"StrictMode";case x:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Oe:return o=i.displayName||null,o!==null?o:ce(i.type)||"Memo";case $e:o=i._payload,i=i._init;try{return ce(i(o))}catch{}}return null}function je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ne(i){var o=Ge(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(I){h=""+I,y.call(this,I)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function We(i){i._valueTracker||(i._valueTracker=ne(i))}function st(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Ge(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function ct(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ht(i,o){var l=o.checked;return de({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Nt(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Je(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function nn(i,o){Je(i,o);var l=Ve(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Fn(i,o.type,l):o.hasOwnProperty("defaultValue")&&Fn(i,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function $t(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Fn(i,o,l){(o!=="number"||ct(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Ct=Array.isArray;function Be(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function At(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dr(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Ct(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Ve(l)}}function cn(i,o){var l=Ve(o.value),h=Ve(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function Hr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ot(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ot(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Un,br=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Un=Un||document.createElement("div"),Un.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Un.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function fr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wr=["Webkit","ms","Moz","O"];Object.keys(zn).forEach(function(i){Wr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),zn[o]=zn[i]})});function $n(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||zn.hasOwnProperty(i)&&zn[i]?(""+o).trim():o+"px"}function qr(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=$n(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Fi=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(i,o){if(o){if(Fi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ui(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pr=null;function Ui(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cr=null,_n=null,Bn=null;function zi(i){if(i=Ol(i)){if(typeof Cr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=ic(o),Cr(i.stateNode,i.type,o))}}function Hn(i){_n?Bn?Bn.push(i):Bn=[i]:_n=i}function ys(){if(_n){var i=_n,o=Bn;if(Bn=_n=null,zi(i),o)for(i=0;i<o.length;i++)zi(o[i])}}function ci(i,o){return i(o)}function rn(){}var St=!1;function He(i,o,l){if(St)return i(o,l);St=!0;try{return ci(i,o,l)}finally{St=!1,(_n!==null||Bn!==null)&&(rn(),ys())}}function mt(i,o){var l=i.stateNode;if(l===null)return null;var h=ic(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Dt=!1;if(d)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Dt=!1}function qn(i,o,l,h,p,y,I,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(oe){this.onError(oe)}}var hi=!1,Ar=null,Kn=!1,fo=null,vl={onError:function(i){hi=!0,Ar=i}};function $i(i,o,l,h,p,y,I,D,F){hi=!1,Ar=null,qn.apply(vl,arguments)}function Zo(i,o,l,h,p,y,I,D,F){if($i.apply(this,arguments),hi){if(hi){var Y=Ar;hi=!1,Ar=null}else throw Error(t(198));Kn||(Kn=!0,fo=Y)}}function Gn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function di(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Rn(i){if(Gn(i)!==i)throw Error(t(188))}function po(i){var o=i.alternate;if(!o){if(o=Gn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Rn(p),i;if(y===h)return Rn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var I=!1,D=p.child;D;){if(D===l){I=!0,l=p,h=y;break}if(D===h){I=!0,h=p,l=y;break}D=D.sibling}if(!I){for(D=y.child;D;){if(D===l){I=!0,l=y,h=p;break}if(D===h){I=!0,h=y,l=p;break}D=D.sibling}if(!I)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Qn(i){return i=po(i),i!==null?_s(i):null}function _s(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=_s(i);if(o!==null)return o;i=i.sibling}return null}var ws=e.unstable_scheduleCallback,mo=e.unstable_cancelCallback,Yt=e.unstable_shouldYield,dt=e.unstable_requestPaint,ft=e.unstable_now,go=e.unstable_getCurrentPriorityLevel,Bi=e.unstable_ImmediatePriority,fi=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,vo=e.unstable_LowPriority,ea=e.unstable_IdlePriority,Hi=null,xn=null;function ta(i){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Hi,i,void 0,(i.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:ra,Es=Math.log,na=Math.LN2;function ra(i){return i>>>=0,i===0?32:31-(Es(i)/na|0)|0}var Ss=64,Ts=4194304;function pi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Wi(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,I=l&268435455;if(I!==0){var D=I&~p;D!==0?h=pi(D):(y&=I,y!==0&&(h=pi(y)))}else I=l&~p,I!==0?h=pi(I):y!==0&&(h=pi(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-hn(o),p=1<<l,h|=i[l],o&=~p;return h}function yl(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var I=31-hn(y),D=1<<I,F=p[I];F===-1?((D&l)===0||(D&h)!==0)&&(p[I]=yl(D,o)):F<=o&&(i.expiredLanes|=D),y&=~D}}function Nn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function mi(){var i=Ss;return Ss<<=1,(Ss&4194240)===0&&(Ss=64),i}function gi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function vi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-hn(o),i[o]=l}function lt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-hn(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function yi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-hn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var T=0;function q(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ee,Ie,qe,Pr,Rr,yo=!1,kr=[],Bt=null,Xn=null,Kr=null,Is=new Map,xr=new Map,_i=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zu(i,o){switch(i){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Is.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xr.delete(o.pointerId)}}function Yn(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Ol(o),o!==null&&Ie(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Od(i,o,l,h,p){switch(o){case"focusin":return Bt=Yn(Bt,i,o,l,h,p),!0;case"dragenter":return Xn=Yn(Xn,i,o,l,h,p),!0;case"mouseover":return Kr=Yn(Kr,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return Is.set(y,Yn(Is.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,xr.set(y,Yn(xr.get(y)||null,i,o,l,h,p)),!0}return!1}function $u(i){var o=To(i.target);if(o!==null){var l=Gn(o);if(l!==null){if(o=l.tag,o===13){if(o=di(l),o!==null){i.blockedOn=o,Rr(i.priority,function(){qe(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=ia(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);pr=h,l.target.dispatchEvent(h),pr=null}else return o=Ol(l),o!==null&&Ie(o),i.blockedOn=l,!1;o.shift()}return!0}function _o(i,o,l){qi(i)&&l.delete(o)}function Bu(){yo=!1,Bt!==null&&qi(Bt)&&(Bt=null),Xn!==null&&qi(Xn)&&(Xn=null),Kr!==null&&qi(Kr)&&(Kr=null),Is.forEach(_o),xr.forEach(_o)}function Gr(i,o){i.blockedOn===o&&(i.blockedOn=null,yo||(yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bu)))}function Qr(i){function o(p){return Gr(p,i)}if(0<kr.length){Gr(kr[0],i);for(var l=1;l<kr.length;l++){var h=kr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Bt!==null&&Gr(Bt,i),Xn!==null&&Gr(Xn,i),Kr!==null&&Gr(Kr,i),Is.forEach(o),xr.forEach(o),l=0;l<_i.length;l++)h=_i[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<_i.length&&(l=_i[0],l.blockedOn===null);)$u(l),l.blockedOn===null&&_i.shift()}var Ki=Z.ReactCurrentBatchConfig,bs=!0;function Tt(i,o,l,h){var p=T,y=Ki.transition;Ki.transition=null;try{T=1,_l(i,o,l,h)}finally{T=p,Ki.transition=y}}function Dd(i,o,l,h){var p=T,y=Ki.transition;Ki.transition=null;try{T=4,_l(i,o,l,h)}finally{T=p,Ki.transition=y}}function _l(i,o,l,h){if(bs){var p=ia(i,o,l,h);if(p===null)Wd(i,o,h,wo,l),zu(i,h);else if(Od(p,i,o,l,h))h.stopPropagation();else if(zu(i,h),o&4&&-1<Nd.indexOf(i)){for(;p!==null;){var y=Ol(p);if(y!==null&&ee(y),y=ia(i,o,l,h),y===null&&Wd(i,o,h,wo,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Wd(i,o,h,null,l)}}var wo=null;function ia(i,o,l,h){if(wo=null,i=Ui(h),i=To(i),i!==null)if(o=Gn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=di(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return wo=i,null}function wl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(go()){case Bi:return 1;case fi:return 4;case kn:case vo:return 16;case ea:return 536870912;default:return 16}default:return 16}}var gr=null,sa=null,Jn=null;function El(){if(Jn)return Jn;var i,o=sa,l=o.length,h,p="value"in gr?gr.value:gr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var I=l-i;for(h=1;h<=I&&o[l-h]===p[y-h];h++);return Jn=p.slice(i,1<h?1-h:void 0)}function oa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function wi(){return!0}function Sl(){return!1}function dn(i){function o(l,h,p,y,I){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=I,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wi:Sl,this.isPropagationStopped=Sl,this}return de(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),o}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=dn(Xr),Ei=de({},Xr,{view:0,detail:0}),Vd=dn(Ei),la,Gi,Cs,Eo=de({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Cs&&(Cs&&i.type==="mousemove"?(la=i.screenX-Cs.screenX,Gi=i.screenY-Cs.screenY):Gi=la=0,Cs=i),la)},movementY:function(i){return"movementY"in i?i.movementY:Gi}}),ua=dn(Eo),Tl=de({},Eo,{dataTransfer:0}),Hu=dn(Tl),ca=de({},Ei,{relatedTarget:0}),ha=dn(ca),Wu=de({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qi=dn(Wu),qu=de({},Xr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ku=dn(qu),Gu=de({},Xr,{data:0}),Il=dn(Gu),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},On={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Qu[i])?!!o[i]:!1}function Si(){return Xu}var c=de({},Ei,{key:function(i){if(i.key){var o=da[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=oa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?On[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(i){return i.type==="keypress"?oa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?oa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=dn(c),E=de({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=dn(E),H=de({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),J=dn(H),fe=de({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ut=dn(fe),Jt=de({},Eo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ze=dn(Jt),sn=[9,13,27,32],Ht=d&&"CompositionEvent"in window,Nr=null;d&&"documentMode"in document&&(Nr=document.documentMode);var vr=d&&"TextEvent"in window&&!Nr,So=d&&(!Ht||Nr&&8<Nr&&11>=Nr),fa=" ",Hg=!1;function Wg(i,o){switch(i){case"keyup":return sn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pa=!1;function eb(i,o){switch(i){case"compositionend":return qg(o);case"keypress":return o.which!==32?null:(Hg=!0,fa);case"textInput":return i=o.data,i===fa&&Hg?null:i;default:return null}}function tb(i,o){if(pa)return i==="compositionend"||!Ht&&Wg(i,o)?(i=El(),Jn=sa=gr=null,pa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return So&&o.locale!=="ko"?null:o.data;default:return null}}var nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!nb[i.type]:o==="textarea"}function Gg(i,o,l,h){Hn(h),o=tc(o,"onChange"),0<o.length&&(l=new aa("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var bl=null,Cl=null;function rb(i){dv(i,0)}function Yu(i){var o=_a(i);if(st(o))return i}function ib(i,o){if(i==="change")return o}var Qg=!1;if(d){var Md;if(d){var Ld="oninput"in document;if(!Ld){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),Ld=typeof Xg.oninput=="function"}Md=Ld}else Md=!1;Qg=Md&&(!document.documentMode||9<document.documentMode)}function Yg(){bl&&(bl.detachEvent("onpropertychange",Jg),Cl=bl=null)}function Jg(i){if(i.propertyName==="value"&&Yu(Cl)){var o=[];Gg(o,Cl,i,Ui(i)),He(rb,o)}}function sb(i,o,l){i==="focusin"?(Yg(),bl=o,Cl=l,bl.attachEvent("onpropertychange",Jg)):i==="focusout"&&Yg()}function ob(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yu(Cl)}function ab(i,o){if(i==="click")return Yu(o)}function lb(i,o){if(i==="input"||i==="change")return Yu(o)}function ub(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Yr=typeof Object.is=="function"?Object.is:ub;function Al(i,o){if(Yr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!Yr(i[p],o[p]))return!1}return!0}function Zg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ev(i,o){var l=Zg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zg(l)}}function tv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?tv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function nv(){for(var i=window,o=ct();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=ct(i.document)}return o}function jd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function cb(i){var o=nv(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&tv(l.ownerDocument.documentElement,l)){if(h!==null&&jd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=ev(l,y);var I=ev(l,h);p&&I&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var hb=d&&"documentMode"in document&&11>=document.documentMode,ma=null,Fd=null,Pl=null,Ud=!1;function rv(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ud||ma==null||ma!==ct(h)||(h=ma,"selectionStart"in h&&jd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Pl&&Al(Pl,h)||(Pl=h,h=tc(Fd,"onSelect"),0<h.length&&(o=new aa("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=ma)))}function Ju(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var ga={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},zd={},iv={};d&&(iv=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Zu(i){if(zd[i])return zd[i];if(!ga[i])return i;var o=ga[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in iv)return zd[i]=o[l];return i}var sv=Zu("animationend"),ov=Zu("animationiteration"),av=Zu("animationstart"),lv=Zu("transitionend"),uv=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(i,o){uv.set(i,o),a(o,[i])}for(var $d=0;$d<cv.length;$d++){var Bd=cv[$d],db=Bd.toLowerCase(),fb=Bd[0].toUpperCase()+Bd.slice(1);As(db,"on"+fb)}As(sv,"onAnimationEnd"),As(ov,"onAnimationIteration"),As(av,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(lv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function hv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,Zo(h,o,void 0,i),i.currentTarget=null}function dv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var I=h.length-1;0<=I;I--){var D=h[I],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==y&&p.isPropagationStopped())break e;hv(p,D,Y),y=F}else for(I=0;I<h.length;I++){if(D=h[I],F=D.instance,Y=D.currentTarget,D=D.listener,F!==y&&p.isPropagationStopped())break e;hv(p,D,Y),y=F}}}if(Kn)throw i=fo,Kn=!1,fo=null,i}function _t(i,o){var l=o[Yd];l===void 0&&(l=o[Yd]=new Set);var h=i+"__bubble";l.has(h)||(fv(o,i,2,!1),l.add(h))}function Hd(i,o,l){var h=0;o&&(h|=4),fv(l,i,h,o)}var ec="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[ec]){i[ec]=!0,r.forEach(function(l){l!=="selectionchange"&&(pb.has(l)||Hd(l,!1,i),Hd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ec]||(o[ec]=!0,Hd("selectionchange",!1,o))}}function fv(i,o,l,h){switch(wl(o)){case 1:var p=Tt;break;case 4:p=Dd;break;default:p=_l}l=p.bind(null,o,l,i),p=void 0,!Dt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Wd(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var D=h.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(I===4)for(I=h.return;I!==null;){var F=I.tag;if((F===3||F===4)&&(F=I.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;I=I.return}for(;D!==null;){if(I=To(D),I===null)return;if(F=I.tag,F===5||F===6){h=y=I;continue e}D=D.parentNode}}h=h.return}He(function(){var Y=y,oe=Ui(l),le=[];e:{var se=uv.get(i);if(se!==void 0){var me=aa,_e=i;switch(i){case"keypress":if(oa(l)===0)break e;case"keydown":case"keyup":me=v;break;case"focusin":_e="focus",me=ha;break;case"focusout":_e="blur",me=ha;break;case"beforeblur":case"afterblur":me=ha;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=J;break;case sv:case ov:case av:me=Qi;break;case lv:me=ut;break;case"scroll":me=Vd;break;case"wheel":me=Ze;break;case"copy":case"cut":case"paste":me=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=b}var Ee=(o&4)!==0,Ft=!Ee&&i==="scroll",W=Ee?se!==null?se+"Capture":null:se;Ee=[];for(var z=Y,K;z!==null;){K=z;var he=K.stateNode;if(K.tag===5&&he!==null&&(K=he,W!==null&&(he=mt(z,W),he!=null&&Ee.push(xl(z,he,K)))),Ft)break;z=z.return}0<Ee.length&&(se=new me(se,_e,null,l,oe),le.push({event:se,listeners:Ee}))}}if((o&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",se&&l!==pr&&(_e=l.relatedTarget||l.fromElement)&&(To(_e)||_e[Xi]))break e;if((me||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,me?(_e=l.relatedTarget||l.toElement,me=Y,_e=_e?To(_e):null,_e!==null&&(Ft=Gn(_e),_e!==Ft||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(me=null,_e=Y),me!==_e)){if(Ee=ua,he="onMouseLeave",W="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=b,he="onPointerLeave",W="onPointerEnter",z="pointer"),Ft=me==null?se:_a(me),K=_e==null?se:_a(_e),se=new Ee(he,z+"leave",me,l,oe),se.target=Ft,se.relatedTarget=K,he=null,To(oe)===Y&&(Ee=new Ee(W,z+"enter",_e,l,oe),Ee.target=K,Ee.relatedTarget=Ft,he=Ee),Ft=he,me&&_e)t:{for(Ee=me,W=_e,z=0,K=Ee;K;K=va(K))z++;for(K=0,he=W;he;he=va(he))K++;for(;0<z-K;)Ee=va(Ee),z--;for(;0<K-z;)W=va(W),K--;for(;z--;){if(Ee===W||W!==null&&Ee===W.alternate)break t;Ee=va(Ee),W=va(W)}Ee=null}else Ee=null;me!==null&&pv(le,se,me,Ee,!1),_e!==null&&Ft!==null&&pv(le,Ft,_e,Ee,!0)}}e:{if(se=Y?_a(Y):window,me=se.nodeName&&se.nodeName.toLowerCase(),me==="select"||me==="input"&&se.type==="file")var Te=ib;else if(Kg(se))if(Qg)Te=lb;else{Te=ob;var Pe=sb}else(me=se.nodeName)&&me.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=ab);if(Te&&(Te=Te(i,Y))){Gg(le,Te,l,oe);break e}Pe&&Pe(i,se,Y),i==="focusout"&&(Pe=se._wrapperState)&&Pe.controlled&&se.type==="number"&&Fn(se,"number",se.value)}switch(Pe=Y?_a(Y):window,i){case"focusin":(Kg(Pe)||Pe.contentEditable==="true")&&(ma=Pe,Fd=Y,Pl=null);break;case"focusout":Pl=Fd=ma=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,rv(le,l,oe);break;case"selectionchange":if(hb)break;case"keydown":case"keyup":rv(le,l,oe)}var Re;if(Ht)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else pa?Wg(i,l)&&(Me="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(So&&l.locale!=="ko"&&(pa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&pa&&(Re=El()):(gr=oe,sa="value"in gr?gr.value:gr.textContent,pa=!0)),Pe=tc(Y,Me),0<Pe.length&&(Me=new Il(Me,i,null,l,oe),le.push({event:Me,listeners:Pe}),Re?Me.data=Re:(Re=qg(l),Re!==null&&(Me.data=Re)))),(Re=vr?eb(i,l):tb(i,l))&&(Y=tc(Y,"onBeforeInput"),0<Y.length&&(oe=new Il("onBeforeInput","beforeinput",null,l,oe),le.push({event:oe,listeners:Y}),oe.data=Re))}dv(le,o)})}function xl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function tc(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=mt(i,l),y!=null&&h.unshift(xl(i,y,p)),y=mt(i,o),y!=null&&h.push(xl(i,y,p))),i=i.return}return h}function va(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function pv(i,o,l,h,p){for(var y=o._reactName,I=[];l!==null&&l!==h;){var D=l,F=D.alternate,Y=D.stateNode;if(F!==null&&F===h)break;D.tag===5&&Y!==null&&(D=Y,p?(F=mt(l,y),F!=null&&I.unshift(xl(l,F,D))):p||(F=mt(l,y),F!=null&&I.push(xl(l,F,D)))),l=l.return}I.length!==0&&i.push({event:o,listeners:I})}var mb=/\r\n?/g,gb=/\u0000|\uFFFD/g;function mv(i){return(typeof i=="string"?i:""+i).replace(mb,`
`).replace(gb,"")}function nc(i,o,l){if(o=mv(o),mv(i)!==o&&l)throw Error(t(425))}function rc(){}var qd=null,Kd=null;function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,vb=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(i){return gv.resolve(null).then(i).catch(_b)}:Qd;function _b(i){setTimeout(function(){throw i})}function Xd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Qr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Qr(o)}function Ps(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ya=Math.random().toString(36).slice(2),Ti="__reactFiber$"+ya,Nl="__reactProps$"+ya,Xi="__reactContainer$"+ya,Yd="__reactEvents$"+ya,wb="__reactListeners$"+ya,Eb="__reactHandles$"+ya;function To(i){var o=i[Ti];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Xi]||l[Ti]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=vv(i);i!==null;){if(l=i[Ti])return l;i=vv(i)}return o}i=l,l=i.parentNode}return null}function Ol(i){return i=i[Ti]||i[Xi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function ic(i){return i[Nl]||null}var Jd=[],wa=-1;function Rs(i){return{current:i}}function wt(i){0>wa||(i.current=Jd[wa],Jd[wa]=null,wa--)}function gt(i,o){wa++,Jd[wa]=i.current,i.current=o}var ks={},wn=Rs(ks),Zn=Rs(!1),Io=ks;function Ea(i,o){var l=i.type.contextTypes;if(!l)return ks;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function er(i){return i=i.childContextTypes,i!=null}function sc(){wt(Zn),wt(wn)}function yv(i,o,l){if(wn.current!==ks)throw Error(t(168));gt(wn,o),gt(Zn,l)}function _v(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,je(i)||"Unknown",p));return de({},l,h)}function oc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ks,Io=wn.current,gt(wn,i),gt(Zn,Zn.current),!0}function wv(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=_v(i,o,Io),h.__reactInternalMemoizedMergedChildContext=i,wt(Zn),wt(wn),gt(wn,i)):wt(Zn),gt(Zn,l)}var Yi=null,ac=!1,Zd=!1;function Ev(i){Yi===null?Yi=[i]:Yi.push(i)}function Sb(i){ac=!0,Ev(i)}function xs(){if(!Zd&&Yi!==null){Zd=!0;var i=0,o=T;try{var l=Yi;for(T=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Yi=null,ac=!1}catch(p){throw Yi!==null&&(Yi=Yi.slice(i+1)),ws(Bi,xs),p}finally{T=o,Zd=!1}}return null}var Sa=[],Ta=0,lc=null,uc=0,Or=[],Dr=0,bo=null,Ji=1,Zi="";function Co(i,o){Sa[Ta++]=uc,Sa[Ta++]=lc,lc=i,uc=o}function Sv(i,o,l){Or[Dr++]=Ji,Or[Dr++]=Zi,Or[Dr++]=bo,bo=i;var h=Ji;i=Zi;var p=32-hn(h)-1;h&=~(1<<p),l+=1;var y=32-hn(o)+p;if(30<y){var I=p-p%5;y=(h&(1<<I)-1).toString(32),h>>=I,p-=I,Ji=1<<32-hn(o)+p|l<<p|h,Zi=y+i}else Ji=1<<y|l<<p|h,Zi=i}function ef(i){i.return!==null&&(Co(i,1),Sv(i,1,0))}function tf(i){for(;i===lc;)lc=Sa[--Ta],Sa[Ta]=null,uc=Sa[--Ta],Sa[Ta]=null;for(;i===bo;)bo=Or[--Dr],Or[Dr]=null,Zi=Or[--Dr],Or[Dr]=null,Ji=Or[--Dr],Or[Dr]=null}var yr=null,_r=null,It=!1,Jr=null;function Tv(i,o){var l=jr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Iv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,yr=i,_r=Ps(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,yr=i,_r=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=bo!==null?{id:Ji,overflow:Zi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=jr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,yr=i,_r=null,!0):!1;default:return!1}}function nf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rf(i){if(It){var o=_r;if(o){var l=o;if(!Iv(i,o)){if(nf(i))throw Error(t(418));o=Ps(l.nextSibling);var h=yr;o&&Iv(i,o)?Tv(h,l):(i.flags=i.flags&-4097|2,It=!1,yr=i)}}else{if(nf(i))throw Error(t(418));i.flags=i.flags&-4097|2,It=!1,yr=i}}}function bv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;yr=i}function cc(i){if(i!==yr)return!1;if(!It)return bv(i),It=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Gd(i.type,i.memoizedProps)),o&&(o=_r)){if(nf(i))throw Cv(),Error(t(418));for(;o;)Tv(i,o),o=Ps(o.nextSibling)}if(bv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){_r=Ps(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}_r=null}}else _r=yr?Ps(i.stateNode.nextSibling):null;return!0}function Cv(){for(var i=_r;i;)i=Ps(i.nextSibling)}function Ia(){_r=yr=null,It=!1}function sf(i){Jr===null?Jr=[i]:Jr.push(i)}var Tb=Z.ReactCurrentBatchConfig;function Dl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(I){var D=p.refs;I===null?delete D[y]:D[y]=I},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function hc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Av(i){var o=i._init;return o(i._payload)}function Pv(i){function o(W,z){if(i){var K=W.deletions;K===null?(W.deletions=[z],W.flags|=16):K.push(z)}}function l(W,z){if(!i)return null;for(;z!==null;)o(W,z),z=z.sibling;return null}function h(W,z){for(W=new Map;z!==null;)z.key!==null?W.set(z.key,z):W.set(z.index,z),z=z.sibling;return W}function p(W,z){return W=Fs(W,z),W.index=0,W.sibling=null,W}function y(W,z,K){return W.index=K,i?(K=W.alternate,K!==null?(K=K.index,K<z?(W.flags|=2,z):K):(W.flags|=2,z)):(W.flags|=1048576,z)}function I(W){return i&&W.alternate===null&&(W.flags|=2),W}function D(W,z,K,he){return z===null||z.tag!==6?(z=Xf(K,W.mode,he),z.return=W,z):(z=p(z,K),z.return=W,z)}function F(W,z,K,he){var Te=K.type;return Te===k?oe(W,z,K.props.children,he,K.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===$e&&Av(Te)===z.type)?(he=p(z,K.props),he.ref=Dl(W,z,K),he.return=W,he):(he=Vc(K.type,K.key,K.props,null,W.mode,he),he.ref=Dl(W,z,K),he.return=W,he)}function Y(W,z,K,he){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=Yf(K,W.mode,he),z.return=W,z):(z=p(z,K.children||[]),z.return=W,z)}function oe(W,z,K,he,Te){return z===null||z.tag!==7?(z=Do(K,W.mode,he,Te),z.return=W,z):(z=p(z,K),z.return=W,z)}function le(W,z,K){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Xf(""+z,W.mode,K),z.return=W,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return K=Vc(z.type,z.key,z.props,null,W.mode,K),K.ref=Dl(W,null,z),K.return=W,K;case ie:return z=Yf(z,W.mode,K),z.return=W,z;case $e:var he=z._init;return le(W,he(z._payload),K)}if(Ct(z)||ve(z))return z=Do(z,W.mode,K,null),z.return=W,z;hc(W,z)}return null}function se(W,z,K,he){var Te=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Te!==null?null:D(W,z,""+K,he);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===Te?F(W,z,K,he):null;case ie:return K.key===Te?Y(W,z,K,he):null;case $e:return Te=K._init,se(W,z,Te(K._payload),he)}if(Ct(K)||ve(K))return Te!==null?null:oe(W,z,K,he,null);hc(W,K)}return null}function me(W,z,K,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number")return W=W.get(K)||null,D(z,W,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case X:return W=W.get(he.key===null?K:he.key)||null,F(z,W,he,Te);case ie:return W=W.get(he.key===null?K:he.key)||null,Y(z,W,he,Te);case $e:var Pe=he._init;return me(W,z,K,Pe(he._payload),Te)}if(Ct(he)||ve(he))return W=W.get(K)||null,oe(z,W,he,Te,null);hc(z,he)}return null}function _e(W,z,K,he){for(var Te=null,Pe=null,Re=z,Me=z=0,ln=null;Re!==null&&Me<K.length;Me++){Re.index>Me?(ln=Re,Re=null):ln=Re.sibling;var nt=se(W,Re,K[Me],he);if(nt===null){Re===null&&(Re=ln);break}i&&Re&&nt.alternate===null&&o(W,Re),z=y(nt,z,Me),Pe===null?Te=nt:Pe.sibling=nt,Pe=nt,Re=ln}if(Me===K.length)return l(W,Re),It&&Co(W,Me),Te;if(Re===null){for(;Me<K.length;Me++)Re=le(W,K[Me],he),Re!==null&&(z=y(Re,z,Me),Pe===null?Te=Re:Pe.sibling=Re,Pe=Re);return It&&Co(W,Me),Te}for(Re=h(W,Re);Me<K.length;Me++)ln=me(Re,W,Me,K[Me],he),ln!==null&&(i&&ln.alternate!==null&&Re.delete(ln.key===null?Me:ln.key),z=y(ln,z,Me),Pe===null?Te=ln:Pe.sibling=ln,Pe=ln);return i&&Re.forEach(function(Us){return o(W,Us)}),It&&Co(W,Me),Te}function Ee(W,z,K,he){var Te=ve(K);if(typeof Te!="function")throw Error(t(150));if(K=Te.call(K),K==null)throw Error(t(151));for(var Pe=Te=null,Re=z,Me=z=0,ln=null,nt=K.next();Re!==null&&!nt.done;Me++,nt=K.next()){Re.index>Me?(ln=Re,Re=null):ln=Re.sibling;var Us=se(W,Re,nt.value,he);if(Us===null){Re===null&&(Re=ln);break}i&&Re&&Us.alternate===null&&o(W,Re),z=y(Us,z,Me),Pe===null?Te=Us:Pe.sibling=Us,Pe=Us,Re=ln}if(nt.done)return l(W,Re),It&&Co(W,Me),Te;if(Re===null){for(;!nt.done;Me++,nt=K.next())nt=le(W,nt.value,he),nt!==null&&(z=y(nt,z,Me),Pe===null?Te=nt:Pe.sibling=nt,Pe=nt);return It&&Co(W,Me),Te}for(Re=h(W,Re);!nt.done;Me++,nt=K.next())nt=me(Re,W,Me,nt.value,he),nt!==null&&(i&&nt.alternate!==null&&Re.delete(nt.key===null?Me:nt.key),z=y(nt,z,Me),Pe===null?Te=nt:Pe.sibling=nt,Pe=nt);return i&&Re.forEach(function(nC){return o(W,nC)}),It&&Co(W,Me),Te}function Ft(W,z,K,he){if(typeof K=="object"&&K!==null&&K.type===k&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var Te=K.key,Pe=z;Pe!==null;){if(Pe.key===Te){if(Te=K.type,Te===k){if(Pe.tag===7){l(W,Pe.sibling),z=p(Pe,K.props.children),z.return=W,W=z;break e}}else if(Pe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===$e&&Av(Te)===Pe.type){l(W,Pe.sibling),z=p(Pe,K.props),z.ref=Dl(W,Pe,K),z.return=W,W=z;break e}l(W,Pe);break}else o(W,Pe);Pe=Pe.sibling}K.type===k?(z=Do(K.props.children,W.mode,he,K.key),z.return=W,W=z):(he=Vc(K.type,K.key,K.props,null,W.mode,he),he.ref=Dl(W,z,K),he.return=W,W=he)}return I(W);case ie:e:{for(Pe=K.key;z!==null;){if(z.key===Pe)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){l(W,z.sibling),z=p(z,K.children||[]),z.return=W,W=z;break e}else{l(W,z);break}else o(W,z);z=z.sibling}z=Yf(K,W.mode,he),z.return=W,W=z}return I(W);case $e:return Pe=K._init,Ft(W,z,Pe(K._payload),he)}if(Ct(K))return _e(W,z,K,he);if(ve(K))return Ee(W,z,K,he);hc(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,z!==null&&z.tag===6?(l(W,z.sibling),z=p(z,K),z.return=W,W=z):(l(W,z),z=Xf(K,W.mode,he),z.return=W,W=z),I(W)):l(W,z)}return Ft}var ba=Pv(!0),Rv=Pv(!1),dc=Rs(null),fc=null,Ca=null,of=null;function af(){of=Ca=fc=null}function lf(i){var o=dc.current;wt(dc),i._currentValue=o}function uf(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Aa(i,o){fc=i,of=Ca=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(tr=!0),i.firstContext=null)}function Vr(i){var o=i._currentValue;if(of!==i)if(i={context:i,memoizedValue:o,next:null},Ca===null){if(fc===null)throw Error(t(308));Ca=i,fc.dependencies={lanes:0,firstContext:i}}else Ca=Ca.next=i;return o}var Ao=null;function cf(i){Ao===null?Ao=[i]:Ao.push(i)}function kv(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,cf(o)):(l.next=p.next,p.next=l),o.interleaved=l,es(i,h)}function es(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ns=!1;function hf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ts(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Os(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(tt&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,es(i,l)}return p=h.interleaved,p===null?(o.next=o,cf(h)):(o.next=p.next,p.next=o),h.interleaved=o,es(i,l)}function pc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,yi(i,l)}}function Nv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=I:y=y.next=I,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function mc(i,o,l,h){var p=i.updateQueue;Ns=!1;var y=p.firstBaseUpdate,I=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var F=D,Y=F.next;F.next=null,I===null?y=Y:I.next=Y,I=F;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==I&&(D===null?oe.firstBaseUpdate=Y:D.next=Y,oe.lastBaseUpdate=F))}if(y!==null){var le=p.baseState;I=0,oe=Y=F=null,D=y;do{var se=D.lane,me=D.eventTime;if((h&se)===se){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var _e=i,Ee=D;switch(se=o,me=l,Ee.tag){case 1:if(_e=Ee.payload,typeof _e=="function"){le=_e.call(me,le,se);break e}le=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ee.payload,se=typeof _e=="function"?_e.call(me,le,se):_e,se==null)break e;le=de({},le,se);break e;case 2:Ns=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,se=p.effects,se===null?p.effects=[D]:se.push(D))}else me={eventTime:me,lane:se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Y=oe=me,F=le):oe=oe.next=me,I|=se;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;se=D,D=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(oe===null&&(F=le),p.baseState=F,p.firstBaseUpdate=Y,p.lastBaseUpdate=oe,o=p.shared.interleaved,o!==null){p=o;do I|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);ko|=I,i.lanes=I,i.memoizedState=le}}function Ov(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Vl={},Ii=Rs(Vl),Ml=Rs(Vl),Ll=Rs(Vl);function Po(i){if(i===Vl)throw Error(t(174));return i}function df(i,o){switch(gt(Ll,o),gt(Ml,i),gt(Ii,Vl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:yt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=yt(o,i)}wt(Ii),gt(Ii,o)}function Pa(){wt(Ii),wt(Ml),wt(Ll)}function Dv(i){Po(Ll.current);var o=Po(Ii.current),l=yt(o,i.type);o!==l&&(gt(Ml,i),gt(Ii,l))}function ff(i){Ml.current===i&&(wt(Ii),wt(Ml))}var Pt=Rs(0);function gc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var pf=[];function mf(){for(var i=0;i<pf.length;i++)pf[i]._workInProgressVersionPrimary=null;pf.length=0}var vc=Z.ReactCurrentDispatcher,gf=Z.ReactCurrentBatchConfig,Ro=0,Rt=null,Zt=null,on=null,yc=!1,jl=!1,Fl=0,Ib=0;function En(){throw Error(t(321))}function vf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Yr(i[l],o[l]))return!1;return!0}function yf(i,o,l,h,p,y){if(Ro=y,Rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,vc.current=i===null||i.memoizedState===null?Pb:Rb,i=l(h,p),jl){y=0;do{if(jl=!1,Fl=0,25<=y)throw Error(t(301));y+=1,on=Zt=null,o.updateQueue=null,vc.current=kb,i=l(h,p)}while(jl)}if(vc.current=Ec,o=Zt!==null&&Zt.next!==null,Ro=0,on=Zt=Rt=null,yc=!1,o)throw Error(t(300));return i}function _f(){var i=Fl!==0;return Fl=0,i}function bi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Rt.memoizedState=on=i:on=on.next=i,on}function Mr(){if(Zt===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=Zt.next;var o=on===null?Rt.memoizedState:on.next;if(o!==null)on=o,Zt=i;else{if(i===null)throw Error(t(310));Zt=i,i={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},on===null?Rt.memoizedState=on=i:on=on.next=i}return on}function Ul(i,o){return typeof o=="function"?o(i):o}function wf(i){var o=Mr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Zt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var I=p.next;p.next=y.next,y.next=I}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var D=I=null,F=null,Y=y;do{var oe=Y.lane;if((Ro&oe)===oe)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),h=Y.hasEagerState?Y.eagerState:i(h,Y.action);else{var le={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=le,I=h):F=F.next=le,Rt.lanes|=oe,ko|=oe}Y=Y.next}while(Y!==null&&Y!==y);F===null?I=h:F.next=D,Yr(h,o.memoizedState)||(tr=!0),o.memoizedState=h,o.baseState=I,o.baseQueue=F,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Rt.lanes|=y,ko|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Ef(i){var o=Mr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var I=p=p.next;do y=i(y,I.action),I=I.next;while(I!==p);Yr(y,o.memoizedState)||(tr=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Vv(){}function Mv(i,o){var l=Rt,h=Mr(),p=o(),y=!Yr(h.memoizedState,p);if(y&&(h.memoizedState=p,tr=!0),h=h.queue,Sf(Fv.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,zl(9,jv.bind(null,l,h,p,o),void 0,null),an===null)throw Error(t(349));(Ro&30)!==0||Lv(l,o,p)}return p}function Lv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Rt.updateQueue,o===null?(o={lastEffect:null,stores:null},Rt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function jv(i,o,l,h){o.value=l,o.getSnapshot=h,Uv(o)&&zv(i)}function Fv(i,o,l){return l(function(){Uv(o)&&zv(i)})}function Uv(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Yr(i,l)}catch{return!0}}function zv(i){var o=es(i,1);o!==null&&ni(o,i,1,-1)}function $v(i){var o=bi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:i},o.queue=i,i=i.dispatch=Ab.bind(null,Rt,i),[o.memoizedState,i]}function zl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=Rt.updateQueue,o===null?(o={lastEffect:null,stores:null},Rt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Bv(){return Mr().memoizedState}function _c(i,o,l,h){var p=bi();Rt.flags|=i,p.memoizedState=zl(1|o,l,void 0,h===void 0?null:h)}function wc(i,o,l,h){var p=Mr();h=h===void 0?null:h;var y=void 0;if(Zt!==null){var I=Zt.memoizedState;if(y=I.destroy,h!==null&&vf(h,I.deps)){p.memoizedState=zl(o,l,y,h);return}}Rt.flags|=i,p.memoizedState=zl(1|o,l,y,h)}function Hv(i,o){return _c(8390656,8,i,o)}function Sf(i,o){return wc(2048,8,i,o)}function Wv(i,o){return wc(4,2,i,o)}function qv(i,o){return wc(4,4,i,o)}function Kv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Gv(i,o,l){return l=l!=null?l.concat([i]):null,wc(4,4,Kv.bind(null,o,i),l)}function Tf(){}function Qv(i,o){var l=Mr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&vf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Xv(i,o){var l=Mr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&vf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Yv(i,o,l){return(Ro&21)===0?(i.baseState&&(i.baseState=!1,tr=!0),i.memoizedState=l):(Yr(l,o)||(l=mi(),Rt.lanes|=l,ko|=l,i.baseState=!0),o)}function bb(i,o){var l=T;T=l!==0&&4>l?l:4,i(!0);var h=gf.transition;gf.transition={};try{i(!1),o()}finally{T=l,gf.transition=h}}function Jv(){return Mr().memoizedState}function Cb(i,o,l){var h=Ls(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Zv(i))ey(o,l);else if(l=kv(i,o,l,h),l!==null){var p=Vn();ni(l,i,h,p),ty(l,o,h)}}function Ab(i,o,l){var h=Ls(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zv(i))ey(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var I=o.lastRenderedState,D=y(I,l);if(p.hasEagerState=!0,p.eagerState=D,Yr(D,I)){var F=o.interleaved;F===null?(p.next=p,cf(o)):(p.next=F.next,F.next=p),o.interleaved=p;return}}catch{}finally{}l=kv(i,o,p,h),l!==null&&(p=Vn(),ni(l,i,h,p),ty(l,o,h))}}function Zv(i){var o=i.alternate;return i===Rt||o!==null&&o===Rt}function ey(i,o){jl=yc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function ty(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,yi(i,l)}}var Ec={readContext:Vr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},Pb={readContext:Vr,useCallback:function(i,o){return bi().memoizedState=[i,o===void 0?null:o],i},useContext:Vr,useEffect:Hv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,_c(4194308,4,Kv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return _c(4194308,4,i,o)},useInsertionEffect:function(i,o){return _c(4,2,i,o)},useMemo:function(i,o){var l=bi();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=bi();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=Cb.bind(null,Rt,i),[h.memoizedState,i]},useRef:function(i){var o=bi();return i={current:i},o.memoizedState=i},useState:$v,useDebugValue:Tf,useDeferredValue:function(i){return bi().memoizedState=i},useTransition:function(){var i=$v(!1),o=i[0];return i=bb.bind(null,i[1]),bi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=Rt,p=bi();if(It){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),an===null)throw Error(t(349));(Ro&30)!==0||Lv(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Hv(Fv.bind(null,h,y,i),[i]),h.flags|=2048,zl(9,jv.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=bi(),o=an.identifierPrefix;if(It){var l=Zi,h=Ji;l=(h&~(1<<32-hn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Fl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Ib++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Rb={readContext:Vr,useCallback:Qv,useContext:Vr,useEffect:Sf,useImperativeHandle:Gv,useInsertionEffect:Wv,useLayoutEffect:qv,useMemo:Xv,useReducer:wf,useRef:Bv,useState:function(){return wf(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Mr();return Yv(o,Zt.memoizedState,i)},useTransition:function(){var i=wf(Ul)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Vv,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1},kb={readContext:Vr,useCallback:Qv,useContext:Vr,useEffect:Sf,useImperativeHandle:Gv,useInsertionEffect:Wv,useLayoutEffect:qv,useMemo:Xv,useReducer:Ef,useRef:Bv,useState:function(){return Ef(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Mr();return Zt===null?o.memoizedState=i:Yv(o,Zt.memoizedState,i)},useTransition:function(){var i=Ef(Ul)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Vv,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1};function Zr(i,o){if(i&&i.defaultProps){o=de({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function If(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:de({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Sc={isMounted:function(i){return(i=i._reactInternals)?Gn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=Vn(),p=Ls(i),y=ts(h,p);y.payload=o,l!=null&&(y.callback=l),o=Os(i,y,p),o!==null&&(ni(o,i,p,h),pc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=Vn(),p=Ls(i),y=ts(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Os(i,y,p),o!==null&&(ni(o,i,p,h),pc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Vn(),h=Ls(i),p=ts(l,h);p.tag=2,o!=null&&(p.callback=o),o=Os(i,p,h),o!==null&&(ni(o,i,h,l),pc(o,i,h))}};function ny(i,o,l,h,p,y,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,I):o.prototype&&o.prototype.isPureReactComponent?!Al(l,h)||!Al(p,y):!0}function ry(i,o,l){var h=!1,p=ks,y=o.contextType;return typeof y=="object"&&y!==null?y=Vr(y):(p=er(o)?Io:wn.current,h=o.contextTypes,y=(h=h!=null)?Ea(i,p):ks),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Sc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function iy(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Sc.enqueueReplaceState(o,o.state,null)}function bf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},hf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Vr(y):(y=er(o)?Io:wn.current,p.context=Ea(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(If(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Sc.enqueueReplaceState(p,p.state,null),mc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Ra(i,o){try{var l="",h=o;do l+=Se(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Cf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Af(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var xb=typeof WeakMap=="function"?WeakMap:Map;function sy(i,o,l){l=ts(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Rc||(Rc=!0,$f=h),Af(i,o)},l}function oy(i,o,l){l=ts(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Af(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Af(i,o),typeof h!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),l}function ay(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new xb;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=Wb.bind(null,i,o,l),o.then(i,i))}function ly(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function uy(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ts(-1,1),o.tag=2,Os(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var Nb=Z.ReactCurrentOwner,tr=!1;function Dn(i,o,l,h){o.child=i===null?Rv(o,null,l,h):ba(o,i.child,l,h)}function cy(i,o,l,h,p){l=l.render;var y=o.ref;return Aa(o,p),h=yf(i,o,l,h,y,p),l=_f(),i!==null&&!tr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ns(i,o,p)):(It&&l&&ef(o),o.flags|=1,Dn(i,o,h,p),o.child)}function hy(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Qf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,dy(i,o,y,h,p)):(i=Vc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var I=y.memoizedProps;if(l=l.compare,l=l!==null?l:Al,l(I,h)&&i.ref===o.ref)return ns(i,o,p)}return o.flags|=1,i=Fs(y,h),i.ref=o.ref,i.return=o,o.child=i}function dy(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(Al(y,h)&&i.ref===o.ref)if(tr=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(tr=!0);else return o.lanes=i.lanes,ns(i,o,p)}return Pf(i,o,l,h,p)}function fy(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(xa,wr),wr|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,gt(xa,wr),wr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,gt(xa,wr),wr|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,gt(xa,wr),wr|=h;return Dn(i,o,p,l),o.child}function py(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Pf(i,o,l,h,p){var y=er(l)?Io:wn.current;return y=Ea(o,y),Aa(o,p),l=yf(i,o,l,h,y,p),h=_f(),i!==null&&!tr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ns(i,o,p)):(It&&h&&ef(o),o.flags|=1,Dn(i,o,l,p),o.child)}function my(i,o,l,h,p){if(er(l)){var y=!0;oc(o)}else y=!1;if(Aa(o,p),o.stateNode===null)Ic(i,o),ry(o,l,h),bf(o,l,h,p),h=!0;else if(i===null){var I=o.stateNode,D=o.memoizedProps;I.props=D;var F=I.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=Vr(Y):(Y=er(l)?Io:wn.current,Y=Ea(o,Y));var oe=l.getDerivedStateFromProps,le=typeof oe=="function"||typeof I.getSnapshotBeforeUpdate=="function";le||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==h||F!==Y)&&iy(o,I,h,Y),Ns=!1;var se=o.memoizedState;I.state=se,mc(o,h,I,p),F=o.memoizedState,D!==h||se!==F||Zn.current||Ns?(typeof oe=="function"&&(If(o,l,oe,h),F=o.memoizedState),(D=Ns||ny(o,l,D,h,se,F,Y))?(le||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=F),I.props=h,I.state=F,I.context=Y,h=D):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{I=o.stateNode,xv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:Zr(o.type,D),I.props=Y,le=o.pendingProps,se=I.context,F=l.contextType,typeof F=="object"&&F!==null?F=Vr(F):(F=er(l)?Io:wn.current,F=Ea(o,F));var me=l.getDerivedStateFromProps;(oe=typeof me=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==le||se!==F)&&iy(o,I,h,F),Ns=!1,se=o.memoizedState,I.state=se,mc(o,h,I,p);var _e=o.memoizedState;D!==le||se!==_e||Zn.current||Ns?(typeof me=="function"&&(If(o,l,me,h),_e=o.memoizedState),(Y=Ns||ny(o,l,Y,h,se,_e,F)||!1)?(oe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,_e,F),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,_e,F)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=_e),I.props=h,I.state=_e,I.context=F,h=Y):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),h=!1)}return Rf(i,o,l,h,y,p)}function Rf(i,o,l,h,p,y){py(i,o);var I=(o.flags&128)!==0;if(!h&&!I)return p&&wv(o,l,!1),ns(i,o,y);h=o.stateNode,Nb.current=o;var D=I&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&I?(o.child=ba(o,i.child,null,y),o.child=ba(o,null,D,y)):Dn(i,o,D,y),o.memoizedState=h.state,p&&wv(o,l,!0),o.child}function gy(i){var o=i.stateNode;o.pendingContext?yv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&yv(i,o.context,!1),df(i,o.containerInfo)}function vy(i,o,l,h,p){return Ia(),sf(p),o.flags|=256,Dn(i,o,l,h),o.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function xf(i){return{baseLanes:i,cachePool:null,transitions:null}}function yy(i,o,l){var h=o.pendingProps,p=Pt.current,y=!1,I=(o.flags&128)!==0,D;if((D=I)||(D=i!==null&&i.memoizedState===null?!1:(p&2)!==0),D?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),gt(Pt,p&1),i===null)return rf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=h.children,i=h.fallback,y?(h=o.mode,y=o.child,I={mode:"hidden",children:I},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=I):y=Mc(I,h,0,null),i=Do(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=xf(l),o.memoizedState=kf,i):Nf(o,I));if(p=i.memoizedState,p!==null&&(D=p.dehydrated,D!==null))return Ob(i,o,I,h,D,p,l);if(y){y=h.fallback,I=o.mode,p=i.child,D=p.sibling;var F={mode:"hidden",children:h.children};return(I&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=F,o.deletions=null):(h=Fs(p,F),h.subtreeFlags=p.subtreeFlags&14680064),D!==null?y=Fs(D,y):(y=Do(y,I,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,I=i.child.memoizedState,I=I===null?xf(l):{baseLanes:I.baseLanes|l,cachePool:null,transitions:I.transitions},y.memoizedState=I,y.childLanes=i.childLanes&~l,o.memoizedState=kf,h}return y=i.child,i=y.sibling,h=Fs(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function Nf(i,o){return o=Mc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Tc(i,o,l,h){return h!==null&&sf(h),ba(o,i.child,null,l),i=Nf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ob(i,o,l,h,p,y,I){if(l)return o.flags&256?(o.flags&=-257,h=Cf(Error(t(422))),Tc(i,o,I,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Mc({mode:"visible",children:h.children},p,0,null),y=Do(y,p,I,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&ba(o,i.child,null,I),o.child.memoizedState=xf(I),o.memoizedState=kf,y);if((o.mode&1)===0)return Tc(i,o,I,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var D=h.dgst;return h=D,y=Error(t(419)),h=Cf(y,h,void 0),Tc(i,o,I,h)}if(D=(I&i.childLanes)!==0,tr||D){if(h=an,h!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|I))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,es(i,p),ni(h,i,p,-1))}return Gf(),h=Cf(Error(t(421))),Tc(i,o,I,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=qb.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,_r=Ps(p.nextSibling),yr=o,It=!0,Jr=null,i!==null&&(Or[Dr++]=Ji,Or[Dr++]=Zi,Or[Dr++]=bo,Ji=i.id,Zi=i.overflow,bo=o),o=Nf(o,h.children),o.flags|=4096,o)}function _y(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),uf(i.return,o,l)}function Of(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function wy(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(Dn(i,o,h.children,l),h=Pt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_y(i,l,o);else if(i.tag===19)_y(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(gt(Pt,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&gc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Of(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&gc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Of(o,!0,l,null,y);break;case"together":Of(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ic(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ns(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ko|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Fs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Fs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Db(i,o,l){switch(o.tag){case 3:gy(o),Ia();break;case 5:Dv(o);break;case 1:er(o.type)&&oc(o);break;case 4:df(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;gt(dc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(gt(Pt,Pt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?yy(i,o,l):(gt(Pt,Pt.current&1),i=ns(i,o,l),i!==null?i.sibling:null);gt(Pt,Pt.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return wy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),gt(Pt,Pt.current),h)break;return null;case 22:case 23:return o.lanes=0,fy(i,o,l)}return ns(i,o,l)}var Ey,Df,Sy,Ty;Ey=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Df=function(){},Sy=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Po(Ii.current);var y=null;switch(l){case"input":p=ht(i,p),h=ht(i,h),y=[];break;case"select":p=de({},p,{value:void 0}),h=de({},h,{value:void 0}),y=[];break;case"textarea":p=At(i,p),h=At(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=rc)}ho(l,h);var I;l=null;for(Y in p)if(!h.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var D=p[Y];for(I in D)D.hasOwnProperty(I)&&(l||(l={}),l[I]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in h){var F=h[Y];if(D=p!=null?p[Y]:void 0,h.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(I in D)!D.hasOwnProperty(I)||F&&F.hasOwnProperty(I)||(l||(l={}),l[I]="");for(I in F)F.hasOwnProperty(I)&&D[I]!==F[I]&&(l||(l={}),l[I]=F[I])}else l||(y||(y=[]),y.push(Y,l)),l=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(y=y||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&_t("scroll",i),y||D===F||(y=[])):(y=y||[]).push(Y,F))}l&&(y=y||[]).push("style",l);var Y=y;(o.updateQueue=Y)&&(o.flags|=4)}},Ty=function(i,o,l,h){l!==h&&(o.flags|=4)};function $l(i,o){if(!It)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Sn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function Vb(i,o,l){var h=o.pendingProps;switch(tf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(o),null;case 1:return er(o.type)&&sc(),Sn(o),null;case 3:return h=o.stateNode,Pa(),wt(Zn),wt(wn),mf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(cc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Jr!==null&&(Wf(Jr),Jr=null))),Df(i,o),Sn(o),null;case 5:ff(o);var p=Po(Ll.current);if(l=o.type,i!==null&&o.stateNode!=null)Sy(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return Sn(o),null}if(i=Po(Ii.current),cc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[Ti]=o,h[Nl]=y,i=(o.mode&1)!==0,l){case"dialog":_t("cancel",h),_t("close",h);break;case"iframe":case"object":case"embed":_t("load",h);break;case"video":case"audio":for(p=0;p<Rl.length;p++)_t(Rl[p],h);break;case"source":_t("error",h);break;case"img":case"image":case"link":_t("error",h),_t("load",h);break;case"details":_t("toggle",h);break;case"input":Nt(h,y),_t("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},_t("invalid",h);break;case"textarea":dr(h,y),_t("invalid",h)}ho(l,y),p=null;for(var I in y)if(y.hasOwnProperty(I)){var D=y[I];I==="children"?typeof D=="string"?h.textContent!==D&&(y.suppressHydrationWarning!==!0&&nc(h.textContent,D,i),p=["children",D]):typeof D=="number"&&h.textContent!==""+D&&(y.suppressHydrationWarning!==!0&&nc(h.textContent,D,i),p=["children",""+D]):s.hasOwnProperty(I)&&D!=null&&I==="onScroll"&&_t("scroll",h)}switch(l){case"input":We(h),$t(h,y,!0);break;case"textarea":We(h),Hr(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=rc)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ot(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=I.createElement(l,{is:h.is}):(i=I.createElement(l),l==="select"&&(I=i,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):i=I.createElementNS(i,l),i[Ti]=o,i[Nl]=h,Ey(i,o,!1,!1),o.stateNode=i;e:{switch(I=ui(l,h),l){case"dialog":_t("cancel",i),_t("close",i),p=h;break;case"iframe":case"object":case"embed":_t("load",i),p=h;break;case"video":case"audio":for(p=0;p<Rl.length;p++)_t(Rl[p],i);p=h;break;case"source":_t("error",i),p=h;break;case"img":case"image":case"link":_t("error",i),_t("load",i),p=h;break;case"details":_t("toggle",i),p=h;break;case"input":Nt(i,h),p=ht(i,h),_t("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=de({},h,{value:void 0}),_t("invalid",i);break;case"textarea":dr(i,h),p=At(i,h),_t("invalid",i);break;default:p=h}ho(l,p),D=p;for(y in D)if(D.hasOwnProperty(y)){var F=D[y];y==="style"?qr(i,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&br(i,F)):y==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&fr(i,F):typeof F=="number"&&fr(i,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?F!=null&&y==="onScroll"&&_t("scroll",i):F!=null&&G(i,y,F,I))}switch(l){case"input":We(i),$t(i,h,!1);break;case"textarea":We(i),Hr(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Ve(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Be(i,!!h.multiple,y,!1):h.defaultValue!=null&&Be(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=rc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Sn(o),null;case 6:if(i&&o.stateNode!=null)Ty(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=Po(Ll.current),Po(Ii.current),cc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Ti]=o,(y=h.nodeValue!==l)&&(i=yr,i!==null))switch(i.tag){case 3:nc(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&nc(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Ti]=o,o.stateNode=h}return Sn(o),null;case 13:if(wt(Pt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(It&&_r!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Cv(),Ia(),o.flags|=98560,y=!1;else if(y=cc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Ti]=o}else Ia(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Sn(o),y=!1}else Jr!==null&&(Wf(Jr),Jr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Pt.current&1)!==0?en===0&&(en=3):Gf())),o.updateQueue!==null&&(o.flags|=4),Sn(o),null);case 4:return Pa(),Df(i,o),i===null&&kl(o.stateNode.containerInfo),Sn(o),null;case 10:return lf(o.type._context),Sn(o),null;case 17:return er(o.type)&&sc(),Sn(o),null;case 19:if(wt(Pt),y=o.memoizedState,y===null)return Sn(o),null;if(h=(o.flags&128)!==0,I=y.rendering,I===null)if(h)$l(y,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=gc(i),I!==null){for(o.flags|=128,$l(y,!1),h=I.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,i=I.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return gt(Pt,Pt.current&1|2),o.child}i=i.sibling}y.tail!==null&&ft()>Na&&(o.flags|=128,h=!0,$l(y,!1),o.lanes=4194304)}else{if(!h)if(i=gc(I),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),$l(y,!0),y.tail===null&&y.tailMode==="hidden"&&!I.alternate&&!It)return Sn(o),null}else 2*ft()-y.renderingStartTime>Na&&l!==1073741824&&(o.flags|=128,h=!0,$l(y,!1),o.lanes=4194304);y.isBackwards?(I.sibling=o.child,o.child=I):(l=y.last,l!==null?l.sibling=I:o.child=I,y.last=I)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ft(),o.sibling=null,l=Pt.current,gt(Pt,h?l&1|2:l&1),o):(Sn(o),null);case 22:case 23:return Kf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(wr&1073741824)!==0&&(Sn(o),o.subtreeFlags&6&&(o.flags|=8192)):Sn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Mb(i,o){switch(tf(o),o.tag){case 1:return er(o.type)&&sc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pa(),wt(Zn),wt(wn),mf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return ff(o),null;case 13:if(wt(Pt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return wt(Pt),null;case 4:return Pa(),null;case 10:return lf(o.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var bc=!1,Tn=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ka(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Vt(i,o,h)}else l.current=null}function Vf(i,o,l){try{l()}catch(h){Vt(i,o,h)}}var Iy=!1;function jb(i,o){if(qd=bs,i=nv(),jd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var I=0,D=-1,F=-1,Y=0,oe=0,le=i,se=null;t:for(;;){for(var me;le!==l||p!==0&&le.nodeType!==3||(D=I+p),le!==y||h!==0&&le.nodeType!==3||(F=I+h),le.nodeType===3&&(I+=le.nodeValue.length),(me=le.firstChild)!==null;)se=le,le=me;for(;;){if(le===i)break t;if(se===l&&++Y===p&&(D=I),se===y&&++oe===h&&(F=I),(me=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=me}l=D===-1||F===-1?null:{start:D,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kd={focusedElem:i,selectionRange:l},bs=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var _e=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ee=_e.memoizedProps,Ft=_e.memoizedState,W=o.stateNode,z=W.getSnapshotBeforeUpdate(o.elementType===o.type?Ee:Zr(o.type,Ee),Ft);W.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){Vt(o,o.return,he)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return _e=Iy,Iy=!1,_e}function Bl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Vf(o,l,y)}p=p.next}while(p!==h)}}function Cc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Mf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function by(i){var o=i.alternate;o!==null&&(i.alternate=null,by(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ti],delete o[Nl],delete o[Yd],delete o[wb],delete o[Eb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Cy(i){return i.tag===5||i.tag===3||i.tag===4}function Ay(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=rc));else if(h!==4&&(i=i.child,i!==null))for(Lf(i,o,l),i=i.sibling;i!==null;)Lf(i,o,l),i=i.sibling}function jf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(jf(i,o,l),i=i.sibling;i!==null;)jf(i,o,l),i=i.sibling}var fn=null,ei=!1;function Ds(i,o,l){for(l=l.child;l!==null;)Py(i,o,l),l=l.sibling}function Py(i,o,l){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Hi,l)}catch{}switch(l.tag){case 5:Tn||ka(l,o);case 6:var h=fn,p=ei;fn=null,Ds(i,o,l),fn=h,ei=p,fn!==null&&(ei?(i=fn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):fn.removeChild(l.stateNode));break;case 18:fn!==null&&(ei?(i=fn,l=l.stateNode,i.nodeType===8?Xd(i.parentNode,l):i.nodeType===1&&Xd(i,l),Qr(i)):Xd(fn,l.stateNode));break;case 4:h=fn,p=ei,fn=l.stateNode.containerInfo,ei=!0,Ds(i,o,l),fn=h,ei=p;break;case 0:case 11:case 14:case 15:if(!Tn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,I=y.destroy;y=y.tag,I!==void 0&&((y&2)!==0||(y&4)!==0)&&Vf(l,o,I),p=p.next}while(p!==h)}Ds(i,o,l);break;case 1:if(!Tn&&(ka(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(D){Vt(l,o,D)}Ds(i,o,l);break;case 21:Ds(i,o,l);break;case 22:l.mode&1?(Tn=(h=Tn)||l.memoizedState!==null,Ds(i,o,l),Tn=h):Ds(i,o,l);break;default:Ds(i,o,l)}}function Ry(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Lb),o.forEach(function(h){var p=Kb.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function ti(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,I=o,D=I;e:for(;D!==null;){switch(D.tag){case 5:fn=D.stateNode,ei=!1;break e;case 3:fn=D.stateNode.containerInfo,ei=!0;break e;case 4:fn=D.stateNode.containerInfo,ei=!0;break e}D=D.return}if(fn===null)throw Error(t(160));Py(y,I,p),fn=null,ei=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(Y){Vt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ky(o,i),o=o.sibling}function ky(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ti(o,i),Ci(i),h&4){try{Bl(3,i,i.return),Cc(3,i)}catch(Ee){Vt(i,i.return,Ee)}try{Bl(5,i,i.return)}catch(Ee){Vt(i,i.return,Ee)}}break;case 1:ti(o,i),Ci(i),h&512&&l!==null&&ka(l,l.return);break;case 5:if(ti(o,i),Ci(i),h&512&&l!==null&&ka(l,l.return),i.flags&32){var p=i.stateNode;try{fr(p,"")}catch(Ee){Vt(i,i.return,Ee)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,I=l!==null?l.memoizedProps:y,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&y.type==="radio"&&y.name!=null&&Je(p,y),ui(D,I);var Y=ui(D,y);for(I=0;I<F.length;I+=2){var oe=F[I],le=F[I+1];oe==="style"?qr(p,le):oe==="dangerouslySetInnerHTML"?br(p,le):oe==="children"?fr(p,le):G(p,oe,le,Y)}switch(D){case"input":nn(p,y);break;case"textarea":cn(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var me=y.value;me!=null?Be(p,!!y.multiple,me,!1):se!==!!y.multiple&&(y.defaultValue!=null?Be(p,!!y.multiple,y.defaultValue,!0):Be(p,!!y.multiple,y.multiple?[]:"",!1))}p[Nl]=y}catch(Ee){Vt(i,i.return,Ee)}}break;case 6:if(ti(o,i),Ci(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Ee){Vt(i,i.return,Ee)}}break;case 3:if(ti(o,i),Ci(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Qr(o.containerInfo)}catch(Ee){Vt(i,i.return,Ee)}break;case 4:ti(o,i),Ci(i);break;case 13:ti(o,i),Ci(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(zf=ft())),h&4&&Ry(i);break;case 22:if(oe=l!==null&&l.memoizedState!==null,i.mode&1?(Tn=(Y=Tn)||oe,ti(o,i),Tn=Y):ti(o,i),Ci(i),h&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!oe&&(i.mode&1)!==0)for(ye=i,oe=i.child;oe!==null;){for(le=ye=oe;ye!==null;){switch(se=ye,me=se.child,se.tag){case 0:case 11:case 14:case 15:Bl(4,se,se.return);break;case 1:ka(se,se.return);var _e=se.stateNode;if(typeof _e.componentWillUnmount=="function"){h=se,l=se.return;try{o=h,_e.props=o.memoizedProps,_e.state=o.memoizedState,_e.componentWillUnmount()}catch(Ee){Vt(h,l,Ee)}}break;case 5:ka(se,se.return);break;case 22:if(se.memoizedState!==null){Oy(le);continue}}me!==null?(me.return=se,ye=me):Oy(le)}oe=oe.sibling}e:for(oe=null,le=i;;){if(le.tag===5){if(oe===null){oe=le;try{p=le.stateNode,Y?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(D=le.stateNode,F=le.memoizedProps.style,I=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=$n("display",I))}catch(Ee){Vt(i,i.return,Ee)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(Ee){Vt(i,i.return,Ee)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:ti(o,i),Ci(i),h&4&&Ry(i);break;case 21:break;default:ti(o,i),Ci(i)}}function Ci(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Cy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(fr(p,""),h.flags&=-33);var y=Ay(i);jf(i,y,p);break;case 3:case 4:var I=h.stateNode.containerInfo,D=Ay(i);Lf(i,D,I);break;default:throw Error(t(161))}}catch(F){Vt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Fb(i,o,l){ye=i,xy(i)}function xy(i,o,l){for(var h=(i.mode&1)!==0;ye!==null;){var p=ye,y=p.child;if(p.tag===22&&h){var I=p.memoizedState!==null||bc;if(!I){var D=p.alternate,F=D!==null&&D.memoizedState!==null||Tn;D=bc;var Y=Tn;if(bc=I,(Tn=F)&&!Y)for(ye=p;ye!==null;)I=ye,F=I.child,I.tag===22&&I.memoizedState!==null?Dy(p):F!==null?(F.return=I,ye=F):Dy(p);for(;y!==null;)ye=y,xy(y),y=y.sibling;ye=p,bc=D,Tn=Y}Ny(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ye=y):Ny(i)}}function Ny(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Tn||Cc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!Tn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Zr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Ov(o,y,h);break;case 3:var I=o.updateQueue;if(I!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Ov(o,I,l)}break;case 5:var D=o.stateNode;if(l===null&&o.flags&4){l=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var oe=Y.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&Qr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tn||o.flags&512&&Mf(o)}catch(se){Vt(o,o.return,se)}}if(o===i){ye=null;break}if(l=o.sibling,l!==null){l.return=o.return,ye=l;break}ye=o.return}}function Oy(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ye=l;break}ye=o.return}}function Dy(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Cc(4,o)}catch(F){Vt(o,l,F)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(F){Vt(o,p,F)}}var y=o.return;try{Mf(o)}catch(F){Vt(o,y,F)}break;case 5:var I=o.return;try{Mf(o)}catch(F){Vt(o,I,F)}}}catch(F){Vt(o,o.return,F)}if(o===i){ye=null;break}var D=o.sibling;if(D!==null){D.return=o.return,ye=D;break}ye=o.return}}var Ub=Math.ceil,Ac=Z.ReactCurrentDispatcher,Ff=Z.ReactCurrentOwner,Lr=Z.ReactCurrentBatchConfig,tt=0,an=null,Wt=null,pn=0,wr=0,xa=Rs(0),en=0,Hl=null,ko=0,Pc=0,Uf=0,Wl=null,nr=null,zf=0,Na=1/0,rs=null,Rc=!1,$f=null,Vs=null,kc=!1,Ms=null,xc=0,ql=0,Bf=null,Nc=-1,Oc=0;function Vn(){return(tt&6)!==0?ft():Nc!==-1?Nc:Nc=ft()}function Ls(i){return(i.mode&1)===0?1:(tt&2)!==0&&pn!==0?pn&-pn:Tb.transition!==null?(Oc===0&&(Oc=mi()),Oc):(i=T,i!==0||(i=window.event,i=i===void 0?16:wl(i.type)),i)}function ni(i,o,l,h){if(50<ql)throw ql=0,Bf=null,Error(t(185));vi(i,l,h),((tt&2)===0||i!==an)&&(i===an&&((tt&2)===0&&(Pc|=l),en===4&&js(i,pn)),rr(i,h),l===1&&tt===0&&(o.mode&1)===0&&(Na=ft()+500,ac&&xs()))}function rr(i,o){var l=i.callbackNode;mr(i,o);var h=Wi(i,i===an?pn:0);if(h===0)l!==null&&mo(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&mo(l),o===1)i.tag===0?Sb(My.bind(null,i)):Ev(My.bind(null,i)),yb(function(){(tt&6)===0&&xs()}),l=null;else{switch(q(h)){case 1:l=Bi;break;case 4:l=fi;break;case 16:l=kn;break;case 536870912:l=ea;break;default:l=kn}l=Hy(l,Vy.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Vy(i,o){if(Nc=-1,Oc=0,(tt&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Oa()&&i.callbackNode!==l)return null;var h=Wi(i,i===an?pn:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Dc(i,h);else{o=h;var p=tt;tt|=2;var y=jy();(an!==i||pn!==o)&&(rs=null,Na=ft()+500,No(i,o));do try{Bb();break}catch(D){Ly(i,D)}while(!0);af(),Ac.current=y,tt=p,Wt!==null?o=0:(an=null,pn=0,o=en)}if(o!==0){if(o===2&&(p=Nn(i),p!==0&&(h=p,o=Hf(i,p))),o===1)throw l=Hl,No(i,0),js(i,h),rr(i,ft()),l;if(o===6)js(i,h);else{if(p=i.current.alternate,(h&30)===0&&!zb(p)&&(o=Dc(i,h),o===2&&(y=Nn(i),y!==0&&(h=y,o=Hf(i,y))),o===1))throw l=Hl,No(i,0),js(i,h),rr(i,ft()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:Oo(i,nr,rs);break;case 3:if(js(i,h),(h&130023424)===h&&(o=zf+500-ft(),10<o)){if(Wi(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){Vn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Qd(Oo.bind(null,i,nr,rs),o);break}Oo(i,nr,rs);break;case 4:if(js(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var I=31-hn(h);y=1<<I,I=o[I],I>p&&(p=I),h&=~y}if(h=p,h=ft()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Ub(h/1960))-h,10<h){i.timeoutHandle=Qd(Oo.bind(null,i,nr,rs),h);break}Oo(i,nr,rs);break;case 5:Oo(i,nr,rs);break;default:throw Error(t(329))}}}return rr(i,ft()),i.callbackNode===l?Vy.bind(null,i):null}function Hf(i,o){var l=Wl;return i.current.memoizedState.isDehydrated&&(No(i,o).flags|=256),i=Dc(i,o),i!==2&&(o=nr,nr=l,o!==null&&Wf(o)),i}function Wf(i){nr===null?nr=i:nr.push.apply(nr,i)}function zb(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Yr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function js(i,o){for(o&=~Uf,o&=~Pc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-hn(o),h=1<<l;i[l]=-1,o&=~h}}function My(i){if((tt&6)!==0)throw Error(t(327));Oa();var o=Wi(i,0);if((o&1)===0)return rr(i,ft()),null;var l=Dc(i,o);if(i.tag!==0&&l===2){var h=Nn(i);h!==0&&(o=h,l=Hf(i,h))}if(l===1)throw l=Hl,No(i,0),js(i,o),rr(i,ft()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Oo(i,nr,rs),rr(i,ft()),null}function qf(i,o){var l=tt;tt|=1;try{return i(o)}finally{tt=l,tt===0&&(Na=ft()+500,ac&&xs())}}function xo(i){Ms!==null&&Ms.tag===0&&(tt&6)===0&&Oa();var o=tt;tt|=1;var l=Lr.transition,h=T;try{if(Lr.transition=null,T=1,i)return i()}finally{T=h,Lr.transition=l,tt=o,(tt&6)===0&&xs()}}function Kf(){wr=xa.current,wt(xa)}function No(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,vb(l)),Wt!==null)for(l=Wt.return;l!==null;){var h=l;switch(tf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&sc();break;case 3:Pa(),wt(Zn),wt(wn),mf();break;case 5:ff(h);break;case 4:Pa();break;case 13:wt(Pt);break;case 19:wt(Pt);break;case 10:lf(h.type._context);break;case 22:case 23:Kf()}l=l.return}if(an=i,Wt=i=Fs(i.current,null),pn=wr=o,en=0,Hl=null,Uf=Pc=ko=0,nr=Wl=null,Ao!==null){for(o=0;o<Ao.length;o++)if(l=Ao[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var I=y.next;y.next=p,h.next=I}l.pending=h}Ao=null}return i}function Ly(i,o){do{var l=Wt;try{if(af(),vc.current=Ec,yc){for(var h=Rt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}yc=!1}if(Ro=0,on=Zt=Rt=null,jl=!1,Fl=0,Ff.current=null,l===null||l.return===null){en=1,Hl=o,Wt=null;break}e:{var y=i,I=l.return,D=l,F=o;if(o=pn,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,oe=D,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=ly(I);if(me!==null){me.flags&=-257,uy(me,I,D,y,o),me.mode&1&&ay(y,Y,o),o=me,F=Y;var _e=o.updateQueue;if(_e===null){var Ee=new Set;Ee.add(F),o.updateQueue=Ee}else _e.add(F);break e}else{if((o&1)===0){ay(y,Y,o),Gf();break e}F=Error(t(426))}}else if(It&&D.mode&1){var Ft=ly(I);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),uy(Ft,I,D,y,o),sf(Ra(F,D));break e}}y=F=Ra(F,D),en!==4&&(en=2),Wl===null?Wl=[y]:Wl.push(y),y=I;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var W=sy(y,F,o);Nv(y,W);break e;case 1:D=F;var z=y.type,K=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Vs===null||!Vs.has(K)))){y.flags|=65536,o&=-o,y.lanes|=o;var he=oy(y,D,o);Nv(y,he);break e}}y=y.return}while(y!==null)}Uy(l)}catch(Te){o=Te,Wt===l&&l!==null&&(Wt=l=l.return);continue}break}while(!0)}function jy(){var i=Ac.current;return Ac.current=Ec,i===null?Ec:i}function Gf(){(en===0||en===3||en===2)&&(en=4),an===null||(ko&268435455)===0&&(Pc&268435455)===0||js(an,pn)}function Dc(i,o){var l=tt;tt|=2;var h=jy();(an!==i||pn!==o)&&(rs=null,No(i,o));do try{$b();break}catch(p){Ly(i,p)}while(!0);if(af(),tt=l,Ac.current=h,Wt!==null)throw Error(t(261));return an=null,pn=0,en}function $b(){for(;Wt!==null;)Fy(Wt)}function Bb(){for(;Wt!==null&&!Yt();)Fy(Wt)}function Fy(i){var o=By(i.alternate,i,wr);i.memoizedProps=i.pendingProps,o===null?Uy(i):Wt=o,Ff.current=null}function Uy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=Vb(l,o,wr),l!==null){Wt=l;return}}else{if(l=Mb(l,o),l!==null){l.flags&=32767,Wt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{en=6,Wt=null;return}}if(o=o.sibling,o!==null){Wt=o;return}Wt=o=i}while(o!==null);en===0&&(en=5)}function Oo(i,o,l){var h=T,p=Lr.transition;try{Lr.transition=null,T=1,Hb(i,o,l,h)}finally{Lr.transition=p,T=h}return null}function Hb(i,o,l,h){do Oa();while(Ms!==null);if((tt&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(lt(i,y),i===an&&(Wt=an=null,pn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||kc||(kc=!0,Hy(kn,function(){return Oa(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Lr.transition,Lr.transition=null;var I=T;T=1;var D=tt;tt|=4,Ff.current=null,jb(i,l),ky(l,i),cb(Kd),bs=!!qd,Kd=qd=null,i.current=l,Fb(l),dt(),tt=D,T=I,Lr.transition=y}else i.current=l;if(kc&&(kc=!1,Ms=i,xc=p),y=i.pendingLanes,y===0&&(Vs=null),ta(l.stateNode),rr(i,ft()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Rc)throw Rc=!1,i=$f,$f=null,i;return(xc&1)!==0&&i.tag!==0&&Oa(),y=i.pendingLanes,(y&1)!==0?i===Bf?ql++:(ql=0,Bf=i):ql=0,xs(),null}function Oa(){if(Ms!==null){var i=q(xc),o=Lr.transition,l=T;try{if(Lr.transition=null,T=16>i?16:i,Ms===null)var h=!1;else{if(i=Ms,Ms=null,xc=0,(tt&6)!==0)throw Error(t(331));var p=tt;for(tt|=4,ye=i.current;ye!==null;){var y=ye,I=y.child;if((ye.flags&16)!==0){var D=y.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(ye=Y;ye!==null;){var oe=ye;switch(oe.tag){case 0:case 11:case 15:Bl(8,oe,y)}var le=oe.child;if(le!==null)le.return=oe,ye=le;else for(;ye!==null;){oe=ye;var se=oe.sibling,me=oe.return;if(by(oe),oe===Y){ye=null;break}if(se!==null){se.return=me,ye=se;break}ye=me}}}var _e=y.alternate;if(_e!==null){var Ee=_e.child;if(Ee!==null){_e.child=null;do{var Ft=Ee.sibling;Ee.sibling=null,Ee=Ft}while(Ee!==null)}}ye=y}}if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,ye=I;else e:for(;ye!==null;){if(y=ye,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Bl(9,y,y.return)}var W=y.sibling;if(W!==null){W.return=y.return,ye=W;break e}ye=y.return}}var z=i.current;for(ye=z;ye!==null;){I=ye;var K=I.child;if((I.subtreeFlags&2064)!==0&&K!==null)K.return=I,ye=K;else e:for(I=z;ye!==null;){if(D=ye,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Cc(9,D)}}catch(Te){Vt(D,D.return,Te)}if(D===I){ye=null;break e}var he=D.sibling;if(he!==null){he.return=D.return,ye=he;break e}ye=D.return}}if(tt=p,xs(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Hi,i)}catch{}h=!0}return h}finally{T=l,Lr.transition=o}}return!1}function zy(i,o,l){o=Ra(l,o),o=sy(i,o,1),i=Os(i,o,1),o=Vn(),i!==null&&(vi(i,1,o),rr(i,o))}function Vt(i,o,l){if(i.tag===3)zy(i,i,l);else for(;o!==null;){if(o.tag===3){zy(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Vs===null||!Vs.has(h))){i=Ra(l,i),i=oy(o,i,1),o=Os(o,i,1),i=Vn(),o!==null&&(vi(o,1,i),rr(o,i));break}}o=o.return}}function Wb(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=Vn(),i.pingedLanes|=i.suspendedLanes&l,an===i&&(pn&l)===l&&(en===4||en===3&&(pn&130023424)===pn&&500>ft()-zf?No(i,0):Uf|=l),rr(i,o)}function $y(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ts,Ts<<=1,(Ts&130023424)===0&&(Ts=4194304)));var l=Vn();i=es(i,o),i!==null&&(vi(i,o,l),rr(i,l))}function qb(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),$y(i,l)}function Kb(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),$y(i,l)}var By;By=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Zn.current)tr=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return tr=!1,Db(i,o,l);tr=(i.flags&131072)!==0}else tr=!1,It&&(o.flags&1048576)!==0&&Sv(o,uc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Ic(i,o),i=o.pendingProps;var p=Ea(o,wn.current);Aa(o,l),p=yf(null,o,h,i,p,l);var y=_f();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,er(h)?(y=!0,oc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,hf(o),p.updater=Sc,o.stateNode=p,p._reactInternals=o,bf(o,h,i,l),o=Rf(null,o,h,!0,y,l)):(o.tag=0,It&&y&&ef(o),Dn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(Ic(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=Qb(h),i=Zr(h,i),p){case 0:o=Pf(null,o,h,i,l);break e;case 1:o=my(null,o,h,i,l);break e;case 11:o=cy(null,o,h,i,l);break e;case 14:o=hy(null,o,h,Zr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Zr(h,p),Pf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Zr(h,p),my(i,o,h,p,l);case 3:e:{if(gy(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,xv(i,o),mc(o,h,null,l);var I=o.memoizedState;if(h=I.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Ra(Error(t(423)),o),o=vy(i,o,h,l,p);break e}else if(h!==p){p=Ra(Error(t(424)),o),o=vy(i,o,h,l,p);break e}else for(_r=Ps(o.stateNode.containerInfo.firstChild),yr=o,It=!0,Jr=null,l=Rv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ia(),h===p){o=ns(i,o,l);break e}Dn(i,o,h,l)}o=o.child}return o;case 5:return Dv(o),i===null&&rf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,I=p.children,Gd(h,p)?I=null:y!==null&&Gd(h,y)&&(o.flags|=32),py(i,o),Dn(i,o,I,l),o.child;case 6:return i===null&&rf(o),null;case 13:return yy(i,o,l);case 4:return df(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ba(o,null,h,l):Dn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Zr(h,p),cy(i,o,h,p,l);case 7:return Dn(i,o,o.pendingProps,l),o.child;case 8:return Dn(i,o,o.pendingProps.children,l),o.child;case 12:return Dn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,I=p.value,gt(dc,h._currentValue),h._currentValue=I,y!==null)if(Yr(y.value,I)){if(y.children===p.children&&!Zn.current){o=ns(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var D=y.dependencies;if(D!==null){I=y.child;for(var F=D.firstContext;F!==null;){if(F.context===h){if(y.tag===1){F=ts(-1,l&-l),F.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),Y.pending=F}}y.lanes|=l,F=y.alternate,F!==null&&(F.lanes|=l),uf(y.return,l,o),D.lanes|=l;break}F=F.next}}else if(y.tag===10)I=y.type===o.type?null:y.child;else if(y.tag===18){if(I=y.return,I===null)throw Error(t(341));I.lanes|=l,D=I.alternate,D!==null&&(D.lanes|=l),uf(I,l,o),I=y.sibling}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===o){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}Dn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Aa(o,l),p=Vr(p),h=h(p),o.flags|=1,Dn(i,o,h,l),o.child;case 14:return h=o.type,p=Zr(h,o.pendingProps),p=Zr(h.type,p),hy(i,o,h,p,l);case 15:return dy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Zr(h,p),Ic(i,o),o.tag=1,er(h)?(i=!0,oc(o)):i=!1,Aa(o,l),ry(o,h,p),bf(o,h,p,l),Rf(null,o,h,!0,i,l);case 19:return wy(i,o,l);case 22:return fy(i,o,l)}throw Error(t(156,o.tag))};function Hy(i,o){return ws(i,o)}function Gb(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(i,o,l,h){return new Gb(i,o,l,h)}function Qf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qb(i){if(typeof i=="function")return Qf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===Oe)return 14}return 2}function Fs(i,o){var l=i.alternate;return l===null?(l=jr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Vc(i,o,l,h,p,y){var I=2;if(h=i,typeof i=="function")Qf(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case k:return Do(l.children,p,y,o);case A:I=8,p|=8;break;case N:return i=jr(12,l,o,p|2),i.elementType=N,i.lanes=y,i;case x:return i=jr(13,l,o,p),i.elementType=x,i.lanes=y,i;case Fe:return i=jr(19,l,o,p),i.elementType=Fe,i.lanes=y,i;case De:return Mc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:I=10;break e;case M:I=9;break e;case L:I=11;break e;case Oe:I=14;break e;case $e:I=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=jr(I,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function Do(i,o,l,h){return i=jr(7,i,h,o),i.lanes=l,i}function Mc(i,o,l,h){return i=jr(22,i,h,o),i.elementType=De,i.lanes=l,i.stateNode={isHidden:!1},i}function Xf(i,o,l){return i=jr(6,i,null,o),i.lanes=l,i}function Yf(i,o,l){return o=jr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Xb(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gi(0),this.expirationTimes=gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Jf(i,o,l,h,p,y,I,D,F){return i=new Xb(i,o,l,D,F),o===1?(o=1,y===!0&&(o|=8)):o=0,y=jr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(y),i}function Yb(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function Wy(i){if(!i)return ks;i=i._reactInternals;e:{if(Gn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(er(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(er(l))return _v(i,l,o)}return o}function qy(i,o,l,h,p,y,I,D,F){return i=Jf(l,h,!0,i,p,y,I,D,F),i.context=Wy(null),l=i.current,h=Vn(),p=Ls(l),y=ts(h,p),y.callback=o??null,Os(l,y,p),i.current.lanes=p,vi(i,p,h),rr(i,h),i}function Lc(i,o,l,h){var p=o.current,y=Vn(),I=Ls(p);return l=Wy(l),o.context===null?o.context=l:o.pendingContext=l,o=ts(y,I),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Os(p,o,I),i!==null&&(ni(i,p,I,y),pc(i,p,I)),I}function jc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Ky(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Zf(i,o){Ky(i,o),(i=i.alternate)&&Ky(i,o)}function Jb(){return null}var Gy=typeof reportError=="function"?reportError:function(i){console.error(i)};function ep(i){this._internalRoot=i}Fc.prototype.render=ep.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Lc(i,o,null,null)},Fc.prototype.unmount=ep.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;xo(function(){Lc(null,i,null,null)}),o[Xi]=null}};function Fc(i){this._internalRoot=i}Fc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pr();i={blockedOn:null,target:i,priority:o};for(var l=0;l<_i.length&&o!==0&&o<_i[l].priority;l++);_i.splice(l,0,i),l===0&&$u(i)}};function tp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Uc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qy(){}function Zb(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var Y=jc(I);y.call(Y)}}var I=qy(o,h,i,0,null,!1,!1,"",Qy);return i._reactRootContainer=I,i[Xi]=I.current,kl(i.nodeType===8?i.parentNode:i),xo(),I}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var D=h;h=function(){var Y=jc(F);D.call(Y)}}var F=Jf(i,0,!1,null,null,!1,!1,"",Qy);return i._reactRootContainer=F,i[Xi]=F.current,kl(i.nodeType===8?i.parentNode:i),xo(function(){Lc(o,F,l,h)}),F}function zc(i,o,l,h,p){var y=l._reactRootContainer;if(y){var I=y;if(typeof p=="function"){var D=p;p=function(){var F=jc(I);D.call(F)}}Lc(o,I,i,p)}else I=Zb(l,o,i,p,h);return jc(I)}ee=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=pi(o.pendingLanes);l!==0&&(yi(o,l|1),rr(o,ft()),(tt&6)===0&&(Na=ft()+500,xs()))}break;case 13:xo(function(){var h=es(i,1);if(h!==null){var p=Vn();ni(h,i,1,p)}}),Zf(i,1)}},Ie=function(i){if(i.tag===13){var o=es(i,134217728);if(o!==null){var l=Vn();ni(o,i,134217728,l)}Zf(i,134217728)}},qe=function(i){if(i.tag===13){var o=Ls(i),l=es(i,o);if(l!==null){var h=Vn();ni(l,i,o,h)}Zf(i,o)}},Pr=function(){return T},Rr=function(i,o){var l=T;try{return T=i,o()}finally{T=l}},Cr=function(i,o,l){switch(o){case"input":if(nn(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=ic(h);if(!p)throw Error(t(90));st(h),nn(h,p)}}}break;case"textarea":cn(i,l);break;case"select":o=l.value,o!=null&&Be(i,!!l.multiple,o,!1)}},ci=qf,rn=xo;var eC={usingClientEntryPoint:!1,Events:[Ol,_a,ic,Hn,ys,qf]},Kl={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tC={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Qn(i),i===null?null:i.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||Jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Hi=$c.inject(tC),xn=$c}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eC,ir.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tp(o))throw Error(t(200));return Yb(i,o,null,l)},ir.createRoot=function(i,o){if(!tp(i))throw Error(t(299));var l=!1,h="",p=Gy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Jf(i,1,!1,null,null,l,!1,h,p),i[Xi]=o.current,kl(i.nodeType===8?i.parentNode:i),new ep(o)},ir.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Qn(o),i=i===null?null:i.stateNode,i},ir.flushSync=function(i){return xo(i)},ir.hydrate=function(i,o,l){if(!Uc(o))throw Error(t(200));return zc(null,i,o,!0,l)},ir.hydrateRoot=function(i,o,l){if(!tp(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",I=Gy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),o=qy(o,null,i,1,l??null,p,!1,y,I),i[Xi]=o.current,kl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Fc(o)},ir.render=function(i,o,l){if(!Uc(o))throw Error(t(200));return zc(null,i,o,!1,l)},ir.unmountComponentAtNode=function(i){if(!Uc(i))throw Error(t(40));return i._reactRootContainer?(xo(function(){zc(null,null,i,!1,function(){i._reactRootContainer=null,i[Xi]=null})}),!0):!1},ir.unstable_batchedUpdates=qf,ir.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!Uc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return zc(i,o,l,!1,h)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var r_;function H0(){if(r_)return ip.exports;r_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=uC(),ip.exports}var i_;function cC(){if(i_)return Bc;i_=1;var n=H0();return Bc.createRoot=n.createRoot,Bc.hydrateRoot=n.hydrateRoot,Bc}var hC=cC();const dC=$0(hC);var fC=H0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},du.apply(this,arguments)}var Ks;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ks||(Ks={}));const s_="popstate";function pC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Mp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:W0(s)}return gC(e,t,null,n)}function Xt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mC(){return Math.random().toString(36).substr(2,8)}function o_(n,e){return{usr:n.state,key:n.key,idx:e}}function Mp(n,e,t,r){return t===void 0&&(t=null),du({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?sl(e):e,{state:t,key:e&&e.key||r||mC()})}function W0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function gC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=Ks.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(du({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function S(){d=Ks.Pop;let C=_(),$=C==null?null:C-m;m=C,f&&f({action:d,location:R.location,delta:$})}function w(C,$){d=Ks.Push;let Q=Mp(R.location,C,$);m=_()+1;let G=o_(Q,m),Z=R.createHref(Q);try{u.pushState(G,"",Z)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(Z)}a&&f&&f({action:d,location:R.location,delta:1})}function P(C,$){d=Ks.Replace;let Q=Mp(R.location,C,$);m=_();let G=o_(Q,m),Z=R.createHref(Q);u.replaceState(G,"",Z),a&&f&&f({action:d,location:R.location,delta:0})}function O(C){let $=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof C=="string"?C:W0(C);return Q=Q.replace(/ $/,"%20"),Xt($,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,$)}let R={get action(){return d},get location(){return n(s,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(s_,S),f=C,()=>{s.removeEventListener(s_,S),f=null}},createHref(C){return e(s,C)},createURL:O,encodeLocation(C){let $=O(C);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:w,replace:P,go(C){return u.go(C)}};return R}var a_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(a_||(a_={}));function vC(n,e,t){return t===void 0&&(t="/"),yC(n,e,t)}function yC(n,e,t,r){let s=typeof e=="string"?sl(e):e,a=G0(s.pathname||"/",t);if(a==null)return null;let u=q0(n);_C(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=xC(a);d=PC(u[f],m)}return d}function q0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Xt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Fo([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),q0(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:CC(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of K0(a.path))s(a,u,f)}),e}function K0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=K0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function _C(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wC=/^:[\w-]+$/,EC=3,SC=2,TC=1,IC=10,bC=-2,l_=n=>n==="*";function CC(n,e){let t=n.split("/"),r=t.length;return t.some(l_)&&(r+=bC),e&&(r+=SC),t.filter(s=>!l_(s)).reduce((s,a)=>s+(wC.test(a)?EC:a===""?TC:IC),r)}function AC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function PC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",S=RC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),w=f.route;if(!S)return null;Object.assign(s,S.params),u.push({params:s,pathname:Fo([a,S.pathname]),pathnameBase:MC(Fo([a,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(a=Fo([a,S.pathnameBase]))}return u}function RC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,_,S)=>{let{paramName:w,isOptional:P}=_;if(w==="*"){let R=d[S]||"";u=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const O=d[S];return P&&!O?m[w]=void 0:m[w]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function kC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function G0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const NC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OC=n=>NC.test(n);function DC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?sl(n):n,a;if(t)if(OC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),bm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=u_(t.substring(1),"/"):a=u_(t,e)}else a=e;return{pathname:a,search:LC(r),hash:jC(s)}}function u_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ap(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Q0(n,e){let t=VC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function X0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=sl(n):(s=du({},n),Xt(!s.pathname||!s.pathname.includes("?"),ap("?","pathname","search",s)),Xt(!s.pathname||!s.pathname.includes("#"),ap("#","pathname","hash",s)),Xt(!s.search||!s.search.includes("#"),ap("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let S=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),S-=1;s.pathname=w.join("/")}d=S>=0?e[S]:"/"}let f=DC(s,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Fo=n=>n.join("/").replace(/\/\/+/g,"/"),MC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Y0=["post","put","patch","delete"];new Set(Y0);const UC=["get",...Y0];new Set(UC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fu.apply(this,arguments)}const Cm=V.createContext(null),zC=V.createContext(null),Iu=V.createContext(null),Qh=V.createContext(null),Ko=V.createContext({outlet:null,matches:[],isDataRoute:!1}),J0=V.createContext(null);function bu(){return V.useContext(Qh)!=null}function Am(){return bu()||Xt(!1),V.useContext(Qh).location}function Z0(n){V.useContext(Iu).static||V.useLayoutEffect(n)}function Cu(){let{isDataRoute:n}=V.useContext(Ko);return n?e1():$C()}function $C(){bu()||Xt(!1);let n=V.useContext(Cm),{basename:e,future:t,navigator:r}=V.useContext(Iu),{matches:s}=V.useContext(Ko),{pathname:a}=Am(),u=JSON.stringify(Q0(s,t.v7_relativeSplatPath)),d=V.useRef(!1);return Z0(()=>{d.current=!0}),V.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let S=X0(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Fo([e,S.pathname])),(_.replace?r.replace:r.push)(S,_.state,_)},[e,r,u,a,n])}function BC(n,e){return HC(n,e)}function HC(n,e,t,r){bu()||Xt(!1);let{navigator:s}=V.useContext(Iu),{matches:a}=V.useContext(Ko),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Am(),_;if(e){var S;let C=typeof e=="string"?sl(e):e;f==="/"||(S=C.pathname)!=null&&S.startsWith(f)||Xt(!1),_=C}else _=m;let w=_.pathname||"/",P=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let O=vC(n,{pathname:P}),R=QC(O&&O.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Fo([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Fo([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,r);return e&&R?V.createElement(Qh.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ks.Pop}},R):R}function WC(){let n=ZC(),e=FC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const qC=V.createElement(WC,null);class KC extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Ko.Provider,{value:this.props.routeContext},V.createElement(J0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GC(n){let{routeContext:e,match:t,children:r}=n,s=V.useContext(Cm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Ko.Provider,{value:e},r)}function QC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let _=u.findIndex(S=>S.route.id&&(d==null?void 0:d[S.route.id])!==void 0);_>=0||Xt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let S=u[_];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=_),S.route.id){let{loaderData:w,errors:P}=t,O=S.route.loader&&w[S.route.id]===void 0&&(!P||P[S.route.id]===void 0);if(S.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,S,w)=>{let P,O=!1,R=null,C=null;t&&(P=d&&S.route.id?d[S.route.id]:void 0,R=S.route.errorElement||qC,f&&(m<0&&w===0?(t1("route-fallback"),O=!0,C=null):m===w&&(O=!0,C=S.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,w+1)),Q=()=>{let G;return P?G=R:O?G=C:S.route.Component?G=V.createElement(S.route.Component,null):S.route.element?G=S.route.element:G=_,V.createElement(GC,{match:S,routeContext:{outlet:_,matches:$,isDataRoute:t!=null},children:G})};return t&&(S.route.ErrorBoundary||S.route.errorElement||w===0)?V.createElement(KC,{location:t.location,revalidation:t.revalidation,component:R,error:P,children:Q(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):Q()},null)}var eE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(eE||{}),tE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(tE||{});function XC(n){let e=V.useContext(Cm);return e||Xt(!1),e}function YC(n){let e=V.useContext(zC);return e||Xt(!1),e}function JC(n){let e=V.useContext(Ko);return e||Xt(!1),e}function nE(n){let e=JC(),t=e.matches[e.matches.length-1];return t.route.id||Xt(!1),t.route.id}function ZC(){var n;let e=V.useContext(J0),t=YC(),r=nE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function e1(){let{router:n}=XC(eE.UseNavigateStable),e=nE(tE.UseNavigateStable),t=V.useRef(!1);return Z0(()=>{t.current=!0}),V.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,fu({fromRouteId:e},a)))},[n,e])}const c_={};function t1(n,e,t){c_[n]||(c_[n]=!0)}function n1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ii(n){let{to:e,replace:t,state:r,relative:s}=n;bu()||Xt(!1);let{future:a,static:u}=V.useContext(Iu),{matches:d}=V.useContext(Ko),{pathname:f}=Am(),m=Cu(),_=X0(e,Q0(d,a.v7_relativeSplatPath),f,s==="path"),S=JSON.stringify(_);return V.useEffect(()=>m(JSON.parse(S),{replace:t,state:r,relative:s}),[m,S,s,t,r]),null}function Vo(n){Xt(!1)}function r1(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ks.Pop,navigator:a,static:u=!1,future:d}=n;bu()&&Xt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:u,future:fu({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=sl(r));let{pathname:_="/",search:S="",hash:w="",state:P=null,key:O="default"}=r,R=V.useMemo(()=>{let C=G0(_,f);return C==null?null:{location:{pathname:C,search:S,hash:w,state:P,key:O},navigationType:s}},[f,_,S,w,P,O,s]);return R==null?null:V.createElement(Iu.Provider,{value:m},V.createElement(Qh.Provider,{children:t,value:R}))}function i1(n){let{children:e,location:t}=n;return BC(Lp(e),t)}new Promise(()=>{});function Lp(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,s)=>{if(!V.isValidElement(r))return;let a=[...e,s];if(r.type===V.Fragment){t.push.apply(t,Lp(r.props.children,a));return}r.type!==Vo&&Xt(!1),!r.props.index||!r.props.children||Xt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Lp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const s1="6";try{window.__reactRouterVersion=s1}catch{}const o1="startTransition",h_=Vp[o1];function a1(n){let{basename:e,children:t,future:r,window:s}=n,a=V.useRef();a.current==null&&(a.current=pC({window:s,v5Compat:!0}));let u=a.current,[d,f]=V.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},_=V.useCallback(S=>{m&&h_?h_(()=>f(S)):f(S)},[f,m]);return V.useLayoutEffect(()=>u.listen(_),[u,_]),V.useEffect(()=>n1(r),[r]),V.createElement(r1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var d_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(d_||(d_={}));var f_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(f_||(f_={}));function p_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function l1(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function u1(){const[n,e]=V.useState(null),[t,r]=V.useState(!1);V.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=V.useMemo(()=>!p_()&&l1()&&!t&&!n,[t,n]),a=V.useMemo(()=>!p_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:g.jsxs("section",{className:"install-banner","aria-live":"polite",children:[g.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),g.jsxs("div",{className:"install-actions",children:[a?g.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const rE=V.createContext(null);function c1({children:n}){const[e,t]=V.useState([]),r=V.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=V.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return g.jsxs(rE.Provider,{value:s,children:[n,g.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>g.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Xh(){const n=V.useContext(rE);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const h1=()=>{};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},d1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},sE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,S=(a&3)<<4|d>>4;let w=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(w=64)),r.push(t[_],t[S],t[w],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const S=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||S==null)throw new f1;const w=a<<2|d>>4;if(r.push(w),m!==64){const P=d<<4&240|m>>2;if(r.push(P),S!==64){const O=m<<6&192|S;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class f1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p1=function(n){const e=iE(n);return sE.encodeByteArray(e,!0)},_h=function(n){return p1(n).replace(/\./g,"")},oE=function(n){try{return sE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=()=>m1().__FIREBASE_DEFAULTS__,v1=()=>{if(typeof process>"u"||typeof m_>"u")return;const n=m_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oE(n[1]);return e&&JSON.parse(e)},Yh=()=>{try{return h1()||g1()||v1()||y1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aE=n=>{var e,t;return(t=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Pm=n=>{const e=aE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lE=()=>{var n;return(n=Yh())===null||n===void 0?void 0:n.config},uE=n=>{var e;return(e=Yh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_h(JSON.stringify(t)),_h(JSON.stringify(u)),""].join(".")}const su={};function w1(){const n={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function E1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let g_=!1;function Zh(n,e){if(typeof window>"u"||typeof document>"u"||!gs(window.location.host)||su[n]===e||su[n]||g_)return;su[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=w1().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{g_=!0,u()},w}function _(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=E1(r),P=t("text"),O=document.getElementById(P)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),$=t("preprendIcon"),Q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const G=w.element;d(G),_(C,R);const Z=m();f(Q,$),G.append(Q,O,C,Z),document.body.appendChild(G)}a?(O.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function T1(){var n;const e=(n=Yh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A1(){const n=Pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function P1(){return!T1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R1(){try{return typeof indexedDB=="object"}catch{return!1}}function k1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="FirebaseError";class li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=x1,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?N1(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new li(s,d,r)}}function N1(n,e){return n.replace(O1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const O1=/\{\$([^}]+)}/g;function D1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function us(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(v_(a)&&v_(u)){if(!us(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function v_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V1(n,e){const t=new M1(n,e);return t.subscribe.bind(t)}class M1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");L1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=lp),s.error===void 0&&(s.error=lp),s.complete===void 0&&(s.complete=lp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n){return n&&n._delegate?n._delegate:n}class cs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U1(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F1(n){return n===Mo?void 0:n}function U1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const $1={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},B1=Xe.INFO,H1={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},W1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=H1[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=B1,this._logHandler=W1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const q1=(n,e)=>e.some(t=>n instanceof t);let y_,__;function K1(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G1(){return __||(__=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,jp=new WeakMap,dE=new WeakMap,up=new WeakMap,km=new WeakMap;function Q1(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Qs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&hE.set(t,n)}).catch(()=>{}),km.set(e,n),e}function X1(n){if(jp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});jp.set(n,e)}let Fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Y1(n){Fp=n(Fp)}function J1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cp(this),e,...t);return dE.set(r,e.sort?e.sort():[e]),Qs(r)}:G1().includes(n)?function(...e){return n.apply(cp(this),e),Qs(hE.get(this))}:function(...e){return Qs(n.apply(cp(this),e))}}function Z1(n){return typeof n=="function"?J1(n):(n instanceof IDBTransaction&&X1(n),q1(n,K1())?new Proxy(n,Fp):n)}function Qs(n){if(n instanceof IDBRequest)return Q1(n);if(up.has(n))return up.get(n);const e=Z1(n);return e!==n&&(up.set(n,e),km.set(e,n)),e}const cp=n=>km.get(n);function eA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Qs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Qs(u.result),f.oldVersion,f.newVersion,Qs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],hp=new Map;function w_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=nA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tA.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return hp.set(e,a),a}Y1(n=>({...n,get:(e,t,r)=>w_(e,t)||n.get(e,t,r),has:(e,t)=>!!w_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function iA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Up="@firebase/app",E_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Rm("@firebase/app"),sA="@firebase/app-compat",oA="@firebase/analytics-compat",aA="@firebase/analytics",lA="@firebase/app-check-compat",uA="@firebase/app-check",cA="@firebase/auth",hA="@firebase/auth-compat",dA="@firebase/database",fA="@firebase/data-connect",pA="@firebase/database-compat",mA="@firebase/functions",gA="@firebase/functions-compat",vA="@firebase/installations",yA="@firebase/installations-compat",_A="@firebase/messaging",wA="@firebase/messaging-compat",EA="@firebase/performance",SA="@firebase/performance-compat",TA="@firebase/remote-config",IA="@firebase/remote-config-compat",bA="@firebase/storage",CA="@firebase/storage-compat",AA="@firebase/firestore",PA="@firebase/ai",RA="@firebase/firestore-compat",kA="firebase",xA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]",NA={[Up]:"fire-core",[sA]:"fire-core-compat",[aA]:"fire-analytics",[oA]:"fire-analytics-compat",[uA]:"fire-app-check",[lA]:"fire-app-check-compat",[cA]:"fire-auth",[hA]:"fire-auth-compat",[dA]:"fire-rtdb",[fA]:"fire-data-connect",[pA]:"fire-rtdb-compat",[mA]:"fire-fn",[gA]:"fire-fn-compat",[vA]:"fire-iid",[yA]:"fire-iid-compat",[_A]:"fire-fcm",[wA]:"fire-fcm-compat",[EA]:"fire-perf",[SA]:"fire-perf-compat",[TA]:"fire-rc",[IA]:"fire-rc-compat",[bA]:"fire-gcs",[CA]:"fire-gcs-compat",[AA]:"fire-fst",[RA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,OA=new Map,$p=new Map;function S_(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function eo(n){const e=n.name;if($p.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,n);for(const t of wh.values())S_(t,n);for(const t of OA.values())S_(t,n);return!0}function Ru(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new Au("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=xA;function fE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Xs.create("bad-app-name",{appName:String(s)});if(t||(t=lE()),!t)throw Xs.create("no-options");const a=wh.get(s);if(a){if(us(t,a.options)&&us(r,a.config))return a;throw Xs.create("duplicate-app",{appName:s})}const u=new z1(s);for(const f of $p.values())u.addComponent(f);const d=new VA(t,r,u);return wh.set(s,d),d}function ed(n=zp){const e=wh.get(n);if(!e&&n===zp&&lE())return fE();if(!e)throw Xs.create("no-app",{appName:n});return e}function zr(n,e,t){var r;let s=(r=NA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(d.join(" "));return}eo(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebase-heartbeat-database",LA=1,pu="firebase-heartbeat-store";let dp=null;function pE(){return dp||(dp=eA(MA,LA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xs.create("idb-open",{originalErrorMessage:n.message})})),dp}async function jA(n){try{const t=(await pE()).transaction(pu),r=await t.objectStore(pu).get(mE(n));return await t.done,r}catch(e){if(e instanceof li)hs.warn(e.message);else{const t=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(t.message)}}}async function T_(n,e){try{const r=(await pE()).transaction(pu,"readwrite");await r.objectStore(pu).put(e,mE(n)),await r.done}catch(t){if(t instanceof li)hs.warn(t.message);else{const r=Xs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hs.warn(r.message)}}}function mE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=1024,UA=30;class zA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=I_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>UA){const u=HA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=I_(),{heartbeatsToSend:r,unsentEntries:s}=$A(this._heartbeatsCache.heartbeats),a=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return hs.warn(t),""}}}function I_(){return new Date().toISOString().substring(0,10)}function $A(n,e=FA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),b_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),b_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class BA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R1()?k1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function b_(n){return _h(JSON.stringify({version:2,heartbeats:n})).length}function HA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n){eo(new cs("platform-logger",e=>new rA(e),"PRIVATE")),eo(new cs("heartbeat",e=>new zA(e),"PRIVATE")),zr(Up,E_,n),zr(Up,E_,"esm2017"),zr("fire-js","")}WA("");var qA="firebase",KA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr(qA,KA,"app");function xm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function gE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GA=gE,vE=new Au("auth","Firebase",gE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Rm("@firebase/auth");function QA(n,...e){Eh.logLevel<=Xe.WARN&&Eh.warn(`Auth (${Go}): ${n}`,...e)}function sh(n,...e){Eh.logLevel<=Xe.ERROR&&Eh.error(`Auth (${Go}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,...e){throw Om(n,...e)}function si(n,...e){return Om(n,...e)}function Nm(n,e,t){const r=Object.assign(Object.assign({},GA()),{[e]:t});return new Au("auth","Firebase",r).create(e,{appName:n.name})}function Ys(n){return Nm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Li(n,"argument-error"),Nm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Om(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vE.create(n,...e)}function Le(n,e,...t){if(!n)throw Om(e,...t)}function ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sh(e),new Error(e)}function ds(n,e){n||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function XA(){return C_()==="http:"||C_()==="https:"}function C_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XA()||b1()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,ds(t>e,"Short delay should be less than long delay!"),this.isMobile=S1()||C1()}get(){return YA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n,e){ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tP=new ku(3e4,6e4);function Vm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ol(n,e,t,r,s={}){return wE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=Pu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return I1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&gs(n.emulatorConfig.host)&&(m.credentials="include"),_E.fetch()(await EE(n,n.config.apiHost,t,d),m)})}async function wE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZA),e);try{const s=new rP(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Hc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Hc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Hc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Nm(n,_,m);Li(n,_)}}catch(s){if(s instanceof li)throw s;Li(n,"network-request-failed",{message:String(s)})}}async function nP(n,e,t,r,s={}){const a=await ol(n,e,t,r,s);return"mfaPendingCredential"in a&&Li(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function EE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Dm(n.config,s):`${n.config.apiScheme}://${s}`;return eP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class rP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),tP.get())})}}function Hc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=si(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e){return ol(n,"POST","/v1/accounts:delete",e)}async function Sh(n,e){return ol(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sP(n,e=!1){const t=Et(n),r=await t.getIdToken(e),s=Mm(r);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ou(fp(s.auth_time)),issuedAtTime:ou(fp(s.iat)),expirationTime:ou(fp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fp(n){return Number(n)*1e3}function Mm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const s=oE(t);return s?JSON.parse(s):(sh("Failed to decode base64 JWT payload"),null)}catch(s){return sh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function A_(n){const e=Mm(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof li&&oP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(n){var e;const t=n.auth,r=await n.getIdToken(),s=await mu(n,Sh(t,{idToken:r}));Le(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?SE(a.providerUserInfo):[],d=uP(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?m:!1,S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Hp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,S)}async function lP(n){const e=Et(n);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SE(n){return n.map(e=>{var{providerId:t}=e,r=xm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e){const t=await wE(n,{},async()=>{const r=Pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await EE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&gs(n.emulatorConfig.host)&&(f.credentials="include"),_E.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hP(n,e){return ol(n,"POST","/v2/accounts:revokeToken",Vm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=A_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await cP(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new za;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Le(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await mu(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sP(this,e)}reload(){return lP(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Ys(this.auth));const e=await this.getIdToken();return await mu(this,iP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,_;const S=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,R=(d=t.tenantId)!==null&&d!==void 0?d:void 0,C=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,$=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:G,emailVerified:Z,isAnonymous:X,providerData:ie,stsTokenManager:k}=t;Le(G&&k,e,"internal-error");const A=za.fromJSON(this.name,k);Le(typeof G=="string",e,"internal-error"),zs(S,e.name),zs(w,e.name),Le(typeof Z=="boolean",e,"internal-error"),Le(typeof X=="boolean",e,"internal-error"),zs(P,e.name),zs(O,e.name),zs(R,e.name),zs(C,e.name),zs($,e.name),zs(Q,e.name);const N=new ri({uid:G,auth:e,email:w,emailVerified:Z,displayName:S,isAnonymous:X,photoURL:O,phoneNumber:P,tenantId:R,stsTokenManager:A,createdAt:$,lastLoginAt:Q});return ie&&Array.isArray(ie)&&(N.providerData=ie.map(j=>Object.assign({},j))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new za;s.updateFromServerResponse(t);const a=new ri({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Th(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?SE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new za;d.updateFromIdToken(r);const f=new ri({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Map;function os(n){ds(n instanceof Function,"Expected a class definition");let e=P_.get(n);return e?(ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,P_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TE.type="NONE";const R_=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n,e,t){return`firebase:${n}:${e}:${t}`}class $a{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=oh(this.userKey,s.apiKey,a),this.fullPersistenceKey=oh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sh(this.auth,{idToken:e}).catch(()=>{});return t?ri._fromGetAccountInfoResponse(this.auth,t,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $a(os(R_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||os(R_);const u=oh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(u);if(_){let S;if(typeof _=="string"){const w=await Sh(e,{idToken:_}).catch(()=>{});if(!w)break;S=await ri._fromGetAccountInfoResponse(e,w,_)}else S=ri._fromJSON(e,_);m!==a&&(d=S),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new $a(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new $a(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(kE(e))return"Webos";if(bE(e))return"Safari";if((e.includes("chrome/")||CE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IE(n=Pn()){return/firefox\//i.test(n)}function bE(n=Pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CE(n=Pn()){return/crios\//i.test(n)}function AE(n=Pn()){return/iemobile/i.test(n)}function PE(n=Pn()){return/android/i.test(n)}function RE(n=Pn()){return/blackberry/i.test(n)}function kE(n=Pn()){return/webos/i.test(n)}function Lm(n=Pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dP(n=Pn()){var e;return Lm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fP(){return A1()&&document.documentMode===10}function xE(n=Pn()){return Lm(n)||PE(n)||kE(n)||RE(n)||/windows phone/i.test(n)||AE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e=[]){let t;switch(n){case"Browser":t=k_(Pn());break;case"Worker":t=`${k_(Pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Go}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e={}){return ol(n,"GET","/v2/passwordPolicy",Vm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=6;class vP{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:gP,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x_(this),this.idTokenSubscription=new x_(this),this.beforeStateQueue=new pP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sh(this,{idToken:e}),r=await ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Ys(this));const t=e?Et(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mP(this),t=new vP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&QA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function al(n){return Et(n)}class x_{constructor(e){this.auth=e,this.observer=null,this.addObserver=V1(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _P(n){jm=n}function wP(n){return jm.loadJS(n)}function EP(){return jm.gapiScript}function SP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e){const t=Ru(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(us(a,e??{}))return s;Li(s,"already-initialized")}return t.initialize({options:e})}function IP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bP(n,e,t){const r=al(n);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=OE(e),{host:u,port:d}=CP(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(us(m,r.config.emulator)&&us(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,gs(u)?(Jh(`${a}//${u}${f}`),Zh("Auth",!0)):AP()}function OE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CP(n){const e=OE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:N_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:N_(u)}}}function N_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function AP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,t){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(n,e){return nP(n,"POST","/v1/accounts:signInWithIdp",Vm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="http://localhost";class $o extends DE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=xm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new $o(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ba(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){const e={requestUri:PP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends td{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends xu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return is.credential(t,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends xu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends xu{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ws.credential(t,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ri._fromIdTokenResponse(e,r,s),u=O_(r);return new Ga({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=O_(r);return new Ga({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function O_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends li{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ih(e,t,r,s)}}function VE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(n,a,e,r):a})}async function RP(n,e,t=!1){const r=await mu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(Ys(r));const s="reauthenticate";try{const a=await mu(n,VE(r,s,e,n),t);Le(a.idToken,r,"internal-error");const u=Mm(a.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(n.uid===d,r,"user-mismatch"),Ga._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Li(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e,t=!1){if(or(n.app))return Promise.reject(Ys(n));const r="signIn",s=await VE(n,r,e),a=await Ga._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n,e){return Et(n).setPersistence(e)}function ME(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function OP(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function nd(n){return Et(n).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=1e3,VP=10;class jE extends LE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);fP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jE.type="LOCAL";const FE=jE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends LE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UE.type="SESSION";const zE=UE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await MP(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Fm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(S){const w=S;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(w.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function jP(n){xi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function FP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zP(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="firebaseLocalStorageDb",$P=1,Ch="firebaseLocalStorage",HE="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function BP(){const n=indexedDB.deleteDatabase(BE);return new Nu(n).toPromise()}function Wp(){const n=indexedDB.open(BE,$P);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ch,{keyPath:HE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ch)?e(r):(r.close(),await BP(),e(await Wp()))})})}async function D_(n,e,t){const r=id(n,!0).put({[HE]:e,value:t});return new Nu(r).toPromise()}async function HP(n,e){const t=id(n,!1).get(e),r=await new Nu(t).toPromise();return r===void 0?null:r.value}function V_(n,e){const t=id(n,!0).delete(e);return new Nu(t).toPromise()}const WP=800,qP=3;class WE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(zP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await FP(),!this.activeServiceWorker)return;this.sender=new LP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await D_(e,bh,"1"),await V_(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>D_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>HP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>V_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=id(s,!1).getAll();return new Nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WE.type="LOCAL";const KP=WE;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){return e?os(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends DE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GP(n){return xP(n.auth,new zm(n),n.bypassAuthState)}function QP(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),kP(t,new zm(n),n.bypassAuthState)}async function XP(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),RP(t,new zm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return QP;default:Li(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new ku(2e3,1e4);async function JP(n,e,t){if(or(n.app))return Promise.reject(si(n,"operation-not-supported-in-this-environment"));const r=al(n);yE(n,e,td);const s=Um(r,t);return new Lo(r,"signInViaPopup",e,s).executeNotNull()}class Lo extends qE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YP.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="pendingRedirect",ah=new Map;class eR extends qE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const r=await tR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tR(n,e){const t=GE(e),r=KE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function nR(n,e){return KE(n)._set(GE(e),"true")}function rR(n,e){ah.set(n._key(),e)}function KE(n){return os(n._redirectPersistence)}function GE(n){return oh(ZP,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n,e,t){return sR(n,e,t)}async function sR(n,e,t){if(or(n.app))return Promise.reject(Ys(n));const r=al(n);yE(n,e,td),await r._initializationPromise;const s=Um(r,t);return await nR(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function oR(n,e){return await al(n)._initializationPromise,QE(n,e,!1)}async function QE(n,e,t=!1){if(or(n.app))return Promise.reject(Ys(n));const r=al(n),s=Um(r,e),u=await new eR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=600*1e3;class lR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(si(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aR&&this.cachedEventUids.clear(),this.cachedEventUids.has(M_(e))}saveEventToCache(e){this.cachedEventUids.add(M_(e)),this.lastProcessedEventTime=Date.now()}}function M_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n,e={}){return ol(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function fR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cR(n);for(const t of e)try{if(pR(t))return}catch{}Li(n,"unauthorized-domain")}function pR(n){const e=Bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!dR.test(t))return!1;if(hR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new ku(3e4,6e4);function L_(){const n=xi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gR(n){return new Promise((e,t)=>{var r,s,a;function u(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),t(si(n,"network-request-failed"))},timeout:mR.get()})}if(!((s=(r=xi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=xi().gapi)===null||a===void 0)&&a.load)u();else{const d=SP("iframefcb");return xi()[d]=()=>{gapi.load?u():t(si(n,"network-request-failed"))},wP(`${EP()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw lh=null,e})}let lh=null;function vR(n){return lh=lh||gR(n),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new ku(5e3,15e3),_R="__/auth/iframe",wR="emulator/auth/iframe",ER={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TR(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dm(e,wR):`https://${n.config.authDomain}/${_R}`,r={apiKey:e.apiKey,appName:n.name,v:Go},s=SR.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Pu(r).slice(1)}`}async function IR(n){const e=await vR(n),t=xi().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:TR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ER,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=si(n,"network-request-failed"),d=xi().setTimeout(()=>{a(u)},yR.get());function f(){xi().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CR=500,AR=600,PR="_blank",RR="http://localhost";class j_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kR(n,e,t,r=CR,s=AR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},bR),{width:r.toString(),height:s.toString(),top:a,left:u}),m=Pn().toLowerCase();t&&(d=CE(m)?PR:t),IE(m)&&(e=e||RR,f.scrollbars="yes");const _=Object.entries(f).reduce((w,[P,O])=>`${w}${P}=${O},`,"");if(dP(m)&&d!=="_self")return xR(e||"",d),new j_(null);const S=window.open(e||"",d,_);Le(S,n,"popup-blocked");try{S.focus()}catch{}return new j_(S)}function xR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="__/auth/handler",OR="emulator/auth/handler",DR=encodeURIComponent("fac");async function F_(n,e,t,r,s,a){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Go,eventId:s};if(e instanceof td){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",D1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))u[_]=S}if(e instanceof xu){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${DR}=${encodeURIComponent(f)}`:"";return`${VR(n)}?${Pu(d).slice(1)}${m}`}function VR({config:n}){return n.emulator?Dm(n,OR):`https://${n.authDomain}/${NR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class MR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zE,this._completeRedirectFn=QE,this._overrideRedirectResult=rR}async _openPopup(e,t,r,s){var a;ds((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await F_(e,t,r,Bp(),s);return kR(e,u,Fm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await F_(e,t,r,Bp(),s);return jP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ds(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await IR(e),r=new lR(e);return t.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[pp];u!==void 0&&t(!!u),Li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xE()||bE()||Lm()}}const LR=MR;var U_="@firebase/auth",z_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UR(n){eo(new cs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NE(n)},m=new yP(r,s,a,f);return IP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),eo(new cs("auth-internal",e=>{const t=al(e.getProvider("auth").getImmediate());return(r=>new jR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(U_,z_,FR(n)),zr(U_,z_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=300,$R=uE("authIdTokenMaxAge")||zR;let $_=null;const BR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$R)return;const s=t==null?void 0:t.token;$_!==s&&($_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HR(n=ed()){const e=Ru(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TP(n,{popupRedirectResolver:LR,persistence:[KP,FE,zE]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=BR(a.toString());OP(t,u,()=>u(t.currentUser)),ME(t,d=>u(d))}}const s=aE("auth");return s&&bP(t,`http://${s}`),t}function WR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_P({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=si("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",WR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UR("Browser");var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,YE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function N(){}N.prototype=A.prototype,k.D=A.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function(j,M,L){for(var x=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)x[Fe-2]=arguments[Fe];return A.prototype[M].apply(j,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,A,N){N||(N=0);var j=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)j[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;16>M;++M)j[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=k.g[0],N=k.g[1],M=k.g[2];var L=k.g[3],x=A+(L^N&(M^L))+j[0]+3614090360&4294967295;A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[1]+3905402710&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[2]+606105819&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[4]+4118548399&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[5]+1200080426&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[6]+2821735955&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[8]+1770035416&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[9]+2336552879&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[10]+4294925233&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(L^N&(M^L))+j[12]+1804603682&4294967295,A=N+(x<<7&4294967295|x>>>25),x=L+(M^A&(N^M))+j[13]+4254626195&4294967295,L=A+(x<<12&4294967295|x>>>20),x=M+(N^L&(A^N))+j[14]+2792965006&4294967295,M=L+(x<<17&4294967295|x>>>15),x=N+(A^M&(L^A))+j[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(M^L&(N^M))+j[1]+4129170786&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[6]+3225465664&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[11]+643717713&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[5]+3593408605&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[10]+38016083&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[15]+3634488961&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[9]+568446438&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[14]+3275163606&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[3]+4107603335&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^L&(N^M))+j[13]+2850285829&4294967295,A=N+(x<<5&4294967295|x>>>27),x=L+(N^M&(A^N))+j[2]+4243563512&4294967295,L=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(L^A))+j[7]+1735328473&4294967295,M=L+(x<<14&4294967295|x>>>18),x=N+(L^A&(M^L))+j[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(N^M^L)+j[5]+4294588738&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[8]+2272392833&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[11]+1839030562&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[1]+2763975236&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[4]+1272893353&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[7]+4139469664&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[13]+681279174&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[0]+3936430074&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[3]+3572445317&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^L)+j[9]+3654602809&4294967295,A=N+(x<<4&4294967295|x>>>28),x=L+(A^N^M)+j[12]+3873151461&4294967295,L=A+(x<<11&4294967295|x>>>21),x=M+(L^A^N)+j[15]+530742520&4294967295,M=L+(x<<16&4294967295|x>>>16),x=N+(M^L^A)+j[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(M^(N|~L))+j[0]+4096336452&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[7]+1126891415&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[14]+2878612391&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[12]+1700485571&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[3]+2399980690&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[10]+4293915773&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[8]+1873313359&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[15]+4264355552&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[6]+2734768916&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~L))+j[4]+4149444226&4294967295,A=N+(x<<6&4294967295|x>>>26),x=L+(N^(A|~M))+j[11]+3174756917&4294967295,L=A+(x<<10&4294967295|x>>>22),x=M+(A^(L|~N))+j[2]+718787259&4294967295,M=L+(x<<15&4294967295|x>>>17),x=N+(L^(M|~A))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var N=A-this.blockSize,j=this.B,M=this.h,L=0;L<A;){if(M==0)for(;L<=N;)s(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<A;)if(j[M++]=k.charCodeAt(L++),M==this.blockSize){s(this,j),M=0;break}}else for(;L<A;)if(j[M++]=k[L++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=A},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var N=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=N&255,N/=256;for(this.u(k),k=Array(16),A=N=0;4>A;++A)for(var j=0;32>j;j+=8)k[N++]=this.g[A]>>>j&255;return k};function a(k,A){var N=d;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=A(k)}function u(k,A){this.h=A;for(var N=[],j=!0,M=k.length-1;0<=M;M--){var L=k[M]|0;j&&L==A||(N[M]=L,j=!1)}this.g=N}var d={};function f(k){return-128<=k&&128>k?a(k,function(A){return new u([A|0],0>A?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return C(m(-k));for(var A=[],N=1,j=0;k>=N;j++)A[j]=k/N|0,N*=4294967296;return new u(A,0)}function _(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return C(_(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(A,8)),j=S,M=0;M<k.length;M+=8){var L=Math.min(8,k.length-M),x=parseInt(k.substring(M,M+L),A);8>L?(L=m(Math.pow(A,L)),j=j.j(L).add(m(x))):(j=j.j(N),j=j.add(m(x)))}return j}var S=f(0),w=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(R(this))return-C(this).m();for(var k=0,A=1,N=0;N<this.g.length;N++){var j=this.i(N);k+=(0<=j?j:4294967296+j)*A,A*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(R(this))return"-"+C(this).toString(k);for(var A=m(Math.pow(k,6)),N=this,j="";;){var M=Z(N,A).g;N=$(N,M.j(A));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=M,O(N))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function R(k){return k.h==-1}n.l=function(k){return k=$(this,k),R(k)?-1:O(k)?0:1};function C(k){for(var A=k.g.length,N=[],j=0;j<A;j++)N[j]=~k.g[j];return new u(N,~k.h).add(w)}n.abs=function(){return R(this)?C(this):this},n.add=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0,M=0;M<=A;M++){var L=j+(this.i(M)&65535)+(k.i(M)&65535),x=(L>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);j=x>>>16,L&=65535,x&=65535,N[M]=x<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function $(k,A){return k.add(C(A))}n.j=function(k){if(O(this)||O(k))return S;if(R(this))return R(k)?C(this).j(C(k)):C(C(this).j(k));if(R(k))return C(this.j(C(k)));if(0>this.l(P)&&0>k.l(P))return m(this.m()*k.m());for(var A=this.g.length+k.g.length,N=[],j=0;j<2*A;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<k.g.length;M++){var L=this.i(j)>>>16,x=this.i(j)&65535,Fe=k.i(M)>>>16,Oe=k.i(M)&65535;N[2*j+2*M]+=x*Oe,Q(N,2*j+2*M),N[2*j+2*M+1]+=L*Oe,Q(N,2*j+2*M+1),N[2*j+2*M+1]+=x*Fe,Q(N,2*j+2*M+1),N[2*j+2*M+2]+=L*Fe,Q(N,2*j+2*M+2)}for(j=0;j<A;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=A;j<2*A;j++)N[j]=0;return new u(N,0)};function Q(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function G(k,A){this.g=k,this.h=A}function Z(k,A){if(O(A))throw Error("division by zero");if(O(k))return new G(S,S);if(R(k))return A=Z(C(k),A),new G(C(A.g),C(A.h));if(R(A))return A=Z(k,C(A)),new G(C(A.g),A.h);if(30<k.g.length){if(R(k)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var N=w,j=A;0>=j.l(k);)N=X(N),j=X(j);var M=ie(N,1),L=ie(j,1);for(j=ie(j,2),N=ie(N,2);!O(j);){var x=L.add(j);0>=x.l(k)&&(M=M.add(N),L=x),j=ie(j,1),N=ie(N,1)}return A=$(k,M.j(A)),new G(M,A)}for(M=S;0<=k.l(A);){for(N=Math.max(1,Math.floor(k.m()/A.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=m(N),x=L.j(A);R(x)||0<x.l(k);)N-=j,L=m(N),x=L.j(A);O(L)&&(L=w),M=M.add(L),k=$(k,x)}return new G(M,k)}n.A=function(k){return Z(this,k).h},n.and=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)&k.i(j);return new u(N,this.h&k.h)},n.or=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)|k.i(j);return new u(N,this.h|k.h)},n.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)^k.i(j);return new u(N,this.h^k.h)};function X(k){for(var A=k.g.length+1,N=[],j=0;j<A;j++)N[j]=k.i(j)<<1|k.i(j-1)>>>31;return new u(N,k.h)}function ie(k,A){var N=A>>5;A%=32;for(var j=k.g.length-N,M=[],L=0;L<j;L++)M[L]=0<A?k.i(L+N)>>>A|k.i(L+N+1)<<32-A:k.i(L+N);return new u(M,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Js=u}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JE,Zl,ZE,uh,qp,eS,tS,nS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,E){return c==Array.prototype||c==Object.prototype||(c[v]=E.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var v=0;v<c.length;++v){var E=c[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(c,v){if(v)e:{var E=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var H=c[b];if(!(H in E))break e;E=E[H]}c=c[c.length-1],b=E[c],v=v(b),v!=b&&v!=null&&e(E,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var E=0,b=!1,H={next:function(){if(!b&&E<c.length){var J=E++;return{value:v(J,c[J]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(c){return c||function(){return a(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function m(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,E){return c.call.apply(c.bind,arguments)}function S(c,v,E){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),c.apply(v,H)}}return function(){return c.apply(v,arguments)}}function w(c,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,w.apply(null,arguments)}function P(c,v){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function O(c,v){function E(){}E.prototype=v.prototype,c.aa=v.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(b,H,J){for(var fe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)fe[ut-2]=arguments[ut];return v.prototype[H].apply(b,fe)}}function R(c){const v=c.length;if(0<v){const E=Array(v);for(let b=0;b<v;b++)E[b]=c[b];return E}return[]}function C(c,v){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(f(b)){const H=c.length||0,J=b.length||0;c.length=H+J;for(let fe=0;fe<J;fe++)c[H+fe]=b[fe]}else c.push(b)}}class ${constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var X=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ie(c,v,E){for(const b in c)v.call(E,c[b],b,c)}function k(c,v){for(const E in c)v.call(void 0,c[E],E,c)}function A(c){const v={};for(const E in c)v[E]=c[E];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,v){let E,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(E in b)c[E]=b[E];for(let J=0;J<N.length;J++)E=N[J],Object.prototype.hasOwnProperty.call(b,E)&&(c[E]=b[E])}}function M(c){var v=1;c=c.split(":");const E=[];for(;0<v&&c.length;)E.push(c.shift()),v--;return c.length&&E.push(c.join(":")),E}function L(c){d.setTimeout(()=>{throw c},0)}function x(){var c=ve;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,E){const b=Oe.get();b.set(v,E),this.h?this.h.next=b:this.g=b,this.h=b}}var Oe=new $(()=>new $e,c=>c.reset());class $e{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let De,ae=!1,ve=new Fe,de=()=>{const c=d.Promise.resolve(void 0);De=()=>{c.then(B)}};var B=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(E){L(E)}var v=Oe;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ae=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var be=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return c})();function Se(c,v){if(ue.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(X){e:{try{Z(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else E=="mouseover"?v=c.fromElement:E=="mouseout"&&(v=c.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Se.aa.h.call(this)}}O(Se,ue);var ce={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Ge(c,v,E,b,H){this.listener=c,this.proxy=null,this.src=v,this.type=E,this.capture=!!b,this.ha=H,this.key=++Ve,this.da=this.fa=!1}function ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,v,E,b,H){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var fe=ct(c,v,b,H);return-1<fe?(v=c[fe],E||(v.fa=!1)):(v=new Ge(v,this.src,J,!!b,H),v.fa=E,c.push(v)),v};function st(c,v){var E=v.type;if(E in c.g){var b=c.g[E],H=Array.prototype.indexOf.call(b,v,void 0),J;(J=0<=H)&&Array.prototype.splice.call(b,H,1),J&&(ne(v),c.g[E].length==0&&(delete c.g[E],c.h--))}}function ct(c,v,E,b){for(var H=0;H<c.length;++H){var J=c[H];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==b)return H}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),Nt={};function Je(c,v,E,b,H){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Je(c,v[J],E,b,H);return null}return E=Hr(E),c&&c[je]?c.K(v,E,m(b)?!!b.capture:!1,H):nn(c,v,E,!1,b,H)}function nn(c,v,E,b,H,J){if(!v)throw Error("Invalid event type");var fe=m(H)?!!H.capture:!!H,ut=dr(c);if(ut||(c[ht]=ut=new We(c)),E=ut.add(v,E,b,fe,J),E.proxy)return E;if(b=$t(),E.proxy=b,b.src=c,b.listener=E,c.addEventListener)be||(H=fe),H===void 0&&(H=!1),c.addEventListener(v.toString(),b,H);else if(c.attachEvent)c.attachEvent(Be(v.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function $t(){function c(E){return v.call(c.src,c.listener,E)}const v=At;return c}function Fn(c,v,E,b,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)Fn(c,v[J],E,b,H);else b=m(b)?!!b.capture:!!b,E=Hr(E),c&&c[je]?(c=c.i,v=String(v).toString(),v in c.g&&(J=c.g[v],E=ct(J,E,b,H),-1<E&&(ne(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete c.g[v],c.h--)))):c&&(c=dr(c))&&(v=c.g[v.toString()],c=-1,v&&(c=ct(v,E,b,H)),(E=-1<c?v[c]:null)&&Ct(E))}function Ct(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[je])st(v.i,c);else{var E=c.type,b=c.proxy;v.removeEventListener?v.removeEventListener(E,b,c.capture):v.detachEvent?v.detachEvent(Be(E),b):v.addListener&&v.removeListener&&v.removeListener(b),(E=dr(v))?(st(E,c),E.h==0&&(E.src=null,v[ht]=null)):ne(c)}}}function Be(c){return c in Nt?Nt[c]:Nt[c]="on"+c}function At(c,v){if(c.da)c=!0;else{v=new Se(v,this);var E=c.listener,b=c.ha||c.src;c.fa&&Ct(c),c=E.call(b,v)}return c}function dr(c){return c=c[ht],c instanceof We?c:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(c){return typeof c=="function"?c:(c[cn]||(c[cn]=function(v){return c.handleEvent(v)}),c[cn])}function Ot(){U.call(this),this.i=new We(this),this.M=this,this.F=null}O(Ot,U),Ot.prototype[je]=!0,Ot.prototype.removeEventListener=function(c,v,E,b){Fn(this,c,v,E,b)};function yt(c,v){var E,b=c.F;if(b)for(E=[];b;b=b.F)E.push(b);if(c=c.M,b=v.type||v,typeof v=="string")v=new ue(v,c);else if(v instanceof ue)v.target=v.target||c;else{var H=v;v=new ue(b,c),j(v,H)}if(H=!0,E)for(var J=E.length-1;0<=J;J--){var fe=v.g=E[J];H=Un(fe,b,!0,v)&&H}if(fe=v.g=c,H=Un(fe,b,!0,v)&&H,H=Un(fe,b,!1,v)&&H,E)for(J=0;J<E.length;J++)fe=v.g=E[J],H=Un(fe,b,!1,v)&&H}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var E=c.g[v],b=0;b<E.length;b++)ne(E[b]);delete c.g[v],c.h--}}this.F=null},Ot.prototype.K=function(c,v,E,b){return this.i.add(String(c),v,!1,E,b)},Ot.prototype.L=function(c,v,E,b){return this.i.add(String(c),v,!0,E,b)};function Un(c,v,E,b){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,J=0;J<v.length;++J){var fe=v[J];if(fe&&!fe.da&&fe.capture==E){var ut=fe.listener,Jt=fe.ha||fe.src;fe.fa&&st(c.i,fe),H=ut.call(Jt,b)!==!1&&H}}return H&&!b.defaultPrevented}function br(c,v,E){if(typeof c=="function")E&&(c=w(c,E));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(c,v||0)}function fr(c){c.g=br(()=>{c.g=null,c.i&&(c.i=!1,fr(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class zn extends U{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(c){U.call(this),this.h=c,this.g={}}O(Wr,U);var $n=[];function qr(c){ie(c.g,function(v,E){this.g.hasOwnProperty(E)&&Ct(v)},c),c.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),qr(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=d.JSON.stringify,ho=d.JSON.parse,ui=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function pr(){}pr.prototype.h=null;function Ui(c){return c.h||(c.h=c.i())}function Cr(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bn(){ue.call(this,"d")}O(Bn,ue);function zi(){ue.call(this,"c")}O(zi,ue);var Hn={},ys=null;function ci(){return ys=ys||new Ot}Hn.La="serverreachability";function rn(c){ue.call(this,Hn.La,c)}O(rn,ue);function St(c){const v=ci();yt(v,new rn(v))}Hn.STAT_EVENT="statevent";function He(c,v){ue.call(this,Hn.STAT_EVENT,c),this.stat=v}O(He,ue);function mt(c){const v=ci();yt(v,new He(v,c))}Hn.Ma="timingevent";function Dt(c,v){ue.call(this,Hn.Ma,c),this.size=v}O(Dt,ue);function Wn(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},v)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function hi(c,v,E,b,H,J){c.info(function(){if(c.g)if(J)for(var fe="",ut=J.split("&"),Jt=0;Jt<ut.length;Jt++){var Ze=ut[Jt].split("=");if(1<Ze.length){var sn=Ze[0];Ze=Ze[1];var Ht=sn.split("_");fe=2<=Ht.length&&Ht[1]=="type"?fe+(sn+"="+Ze+"&"):fe+(sn+"=redacted&")}}else fe=null;else fe=J;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+v+`
`+E+`
`+fe})}function Ar(c,v,E,b,H,J,fe){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+v+`
`+E+`
`+J+" "+fe})}function Kn(c,v,E,b){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+vl(c,E)+(b?" "+b:"")})}function fo(c,v){c.info(function(){return"TIMEOUT: "+v})}qn.prototype.info=function(){};function vl(c,v){if(!c.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var b=E[c];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var J=H[0];if(J!="noop"&&J!="stop"&&J!="close")for(var fe=1;fe<H.length;fe++)H[fe]=""}}}}return Fi(E)}catch{return v}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function di(){}O(di,pr),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},Gn=new di;function Rn(c,v,E,b){this.j=c,this.i=v,this.l=E,this.R=b||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new po}function po(){this.i=null,this.g="",this.h=!1}var Qn={},_s={};function ws(c,v,E){c.L=1,c.v=yi(Nn(v)),c.m=E,c.P=!0,mo(c,null)}function mo(c,v){c.F=Date.now(),ft(c),c.A=Nn(c.v);var E=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Is(E.i,"t",b),c.C=0,E=c.j.J,c.h=new po,c.g=Gu(c.j,E?v:null,!c.m),0<c.O&&(c.M=new zn(w(c.Y,c,c.g),c.O)),v=c.U,E=c.g,b=c.ca;var H="readystatechange";Array.isArray(H)||(H&&($n[0]=H.toString()),H=$n);for(var J=0;J<H.length;J++){var fe=Je(E,H[J],b||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),St(),hi(c.i,c.u,c.A,c.l,c.R,c.m)}Rn.prototype.ca=function(c){c=c.target;const v=this.M;v&&Jn(c)==3?v.j():this.Y(c)},Rn.prototype.Y=function(c){try{if(c==this.g)e:{const Ht=Jn(this.g);var v=this.g.Ba();const Nr=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||El(this.g)))){this.J||Ht!=4||v==7||(v==8||0>=Nr?St(3):St(2)),Bi(this);var E=this.g.Z();this.X=E;t:if(Yt(this)){var b=El(this.g);c="";var H=b.length,J=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),fi(this);var fe="";break t}this.h.i=new d.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,c+=this.h.i.decode(b[v],{stream:!(J&&v==H-1)});b.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=E==200,Ar(this.i,this.u,this.A,this.l,this.R,Ht,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Jt=this.g;if((ut=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ut)){var Ze=ut;break t}}Ze=null}if(E=Ze)Kn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vo(this,E);else{this.o=!1,this.s=3,mt(12),kn(this),fi(this);break e}}if(this.P){E=!0;let vr;for(;!this.J&&this.C<fe.length;)if(vr=dt(this,fe),vr==_s){Ht==4&&(this.s=4,mt(14),E=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==Qn){this.s=4,mt(15),Kn(this.i,this.l,fe,"[Invalid Chunk]"),E=!1;break}else Kn(this.i,this.l,vr,null),vo(this,vr);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||fe.length!=0||this.h.h||(this.s=1,mt(16),E=!1),this.o=this.o&&E,!E)Kn(this.i,this.l,fe,"[Invalid Chunked Response]"),kn(this),fi(this);else if(0<fe.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Tl(sn),sn.M=!0,mt(11))}}else Kn(this.i,this.l,fe,null),vo(this,fe);Ht==4&&kn(this),this.o&&!this.J&&(Ht==4?ha(this.j,this):(this.o=!1,ft(this)))}else oa(this.g),E==400&&0<fe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),kn(this),fi(this)}}}catch{}finally{}};function Yt(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function dt(c,v){var E=c.C,b=v.indexOf(`
`,E);return b==-1?_s:(E=Number(v.substring(E,b)),isNaN(E)?Qn:(b+=1,b+E>v.length?_s:(v=v.slice(b,b+E),c.C=b+E,v)))}Rn.prototype.cancel=function(){this.J=!0,kn(this)};function ft(c){c.S=Date.now()+c.I,go(c,c.I)}function go(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wn(w(c.ba,c),v)}function Bi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Rn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fo(this.i,this.A),this.L!=2&&(St(),mt(17)),kn(this),this.s=2,fi(this)):go(this,this.S-c)};function fi(c){c.j.G==0||c.J||ha(c.j,c)}function kn(c){Bi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,qr(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function vo(c,v){try{var E=c.j;if(E.G!=0&&(E.g==c||hn(E.h,c))){if(!c.K&&hn(E.h,c)&&E.G==3){try{var b=E.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)ca(E),Xr(E);else break e;ua(E),mt(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&E.v==0&&!E.C&&(E.C=Wn(w(E.Za,E),6e3));if(1>=ta(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Qi(E,11)}else if((c.K||E.g==c)&&ca(E),!Q(v))for(H=E.Da.g.parse(v),v=0;v<H.length;v++){let Ze=H[v];if(E.T=Ze[0],Ze=Ze[1],E.G==2)if(Ze[0]=="c"){E.K=Ze[1],E.ia=Ze[2];const sn=Ze[3];sn!=null&&(E.la=sn,E.j.info("VER="+E.la));const Ht=Ze[4];Ht!=null&&(E.Aa=Ht,E.j.info("SVER="+E.Aa));const Nr=Ze[5];Nr!=null&&typeof Nr=="number"&&0<Nr&&(b=1.5*Nr,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const vr=c.g;if(vr){const So=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var J=b.h;J.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Es(J,J.h),J.h=null))}if(b.D){const fa=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(b.ya=fa,lt(b.I,b.D,fa))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var fe=c;if(b.qa=Ku(b,b.J?b.ia:null,b.W),fe.K){na(b.h,fe);var ut=fe,Jt=b.L;Jt&&(ut.I=Jt),ut.B&&(Bi(ut),ft(ut)),b.g=fe}else Eo(b);0<E.i.length&&Ei(E)}else Ze[0]!="stop"&&Ze[0]!="close"||Qi(E,7);else E.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Qi(E,7):dn(E):Ze[0]!="noop"&&E.l&&E.l.ta(Ze),E.v=0)}}St(4)}catch{}}var ea=class{constructor(c,v){this.g=c,this.map=v}};function Hi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ta(c){return c.h?1:c.g?c.g.size:0}function hn(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Es(c,v){c.g?c.g.add(v):c.h=v}function na(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Hi.prototype.cancel=function(){if(this.i=ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ra(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const E of c.g.values())v=v.concat(E.D);return v}return R(c.i)}function Ss(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],E=c.length,b=0;b<E;b++)v.push(c[b]);return v}v=[],E=0;for(b in c)v[E++]=c[b];return v}function Ts(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var E=0;E<c;E++)v.push(E);return v}v=[],E=0;for(const b in c)v[E++]=b;return v}}}function pi(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var E=Ts(c),b=Ss(c),H=b.length,J=0;J<H;J++)v.call(void 0,b[J],E&&E[J],c)}var Wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(c,v){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var b=c[E].indexOf("="),H=null;if(0<=b){var J=c[E].substring(0,b);H=c[E].substring(b+1)}else J=c[E];v(J,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function mr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof mr){this.h=c.h,mi(this,c.j),this.o=c.o,this.g=c.g,gi(this,c.s),this.l=c.l;var v=c.i,E=new kr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),vi(this,E),this.m=c.m}else c&&(v=String(c).match(Wi))?(this.h=!1,mi(this,v[1]||"",!0),this.o=T(v[2]||""),this.g=T(v[3]||"",!0),gi(this,v[4]),this.l=T(v[5]||"",!0),vi(this,v[6]||"",!0),this.m=T(v[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}mr.prototype.toString=function(){var c=[],v=this.j;v&&c.push(q(v,Ie,!0),":");var E=this.g;return(E||v=="file")&&(c.push("//"),(v=this.o)&&c.push(q(v,Ie,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(q(E,E.charAt(0)=="/"?Pr:qe,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",q(E,yo)),c.join("")};function Nn(c){return new mr(c)}function mi(c,v,E){c.j=E?T(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function gi(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function vi(c,v,E){v instanceof kr?(c.i=v,_i(c.i,c.h)):(E||(v=q(v,Rr)),c.i=new kr(v,c.h))}function lt(c,v,E){c.i.set(v,E)}function yi(c){return lt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function T(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function q(c,v,E){return typeof c=="string"?(c=encodeURI(c).replace(v,ee),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ee(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ie=/[#\/\?@]/g,qe=/[#\?:]/g,Pr=/[#\?]/g,Rr=/[#\?@]/g,yo=/#/g;function kr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&yl(c.i,function(v,E){c.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=kr.prototype,n.add=function(c,v){Bt(this),this.i=null,c=xr(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(v),this.h+=1,this};function Xn(c,v){Bt(c),v=xr(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Kr(c,v){return Bt(c),v=xr(c,v),c.g.has(v)}n.forEach=function(c,v){Bt(this),this.g.forEach(function(E,b){E.forEach(function(H){c.call(v,H,b,this)},this)},this)},n.na=function(){Bt(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let b=0;b<v.length;b++){const H=c[b];for(let J=0;J<H.length;J++)E.push(v[b])}return E},n.V=function(c){Bt(this);let v=[];if(typeof c=="string")Kr(this,c)&&(v=v.concat(this.g.get(xr(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)v=v.concat(c[E])}return v},n.set=function(c,v){return Bt(this),this.i=null,c=xr(this,c),Kr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},n.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Is(c,v,E){Xn(c,v),0<E.length&&(c.i=null,c.g.set(xr(c,v),R(E)),c.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var b=v[E];const J=encodeURIComponent(String(b)),fe=this.V(b);for(b=0;b<fe.length;b++){var H=J;fe[b]!==""&&(H+="="+encodeURIComponent(String(fe[b]))),c.push(H)}}return this.i=c.join("&")};function xr(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function _i(c,v){v&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(E,b){var H=b.toLowerCase();b!=H&&(Xn(this,b),Is(this,H,E))},c)),c.j=v}function Nd(c,v){const E=new qn;if(d.Image){const b=new Image;b.onload=P(Yn,E,"TestLoadImage: loaded",!0,v,b),b.onerror=P(Yn,E,"TestLoadImage: error",!1,v,b),b.onabort=P(Yn,E,"TestLoadImage: abort",!1,v,b),b.ontimeout=P(Yn,E,"TestLoadImage: timeout",!1,v,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else v(!1)}function zu(c,v){const E=new qn,b=new AbortController,H=setTimeout(()=>{b.abort(),Yn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:b.signal}).then(J=>{clearTimeout(H),J.ok?Yn(E,"TestPingServer: ok",!0,v):Yn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Yn(E,"TestPingServer: error",!1,v)})}function Yn(c,v,E,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(E)}catch{}}function Od(){this.g=new ui}function $u(c,v,E){const b=E||"";try{pi(c,function(H,J){let fe=H;m(H)&&(fe=Fi(H)),v.push(b+J+"="+encodeURIComponent(fe))})}catch(H){throw v.push(b+"type="+encodeURIComponent("_badmap")),H}}function qi(c){this.l=c.Ub||null,this.j=c.eb||!1}O(qi,pr),qi.prototype.g=function(){return new _o(this.l,this.j)},qi.prototype.i=(function(c){return function(){return c}})({});function _o(c,v){Ot.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(_o,Ot),n=_o.prototype,n.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Qr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Gr(this):Qr(this),this.readyState==3&&Bu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Gr(this))},n.Qa=function(c){this.g&&(this.response=c,Gr(this))},n.ga=function(){this.g&&Gr(this)};function Gr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qr(c)}n.setRequestHeader=function(c,v){this.u.append(c,v)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=v.next();return c.join(`\r
`)};function Qr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ki(c){let v="";return ie(c,function(E,b){v+=b,v+=":",v+=E,v+=`\r
`}),v}function bs(c,v,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=Ki(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):lt(c,v,E))}function Tt(c){Ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Tt,Ot);var Dd=/^https?$/i,_l=["POST","PUT"];n=Tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,v,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?Ui(this.o):Ui(Gn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(J){wo(this,J);return}if(c=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)E.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())E.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),H=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_l,v,void 0))||b||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,fe]of E)this.g.setRequestHeader(J,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){wo(this,J)}};function wo(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,ia(c),gr(c)}function ia(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wl(this):this.bb())},n.bb=function(){wl(this)};function wl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Jn(c)!=4||c.Z()!=2)){if(c.u&&Jn(c)==4)br(c.Ea,0,c);else if(yt(c,"readystatechange"),Jn(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var b;if(b=fe===0){var H=String(c.D).match(Wi)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),b=!Dd.test(H?H.toLowerCase():"")}E=b}if(E)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var J=2<Jn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ia(c)}}finally{gr(c)}}}}function gr(c,v){if(c.g){sa(c);const E=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||yt(c,"ready");try{E.onreadystatechange=b}catch{}}}function sa(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),ho(v)}};function El(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(c){const v={};c=(c.g&&2<=Jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(Q(c[b]))continue;var E=M(c[b]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[H]||[];v[H]=J,J.push(E)}k(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(c,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||v}function Sl(c){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,c),this.cb=wi("retryDelaySeedMs",1e4,c),this.Wa=wi("forwardChannelMaxRetries",2,c),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(c&&c.concurrentRequestLimit),this.Da=new Od,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sl.prototype,n.la=8,n.G=1,n.connect=function(c,v,E,b){mt(0),this.W=c,this.H=v||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=Ku(this,null,this.W),Ei(this)};function dn(c){if(aa(c),c.G==3){var v=c.U++,E=Nn(c.I);if(lt(E,"SID",c.K),lt(E,"RID",v),lt(E,"TYPE","terminate"),Gi(c,E),v=new Rn(c,c.j,v),v.L=2,v.v=yi(Nn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.v,E=!0),E||(v.g=Gu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ft(v)}qu(c)}function Xr(c){c.g&&(Tl(c),c.g.cancel(),c.g=null)}function aa(c){Xr(c),c.u&&(d.clearTimeout(c.u),c.u=null),ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Ei(c){if(!xn(c.h)&&!c.s){c.s=!0;var v=c.Ga;De||de(),ae||(De(),ae=!0),ve.add(v,c),c.B=0}}function Vd(c,v){return ta(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wn(w(c.Ga,c,v),Wu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new Rn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=A(J),j(J,this.S)):J=this.S),this.m!==null||this.O||(H.H=J,J=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Cs(this,H,v),E=Nn(this.I),lt(E,"RID",c),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),Gi(this,E),J&&(this.O?v="headers="+encodeURIComponent(String(Ki(J)))+"&"+v:this.m&&bs(E,this.m,J)),Es(this.h,H),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",v),lt(E,"SID","null"),H.T=!0,ws(H,E,null)):ws(H,E,v),this.G=2}}else this.G==3&&(c?la(this,c):this.i.length==0||xn(this.h)||la(this))};function la(c,v){var E;v?E=v.l:E=c.U++;const b=Nn(c.I);lt(b,"SID",c.K),lt(b,"RID",E),lt(b,"AID",c.T),Gi(c,b),c.m&&c.o&&bs(b,c.m,c.o),E=new Rn(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Cs(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Es(c.h,E),ws(E,b,v)}function Gi(c,v){c.H&&ie(c.H,function(E,b){lt(v,b,E)}),c.l&&pi({},function(E,b){lt(v,b,E)})}function Cs(c,v,E){E=Math.min(c.i.length,E);var b=c.l?w(c.l.Na,c.l,c):null;e:{var H=c.i;let J=-1;for(;;){const fe=["count="+E];J==-1?0<E?(J=H[0].g,fe.push("ofs="+J)):J=0:fe.push("ofs="+J);let ut=!0;for(let Jt=0;Jt<E;Jt++){let Ze=H[Jt].g;const sn=H[Jt].map;if(Ze-=J,0>Ze)J=Math.max(0,H[Jt].g-100),ut=!1;else try{$u(sn,fe,"req"+Ze+"_")}catch{b&&b(sn)}}if(ut){b=fe.join("&");break e}}}return c=c.i.splice(0,E),v.D=c,b}function Eo(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;De||de(),ae||(De(),ae=!0),ve.add(v,c),c.v=0}}function ua(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wn(w(c.Fa,c),Wu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wn(w(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Xr(this),Hu(this))};function Tl(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Hu(c){c.g=new Rn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=Nn(c.qa);lt(v,"RID","rpc"),lt(v,"SID",c.K),lt(v,"AID",c.T),lt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&lt(v,"TO",c.ja),lt(v,"TYPE","xmlhttp"),Gi(c,v),c.m&&c.o&&bs(v,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=yi(Nn(v)),E.m=null,E.P=!0,mo(E,c)}n.Za=function(){this.C!=null&&(this.C=null,Xr(this),ua(this),mt(19))};function ca(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ha(c,v){var E=null;if(c.g==v){ca(c),Tl(c),c.g=null;var b=2}else if(hn(c.h,v))E=v.D,na(c.h,v),b=1;else return;if(c.G!=0){if(v.o)if(b==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var H=c.B;b=ci(),yt(b,new Dt(b,E)),Ei(c)}else Eo(c);else if(H=v.s,H==3||H==0&&0<v.X||!(b==1&&Vd(c,v)||b==2&&ua(c)))switch(E&&0<E.length&&(v=c.h,v.i=v.i.concat(E)),H){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function Wu(c,v){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*v}function Qi(c,v){if(c.j.info("Error code "+v),v==2){var E=w(c.fb,c),b=c.Xa;const H=!b;b=new mr(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||mi(b,"https"),yi(b),H?Nd(b.toString(),E):zu(b.toString(),E)}else mt(2);c.G=0,c.l&&c.l.sa(v),qu(c),aa(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function qu(c){if(c.G=0,c.ka=[],c.l){const v=ra(c.h);(v.length!=0||c.i.length!=0)&&(C(c.ka,v),C(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ku(c,v,E){var b=E instanceof mr?Nn(E):new mr(E);if(b.g!="")v&&(b.g=v+"."+b.g),gi(b,b.s);else{var H=d.location;b=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var J=new mr(null);b&&mi(J,b),v&&(J.g=v),H&&gi(J,H),E&&(J.l=E),b=J}return E=c.D,v=c.ya,E&&v&&lt(b,E,v),lt(b,"VER",c.la),Gi(c,b),b}function Gu(c,v,E){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new Tt(new qi({eb:E})):new Tt(c.pa),v.Ha(c.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Il(){}n=Il.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function da(){}da.prototype.g=function(c,v){return new On(c,v)};function On(c,v){Ot.call(this),this.g=new Sl(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!Q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Si(this)}O(On,Ot),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){dn(this.g)},On.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=Fi(c),c=E);v.i.push(new ea(v.Ya++,c)),v.G==3&&Ei(v)},On.prototype.N=function(){this.g.l=null,delete this.j,dn(this.g),delete this.g,On.aa.N.call(this)};function Qu(c){Bn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const E in v){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}O(Qu,Bn);function Xu(){zi.call(this),this.status=1}O(Xu,zi);function Si(c){this.g=c}O(Si,Il),Si.prototype.ua=function(){yt(this.g,"a")},Si.prototype.ta=function(c){yt(this.g,new Qu(c))},Si.prototype.sa=function(c){yt(this.g,new Xu)},Si.prototype.ra=function(){yt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,nS=function(){return new da},tS=function(){return ci()},eS=Hn,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,uh=$i,Zo.COMPLETE="complete",ZE=Zo,Cr.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Zl=Cr,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,JE=Tt}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const H_="@firebase/firestore",W_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Rm("@firebase/firestore");function Ma(){return Bo.logLevel}function ge(n,...e){if(Bo.logLevel<=Xe.DEBUG){const t=e.map($m);Bo.debug(`Firestore (${ll}): ${n}`,...t)}}function fs(n,...e){if(Bo.logLevel<=Xe.ERROR){const t=e.map($m);Bo.error(`Firestore (${ll}): ${n}`,...t)}}function to(n,...e){if(Bo.logLevel<=Xe.WARN){const t=e.map($m);Bo.warn(`Firestore (${ll}): ${n}`,...t)}}function $m(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,rS(n,r,t)}function rS(n,e,t){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw fs(r),new Error(r)}function at(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||rS(e,s,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class KR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GR{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new as;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new as,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new as)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new iS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class QR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new q_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JR(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function Kp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ke(r,s);{const a=sS(),u=ZR(a.encode(K_(n,t)),a.encode(K_(e,t)));return u!==0?u:Ke(r,s)}}t+=r>65535?2:1}return Ke(n.length,e.length)}function K_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ZR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ke(n[t],e[t]);return Ke(n.length,e.length)}function Qa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__name__";class Ai{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ai.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Ke(e.length,t.length)}static compareSegments(e,t){const r=Ai.isNumericId(e),s=Ai.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class vt extends Ai{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Ai{construct(e,t,r){return new vn(e,t,r)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G_}static keyField(){return new vn([G_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(vt.fromString(e))}static fromName(e){return new Ae(vt.fromString(e).popFirst(5))}static empty(){return new Ae(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tk(n,e,t,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Q_(n){if(!Ae.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(Ae.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function oi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sd(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ou(n,e){if(!aS(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=-62135596800,J_=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*J_);return new pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y_)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Qt("string",pt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new pt(0,0))}static max(){return new Ue(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function nk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new no(s,Ae.empty(),e)}function rk(n){return new no(n.readTime,n.key,gu)}class no{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new no(Ue.min(),Ae.empty(),gu)}static max(){return new no(Ue.max(),Ae.empty(),gu)}}function ik(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ok{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==sk)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,r)=>{t(e)}))}static reject(e){return new re(((t,r)=>{r(e)}))}static waitFor(e){return new re(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next((s=>s?re.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new re(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new re(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function ak(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}od.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=-1;function ad(n){return n==null}function Ah(n){return n===0&&1/n==-1/0}function lk(n){return typeof n=="number"&&Number.isInteger(n)&&!Ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="";function uk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z_(e)),e=ck(n.get(t),e);return Z_(e)}function ck(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case lS:t+="";break;default:t+=a}}return t}function Z_(n){return n+lS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??mn.RED,this.left=s??mn.EMPTY,this.right=a??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new mn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Er([])}unionWith(e){let t=new tn(vn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new cS("Invalid base64 string: "+a):a}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const hk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(n){if(at(!!n,39018),typeof n=="string"){let e=0;const t=hk.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="server_timestamp",dS="__type__",fS="__previous_value__",pS="__local_write_time__";function Wm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[dS])===null||t===void 0?void 0:t.stringValue)===hS}function ld(n){const e=n.mapValue.fields[fS];return Wm(e)?ld(e):e}function vu(n){const e=ro(n.mapValue.fields[pS].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t,r,s,a,u,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Ph="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Ph}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="__type__",fk="__max__",Kc={mapValue:{}},gS="__vector__",Rh="value";function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wm(n)?4:mk(n)?9007199254740991:pk(n)?10:11:Ne(28295,{value:n})}function ji(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=ro(s.timestampValue),d=ro(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return io(s.bytesValue).isEqual(io(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ut(s.geoPointValue.latitude)===Ut(a.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ut(s.integerValue)===Ut(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Ut(s.doubleValue),d=Ut(a.doubleValue);return u===d?Ah(u)===Ah(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(ew(u)!==ew(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ji(u[f],d[f])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function _u(n,e){return(n.values||[]).find((t=>ji(t,e)))!==void 0}function Xa(n,e){if(n===e)return 0;const t=so(n),r=so(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ut(a.integerValue||a.doubleValue),f=Ut(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return nw(n.timestampValue,e.timestampValue);case 4:return nw(vu(n),vu(e));case 5:return Kp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=io(a),f=io(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=Ke(d[m],f[m]);if(_!==0)return _}return Ke(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ke(Ut(a.latitude),Ut(u.latitude));return d!==0?d:Ke(Ut(a.longitude),Ut(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const S=a.fields||{},w=u.fields||{},P=(d=S[Rh])===null||d===void 0?void 0:d.arrayValue,O=(f=w[Rh])===null||f===void 0?void 0:f.arrayValue,R=Ke(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return R!==0?R:rw(P,O)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Kc.mapValue&&u===Kc.mapValue)return 0;if(a===Kc.mapValue)return 1;if(u===Kc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let S=0;S<f.length&&S<_.length;++S){const w=Kp(f[S],_[S]);if(w!==0)return w;const P=Xa(d[f[S]],m[_[S]]);if(P!==0)return P}return Ke(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{le:t})}}function nw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=ro(n),r=ro(e),s=Ke(t.seconds,r.seconds);return s!==0?s:Ke(t.nanos,r.nanos)}function rw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Xa(t[s],r[s]);if(a)return a}return Ke(t.length,r.length)}function Ya(n){return Gp(n)}function Gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ro(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return io(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Gp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Gp(t.fields[u])}`;return s+"}"})(n.mapValue):Ne(61005,{value:n})}function ch(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(n);return e?16+ch(e):16;case 5:return 2*n.stringValue.length;case 6:return io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+ch(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return lo(r.fields,((a,u)=>{s+=a.length+ch(u)})),s})(n.mapValue);default:throw Ne(13486,{value:n})}}function iw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qp(n){return!!n&&"integerValue"in n}function qm(n){return!!n&&"arrayValue"in n}function sw(n){return!!n&&"nullValue"in n}function ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function pk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mS])===null||t===void 0?void 0:t.stringValue)===gS}function au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=au(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.value=e}static empty(){return new ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=vn.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=au(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){lo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new ar(au(this.value))}}function vS(n){const e=[];return lo(n.fields,((t,r)=>{const s=new vn([t]);if(hh(r)){const a=vS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Ue.min(),Ue.min(),Ue.min(),ar.empty(),0)}static newFoundDocument(e,t,r,s){return new An(e,1,t,Ue.min(),r,s,0)}static newNoDocument(e,t){return new An(e,2,t,Ue.min(),Ue.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Ue.min(),Ue.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function aw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ae.comparator(Ae.fromName(u.referenceValue),t.key):r=Xa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function lw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function gk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{}class Gt extends yS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yk(e,t,r):t==="array-contains"?new Ek(e,r):t==="in"?new Sk(e,r):t==="not-in"?new Tk(e,r):t==="array-contains-any"?new Ik(e,r):new Gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _k(e,r):new wk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xa(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends yS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ai(e,t)}matches(e){return _S(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _S(n){return n.op==="and"}function wS(n){return vk(n)&&_S(n)}function vk(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function Xp(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(wS(n))return n.filters.map((e=>Xp(e))).join(",");{const e=n.filters.map((t=>Xp(t))).join(",");return`${n.op}(${e})`}}function ES(n,e){return n instanceof Gt?(function(r,s){return s instanceof Gt&&r.op===s.op&&r.field.isEqual(s.field)&&ji(r.value,s.value)})(n,e):n instanceof ai?(function(r,s){return s instanceof ai&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&ES(u,s.filters[d])),!0):!1})(n,e):void Ne(19439)}function SS(n){return n instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(SS).join(" ,")+"}"})(n):"Filter"}class yk extends Gt{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class _k extends Gt{constructor(e,t){super(e,"in",t),this.keys=TS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wk extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=TS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function TS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class Ek extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&_u(t.arrayValue,this.value)}}class Sk extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class Tk extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_u(this.value.arrayValue,t)}}class Ik extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>_u(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function uw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new bk(n,e,t,r,s,a,u)}function Km(n){const e=ze(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Xp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ya(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ya(r))).join(",")),e.Pe=t}return e.Pe}function Gm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ES(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lw(n.startAt,e.startAt)&&lw(n.endAt,e.endAt)}function Yp(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ck(n,e,t,r,s,a,u,d){return new Du(n,e,t,r,s,a,u,d)}function Qm(n){return new Du(n)}function cw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IS(n){return n.collectionGroup!==null}function lu(n){const e=ze(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new tn(vn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new xh(a,r))})),t.has(vn.keyField().canonicalString())||e.Te.push(new xh(vn.keyField(),r))}return e.Te}function Ni(n){const e=ze(n);return e.Ie||(e.Ie=Ak(e,lu(n))),e.Ie}function Ak(n,e){if(n.limitType==="F")return uw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new xh(s.field,a)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return uw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jp(n,e){const t=n.filters.concat([e]);return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zp(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ud(n,e){return Gm(Ni(n),Ni(e))&&n.limitType===e.limitType}function bS(n){return`${Km(Ni(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>SS(s))).join(", ")}]`),ad(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ya(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ya(s))).join(",")),`Target(${r})`})(Ni(n))}; limitType=${n.limitType})`}function cd(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of lu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=aw(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,lu(r),s)||r.endAt&&!(function(u,d,f){const m=aw(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,lu(r),s))})(n,e)}function Pk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CS(n){return(e,t)=>{let r=!1;for(const s of lu(n)){const a=Rk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Rk(n,e,t){const r=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Xa(f,m):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return uS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new xt(Ae.comparator);function ps(){return kk}const AS=new xt(Ae.comparator);function eu(...n){let e=AS;for(const t of n)e=e.insert(t.key,t);return e}function PS(n){let e=AS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function jo(){return uu()}function RS(){return uu()}function uu(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xk=new xt(Ae.comparator),Nk=new tn(Ae.comparator);function Ye(...n){let e=Nk;for(const t of n)e=e.add(t);return e}const Ok=new tn(Ke);function Dk(){return Ok}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function kS(n){return{integerValue:""+n}}function Vk(n,e){return lk(e)?kS(e):Xm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function Mk(n,e,t){return n instanceof wu?(function(s,a){const u={fields:{[dS]:{stringValue:hS},[pS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Wm(a)&&(a=ld(a)),a&&(u.fields[fS]=a),{mapValue:u}})(t,e):n instanceof Ja?NS(n,e):n instanceof Za?OS(n,e):(function(s,a){const u=xS(s,a),d=hw(u)+hw(s.Ee);return Qp(u)&&Qp(s.Ee)?kS(d):Xm(s.serializer,d)})(n,e)}function Lk(n,e,t){return n instanceof Ja?NS(n,e):n instanceof Za?OS(n,e):t}function xS(n,e){return n instanceof Nh?(function(r){return Qp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class wu extends hd{}class Ja extends hd{constructor(e){super(),this.elements=e}}function NS(n,e){const t=DS(e);for(const r of n.elements)t.some((s=>ji(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Za extends hd{constructor(e){super(),this.elements=e}}function OS(n,e){let t=DS(e);for(const r of n.elements)t=t.filter((s=>!ji(s,r)));return{arrayValue:{values:t}}}class Nh extends hd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function hw(n){return Ut(n.integerValue||n.doubleValue)}function DS(n){return qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.field=e,this.transform=t}}function jk(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ja&&s instanceof Ja||r instanceof Za&&s instanceof Za?Qa(r.elements,s.elements,ji):r instanceof Nh&&s instanceof Nh?ji(r.Ee,s.Ee):r instanceof wu&&s instanceof wu})(n.transform,e.transform)}class Fk{constructor(e,t){this.version=e,this.transformResults=t}}class $r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dd{}function VS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jm(n.key,$r.none()):new Vu(n.key,n.data,$r.none());{const t=n.data,r=ar.empty();let s=new tn(vn.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new uo(n.key,r,new Er(s.toArray()),$r.none())}}function Uk(n,e,t){n instanceof Vu?(function(s,a,u){const d=s.value.clone(),f=fw(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof uo?(function(s,a,u){if(!dh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=fw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(MS(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cu(n,e,t,r){return n instanceof Vu?(function(a,u,d,f){if(!dh(a.precondition,u))return d;const m=a.value.clone(),_=pw(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof uo?(function(a,u,d,f){if(!dh(a.precondition,u))return d;const m=pw(a.fieldTransforms,f,u),_=u.data;return _.setAll(MS(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((S=>S.field)))})(n,e,t,r):(function(a,u,d){return dh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function zk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=xS(r.transform,s||null);a!=null&&(t===null&&(t=ar.empty()),t.set(r.field,a))}return t||null}function dw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qa(r,s,((a,u)=>jk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vu extends dd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class uo extends dd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function fw(n,e,t){const r=new Map;at(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Lk(u,d,t[s]))}return r}function pw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Mk(a,u,e))}return r}class Jm extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $k extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Uk(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RS();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=VS(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,((t,r)=>dw(t,r)))&&Qa(this.baseMutations,e.baseMutations,((t,r)=>dw(t,r)))}}class Zm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){at(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return xk})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Zm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,et;function qk(n){switch(n){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function LS(n){if(n===void 0)return fs("GRPC error has no .code"),te.UNKNOWN;switch(n){case qt.OK:return te.OK;case qt.CANCELLED:return te.CANCELLED;case qt.UNKNOWN:return te.UNKNOWN;case qt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case qt.INTERNAL:return te.INTERNAL;case qt.UNAVAILABLE:return te.UNAVAILABLE;case qt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case qt.NOT_FOUND:return te.NOT_FOUND;case qt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case qt.ABORTED:return te.ABORTED;case qt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case qt.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:n})}}(et=qt||(qt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Js([4294967295,4294967295],0);function mw(n){const e=sS().encode(n),t=new YE;return t.update(e),new Uint8Array(t.digest())}function gw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Js([t,r],0),new Js([s,a],0)]}class eg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Js.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Js.fromNumber(r)));return s.compare(Kk)===1&&(s=new Js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=mw(e),[r,s]=gw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new eg(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=mw(e),[r,s]=gw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fd(Ue.min(),s,new xt(Ke),ps(),Ye())}}class Mu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mu(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class jS{constructor(e,t){this.targetId=e,this.De=t}}class FS{constructor(e,t,r=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class vw{constructor(){this.ve=0,this.Ce=yw(),this.Fe=yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ye(),t=Ye(),r=Ye();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:a})}})),new Mu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=yw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Gk{constructor(e){this.We=e,this.Ge=new Map,this.ze=ps(),this.je=Gc(),this.Je=Gc(),this.He=new xt(Ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Yp(a))if(r===0){const u=new Ae(a.path);this.Xe(t,u,An.newNoDocument(u,Ue.min()))}else at(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=io(r).toUint8Array()}catch(f){if(f instanceof cS)return to("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new eg(u,s,a)}catch(f){return to(f instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&Yp(d.target)){const f=new Ae(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,An.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ye();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new fd(e,t,this.He,this.ze,r);return this.ze=ps(),this.je=Gc(),this.Je=Gc(),this.He=new xt(Ke),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new tn(Ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new tn(Ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Gc(){return new xt(Ae.comparator)}function yw(){return new xt(Ae.comparator)}const Qk={asc:"ASCENDING",desc:"DESCENDING"},Xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function em(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function US(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zk(n,e){return Oh(n,e.toTimestamp())}function Oi(n){return at(!!n,49232),Ue.fromTimestamp((function(t){const r=ro(t);return new pt(r.seconds,r.nanos)})(n))}function tg(n,e){return tm(n,e).canonicalString()}function tm(n,e){const t=(function(s){return new vt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zS(n){const e=vt.fromString(n);return at(qS(e),10190,{key:e.toString()}),e}function nm(n,e){return tg(n.databaseId,e.path)}function mp(n,e){const t=zS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(BS(t))}function $S(n,e){return tg(n.databaseId,e)}function ex(n){const e=zS(n);return e.length===4?vt.emptyPath():BS(e)}function rm(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BS(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _w(n,e,t){return{name:nm(n,e),fields:t.value.mapValue.fields}}function tx(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(at(_===void 0||typeof _=="string",58123),yn.fromBase64String(_||"")):(at(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),yn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?te.UNKNOWN:LS(m.code);return new pe(_,m.message||"")})(u);t=new FS(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mp(n,r.document.name),a=Oi(r.document.updateTime),u=r.document.createTime?Oi(r.document.createTime):Ue.min(),d=new ar({mapValue:{fields:r.document.fields}}),f=An.newFoundDocument(s,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new fh(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mp(n,r.document),a=r.readTime?Oi(r.readTime):Ue.min(),u=An.newNoDocument(s,a),d=r.removedTargetIds||[];t=new fh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mp(n,r.document),a=r.removedTargetIds||[];t=new fh([],a,s,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Wk(s,a),d=r.targetId;t=new jS(d,u)}}return t}function nx(n,e){let t;if(e instanceof Vu)t={update:_w(n,e.key,e.value)};else if(e instanceof Jm)t={delete:nm(n,e.key)};else if(e instanceof uo)t={update:_w(n,e.key,e.data),updateMask:hx(e.fieldMask)};else{if(!(e instanceof $k))return Ne(16599,{Rt:e.type});t={verify:nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof wu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Za)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ne(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Zk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne(27497)})(n,e.precondition)),t}function rx(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Oi(s.updateTime):Oi(a);return u.isEqual(Ue.min())&&(u=Oi(a)),new Fk(u,s.transformResults||[])})(t,e)))):[]}function ix(n,e){return{documents:[$S(n,e.path)]}}function sx(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$S(n,s);const a=(function(m){if(m.length!==0)return WS(ai.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(w){return{field:ja(w.field),direction:lx(w.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=em(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function ox(n){let e=ex(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){at(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(S){const w=HS(S);return w instanceof ai&&wS(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(S){return S.map((w=>(function(O){return new xh(Fa(O.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(S){let w;return w=typeof S=="object"?S.value:S,ad(w)?null:w})(t.limit));let f=null;t.startAt&&(f=(function(S){const w=!!S.before,P=S.values||[];return new kh(P,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(S){const w=!S.before,P=S.values||[];return new kh(P,w)})(t.endAt)),Ck(e,s,u,a,d,"F",f,m)}function ax(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fa(t.unaryFilter.field);return Gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fa(t.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fa(t.unaryFilter.field);return Gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Fa(t.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Gt.create(Fa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((r=>HS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function lx(n){return Qk[n]}function ux(n){return Xk[n]}function cx(n){return Yk[n]}function ja(n){return{fieldPath:n.canonicalString()}}function Fa(n){return vn.fromServerFormat(n.fieldPath)}function WS(n){return n instanceof Gt?(function(t){if(t.op==="=="){if(ow(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ow(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(sw(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:ux(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const r=t.getFilters().map((s=>WS(s)));return r.length===1?r[0]:{compositeFilter:{op:cx(t.op),filters:r}}})(n):Ne(54877,{filter:n})}function hx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,r,s,a=Ue.min(),u=Ue.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.gt=e}}function fx(n){const e=ox({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Dn=new mx}addToCollectionParentIndex(e,t){return this.Dn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(no.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class mx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new tn(vt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KS=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(KS,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new el(0)}static ur(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="LruGarbageCollector",gx=1048576;function Sw([n,e],[t,r]){const s=Ke(n,t);return s===0?Ke(e,r):s}class vx{constructor(e){this.Tr=e,this.buffer=new tn(Sw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Sw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(Ew,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ge(Ew,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Rr(3e5)}))}}class _x{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(od.ue);const r=new vx(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(ww)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ww):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,u=Date.now(),this.nthSequenceNumber(e,s)))).next((S=>(r=S,d=Date.now(),this.removeTargets(e,r,t)))).next((S=>(a=S,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(m=Date.now(),Ma()<=Xe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${S} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:S}))))}}function wx(n,e){return new _x(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&cu(r.mutation,s,Er.empty(),pt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=jo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=eu();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=jo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=ps();const u=uu(),d=(function(){return uu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof uo)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),cu(_.mutation,m,_.mutation.getFieldMask(),pt.now())):u.set(m.key,Er.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var S;return d.set(m,new Sx(_,(S=u.get(m))!==null&&S!==void 0?S:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=uu();let s=new xt(((u,d)=>u-d)),a=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Er.empty();_=d.applyToLocalView(m,_),r.set(f,_);const S=(s.get(d.batchId)||Ye()).add(f);s=s.insert(d.batchId,S)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,S=RS();_.forEach((w=>{if(!a.has(w)){const P=VS(t.get(w),r.get(w));P!==null&&S.set(w,P),a=a.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,S))}return re.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):re.resolve(jo());let d=gu,f=a;return u.next((m=>re.forEach(m,((_,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{f=f.insert(_,w)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ye()))).next((_=>({batchId:d,changes:PS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((r=>{let s=eu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=eu();return this.indexManager.getCollectionParents(e,a).next((d=>re.forEach(d,(f=>{const m=(function(S,w){return new Du(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((S,w)=>{u=u.insert(S,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,An.newInvalidDocument(_)))}));let d=eu();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&cu(_.mutation,m,Er.empty(),pt.now()),cd(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return re.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Oi(s.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:fx(s.bundledQuery),readTime:Oi(s.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.overlays=new xt(Ae.comparator),this.kr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=jo();return re.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=jo(),a=t.length+1,u=new Ae(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new xt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=jo(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=jo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return re.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Hk(t,r));let a=this.kr.get(t);a===void 0&&(a=Ye(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.qr=new tn(un.Qr),this.$r=new tn(un.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new un(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new un(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ae(new vt([])),r=new un(t,e),s=new un(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ae(new vt([])),r=new un(t,e),s=new un(t,e+1);let a=Ye();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new un(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ae.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new tn(un.Qr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Bk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new un(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Hm:this.er-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),s=new un(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(Ke);return t.forEach((s=>{const a=new un(s,0),u=new un(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),re.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ae.isDocumentKey(a)||(a=a.child(""));const u=new un(new Ae(a),0);let d=new tn(Ke);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),re.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){at(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return re.forEach(t.mutations,(s=>{const a=new un(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new un(t,0),s=this.Yr.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.ni=e,this.docs=(function(){return new xt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():An.newInvalidDocument(s))})),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=ps();const u=t.path,d=new Ae(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||ik(rk(_),r)<=0||(s.has(_.key)||cd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ne(9500)}ri(e,t){return re.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Rx(this)}getSize(e){return re.resolve(this.size)}}class Rx extends Ex{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),re.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.persistence=e,this.ii=new Qo((t=>Km(t)),Gm),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.si=0,this.oi=new ng,this.targetCount=0,this._i=el.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),re.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new el(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.hr(t),re.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),re.waitFor(a).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.ai={},this.overlays={},this.ui=new od(0),this.ci=!1,this.ci=!0,this.li=new Cx,this.referenceDelegate=e(this),this.hi=new kx(this),this.indexManager=new px,this.remoteDocumentCache=(function(s){return new Px(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new dx(t),this.Ti=new Ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Ax(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new xx(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return re.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class xx extends ok{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ai=new ng,this.Ri=null}static Vi(e){return new rg(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.mi,(r=>{const s=Ae.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,Ue.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return re.or([()=>re.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dh{constructor(e,t){this.persistence=e,this.gi=new Qo((r=>uk(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=wx(this,t)}static Vi(e,t){return new Dh(e,t)}Ii(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return re.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?re.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Ue.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ch(e.data.value)),t}Sr(e,t,r){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ye(),s=Ye();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new ig(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return P1()?8:ak(Pn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Nx;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ma()<=Xe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Ma()<=Xe.DEBUG&&ge("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ma()<=Xe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):re.resolve())}ps(e,t){if(cw(t))return re.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Zp(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ye(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Zp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return cw(t)||s.isEqual(Ue.min())?re.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?re.resolve(null):(Ma()<=Xe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),La(t)),this.vs(e,u,t,nk(s,gu)).next((d=>d)))}))}bs(e,t){let r=new tn(CS(e));return t.forEach(((s,a)=>{cd(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ma()<=Xe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",La(t)),this.gs.getDocumentsMatchingQuery(e,t,no.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LocalStore",Dx=3e8;class Vx{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new xt(Ke),this.Ms=new Qo((a=>Km(a)),Gm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Mx(n,e,t,r){return new Vx(n,e,t,r)}async function QS(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ye();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Lx(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const S=m.batch,w=S.keys();let P=re.resolve();return w.forEach((O=>{P=P.next((()=>_.getEntry(f,O))).next((R=>{const C=m.docVersions.get(O);at(C!==null,48541),R.version.compareTo(C)<0&&(S.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),_.addEntry(R)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,S)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ye();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function XS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function jx(n,e){const t=ze(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,S)=>{const w=s.get(S);if(!w)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,S).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,S))));let P=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(yn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),s=s.insert(S,P),(function(R,C,$){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Dx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(w,P,_)&&d.push(t.hi.updateTargetData(a,P))}));let f=ps(),m=Ye();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Fx(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!r.isEqual(Ue.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((S=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return re.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function Fx(n,e,t){let r=Ye(),s=Ye();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=ps();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ue.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ge(sg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Ux(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Hm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zx(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,re.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new Gs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function im(n,e,t){const r=ze(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!cl(u))throw u;ge(sg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Tw(n,e,t){const r=ze(n);let s=Ue.min(),a=Ye();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const S=ze(f),w=S.Ms.get(_);return w!==void 0?re.resolve(S.Fs.get(w)):S.hi.getTargetData(m,_)})(r,u,Ni(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:Ue.min(),t?a:Ye()))).next((d=>($x(r,Pk(e),d),{documents:d,qs:a})))))}function $x(n,e,t){let r=n.xs.get(e)||Ue.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class Iw{constructor(){this.activeTargetIds=Dk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bx{constructor(){this.Fo=new Iw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Iw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="ConnectivityMonitor";class Cw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(bw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(bw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function sm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="RestConnection",Wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=sm(),d=this.Go(e,t.toUriEncodedString());ge(gp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),_=gs(m);return this.jo(e,d,f,r,_).then((S=>(ge(gp,`Received RPC '${e}' ${u}: `,S),S)),(S=>{throw to(gp,`RPC '${e}' ${u} failed with error: `,S,"url: ",d,"request:",r),S}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Wx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class Gx extends qx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=sm();return new Promise(((d,f)=>{const m=new JE;m.setWithCredentials(!0),m.listenOnce(ZE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case uh.NO_ERROR:const S=m.getResponseJson();ge(In,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case uh.TIMEOUT:ge(In,`RPC '${e}' ${u} timed out`),f(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const w=m.getStatus();if(ge(In,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const O=P==null?void 0:P.error;if(O&&O.status&&O.message){const R=(function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Q)>=0?Q:te.UNKNOWN})(O.status);f(new pe(R,O.message))}else f(new pe(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ge(In,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ge(In,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const s=sm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nS(),d=tS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ge(In,`Creating RPC '${e}' stream ${s}: ${_}`,f);const S=u.createWebChannel(_,f);this.T_(S);let w=!1,P=!1;const O=new Kx({Ho:C=>{P?ge(In,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(w||(ge(In,`Opening RPC '${e}' stream ${s} transport.`),S.open(),w=!0),ge(In,`RPC '${e}' stream ${s} sending:`,C),S.send(C))},Yo:()=>S.close()}),R=(C,$,Q)=>{C.listen($,(G=>{try{Q(G)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return R(S,Zl.EventType.OPEN,(()=>{P||(ge(In,`RPC '${e}' stream ${s} transport opened.`),O.s_())})),R(S,Zl.EventType.CLOSE,(()=>{P||(P=!0,ge(In,`RPC '${e}' stream ${s} transport closed`),O.__(),this.I_(S))})),R(S,Zl.EventType.ERROR,(C=>{P||(P=!0,to(In,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),O.__(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),R(S,Zl.EventType.MESSAGE,(C=>{var $;if(!P){const Q=C.data[0];at(!!Q,16349);const G=Q,Z=(G==null?void 0:G.error)||(($=G[0])===null||$===void 0?void 0:$.error);if(Z){ge(In,`RPC '${e}' stream ${s} received error:`,Z);const X=Z.status;let ie=(function(N){const j=qt[N];if(j!==void 0)return LS(j)})(X),k=Z.message;ie===void 0&&(ie=te.INTERNAL,k="Unknown error status: "+X+" with message "+Z.message),P=!0,O.__(new pe(ie,k)),S.close()}else ge(In,`RPC '${e}' stream ${s} received:`,Q),O.a_(Q)}})),R(d,eS.STAT_EVENT,(C=>{C.stat===qp.PROXY?ge(In,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===qp.NOPROXY&&ge(In,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(n){return new Jk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="PersistentStream";class JS{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new YS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ge(Aw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ge(Aw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qx extends JS{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=tx(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ue.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?Oi(u.readTime):Ue.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=rm(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Yp(f)?{documents:ix(a,f)}:{query:sx(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=US(a,u.resumeToken);const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ue.min())>0){d.readTime=Oh(a,u.snapshotVersion.toTimestamp());const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=ax(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=rm(this.serializer),t.removeTarget=e,this.k_(t)}}class Xx extends JS{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=rx(e.writeResults,e.commitTime),r=Oi(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=rm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>nx(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{}class Jx extends Yx{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,tm(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(te.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,tm(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(te.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Zx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(fs(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class eN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Xo(this)&&(ge(Ho,"Restarting streams for network reachability change."),await(async function(f){const m=ze(f);m.Ia.add(4),await Lu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await md(m)})(this))}))})),this.Aa=new Zx(r,s)}}async function md(n){if(Xo(n))for(const e of n.da)await e(!0)}async function Lu(n){for(const e of n.da)await e(!1)}function ZS(n,e){const t=ze(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ug(t)?lg(t):hl(t).x_()&&ag(t,e))}function og(n,e){const t=ze(n),r=hl(t);t.Ta.delete(e),r.x_()&&eT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Xo(t)&&t.Aa.set("Unknown"))}function ag(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).H_(e)}function eT(n,e){n.Ra.$e(e),hl(n).Y_(e)}function lg(n){n.Ra=new Gk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Aa.aa()}function ug(n){return Xo(n)&&!hl(n).M_()&&n.Ta.size>0}function Xo(n){return ze(n).Ia.size===0}function tT(n){n.Ra=void 0}async function tN(n){n.Aa.set("Online")}async function nN(n){n.Ta.forEach(((e,t)=>{ag(n,e)}))}async function rN(n,e){tT(n),ug(n)?(n.Aa.la(e),lg(n)):n.Aa.set("Unknown")}async function iN(n,e,t){if(n.Aa.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){ge(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(n,r)}else if(e instanceof fh?n.Ra.Ye(e):e instanceof jS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ue.min()))try{const r=await XS(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(yn.EMPTY_BYTE_STRING,_.snapshotVersion)),eT(a,f);const S=new Gs(_.target,f,m,_.sequenceNumber);ag(a,S)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ge(Ho,"Failed to raise snapshot:",r),await Vh(n,r)}}async function Vh(n,e,t){if(!cl(e))throw e;n.Ia.add(1),await Lu(n),n.Aa.set("Offline"),t||(t=()=>XS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Ho,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await md(n)}))}function nT(n,e){return e().catch((t=>Vh(n,t,e)))}async function gd(n){const e=ze(n),t=oo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hm;for(;sN(e);)try{const s=await Ux(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,oN(e,s)}catch(s){await Vh(e,s)}rT(e)&&iT(e)}function sN(n){return Xo(n)&&n.Pa.length<10}function oN(n,e){n.Pa.push(e);const t=oo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function rT(n){return Xo(n)&&!oo(n).M_()&&n.Pa.length>0}function iT(n){oo(n).start()}async function aN(n){oo(n).na()}async function lN(n){const e=oo(n);for(const t of n.Pa)e.X_(t.mutations)}async function uN(n,e,t){const r=n.Pa.shift(),s=Zm.from(r,e,t);await nT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await gd(n)}async function cN(n,e){e&&oo(n).Z_&&await(async function(r,s){if((function(u){return qk(u)&&u!==te.ABORTED})(s.code)){const a=r.Pa.shift();oo(r).N_(),await nT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await gd(r)}})(n,e),rT(n)&&iT(n)}async function Pw(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ge(Ho,"RemoteStore received new credentials");const r=Xo(t);t.Ia.add(3),await Lu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await md(t)}async function hN(n,e){const t=ze(n);e?(t.Ia.delete(2),await md(t)):e||(t.Ia.add(2),await Lu(t),t.Aa.set("Unknown"))}function hl(n){return n.Va||(n.Va=(function(t,r,s){const a=ze(t);return a.ia(),new Qx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:tN.bind(null,n),e_:nN.bind(null,n),n_:rN.bind(null,n),J_:iN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),ug(n)?lg(n):n.Aa.set("Unknown")):(await n.Va.stop(),tT(n))}))),n.Va}function oo(n){return n.ma||(n.ma=(function(t,r,s){const a=ze(t);return a.ia(),new Xx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:aN.bind(null,n),n_:cN.bind(null,n),ea:lN.bind(null,n),ta:uN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await gd(n)):(await n.ma.stop(),n.Pa.length>0&&(ge(Ho,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new cg(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(n,e){if(fs("AsyncQueue",`${e}: ${n}`),cl(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=eu(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ha)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ha;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.fa=new xt(Ae.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class tl{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new tl(e,t,Ha.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class fN{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=ze(t),a=s.queries;s.queries=kw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function kw(){return new Qo((n=>bS(n)),ud)}async function sT(n,e){const t=ze(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new dN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=hg(u,`Initialization of query '${La(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&dg(t)}async function oT(n,e){const t=ze(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pN(n,e){const t=ze(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&dg(t)}function mN(n,e,t){const r=ze(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function dg(n){n.Da.forEach((e=>{e.next()}))}var om,xw;(xw=om||(om={})).Fa="default",xw.Cache="cache";class aT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.key=e}}class uT{constructor(e){this.key=e}}class gN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ye(),this.mutatedKeys=Ye(),this.Xa=CS(e),this.eu=new Ha(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Rw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,S)=>{const w=s.get(_),P=cd(this.query,S)?S:null,O=!!w&&this.mutatedKeys.has(w.key),R=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let C=!1;w&&P?w.data.isEqual(P.data)?O!==R&&(r.track({type:3,doc:P}),C=!0):this.iu(w,P)||(r.track({type:2,doc:P}),C=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(d=!0)):!w&&P?(r.track({type:0,doc:P}),C=!0):w&&!P&&(r.track({type:1,doc:w}),C=!0,(f||m)&&(d=!0)),C&&(P?(u=u.add(P),a=R?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,S)=>(function(P,O){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:C})}};return R(P)-R(O)})(_.type,S.type)||this.Xa(_.doc,S.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new tl(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ye(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new uT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new lT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ye();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fg="SyncEngine";class vN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yN{constructor(e){this.key=e,this.lu=!1}}class _N{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Qo((d=>bS(d)),ud),this.Tu=new Map,this.Iu=new Set,this.du=new xt(Ae.comparator),this.Eu=new Map,this.Au=new ng,this.Ru={},this.Vu=new Map,this.mu=el.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function wN(n,e,t=!0){const r=mT(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await cT(r,e,t,!0),s}async function EN(n,e){const t=mT(n);await cT(t,e,!0,!1)}async function cT(n,e,t,r){const s=await zx(n.localStore,Ni(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await SN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&ZS(n.remoteStore,s),d}async function SN(n,e,t,r,s){n.gu=(S,w,P)=>(async function(R,C,$,Q){let G=C.view.nu($);G.Ds&&(G=await Tw(R.localStore,C.query,!1).then((({documents:k})=>C.view.nu(k,G))));const Z=Q&&Q.targetChanges.get(C.targetId),X=Q&&Q.targetMismatches.get(C.targetId)!=null,ie=C.view.applyChanges(G,R.isPrimaryClient,Z,X);return Ow(R,C.targetId,ie._u),ie.snapshot})(n,S,w,P);const a=await Tw(n.localStore,e,!0),u=new gN(e,a.qs),d=u.nu(a.documents),f=Mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Ow(n,t,m._u);const _=new vN(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function TN(n,e,t){const r=ze(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!ud(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await im(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&og(r.remoteStore,s.targetId),am(r,s.targetId)})).catch(ul)):(am(r,s.targetId),await im(r.localStore,s.targetId,!0))}async function IN(n,e){const t=ze(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),og(t.remoteStore,r.targetId))}async function bN(n,e,t){const r=NN(n);try{const s=await(function(u,d){const f=ze(u),m=pt.now(),_=d.reduce(((P,O)=>P.add(O.key)),Ye());let S,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let O=ps(),R=Ye();return f.Os.getEntries(P,_).next((C=>{O=C,O.forEach((($,Q)=>{Q.isValidDocument()||(R=R.add($))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,O))).next((C=>{S=C;const $=[];for(const Q of d){const G=zk(Q,S.get(Q.key).overlayedDocument);G!=null&&$.push(new uo(Q.key,G,vS(G.value.mapValue),$r.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,$,d)})).next((C=>{w=C;const $=C.applyToLocalDocumentSet(S,R);return f.documentOverlayCache.saveOverlays(P,C.batchId,$)}))})).then((()=>({batchId:w.batchId,changes:PS(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new xt(Ke)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await ju(r,s.changes),await gd(r.remoteStore)}catch(s){const a=hg(s,"Failed to persist write");t.reject(a)}}async function hT(n,e){const t=ze(n);try{const r=await jx(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?at(u.lu,14607):s.removedDocuments.size>0&&(at(u.lu,42227),u.lu=!1))})),await ju(t,r,e)}catch(r){await ul(r)}}function Nw(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=ze(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,S)=>{for(const w of S.wa)w.va(d)&&(m=!0)})),m&&dg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CN(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new xt(Ae.comparator);u=u.insert(a,An.newNoDocument(a,Ue.min()));const d=Ye().add(a),f=new fd(Ue.min(),new Map,new xt(Ke),u,d);await hT(r,f),r.du=r.du.remove(a),r.Eu.delete(e),pg(r)}else await im(r.localStore,e,!1).then((()=>am(r,e,t))).catch(ul)}async function AN(n,e){const t=ze(n),r=e.batch.batchId;try{const s=await Lx(t.localStore,e);fT(t,r,null),dT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ju(t,s)}catch(s){await ul(s)}}async function PN(n,e,t){const r=ze(n);try{const s=await(function(u,d){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((S=>(at(S!==null,37113),_=S.keys(),f.mutationQueue.removeMutationBatch(m,S)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);fT(r,e,t),dT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ju(r,s)}catch(s){await ul(s)}}function dT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function fT(n,e,t){const r=ze(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||pT(n,r)}))}function pT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(og(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),pg(n))}function Ow(n,e,t){for(const r of t)r instanceof lT?(n.Au.addReference(r.key,e),RN(n,r)):r instanceof uT?(ge(fg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||pT(n,r.key)):Ne(19791,{yu:r})}function RN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ge(fg,"New document in limbo: "+t),n.Iu.add(r),pg(n))}function pg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ae(vt.fromString(e)),r=n.mu.next();n.Eu.set(r,new yN(t)),n.du=n.du.insert(t,r),ZS(n.remoteStore,new Gs(Ni(Qm(t.path)),r,"TargetPurposeLimboResolution",od.ue))}}async function ju(n,e,t){const r=ze(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const S=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,S?"current":"not-current")}if(m){s.push(m);const S=ig.Es(f.targetId,m);a.push(S)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const _=ze(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>re.forEach(m,(w=>re.forEach(w.Is,(P=>_.persistence.referenceDelegate.addReference(S,w.targetId,P))).next((()=>re.forEach(w.ds,(P=>_.persistence.referenceDelegate.removeReference(S,w.targetId,P)))))))))}catch(S){if(!cl(S))throw S;ge(sg,"Failed to update sequence numbers: "+S)}for(const S of m){const w=S.targetId;if(!S.fromCache){const P=_.Fs.get(w),O=P.snapshotVersion,R=P.withLastLimboFreeSnapshotVersion(O);_.Fs=_.Fs.insert(w,R)}}})(r.localStore,a))}async function kN(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ge(fg,"User change. New user:",e.toKey());const r=await QS(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new pe(te.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ju(t,r.Bs)}}function xN(n,e){const t=ze(n),r=t.Eu.get(e);if(r&&r.lu)return Ye().add(r.key);{let s=Ye();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function mT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CN.bind(null,e),e.hu.J_=pN.bind(null,e.eventManager),e.hu.pu=mN.bind(null,e.eventManager),e}function NN(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PN.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Mx(this.persistence,new Ox,e.initialUser,this.serializer)}Du(e){return new GS(rg.Vi,this.serializer)}bu(e){return new Bx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class ON extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){at(this.persistence.referenceDelegate instanceof Dh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new GS((r=>Dh.Vi(r,t)),this.serializer)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await hN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fN})()}createDatastore(e){const t=pd(e.databaseInfo.databaseId),r=(function(a){return new Gx(a)})(e.databaseInfo);return(function(a,u,d,f){return new Jx(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new eN(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nw(this.syncEngine,t,0)),(function(){return Cw.C()?new Cw:new Hx})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const S=new _N(s,a,u,d,f,m);return _&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ze(s);ge(Ho,"RemoteStore shutting down."),a.Ia.add(5),await Lu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lm.provider={build:()=>new lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="FirestoreClient";class DN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ge(ao,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ge(ao,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yp(n,e){n.asyncQueue.verifyOperationInProgress(),ge(ao,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await QS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{to("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{to("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Dw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VN(n);ge(ao,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Pw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Pw(e.remoteStore,s))),n._onlineComponents=e}async function VN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(ao,"Using user provided OfflineComponentProvider");try{await yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;to("Error using user provided cache. Falling back to memory cache: "+t),await yp(n,new Mh)}}else ge(ao,"Using default OfflineComponentProvider"),await yp(n,new ON(void 0));return n._offlineComponents}async function vT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(ao,"Using user provided OnlineComponentProvider"),await Dw(n,n._uninitializedComponentsProvider._online)):(ge(ao,"Using default OnlineComponentProvider"),await Dw(n,new lm))),n._onlineComponents}function MN(n){return vT(n).then((e=>e.syncEngine))}async function yT(n){const e=await vT(n),t=e.eventManager;return t.onListen=wN.bind(null,e.syncEngine),t.onUnlisten=TN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IN.bind(null,e.syncEngine),t}function LN(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new gT({next:w=>{_.Ou(),u.enqueueAndForget((()=>oT(a,S)));const P=w.docs.has(d);!P&&w.fromCache?m.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&w.fromCache&&f&&f.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),S=new aT(Qm(d.path),_,{includeMetadataChanges:!0,ka:!0});return sT(a,S)})(await yT(n),n.asyncQueue,e,t,r))),r.promise}function jN(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new gT({next:w=>{_.Ou(),u.enqueueAndForget((()=>oT(a,S))),w.fromCache&&f.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),S=new aT(d,_,{includeMetadataChanges:!0,ka:!0});return sT(a,S)})(await yT(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firestore.googleapis.com",Mw=!0;class Lw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wT,this.ssl=Mw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gx)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new XR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vw.get(t);r&&(ge("ComponentProvider","Removing Datastore"),Vw.delete(t),r.terminate())})(this),Promise.resolve()}}function FN(n,e,t,r={}){var s;n=oi(n,vd);const a=gs(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Jh(`https://${f}`),Zh("Firestore",!0)),u.host!==wT&&u.host!==f&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!us(m,d)&&(n._setSettings(m),r.mockUserToken)){let _,S;if(typeof r.mockUserToken=="string")_=r.mockUserToken,S=Cn.MOCK_USER;else{_=cE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Cn(w)}n._authCredentials=new KR(new iS(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ou(t,zt._jsonSchema))return new zt(e,r||null,new Ae(vt.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Qt("string",zt._jsonSchemaVersion),referencePath:Qt("string")};class Zs extends dl{constructor(e,t,r){super(e,t,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Ae(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function Lh(n,e,...t){if(n=Et(n),oS("collection","path",e),n instanceof vd){const r=vt.fromString(e,...t);return X_(r),new Zs(n,null,r)}{if(!(n instanceof zt||n instanceof Zs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return X_(r),new Zs(n.firestore,null,r)}}function Br(n,e,...t){if(n=Et(n),arguments.length===1&&(e=Bm.newId()),oS("doc","path",e),n instanceof vd){const r=vt.fromString(e,...t);return Q_(r),new zt(n,null,new Ae(r))}{if(!(n instanceof zt||n instanceof Zs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return Q_(r),new zt(n.firestore,n instanceof Zs?n.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new YS(this,"async_queue_retry"),this.oc=()=>{const r=vp();r&&ge(jw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new as;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cl(e))throw e;ge(jw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,fs("INTERNAL UNHANDLED ERROR: ",Uw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=cg.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Ne(47125,{hc:Uw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Uw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yo extends vd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Fw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function UN(n,e){const t=typeof n=="object"?n:ed(),r=typeof n=="string"?n:Ph,s=Ru(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Pm("firestore");a&&FN(s,...a)}return s}function mg(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zN(n),n._firestoreClient}function zN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,_){return new dk(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_T(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new DN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(yn.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:Qt("string",Ur._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Qt("string",Di._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Qt("string",Vi._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^__.*__$/;class BN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class ET{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ST(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:n})}}class _d{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new _d(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ST(this.Ec)&&$N.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class HN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pd(e)}Dc(e,t,r,s=!1){return new _d({Ec:e,methodName:t,bc:r,path:vn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wd(n){const e=n._freezeSettings(),t=pd(n._databaseId);return new HN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TT(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);_g("Data must be an object, but it was:",u,r);const d=bT(r,u);let f,m;if(a.merge)f=new Er(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const S of a.mergeFields){const w=um(e,S,t);if(!u.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);AT(_,w)||_.push(w)}f=new Er(_),m=u.fieldTransforms.filter((S=>f.covers(S.field)))}else f=null,m=u.fieldTransforms;return new BN(new ar(d),f,m)}class Fu extends fl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function IT(n,e,t){return new _d({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gg extends fl{_toFieldTransform(e){return new Ym(e.path,new wu)}isEqual(e){return e instanceof gg}}class vg extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=IT(this,e,!0),r=this.vc.map((a=>Jo(a,t))),s=new Ja(r);return new Ym(e.path,s)}isEqual(e){return e instanceof vg&&us(this.vc,e.vc)}}class yg extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=IT(this,e,!0),r=this.vc.map((a=>Jo(a,t))),s=new Za(r);return new Ym(e.path,s)}isEqual(e){return e instanceof yg&&us(this.vc,e.vc)}}function WN(n,e,t,r){const s=n.Dc(1,e,t);_g("Data must be an object, but it was:",s,r);const a=[],u=ar.empty();lo(r,((f,m)=>{const _=wg(e,f,t);m=Et(m);const S=s.gc(_);if(m instanceof Fu)a.push(_);else{const w=Jo(m,S);w!=null&&(a.push(_),u.set(_,w))}}));const d=new Er(a);return new ET(u,d,s.fieldTransforms)}function qN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[um(e,r,t)],f=[s];if(a.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)d.push(um(e,a[w])),f.push(a[w+1]);const m=[],_=ar.empty();for(let w=d.length-1;w>=0;--w)if(!AT(m,d[w])){const P=d[w];let O=f[w];O=Et(O);const R=u.gc(P);if(O instanceof Fu)m.push(P);else{const C=Jo(O,R);C!=null&&(m.push(P),_.set(P,C))}}const S=new Er(m);return new ET(_,S,u.fieldTransforms)}function KN(n,e,t,r=!1){return Jo(t,n.Dc(r?4:3,e))}function Jo(n,e){if(CT(n=Et(n)))return _g("Unsupported field value:",e,n),bT(n,e);if(n instanceof fl)return(function(r,s){if(!ST(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=Jo(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=pt.fromDate(r);return{timestampValue:Oh(s.serializer,a)}}if(r instanceof pt){const a=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(s.serializer,a)}}if(r instanceof Di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:US(s.serializer,r._byteString)};if(r instanceof zt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vi)return(function(u,d){return{mapValue:{fields:{[mS]:{stringValue:gS},[Rh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Xm(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${sd(r)}`)})(n,e)}function bT(n,e){const t={};return uS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((r,s)=>{const a=Jo(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function CT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Di||n instanceof Ur||n instanceof zt||n instanceof fl||n instanceof Vi)}function _g(n,e,t){if(!CT(t)||!aS(t)){const r=sd(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function um(n,e,t){if((e=Et(e))instanceof yd)return e._internalPath;if(typeof e=="string")return wg(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const GN=new RegExp("[~\\*/\\[\\]]");function wg(n,e,t){if(e.search(GN)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yd(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new pe(te.INVALID_ARGUMENT,d+n+f)}function AT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Eg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QN extends PT{data(){return super.data()}}function Eg(n,e){return typeof e=="string"?wg(n,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class YN extends Sg{}function cm(n,e,...t){let r=[];e instanceof Sg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Tg)).length,d=a.filter((f=>f instanceof Ed)).length;if(u>1||u>0&&d>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ed extends YN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=this._parse(e);return RT(e._query,t),new dl(e.firestore,e.converter,Jp(e._query,t))}_parse(e){const t=wd(e.firestore);return(function(a,u,d,f,m,_,S){let w;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){$w(S,_);const O=[];for(const R of S)O.push(zw(f,a,R));w={arrayValue:{values:O}}}else w=zw(f,a,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||$w(S,_),w=KN(d,u,S,_==="in"||_==="not-in");return Gt.create(m,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hm(n,e,t){const r=e,s=Eg("where",n);return Ed._create(s,r,t)}class Tg extends Sg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)RT(u,f),u=Jp(u,f)})(e._query,t),new dl(e.firestore,e.converter,Jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zw(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IS(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Ae.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iw(n,new Ae(r))}if(t instanceof zt)return iw(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(t)}.`)}function $w(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JN{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return lo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Rh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Ut(u.doubleValue)));return new Vi(a)}convertGeoPoint(e){return new Di(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ld(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=ro(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);at(qS(r),9688,{name:e});const s=new yu(r.get(1),r.get(3)),a=new Ae(r.popFirst(5));return s.isEqual(t)||fs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uo extends PT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uo._jsonSchema={type:Qt("string",Uo._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class ph extends Uo{data(e={}){return super.data(e)}}class Wa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new nu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ph(this._firestore,this._userDataWriter,r.key,r,new nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:ZN(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){n=oi(n,zt);const e=oi(n.firestore,Yo);return LN(mg(e),n._key).then((t=>nO(e,n,t)))}Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:Qt("string",Wa._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class xT extends JN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function NT(n){n=oi(n,dl);const e=oi(n.firestore,Yo),t=mg(e),r=new xT(e);return XN(n._query),jN(t,n._query).then((s=>new Wa(e,r,n,s)))}function Ig(n,e,t){n=oi(n,zt);const r=oi(n.firestore,Yo),s=kT(n.converter,e,t);return Id(r,[TT(wd(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,$r.none())])}function Td(n,e,t,...r){n=oi(n,zt);const s=oi(n.firestore,Yo),a=wd(s);let u;return u=typeof(e=Et(e))=="string"||e instanceof yd?qN(a,"updateDoc",n._key,e,t,r):WN(a,"updateDoc",n._key,e),Id(s,[u.toMutation(n._key,$r.exists(!0))])}function eO(n){return Id(oi(n.firestore,Yo),[new Jm(n._key,$r.none())])}function tO(n,e){const t=oi(n.firestore,Yo),r=Br(n),s=kT(n.converter,e);return Id(t,[TT(wd(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,$r.exists(!1))]).then((()=>r))}function Id(n,e){return(function(r,s){const a=new as;return r.asyncQueue.enqueueAndForget((async()=>bN(await MN(r),s,a))),a.promise})(mg(n),e)}function nO(n,e,t){const r=t.docs.get(e._key),s=new xT(n);return new Uo(n,s,e._key,r,new nu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){return new Fu("deleteField")}function nl(){return new gg("serverTimestamp")}function OT(...n){return new vg("arrayUnion",n)}function iO(...n){return new yg("arrayRemove",n)}(function(e,t=!0){(function(s){ll=s})(Go),eo(new cs("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Yo(new GR(r.getProvider("auth-internal")),new YR(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),zr(H_,W_,e),zr(H_,W_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="type.googleapis.com/google.protobuf.Int64Value",oO="type.googleapis.com/google.protobuf.UInt64Value";function DT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Fh(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Fh(e));if(typeof n=="function"||typeof n=="object")return DT(n,e=>Fh(e));throw new Error("Data cannot be encoded in JSON: "+n)}function rl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case sO:case oO:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>rl(e)):typeof n=="function"||typeof n=="object"?DT(n,e=>rl(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lr extends li{constructor(e,t,r){super(`${bg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,lr.prototype)}}function aO(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Uh(n,e){let t=aO(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Bw[u])return new lr("internal","internal");t=Bw[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=rl(s))}}catch{}return t==="ok"?null:new lr(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,or(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="us-central1",uO=/^data: (.*?)(?:\n|$)/;function cO(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new lr("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class hO{constructor(e,t,r,s,a=dm,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new lO(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=dm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function dO(n,e,t){const r=gs(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Jh(n.emulatorOrigin),Zh("Functions",!0))}function fO(n,e,t){const r=s=>mO(n,e,s,{});return r.stream=(s,a)=>vO(n,e,s,a),r}async function pO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function VT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function mO(n,e,t,r){const s=n._url(e);return gO(n,s,t,r)}async function gO(n,e,t,r){t=Fh(t);const s={data:t},a=await VT(n,r),u=r.timeout||7e4,d=cO(u),f=await Promise.race([pO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new lr("cancelled","Firebase Functions instance was deleted.");const m=Uh(f.status,f.json);if(m)throw m;if(!f.json)throw new lr("internal","Response is not valid JSON object.");let _=f.json.data;if(typeof _>"u"&&(_=f.json.result),typeof _>"u")throw new lr("internal","Response is missing data field.");return{data:rl(_)}}function vO(n,e,t,r){const s=n._url(e);return yO(n,s,t,r||{})}async function yO(n,e,t,r){var s;t=Fh(t);const a={data:t},u=await VT(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const R=new lr("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const O=Uh(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const _=new Promise((P,O)=>{f=P,m=O});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const P=new lr("cancelled","Request was cancelled.");m(P)});const S=d.body.getReader(),w=_O(S,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const P=w.getReader();return{async next(){const{value:O,done:R}=await P.read();return{value:O,done:R}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function _O(n,e,t,r){const s=(u,d)=>{const f=u.match(uO);if(!f)return;const m=f[1];try{const _=JSON.parse(m);if("result"in _){e(rl(_.result));return}if("message"in _){d.enqueue(rl(_.message));return}if("error"in _){const S=Uh(0,_);d.error(S),t(S);return}}catch(_){if(_ instanceof lr){d.error(_),t(_);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new lr("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const w=new lr("cancelled","Request was cancelled");u.error(w),t(w),await n.cancel();return}d+=a.decode(m,{stream:!0});const S=d.split(`
`);d=S.pop()||"";for(const w of S)w.trim()&&s(w.trim(),u);return f()}catch(m){const _=m instanceof lr?m:Uh(0,null);u.error(_),t(_)}}},cancel(){return n.cancel()}})}const Hw="@firebase/functions",Ww="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="auth-internal",EO="app-check-internal",SO="messaging-internal";function TO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(wO),u=t.getProvider(SO),d=t.getProvider(EO);return new hO(s,a,u,d,r)};eo(new cs(bg,e,"PUBLIC").setMultipleInstances(!0)),zr(Hw,Ww,n),zr(Hw,Ww,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n=ed(),e=dm){const r=Ru(Et(n),bg).getImmediate({identifier:e}),s=Pm("functions");return s&&bO(r,...s),r}function bO(n,e,t){dO(Et(n),e,t)}function cr(n,e,t){return fO(Et(n),e)}TO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebasestorage.googleapis.com",LT="storageBucket",CO=120*1e3,AO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt extends li{constructor(e,t,r=0){super(_p(e),`Firebase Storage: ${t} (${_p(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lt||(Lt={}));function _p(n){return"storage/"+n}function Cg(){const n="An unknown error occurred, please check the error payload for server response.";return new jt(Lt.UNKNOWN,n)}function PO(n){return new jt(Lt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function RO(n){return new jt(Lt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new jt(Lt.UNAUTHENTICATED,n)}function xO(){return new jt(Lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NO(n){return new jt(Lt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function OO(){return new jt(Lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DO(){return new jt(Lt.CANCELED,"User canceled the upload/download.")}function VO(n){return new jt(Lt.INVALID_URL,"Invalid URL '"+n+"'.")}function MO(n){return new jt(Lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function LO(){return new jt(Lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LT+"' property when initializing the app?")}function jO(){return new jt(Lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FO(){return new jt(Lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UO(n){return new jt(Lt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fm(n){return new jt(Lt.INVALID_ARGUMENT,n)}function jT(){return new jt(Lt.APP_DELETED,"The Firebase app was deleted.")}function zO(n){return new jt(Lt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(n,e){return new jt(Lt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ql(n){throw new jt(Lt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Sr.makeFromUrl(e,t)}catch{return new Sr(e,"")}if(r.path==="")return r;throw MO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const _="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",P=new RegExp(`^https?://${S}/${_}/b/${s}/o${w}`,"i"),O={bucket:1,path:3},R=t===MT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",$=new RegExp(`^https?://${R}/${s}/${C}`,"i"),G=[{regex:d,indices:f,postModify:a},{regex:P,indices:O,postModify:m},{regex:$,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<G.length;Z++){const X=G[Z],ie=X.regex.exec(e);if(ie){const k=ie[X.indices.bucket];let A=ie[X.indices.path];A||(A=""),r=new Sr(k,A),X.postModify(r);break}}if(r==null)throw VO(e);return r}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function _(...C){m||(m=!0,e.apply(null,C))}function S(C){s=setTimeout(()=>{s=null,n(P,f())},C)}function w(){a&&clearTimeout(a)}function P(C,...$){if(m){w();return}if(C){w(),_.call(null,C,...$);return}if(f()||u){w(),_.call(null,C,...$);return}r<64&&(r*=2);let G;d===1?(d=2,G=0):G=(r+Math.random())*1e3,S(G)}let O=!1;function R(C){O||(O=!0,w(),!m&&(s!==null?(C||(d=2),clearTimeout(s),S(0)):C||(d=1)))}return S(0),a=setTimeout(()=>{u=!0,R(!0)},t),R}function HO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){return n!==void 0}function qO(n){return typeof n=="object"&&!Array.isArray(n)}function Ag(n){return typeof n=="string"||n instanceof String}function qw(n){return Pg()&&n instanceof Blob}function Pg(){return typeof Blob<"u"}function Kw(n,e,t,r){if(r<e)throw fm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var zo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t,r,s,a,u,d,f,m,_,S,w=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=S,this.retry=w,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,R)=>{this.resolve_=O,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===zo.NO_ERROR,f=a.getStatus();if(!d||KO(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===zo.ABORT;r(!1,new Xc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new Xc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());WO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=Cg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?jT():DO();u(f)}else{const f=OO();u(f)}};this.canceled_?t(!1,new Xc(!1,null,!0)):this.backoffId_=BO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function QO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function XO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function JO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ZO(n,e,t,r,s,a,u=!0,d=!1){const f=FT(n.urlParams),m=n.url+f,_=Object.assign({},n.headers);return YO(_,e),QO(_,t),XO(_,a),JO(_,r),new GO(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tD(...n){const e=eD();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Pg())return new Blob(n);throw new jt(Lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){if(typeof atob>"u")throw UO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wp{constructor(e,t){this.data=e,this.contentType=t||null}}function iD(n,e){switch(n){case ki.RAW:return new wp(UT(e));case ki.BASE64:case ki.BASE64URL:return new wp(zT(n,e));case ki.DATA_URL:return new wp(oD(e),aD(e))}throw Cg()}function UT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sD(n){let e;try{e=decodeURIComponent(n)}catch{throw hu(ki.DATA_URL,"Malformed data URL.")}return UT(e)}function zT(n,e){switch(n){case ki.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw hu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ki.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw hu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rD(e)}catch(s){throw s.message.includes("polyfill")?s:hu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class $T{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hu(ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=lD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oD(n){const e=new $T(n);return e.base64?zT(ki.BASE64,e.rest):sD(e.rest)}function aD(n){return new $T(n).contentType}function lD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){let r=0,s="";qw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(qw(this.data_)){const r=this.data_,s=nD(r,e,t);return s===null?null:new qs(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qs(r,!0)}}static getBlob(...e){if(Pg()){const t=e.map(r=>r instanceof qs?r.data_:r);return new qs(tD.apply(null,t))}else{const t=e.map(u=>Ag(u)?iD(ki.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new qs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n){let e;try{e=JSON.parse(n)}catch{return null}return qO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function HT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n,e){return e}class Mn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||hD}}let Yc=null;function dD(n){return!Ag(n)||n.length<2?n:HT(n)}function WT(){if(Yc)return Yc;const n=[];n.push(new Mn("bucket")),n.push(new Mn("generation")),n.push(new Mn("metageneration")),n.push(new Mn("name","fullPath",!0));function e(a,u){return dD(u)}const t=new Mn("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new Mn("size");return s.xform=r,n.push(s),n.push(new Mn("timeCreated")),n.push(new Mn("updated")),n.push(new Mn("md5Hash",null,!0)),n.push(new Mn("cacheControl",null,!0)),n.push(new Mn("contentDisposition",null,!0)),n.push(new Mn("contentEncoding",null,!0)),n.push(new Mn("contentLanguage",null,!0)),n.push(new Mn("contentType",null,!0)),n.push(new Mn("metadata","customMetadata",!0)),Yc=n,Yc}function fD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new Sr(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function pD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return fD(r,n),r}function qT(n,e,t){const r=BT(e);return r===null?null:pD(n,r,t)}function mD(n,e,t,r){const s=BT(e);if(s===null||!Ag(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,S=n.fullPath,w="/b/"+u(_)+"/o/"+u(S),P=bd(w,t,r),O=FT({alt:"media",token:m});return P+O})[0]}function gD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Rg{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){if(!n)throw Cg()}function vD(n,e){function t(r,s){const a=qT(n,s,e);return KT(a!==null),a}return t}function yD(n,e){function t(r,s){const a=qT(n,s,e);return KT(a!==null),mD(a,s,n.host,n._protocol)}return t}function GT(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=xO():s=kO():t.getStatus()===402?s=RO(n.bucket):t.getStatus()===403?s=NO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function QT(n){const e=GT(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=PO(n.path)),a.serverResponse=s.serverResponse,a}return t}function _D(n,e,t){const r=e.fullServerUrl(),s=bd(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new Rg(s,a,yD(n,t),u);return d.errorHandler=QT(e),d}function wD(n,e){const t=e.fullServerUrl(),r=bd(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new Rg(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=QT(e),d}function ED(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function SD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ED(null,e)),r}function TD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let G="";for(let Z=0;Z<2;Z++)G=G+Math.random().toString().slice(2);return G}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=SD(e,r,s),_=gD(m,t),S="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,w=`\r
--`+f+"--",P=qs.getBlob(S,r,w);if(P===null)throw jO();const O={name:m.fullPath},R=bd(a,n.host,n._protocol),C="POST",$=n.maxUploadRetryTime,Q=new Rg(R,C,vD(n,t),$);return Q.urlParams=O,Q.headers=u,Q.body=P.uploadData(),Q.errorHandler=GT(e),Q}class ID{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw Ql("cannot .send() more than once");if(gs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bD extends ID{initXhr(){this.xhr_.responseType="text"}}function kg(){return new bD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){this._service=e,t instanceof Sr?this._location=t:this._location=Sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wo(e,t)}get root(){const e=new Sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HT(this._location.path)}get storage(){return this._service}get parent(){const e=uD(this._location.path);if(e===null)return null;const t=new Sr(this._location.bucket,e);return new Wo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw zO(e)}}function CD(n,e,t){n._throwIfRoot("uploadBytes");const r=TD(n.storage,n._location,WT(),new qs(e,!0),t);return n.storage.makeRequestWithTokens(r,kg).then(s=>({metadata:s,ref:n}))}function AD(n){n._throwIfRoot("getDownloadURL");const e=_D(n.storage,n._location,WT());return n.storage.makeRequestWithTokens(e,kg).then(t=>{if(t===null)throw FO();return t})}function PD(n){n._throwIfRoot("deleteObject");const e=wD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,kg)}function RD(n,e){const t=cD(n._location.path,e),r=new Sr(n._location.bucket,t);return new Wo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){return/^[A-Za-z]+:\/\//.test(n)}function xD(n,e){return new Wo(n,e)}function XT(n,e){if(n instanceof xg){const t=n;if(t._bucket==null)throw LO();const r=new Wo(t,t._bucket);return e!=null?XT(r,e):r}else return e!==void 0?RD(n,e):n}function ND(n,e){if(e&&kD(e)){if(n instanceof xg)return xD(n,e);throw fm("To use ref(service, url), the first argument must be a Storage instance.")}else return XT(n,e)}function Gw(n,e){const t=e==null?void 0:e[LT];return t==null?null:Sr.makeFromBucketSpec(t,n)}function OD(n,e,t,r={}){n.host=`${e}:${t}`;const s=gs(e);s&&(Jh(`https://${n.host}/b`),Zh("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:cE(a,n.app.options.projectId))}class xg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=MT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CO,this._maxUploadRetryTime=AO,this._requests=new Set,s!=null?this._bucket=Sr.makeFromBucketSpec(s,this._host):this._bucket=Gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sr.makeFromBucketSpec(this._url,e):this._bucket=Gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new $O(jT());{const u=ZO(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Qw="@firebase/storage",Xw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="storage";function DD(n,e,t){return n=Et(n),CD(n,e,t)}function VD(n){return n=Et(n),AD(n)}function MD(n){return n=Et(n),PD(n)}function JT(n,e){return n=Et(n),ND(n,e)}function LD(n=ed(),e){n=Et(n);const r=Ru(n,YT).getImmediate({identifier:e}),s=Pm("storage");return s&&jD(r,...s),r}function jD(n,e,t,r={}){OD(n,e,t,r)}function FD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new xg(t,r,s,e,Go)}function UD(){eo(new cs(YT,FD,"PUBLIC").setMultipleInstances(!0)),zr(Qw,Xw,""),zr(Qw,Xw,"esm2017")}UD();const zD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},Cd=fE(zD),Ln=HR(Cd),jn=UN(Cd),ZT=LD(Cd),hr=IO(Cd,"us-central1");NP(Ln,FE);cr(hr,"bootstrapFirstAdmin");cr(hr,"setUserRole");const $D=cr(hr,"ensureCoachAccess"),BD=cr(hr,"acceptCoachTrial"),HD=cr(hr,"getCoachAccessState"),WD=cr(hr,"completeClientOnboarding"),qD=cr(hr,"listCoachesForSupervisor"),KD=cr(hr,"activateCoachSubscription"),GD=cr(hr,"renewCoachSubscription"),QD=cr(hr,"disableCoachSubscription"),XD=cr(hr,"deleteMyProfile"),YD=cr(hr,"updateMyCoachPhone"),JD=cr(hr,"getMyAssignedPlans"),ZD=cr(hr,"updateMyPlanExerciseWeight");async function e2(){return(await $D()).data}async function eI(){return(await BD()).data}async function Yw(){return(await HD()).data}async function t2(n){return(await WD(n)).data}async function n2(){return(await qD()).data}async function Jw(n){return(await KD({uid:n})).data}async function r2(n){return(await GD({uid:n})).data}async function i2(n){return(await QD({uid:n})).data}async function tI(){return(await XD()).data}async function s2(n){return(await YD({phone:n})).data}async function o2(){return(await JD()).data}async function a2(n,e,t){return(await ZD({planId:n,exerciseIndex:e,weightKg:t})).data}async function l2(){return Ln.currentUser?Ln.currentUser.getIdTokenResult(!0):null}async function nI(n){const e=n??Ln.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await nd(Ln),null}throw t}}async function u2(n){const e=n??Ln.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function rI(){return{createdAt:nl(),updatedAt:nl()}}function pl(){return{updatedAt:nl()}}function co(){var e;const n=(e=Ln.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function pm(n={}){const e=co(),t=Br(jn,"users",e);return await Ig(t,{uid:e,...rI(),...n},{merge:!0}),t}async function qa(n){const e=n??co();return Sd(Br(jn,"users",e))}async function c2(n){const e=n??co(),t=cm(Lh(jn,"users"),hm("assignedCoachId","==",e));return NT(t)}async function iI(n,e){return Sd(Br(jn,"users",n,"private",e))}async function h2(){const n=co();return Sd(Br(jn,"users",n,"private","planWeights"))}async function d2(n,e,t){const r=co();await Ig(Br(jn,"users",r,"private","planWeights"),{weights:{[n]:{[String(e)]:t}},...pl()},{merge:!0})}async function f2(n,e){await Ig(Br(jn,"users",n,"private","onboarding"),{...e,...pl()},{merge:!0})}async function Zw(n){const e=co();return await tO(Lh(jn,"plans"),{trainerId:e,clientId:n.clientId??"",status:n.status,title:n.title,warmup:n.warmup??"",description:n.description??"",kind:n.kind??"series_reps",notes:n.notes??"",assignedClientIds:n.assignedClientIds??[],exercises:n.exercises,clientNotes:"",lastViewedAt:null,...rI()})}async function sI(n,e){const t=e??co(),r=n==="client"?cm(Lh(jn,"plans"),hm("assignedClientIds","array-contains",t)):cm(Lh(jn,"plans"),hm("trainerId","==",t));return NT(r)}async function p2(n,e){await Td(Br(jn,"plans",n),{assignedClientIds:OT(e),[`assignmentDetails.${e}`]:{mode:"permanent",weeks:null,expiresAt:null,assignedAt:nl()},...pl()})}async function e0(n,e,t,r){const s=r?new Date(r):new Date,a=Number.isNaN(s.getTime())?new Date:s,u=t&&t>0?{mode:"timed",weeks:t,startsAt:pt.fromDate(a),expiresAt:pt.fromDate(new Date(a.getTime()+t*7*24*60*60*1e3)),assignedAt:nl()}:{mode:"permanent",weeks:null,startsAt:null,expiresAt:null,assignedAt:nl()};await Td(Br(jn,"plans",n),{assignedClientIds:OT(e),[`assignmentDetails.${e}`]:u,...pl()})}async function m2(n,e){await Td(Br(jn,"plans",n),{assignedClientIds:iO(e),[`assignmentDetails.${e}`]:rO(),...pl()})}async function g2(n,e){await Td(Br(jn,"plans",n),{...e,...pl()})}async function v2(n){const e=Br(jn,"plans",n),t=await Sd(e);if(t.exists()){const r=t.data(),s=w2(r.exercises);await Promise.allSettled(s.map(a=>E2(a)))}await eO(e)}async function y2(n,e){const t=co(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=_2(t,n,s);return await DD(a,e,{contentType:e.type||"application/octet-stream"}),VD(a)}function _2(n,e,t){return JT(ZT,`workout-media/${n}/${e}/${t}`)}function w2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;t0(r)&&e.add(r),t0(s)&&e.add(s)}return[...e]}function t0(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function E2(n){try{await MD(JT(ZT,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}function ml(){const[n,e]=V.useState(!0),[t,r]=V.useState(Ln.currentUser),[s,a]=V.useState(null),[u,d]=V.useState(!1);return V.useEffect(()=>ME(Ln,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await Ng(f);const m=await nI(f);a(m),d(await u2(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await nd(Ln),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),V.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const mm=new is;mm.setCustomParameters({prompt:"select_account"});async function Ng(n){(await qa(n.uid)).exists()||await pm({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function n0(){try{const n=await JP(Ln,mm);return await Ng(n.user),{redirected:!1,user:n.user}}catch(n){if(T2(n))return await iR(Ln,mm),{redirected:!0,user:null};throw n}}async function S2(){try{const n=await oR(Ln);return n!=null&&n.user&&await Ng(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await nd(Ln),null;throw n}}async function Tr(){return nd(Ln)}function T2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function oI(n){return n.replace(/[^\d]/g,"")}const I2="393405882404".trim(),aI=oI(I2);aI.length>6;function lI(n,e){const t=oI(e??aI),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function b2(n){return n.map(e=>({id:e.id,...e.data()}))}function kt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const Fr="bw_login_intent";function C2(n){return n==="trainer"||n==="admin"}function A2(){const{user:n,role:e}=ml(),t=Cu(),{showError:r}=Xh(),[s,a]=V.useState(!1),[u,d]=V.useState(""),[f,m]=V.useState(!1),[_,S]=V.useState(!1),[w,P]=V.useState(null),[O,R]=V.useState(null),[C,$]=V.useState(!1),Q=V.useRef(0),G=V.useMemo(()=>lI("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);V.useEffect(()=>{async function M(){try{await S2()}catch(L){const x=kt(L);d(x),r(x)}}M()},[r]);async function Z(M=10){if(!n)return!1;for(let L=0;L<M;L+=1){await l2();const x=await nI(n);if(C2(x))return!0;await new Promise(Fe=>setTimeout(Fe,500))}return!1}async function X(){if(!n)return;const M=++Q.current,L=()=>M!==Q.current||_;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await pm({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),L())return;const x=await e2();if(L())return;const Oe=(await qa(n.uid)).data();if(!(typeof(Oe==null?void 0:Oe.phone)=="string"?Oe.phone.trim():"")){R({access:x,phone:""}),m(!1),d("");return}if(x.isExpired){if(await Tr(),sessionStorage.removeItem(Fr),L())return;P({mode:"expired",access:x});return}if(x.requiresTrialAcceptance){if(L())return;P({mode:"trial",access:x});return}const De=await Z();if(L())return;if(!De){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Fr),t("/app/coach",{replace:!0})}catch(x){if(L())return;const Fe=kt(x);d(Fe),r(Fe)}finally{L()||m(!1)}}async function ie(){if(!O||!n)return;const M=O.phone.replace(/[^\d+]/g,"").trim();if(M.length<8){d("Inserisci un numero WhatsApp valido.");return}$(!0),d("Salvo il tuo numero e completo la registrazione coach...");try{await pm({phone:M});const L=O.access;if(R(null),L.isExpired){await Tr(),sessionStorage.removeItem(Fr),P({mode:"expired",access:L});return}if(L.requiresTrialAcceptance){P({mode:"trial",access:L});return}if(!await Z()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(Fr),t("/app/coach",{replace:!0})}catch(L){const x=kt(L);d(x),r(x)}finally{$(!1)}}V.useEffect(()=>{async function M(){if(!n){m(!1),_||d("");return}if(f||_||O)return;if(sessionStorage.getItem(Fr)==="coach"){await X();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}M()},[n,e,f,_,O]),V.useEffect(()=>{_&&(n||(S(!1),t("/auth",{replace:!0})))},[_,n,t]);async function k(){Q.current+=1,S(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(Fr),P(null),R(null);try{await Tr()}catch(M){d(kt(M)),S(!1)}}async function A(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const M=await eI();if(M.isExpired){await Tr(),sessionStorage.removeItem(Fr),P({mode:"expired",access:M});return}if(!await Z()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}P(null),sessionStorage.removeItem(Fr),t("/app/coach",{replace:!0})}catch(M){const L=kt(M);d(L),r(L)}finally{a(!1)}}async function N(){a(!0),d(""),P(null);try{if(sessionStorage.setItem(Fr,"client"),(await n0()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(M){const L=kt(M);d(L),r(L)}finally{a(!1)}}async function j(){a(!0),d(""),P(null);try{sessionStorage.setItem(Fr,"coach");const M=await n0();if(M.redirected){d("Ti sto reindirizzando a Google...");return}if(!M.user){d("Accesso non completato. Riprova.");return}await X()}catch(M){const L=kt(M);d(L),r(L)}finally{a(!1)}}return(w==null?void 0:w.mode)==="trial"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:s,onClick:()=>void A(),children:s?"Attivazione...":"Accetta e continua"})]})]})}):(w==null?void 0:w.mode)==="expired"?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h1",{children:"Periodo di prova terminato"}),g.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{P(null),sessionStorage.removeItem(Fr)},children:"Torna all'accesso"}),g.jsx("a",{className:"btn btn-whatsapp btn-primary",href:G,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"})]})]})}):O?g.jsx("main",{className:"page page-top",children:g.jsxs("section",{className:"card auth-card fullscreen-gate",children:[g.jsx("p",{className:"eyebrow",children:"Registrazione Coach"}),g.jsx("h1",{children:"Inserisci numero WhatsApp"}),g.jsx("p",{className:"hero-sub",children:"Ultimo step obbligatorio: questo numero verr condiviso ai clienti associati al tuo codice coach."}),g.jsxs("label",{children:["Numero di telefono / WhatsApp *",g.jsx("input",{type:"tel",placeholder:"Es. 3405882404",value:O.phone,onChange:M=>R(L=>L&&{...L,phone:M.target.value})})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:C,onClick:()=>void k(),children:"Esci"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:C,onClick:()=>void ie(),children:C?"Salvataggio...":"Continua"})]}),u?g.jsx("p",{className:"message",children:u}):null]})}):n&&e&&sessionStorage.getItem(Fr)!=="coach"?g.jsx(ii,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Accedi con Google"}),g.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),g.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void N(),type:"button",children:s?"Connessione...":"Continua con Google"}),g.jsx("div",{className:"divider"}),g.jsx("h2",{children:"Sei un Coach?"}),g.jsx("p",{className:"hint",children:"Accedi o registrati come coach con Google."}),g.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void j(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach"}),u?g.jsx("p",{className:"message",children:u}):null,g.jsx(u1,{})]})})}function uI({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u,[m,_]=V.useState(!1),S=V.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),w=V.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),P=m?"__more__":a,O=m||!m&&w.some(C=>C.id===a);function R(C,$){const Q=($==="mobile"?P:a)===C.id,G=$==="mobile"?C.mobileLabel??C.label:C.label;return g.jsxs("button",{className:`shell-tab shell-tab-${$} ${Q?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),$==="mobile"&&_(!1)},"aria-current":Q?"page":void 0,children:[C.icon?g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:C.icon}):null,g.jsx("span",{className:"shell-tab-label",children:G})]},`${$}-${C.id}`)}return g.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?g.jsxs("aside",{className:"shell-sidebar desktop-only",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h2",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hint",children:t}):null,g.jsx("nav",{className:"shell-sidebar-nav",children:s.map(C=>R(C,"desktop"))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Tr(),children:"Esci dal profilo"})]}):null,g.jsxs("section",{className:"shell-main",children:[g.jsxs("section",{className:"hero hero-compact",children:[g.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),g.jsx("h1",{children:e}),t!=null&&t.trim()?g.jsx("p",{className:"hero-sub",children:t}):null,r,f?null:g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Tr(),children:"Esci dal profilo"})]}),g.jsx("section",{className:"stack app-stack",children:d})]}),g.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?S.map(C=>R(C,"mobile")):g.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Home"})]}),w.length>0?g.jsxs("button",{className:`shell-tab shell-tab-mobile ${O||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>_(C=>!C),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,g.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Tr(),children:[g.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),g.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&w.length>0?g.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",onClick:C=>C.currentTarget===C.target&&_(!1),children:g.jsxs("article",{className:"card mobile-more-card",onClick:C=>C.stopPropagation(),children:[g.jsx("h3",{children:"Altre sezioni"}),g.jsx("div",{className:"mobile-more-list",children:w.map(C=>g.jsxs("button",{className:`step-tab ${a===C.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(C.id),_(!1)},children:[C.icon?`${C.icon} `:"",C.label]},`more-${C.id}`))}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>_(!1),children:"Chiudi"})]})}):null]})}function Ep(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Sp(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function r0(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Tp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number((typeof t.weight=="string"?t.weight:"").replace(/[^\d.-]/g,"")),s=typeof t.advancedMethod=="string"?t.advancedMethod.trim():"",a=s==="rest_pause"||s==="drop_set"?s:"",u=typeof t.advancedMethodNotes=="string"?t.advancedMethodNotes:"",d=typeof t.restPauseNotes=="string"?t.restPauseNotes:a==="rest_pause"?u:"",f=typeof t.dropSetNotes=="string"?t.dropSetNotes:a==="drop_set"?u:"";return{name:typeof t.name=="string"?t.name:"",notes:typeof t.notes=="string"?t.notes:"",advancedMethod:a,advancedMethodNotes:u,restPauseNotes:d,dropSetNotes:f,sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,workValue:typeof t.workValue=="number"?t.workValue:Number(t.workValue??t.reps??0)||0,weightKg:typeof t.weightKg=="number"?t.weightKg:Number(t.weightKg??r??0)||0,restSeconds:typeof t.restSeconds=="number"?t.restSeconds:Number(t.restSeconds??0)||0,mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function i0(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function P2(n,e){const r=(n.clientWeightOverrides&&typeof n.clientWeightOverrides=="object"?n.clientWeightOverrides:{})[e];if(!r||typeof r!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const s=n.exercises.map((a,u)=>{if(!a||typeof a!="object")return a;const d=r[String(u)];return Number.isFinite(Number(d))?{...a,weightKg:Number(d)}:a});return{...n,exercises:s}}function R2(n,e){const t=e[n.id];if(!t||typeof t!="object"||!Array.isArray(n.exercises)||n.exercises.length===0)return n;const r=n.exercises.map((s,a)=>{if(!s||typeof s!="object")return s;const u=t[String(a)];return Number.isFinite(Number(u))?{...s,weightKg:Number(u)}:s});return{...n,exercises:r}}function k2(){const{role:n,user:e}=ml(),t=Cu(),{showError:r,showSuccess:s}=Xh(),[a,u]=V.useState([]),[d,f]=V.useState(!1),[m,_]=V.useState(!0),[S,w]=V.useState(null),[P,O]=V.useState(!1),[R,C]=V.useState(null),[$,Q]=V.useState("plan"),[G,Z]=V.useState(""),[X,ie]=V.useState(!1),[k,A]=V.useState(!1),[N,j]=V.useState(""),[M,L]=V.useState({}),[x,Fe]=V.useState({}),[Oe,$e]=V.useState(""),[De,ae]=V.useState(""),ve="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";V.useEffect(()=>{async function ne(){if(e)try{const st=(await qa(e.uid)).data();if(!(st!=null&&st.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{_(!1)}}ne()},[e,t]);async function de(){f(!0);try{const ne=(e==null?void 0:e.uid)??"";if(!ne){u([]),Z("");return}const We=ne?await qa(ne):null,st=(We==null?void 0:We.data())??{},ct=ne?await iI(ne,"onboarding"):null,ht=ne?await h2():null,Je=((ht==null?void 0:ht.data())??{}).weights??{};L(Je),C((ct==null?void 0:ct.data())??null);let nn=i0(st.assignedCoachPhone??"");if(!nn&&st.assignedCoachId)try{const At=(await qa(st.assignedCoachId)).data();nn=i0(typeof(At==null?void 0:At.phone)=="string"?At.phone:"")}catch{nn=""}j(nn);const $t=new Map;let Fn=!1;try{const Be=await o2();if(Be!=null&&Be.ok&&Array.isArray(Be.plans))for(const At of Be.plans)$t.set(At.id,At)}catch{Fn=!0}if(Fn)try{const Be=await sI("client",ne);for(const At of b2(Be.docs))$t.set(At.id,At)}catch(Be){r(`Errore caricamento schede: ${kt(Be)}`)}const Ct=Array.from($t.values()).map(Be=>P2(Be,ne)).map(Be=>R2(Be,Je)).sort((Be,At)=>{const dr=new Date(String(Be.updatedAt??"")).getTime()||0;return(new Date(String(At.updatedAt??"")).getTime()||0)-dr});u(Ct),Ct.length>0?Z(Be=>Be&&Ct.some(At=>At.id===Be)?Be:Ct[0].id):Z("")}catch(ne){r(kt(ne))}finally{f(!1)}}V.useEffect(()=>{e&&(n==="client"||n===null)&&de()},[n,e==null?void 0:e.uid]);async function B(){A(!0);try{await tI(),await Tr().catch(()=>{}),t("/auth",{replace:!0})}catch(ne){r(kt(ne))}finally{A(!1),ie(!1)}}function U(ne,We){w({url:ne,label:We}),O(Sp(ne))}const ue=a.find(ne=>ne.id===G)??a[0],be=Tp(ue==null?void 0:ue.exercises),Se=N.length>6,ce=Se?lI(ve,N):"#",je=[{label:"Nome e cognome",value:R==null?void 0:R.fullName},{label:"E-mail",value:(R==null?void 0:R.email)??(e==null?void 0:e.email)},{label:"Telefono",value:R==null?void 0:R.phone},{label:"Et",value:R==null?void 0:R.age},{label:"Sesso",value:R==null?void 0:R.sex},{label:"Altezza",value:R!=null&&R.heightCm?`${R.heightCm} cm`:""},{label:"Peso",value:R!=null&&R.weightKg?`${R.weightKg} kg`:""},{label:"Obiettivo",value:R==null?void 0:R.objectivePrimary}].filter(ne=>(ne.value??"").toString().trim().length>0);V.useEffect(()=>{const ne={};for(const We of a)Tp(We.exercises).forEach((ct,ht)=>{ne[`${We.id}:${ht}`]=String(ct.weightKg||0)});Fe(ne)},[a]);async function Ve(ne,We,st){const ct=`${ne}:${We}`,ht=(x[ct]??String(st)).trim(),Nt=Number(ht);if(!Number.isFinite(Nt)||Nt<0){r("Inserisci un peso valido (numero >= 0).");return}$e(ct);try{await d2(ne,We,Nt),L(Je=>({...Je,[ne]:{...Je[ne]??{},[String(We)]:Nt}})),a2(ne,We,Nt).catch(()=>{}),u(Je=>Je.map(nn=>{if(nn.id!==ne)return nn;const Fn=Tp(nn.exercises).map((Ct,Be)=>Be===We?{...Ct,weightKg:Nt}:Ct);return{...nn,exercises:Fn}})),Fe(Je=>({...Je,[ct]:String(Nt)})),ae(""),s("Peso aggiornato.")}catch(Je){r(kt(Je))}finally{$e("")}}function Ge(ne,We,st){const ct=`${ne}:${We}`;Fe(ht=>({...ht,[ct]:ht[ct]??String(st||0)})),ae(ct)}return e?m?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Prepariamo la tua area"}),g.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):g.jsxs(uI,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:$,onSectionChange:ne=>Q(ne),headerAction:g.jsx("div",{className:"mobile-only",children:g.jsx("a",{className:`btn btn-whatsapp btn-block ${Se?"":"btn-disabled"}`.trim(),href:ce,onClick:ne=>{Se||ne.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[$==="plan"?g.jsxs(g.Fragment,{children:[g.jsxs("article",{className:"card desktop-only",children:[g.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),g.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${Se?"":"btn-disabled"}`.trim(),href:ce,onClick:ne=>{Se||ne.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),Se?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."})]}),g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"La tua scheda tecnica"}),ue?g.jsxs(g.Fragment,{children:[a.length>1?g.jsxs("label",{children:["Scegli scheda",g.jsx("select",{value:ue.id,onChange:ne=>Z(ne.target.value),children:a.map(ne=>g.jsx("option",{value:ne.id,children:ne.title||"Scheda senza titolo"},ne.id))})]}):null,g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Programma attivo"}),g.jsx("h3",{children:ue.title})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:ue.kind==="circuit"?"Circuito":"Serie e reps"})]}),(ue.warmup??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",ue.warmup]})}):null,(ue.notes??"").trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",ue.notes]})}):null,g.jsx("div",{className:"exercise-grid",children:be.map((ne,We)=>g.jsxs("article",{className:"exercise-card",children:[g.jsx("p",{className:"exercise-name",children:ne.name||`Esercizio ${We+1}`}),g.jsxs("div",{className:"exercise-meta",children:[ue.kind==="circuit"?g.jsxs("span",{children:[ne.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[ne.sets??"-"," serie"]}),g.jsxs("span",{children:[ne.reps||"-"," reps"]})]}),g.jsxs("span",{children:[ne.weightKg||0," kg"]}),g.jsxs("span",{children:[ne.restSeconds||0," sec recupero"]})]}),ne.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",ne.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,ne.advancedMethod&&(ne.advancedMethod==="rest_pause"?ne.restPauseNotes:ne.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",ne.advancedMethod==="rest_pause"?ne.restPauseNotes:ne.dropSetNotes]}):null,(()=>{const st=`${ue.id}:${We}`,ct=De===st,ht=Oe===st;return ct?g.jsxs("div",{className:"exercise-weight-edit-row",children:[g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:x[st]??String(ne.weightKg||0),onChange:Nt=>Fe(Je=>({...Je,[st]:Nt.target.value}))})]}),g.jsxs("div",{className:"exercise-weight-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:ht,onClick:()=>ae(""),children:"Annulla"}),g.jsx("button",{className:"btn",type:"button",disabled:ht,onClick:()=>void Ve(ue.id,We,ne.weightKg||0),children:ht?"Salvataggio...":"Salva"})]})]}):g.jsxs("div",{className:"exercise-weight-readonly",children:[g.jsxs("div",{children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:"Peso (kg)"})}),g.jsx("p",{className:"exercise-weight-value",children:ne.weightKg||0})]}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica peso esercizio",title:"Modifica peso",onClick:()=>Ge(ue.id,We,ne.weightKg||0),children:""})]})})(),ne.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",ne.notes]}):null,ne.mediaUrl?g.jsx("button",{className:"btn-link",type:"button",onClick:()=>U(ne.mediaUrl,ne.name||`Esercizio ${We+1}`),children:Ep(ne.mediaUrl)||r0(ne.mediaUrl)?"Apri video":Sp(ne.mediaUrl)?"Apri immagine":"Apri link"}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${We}`))})]}):g.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,$==="profile"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Profilo e anagrafica"}),je.length>0?g.jsx("div",{className:"client-info-block",children:je.map(ne=>g.jsxs("p",{className:"hint",children:[g.jsxs("strong",{children:[ne.label,":"]})," ",ne.value]},ne.label))}):g.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),g.jsx("a",{className:`btn btn-whatsapp btn-block ${Se?"":"btn-disabled"}`.trim(),href:ce,onClick:ne=>{Se||ne.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),Se?null:g.jsx("p",{className:"message",children:"Numero WhatsApp coach non ancora configurato."}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo perderai tutti i dati associati al tuo account, in linea con le policy aziendali."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>ie(!0),children:"Elimina il mio profilo"})]}):null,d?g.jsx("section",{className:"modal-overlay",role:"status","aria-live":"polite","aria-label":"Caricamento in corso",children:g.jsxs("article",{className:"card loading-overlay-card",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("p",{className:"hint",children:"Caricamento scheda..."})]})}):null,S?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ne=>{ne.currentTarget===ne.target&&(w(null),O(!1))},children:g.jsxs("article",{className:"card modal-card",onClick:ne=>ne.stopPropagation(),children:[g.jsx("h2",{children:S.label}),Ep(S.url)?g.jsx("iframe",{title:S.label,src:Ep(S.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Sp(S.url)?g.jsxs(g.Fragment,{children:[P?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:S.url,alt:S.label,className:"media-frame media-image",style:{display:P?"none":"block"},onLoad:()=>O(!1),onError:()=>O(!1)})]}):r0(S.url)?g.jsx("video",{src:S.url,controls:!0,className:"media-frame"}):g.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",g.jsx("a",{href:S.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{w(null),O(!1)},children:"Chiudi"})]})}):null,X?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:ne=>ne.currentTarget===ne.target&&ie(!1),children:g.jsxs("article",{className:"card modal-card",onClick:ne=>ne.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente account, anagrafica, scheda e dati collegati."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:k,onClick:()=>ie(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:k,onClick:()=>void B(),children:k?"Eliminazione...":"Conferma eliminazione"})]})]})}):null]}):g.jsx(ii,{to:"/auth",replace:!0})}function qo(n){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(n)}function x2(n,e){if(qo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cI(n){var e=x2(n,"string");return qo(e)=="symbol"?e:e+""}function ru(n,e,t){return(e=cI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s0(Object(t),!0).forEach(function(r){ru(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function N2(n){if(Array.isArray(n))return n}function O2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(_){m=!0,s=_}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function gm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function hI(n,e){if(n){if(typeof n=="string")return gm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gm(n,e):void 0}}function D2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ls(n,e){return N2(n)||O2(n,e)||hI(n,e)||D2()}function V2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function vs(n,e){if(n==null)return{};var t,r,s=V2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var M2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function L2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,_=n.onInputChange,S=n.onMenuClose,w=n.onMenuOpen,P=n.value,O=vs(n,M2),R=V.useState(d!==void 0?d:t),C=ls(R,2),$=C[0],Q=C[1],G=V.useState(f!==void 0?f:s),Z=ls(G,2),X=Z[0],ie=Z[1],k=V.useState(P!==void 0?P:u),A=ls(k,2),N=A[0],j=A[1],M=V.useCallback(function(ae,ve){typeof m=="function"&&m(ae,ve),j(ae)},[m]),L=V.useCallback(function(ae,ve){var de;typeof _=="function"&&(de=_(ae,ve)),Q(de!==void 0?de:ae)},[_]),x=V.useCallback(function(){typeof w=="function"&&w(),ie(!0)},[w]),Fe=V.useCallback(function(){typeof S=="function"&&S(),ie(!1)},[S]),Oe=d!==void 0?d:$,$e=f!==void 0?f:X,De=P!==void 0?P:N;return ke(ke({},O),{},{inputValue:Oe,menuIsOpen:$e,onChange:M,onInputChange:L,onMenuClose:Fe,onMenuOpen:x,value:De})}function xe(){return xe=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xe.apply(null,arguments)}function j2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,cI(r.key),r)}}function F2(n,e,t){return e&&o0(n.prototype,e),t&&o0(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function vm(n,e){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},vm(n,e)}function U2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vm(n,e)}function zh(n){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zh(n)}function dI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dI=function(){return!!n})()}function z2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $2(n,e){if(e&&(qo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z2(n)}function B2(n){var e=dI();return function(){var t,r=zh(n);if(e){var s=zh(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return $2(this,t)}}function H2(n){if(Array.isArray(n))return gm(n)}function W2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function q2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Og(n){return H2(n)||W2(n)||hI(n)||q2()}function K2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function G2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Q2=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(G2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=K2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),bn="-ms-",$h="-moz-",rt="-webkit-",fI="comm",Dg="rule",Vg="decl",X2="@import",pI="@keyframes",Y2="@layer",J2=Math.abs,Ad=String.fromCharCode,Z2=Object.assign;function eV(n,e){return gn(n,0)^45?(((e<<2^gn(n,0))<<2^gn(n,1))<<2^gn(n,2))<<2^gn(n,3):0}function mI(n){return n.trim()}function tV(n,e){return(n=e.exec(n))?n[0]:n}function it(n,e,t){return n.replace(e,t)}function ym(n,e){return n.indexOf(e)}function gn(n,e){return n.charCodeAt(e)|0}function Eu(n,e,t){return n.slice(e,t)}function Pi(n){return n.length}function Mg(n){return n.length}function Jc(n,e){return e.push(n),n}function nV(n,e){return n.map(e).join("")}var Pd=1,il=1,gI=0,ur=0,Kt=0,gl="";function Rd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:Pd,column:il,length:u,return:""}}function Xl(n,e){return Z2(Rd("",null,null,"",null,null,0),n,{length:-n.length},e)}function rV(){return Kt}function iV(){return Kt=ur>0?gn(gl,--ur):0,il--,Kt===10&&(il=1,Pd--),Kt}function Ir(){return Kt=ur<gI?gn(gl,ur++):0,il++,Kt===10&&(il=1,Pd++),Kt}function Mi(){return gn(gl,ur)}function mh(){return ur}function Uu(n,e){return Eu(gl,n,e)}function Su(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vI(n){return Pd=il=1,gI=Pi(gl=n),ur=0,[]}function yI(n){return gl="",n}function gh(n){return mI(Uu(ur-1,_m(n===91?n+2:n===40?n+1:n)))}function sV(n){for(;(Kt=Mi())&&Kt<33;)Ir();return Su(n)>2||Su(Kt)>3?"":" "}function oV(n,e){for(;--e&&Ir()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return Uu(n,mh()+(e<6&&Mi()==32&&Ir()==32))}function _m(n){for(;Ir();)switch(Kt){case n:return ur;case 34:case 39:n!==34&&n!==39&&_m(Kt);break;case 40:n===41&&_m(n);break;case 92:Ir();break}return ur}function aV(n,e){for(;Ir()&&n+Kt!==57;)if(n+Kt===84&&Mi()===47)break;return"/*"+Uu(e,ur-1)+"*"+Ad(n===47?n:Ir())}function lV(n){for(;!Su(Mi());)Ir();return Uu(n,ur)}function uV(n){return yI(vh("",null,null,null,[""],n=vI(n),0,[0],n))}function vh(n,e,t,r,s,a,u,d,f){for(var m=0,_=0,S=u,w=0,P=0,O=0,R=1,C=1,$=1,Q=0,G="",Z=s,X=a,ie=r,k=G;C;)switch(O=Q,Q=Ir()){case 40:if(O!=108&&gn(k,S-1)==58){ym(k+=it(gh(Q),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:k+=gh(Q);break;case 9:case 10:case 13:case 32:k+=sV(O);break;case 92:k+=oV(mh()-1,7);continue;case 47:switch(Mi()){case 42:case 47:Jc(cV(aV(Ir(),mh()),e,t),f);break;default:k+="/"}break;case 123*R:d[m++]=Pi(k)*$;case 125*R:case 59:case 0:switch(Q){case 0:case 125:C=0;case 59+_:$==-1&&(k=it(k,/\f/g,"")),P>0&&Pi(k)-S&&Jc(P>32?l0(k+";",r,t,S-1):l0(it(k," ","")+";",r,t,S-2),f);break;case 59:k+=";";default:if(Jc(ie=a0(k,e,t,m,_,s,d,G,Z=[],X=[],S),a),Q===123)if(_===0)vh(k,e,ie,ie,Z,a,S,d,X);else switch(w===99&&gn(k,3)===110?100:w){case 100:case 108:case 109:case 115:vh(n,ie,ie,r&&Jc(a0(n,ie,ie,0,0,s,d,G,s,Z=[],S),X),s,X,S,d,r?Z:X);break;default:vh(k,ie,ie,ie,[""],X,0,d,X)}}m=_=P=0,R=$=1,G=k="",S=u;break;case 58:S=1+Pi(k),P=O;default:if(R<1){if(Q==123)--R;else if(Q==125&&R++==0&&iV()==125)continue}switch(k+=Ad(Q),Q*R){case 38:$=_>0?1:(k+="\f",-1);break;case 44:d[m++]=(Pi(k)-1)*$,$=1;break;case 64:Mi()===45&&(k+=gh(Ir())),w=Mi(),_=S=Pi(G=k+=lV(mh())),Q++;break;case 45:O===45&&Pi(k)==2&&(R=0)}}return a}function a0(n,e,t,r,s,a,u,d,f,m,_){for(var S=s-1,w=s===0?a:[""],P=Mg(w),O=0,R=0,C=0;O<r;++O)for(var $=0,Q=Eu(n,S+1,S=J2(R=u[O])),G=n;$<P;++$)(G=mI(R>0?w[$]+" "+Q:it(Q,/&\f/g,w[$])))&&(f[C++]=G);return Rd(n,e,t,s===0?Dg:d,f,m,_)}function cV(n,e,t){return Rd(n,e,t,fI,Ad(rV()),Eu(n,2,-2),0)}function l0(n,e,t,r){return Rd(n,e,t,Vg,Eu(n,0,r),Eu(n,r+1,-1),r)}function Ka(n,e){for(var t="",r=Mg(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function hV(n,e,t,r){switch(n.type){case Y2:if(n.children.length)break;case X2:case Vg:return n.return=n.return||n.value;case fI:return"";case pI:return n.return=n.value+"{"+Ka(n.children,r)+"}";case Dg:n.value=n.props.join(",")}return Pi(t=Ka(n.children,r))?n.return=n.value+"{"+t+"}":""}function dV(n){var e=Mg(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function fV(n){return function(e){e.root||(e=e.return)&&n(e)}}function pV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var mV=function(e,t,r){for(var s=0,a=0;s=a,a=Mi(),s===38&&a===12&&(t[r]=1),!Su(a);)Ir();return Uu(e,ur)},gV=function(e,t){var r=-1,s=44;do switch(Su(s)){case 0:s===38&&Mi()===12&&(t[r]=1),e[r]+=mV(ur-1,t,r);break;case 2:e[r]+=gh(s);break;case 4:if(s===44){e[++r]=Mi()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Ad(s)}while(s=Ir());return e},vV=function(e,t){return yI(gV(vI(e),t))},u0=new WeakMap,yV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!u0.get(r))&&!s){u0.set(e,!0);for(var a=[],u=vV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var _=0;_<d.length;_++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[_]):d[_]+" "+u[f]}}},_V=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function _I(n,e){switch(eV(n,e)){case 5103:return rt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+n+$h+n+bn+n+n;case 6828:case 4268:return rt+n+bn+n+n;case 6165:return rt+n+bn+"flex-"+n+n;case 5187:return rt+n+it(n,/(\w+).+(:[^]+)/,rt+"box-$1$2"+bn+"flex-$1$2")+n;case 5443:return rt+n+bn+"flex-item-"+it(n,/flex-|-self/,"")+n;case 4675:return rt+n+bn+"flex-line-pack"+it(n,/align-content|flex-|-self/,"")+n;case 5548:return rt+n+bn+it(n,"shrink","negative")+n;case 5292:return rt+n+bn+it(n,"basis","preferred-size")+n;case 6060:return rt+"box-"+it(n,"-grow","")+rt+n+bn+it(n,"grow","positive")+n;case 4554:return rt+it(n,/([^-])(transform)/g,"$1"+rt+"$2")+n;case 6187:return it(it(it(n,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),n,"")+n;case 5495:case 3959:return it(n,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return it(it(n,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+bn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+n+n;case 4095:case 3583:case 4068:case 2532:return it(n,/(.+)-inline(.+)/,rt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pi(n)-1-e>6)switch(gn(n,e+1)){case 109:if(gn(n,e+4)!==45)break;case 102:return it(n,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+$h+(gn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~ym(n,"stretch")?_I(it(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(gn(n,e+1)!==115)break;case 6444:switch(gn(n,Pi(n)-3-(~ym(n,"!important")&&10))){case 107:return it(n,":",":"+rt)+n;case 101:return it(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(gn(n,14)===45?"inline-":"")+"box$3$1"+rt+"$2$3$1"+bn+"$2box$3")+n}break;case 5936:switch(gn(n,e+11)){case 114:return rt+n+bn+it(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return rt+n+bn+it(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return rt+n+bn+it(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return rt+n+bn+n+n}return n}var wV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Vg:e.return=_I(e.value,e.length);break;case pI:return Ka([Xl(e,{value:it(e.value,"@","@"+rt)})],s);case Dg:if(e.length)return nV(e.props,function(a){switch(tV(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ka([Xl(e,{props:[it(a,/:(read-\w+)/,":"+$h+"$1")]})],s);case"::placeholder":return Ka([Xl(e,{props:[it(a,/:(plac\w+)/,":"+rt+"input-$1")]}),Xl(e,{props:[it(a,/:(plac\w+)/,":"+$h+"$1")]}),Xl(e,{props:[it(a,/:(plac\w+)/,bn+"input-$1")]})],s)}return""})}},EV=[wV],SV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(R){var C=R.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var s=e.stylisPlugins||EV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(R){for(var C=R.getAttribute("data-emotion").split(" "),$=1;$<C.length;$++)a[C[$]]=!0;d.push(R)});var f,m=[yV,_V];{var _,S=[hV,fV(function(R){_.insert(R)})],w=dV(m.concat(s,S)),P=function(C){return Ka(uV(C),w)};f=function(C,$,Q,G){_=Q,P(C?C+"{"+$.styles+"}":$.styles),G&&(O.inserted[$.name]=!0)}}var O={key:t,sheet:new Q2({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return O.sheet.hydrate(d),O},Ip={exports:{}},ot={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function TV(){if(c0)return ot;c0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,S=n?Symbol.for("react.suspense"):60113,w=n?Symbol.for("react.suspense_list"):60120,P=n?Symbol.for("react.memo"):60115,O=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,C=n?Symbol.for("react.fundamental"):60117,$=n?Symbol.for("react.responder"):60118,Q=n?Symbol.for("react.scope"):60119;function G(X){if(typeof X=="object"&&X!==null){var ie=X.$$typeof;switch(ie){case e:switch(X=X.type,X){case f:case m:case r:case a:case s:case S:return X;default:switch(X=X&&X.$$typeof,X){case d:case _:case O:case P:case u:return X;default:return ie}}case t:return ie}}}function Z(X){return G(X)===m}return ot.AsyncMode=f,ot.ConcurrentMode=m,ot.ContextConsumer=d,ot.ContextProvider=u,ot.Element=e,ot.ForwardRef=_,ot.Fragment=r,ot.Lazy=O,ot.Memo=P,ot.Portal=t,ot.Profiler=a,ot.StrictMode=s,ot.Suspense=S,ot.isAsyncMode=function(X){return Z(X)||G(X)===f},ot.isConcurrentMode=Z,ot.isContextConsumer=function(X){return G(X)===d},ot.isContextProvider=function(X){return G(X)===u},ot.isElement=function(X){return typeof X=="object"&&X!==null&&X.$$typeof===e},ot.isForwardRef=function(X){return G(X)===_},ot.isFragment=function(X){return G(X)===r},ot.isLazy=function(X){return G(X)===O},ot.isMemo=function(X){return G(X)===P},ot.isPortal=function(X){return G(X)===t},ot.isProfiler=function(X){return G(X)===a},ot.isStrictMode=function(X){return G(X)===s},ot.isSuspense=function(X){return G(X)===S},ot.isValidElementType=function(X){return typeof X=="string"||typeof X=="function"||X===r||X===m||X===a||X===s||X===S||X===w||typeof X=="object"&&X!==null&&(X.$$typeof===O||X.$$typeof===P||X.$$typeof===u||X.$$typeof===d||X.$$typeof===_||X.$$typeof===C||X.$$typeof===$||X.$$typeof===Q||X.$$typeof===R)},ot.typeOf=G,ot}var h0;function IV(){return h0||(h0=1,Ip.exports=TV()),Ip.exports}var bp,d0;function bV(){if(d0)return bp;d0=1;var n=IV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(O){return n.isMemo(O)?s:a[O.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf,w=Object.prototype;function P(O,R,C){if(typeof R!="string"){if(w){var $=S(R);$&&$!==w&&P(O,$,C)}var Q=f(R);m&&(Q=Q.concat(m(R)));for(var G=u(O),Z=u(R),X=0;X<Q.length;++X){var ie=Q[X];if(!t[ie]&&!(C&&C[ie])&&!(Z&&Z[ie])&&!(G&&G[ie])){var k=_(R,ie);try{d(O,ie,k)}catch{}}}}return O}return bp=P,bp}bV();var CV=!0;function AV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var wI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||CV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},PV=function(e,t,r){wI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function RV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var kV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xV=/[A-Z]|^ms/g,NV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,EI=function(e){return e.charCodeAt(1)===45},f0=function(e){return e!=null&&typeof e!="boolean"},Cp=pV(function(n){return EI(n)?n:n.replace(xV,"-$&").toLowerCase()}),p0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(NV,function(r,s,a){return Ri={name:s,styles:a,next:Ri},s})}return kV[e]!==1&&!EI(e)&&typeof t=="number"&&t!==0?t+"px":t};function Tu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Ri={name:s.name,styles:s.styles,next:Ri},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)Ri={name:u.name,styles:u.styles,next:Ri},u=u.next;var d=a.styles+";";return d}return OV(n,e,t)}case"function":{if(n!==void 0){var f=Ri,m=t(n);return Ri=f,Tu(n,e,m)}break}}var _=t;return _}function OV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=Tu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;f0(d)&&(r+=Cp(a)+":"+p0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)f0(u[f])&&(r+=Cp(a)+":"+p0(a,u[f])+";");else{var m=Tu(n,e,u);switch(a){case"animation":case"animationName":{r+=Cp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var m0=/label:\s*([^\s;{]+)\s*(;|$)/g,Ri;function SI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Ri=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=Tu(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=Tu(t,e,n[d]),r){var f=a;s+=f[d]}m0.lastIndex=0;for(var m="",_;(_=m0.exec(s))!==null;)m+="-"+_[1];var S=RV(s)+m;return{name:S,styles:s,next:Ri}}var DV=function(e){return e()},VV=Vp.useInsertionEffect?Vp.useInsertionEffect:!1,MV=VV||DV,TI=V.createContext(typeof HTMLElement<"u"?SV({key:"css"}):null);TI.Provider;var LV=function(e){return V.forwardRef(function(t,r){var s=V.useContext(TI);return e(t,s,r)})},jV=V.createContext({}),Lg={}.hasOwnProperty,wm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",FV=function(e,t){var r={};for(var s in t)Lg.call(t,s)&&(r[s]=t[s]);return r[wm]=e,r},UV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return wI(t,r,s),MV(function(){return PV(t,r,s)}),null},zV=LV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[wm],a=[r],u="";typeof n.className=="string"?u=AV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=SI(a,void 0,V.useContext(jV));u+=e.key+"-"+d.name;var f={};for(var m in n)Lg.call(n,m)&&m!=="css"&&m!==wm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),V.createElement(V.Fragment,null,V.createElement(UV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),V.createElement(s,f))}),$V=zV,Ce=function(e,t){var r=arguments;if(t==null||!Lg.call(t,"css"))return V.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=$V,a[1]=FV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return V.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Ce||(Ce={}));function jg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return SI(e)}function BV(){var n=jg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function HV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const WV=Math.min,qV=Math.max,Bh=Math.round,Zc=Math.floor,Hh=n=>({x:n,y:n});function KV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function kd(){return typeof window<"u"}function II(n){return CI(n)?(n.nodeName||"").toLowerCase():"#document"}function ms(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function bI(n){var e;return(e=(CI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function CI(n){return kd()?n instanceof Node||n instanceof ms(n).Node:!1}function GV(n){return kd()?n instanceof Element||n instanceof ms(n).Element:!1}function Fg(n){return kd()?n instanceof HTMLElement||n instanceof ms(n).HTMLElement:!1}function g0(n){return!kd()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ms(n).ShadowRoot}const QV=new Set(["inline","contents"]);function AI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Ug(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!QV.has(s)}function XV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const YV=new Set(["html","body","#document"]);function JV(n){return YV.has(II(n))}function Ug(n){return ms(n).getComputedStyle(n)}function ZV(n){if(II(n)==="html")return n;const e=n.assignedSlot||n.parentNode||g0(n)&&n.host||bI(n);return g0(e)?e.host:e}function PI(n){const e=ZV(n);return JV(e)?n.ownerDocument?n.ownerDocument.body:n.body:Fg(e)&&AI(e)?e:PI(e)}function Wh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=PI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=ms(s);if(a){const d=Em(u);return e.concat(u,u.visualViewport||[],AI(s)?s:[],d&&t?Wh(d):[])}return e.concat(s,Wh(s,[],t))}function Em(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eM(n){const e=Ug(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fg(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Bh(t)!==a||Bh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function zg(n){return GV(n)?n:n.contextElement}function v0(n){const e=zg(n);if(!Fg(e))return Hh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=eM(e);let u=(a?Bh(t.width):t.width)/r,d=(a?Bh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const tM=Hh(0);function nM(n){const e=ms(n);return!XV()||!e.visualViewport?tM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rM(n,e,t){return!1}function y0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=zg(n);let u=Hh(1);e&&(u=v0(n));const d=rM()?nM(a):Hh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,_=s.width/u.x,S=s.height/u.y;if(a){const w=ms(a),P=r;let O=w,R=Em(O);for(;R&&r&&P!==O;){const C=v0(R),$=R.getBoundingClientRect(),Q=Ug(R),G=$.left+(R.clientLeft+parseFloat(Q.paddingLeft))*C.x,Z=$.top+(R.clientTop+parseFloat(Q.paddingTop))*C.y;f*=C.x,m*=C.y,_*=C.x,S*=C.y,f+=G,m+=Z,O=ms(R),R=Em(O)}}return KV({width:_,height:S,x:f,y:m})}function RI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function iM(n,e){let t=null,r;const s=bI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:_,top:S,width:w,height:P}=m;if(d||e(),!w||!P)return;const O=Zc(S),R=Zc(s.clientWidth-(_+w)),C=Zc(s.clientHeight-(S+P)),$=Zc(_),G={rootMargin:-O+"px "+-R+"px "+-C+"px "+-$+"px",threshold:qV(0,WV(1,f))||1};let Z=!0;function X(ie){const k=ie[0].intersectionRatio;if(k!==f){if(!Z)return u();k?u(!1,k):r=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!RI(m,n.getBoundingClientRect())&&u(),Z=!1}try{t=new IntersectionObserver(X,{...G,root:s.ownerDocument})}catch{t=new IntersectionObserver(X,G)}t.observe(n)}return u(!0),a}function sM(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=zg(n),_=s||a?[...m?Wh(m):[],...Wh(e)]:[];_.forEach($=>{s&&$.addEventListener("scroll",t,{passive:!0}),a&&$.addEventListener("resize",t)});const S=m&&d?iM(m,t):null;let w=-1,P=null;u&&(P=new ResizeObserver($=>{let[Q]=$;Q&&Q.target===m&&P&&(P.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var G;(G=P)==null||G.observe(e)})),t()}),m&&!f&&P.observe(m),P.observe(e));let O,R=f?y0(n):null;f&&C();function C(){const $=y0(n);R&&!RI(R,$)&&t(),R=$,O=requestAnimationFrame(C)}return t(),()=>{var $;_.forEach(Q=>{s&&Q.removeEventListener("scroll",t),a&&Q.removeEventListener("resize",t)}),S==null||S(),($=P)==null||$.disconnect(),P=null,f&&cancelAnimationFrame(O)}}var Sm=V.useLayoutEffect,oM=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],qh=function(){};function aM(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function lM(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(aM(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var _0=function(e){return vM(e)?e.filter(Boolean):qo(e)==="object"&&e!==null?[e]:[]},kI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=vs(e,oM);return ke({},t)},Mt=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function xd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function uM(n){return xd(n)?window.innerHeight:n.clientHeight}function xI(n){return xd(n)?window.pageYOffset:n.scrollTop}function Kh(n,e){if(xd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function cM(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function hM(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function eh(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qh,s=xI(n),a=e-s,u=10,d=0;function f(){d+=u;var m=hM(d,s,a,t);Kh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function w0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Kh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Kh(n,Math.max(e.offsetTop-s,0))}function dM(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function E0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function fM(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var NI=!1,pM={get passive(){return NI=!0}},th=typeof window<"u"?window:{};th.addEventListener&&th.removeEventListener&&(th.addEventListener("p",qh,pM),th.removeEventListener("p",qh,!1));var mM=NI;function gM(n){return n!=null}function vM(n){return Array.isArray(n)}function nh(n,e,t){return n?e:t}var yM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=ls(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=ls(d,2),m=f[0],_=f[1];return u[m]=_,u},{})},_M=["children","innerProps"],wM=["children","innerProps"];function EM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=cM(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var _=f.getBoundingClientRect(),S=_.height,w=t.getBoundingClientRect(),P=w.bottom,O=w.height,R=w.top,C=t.offsetParent.getBoundingClientRect(),$=C.top,Q=u?window.innerHeight:uM(f),G=xI(f),Z=parseInt(getComputedStyle(t).marginBottom,10),X=parseInt(getComputedStyle(t).marginTop,10),ie=$-X,k=Q-R,A=ie+G,N=S-G-R,j=P-Q+G+Z,M=G+R-X,L=160;switch(s){case"auto":case"bottom":if(k>=O)return{placement:"bottom",maxHeight:e};if(N>=O&&!u)return a&&eh(f,j,L),{placement:"bottom",maxHeight:e};if(!u&&N>=r||u&&k>=r){a&&eh(f,j,L);var x=u?k-Z:N-Z;return{placement:"bottom",maxHeight:x}}if(s==="auto"||u){var Fe=e,Oe=u?ie:A;return Oe>=r&&(Fe=Math.min(Oe-Z-d,e)),{placement:"top",maxHeight:Fe}}if(s==="bottom")return a&&Kh(f,j),{placement:"bottom",maxHeight:e};break;case"top":if(ie>=O)return{placement:"top",maxHeight:e};if(A>=O&&!u)return a&&eh(f,M,L),{placement:"top",maxHeight:e};if(!u&&A>=r||u&&ie>=r){var $e=e;return(!u&&A>=r||u&&ie>=r)&&($e=u?ie-X:A-X),a&&eh(f,M,L),{placement:"top",maxHeight:$e}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function SM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var OI=function(e){return e==="auto"?"bottom":e},TM=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return ke((r={label:"menu"},ru(r,SM(s),"100%"),ru(r,"position","absolute"),ru(r,"width","100%"),ru(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},DI=V.createContext(null),IM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=V.useContext(DI)||{},_=m.setPortalPlacement,S=V.useRef(null),w=V.useState(s),P=ls(w,2),O=P[0],R=P[1],C=V.useState(null),$=ls(C,2),Q=$[0],G=$[1],Z=f.spacing.controlHeight;return Sm(function(){var X=S.current;if(X){var ie=u==="fixed",k=d&&!ie,A=EM({maxHeight:s,menuEl:X,minHeight:r,placement:a,shouldScroll:k,isFixedPosition:ie,controlHeight:Z});R(A.maxHeight),G(A.placement),_==null||_(A.placement)}},[s,a,u,d,r,_,Z]),t({ref:S,placerProps:ke(ke({},e),{},{placement:Q||OI(a),maxHeight:O})})},bM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return Ce("div",xe({},Mt(e,"menu",{menu:!0}),{ref:r},s),t)},CM=bM,AM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return ke({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},PM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return Ce("div",xe({},Mt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},VI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return ke({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},RM=VI,kM=VI,xM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=vs(e,_M);return Ce("div",xe({},Mt(ke(ke({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},NM=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=vs(e,wM);return Ce("div",xe({},Mt(ke(ke({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},OM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},DM=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=V.useRef(null),m=V.useRef(null),_=V.useState(OI(u)),S=ls(_,2),w=S[0],P=S[1],O=V.useMemo(function(){return{setPortalPlacement:P}},[]),R=V.useState(null),C=ls(R,2),$=C[0],Q=C[1],G=V.useCallback(function(){if(s){var k=dM(s),A=d==="fixed"?0:window.pageYOffset,N=k[w]+A;(N!==($==null?void 0:$.offset)||k.left!==($==null?void 0:$.rect.left)||k.width!==($==null?void 0:$.rect.width))&&Q({offset:N,rect:k})}},[s,d,w,$==null?void 0:$.offset,$==null?void 0:$.rect.left,$==null?void 0:$.rect.width]);Sm(function(){G()},[G]);var Z=V.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=sM(s,f.current,G,{elementResize:"ResizeObserver"in window}))},[s,G]);Sm(function(){Z()},[Z]);var X=V.useCallback(function(k){f.current=k,Z()},[Z]);if(!t&&d!=="fixed"||!$)return null;var ie=Ce("div",xe({ref:X},Mt(ke(ke({},e),{},{offset:$.offset,position:d,rect:$.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Ce(DI.Provider,{value:O},t?fC.createPortal(ie,t):ie)},VM=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},MM=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return Ce("div",xe({},Mt(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},LM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return ke({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},jM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return Ce("div",xe({},Mt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},FM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},UM=function(e){var t=e.children,r=e.innerProps;return Ce("div",xe({},Mt(e,"indicatorsContainer",{indicators:!0}),r),t)},S0,zM=["size"],$M=["innerProps","isRtl","size"],BM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},MI=function(e){var t=e.size,r=vs(e,zM);return Ce("svg",xe({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:BM},r))},$g=function(e){return Ce(MI,xe({size:20},e),Ce("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},LI=function(e){return Ce(MI,xe({size:20},e),Ce("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},jI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return ke({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},HM=jI,WM=function(e){var t=e.children,r=e.innerProps;return Ce("div",xe({},Mt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ce(LI,null))},qM=jI,KM=function(e){var t=e.children,r=e.innerProps;return Ce("div",xe({},Mt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ce($g,null))},GM=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return ke({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},QM=function(e){var t=e.innerProps;return Ce("span",xe({},t,Mt(e,"indicatorSeparator",{"indicator-separator":!0})))},XM=BV(S0||(S0=HV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),YM=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return ke({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},Ap=function(e){var t=e.delay,r=e.offset;return Ce("span",{css:jg({animation:"".concat(XM," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},JM=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=vs(e,$M);return Ce("div",xe({},Mt(ke(ke({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ce(Ap,{delay:0,offset:r}),Ce(Ap,{delay:160,offset:!0}),Ce(Ap,{delay:320,offset:!r}))},ZM=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return ke({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},eL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return Ce("div",xe({ref:a},Mt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},tL=eL,nL=["data"],rL=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},iL=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,_=e.theme,S=e.selectProps;return Ce("div",xe({},Mt(e,"group",{group:!0}),f),Ce(u,xe({},d,{selectProps:S,theme:_,getStyles:s,getClassNames:a,cx:r}),m),Ce("div",null,t))},sL=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return ke({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},oL=function(e){var t=kI(e);t.data;var r=vs(t,nL);return Ce("div",xe({},Mt(e,"groupHeading",{"group-heading":!0}),r))},aL=iL,lL=["innerRef","isDisabled","isHidden","inputClassName"],uL=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return ke(ke({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},cL),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},FI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},cL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ke({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},FI)},hL=function(e){return ke({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},FI)},dL=function(e){var t=e.cx,r=e.value,s=kI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=vs(s,lL);return Ce("div",xe({},Mt(e,"input",{"input-container":!0}),{"data-value":r||""}),Ce("input",xe({className:t({input:!0},f),ref:a,style:hL(d),disabled:u},m)))},fL=dL,pL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return ke({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},mL=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return ke({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},gL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return ke({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},UI=function(e){var t=e.children,r=e.innerProps;return Ce("div",r,t)},vL=UI,yL=UI;function _L(n){var e=n.children,t=n.innerProps;return Ce("div",xe({role:"button"},t),e||Ce($g,{size:14}))}var wL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,_=r.Label,S=r.Remove;return Ce(m,{data:s,innerProps:ke(ke({},Mt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},Ce(_,{data:s,innerProps:ke({},Mt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),Ce(S,{data:s,innerProps:ke(ke({},Mt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},EL=wL,SL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return ke({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},TL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return Ce("div",xe({},Mt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},IL=TL,bL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return ke({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},CL=function(e){var t=e.children,r=e.innerProps;return Ce("div",xe({},Mt(e,"placeholder",{placeholder:!0}),r),t)},AL=CL,PL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return ke({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},RL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return Ce("div",xe({},Mt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},kL=RL,xL={ClearIndicator:KM,Control:tL,DropdownIndicator:WM,DownChevron:LI,CrossIcon:$g,Group:aL,GroupHeading:oL,IndicatorsContainer:UM,IndicatorSeparator:QM,Input:fL,LoadingIndicator:JM,Menu:CM,MenuList:PM,MenuPortal:DM,LoadingMessage:NM,NoOptionsMessage:xM,MultiValue:EL,MultiValueContainer:vL,MultiValueLabel:yL,MultiValueRemove:_L,Option:IL,Placeholder:AL,SelectContainer:MM,SingleValue:kL,ValueContainer:jM},NL=function(e){return ke(ke({},xL),e.components)},T0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function OL(n,e){return!!(n===e||T0(n)&&T0(e))}function DL(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!OL(n[t],e[t]))return!1;return!0}function VL(n,e){e===void 0&&(e=DL);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var ML={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},LL=function(e){return Ce("span",xe({css:ML},e))},I0=LL,jL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,_=e.isAppleDevice,S=function(R,C){return R&&R.length?"".concat(R.indexOf(C)+1," of ").concat(R.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(S(d,r),".");if(t==="menu"&&_){var w=f?" disabled":"",P="".concat(m?" selected":"").concat(w);return"".concat(u).concat(P,", ").concat(S(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},FL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,_=e.isAppleDevice,S=f.ariaLiveMessages,w=f.getOptionLabel,P=f.inputValue,O=f.isMulti,R=f.isOptionDisabled,C=f.isSearchable,$=f.menuIsOpen,Q=f.options,G=f.screenReaderStatus,Z=f.tabSelectsValue,X=f.isLoading,ie=f["aria-label"],k=f["aria-live"],A=V.useMemo(function(){return ke(ke({},jL),S||{})},[S]),N=V.useMemo(function(){var Oe="";if(t&&A.onChange){var $e=t.option,De=t.options,ae=t.removedValue,ve=t.removedValues,de=t.value,B=function(Ve){return Array.isArray(Ve)?null:Ve},U=ae||$e||B(de),ue=U?w(U):"",be=De||ve||void 0,Se=be?be.map(w):[],ce=ke({isDisabled:U&&R(U,d),label:ue,labels:Se},t);Oe=A.onChange(ce)}return Oe},[t,A,R,d,w]),j=V.useMemo(function(){var Oe="",$e=r||s,De=!!(r&&d&&d.includes(r));if($e&&A.onFocus){var ae={focused:$e,label:w($e),isDisabled:R($e,d),isSelected:De,options:a,context:$e===r?"menu":"value",selectValue:d,isAppleDevice:_};Oe=A.onFocus(ae)}return Oe},[r,s,w,R,A,a,d,_]),M=V.useMemo(function(){var Oe="";if($&&Q.length&&!X&&A.onFilter){var $e=G({count:a.length});Oe=A.onFilter({inputValue:P,resultsMessage:$e})}return Oe},[a,P,$,A,Q,G,X]),L=(t==null?void 0:t.action)==="initial-input-focus",x=V.useMemo(function(){var Oe="";if(A.guidance){var $e=s?"value":$?"menu":"input";Oe=A.guidance({"aria-label":ie,context:$e,isDisabled:r&&R(r,d),isMulti:O,isSearchable:C,tabSelectsValue:Z,isInitialFocus:L})}return Oe},[ie,r,s,O,R,C,$,A,d,Z,L]),Fe=Ce(V.Fragment,null,Ce("span",{id:"aria-selection"},N),Ce("span",{id:"aria-focused"},j),Ce("span",{id:"aria-results"},M),Ce("span",{id:"aria-guidance"},x));return Ce(V.Fragment,null,Ce(I0,{id:m},L&&Fe),Ce(I0,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!L&&Fe))},UL=FL,Tm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],zL=new RegExp("["+Tm.map(function(n){return n.letters}).join("")+"]","g"),zI={};for(var Pp=0;Pp<Tm.length;Pp++)for(var Rp=Tm[Pp],kp=0;kp<Rp.letters.length;kp++)zI[Rp.letters[kp]]=Rp.base;var $I=function(e){return e.replace(zL,function(t){return zI[t]})},$L=VL($I),b0=function(e){return e.replace(/^\s+|\s+$/g,"")},BL=function(e){return"".concat(e.label," ").concat(e.value)},HL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=ke({ignoreCase:!0,ignoreAccents:!0,stringify:BL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,_=f?b0(r):r,S=f?b0(d(t)):d(t);return a&&(_=_.toLowerCase(),S=S.toLowerCase()),u&&(_=$L(_),S=$I(S)),m==="start"?S.substr(0,_.length)===_:S.indexOf(_)>-1}},WL=["innerRef"];function qL(n){var e=n.innerRef,t=vs(n,WL),r=yM(t,"onExited","in","enter","exit","appear");return Ce("input",xe({ref:e},r,{css:jg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var KL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function GL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=V.useRef(!1),d=V.useRef(!1),f=V.useRef(0),m=V.useRef(null),_=V.useCallback(function(C,$){if(m.current!==null){var Q=m.current,G=Q.scrollTop,Z=Q.scrollHeight,X=Q.clientHeight,ie=m.current,k=$>0,A=Z-X-G,N=!1;A>$&&u.current&&(r&&r(C),u.current=!1),k&&d.current&&(a&&a(C),d.current=!1),k&&$>A?(t&&!u.current&&t(C),ie.scrollTop=Z,N=!0,u.current=!0):!k&&-$>G&&(s&&!d.current&&s(C),ie.scrollTop=0,N=!0,d.current=!0),N&&KL(C)}},[t,r,s,a]),S=V.useCallback(function(C){_(C,C.deltaY)},[_]),w=V.useCallback(function(C){f.current=C.changedTouches[0].clientY},[]),P=V.useCallback(function(C){var $=f.current-C.changedTouches[0].clientY;_(C,$)},[_]),O=V.useCallback(function(C){if(C){var $=mM?{passive:!1}:!1;C.addEventListener("wheel",S,$),C.addEventListener("touchstart",w,$),C.addEventListener("touchmove",P,$)}},[P,w,S]),R=V.useCallback(function(C){C&&(C.removeEventListener("wheel",S,!1),C.removeEventListener("touchstart",w,!1),C.removeEventListener("touchmove",P,!1))},[P,w,S]);return V.useEffect(function(){if(e){var C=m.current;return O(C),function(){R(C)}}},[e,O,R]),function(C){m.current=C}}var C0=["boxSizing","height","overflow","paddingRight","position"],A0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function P0(n){n.cancelable&&n.preventDefault()}function R0(n){n.stopPropagation()}function k0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function x0(){return"ontouchstart"in window||navigator.maxTouchPoints}var N0=!!(typeof window<"u"&&window.document&&window.document.createElement),Yl=0,Da={capture:!1,passive:!1};function QL(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=V.useRef({}),a=V.useRef(null),u=V.useCallback(function(f){if(N0){var m=document.body,_=m&&m.style;if(r&&C0.forEach(function(O){var R=_&&_[O];s.current[O]=R}),r&&Yl<1){var S=parseInt(s.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,P=window.innerWidth-w+S||0;Object.keys(A0).forEach(function(O){var R=A0[O];_&&(_[O]=R)}),_&&(_.paddingRight="".concat(P,"px"))}m&&x0()&&(m.addEventListener("touchmove",P0,Da),f&&(f.addEventListener("touchstart",k0,Da),f.addEventListener("touchmove",R0,Da))),Yl+=1}},[r]),d=V.useCallback(function(f){if(N0){var m=document.body,_=m&&m.style;Yl=Math.max(Yl-1,0),r&&Yl<1&&C0.forEach(function(S){var w=s.current[S];_&&(_[S]=w)}),m&&x0()&&(m.removeEventListener("touchmove",P0,Da),f&&(f.removeEventListener("touchstart",k0,Da),f.removeEventListener("touchmove",R0,Da)))}},[r]);return V.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var XL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},YL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function JL(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=GL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),_=QL({isEnabled:t}),S=function(P){m(P),_(P)};return Ce(V.Fragment,null,t&&Ce("div",{onClick:XL,css:YL}),e(S))}var ZL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ej=function(e){var t=e.name,r=e.onFocus;return Ce("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:ZL,value:"",onChange:function(){}})},tj=ej;function Bg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function nj(){return Bg(/^iPhone/i)}function BI(){return Bg(/^Mac/i)}function rj(){return Bg(/^iPad/i)||BI()&&navigator.maxTouchPoints>1}function ij(){return nj()||rj()}function sj(){return BI()||ij()}var oj=function(e){return e.label},aj=function(e){return e.label},lj=function(e){return e.value},uj=function(e){return!!e.isDisabled},cj={clearIndicator:qM,container:VM,control:ZM,dropdownIndicator:HM,group:rL,groupHeading:sL,indicatorsContainer:FM,indicatorSeparator:GM,input:uL,loadingIndicator:YM,loadingMessage:kM,menu:TM,menuList:AM,menuPortal:OM,multiValue:pL,multiValueLabel:mL,multiValueRemove:gL,noOptionsMessage:RM,option:SL,placeholder:bL,singleValue:PL,valueContainer:LM},hj={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dj=4,HI=4,fj=38,pj=HI*2,mj={baseUnit:HI,controlHeight:fj,menuGutter:pj},xp={borderRadius:dj,colors:hj,spacing:mj},gj={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:E0(),captureMenuScroll:!E0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:HL(),formatGroupLabel:oj,getOptionLabel:aj,getOptionValue:lj,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:uj,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!fM(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function O0(n,e,t,r){var s=KI(n,e,t),a=GI(n,e,t),u=qI(n,e),d=Gh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function yh(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return O0(n,u,e,d)}).filter(function(u){return V0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=O0(n,t,e,r);return V0(n,a)?a:void 0}).filter(gM)}function WI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Og(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function D0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Og(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function vj(n,e){return WI(yh(n,e))}function V0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!XI(n)||!a)&&QI(n,{label:u,value:d,data:s},r)}function yj(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function _j(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Np=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},qI=function(e,t){return e.getOptionLabel(t)},Gh=function(e,t){return e.getOptionValue(t)};function KI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function GI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Gh(n,e);return t.some(function(s){return Gh(n,s)===r})}function QI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var XI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},wj=1,YI=(function(n){U2(t,n);var e=B2(t);function t(r){var s;if(j2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var _=s.props,S=_.onChange,w=_.name;m.name=w,s.ariaOnChange(f,m),S(f,m)},s.setValue=function(f,m,_){var S=s.props,w=S.closeMenuOnSelect,P=S.isMulti,O=S.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:O}),w&&(s.setState({inputIsHiddenAfterUpdate:!P}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:_})},s.selectOption=function(f){var m=s.props,_=m.blurInputOnSelect,S=m.isMulti,w=m.name,P=s.state.selectValue,O=S&&s.isOptionSelected(f,P),R=s.isOptionDisabled(f,P);if(O){var C=s.getOptionValue(f);s.setValue(P.filter(function($){return s.getOptionValue($)!==C}),"deselect-option",f)}else if(!R)S?s.setValue([].concat(Og(P),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:w});return}_&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,_=s.state.selectValue,S=s.getOptionValue(f),w=_.filter(function(O){return s.getOptionValue(O)!==S}),P=nh(m,w,w[0]||null);s.onChange(P,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(nh(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,_=m[m.length-1],S=m.slice(0,m.length-1),w=nh(f,S,S[0]||null);_&&s.onChange(w,{action:"pop-value",removedValue:_})},s.getFocusedOptionId=function(f){return Np(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return D0(yh(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return lM.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return qI(s.props,f)},s.getOptionValue=function(f){return Gh(s.props,f)},s.getStyles=function(f,m){var _=s.props.unstyled,S=cj[f](m,_);S.boxSizing="border-box";var w=s.props.styles[f];return w?w(S,m):S},s.getClassNames=function(f,m){var _,S;return(_=(S=s.props.classNames)[f])===null||_===void 0?void 0:_.call(S,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return NL(s.props)},s.buildCategorizedOptions=function(){return yh(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return WI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:ke({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,_=m.isMulti,S=m.menuIsOpen;s.focusInput(),S?(s.setState({inputIsHiddenAfterUpdate:!_}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&xd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,_=m&&m.item(0);_&&(s.initialTouchX=_.clientX,s.initialTouchY=_.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,_=m&&m.item(0);if(_){var S=Math.abs(_.clientX-s.initialTouchX),w=Math.abs(_.clientY-s.initialTouchY),P=5;s.userIsDragging=S>P||w>P}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,_=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(_,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),_=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:_>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return XI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,_=m.isMulti,S=m.backspaceRemovesValue,w=m.escapeClearsValue,P=m.inputValue,O=m.isClearable,R=m.isDisabled,C=m.menuIsOpen,$=m.onKeyDown,Q=m.tabSelectsValue,G=m.openMenuOnFocus,Z=s.state,X=Z.focusedOption,ie=Z.focusedValue,k=Z.selectValue;if(!R&&!(typeof $=="function"&&($(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!_||P)return;s.focusValue("previous");break;case"ArrowRight":if(!_||P)return;s.focusValue("next");break;case"Delete":case"Backspace":if(P)return;if(ie)s.removeValue(ie);else{if(!S)return;_?s.popValue():O&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!C||!Q||!X||G&&s.isOptionSelected(X,k))return;s.selectOption(X);break;case"Enter":if(f.keyCode===229)break;if(C){if(!X||s.isComposing)return;s.selectOption(X);break}return;case"Escape":C?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:P}),s.onMenuClose()):O&&w&&s.clearValue();break;case" ":if(P)return;if(!C){s.openMenu("first");break}if(!X)return;s.selectOption(X);break;case"ArrowUp":C?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":C?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!C)return;s.focusOption("pageup");break;case"PageDown":if(!C)return;s.focusOption("pagedown");break;case"Home":if(!C)return;s.focusOption("first");break;case"End":if(!C)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++wj),s.state.selectValue=_0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=Np(a,u[d])}return s}return F2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&w0(this.menuListRef,this.focusedOptionRef),sj()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(w0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),_=s==="first"?0:m.length-1;if(!this.props.isMulti){var S=m.indexOf(d[0]);S>-1&&(_=S)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[_],focusedOptionId:this.getFocusedOptionId(m[_])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,_=-1;if(u.length){switch(s){case"previous":f===0?_=0:f===-1?_=m:_=f-1;break;case"next":f>-1&&f<m&&(_=f+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:u[_]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xp):ke(ke({},xp),this.props.theme):xp})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,_=this.setValue,S=this.props,w=S.isMulti,P=S.isRtl,O=S.options,R=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:R,isMulti:w,isRtl:P,options:O,selectOption:m,selectProps:S,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return KI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return GI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return QI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,_=s.form,S=s.menuIsOpen,w=s.required,P=this.getComponents(),O=P.Input,R=this.state,C=R.inputIsHidden,$=R.ariaSelection,Q=this.commonProps,G=d||this.getElementId("input"),Z=ke(ke(ke({"aria-autocomplete":"list","aria-expanded":S,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},S&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?($==null?void 0:$.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?V.createElement(O,xe({},Q,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:G,innerRef:this.getInputRef,isDisabled:a,isHidden:C,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:_,type:"text",value:f},Z)):V.createElement(qL,xe({id:G,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:qh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:_,value:""},Z))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,_=a.SingleValue,S=a.Placeholder,w=this.commonProps,P=this.props,O=P.controlShouldRenderValue,R=P.isDisabled,C=P.isMulti,$=P.inputValue,Q=P.placeholder,G=this.state,Z=G.selectValue,X=G.focusedValue,ie=G.isFocused;if(!this.hasValue()||!O)return $?null:V.createElement(S,xe({},w,{key:"placeholder",isDisabled:R,isFocused:ie,innerProps:{id:this.getElementId("placeholder")}}),Q);if(C)return Z.map(function(A,N){var j=A===X,M="".concat(s.getOptionLabel(A),"-").concat(s.getOptionValue(A));return V.createElement(u,xe({},w,{components:{Container:d,Label:f,Remove:m},isFocused:j,isDisabled:R,key:M,index:N,removeProps:{onClick:function(){return s.removeValue(A)},onTouchEnd:function(){return s.removeValue(A)},onMouseDown:function(x){x.preventDefault()}},data:A}),s.formatOptionLabel(A,"value"))});if($)return null;var k=Z[0];return V.createElement(_,xe({},w,{data:k,isDisabled:R}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:S,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,_=this.state.isFocused;if(!a||!m)return null;var S={"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:S,isDisabled:f,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return V.createElement(u,xe({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,xe({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,_=a.MenuPortal,S=a.LoadingMessage,w=a.NoOptionsMessage,P=a.Option,O=this.commonProps,R=this.state.focusedOption,C=this.props,$=C.captureMenuScroll,Q=C.inputValue,G=C.isLoading,Z=C.loadingMessage,X=C.minMenuHeight,ie=C.maxMenuHeight,k=C.menuIsOpen,A=C.menuPlacement,N=C.menuPosition,j=C.menuPortalTarget,M=C.menuShouldBlockScroll,L=C.menuShouldScrollIntoView,x=C.noOptionsMessage,Fe=C.onMenuScrollToTop,Oe=C.onMenuScrollToBottom;if(!k)return null;var $e=function(ue,be){var Se=ue.type,ce=ue.data,je=ue.isDisabled,Ve=ue.isSelected,Ge=ue.label,ne=ue.value,We=R===ce,st=je?void 0:function(){return s.onOptionHover(ce)},ct=je?void 0:function(){return s.selectOption(ce)},ht="".concat(s.getElementId("option"),"-").concat(be),Nt={id:ht,onClick:ct,onMouseMove:st,onMouseOver:st,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:Ve};return V.createElement(P,xe({},O,{innerProps:Nt,data:ce,isDisabled:je,isSelected:Ve,key:ht,label:Ge,type:Se,value:ne,isFocused:We,innerRef:We?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(ue.data,"menu"))},De;if(this.hasOptions())De=this.getCategorizedOptions().map(function(U){if(U.type==="group"){var ue=U.data,be=U.options,Se=U.index,ce="".concat(s.getElementId("group"),"-").concat(Se),je="".concat(ce,"-heading");return V.createElement(u,xe({},O,{key:ce,data:ue,options:be,Heading:d,headingProps:{id:je,data:U.data},label:s.formatGroupLabel(U.data)}),U.options.map(function(Ve){return $e(Ve,"".concat(Se,"-").concat(Ve.index))}))}else if(U.type==="option")return $e(U,"".concat(U.index))});else if(G){var ae=Z({inputValue:Q});if(ae===null)return null;De=V.createElement(S,O,ae)}else{var ve=x({inputValue:Q});if(ve===null)return null;De=V.createElement(w,O,ve)}var de={minMenuHeight:X,maxMenuHeight:ie,menuPlacement:A,menuPosition:N,menuShouldScrollIntoView:L},B=V.createElement(IM,xe({},O,de),function(U){var ue=U.ref,be=U.placerProps,Se=be.placement,ce=be.maxHeight;return V.createElement(f,xe({},O,de,{innerRef:ue,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:G,placement:Se}),V.createElement(JL,{captureEnabled:$,onTopArrive:Fe,onBottomArrive:Oe,lockEnabled:M},function(je){return V.createElement(m,xe({},O,{innerRef:function(Ge){s.getMenuListRef(Ge),je(Ge)},innerProps:{role:"listbox","aria-multiselectable":O.isMulti,id:s.getElementId("listbox")},isLoading:G,maxHeight:ce,focusedOption:R}),De)}))});return j||N==="fixed"?V.createElement(_,xe({},O,{appendTo:j,controlElement:this.controlRef,menuPlacement:A,menuPosition:N}),B):B}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,_=a.required,S=this.state.selectValue;if(_&&!this.hasValue()&&!d)return V.createElement(tj,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var w=S.map(function(R){return s.getOptionValue(R)}).join(u);return V.createElement("input",{name:m,type:"hidden",value:w})}else{var P=S.length>0?S.map(function(R,C){return V.createElement("input",{key:"i-".concat(C),name:m,type:"hidden",value:s.getOptionValue(R)})}):V.createElement("input",{name:m,type:"hidden",value:""});return V.createElement("div",null,P)}else{var O=S[0]?this.getOptionValue(S[0]):"";return V.createElement("input",{name:m,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,_=a.selectValue,S=this.getFocusableOptions();return V.createElement(UL,xe({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:_,focusableOptions:S,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,_=m.className,S=m.id,w=m.isDisabled,P=m.menuIsOpen,O=this.state.isFocused,R=this.commonProps=this.getCommonProps();return V.createElement(d,xe({},R,{className:_,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:O}),this.renderLiveRegion(),V.createElement(a,xe({},R,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:O,menuIsOpen:P}),V.createElement(f,xe({},R,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),V.createElement(u,xe({},R,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,_=a.isFocused,S=a.prevWasFocused,w=a.instancePrefix,P=s.options,O=s.value,R=s.menuIsOpen,C=s.inputValue,$=s.isMulti,Q=_0(O),G={};if(u&&(O!==u.value||P!==u.options||R!==u.menuIsOpen||C!==u.inputValue)){var Z=R?vj(s,Q):[],X=R?D0(yh(s,Q),"".concat(w,"-option")):[],ie=d?yj(a,Q):null,k=_j(a,Z),A=Np(X,k);G={selectValue:Q,focusedOption:k,focusedOptionId:A,focusableOptionsWithIds:X,focusedValue:ie,clearFocusValueOnUpdate:!1}}var N=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},j=m,M=_&&S;return _&&!M&&(j={value:nh($,Q,Q[0]||null),options:Q,action:"initial-input-focus"},M=!S),(m==null?void 0:m.action)==="initial-input-focus"&&(j=null),ke(ke(ke({},G),N),{},{prevProps:s,ariaSelection:j,prevWasFocused:M})}}]),t})(V.Component);YI.defaultProps=gj;var Ej=V.forwardRef(function(n,e){var t=L2(n);return V.createElement(YI,xe({ref:e},t))}),M0=Ej;const Jl=["Anagrafica","Stato fisico","Obiettivi"];function we(n){return typeof n=="string"?n:n==null?"":String(n)}function rh(n){const e=we(n.id).trim(),t=we(n.uid).trim();return e||t}function Ua(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e,r=Number(we(t.weight).replace(/[^\d.-]/g,"")),s=we(t.advancedMethod).trim(),a=s==="rest_pause"||s==="drop_set"?s:"",u=we(t.advancedMethodNotes),d=we(t.restPauseNotes),f=we(t.dropSetNotes);return{name:we(t.name),notes:we(t.notes),advancedMethod:a,advancedMethodNotes:u,restPauseNotes:d||(a==="rest_pause"?u:""),dropSetNotes:f||(a==="drop_set"?u:""),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,workValue:Number(t.workValue??t.reps??10)||10,weightKg:Number(t.weightKg??r??0)||0,restSeconds:Number(t.restSeconds??60)||60,mediaUrl:we(t.mediaUrl)}}).filter(e=>!!e):[]}function bt(n){return we(n).trim()||"Non compilato"}function Sj(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function Tj(n,e){const t=Sj(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function L0(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function ih(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function $s(){return{name:"",notes:"",advancedMethod:"",advancedMethodNotes:"",restPauseNotes:"",dropSetNotes:"",sets:3,reps:10,workValue:10,weightKg:0,restSeconds:60,mediaUrl:""}}function Ij(n){return n.name.trim().length>0||n.notes.trim().length>0||n.advancedMethod.trim().length>0||n.advancedMethodNotes.trim().length>0||n.restPauseNotes.trim().length>0||n.dropSetNotes.trim().length>0||n.mediaUrl.trim().length>0||n.sets!==3||n.reps!==10||n.workValue!==10||n.weightKg>0||n.restSeconds!==60}function JI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function j0(n,e){const t=JI(e);return n?{...t,fullName:we(n.fullName).trim()||t.fullName,age:we(n.age).trim(),sex:we(n.sex).trim(),email:we(n.email).trim()||t.email,phone:we(n.phone).trim(),discoverySource:we(n.discoverySource).trim(),heightCm:we(n.heightCm).trim(),weightKg:we(n.weightKg).trim(),pastProgram:we(n.pastProgram).trim(),trainingFrequency:we(n.trainingFrequency).trim(),workoutDuration:we(n.workoutDuration).trim(),workoutLocation:we(n.workoutLocation).trim(),equipment:we(n.equipment).trim(),trainingTypeHistory:we(n.trainingTypeHistory).trim(),hasInjuries:we(n.hasInjuries).trim(),injuryDetails:we(n.injuryDetails).trim(),objectivePrimary:we(n.objectivePrimary).trim(),objectiveReason:we(n.objectiveReason).trim(),expectedTimeline:we(n.expectedTimeline).trim(),supportPreference:we(n.supportPreference).trim(),supportPreferenceOther:we(n.supportPreferenceOther).trim(),investmentRange:we(n.investmentRange).trim(),whatBlockedSoFar:we(n.whatBlockedSoFar).trim(),oneThingToImprove:we(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:we(n.riskIfNoChange).trim(),readiness:we(n.readiness).trim(),notes:we(n.notes).trim()}:t}function bj(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function Va(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function Op(n){if(!n)return null;if(typeof n=="string"){const e=new Date(n);return Number.isNaN(e.getTime())?null:e.toISOString()}if(n instanceof Date)return Number.isNaN(n.getTime())?null:n.toISOString();if(typeof n=="object"&&n&&"toDate"in n&&typeof n.toDate=="function"){const e=n.toDate();return Number.isNaN(e.getTime())?null:e.toISOString()}return null}function F0(n){return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function U0(n){switch(n){case"trial_pending":return"Prova da attivare";case"trial_active":return"Prova attiva";case"active_paid":return"Abbonamento attivo";case"expired":return"Scaduto";case"disabled":return"Disattivato";case"supervisor_active":return"Supervisor attivo";default:return"Non disponibile"}}function iu(n){if(!n)return null;const e=new Date(n).getTime();return Number.isNaN(e)?null:e}function Dp(n){return n.status==="trial_active"?n.trialEndsAt??n.expiresAt??n.subscriptionEndsAt??null:n.status==="active_paid"?n.subscriptionEndsAt??n.expiresAt??n.trialEndsAt??null:n.expiresAt??n.trialEndsAt??n.subscriptionEndsAt??null}function Cj(n,e){if(n==="expired")return{label:"Scaduto",tone:"danger"};const t=iu(e);if(!t)return null;const r=Date.now();if(t<=r)return{label:"Scaduto",tone:"danger"};const s=10080*60*1e3;return t-r<=s?{label:"In scadenza",tone:"warning"}:null}function Aj(n,e){const t=n.clientWeightOverrides;if(!t||typeof t!="object")return[];const r=Ua(n.exercises),s=[];for(const[a,u]of Object.entries(t)){if(!u||typeof u!="object")continue;const d=[];for(const[f,m]of Object.entries(u)){const _=Number(f);if(!Number.isInteger(_)||_<0||_>=r.length)continue;const S=Number(m);if(!Number.isFinite(S))continue;const w=r[_],P=Number(w.weightKg||0);if(S===P)continue;const O=w.name.trim()||`Esercizio ${_+1}`;d.push(`${O}: ${P} kg -> ${S} kg`)}d.length!==0&&s.push({clientId:a,clientLabel:e[a]||a,lines:d})}return s}function Pj(){const{role:n,user:e,isSupervisor:t}=ml(),r=Cu(),{showError:s,showSuccess:a}=Xh(),[u,d]=V.useState([]),[f,m]=V.useState([]),[_,S]=V.useState(!1),[w,P]=V.useState(null),[O,R]=V.useState(!1),[C,$]=V.useState(!1),[Q,G]=V.useState(!1),[Z,X]=V.useState({}),[ie,k]=V.useState(!1),[A,N]=V.useState(!1),[j,M]=V.useState(!1),[L,x]=V.useState(""),[Fe,Oe]=V.useState(""),[$e,De]=V.useState(!1),[ae,ve]=V.useState(!1),[de,B]=V.useState(0),[U,ue]=V.useState(JI()),[be,Se]=V.useState(null),[ce,je]=V.useState(null),[Ve,Ge]=V.useState(!1),[ne,We]=V.useState([]),[st,ct]=V.useState(""),[ht,Nt]=V.useState(""),[Je,nn]=V.useState("clients"),[$t,Fn]=V.useState(""),[Ct,Be]=V.useState(""),[At,dr]=V.useState(!1),[cn,Hr]=V.useState("series_reps"),[Ot,yt]=V.useState(""),[Un,br]=V.useState(""),[fr,zn]=V.useState(""),[Wr,$n]=V.useState([$s()]),[qr,Fi]=V.useState([]),[ho,ui]=V.useState(!1),[pr,Ui]=V.useState(""),[Cr,_n]=V.useState("permanent"),[Bn,zi]=V.useState("4"),[Hn,ys]=V.useState(F0(new Date)),ci=be!==null,rn=u.find(T=>rh(T)===$t)??null,St=[...f].sort((T,q)=>{const ee=iu(we(T.createdAt))??0;return(iu(we(q.createdAt))??0)-ee}),He=St.find(T=>T.id===Ct)??null,mt=O?He:null,Dt=C?He:null,Wn=Tj(we(w==null?void 0:w.phone),we(w==null?void 0:w.fullName)),qn=u.reduce((T,q)=>{const ee=we(q.displayName).trim()||we(q.email).trim()||q.id;return T[rh(q)]=ee,T[q.id]=ee,T},{}),hi=Dt?Aj(Dt,qn):[],Ar=u.map(T=>({value:rh(T),label:we(T.displayName).trim()||we(T.email)||T.id})),Kn=He?Ar.filter(T=>!(He.assignedClientIds??[]).includes(T.value)):Ar,fo=Ar.filter(T=>qr.includes(T.value)),vl=Ar.find(T=>T.value===$t)??null,$i=Math.round((de+1)/Jl.length*100),Zo=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],Gn=ne.filter(T=>T.uid!==(e==null?void 0:e.uid)).filter(T=>!T.isSupervisor).filter(T=>{const q=st.trim().toLowerCase();return q?T.displayName.toLowerCase().includes(q)||T.email.toLowerCase().includes(q):!0}).sort((T,q)=>{const ee=iu(Dp(T))??Number.MAX_SAFE_INTEGER,Ie=iu(Dp(q))??Number.MAX_SAFE_INTEGER;return ee-Ie});V.useEffect(()=>{!t&&Je==="supervisor"&&nn("clients")},[t,Je]);const di=V.useMemo(()=>({control:(T,q)=>({...T,minHeight:48,borderRadius:12,borderColor:q.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:q.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:T=>({...T,borderRadius:12,overflow:"hidden",zIndex:50}),option:(T,q)=>({...T,backgroundColor:q.isSelected?"#ff6a00":q.isFocused?"rgba(255,106,0,0.10)":"#fff",color:q.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);V.useEffect(()=>{async function T(){if(!$t){P(null);return}try{const q=await iI($t,"onboarding");P(q.data()??null)}catch{P(null)}}T()},[$t]),V.useEffect(()=>{var T;!Ct&&St.length>0&&!At&&Be(St[0].id),Ct&&!St.some(q=>q.id===Ct)&&Be(((T=St[0])==null?void 0:T.id)??"")},[Ct,At,St.map(T=>T.id).join("|")]),V.useEffect(()=>{He||$(!1)},[He==null?void 0:He.id]),V.useEffect(()=>{C||X({})},[C,He==null?void 0:He.id]);async function Rn(){if(n){S(!0);try{const ee=(await c2(e==null?void 0:e.uid)).docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,qe)=>{const Pr=we(Ie.displayName||Ie.email||Ie.id).toLowerCase(),Rr=we(qe.displayName||qe.email||qe.id).toLowerCase();return Pr.localeCompare(Rr)});d(ee),!$t&&ee[0]&&Fn(rh(ee[0]));try{const Ie=await sI(n);m(Ie.docs.map(qe=>({id:qe.id,...qe.data()})))}catch(Ie){m([]),s(kt(Ie))}}catch(T){console.error("Coach action failed:",T),s(kt(T))}finally{S(!1)}}}V.useEffect(()=>{Rn()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{!ce||ce.isSupervisor||ce.isExpired&&Tr().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[ce==null?void 0:ce.status,ce==null?void 0:ce.isExpired,ce==null?void 0:ce.isSupervisor]),V.useEffect(()=>{async function T(){if(!(!n||n==="client")){Ge(!0);try{const q=await Yw();je(q)}catch(q){s(kt(q))}finally{Ge(!1)}}}T()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{async function T(){if(e!=null&&e.uid)try{const ee=(await qa(e.uid)).data(),Ie=we(ee==null?void 0:ee.phone).trim();x(Ie),Oe(Ie)}catch{x(""),Oe("")}}T()},[e==null?void 0:e.uid]);async function po(){if(t)try{const T=await n2();We(T.coaches??[])}catch(T){s(kt(T))}}V.useEffect(()=>{po()},[t,e==null?void 0:e.uid]);async function Qn(T,q){S(!0);try{const ee=await T();return a(q),await Rn(),ee}catch(ee){s(kt(ee))}finally{S(!1)}}function _s(){$n(T=>[...T,$s()])}function ws(T){$n(q=>q.length<=1?q:q.filter((ee,Ie)=>Ie!==T))}function mo(T){Yt(T,$s())}function Yt(T,q){$n(ee=>ee.map((Ie,qe)=>qe===T?{...Ie,...q}:Ie))}function dt(T,q){ue(ee=>({...ee,[T]:q}))}function ft(){if(!He){Hr("series_reps"),yt(""),br(""),zn(""),$n([$s()]);return}Hr(He.kind==="circuit"?"circuit":"series_reps"),yt(He.title??""),br(we(He.warmup)),zn(we(He.notes));const T=Ua(He.exercises).filter(q=>q.name.trim().length>0);$n(T.length>0?T:[$s()])}function go(T){if(T===cn)return;if(Wr.some(ee=>Ij(ee))||fr.trim().length>0||Un.trim().length>0){if(!window.confirm("Cambiando categoria di allenamento, i dati inseriti in questa scheda verranno cancellati. Vuoi continuare?"))return;$n([$s()]),zn(""),br("")}Hr(T)}function Bi(){const T=document.body;let q=!1;const ee=()=>{q||(q=!0,T.classList.remove("print-plan-only"))};T.classList.add("print-plan-only"),window.addEventListener("afterprint",ee,{once:!0}),window.print(),window.setTimeout(ee,1200)}function fi(){if(!$t){s("Seleziona prima un cliente.");return}const T={name:we(rn==null?void 0:rn.displayName).trim(),email:we(rn==null?void 0:rn.email).trim()};ue(j0(w,T)),B(0),k(!0)}function kn(){const T={name:we(rn==null?void 0:rn.displayName).trim(),email:we(rn==null?void 0:rn.email).trim()};ue(j0(w,T)),B(0),k(!1)}function vo(){return U.fullName.trim()?U.email.trim()?U.phone.trim()?U.age.trim()?U.sex.trim()?U.heightCm.trim()?U.weightKg.trim()?U.pastProgram.trim()?U.trainingFrequency.trim()?U.workoutDuration.trim()?U.workoutLocation.trim()?U.equipment.trim()?U.objectivePrimary.trim()?U.objectiveReason.trim()?U.expectedTimeline.trim()?null:"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function ea(){if(!$t){s("Seleziona prima un cliente.");return}const T=vo();if(T){s(T);return}const q={fullName:U.fullName.trim(),age:U.age.trim(),sex:U.sex.trim(),email:U.email.trim(),phone:U.phone.trim(),discoverySource:U.discoverySource.trim(),heightCm:U.heightCm.trim(),weightKg:U.weightKg.trim(),pastProgram:U.pastProgram.trim(),trainingFrequency:U.trainingFrequency.trim(),workoutDuration:U.workoutDuration.trim(),workoutLocation:U.workoutLocation.trim(),equipment:U.equipment.trim(),trainingTypeHistory:U.trainingTypeHistory.trim(),hasInjuries:U.hasInjuries.trim(),injuryDetails:U.injuryDetails.trim(),objectivePrimary:U.objectivePrimary.trim(),objectiveReason:U.objectiveReason.trim(),expectedTimeline:U.expectedTimeline.trim(),supportPreference:U.supportPreference.trim(),supportPreferenceOther:U.supportPreferenceOther.trim(),investmentRange:U.investmentRange.trim(),whatBlockedSoFar:U.whatBlockedSoFar.trim(),oneThingToImprove:U.oneThingToImprove.trim(),importanceScore:Number(U.importanceScore||0),riskIfNoChange:U.riskIfNoChange.trim(),readiness:U.readiness.trim(),goal:U.objectivePrimary.trim(),experienceLevel:U.pastProgram.trim(),trainingDaysPerWeek:bj(U.trainingFrequency),notes:U.notes.trim(),compiledBy:"coach"};S(!0);try{await f2($t,q),P(q),a("Anagrafica cliente salvata con successo."),k(!1)}catch(ee){s(kt(ee))}finally{S(!1)}}async function Hi(){const T=Ot.trim();if(!T){s("Inserisci un titolo per la scheda.");return}const q=Wr.map(ee=>({name:ee.name.trim(),notes:ee.notes.trim(),advancedMethod:ee.advancedMethod||"",restPauseNotes:ee.restPauseNotes.trim(),dropSetNotes:ee.dropSetNotes.trim(),advancedMethodNotes:ee.advancedMethod==="rest_pause"?ee.restPauseNotes.trim():ee.advancedMethod==="drop_set"?ee.dropSetNotes.trim():"",sets:cn==="series_reps"&&Number(ee.sets)||0,reps:cn==="series_reps"&&Number(ee.reps)||0,workValue:cn==="circuit"&&Number(ee.workValue)||0,weightKg:Number(ee.weightKg)||0,restSeconds:Number(ee.restSeconds)||0,mediaUrl:ee.mediaUrl.trim()})).filter(ee=>ee.name.length>0);if(q.length===0){s("Aggiungi almeno un esercizio con nome.");return}if(mt)await Qn(()=>g2(mt.id,{title:T,kind:cn,warmup:Un.trim(),notes:fr.trim(),status:"active",exercises:q}),"Scheda aggiornata con successo."),Be(mt.id);else{const ee=await Qn(()=>Zw({title:T,kind:cn,warmup:Un.trim(),notes:fr.trim(),status:"active",exercises:q}),"Scheda creata.");ee!=null&&ee.id&&Be(ee.id)}dr(!1),R(!1)}function xn(){dr(!0),Be(""),Hr("series_reps"),yt(""),br(""),zn(""),$n([$s()]),R(!0)}function ta(T){const q=St.find(Ie=>Ie.id===T);if(!q)return;dr(!1),Be(q.id),Hr(q.kind==="circuit"?"circuit":"series_reps"),yt(q.title??""),br(we(q.warmup)),zn(we(q.notes));const ee=Ua(q.exercises).filter(Ie=>Ie.name.trim().length>0);$n(ee.length>0?ee:[$s()]),R(!0)}function hn(T){const q=St.find(ee=>ee.id===T);q&&(Be(q.id),$(!0))}function Es(){dr(!1),ft(),R(!1)}async function na(T,q){if(q){if(!q.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}Se(T);try{const ee=(He==null?void 0:He.id)||(e==null?void 0:e.uid)||"coach-draft",Ie=await y2(ee,q);Yt(T,{mediaUrl:Ie}),a("Media caricato con successo.")}catch(ee){console.error("Media upload failed:",ee),s(kt(ee))}finally{Se(null)}}}async function ra(T){const q=St.find(Ie=>Ie.id===T);!q||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await Qn(()=>v2(q.id),"Scheda eliminata con successo."),Be(Ie=>Ie===q.id?"":Ie),R(!1),$(!1))}async function Ss(T){const q=St.find(qe=>qe.id===T);if(!q)return;const ee=Ua(q.exercises).map(qe=>({name:qe.name,notes:qe.notes,advancedMethod:qe.advancedMethod,advancedMethodNotes:qe.advancedMethodNotes,restPauseNotes:qe.restPauseNotes,dropSetNotes:qe.dropSetNotes,sets:qe.sets,reps:qe.reps,workValue:qe.workValue,weightKg:qe.weightKg,restSeconds:qe.restSeconds,mediaUrl:qe.mediaUrl})),Ie=await Qn(()=>Zw({title:`${q.title||"Scheda"} (Copia)`,kind:q.kind==="circuit"?"circuit":"series_reps",notes:we(q.notes),status:q.status==="archived"?"draft":"active",exercises:ee}),"Scheda duplicata.");Ie!=null&&Ie.id&&Be(Ie.id)}async function Ts(){if(!He){s("Seleziona prima una scheda.");return}if(qr.length===0){s("Seleziona almeno un cliente da assegnare.");return}await Qn(()=>Promise.all(qr.map(T=>p2(He.id,T))),qr.length===1?"Scheda assegnata al cliente.":"Scheda assegnata ai clienti selezionati."),Fi([])}async function pi(T){He&&await Qn(()=>m2(He.id,T),"Assegnazione rimossa.")}function Wi(T,q){var Bt;const ee=(Bt=T.assignmentDetails)==null?void 0:Bt[q];if(!ee||ee.mode!=="timed")return{label:"Permanente",tone:"success"};const Ie=Op(ee.startsAt),qe=Op(ee.expiresAt);if(!qe)return{label:"Permanente",tone:"success"};if(Ie){const Xn=new Date(Ie).getTime();if(!Number.isNaN(Xn)&&Xn>Date.now())return{label:`Inizia il ${Va(Ie)}`,tone:"warning"}}const Pr=new Date(qe).getTime();if(Number.isNaN(Pr))return{label:"Permanente",tone:"success"};const Rr=Date.now();if(Pr<=Rr)return{label:"Scaduta",tone:"danger"};const yo=10080*60*1e3,kr=Pr-Rr<=yo?"warning":"success";return{label:`Scade il ${Va(qe)}`,tone:kr}}function yl(T){var Rr;if(!He)return;const q=(Rr=He.assignmentDetails)==null?void 0:Rr[T],ee=(q==null?void 0:q.mode)==="timed",Ie=typeof(q==null?void 0:q.weeks)=="number"&&q.weeks>0?q.weeks:4,qe=Op(q==null?void 0:q.startsAt),Pr=qe?new Date(qe):new Date;Ui(T),_n(ee?"timed":"permanent"),zi(String(Ie)),ys(F0(Pr)),ui(!0)}function mr(){if(Cr!=="timed")return null;const T=Number(Bn);if(!Number.isFinite(T)||T<1)return null;const q=new Date(Hn);if(Number.isNaN(q.getTime()))return null;const ee=new Date(q.getTime()+T*7*24*60*60*1e3);return{from:Va(q.toISOString()),to:Va(ee.toISOString())}}async function Nn(){if(!(!He||!pr)){if(Cr==="timed"){const T=Number(Bn);if(!Number.isFinite(T)||T<1){s("Inserisci un numero settimane valido.");return}const q=new Date(Hn);if(Number.isNaN(q.getTime())){s("Seleziona una data di inizio valida.");return}await Qn(()=>e0(He.id,pr,T,q.toISOString()),"Durata assegnazione aggiornata.")}else await Qn(()=>e0(He.id,pr,null,null),"Assegnazione impostata come permanente.");ui(!1),Ui("")}}async function mi(T,q){Nt(T);try{if(q==="activate"){const ee=ne.find(Ie=>Ie.uid===T);(ee==null?void 0:ee.status)==="disabled"?(await Jw(T),a("Coach sbloccato con successo.")):(ee==null?void 0:ee.status)==="active_paid"?(await r2(T),a("Abbonamento rinnovato di 1 anno.")):(await Jw(T),a("Abbonamento attivato."))}else await i2(T),a("Abbonamento disattivato.");await po()}catch(ee){s(kt(ee))}finally{Nt("")}}async function gi(){Ge(!0);try{await eI();const T=await Yw();je(T),a("Periodo di prova attivato.")}catch(T){s(kt(T))}finally{Ge(!1)}}async function vi(){M(!0);try{await tI(),await Tr().catch(()=>{}),r("/auth",{replace:!0})}catch(T){s(kt(T))}finally{M(!1),N(!1)}}async function lt(){const T=Fe.replace(/[^\d+]/g,"").trim();if(T.length<8){s("Inserisci un numero WhatsApp valido.");return}ve(!0);try{const q=await s2(T);x(q.phone),Oe(q.phone),De(!1),a("Numero aggiornato. I clienti associati useranno subito il nuovo contatto.")}catch(q){s(kt(q))}finally{ve(!1)}}async function yi(){const T=we(ce==null?void 0:ce.coachCode).trim();if(!T){s("Codice coach non disponibile.");return}try{await navigator.clipboard.writeText(T),a("Codice coach copiato.")}catch{s("Copia non riuscita. Copia manualmente il codice.")}}return g.jsxs(uI,{role:n==="trainer"?"trainer":"admin",subtitle:"",title:"Area Coach",sections:Zo,activeSection:Je,onSectionChange:T=>nn(T),children:[ce!=null&&ce.requiresTrialAcceptance?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>{T.currentTarget===T.target&&Tr().finally(()=>r("/auth",{replace:!0}))},children:g.jsxs("article",{className:"card modal-card fullscreen-gate",onClick:T=>T.stopPropagation(),children:[g.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),g.jsx("h2",{children:"Prova gratuita 15 giorni"}),g.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),g.jsx("button",{className:"btn",type:"button",disabled:Ve,onClick:()=>void gi(),children:Ve?"Attivazione...":"Accetta e continua"}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Tr().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,Je==="code"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Il tuo codice coach"}),g.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),g.jsxs("div",{className:"coach-code-wrap",children:[g.jsx("p",{className:"coach-code",children:(ce==null?void 0:ce.coachCode)||"Caricamento..."}),g.jsx("button",{className:"icon-btn coach-copy-btn",type:"button","aria-label":"Copia codice coach",title:"Copia codice coach",onClick:()=>void yi(),children:""})]}),Ve?g.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,g.jsxs("div",{className:"client-info-block",children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:"Numero WhatsApp coach"}),$e?null:g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Modifica numero coach",title:"Modifica numero coach",onClick:()=>De(!0),children:""})]}),$e?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Numero telefono / WhatsApp",g.jsx("input",{type:"tel",value:Fe,onChange:T=>Oe(T.target.value),placeholder:"Es. 3405882404"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:ae,onClick:()=>{Oe(L),De(!1)},children:"Annulla"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:ae,onClick:()=>void lt(),children:ae?"Salvataggio...":"Salva"})]})]}):g.jsx("p",{className:"hint",children:g.jsx("strong",{children:L||"Non configurato"})})]}),ce!=null&&ce.isSupervisor?g.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"hint",children:["Stato accesso: ",g.jsx("strong",{children:U0(ce==null?void 0:ce.status)}),"  ","Scadenza: ",g.jsx("strong",{children:Va((ce==null?void 0:ce.expiresAt)??(ce==null?void 0:ce.trialEndsAt)??(ce==null?void 0:ce.subscriptionEndsAt))})]}),g.jsx("div",{className:"divider"}),g.jsx("h3",{children:"Elimina profilo"}),g.jsx("p",{className:"hint",children:"Se elimini il profilo coach perderai accesso, abbonamento, clienti associati e tutti i dati collegati."}),g.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>N(!0),children:"Elimina il mio profilo"})]})]}):null,t&&Je==="supervisor"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Gestione coach (Supervisor)"}),g.jsxs("label",{children:["Cerca coach per nome o email",g.jsx("input",{value:st,onChange:T=>ct(T.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),g.jsxs("div",{className:"supervisor-list",children:[Gn.map(T=>{const q=Dp(T),ee=Cj(T.status,q);return g.jsxs("article",{className:"supervisor-row",children:[g.jsxs("div",{children:[g.jsx("p",{children:g.jsx("strong",{children:T.displayName||"Coach senza nome"})}),g.jsx("p",{className:"hint",children:T.email}),g.jsxs("p",{className:"hint",children:["Codice: ",T.coachCode||"-"]}),g.jsxs("p",{className:"hint",children:["Stato: ",U0(T.isSupervisor?"supervisor_active":T.status)]}),g.jsxs("p",{className:"hint",children:["Scadenza: ",Va(q)]}),ee?g.jsx("span",{className:`status-chip status-chip-${ee.tone}`.trim(),children:ee.label}):null]}),g.jsxs("div",{className:"supervisor-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:T.isSupervisor||ht===T.uid,onClick:()=>void mi(T.uid,"activate"),children:T.status==="disabled"?"Sblocca":T.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:T.isSupervisor||ht===T.uid,onClick:()=>void mi(T.uid,"disable"),children:"Disattiva"})]})]},T.uid)}),Gn.length===0?g.jsx("article",{className:"supervisor-row",children:g.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,Je==="clients"||Je==="plans"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:Je==="plans"?"Schede tecniche":"Gestione cliente"}),Je==="clients"?g.jsxs("label",{children:["Clienti registrati",g.jsx(M0,{styles:di,options:Ar,value:vl,onChange:T=>Fn((T==null?void 0:T.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}):null,Je!=="plans"?g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Rn(),children:"Aggiorna dati"}):null,Je==="clients"&&u.length===0?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Nessun cliente associato"}),g.jsx("p",{className:"hint",children:"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):g.jsxs(g.Fragment,{children:[Je==="clients"?g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[g.jsx("h2",{children:"Anagrafica cliente"}),g.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),g.jsx("button",{className:"btn",type:"button",onClick:fi,disabled:_||!$t,children:w?"Modifica anagrafica completa":"Compila anagrafica completa"}),Wn?g.jsx("a",{className:"btn btn-whatsapp",href:Wn,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):g.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Anagrafica"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Nome:"})," ",bt(w==null?void 0:w.fullName)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Et:"})," ",bt(w==null?void 0:w.age)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Sesso:"})," ",bt(w==null?void 0:w.sex)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Email:"})," ",bt(w==null?void 0:w.email)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Telefono:"})," ",bt(w==null?void 0:w.phone)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Come ci ha conosciuto:"})," ",bt(w==null?void 0:w.discoverySource)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Stato fisico e allenamento"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Altezza:"})," ",bt(w==null?void 0:w.heightCm)," cm"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Peso:"})," ",bt(w==null?void 0:w.weightKg)," kg"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Esperienza programmi:"})," ",bt((w==null?void 0:w.pastProgram)||(w==null?void 0:w.experienceLevel))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti settimanali:"})," ",bt((w==null?void 0:w.trainingFrequency)||(w==null?void 0:w.trainingDaysPerWeek))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Durata sessione:"})," ",bt(w==null?void 0:w.workoutDuration)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Luogo allenamento:"})," ",bt(w==null?void 0:w.workoutLocation)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Attrezzatura:"})," ",bt(w==null?void 0:w.equipment)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Allenamenti svolti:"})," ",bt(w==null?void 0:w.trainingTypeHistory)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Infortuni/problemi:"})," ",bt(w==null?void 0:w.hasInjuries)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Dettagli infortuni:"})," ",bt(w==null?void 0:w.injuryDetails)]})]}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Obiettivi"}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Obiettivo principale:"})," ",bt((w==null?void 0:w.objectivePrimary)||(w==null?void 0:w.goal))]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Perch:"})," ",bt(w==null?void 0:w.objectiveReason)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Timeline risultati:"})," ",bt(w==null?void 0:w.expectedTimeline)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",bt(w==null?void 0:w.whatBlockedSoFar)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",bt(w==null?void 0:w.oneThingToImprove)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Importanza obiettivo:"})," ",bt(w==null?void 0:w.importanceScore)," / 10"]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Rischio se non cambia:"})," ",bt(w==null?void 0:w.riskIfNoChange)]}),g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",bt(w==null?void 0:w.notes)]})]})]}):null,Je==="plans"?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"hint",children:St.length>0?`Hai ${St.length} scheda/e create: puoi modificarle, eliminarle o assegnarle ai clienti.`:"Non hai ancora schede create: inizia con una nuova scheda."}),g.jsx("div",{className:"supervisor-actions",children:g.jsx("button",{className:"btn",disabled:_,onClick:xn,type:"button",children:"Crea nuova scheda"})}),St.length>0?g.jsx("div",{className:"plan-carousel",children:St.map(T=>g.jsxs("article",{className:"card plan-card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h3",{children:T.title||"Scheda senza titolo"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Duplica scheda",title:"Duplica scheda",onClick:()=>void Ss(T.id),children:""})]}),g.jsxs("p",{className:"hint",children:["Tipo: ",T.kind==="circuit"?"Circuito":"Serie e reps"]}),g.jsxs("p",{className:"hint",children:["Esercizi: ",Ua(T.exercises).length]}),g.jsxs("p",{className:"hint",children:["Assegnata a: ",Array.isArray(T.assignedClientIds)?T.assignedClientIds.length:0," clienti"]}),g.jsxs("div",{className:"plan-card-actions",children:[g.jsx("button",{className:"btn btn-ghost",disabled:_,onClick:()=>hn(T.id),type:"button",children:"Visualizza"}),g.jsx("button",{className:"btn",disabled:_,onClick:()=>ta(T.id),type:"button",children:"Modifica"}),g.jsx("button",{className:"btn btn-danger",disabled:_,onClick:()=>void ra(T.id),type:"button",children:"Elimina"})]})]},T.id))}):g.jsx("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:g.jsx("p",{className:"hint",children:"Nessuna scheda creata al momento."})})]}):null]})]}):null,ie?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&kn(),children:g.jsxs("article",{className:"card modal-card",onClick:T=>T.stopPropagation(),children:[g.jsx("h2",{children:"Anagrafica completa cliente"}),g.jsxs("p",{className:"hero-sub",children:["Step ",de+1," di ",Jl.length,"  Completamento ",$i,"%"]}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:`${$i}%`}})}),g.jsx("div",{className:"step-tabs",children:Jl.map((T,q)=>g.jsx("button",{className:`step-tab ${de===q?"step-tab-active":""}`.trim(),type:"button",onClick:()=>B(q),children:T},T))}),de===0?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:U.fullName,onChange:T=>dt("fullName",T.target.value)})]}),g.jsxs("label",{children:["Et *",g.jsx("input",{type:"number",min:12,max:99,value:U.age,onChange:T=>dt("age",T.target.value)})]}),g.jsxs("label",{children:["Sesso *",g.jsx("input",{value:U.sex,onChange:T=>dt("sex",T.target.value)})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{type:"email",value:U.email,onChange:T=>dt("email",T.target.value)})]}),g.jsxs("label",{children:["Telefono *",g.jsx("input",{type:"tel",value:U.phone,onChange:T=>dt("phone",T.target.value)})]}),g.jsxs("label",{children:["Come ci ha conosciuto",g.jsx("input",{value:U.discoverySource,onChange:T=>dt("discoverySource",T.target.value)})]})]}):null,de===1?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Altezza (cm) *",g.jsx("input",{type:"number",min:100,max:250,value:U.heightCm,onChange:T=>dt("heightCm",T.target.value)})]}),g.jsxs("label",{children:["Peso (kg) *",g.jsx("input",{type:"number",min:30,max:250,value:U.weightKg,onChange:T=>dt("weightKg",T.target.value)})]}),g.jsxs("label",{children:["Programmi precedenti *",g.jsx("input",{value:U.pastProgram,onChange:T=>dt("pastProgram",T.target.value),placeholder:"Es. Si con coach online"})]}),g.jsxs("label",{children:["Frequenza allenamenti *",g.jsx("input",{value:U.trainingFrequency,onChange:T=>dt("trainingFrequency",T.target.value),placeholder:"Es. 3-4 a settimana"})]}),g.jsxs("label",{children:["Durata allenamento *",g.jsx("input",{value:U.workoutDuration,onChange:T=>dt("workoutDuration",T.target.value),placeholder:"Es. 45 minuti"})]}),g.jsxs("label",{children:["Dove si allena *",g.jsx("input",{value:U.workoutLocation,onChange:T=>dt("workoutLocation",T.target.value)})]}),g.jsxs("label",{children:["Attrezzatura disponibile *",g.jsx("input",{value:U.equipment,onChange:T=>dt("equipment",T.target.value)})]}),g.jsxs("label",{children:["Allenamenti fatti",g.jsx("textarea",{value:U.trainingTypeHistory,onChange:T=>dt("trainingTypeHistory",T.target.value)})]}),g.jsxs("label",{children:["Infortuni/problemi",g.jsx("input",{value:U.hasInjuries,onChange:T=>dt("hasInjuries",T.target.value),placeholder:"Si/No"})]}),g.jsxs("label",{children:["Dettagli infortuni",g.jsx("textarea",{value:U.injuryDetails,onChange:T=>dt("injuryDetails",T.target.value)})]})]}):null,de===2?g.jsxs("div",{className:"modal-grid",children:[g.jsxs("label",{children:["Obiettivo principale *",g.jsx("input",{value:U.objectivePrimary,onChange:T=>dt("objectivePrimary",T.target.value)})]}),g.jsxs("label",{children:["Perch questo obiettivo? *",g.jsx("textarea",{value:U.objectiveReason,onChange:T=>dt("objectiveReason",T.target.value)})]}),g.jsxs("label",{children:["Timeline risultati *",g.jsx("input",{value:U.expectedTimeline,onChange:T=>dt("expectedTimeline",T.target.value)})]}),g.jsxs("label",{children:["Cosa lo ha bloccato",g.jsx("textarea",{value:U.whatBlockedSoFar,onChange:T=>dt("whatBlockedSoFar",T.target.value)})]}),g.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",g.jsx("textarea",{value:U.oneThingToImprove,onChange:T=>dt("oneThingToImprove",T.target.value)})]}),g.jsxs("label",{children:["Importanza obiettivo (1-10)",g.jsx("input",{type:"number",min:1,max:10,value:U.importanceScore,onChange:T=>dt("importanceScore",T.target.value)})]}),g.jsxs("label",{children:["Rischio se non cambia",g.jsx("textarea",{value:U.riskIfNoChange,onChange:T=>dt("riskIfNoChange",T.target.value)})]}),g.jsxs("label",{children:["Note coach (opzionale)",g.jsx("textarea",{value:U.notes,onChange:T=>dt("notes",T.target.value)})]})]}):null,g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:de===0,onClick:()=>B(T=>Math.max(T-1,0)),children:"Indietro"}),de<Jl.length-1?g.jsx("button",{className:"btn",type:"button",onClick:()=>B(T=>Math.min(T+1,Jl.length-1)),children:"Continua"}):g.jsx("button",{className:"btn",type:"button",onClick:()=>void ea(),disabled:_,children:_?"Salvataggio...":"Salva"})]}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:kn,children:"Chiudi"})]})}):null,O?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&Es(),children:g.jsxs("article",{className:"card modal-card",onClick:T=>T.stopPropagation(),children:[g.jsx("h2",{children:mt?"Modifica scheda":"Compila la scheda"}),g.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),g.jsxs("div",{className:"step-tabs plan-kind-tabs",children:[g.jsx("button",{className:`step-tab ${cn==="series_reps"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>go("series_reps"),children:"Serie e reps"}),g.jsx("button",{className:`step-tab ${cn==="circuit"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>go("circuit"),children:"Circuito"})]}),g.jsxs("label",{children:["Titolo scheda *",g.jsx("input",{value:Ot,onChange:T=>yt(T.target.value),placeholder:"Forza 4 settimane",required:!0})]}),g.jsxs("label",{children:["Riscaldamento (opzionale)",g.jsx("textarea",{value:Un,onChange:T=>br(T.target.value),placeholder:"Es. 8-10 min mobilit, attivazione scapole, squat a corpo libero..."})]}),g.jsxs("label",{children:["Note (opzionale)",g.jsx("textarea",{value:fr,onChange:T=>zn(T.target.value),placeholder:"Note utili per il cliente"})]}),Wr.map((T,q)=>g.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("h2",{children:["Esercizio ",q+1]}),g.jsx("button",{className:"icon-btn",type:"button",onClick:()=>mo(q),"aria-label":`Reset esercizio ${q+1}`,title:"Reset esercizio",children:""})]}),g.jsxs("label",{children:["Nome esercizio",g.jsx("input",{value:T.name,onChange:ee=>Yt(q,{name:ee.target.value}),placeholder:"Es. Squat bilanciere"})]}),g.jsxs("label",{children:["Note esercizio",g.jsx("textarea",{value:T.notes,onChange:ee=>Yt(q,{notes:ee.target.value}),placeholder:"Note utili per questo esercizio"})]}),g.jsxs("div",{className:"exercise-fields-inline",children:[cn==="series_reps"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Serie",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:T.sets,onChange:ee=>Yt(q,{sets:Number(ee.target.value)})})]}),g.jsxs("label",{children:["Ripetizioni",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:T.reps,onChange:ee=>Yt(q,{reps:Number(ee.target.value)})})]})]}):g.jsxs("label",{children:["Reps/tempo di lavoro",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:T.workValue,onChange:ee=>Yt(q,{workValue:Number(ee.target.value)})})]}),g.jsxs("label",{children:["Peso (kg)",g.jsx("input",{type:"number",min:0,inputMode:"decimal",value:T.weightKg,onChange:ee=>Yt(q,{weightKg:Number(ee.target.value)})})]}),g.jsxs("label",{children:["Recupero (sec)",g.jsx("input",{type:"number",min:0,inputMode:"numeric",value:T.restSeconds,onChange:ee=>Yt(q,{restSeconds:Number(ee.target.value)})})]})]}),g.jsxs("div",{className:"exercise-method-toggle",children:[g.jsx("p",{className:"hint",children:"Metodo opzionale"}),g.jsxs("div",{className:"exercise-method-toggle-row",children:[g.jsx("button",{className:`btn btn-ghost ${T.advancedMethod==="rest_pause"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>Yt(q,T.advancedMethod==="rest_pause"?{advancedMethod:""}:{advancedMethod:"rest_pause"}),children:"Rest Pause"}),g.jsx("button",{className:`btn btn-ghost ${T.advancedMethod==="drop_set"?"exercise-method-toggle-active":""}`.trim(),type:"button",onClick:()=>Yt(q,T.advancedMethod==="drop_set"?{advancedMethod:""}:{advancedMethod:"drop_set"}),children:"Drop set"})]})]}),T.advancedMethod?g.jsxs("label",{children:[T.advancedMethod==="rest_pause"?"Note Rest Pause":"Note Drop set",g.jsx("textarea",{value:T.advancedMethod==="rest_pause"?T.restPauseNotes:T.dropSetNotes,onChange:ee=>Yt(q,T.advancedMethod==="rest_pause"?{restPauseNotes:ee.target.value,advancedMethodNotes:ee.target.value}:{dropSetNotes:ee.target.value,advancedMethodNotes:ee.target.value}),placeholder:"Inserisci indicazioni per il cliente"})]}):null,g.jsxs("label",{children:["URL video (YouTube o link diretto)",g.jsx("input",{value:L0(T.mediaUrl)?T.mediaUrl:"",onChange:ee=>Yt(q,{mediaUrl:ee.target.value}),placeholder:"https://..."})]}),g.jsxs("label",{children:["Oppure carica un'immagine",g.jsx("input",{type:"file",accept:"image/*",onChange:ee=>{var Ie;return void na(q,((Ie=ee.target.files)==null?void 0:Ie[0])??null)},disabled:be===q}),ih(T.mediaUrl)?g.jsx("img",{src:T.mediaUrl,alt:`Anteprima esercizio ${q+1}`,className:"exercise-upload-preview"}):null]}),ih(T.mediaUrl)?g.jsxs("p",{className:"hint",children:["Immagine caricata."," ",g.jsx("button",{className:"btn-link",type:"button",onClick:()=>Yt(q,{mediaUrl:""}),children:"Rimuovi"})]}):null,be===q?g.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>ws(q),children:"Rimuovi esercizio"})]},`exercise-${q}`)),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:_s,children:"Aggiungi esercizio"}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Es,children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||ci,onClick:()=>void Hi(),children:ci?"Attendi caricamento media...":"Salva"})]})]})}):null,C&&Dt?g.jsx("section",{className:"modal-overlay preview-modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&$(!1),children:g.jsxs("article",{className:"card modal-card print-sheet preview-modal-card",onClick:T=>T.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsxs("div",{className:"preview-head-main",children:[g.jsx("button",{className:"icon-btn mobile-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>$(!1),children:""}),g.jsx("h2",{children:"Scheda"})]}),g.jsxs("div",{className:"preview-head-actions screen-only",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:u.length===0,onClick:()=>{Fi([]),G(!0)},children:"Assegna"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Stampa scheda",title:"Stampa scheda",onClick:Bi,children:""}),g.jsx("button",{className:"icon-btn desktop-only",type:"button","aria-label":"Chiudi scheda",title:"Chiudi scheda",onClick:()=>$(!1),children:""})]})]}),g.jsxs("p",{className:"hint",children:["Clienti assegnati:"," ",g.jsx("strong",{children:Array.isArray(Dt.assignedClientIds)&&Dt.assignedClientIds.length>0?Dt.assignedClientIds.map(T=>qn[T]||T).join(", "):"Nessuno"})]}),g.jsxs("div",{className:"plan-head",children:[g.jsx("p",{className:"hint",children:"Titolo programma"}),g.jsx("h3",{children:Dt.title||"Senza titolo"})]}),g.jsxs("p",{className:"hint",children:["Tipo scheda: ",g.jsx("strong",{children:Dt.kind==="circuit"?"Circuito":"Serie e reps"})]}),we(Dt.warmup).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Riscaldamento:"})," ",we(Dt.warmup)]})}):null,we(Dt.notes).trim()?g.jsx("div",{className:"client-info-block",children:g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note coach:"})," ",we(Dt.notes)]})}):null,hi.length>0?g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Feedback peso cliente"}),g.jsx("p",{className:"hint",children:"Mostrato solo quando un cliente cambia il peso rispetto alla scheda base."}),hi.map(T=>g.jsxs("div",{className:"divider-block",children:[g.jsx("p",{className:"hint",children:g.jsx("strong",{children:T.clientLabel})}),g.jsx("ul",{className:"list",children:T.lines.map(q=>g.jsx("li",{children:q},`${T.clientId}-${q}`))})]},`weight-feedback-${T.clientId}`))]}):null,g.jsx("div",{className:"exercise-grid",children:Ua(Dt.exercises).map((T,q)=>g.jsx("article",{className:"exercise-card",children:(()=>{const ee=`${Dt.id}-${q}`,Ie=Z[ee]!==!1;return g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"exercise-name",children:T.name||`Esercizio ${q+1}`}),g.jsxs("div",{className:"exercise-meta",children:[Dt.kind==="circuit"?g.jsxs("span",{children:[T.workValue||"-"," reps/tempo"]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{children:[T.sets||"-"," serie"]}),g.jsxs("span",{children:[T.reps||"-"," reps"]})]}),g.jsxs("span",{children:[T.weightKg||0," kg"]}),g.jsxs("span",{children:[T.restSeconds||0," sec recupero"]})]}),T.advancedMethod?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Metodo:"})," ",T.advancedMethod==="rest_pause"?"Rest Pause":"Drop set"]}):null,T.advancedMethod&&(T.advancedMethod==="rest_pause"?T.restPauseNotes:T.dropSetNotes).trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note metodo:"})," ",T.advancedMethod==="rest_pause"?T.restPauseNotes:T.dropSetNotes]}):null,T.notes.trim()?g.jsxs("p",{className:"hint",children:[g.jsx("strong",{children:"Note:"})," ",T.notes]}):null,T.mediaUrl?g.jsxs(g.Fragment,{children:[ih(T.mediaUrl)?g.jsxs(g.Fragment,{children:[Ie?g.jsxs("div",{className:"media-loading","aria-live":"polite",children:[g.jsx("span",{className:"spinner","aria-hidden":"true"}),g.jsx("span",{children:"Caricamento immagine..."})]}):null,g.jsx("img",{src:T.mediaUrl,alt:`Media esercizio ${q+1}`,className:"exercise-upload-preview",style:{display:Ie?"none":"block"},onLoad:()=>X(qe=>({...qe,[ee]:!1})),onError:()=>X(qe=>({...qe,[ee]:!1}))})]}):null,L0(T.mediaUrl)?g.jsxs(g.Fragment,{children:[g.jsx("a",{className:"btn-link screen-only",href:T.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri video"}),g.jsxs("a",{className:"hint print-only print-video-link",href:T.mediaUrl,target:"_blank",rel:"noreferrer",children:["URL video: ",T.mediaUrl]})]}):ih(T.mediaUrl)?null:g.jsx("a",{className:"btn-link",href:T.mediaUrl,target:"_blank",rel:"noreferrer",children:"Apri link"})]}):g.jsx("p",{className:"hint",children:"Nessun media allegato"})]})})()},`preview-ex-${q}`))})]})}):null,Q&&He?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&G(!1),children:g.jsxs("article",{className:"card modal-card",onClick:T=>T.stopPropagation(),children:[g.jsxs("div",{className:"exercise-head",children:[g.jsx("h2",{children:"Gestisci assegnazioni"}),g.jsx("button",{className:"icon-btn",type:"button","aria-label":"Chiudi gestione assegnazioni",title:"Chiudi",onClick:()=>G(!1),children:""})]}),g.jsxs("p",{className:"hint",children:["Scheda: ",He.title||"Scheda senza titolo"]}),g.jsxs("label",{children:["Clienti",g.jsx(M0,{styles:di,options:Kn,value:fo,onChange:T=>Fi(T.map(q=>q.value)),placeholder:Kn.length===0?"Tutti i clienti sono gi assegnati":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1})]}),g.jsx("div",{className:"action-row-split",children:g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_||qr.length===0,onClick:()=>void Ts(),children:"Assegna"})}),g.jsxs("div",{className:"client-info-block",children:[g.jsx("h3",{children:"Clienti assegnati"}),Array.isArray(He.assignedClientIds)&&He.assignedClientIds.length>0?g.jsx("ul",{className:"assigned-client-list",children:He.assignedClientIds.map(T=>{const q=Wi(He,T);return g.jsxs("li",{className:"assigned-client-item",children:[g.jsxs("div",{children:[g.jsx("span",{className:"assigned-client-name",children:qn[T]||T}),g.jsx("span",{className:`assignment-status assignment-status-${q.tone}`.trim(),children:q.label})]}),g.jsxs("div",{className:"assigned-client-actions",children:[g.jsx("button",{className:"icon-btn assigned-client-time-btn",type:"button","aria-label":`Imposta durata ${qn[T]||T}`,title:"Imposta durata",disabled:_,onClick:()=>yl(T),children:""}),g.jsx("button",{className:"icon-btn icon-btn-danger assigned-client-remove-btn",type:"button","aria-label":`Rimuovi ${qn[T]||T}`,title:"Rimuovi cliente",disabled:_,onClick:()=>void pi(T),children:""})]})]},T)})}):g.jsx("p",{className:"hint",children:"Nessun cliente assegnato a questa scheda."})]})]})}):null,ho&&He?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&ui(!1),children:g.jsxs("article",{className:"card modal-card",onClick:T=>T.stopPropagation(),children:[g.jsx("h2",{children:"Durata assegnazione"}),g.jsxs("p",{className:"hint",children:["Cliente: ",g.jsx("strong",{children:qn[pr]||pr})]}),g.jsxs("div",{className:"step-tabs",children:[g.jsx("button",{className:`step-tab ${Cr==="permanent"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>_n("permanent"),children:"Permanente"}),g.jsx("button",{className:`step-tab ${Cr==="timed"?"step-tab-active":""}`.trim(),type:"button",onClick:()=>_n("timed"),children:"A tempo"})]}),Cr==="timed"?g.jsxs(g.Fragment,{children:[g.jsxs("label",{children:["Data inizio",g.jsx("input",{type:"date",value:Hn,onChange:T=>ys(T.target.value)})]}),g.jsxs("label",{children:["Settimane",g.jsx("input",{type:"number",min:1,step:1,value:Bn,onChange:T=>zi(T.target.value)})]}),mr()?g.jsxs("p",{className:"hint",children:["Disponibile dal ",g.jsx("strong",{children:mr().from})," al ",g.jsx("strong",{children:mr().to})]}):null]}):g.jsx("p",{className:"hint",children:"La scheda rester sempre disponibile finch non rimuovi l'assegnazione."}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>ui(!1),children:"Chiudi"}),g.jsx("button",{className:"btn btn-primary",type:"button",disabled:_,onClick:()=>void Nn(),children:"Salva"})]})]})}):null,A&&!(ce!=null&&ce.isSupervisor)?g.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:T=>T.currentTarget===T.target&&N(!1),children:g.jsxs("article",{className:"card modal-card",onClick:T=>T.stopPropagation(),children:[g.jsx("h2",{children:"Conferma eliminazione profilo coach"}),g.jsx("p",{className:"hint",children:"Eliminando il profilo perderai definitivamente dati, abbonamento e associazioni clienti legate al tuo account coach."}),g.jsx("p",{className:"hint",children:"L'operazione segue le policy aziendali. Termini, Condizioni d'uso e Privacy Policy verranno pubblicati e linkati qui."}),g.jsxs("div",{className:"onboarding-actions",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",disabled:j,onClick:()=>N(!1),children:"Annulla"}),g.jsx("button",{className:"btn btn-danger",type:"button",disabled:j,onClick:()=>void vi(),children:j?"Eliminazione...":"Conferma eliminazione"})]})]})}):null,Je==="overview"?g.jsxs("article",{className:"card",children:[g.jsx("h2",{children:"Panoramica"}),g.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),g.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),g.jsx("ul",{className:"list",children:f.slice(0,5).map(T=>{var q;return g.jsxs("li",{children:[g.jsx("strong",{children:T.title}),"  ",((q=T.exercises)==null?void 0:q.length)??0," esercizi  assegnata a ",Array.isArray(T.assignedClientIds)?T.assignedClientIds.length:0," clienti"]},T.id)})})]}):null,_?g.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function Rj(){const{user:n,role:e}=ml(),t=Cu(),{showError:r,showSuccess:s}=Xh(),[a,u]=V.useState(!1),[d,f]=V.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return g.jsx(ii,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return g.jsx(ii,{to:"/app/coach",replace:!0});function m(w,P){f(O=>({...O,[w]:P}))}function _(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function S(){const w=_();if(w){r(w);return}u(!0);try{await t2({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(P){r(kt(P))}finally{u(!1)}}return g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),g.jsx("h1",{children:"Completa il tuo profilo"}),g.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),g.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:g.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),g.jsxs("label",{children:["Nome e cognome *",g.jsx("input",{value:d.fullName,onChange:w=>m("fullName",w.target.value),placeholder:"Nome e cognome"})]}),g.jsxs("label",{children:["E-mail *",g.jsx("input",{value:d.email,onChange:w=>m("email",w.target.value),type:"email",placeholder:"nome@esempio.com"})]}),g.jsxs("label",{children:["Numero di telefono *",g.jsx("input",{value:d.phone,onChange:w=>m("phone",w.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),g.jsxs("label",{children:["Codice coach *",g.jsx("input",{value:d.coachCode,onChange:w=>m("coachCode",w.target.value),placeholder:"Es. lorenzobeastly"})]}),g.jsxs("div",{className:"action-row-split",children:[g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Tr(),children:"Esci e cambia account"}),g.jsx("button",{className:"btn btn-primary",disabled:a,type:"button",onClick:()=>void S(),children:a?"Salvataggio...":"Continua"})]})]})})}function ZI(){return g.jsx("main",{className:"page page-center",children:g.jsxs("div",{className:"card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Caricamento in corso"})]})})}class kj extends V.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?g.jsx("main",{className:"page page-center",children:g.jsxs("section",{className:"card auth-card",children:[g.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),g.jsx("h1",{children:"Qualcosa non ha funzionato"}),g.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),g.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function z0({allow:n,children:e}){const{user:t,role:r,initializing:s}=ml();return s?g.jsx(ZI,{}):t?r?n.includes(r)?e:g.jsx(ii,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:g.jsx(ii,{to:"/onboarding",replace:!0}):g.jsx(ii,{to:"/auth",replace:!0})}function xj(){const{user:n,role:e,initializing:t}=ml();return t?g.jsx(ZI,{}):n?e?g.jsx(ii,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):g.jsx(ii,{to:"/app/client",replace:!0}):g.jsx(ii,{to:"/auth",replace:!0})}function Nj(){return g.jsx(kj,{children:g.jsxs(i1,{children:[g.jsx(Vo,{path:"/",element:g.jsx(xj,{})}),g.jsx(Vo,{path:"/auth",element:g.jsx(A2,{})}),g.jsx(Vo,{path:"/onboarding",element:g.jsx(Rj,{})}),g.jsx(Vo,{path:"/app/coach",element:g.jsx(z0,{allow:["admin","trainer"],children:g.jsx(Pj,{})})}),g.jsx(Vo,{path:"/app/client",element:g.jsx(z0,{allow:["client"],children:g.jsx(k2,{})})}),g.jsx(Vo,{path:"*",element:g.jsx(ii,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});dC.createRoot(document.getElementById("root")).render(g.jsx(B0.StrictMode,{children:g.jsx(c1,{children:g.jsx(a1,{children:g.jsx(Nj,{})})})}));
