import{u as d,r,j as e,N as l,i as p,b as h,L as x,v as g}from"./index-CNYxnOg5.js";import{t as j}from"./firestore-CSdz_xXz.js";function A(){const{user:a,role:o}=d(),[n,t]=r.useState(""),[c,i]=r.useState(!1);if(!a)return e.jsx(l,{to:"/auth",replace:!0});if(o)return e.jsx(l,{to:o==="client"?"/app/client":"/app/coach",replace:!0});const u=p(a.email);async function m(){i(!0),t("");try{const s=await g();t(s.alreadyAdmin?"Utente già admin. Refresh token completato.":"Ruolo admin assegnato.")}catch(s){t(j(s))}finally{i(!1)}}return e.jsx("main",{className:"page page-center",children:e.jsxs("section",{className:"card auth-card",children:[e.jsx("p",{className:"eyebrow",children:"Accesso PT/Admin"}),e.jsx("h1",{children:"Completa accesso area coach"}),e.jsxs("p",{className:"hero-sub",children:["Hai fatto accesso con ",e.jsx("strong",{children:a.email}),". Se questo è il tuo account PT/Admin, completa la verifica qui sotto."]}),u?e.jsx("button",{className:"btn",disabled:c,onClick:()=>void m(),type:"button",children:"Attiva account PT/Admin"}):e.jsx("p",{className:"hint",children:"Questo account non è tra quelli autorizzati come PT/Admin. Esci e accedi con l'account corretto."}),e.jsx("button",{className:"btn btn-ghost",disabled:c,onClick:()=>void h(),type:"button",children:"Esci e cambia account"}),e.jsxs("p",{className:"hint",children:["Vuoi entrare come utente? Torna al ",e.jsx(x,{to:"/auth",children:"login"}),"."]}),n?e.jsx("p",{className:"message",children:n}):null]})})}export{A as MissingRolePage};
