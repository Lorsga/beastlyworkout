function H1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function N0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kf={exports:{}},Cl={},Qf={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function W1(){if($y)return We;$y=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function _(H){return H===null||typeof H!="object"?null:(H=E&&H[E]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,D={};function b(H,Q,ce){this.props=H,this.context=Q,this.refs=D,this.updater=ce||R}b.prototype.isReactComponent={},b.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},b.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function B(){}B.prototype=b.prototype;function K(H,Q,ce){this.props=H,this.context=Q,this.refs=D,this.updater=ce||R}var X=K.prototype=new B;X.constructor=K,O(X,b.prototype),X.isPureReactComponent=!0;var Z=Array.isArray,$=Object.prototype.hasOwnProperty,F={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C(H,Q,ce){var Se,Te={},Re=null,Pe=null;if(Q!=null)for(Se in Q.ref!==void 0&&(Pe=Q.ref),Q.key!==void 0&&(Re=""+Q.key),Q)$.call(Q,Se)&&!A.hasOwnProperty(Se)&&(Te[Se]=Q[Se]);var Le=arguments.length-2;if(Le===1)Te.children=ce;else if(1<Le){for(var Fe=Array(Le),Ne=0;Ne<Le;Ne++)Fe[Ne]=arguments[Ne+2];Te.children=Fe}if(H&&H.defaultProps)for(Se in Le=H.defaultProps,Le)Te[Se]===void 0&&(Te[Se]=Le[Se]);return{$$typeof:n,type:H,key:Re,ref:Pe,props:Te,_owner:F.current}}function P(H,Q){return{$$typeof:n,type:H.type,key:Q,ref:H.ref,props:H.props,_owner:H._owner}}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function j(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ce){return Q[ce]})}var z=/\/+/g;function k(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?j(""+H.key):Q.toString(36)}function ze(H,Q,ce,Se,Te){var Re=typeof H;(Re==="undefined"||Re==="boolean")&&(H=null);var Pe=!1;if(H===null)Pe=!0;else switch(Re){case"string":case"number":Pe=!0;break;case"object":switch(H.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=H,Te=Te(Pe),H=Se===""?"."+k(Pe,0):Se,Z(Te)?(ce="",H!=null&&(ce=H.replace(z,"$&/")+"/"),ze(Te,Q,ce,"",function(Ne){return Ne})):Te!=null&&(N(Te)&&(Te=P(Te,ce+(!Te.key||Pe&&Pe.key===Te.key?"":(""+Te.key).replace(z,"$&/")+"/")+H)),Q.push(Te)),1;if(Pe=0,Se=Se===""?".":Se+":",Z(H))for(var Le=0;Le<H.length;Le++){Re=H[Le];var Fe=Se+k(Re,Le);Pe+=ze(Re,Q,ce,Fe,Te)}else if(Fe=_(H),typeof Fe=="function")for(H=Fe.call(H),Le=0;!(Re=H.next()).done;)Re=Re.value,Fe=Se+k(Re,Le++),Pe+=ze(Re,Q,ce,Fe,Te);else if(Re==="object")throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Pe}function Ve(H,Q,ce){if(H==null)return H;var Se=[],Te=0;return ze(H,Se,"","",function(Re){return Q.call(ce,Re,Te++)}),Se}function Be(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=ce)},function(ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=ce)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var $e={current:null},se={transition:null},me={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:se,ReactCurrentOwner:F};function oe(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:Ve,forEach:function(H,Q,ce){Ve(H,function(){Q.apply(this,arguments)},ce)},count:function(H){var Q=0;return Ve(H,function(){Q++}),Q},toArray:function(H){return Ve(H,function(Q){return Q})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},We.Component=b,We.Fragment=t,We.Profiler=s,We.PureComponent=K,We.StrictMode=r,We.Suspense=f,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,We.act=oe,We.cloneElement=function(H,Q,ce){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Se=O({},H.props),Te=H.key,Re=H.ref,Pe=H._owner;if(Q!=null){if(Q.ref!==void 0&&(Re=Q.ref,Pe=F.current),Q.key!==void 0&&(Te=""+Q.key),H.type&&H.type.defaultProps)var Le=H.type.defaultProps;for(Fe in Q)$.call(Q,Fe)&&!A.hasOwnProperty(Fe)&&(Se[Fe]=Q[Fe]===void 0&&Le!==void 0?Le[Fe]:Q[Fe])}var Fe=arguments.length-2;if(Fe===1)Se.children=ce;else if(1<Fe){Le=Array(Fe);for(var Ne=0;Ne<Fe;Ne++)Le[Ne]=arguments[Ne+2];Se.children=Le}return{$$typeof:n,type:H.type,key:Te,ref:Re,props:Se,_owner:Pe}},We.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},We.createElement=C,We.createFactory=function(H){var Q=C.bind(null,H);return Q.type=H,Q},We.createRef=function(){return{current:null}},We.forwardRef=function(H){return{$$typeof:d,render:H}},We.isValidElement=N,We.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:Be}},We.memo=function(H,Q){return{$$typeof:m,type:H,compare:Q===void 0?null:Q}},We.startTransition=function(H){var Q=se.transition;se.transition={};try{H()}finally{se.transition=Q}},We.unstable_act=oe,We.useCallback=function(H,Q){return $e.current.useCallback(H,Q)},We.useContext=function(H){return $e.current.useContext(H)},We.useDebugValue=function(){},We.useDeferredValue=function(H){return $e.current.useDeferredValue(H)},We.useEffect=function(H,Q){return $e.current.useEffect(H,Q)},We.useId=function(){return $e.current.useId()},We.useImperativeHandle=function(H,Q,ce){return $e.current.useImperativeHandle(H,Q,ce)},We.useInsertionEffect=function(H,Q){return $e.current.useInsertionEffect(H,Q)},We.useLayoutEffect=function(H,Q){return $e.current.useLayoutEffect(H,Q)},We.useMemo=function(H,Q){return $e.current.useMemo(H,Q)},We.useReducer=function(H,Q,ce){return $e.current.useReducer(H,Q,ce)},We.useRef=function(H){return $e.current.useRef(H)},We.useState=function(H){return $e.current.useState(H)},We.useSyncExternalStore=function(H,Q,ce){return $e.current.useSyncExternalStore(H,Q,ce)},We.useTransition=function(){return $e.current.useTransition()},We.version="18.3.1",We}var Hy;function pm(){return Hy||(Hy=1,Qf.exports=W1()),Qf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function q1(){if(Wy)return Cl;Wy=1;var n=pm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var y,E={},_=null,R=null;m!==void 0&&(_=""+m),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(R=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(E[y]=f[y]);if(d&&d.defaultProps)for(y in f=d.defaultProps,f)E[y]===void 0&&(E[y]=f[y]);return{$$typeof:e,type:d,key:_,ref:R,props:E,_owner:s.current}}return Cl.Fragment=t,Cl.jsx=u,Cl.jsxs=u,Cl}var qy;function G1(){return qy||(qy=1,Kf.exports=q1()),Kf.exports}var T=G1(),V=pm();const O0=N0(V),Cp=H1({__proto__:null,default:O0},[V]);var Dc={},Xf={exports:{}},bn={},Yf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function K1(){return Gy||(Gy=1,(function(n){function e(se,me){var oe=se.length;se.push(me);e:for(;0<oe;){var H=oe-1>>>1,Q=se[H];if(0<s(Q,me))se[H]=me,se[oe]=Q,oe=H;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var me=se[0],oe=se.pop();if(oe!==me){se[0]=oe;e:for(var H=0,Q=se.length,ce=Q>>>1;H<ce;){var Se=2*(H+1)-1,Te=se[Se],Re=Se+1,Pe=se[Re];if(0>s(Te,oe))Re<Q&&0>s(Pe,Te)?(se[H]=Pe,se[Re]=oe,H=Re):(se[H]=Te,se[Se]=oe,H=Se);else if(Re<Q&&0>s(Pe,oe))se[H]=Pe,se[Re]=oe,H=Re;else break e}}return me}function s(se,me){var oe=se.sortIndex-me.sortIndex;return oe!==0?oe:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,E=null,_=3,R=!1,O=!1,D=!1,b=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(se){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=se)r(m),me.sortIndex=me.expirationTime,e(f,me);else break;me=t(m)}}function Z(se){if(D=!1,X(se),!O)if(t(f)!==null)O=!0,Be($);else{var me=t(m);me!==null&&$e(Z,me.startTime-se)}}function $(se,me){O=!1,D&&(D=!1,B(C),C=-1),R=!0;var oe=_;try{for(X(me),E=t(f);E!==null&&(!(E.expirationTime>me)||se&&!j());){var H=E.callback;if(typeof H=="function"){E.callback=null,_=E.priorityLevel;var Q=H(E.expirationTime<=me);me=n.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(f)&&r(f),X(me)}else r(f);E=t(f)}if(E!==null)var ce=!0;else{var Se=t(m);Se!==null&&$e(Z,Se.startTime-me),ce=!1}return ce}finally{E=null,_=oe,R=!1}}var F=!1,A=null,C=-1,P=5,N=-1;function j(){return!(n.unstable_now()-N<P)}function z(){if(A!==null){var se=n.unstable_now();N=se;var me=!0;try{me=A(!0,se)}finally{me?k():(F=!1,A=null)}}else F=!1}var k;if(typeof K=="function")k=function(){K(z)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Ve=ze.port2;ze.port1.onmessage=z,k=function(){Ve.postMessage(null)}}else k=function(){b(z,0)};function Be(se){A=se,F||(F=!0,k())}function $e(se,me){C=b(function(){se(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){O||R||(O=!0,Be($))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(_){case 1:case 2:case 3:var me=3;break;default:me=_}var oe=_;_=me;try{return se()}finally{_=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=_;_=se;try{return me()}finally{_=oe}},n.unstable_scheduleCallback=function(se,me,oe){var H=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?H+oe:H):oe=H,se){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,se={id:y++,callback:me,priorityLevel:se,startTime:oe,expirationTime:Q,sortIndex:-1},oe>H?(se.sortIndex=oe,e(m,se),t(f)===null&&se===t(m)&&(D?(B(C),C=-1):D=!0,$e(Z,oe-H))):(se.sortIndex=Q,e(f,se),O||R||(O=!0,Be($))),se},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(se){var me=_;return function(){var oe=_;_=me;try{return se.apply(this,arguments)}finally{_=oe}}}})(Jf)),Jf}var Ky;function Q1(){return Ky||(Ky=1,Yf.exports=K1()),Yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function X1(){if(Qy)return bn;Qy=1;var n=pm(),e=Q1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},E={};function _(i){return f.call(E,i)?!0:f.call(y,i)?!1:m.test(i)?E[i]=!0:(y[i]=!0,!1)}function R(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,l,h){if(o===null||typeof o>"u"||R(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,l,h,p,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];b[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function K(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(B,K);b[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(B,K);b[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(B,K);b[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function X(i,o,l,h){var p=b.hasOwnProperty(o)?b[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,l,p,h)&&(l=null),h||p===null?_(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),F=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),se=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Object.assign,H;function Q(i){if(H===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var ce=!1;function Se(i,o){if(!i||ce)return"";ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var h=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){h=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){h=Y}i()}}catch(Y){if(Y&&h&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),v=h.stack.split(`
`),S=p.length-1,x=v.length-1;1<=S&&0<=x&&p[S]!==v[x];)x--;for(;1<=S&&0<=x;S--,x--)if(p[S]!==v[x]){if(S!==1||x!==1)do if(S--,x--,0>x||p[S]!==v[x]){var L=`
`+p[S].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=S&&0<=x);break}}}finally{ce=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Q(i):""}function Te(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=Se(i.type,!1),i;case 11:return i=Se(i.type.render,!1),i;case 1:return i=Se(i.type,!0),i;default:return""}}function Re(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case F:return"Portal";case P:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case ze:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case N:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ve:return o=i.displayName||null,o!==null?o:Re(i.type)||"Memo";case Be:o=i._payload,i=i._init;try{return Re(i(o))}catch{}}return null}function Pe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(o);case 8:return o===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Le(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ne(i){var o=Fe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function un(i){i._valueTracker||(i._valueTracker=Ne(i))}function $n(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Fe(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function Nn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Hn(i,o){var l=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function ir(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Le(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ks(i,o){o=o.checked,o!=null&&X(i,"checked",o,!1)}function Oi(i,o){ks(i,o);var l=Le(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Rr(i,o.type,l):o.hasOwnProperty("defaultValue")&&Rr(i,o.type,Le(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ao(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Rr(i,o,l){(o!=="number"||Nn(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Wn=Array.isArray;function On(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Le(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function xs(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Di(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Wn(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Le(l)}}function Vi(i,o){var l=Le(o.value),h=Le(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function yn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function xe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?xe(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var sr,Ns=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(sr=sr||document.createElement("div"),sr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=sr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Pr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ri=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(i){ri.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ni[o]=ni[i]})});function Os(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||ni.hasOwnProperty(i)&&ni[i]?(""+o).trim():o+"px"}function Ds(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Os(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Vs=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ms(i,o){if(o){if(Vs[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Mi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ii=null;function M(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var le=null,ge=null,Ye=null;function cn(i){if(i=cl(i)){if(typeof le!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Qu(o),le(i.stateNode,i.type,o))}}function qn(i){ge?Ye?Ye.push(i):Ye=[i]:ge=i}function Ls(){if(ge){var i=ge,o=Ye;if(Ye=ge=null,cn(i),o)for(i=0;i<o.length;i++)cn(o[i])}}function Fs(i,o){return i(o)}function Ba(){}var si=!1;function $a(i,o,l){if(si)return i(o,l);si=!0;try{return Fs(i,o,l)}finally{si=!1,(ge!==null||Ye!==null)&&(Ba(),Ls())}}function It(i,o){var l=i.stateNode;if(l===null)return null;var h=Qu(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Ro=!1;if(d)try{var or={};Object.defineProperty(or,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Ro=!1}function js(i,o,l,h,p,v,S,x,L){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(re){this.onError(re)}}var Us=!1,Po=null,ar=!1,Ha=null,Ed={onError:function(i){Us=!0,Po=i}};function ko(i,o,l,h,p,v,S,x,L){Us=!1,Po=null,js.apply(Ed,arguments)}function wu(i,o,l,h,p,v,S,x,L){if(ko.apply(this,arguments),Us){if(Us){var Y=Po;Us=!1,Po=null}else throw Error(t(198));ar||(ar=!0,Ha=Y)}}function lr(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function zs(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ur(i){if(lr(i)!==i)throw Error(t(188))}function Eu(i){var o=i.alternate;if(!o){if(o=lr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return ur(p),i;if(v===h)return ur(p),o;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=v;else{for(var S=!1,x=p.child;x;){if(x===l){S=!0,l=p,h=v;break}if(x===h){S=!0,h=p,l=v;break}x=x.sibling}if(!S){for(x=v.child;x;){if(x===l){S=!0,l=v,h=p;break}if(x===h){S=!0,h=v,l=p;break}x=x.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Wa(i){return i=Eu(i),i!==null?xo(i):null}function xo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=xo(i);if(o!==null)return o;i=i.sibling}return null}var No=e.unstable_scheduleCallback,qa=e.unstable_cancelCallback,Tu=e.unstable_shouldYield,Td=e.unstable_requestPaint,at=e.unstable_now,Su=e.unstable_getCurrentPriorityLevel,Bs=e.unstable_ImmediatePriority,Li=e.unstable_UserBlockingPriority,Gn=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Iu=e.unstable_IdlePriority,$s=null,Dn=null;function Cu(i){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot($s,i,void 0,(i.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Au,Ka=Math.log,bu=Math.LN2;function Au(i){return i>>>=0,i===0?32:31-(Ka(i)/bu|0)|0}var Oo=64,Do=4194304;function Fi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Hs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,v=i.pingedLanes,S=l&268435455;if(S!==0){var x=S&~p;x!==0?h=Fi(x):(v&=S,v!==0&&(h=Fi(v)))}else S=l&~p,S!==0?h=Fi(S):v!==0&&(h=Fi(v));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,v=o&-o,p>=v||p===16&&(v&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-hn(o),p=1<<l,h|=i[l],o&=~p;return h}function Sd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-hn(v),x=1<<S,L=p[S];L===-1?((x&l)===0||(x&h)!==0)&&(p[S]=Sd(x,o)):L<=o&&(i.expiredLanes|=x),v&=~x}}function Vn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ws(){var i=Oo;return Oo<<=1,(Oo&4194240)===0&&(Oo=64),i}function ji(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Ui(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-hn(o),i[o]=l}function st(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-hn(l),v=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~v}}function zi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-hn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var Ke=0;function Bi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ru,Vo,Pu,ku,xu,Qa=!1,kr=[],Ht=null,cr=null,hr=null,$i=new Map,Kn=new Map,xr=[],Id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(i,o){switch(i){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":$i.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kn.delete(o.pointerId)}}function _n(i,o,l,h,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},o!==null&&(o=cl(o),o!==null&&Vo(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Cd(i,o,l,h,p){switch(o){case"focusin":return Ht=_n(Ht,i,o,l,h,p),!0;case"dragenter":return cr=_n(cr,i,o,l,h,p),!0;case"mouseover":return hr=_n(hr,i,o,l,h,p),!0;case"pointerover":var v=p.pointerId;return $i.set(v,_n($i.get(v)||null,i,o,l,h,p)),!0;case"gotpointercapture":return v=p.pointerId,Kn.set(v,_n(Kn.get(v)||null,i,o,l,h,p)),!0}return!1}function Ou(i){var o=Xs(i.target);if(o!==null){var l=lr(o);if(l!==null){if(o=l.tag,o===13){if(o=zs(l),o!==null){i.blockedOn=o,xu(i.priority,function(){Pu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ai(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Mo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);ii=h,l.target.dispatchEvent(h),ii=null}else return o=cl(l),o!==null&&Vo(o),i.blockedOn=l,!1;o.shift()}return!0}function qs(i,o,l){ai(i)&&l.delete(o)}function Du(){Qa=!1,Ht!==null&&ai(Ht)&&(Ht=null),cr!==null&&ai(cr)&&(cr=null),hr!==null&&ai(hr)&&(hr=null),$i.forEach(qs),Kn.forEach(qs)}function dr(i,o){i.blockedOn===o&&(i.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Du)))}function fr(i){function o(p){return dr(p,i)}if(0<kr.length){dr(kr[0],i);for(var l=1;l<kr.length;l++){var h=kr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Ht!==null&&dr(Ht,i),cr!==null&&dr(cr,i),hr!==null&&dr(hr,i),$i.forEach(o),Kn.forEach(o),l=0;l<xr.length;l++)h=xr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<xr.length&&(l=xr[0],l.blockedOn===null);)Ou(l),l.blockedOn===null&&xr.shift()}var li=Z.ReactCurrentBatchConfig,Hi=!0;function pt(i,o,l,h){var p=Ke,v=li.transition;li.transition=null;try{Ke=1,Xa(i,o,l,h)}finally{Ke=p,li.transition=v}}function bd(i,o,l,h){var p=Ke,v=li.transition;li.transition=null;try{Ke=4,Xa(i,o,l,h)}finally{Ke=p,li.transition=v}}function Xa(i,o,l,h){if(Hi){var p=Mo(i,o,l,h);if(p===null)Ld(i,o,h,Gs,l),Nu(i,h);else if(Cd(p,i,o,l,h))h.stopPropagation();else if(Nu(i,h),o&4&&-1<Id.indexOf(i)){for(;p!==null;){var v=cl(p);if(v!==null&&Ru(v),v=Mo(i,o,l,h),v===null&&Ld(i,o,h,Gs,l),v===p)break;p=v}p!==null&&h.stopPropagation()}else Ld(i,o,h,null,l)}}var Gs=null;function Mo(i,o,l,h){if(Gs=null,i=M(h),i=Xs(i),i!==null)if(o=lr(i),o===null)i=null;else if(l=o.tag,l===13){if(i=zs(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Gs=i,null}function Ya(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Su()){case Bs:return 1;case Li:return 4;case Gn:case Ga:return 16;case Iu:return 536870912;default:return 16}default:return 16}}var Mn=null,Lo=null,wn=null;function Ja(){if(wn)return wn;var i,o=Lo,l=o.length,h,p="value"in Mn?Mn.value:Mn.textContent,v=p.length;for(i=0;i<l&&o[i]===p[i];i++);var S=l-i;for(h=1;h<=S&&o[l-h]===p[v-h];h++);return wn=p.slice(i,1<h?1-h:void 0)}function Fo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Nr(){return!0}function Za(){return!1}function Wt(i){function o(l,h,p,v,S){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Nr:Za,this.isPropagationStopped=Za,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),o}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=Wt(pr),Or=oe({},pr,{view:0,detail:0}),Ad=Wt(Or),Uo,ui,Wi,Ks=oe({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wi&&(Wi&&i.type==="mousemove"?(Uo=i.screenX-Wi.screenX,ui=i.screenY-Wi.screenY):ui=Uo=0,Wi=i),Uo)},movementY:function(i){return"movementY"in i?i.movementY:ui}}),zo=Wt(Ks),el=oe({},Ks,{dataTransfer:0}),Vu=Wt(el),Bo=oe({},Or,{relatedTarget:0}),$o=Wt(Bo),Mu=oe({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),ci=Wt(Mu),Lu=oe({},pr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Fu=Wt(Lu),ju=oe({},pr,{data:0}),tl=Wt(ju),Ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Uu[i])?!!o[i]:!1}function Dr(){return zu}var c=oe({},Or,{key:function(i){if(i.key){var o=Ho[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Fo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?dn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(i){return i.type==="keypress"?Fo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Wt(c),w=oe({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Wt(w),W=oe({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),J=Wt(W),ue=oe({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),it=Wt(ue),Vt=oe({},Ks,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=Wt(Vt),jt=[9,13,27,32],Rt=d&&"CompositionEvent"in window,Qn=null;d&&"documentMode"in document&&(Qn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Qn,Qs=d&&(!Rt||Qn&&8<Qn&&11>=Qn),Wo=" ",Lg=!1;function Fg(i,o){switch(i){case"keyup":return jt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qo=!1;function zI(i,o){switch(i){case"compositionend":return jg(o);case"keypress":return o.which!==32?null:(Lg=!0,Wo);case"textInput":return i=o.data,i===Wo&&Lg?null:i;default:return null}}function BI(i,o){if(qo)return i==="compositionend"||!Rt&&Fg(i,o)?(i=Ja(),wn=Lo=Mn=null,qo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Qs&&o.locale!=="ko"?null:o.data;default:return null}}var $I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!$I[i.type]:o==="textarea"}function zg(i,o,l,h){qn(h),o=qu(o,"onChange"),0<o.length&&(l=new jo("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var nl=null,rl=null;function HI(i){sv(i,0)}function Bu(i){var o=Yo(i);if($n(o))return i}function WI(i,o){if(i==="change")return o}var Bg=!1;if(d){var Rd;if(d){var Pd="oninput"in document;if(!Pd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),Pd=typeof $g.oninput=="function"}Rd=Pd}else Rd=!1;Bg=Rd&&(!document.documentMode||9<document.documentMode)}function Hg(){nl&&(nl.detachEvent("onpropertychange",Wg),rl=nl=null)}function Wg(i){if(i.propertyName==="value"&&Bu(rl)){var o=[];zg(o,rl,i,M(i)),$a(HI,o)}}function qI(i,o,l){i==="focusin"?(Hg(),nl=o,rl=l,nl.attachEvent("onpropertychange",Wg)):i==="focusout"&&Hg()}function GI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bu(rl)}function KI(i,o){if(i==="click")return Bu(o)}function QI(i,o){if(i==="input"||i==="change")return Bu(o)}function XI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var mr=typeof Object.is=="function"?Object.is:XI;function il(i,o){if(mr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!mr(i[p],o[p]))return!1}return!0}function qg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Gg(i,o){var l=qg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qg(l)}}function Kg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Kg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Qg(){for(var i=window,o=Nn();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Nn(i.document)}return o}function kd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function YI(i){var o=Qg(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Kg(l.ownerDocument.documentElement,l)){if(h!==null&&kd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!i.extend&&v>h&&(p=h,h=v,v=p),p=Gg(l,v);var S=Gg(l,h);p&&S&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),v>h?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var JI=d&&"documentMode"in document&&11>=document.documentMode,Go=null,xd=null,sl=null,Nd=!1;function Xg(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nd||Go==null||Go!==Nn(h)||(h=Go,"selectionStart"in h&&kd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sl&&il(sl,h)||(sl=h,h=qu(xd,"onSelect"),0<h.length&&(o=new jo("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=Go)))}function $u(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Ko={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},Od={},Yg={};d&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Hu(i){if(Od[i])return Od[i];if(!Ko[i])return i;var o=Ko[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Yg)return Od[i]=o[l];return i}var Jg=Hu("animationend"),Zg=Hu("animationiteration"),ev=Hu("animationstart"),tv=Hu("transitionend"),nv=new Map,rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(i,o){nv.set(i,o),a(o,[i])}for(var Dd=0;Dd<rv.length;Dd++){var Vd=rv[Dd],ZI=Vd.toLowerCase(),e1=Vd[0].toUpperCase()+Vd.slice(1);qi(ZI,"on"+e1)}qi(Jg,"onAnimationEnd"),qi(Zg,"onAnimationIteration"),qi(ev,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(tv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function iv(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,wu(h,o,void 0,i),i.currentTarget=null}function sv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var v=void 0;if(o)for(var S=h.length-1;0<=S;S--){var x=h[S],L=x.instance,Y=x.currentTarget;if(x=x.listener,L!==v&&p.isPropagationStopped())break e;iv(p,x,Y),v=L}else for(S=0;S<h.length;S++){if(x=h[S],L=x.instance,Y=x.currentTarget,x=x.listener,L!==v&&p.isPropagationStopped())break e;iv(p,x,Y),v=L}}}if(ar)throw i=Ha,ar=!1,Ha=null,i}function ht(i,o){var l=o[$d];l===void 0&&(l=o[$d]=new Set);var h=i+"__bubble";l.has(h)||(ov(o,i,2,!1),l.add(h))}function Md(i,o,l){var h=0;o&&(h|=4),ov(l,i,h,o)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function al(i){if(!i[Wu]){i[Wu]=!0,r.forEach(function(l){l!=="selectionchange"&&(t1.has(l)||Md(l,!1,i),Md(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Wu]||(o[Wu]=!0,Md("selectionchange",!1,o))}}function ov(i,o,l,h){switch(Ya(o)){case 1:var p=pt;break;case 4:p=bd;break;default:p=Xa}l=p.bind(null,o,l,i),p=void 0,!Ro||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Ld(i,o,l,h,p){var v=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var x=h.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(S===4)for(S=h.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;S=S.return}for(;x!==null;){if(S=Xs(x),S===null)return;if(L=S.tag,L===5||L===6){h=v=S;continue e}x=x.parentNode}}h=h.return}$a(function(){var Y=v,re=M(l),ie=[];e:{var ne=nv.get(i);if(ne!==void 0){var de=jo,ve=i;switch(i){case"keypress":if(Fo(l)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":ve="focus",de=$o;break;case"focusout":ve="blur",de=$o;break;case"beforeblur":case"afterblur":de=$o;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=J;break;case Jg:case Zg:case ev:de=ci;break;case tv:de=it;break;case"scroll":de=Ad;break;case"wheel":de=Qe;break;case"copy":case"cut":case"paste":de=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=I}var ye=(o&4)!==0,Ct=!ye&&i==="scroll",q=ye?ne!==null?ne+"Capture":null:ne;ye=[];for(var U=Y,G;U!==null;){G=U;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,q!==null&&(ae=It(U,q),ae!=null&&ye.push(ll(U,ae,G)))),Ct)break;U=U.return}0<ye.length&&(ne=new de(ne,ve,null,l,re),ie.push({event:ne,listeners:ye}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",ne&&l!==ii&&(ve=l.relatedTarget||l.fromElement)&&(Xs(ve)||ve[hi]))break e;if((de||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,de?(ve=l.relatedTarget||l.toElement,de=Y,ve=ve?Xs(ve):null,ve!==null&&(Ct=lr(ve),ve!==Ct||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(de=null,ve=Y),de!==ve)){if(ye=zo,ae="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ye=I,ae="onPointerLeave",q="onPointerEnter",U="pointer"),Ct=de==null?ne:Yo(de),G=ve==null?ne:Yo(ve),ne=new ye(ae,U+"leave",de,l,re),ne.target=Ct,ne.relatedTarget=G,ae=null,Xs(re)===Y&&(ye=new ye(q,U+"enter",ve,l,re),ye.target=G,ye.relatedTarget=Ct,ae=ye),Ct=ae,de&&ve)t:{for(ye=de,q=ve,U=0,G=ye;G;G=Qo(G))U++;for(G=0,ae=q;ae;ae=Qo(ae))G++;for(;0<U-G;)ye=Qo(ye),U--;for(;0<G-U;)q=Qo(q),G--;for(;U--;){if(ye===q||q!==null&&ye===q.alternate)break t;ye=Qo(ye),q=Qo(q)}ye=null}else ye=null;de!==null&&av(ie,ne,de,ye,!1),ve!==null&&Ct!==null&&av(ie,Ct,ve,ye,!0)}}e:{if(ne=Y?Yo(Y):window,de=ne.nodeName&&ne.nodeName.toLowerCase(),de==="select"||de==="input"&&ne.type==="file")var _e=WI;else if(Ug(ne))if(Bg)_e=QI;else{_e=GI;var Ie=qI}else(de=ne.nodeName)&&de.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(_e=KI);if(_e&&(_e=_e(i,Y))){zg(ie,_e,l,re);break e}Ie&&Ie(i,ne,Y),i==="focusout"&&(Ie=ne._wrapperState)&&Ie.controlled&&ne.type==="number"&&Rr(ne,"number",ne.value)}switch(Ie=Y?Yo(Y):window,i){case"focusin":(Ug(Ie)||Ie.contentEditable==="true")&&(Go=Ie,xd=Y,sl=null);break;case"focusout":sl=xd=Go=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Xg(ie,l,re);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":Xg(ie,l,re)}var Ce;if(Rt)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else qo?Fg(i,l)&&(Oe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Qs&&l.locale!=="ko"&&(qo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&qo&&(Ce=Ja()):(Mn=re,Lo="value"in Mn?Mn.value:Mn.textContent,qo=!0)),Ie=qu(Y,Oe),0<Ie.length&&(Oe=new tl(Oe,i,null,l,re),ie.push({event:Oe,listeners:Ie}),Ce?Oe.data=Ce:(Ce=jg(l),Ce!==null&&(Oe.data=Ce)))),(Ce=Ln?zI(i,l):BI(i,l))&&(Y=qu(Y,"onBeforeInput"),0<Y.length&&(re=new tl("onBeforeInput","beforeinput",null,l,re),ie.push({event:re,listeners:Y}),re.data=Ce))}sv(ie,o)})}function ll(i,o,l){return{instance:i,listener:o,currentTarget:l}}function qu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=It(i,l),v!=null&&h.unshift(ll(i,v,p)),v=It(i,o),v!=null&&h.push(ll(i,v,p))),i=i.return}return h}function Qo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function av(i,o,l,h,p){for(var v=o._reactName,S=[];l!==null&&l!==h;){var x=l,L=x.alternate,Y=x.stateNode;if(L!==null&&L===h)break;x.tag===5&&Y!==null&&(x=Y,p?(L=It(l,v),L!=null&&S.unshift(ll(l,L,x))):p||(L=It(l,v),L!=null&&S.push(ll(l,L,x)))),l=l.return}S.length!==0&&i.push({event:o,listeners:S})}var n1=/\r\n?/g,r1=/\u0000|\uFFFD/g;function lv(i){return(typeof i=="string"?i:""+i).replace(n1,`
`).replace(r1,"")}function Gu(i,o,l){if(o=lv(o),lv(i)!==o&&l)throw Error(t(425))}function Ku(){}var Fd=null,jd=null;function Ud(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,i1=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(i){return uv.resolve(null).then(i).catch(o1)}:zd;function o1(i){setTimeout(function(){throw i})}function Bd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),fr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);fr(o)}function Gi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function cv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Xo,ul="__reactProps$"+Xo,hi="__reactContainer$"+Xo,$d="__reactEvents$"+Xo,a1="__reactListeners$"+Xo,l1="__reactHandles$"+Xo;function Xs(i){var o=i[Vr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[hi]||l[Vr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=cv(i);i!==null;){if(l=i[Vr])return l;i=cv(i)}return o}i=l,l=i.parentNode}return null}function cl(i){return i=i[Vr]||i[hi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Yo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Qu(i){return i[ul]||null}var Hd=[],Jo=-1;function Ki(i){return{current:i}}function dt(i){0>Jo||(i.current=Hd[Jo],Hd[Jo]=null,Jo--)}function lt(i,o){Jo++,Hd[Jo]=i.current,i.current=o}var Qi={},Zt=Ki(Qi),En=Ki(!1),Ys=Qi;function Zo(i,o){var l=i.type.contextTypes;if(!l)return Qi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=o[v];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function Tn(i){return i=i.childContextTypes,i!=null}function Xu(){dt(En),dt(Zt)}function hv(i,o,l){if(Zt.current!==Qi)throw Error(t(168));lt(Zt,o),lt(En,l)}function dv(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Pe(i)||"Unknown",p));return oe({},l,h)}function Yu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qi,Ys=Zt.current,lt(Zt,i),lt(En,En.current),!0}function fv(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=dv(i,o,Ys),h.__reactInternalMemoizedMergedChildContext=i,dt(En),dt(Zt),lt(Zt,i)):dt(En),lt(En,l)}var di=null,Ju=!1,Wd=!1;function pv(i){di===null?di=[i]:di.push(i)}function u1(i){Ju=!0,pv(i)}function Xi(){if(!Wd&&di!==null){Wd=!0;var i=0,o=Ke;try{var l=di;for(Ke=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}di=null,Ju=!1}catch(p){throw di!==null&&(di=di.slice(i+1)),No(Bs,Xi),p}finally{Ke=o,Wd=!1}}return null}var ea=[],ta=0,Zu=null,ec=0,Xn=[],Yn=0,Js=null,fi=1,pi="";function Zs(i,o){ea[ta++]=ec,ea[ta++]=Zu,Zu=i,ec=o}function mv(i,o,l){Xn[Yn++]=fi,Xn[Yn++]=pi,Xn[Yn++]=Js,Js=i;var h=fi;i=pi;var p=32-hn(h)-1;h&=~(1<<p),l+=1;var v=32-hn(o)+p;if(30<v){var S=p-p%5;v=(h&(1<<S)-1).toString(32),h>>=S,p-=S,fi=1<<32-hn(o)+p|l<<p|h,pi=v+i}else fi=1<<v|l<<p|h,pi=i}function qd(i){i.return!==null&&(Zs(i,1),mv(i,1,0))}function Gd(i){for(;i===Zu;)Zu=ea[--ta],ea[ta]=null,ec=ea[--ta],ea[ta]=null;for(;i===Js;)Js=Xn[--Yn],Xn[Yn]=null,pi=Xn[--Yn],Xn[Yn]=null,fi=Xn[--Yn],Xn[Yn]=null}var Fn=null,jn=null,mt=!1,gr=null;function gv(i,o){var l=tr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function vv(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Fn=i,jn=Gi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Fn=i,jn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Js!==null?{id:fi,overflow:pi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=tr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Fn=i,jn=null,!0):!1;default:return!1}}function Kd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Qd(i){if(mt){var o=jn;if(o){var l=o;if(!vv(i,o)){if(Kd(i))throw Error(t(418));o=Gi(l.nextSibling);var h=Fn;o&&vv(i,o)?gv(h,l):(i.flags=i.flags&-4097|2,mt=!1,Fn=i)}}else{if(Kd(i))throw Error(t(418));i.flags=i.flags&-4097|2,mt=!1,Fn=i}}}function yv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Fn=i}function tc(i){if(i!==Fn)return!1;if(!mt)return yv(i),mt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ud(i.type,i.memoizedProps)),o&&(o=jn)){if(Kd(i))throw _v(),Error(t(418));for(;o;)gv(i,o),o=Gi(o.nextSibling)}if(yv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){jn=Gi(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}jn=null}}else jn=Fn?Gi(i.stateNode.nextSibling):null;return!0}function _v(){for(var i=jn;i;)i=Gi(i.nextSibling)}function na(){jn=Fn=null,mt=!1}function Xd(i){gr===null?gr=[i]:gr.push(i)}var c1=Z.ReactCurrentBatchConfig;function hl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var x=p.refs;S===null?delete x[v]:x[v]=S},o._stringRef=v,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function nc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function wv(i){var o=i._init;return o(i._payload)}function Ev(i){function o(q,U){if(i){var G=q.deletions;G===null?(q.deletions=[U],q.flags|=16):G.push(U)}}function l(q,U){if(!i)return null;for(;U!==null;)o(q,U),U=U.sibling;return null}function h(q,U){for(q=new Map;U!==null;)U.key!==null?q.set(U.key,U):q.set(U.index,U),U=U.sibling;return q}function p(q,U){return q=is(q,U),q.index=0,q.sibling=null,q}function v(q,U,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<U?(q.flags|=2,U):G):(q.flags|=2,U)):(q.flags|=1048576,U)}function S(q){return i&&q.alternate===null&&(q.flags|=2),q}function x(q,U,G,ae){return U===null||U.tag!==6?(U=Bf(G,q.mode,ae),U.return=q,U):(U=p(U,G),U.return=q,U)}function L(q,U,G,ae){var _e=G.type;return _e===A?re(q,U,G.props.children,ae,G.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Be&&wv(_e)===U.type)?(ae=p(U,G.props),ae.ref=hl(q,U,G),ae.return=q,ae):(ae=bc(G.type,G.key,G.props,null,q.mode,ae),ae.ref=hl(q,U,G),ae.return=q,ae)}function Y(q,U,G,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=$f(G,q.mode,ae),U.return=q,U):(U=p(U,G.children||[]),U.return=q,U)}function re(q,U,G,ae,_e){return U===null||U.tag!==7?(U=ao(G,q.mode,ae,_e),U.return=q,U):(U=p(U,G),U.return=q,U)}function ie(q,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Bf(""+U,q.mode,G),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case $:return G=bc(U.type,U.key,U.props,null,q.mode,G),G.ref=hl(q,null,U),G.return=q,G;case F:return U=$f(U,q.mode,G),U.return=q,U;case Be:var ae=U._init;return ie(q,ae(U._payload),G)}if(Wn(U)||me(U))return U=ao(U,q.mode,G,null),U.return=q,U;nc(q,U)}return null}function ne(q,U,G,ae){var _e=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return _e!==null?null:x(q,U,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case $:return G.key===_e?L(q,U,G,ae):null;case F:return G.key===_e?Y(q,U,G,ae):null;case Be:return _e=G._init,ne(q,U,_e(G._payload),ae)}if(Wn(G)||me(G))return _e!==null?null:re(q,U,G,ae,null);nc(q,G)}return null}function de(q,U,G,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(G)||null,x(U,q,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case $:return q=q.get(ae.key===null?G:ae.key)||null,L(U,q,ae,_e);case F:return q=q.get(ae.key===null?G:ae.key)||null,Y(U,q,ae,_e);case Be:var Ie=ae._init;return de(q,U,G,Ie(ae._payload),_e)}if(Wn(ae)||me(ae))return q=q.get(G)||null,re(U,q,ae,_e,null);nc(U,ae)}return null}function ve(q,U,G,ae){for(var _e=null,Ie=null,Ce=U,Oe=U=0,Bt=null;Ce!==null&&Oe<G.length;Oe++){Ce.index>Oe?(Bt=Ce,Ce=null):Bt=Ce.sibling;var Ze=ne(q,Ce,G[Oe],ae);if(Ze===null){Ce===null&&(Ce=Bt);break}i&&Ce&&Ze.alternate===null&&o(q,Ce),U=v(Ze,U,Oe),Ie===null?_e=Ze:Ie.sibling=Ze,Ie=Ze,Ce=Bt}if(Oe===G.length)return l(q,Ce),mt&&Zs(q,Oe),_e;if(Ce===null){for(;Oe<G.length;Oe++)Ce=ie(q,G[Oe],ae),Ce!==null&&(U=v(Ce,U,Oe),Ie===null?_e=Ce:Ie.sibling=Ce,Ie=Ce);return mt&&Zs(q,Oe),_e}for(Ce=h(q,Ce);Oe<G.length;Oe++)Bt=de(Ce,q,Oe,G[Oe],ae),Bt!==null&&(i&&Bt.alternate!==null&&Ce.delete(Bt.key===null?Oe:Bt.key),U=v(Bt,U,Oe),Ie===null?_e=Bt:Ie.sibling=Bt,Ie=Bt);return i&&Ce.forEach(function(ss){return o(q,ss)}),mt&&Zs(q,Oe),_e}function ye(q,U,G,ae){var _e=me(G);if(typeof _e!="function")throw Error(t(150));if(G=_e.call(G),G==null)throw Error(t(151));for(var Ie=_e=null,Ce=U,Oe=U=0,Bt=null,Ze=G.next();Ce!==null&&!Ze.done;Oe++,Ze=G.next()){Ce.index>Oe?(Bt=Ce,Ce=null):Bt=Ce.sibling;var ss=ne(q,Ce,Ze.value,ae);if(ss===null){Ce===null&&(Ce=Bt);break}i&&Ce&&ss.alternate===null&&o(q,Ce),U=v(ss,U,Oe),Ie===null?_e=ss:Ie.sibling=ss,Ie=ss,Ce=Bt}if(Ze.done)return l(q,Ce),mt&&Zs(q,Oe),_e;if(Ce===null){for(;!Ze.done;Oe++,Ze=G.next())Ze=ie(q,Ze.value,ae),Ze!==null&&(U=v(Ze,U,Oe),Ie===null?_e=Ze:Ie.sibling=Ze,Ie=Ze);return mt&&Zs(q,Oe),_e}for(Ce=h(q,Ce);!Ze.done;Oe++,Ze=G.next())Ze=de(Ce,q,Oe,Ze.value,ae),Ze!==null&&(i&&Ze.alternate!==null&&Ce.delete(Ze.key===null?Oe:Ze.key),U=v(Ze,U,Oe),Ie===null?_e=Ze:Ie.sibling=Ze,Ie=Ze);return i&&Ce.forEach(function($1){return o(q,$1)}),mt&&Zs(q,Oe),_e}function Ct(q,U,G,ae){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case $:e:{for(var _e=G.key,Ie=U;Ie!==null;){if(Ie.key===_e){if(_e=G.type,_e===A){if(Ie.tag===7){l(q,Ie.sibling),U=p(Ie,G.props.children),U.return=q,q=U;break e}}else if(Ie.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Be&&wv(_e)===Ie.type){l(q,Ie.sibling),U=p(Ie,G.props),U.ref=hl(q,Ie,G),U.return=q,q=U;break e}l(q,Ie);break}else o(q,Ie);Ie=Ie.sibling}G.type===A?(U=ao(G.props.children,q.mode,ae,G.key),U.return=q,q=U):(ae=bc(G.type,G.key,G.props,null,q.mode,ae),ae.ref=hl(q,U,G),ae.return=q,q=ae)}return S(q);case F:e:{for(Ie=G.key;U!==null;){if(U.key===Ie)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){l(q,U.sibling),U=p(U,G.children||[]),U.return=q,q=U;break e}else{l(q,U);break}else o(q,U);U=U.sibling}U=$f(G,q.mode,ae),U.return=q,q=U}return S(q);case Be:return Ie=G._init,Ct(q,U,Ie(G._payload),ae)}if(Wn(G))return ve(q,U,G,ae);if(me(G))return ye(q,U,G,ae);nc(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(l(q,U.sibling),U=p(U,G),U.return=q,q=U):(l(q,U),U=Bf(G,q.mode,ae),U.return=q,q=U),S(q)):l(q,U)}return Ct}var ra=Ev(!0),Tv=Ev(!1),rc=Ki(null),ic=null,ia=null,Yd=null;function Jd(){Yd=ia=ic=null}function Zd(i){var o=rc.current;dt(rc),i._currentValue=o}function ef(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function sa(i,o){ic=i,Yd=ia=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Sn=!0),i.firstContext=null)}function Jn(i){var o=i._currentValue;if(Yd!==i)if(i={context:i,memoizedValue:o,next:null},ia===null){if(ic===null)throw Error(t(308));ia=i,ic.dependencies={lanes:0,firstContext:i}}else ia=ia.next=i;return o}var eo=null;function tf(i){eo===null?eo=[i]:eo.push(i)}function Sv(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,tf(o)):(l.next=p.next,p.next=l),o.interleaved=l,mi(i,h)}function mi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Yi=!1;function nf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ji(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Je&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,mi(i,l)}return p=h.interleaved,p===null?(o.next=o,tf(h)):(o.next=p.next,p.next=o),h.interleaved=o,mi(i,l)}function sc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,zi(i,l)}}function Cv(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?p=v=o:v=v.next=o}else p=v=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function oc(i,o,l,h){var p=i.updateQueue;Yi=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var L=x,Y=L.next;L.next=null,S===null?v=Y:S.next=Y,S=L;var re=i.alternate;re!==null&&(re=re.updateQueue,x=re.lastBaseUpdate,x!==S&&(x===null?re.firstBaseUpdate=Y:x.next=Y,re.lastBaseUpdate=L))}if(v!==null){var ie=p.baseState;S=0,re=Y=L=null,x=v;do{var ne=x.lane,de=x.eventTime;if((h&ne)===ne){re!==null&&(re=re.next={eventTime:de,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ve=i,ye=x;switch(ne=o,de=l,ye.tag){case 1:if(ve=ye.payload,typeof ve=="function"){ie=ve.call(de,ie,ne);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=ye.payload,ne=typeof ve=="function"?ve.call(de,ie,ne):ve,ne==null)break e;ie=oe({},ie,ne);break e;case 2:Yi=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,ne=p.effects,ne===null?p.effects=[x]:ne.push(x))}else de={eventTime:de,lane:ne,tag:x.tag,payload:x.payload,callback:x.callback,next:null},re===null?(Y=re=de,L=ie):re=re.next=de,S|=ne;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;ne=x,x=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);if(re===null&&(L=ie),p.baseState=L,p.firstBaseUpdate=Y,p.lastBaseUpdate=re,o=p.shared.interleaved,o!==null){p=o;do S|=p.lane,p=p.next;while(p!==o)}else v===null&&(p.shared.lanes=0);ro|=S,i.lanes=S,i.memoizedState=ie}}function bv(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var dl={},Mr=Ki(dl),fl=Ki(dl),pl=Ki(dl);function to(i){if(i===dl)throw Error(t(174));return i}function rf(i,o){switch(lt(pl,o),lt(fl,i),lt(Mr,dl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:_t(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=_t(o,i)}dt(Mr),lt(Mr,o)}function oa(){dt(Mr),dt(fl),dt(pl)}function Av(i){to(pl.current);var o=to(Mr.current),l=_t(o,i.type);o!==l&&(lt(fl,i),lt(Mr,l))}function sf(i){fl.current===i&&(dt(Mr),dt(fl))}var gt=Ki(0);function ac(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var of=[];function af(){for(var i=0;i<of.length;i++)of[i]._workInProgressVersionPrimary=null;of.length=0}var lc=Z.ReactCurrentDispatcher,lf=Z.ReactCurrentBatchConfig,no=0,vt=null,Mt=null,Ut=null,uc=!1,ml=!1,gl=0,h1=0;function en(){throw Error(t(321))}function uf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!mr(i[l],o[l]))return!1;return!0}function cf(i,o,l,h,p,v){if(no=v,vt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,lc.current=i===null||i.memoizedState===null?m1:g1,i=l(h,p),ml){v=0;do{if(ml=!1,gl=0,25<=v)throw Error(t(301));v+=1,Ut=Mt=null,o.updateQueue=null,lc.current=v1,i=l(h,p)}while(ml)}if(lc.current=dc,o=Mt!==null&&Mt.next!==null,no=0,Ut=Mt=vt=null,uc=!1,o)throw Error(t(300));return i}function hf(){var i=gl!==0;return gl=0,i}function Lr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?vt.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function Zn(){if(Mt===null){var i=vt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var o=Ut===null?vt.memoizedState:Ut.next;if(o!==null)Ut=o,Mt=i;else{if(i===null)throw Error(t(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Ut===null?vt.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function vl(i,o){return typeof o=="function"?o(i):o}function df(i){var o=Zn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Mt,p=h.baseQueue,v=l.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}h.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,h=h.baseState;var x=S=null,L=null,Y=v;do{var re=Y.lane;if((no&re)===re)L!==null&&(L=L.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),h=Y.hasEagerState?Y.eagerState:i(h,Y.action);else{var ie={lane:re,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};L===null?(x=L=ie,S=h):L=L.next=ie,vt.lanes|=re,ro|=re}Y=Y.next}while(Y!==null&&Y!==v);L===null?S=h:L.next=x,mr(h,o.memoizedState)||(Sn=!0),o.memoizedState=h,o.baseState=S,o.baseQueue=L,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do v=p.lane,vt.lanes|=v,ro|=v,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function ff(i){var o=Zn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,v=o.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do v=i(v,S.action),S=S.next;while(S!==p);mr(v,o.memoizedState)||(Sn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,h]}function Rv(){}function Pv(i,o){var l=vt,h=Zn(),p=o(),v=!mr(h.memoizedState,p);if(v&&(h.memoizedState=p,Sn=!0),h=h.queue,pf(Nv.bind(null,l,h,i),[i]),h.getSnapshot!==o||v||Ut!==null&&Ut.memoizedState.tag&1){if(l.flags|=2048,yl(9,xv.bind(null,l,h,p,o),void 0,null),zt===null)throw Error(t(349));(no&30)!==0||kv(l,o,p)}return p}function kv(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function xv(i,o,l,h){o.value=l,o.getSnapshot=h,Ov(o)&&Dv(i)}function Nv(i,o,l){return l(function(){Ov(o)&&Dv(i)})}function Ov(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!mr(i,l)}catch{return!0}}function Dv(i){var o=mi(i,1);o!==null&&wr(o,i,1,-1)}function Vv(i){var o=Lr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:i},o.queue=i,i=i.dispatch=p1.bind(null,vt,i),[o.memoizedState,i]}function yl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Mv(){return Zn().memoizedState}function cc(i,o,l,h){var p=Lr();vt.flags|=i,p.memoizedState=yl(1|o,l,void 0,h===void 0?null:h)}function hc(i,o,l,h){var p=Zn();h=h===void 0?null:h;var v=void 0;if(Mt!==null){var S=Mt.memoizedState;if(v=S.destroy,h!==null&&uf(h,S.deps)){p.memoizedState=yl(o,l,v,h);return}}vt.flags|=i,p.memoizedState=yl(1|o,l,v,h)}function Lv(i,o){return cc(8390656,8,i,o)}function pf(i,o){return hc(2048,8,i,o)}function Fv(i,o){return hc(4,2,i,o)}function jv(i,o){return hc(4,4,i,o)}function Uv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zv(i,o,l){return l=l!=null?l.concat([i]):null,hc(4,4,Uv.bind(null,o,i),l)}function mf(){}function Bv(i,o){var l=Zn();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function $v(i,o){var l=Zn();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&uf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Hv(i,o,l){return(no&21)===0?(i.baseState&&(i.baseState=!1,Sn=!0),i.memoizedState=l):(mr(l,o)||(l=Ws(),vt.lanes|=l,ro|=l,i.baseState=!0),o)}function d1(i,o){var l=Ke;Ke=l!==0&&4>l?l:4,i(!0);var h=lf.transition;lf.transition={};try{i(!1),o()}finally{Ke=l,lf.transition=h}}function Wv(){return Zn().memoizedState}function f1(i,o,l){var h=ns(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},qv(i))Gv(o,l);else if(l=Sv(i,o,l,h),l!==null){var p=pn();wr(l,i,h,p),Kv(l,o,h)}}function p1(i,o,l){var h=ns(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(qv(i))Gv(o,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,x=v(S,l);if(p.hasEagerState=!0,p.eagerState=x,mr(x,S)){var L=o.interleaved;L===null?(p.next=p,tf(o)):(p.next=L.next,L.next=p),o.interleaved=p;return}}catch{}finally{}l=Sv(i,o,p,h),l!==null&&(p=pn(),wr(l,i,h,p),Kv(l,o,h))}}function qv(i){var o=i.alternate;return i===vt||o!==null&&o===vt}function Gv(i,o){ml=uc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Kv(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,zi(i,l)}}var dc={readContext:Jn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},m1={readContext:Jn,useCallback:function(i,o){return Lr().memoizedState=[i,o===void 0?null:o],i},useContext:Jn,useEffect:Lv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,cc(4194308,4,Uv.bind(null,o,i),l)},useLayoutEffect:function(i,o){return cc(4194308,4,i,o)},useInsertionEffect:function(i,o){return cc(4,2,i,o)},useMemo:function(i,o){var l=Lr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=Lr();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=f1.bind(null,vt,i),[h.memoizedState,i]},useRef:function(i){var o=Lr();return i={current:i},o.memoizedState=i},useState:Vv,useDebugValue:mf,useDeferredValue:function(i){return Lr().memoizedState=i},useTransition:function(){var i=Vv(!1),o=i[0];return i=d1.bind(null,i[1]),Lr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=vt,p=Lr();if(mt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),zt===null)throw Error(t(349));(no&30)!==0||kv(h,o,l)}p.memoizedState=l;var v={value:l,getSnapshot:o};return p.queue=v,Lv(Nv.bind(null,h,v,i),[i]),h.flags|=2048,yl(9,xv.bind(null,h,v,l,o),void 0,null),l},useId:function(){var i=Lr(),o=zt.identifierPrefix;if(mt){var l=pi,h=fi;l=(h&~(1<<32-hn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=gl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=h1++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},g1={readContext:Jn,useCallback:Bv,useContext:Jn,useEffect:pf,useImperativeHandle:zv,useInsertionEffect:Fv,useLayoutEffect:jv,useMemo:$v,useReducer:df,useRef:Mv,useState:function(){return df(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=Zn();return Hv(o,Mt.memoizedState,i)},useTransition:function(){var i=df(vl)[0],o=Zn().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Wv,unstable_isNewReconciler:!1},v1={readContext:Jn,useCallback:Bv,useContext:Jn,useEffect:pf,useImperativeHandle:zv,useInsertionEffect:Fv,useLayoutEffect:jv,useMemo:$v,useReducer:ff,useRef:Mv,useState:function(){return ff(vl)},useDebugValue:mf,useDeferredValue:function(i){var o=Zn();return Mt===null?o.memoizedState=i:Hv(o,Mt.memoizedState,i)},useTransition:function(){var i=ff(vl)[0],o=Zn().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Wv,unstable_isNewReconciler:!1};function vr(i,o){if(i&&i.defaultProps){o=oe({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function gf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:oe({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fc={isMounted:function(i){return(i=i._reactInternals)?lr(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=pn(),p=ns(i),v=gi(h,p);v.payload=o,l!=null&&(v.callback=l),o=Ji(i,v,p),o!==null&&(wr(o,i,p,h),sc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=pn(),p=ns(i),v=gi(h,p);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Ji(i,v,p),o!==null&&(wr(o,i,p,h),sc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=pn(),h=ns(i),p=gi(l,h);p.tag=2,o!=null&&(p.callback=o),o=Ji(i,p,h),o!==null&&(wr(o,i,h,l),sc(o,i,h))}};function Qv(i,o,l,h,p,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,S):o.prototype&&o.prototype.isPureReactComponent?!il(l,h)||!il(p,v):!0}function Xv(i,o,l){var h=!1,p=Qi,v=o.contextType;return typeof v=="object"&&v!==null?v=Jn(v):(p=Tn(o)?Ys:Zt.current,h=o.contextTypes,v=(h=h!=null)?Zo(i,p):Qi),o=new o(l,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=fc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=v),o}function Yv(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&fc.enqueueReplaceState(o,o.state,null)}function vf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},nf(i);var v=o.contextType;typeof v=="object"&&v!==null?p.context=Jn(v):(v=Tn(o)?Ys:Zt.current,p.context=Zo(i,v)),p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(gf(i,o,v,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&fc.enqueueReplaceState(p,p.state,null),oc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function aa(i,o){try{var l="",h=o;do l+=Te(h),h=h.return;while(h);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:p,digest:null}}function yf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function _f(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var y1=typeof WeakMap=="function"?WeakMap:Map;function Jv(i,o,l){l=gi(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){wc||(wc=!0,Df=h),_f(i,o)},l}function Zv(i,o,l){l=gi(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){_f(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){_f(i,o),typeof h!="function"&&(es===null?es=new Set([this]):es.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function ey(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new y1;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=N1.bind(null,i,o,l),o.then(i,i))}function ty(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function ny(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=gi(-1,1),o.tag=2,Ji(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var _1=Z.ReactCurrentOwner,Sn=!1;function fn(i,o,l,h){o.child=i===null?Tv(o,null,l,h):ra(o,i.child,l,h)}function ry(i,o,l,h,p){l=l.render;var v=o.ref;return sa(o,p),h=cf(i,o,l,h,v,p),l=hf(),i!==null&&!Sn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,vi(i,o,p)):(mt&&l&&qd(o),o.flags|=1,fn(i,o,h,p),o.child)}function iy(i,o,l,h,p){if(i===null){var v=l.type;return typeof v=="function"&&!zf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,sy(i,o,v,h,p)):(i=bc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,(i.lanes&p)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:il,l(S,h)&&i.ref===o.ref)return vi(i,o,p)}return o.flags|=1,i=is(v,h),i.ref=o.ref,i.return=o,o.child=i}function sy(i,o,l,h,p){if(i!==null){var v=i.memoizedProps;if(il(v,h)&&i.ref===o.ref)if(Sn=!1,o.pendingProps=h=v,(i.lanes&p)!==0)(i.flags&131072)!==0&&(Sn=!0);else return o.lanes=i.lanes,vi(i,o,p)}return wf(i,o,l,h,p)}function oy(i,o,l){var h=o.pendingProps,p=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ua,Un),Un|=l;else{if((l&1073741824)===0)return i=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,lt(ua,Un),Un|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,lt(ua,Un),Un|=h}else v!==null?(h=v.baseLanes|l,o.memoizedState=null):h=l,lt(ua,Un),Un|=h;return fn(i,o,p,l),o.child}function ay(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function wf(i,o,l,h,p){var v=Tn(l)?Ys:Zt.current;return v=Zo(o,v),sa(o,p),l=cf(i,o,l,h,v,p),h=hf(),i!==null&&!Sn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,vi(i,o,p)):(mt&&h&&qd(o),o.flags|=1,fn(i,o,l,p),o.child)}function ly(i,o,l,h,p){if(Tn(l)){var v=!0;Yu(o)}else v=!1;if(sa(o,p),o.stateNode===null)mc(i,o),Xv(o,l,h),vf(o,l,h,p),h=!0;else if(i===null){var S=o.stateNode,x=o.memoizedProps;S.props=x;var L=S.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=Jn(Y):(Y=Tn(l)?Ys:Zt.current,Y=Zo(o,Y));var re=l.getDerivedStateFromProps,ie=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function";ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==h||L!==Y)&&Yv(o,S,h,Y),Yi=!1;var ne=o.memoizedState;S.state=ne,oc(o,h,S,p),L=o.memoizedState,x!==h||ne!==L||En.current||Yi?(typeof re=="function"&&(gf(o,l,re,h),L=o.memoizedState),(x=Yi||Qv(o,l,x,h,ne,L,Y))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),S.props=h,S.state=L,S.context=Y,h=x):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{S=o.stateNode,Iv(i,o),x=o.memoizedProps,Y=o.type===o.elementType?x:vr(o.type,x),S.props=Y,ie=o.pendingProps,ne=S.context,L=l.contextType,typeof L=="object"&&L!==null?L=Jn(L):(L=Tn(l)?Ys:Zt.current,L=Zo(o,L));var de=l.getDerivedStateFromProps;(re=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==ie||ne!==L)&&Yv(o,S,h,L),Yi=!1,ne=o.memoizedState,S.state=ne,oc(o,h,S,p);var ve=o.memoizedState;x!==ie||ne!==ve||En.current||Yi?(typeof de=="function"&&(gf(o,l,de,h),ve=o.memoizedState),(Y=Yi||Qv(o,l,Y,h,ne,ve,L)||!1)?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ve,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ve,L)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ve),S.props=h,S.state=ve,S.context=L,h=Y):(typeof S.componentDidUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),h=!1)}return Ef(i,o,l,h,v,p)}function Ef(i,o,l,h,p,v){ay(i,o);var S=(o.flags&128)!==0;if(!h&&!S)return p&&fv(o,l,!1),vi(i,o,v);h=o.stateNode,_1.current=o;var x=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&S?(o.child=ra(o,i.child,null,v),o.child=ra(o,null,x,v)):fn(i,o,x,v),o.memoizedState=h.state,p&&fv(o,l,!0),o.child}function uy(i){var o=i.stateNode;o.pendingContext?hv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&hv(i,o.context,!1),rf(i,o.containerInfo)}function cy(i,o,l,h,p){return na(),Xd(p),o.flags|=256,fn(i,o,l,h),o.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function Sf(i){return{baseLanes:i,cachePool:null,transitions:null}}function hy(i,o,l){var h=o.pendingProps,p=gt.current,v=!1,S=(o.flags&128)!==0,x;if((x=S)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),lt(gt,p&1),i===null)return Qd(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=h.children,i=h.fallback,v?(h=o.mode,v=o.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ac(S,h,0,null),i=ao(i,h,l,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=Sf(l),o.memoizedState=Tf,i):If(o,S));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return w1(i,o,S,h,x,p,l);if(v){v=h.fallback,S=o.mode,p=i.child,x=p.sibling;var L={mode:"hidden",children:h.children};return(S&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=is(p,L),h.subtreeFlags=p.subtreeFlags&14680064),x!==null?v=is(x,v):(v=ao(v,S,l,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,S=i.child.memoizedState,S=S===null?Sf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~l,o.memoizedState=Tf,h}return v=i.child,i=v.sibling,h=is(v,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function If(i,o){return o=Ac({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function pc(i,o,l,h){return h!==null&&Xd(h),ra(o,i.child,null,l),i=If(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function w1(i,o,l,h,p,v,S){if(l)return o.flags&256?(o.flags&=-257,h=yf(Error(t(422))),pc(i,o,S,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=h.fallback,p=o.mode,h=Ac({mode:"visible",children:h.children},p,0,null),v=ao(v,p,S,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,(o.mode&1)!==0&&ra(o,i.child,null,S),o.child.memoizedState=Sf(S),o.memoizedState=Tf,v);if((o.mode&1)===0)return pc(i,o,S,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var x=h.dgst;return h=x,v=Error(t(419)),h=yf(v,h,void 0),pc(i,o,S,h)}if(x=(S&i.childLanes)!==0,Sn||x){if(h=zt,h!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,mi(i,p),wr(h,i,p,-1))}return Uf(),h=yf(Error(t(421))),pc(i,o,S,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=O1.bind(null,i),p._reactRetry=o,null):(i=v.treeContext,jn=Gi(p.nextSibling),Fn=o,mt=!0,gr=null,i!==null&&(Xn[Yn++]=fi,Xn[Yn++]=pi,Xn[Yn++]=Js,fi=i.id,pi=i.overflow,Js=o),o=If(o,h.children),o.flags|=4096,o)}function dy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ef(i.return,o,l)}function Cf(i,o,l,h,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=p)}function fy(i,o,l){var h=o.pendingProps,p=h.revealOrder,v=h.tail;if(fn(i,o,h.children,l),h=gt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dy(i,l,o);else if(i.tag===19)dy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(lt(gt,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&ac(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Cf(o,!1,p,l,v);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&ac(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Cf(o,!0,l,null,v);break;case"together":Cf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function mc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function vi(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ro|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=is(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=is(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function E1(i,o,l){switch(o.tag){case 3:uy(o),na();break;case 5:Av(o);break;case 1:Tn(o.type)&&Yu(o);break;case 4:rf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;lt(rc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(lt(gt,gt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?hy(i,o,l):(lt(gt,gt.current&1),i=vi(i,o,l),i!==null?i.sibling:null);lt(gt,gt.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return fy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),lt(gt,gt.current),h)break;return null;case 22:case 23:return o.lanes=0,oy(i,o,l)}return vi(i,o,l)}var py,bf,my,gy;py=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},bf=function(){},my=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,to(Mr.current);var v=null;switch(l){case"input":p=Hn(i,p),h=Hn(i,h),v=[];break;case"select":p=oe({},p,{value:void 0}),h=oe({},h,{value:void 0}),v=[];break;case"textarea":p=xs(i,p),h=xs(i,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Ku)}Ms(l,h);var S;l=null;for(Y in p)if(!h.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var x=p[Y];for(S in x)x.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?v||(v=[]):(v=v||[]).push(Y,null));for(Y in h){var L=h[Y];if(x=p!=null?p[Y]:void 0,h.hasOwnProperty(Y)&&L!==x&&(L!=null||x!=null))if(Y==="style")if(x){for(S in x)!x.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in L)L.hasOwnProperty(S)&&x[S]!==L[S]&&(l||(l={}),l[S]=L[S])}else l||(v||(v=[]),v.push(Y,l)),l=L;else Y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,x=x?x.__html:void 0,L!=null&&x!==L&&(v=v||[]).push(Y,L)):Y==="children"?typeof L!="string"&&typeof L!="number"||(v=v||[]).push(Y,""+L):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(L!=null&&Y==="onScroll"&&ht("scroll",i),v||x===L||(v=[])):(v=v||[]).push(Y,L))}l&&(v=v||[]).push("style",l);var Y=v;(o.updateQueue=Y)&&(o.flags|=4)}},gy=function(i,o,l,h){l!==h&&(o.flags|=4)};function _l(i,o){if(!mt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function T1(i,o,l){var h=o.pendingProps;switch(Gd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return Tn(o.type)&&Xu(),tn(o),null;case 3:return h=o.stateNode,oa(),dt(En),dt(Zt),af(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(tc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gr!==null&&(Lf(gr),gr=null))),bf(i,o),tn(o),null;case 5:sf(o);var p=to(pl.current);if(l=o.type,i!==null&&o.stateNode!=null)my(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return tn(o),null}if(i=to(Mr.current),tc(o)){h=o.stateNode,l=o.type;var v=o.memoizedProps;switch(h[Vr]=o,h[ul]=v,i=(o.mode&1)!==0,l){case"dialog":ht("cancel",h),ht("close",h);break;case"iframe":case"object":case"embed":ht("load",h);break;case"video":case"audio":for(p=0;p<ol.length;p++)ht(ol[p],h);break;case"source":ht("error",h);break;case"img":case"image":case"link":ht("error",h),ht("load",h);break;case"details":ht("toggle",h);break;case"input":ir(h,v),ht("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},ht("invalid",h);break;case"textarea":Di(h,v),ht("invalid",h)}Ms(l,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var x=v[S];S==="children"?typeof x=="string"?h.textContent!==x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(v.suppressHydrationWarning!==!0&&Gu(h.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&ht("scroll",h)}switch(l){case"input":un(h),Ao(h,v,!0);break;case"textarea":un(h),yn(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Ku)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=xe(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=S.createElement(l,{is:h.is}):(i=S.createElement(l),l==="select"&&(S=i,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):i=S.createElementNS(i,l),i[Vr]=o,i[ul]=h,py(i,o,!1,!1),o.stateNode=i;e:{switch(S=Mi(l,h),l){case"dialog":ht("cancel",i),ht("close",i),p=h;break;case"iframe":case"object":case"embed":ht("load",i),p=h;break;case"video":case"audio":for(p=0;p<ol.length;p++)ht(ol[p],i);p=h;break;case"source":ht("error",i),p=h;break;case"img":case"image":case"link":ht("error",i),ht("load",i),p=h;break;case"details":ht("toggle",i),p=h;break;case"input":ir(i,h),p=Hn(i,h),ht("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=oe({},h,{value:void 0}),ht("invalid",i);break;case"textarea":Di(i,h),p=xs(i,h),ht("invalid",i);break;default:p=h}Ms(l,p),x=p;for(v in x)if(x.hasOwnProperty(v)){var L=x[v];v==="style"?Ds(i,L):v==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Ns(i,L)):v==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&Pr(i,L):typeof L=="number"&&Pr(i,""+L):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?L!=null&&v==="onScroll"&&ht("scroll",i):L!=null&&X(i,v,L,S))}switch(l){case"input":un(i),Ao(i,h,!1);break;case"textarea":un(i),yn(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Le(h.value));break;case"select":i.multiple=!!h.multiple,v=h.value,v!=null?On(i,!!h.multiple,v,!1):h.defaultValue!=null&&On(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ku)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)gy(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=to(pl.current),to(Mr.current),tc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Vr]=o,(v=h.nodeValue!==l)&&(i=Fn,i!==null))switch(i.tag){case 3:Gu(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gu(h.nodeValue,l,(i.mode&1)!==0)}v&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Vr]=o,o.stateNode=h}return tn(o),null;case 13:if(dt(gt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mt&&jn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)_v(),na(),o.flags|=98560,v=!1;else if(v=tc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Vr]=o}else na(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),v=!1}else gr!==null&&(Lf(gr),gr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(gt.current&1)!==0?Lt===0&&(Lt=3):Uf())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return oa(),bf(i,o),i===null&&al(o.stateNode.containerInfo),tn(o),null;case 10:return Zd(o.type._context),tn(o),null;case 17:return Tn(o.type)&&Xu(),tn(o),null;case 19:if(dt(gt),v=o.memoizedState,v===null)return tn(o),null;if(h=(o.flags&128)!==0,S=v.rendering,S===null)if(h)_l(v,!1);else{if(Lt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ac(i),S!==null){for(o.flags|=128,_l(v,!1),h=S.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)v=l,i=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return lt(gt,gt.current&1|2),o.child}i=i.sibling}v.tail!==null&&at()>ca&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304)}else{if(!h)if(i=ac(S),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),_l(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!mt)return tn(o),null}else 2*at()-v.renderingStartTime>ca&&l!==1073741824&&(o.flags|=128,h=!0,_l(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=at(),o.sibling=null,l=gt.current,lt(gt,h?l&1|2:l&1),o):(tn(o),null);case 22:case 23:return jf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Un&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function S1(i,o){switch(Gd(o),o.tag){case 1:return Tn(o.type)&&Xu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return oa(),dt(En),dt(Zt),af(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return sf(o),null;case 13:if(dt(gt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));na()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return dt(gt),null;case 4:return oa(),null;case 10:return Zd(o.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var gc=!1,nn=!1,I1=typeof WeakSet=="function"?WeakSet:Set,pe=null;function la(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){wt(i,o,h)}else l.current=null}function Af(i,o,l){try{l()}catch(h){wt(i,o,h)}}var vy=!1;function C1(i,o){if(Fd=Hi,i=Qg(),kd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,x=-1,L=-1,Y=0,re=0,ie=i,ne=null;t:for(;;){for(var de;ie!==l||p!==0&&ie.nodeType!==3||(x=S+p),ie!==v||h!==0&&ie.nodeType!==3||(L=S+h),ie.nodeType===3&&(S+=ie.nodeValue.length),(de=ie.firstChild)!==null;)ne=ie,ie=de;for(;;){if(ie===i)break t;if(ne===l&&++Y===p&&(x=S),ne===v&&++re===h&&(L=S),(de=ie.nextSibling)!==null)break;ie=ne,ne=ie.parentNode}ie=de}l=x===-1||L===-1?null:{start:x,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(jd={focusedElem:i,selectionRange:l},Hi=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var ye=ve.memoizedProps,Ct=ve.memoizedState,q=o.stateNode,U=q.getSnapshotBeforeUpdate(o.elementType===o.type?ye:vr(o.type,ye),Ct);q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){wt(o,o.return,ae)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ve=vy,vy=!1,ve}function wl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var v=p.destroy;p.destroy=void 0,v!==void 0&&Af(o,l,v)}p=p.next}while(p!==h)}}function vc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Rf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function yy(i){var o=i.alternate;o!==null&&(i.alternate=null,yy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Vr],delete o[ul],delete o[$d],delete o[a1],delete o[l1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function _y(i){return i.tag===5||i.tag===3||i.tag===4}function wy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||_y(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ku));else if(h!==4&&(i=i.child,i!==null))for(Pf(i,o,l),i=i.sibling;i!==null;)Pf(i,o,l),i=i.sibling}function kf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(kf(i,o,l),i=i.sibling;i!==null;)kf(i,o,l),i=i.sibling}var qt=null,yr=!1;function Zi(i,o,l){for(l=l.child;l!==null;)Ey(i,o,l),l=l.sibling}function Ey(i,o,l){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount($s,l)}catch{}switch(l.tag){case 5:nn||la(l,o);case 6:var h=qt,p=yr;qt=null,Zi(i,o,l),qt=h,yr=p,qt!==null&&(yr?(i=qt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):qt.removeChild(l.stateNode));break;case 18:qt!==null&&(yr?(i=qt,l=l.stateNode,i.nodeType===8?Bd(i.parentNode,l):i.nodeType===1&&Bd(i,l),fr(i)):Bd(qt,l.stateNode));break;case 4:h=qt,p=yr,qt=l.stateNode.containerInfo,yr=!0,Zi(i,o,l),qt=h,yr=p;break;case 0:case 11:case 14:case 15:if(!nn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Af(l,o,S),p=p.next}while(p!==h)}Zi(i,o,l);break;case 1:if(!nn&&(la(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(x){wt(l,o,x)}Zi(i,o,l);break;case 21:Zi(i,o,l);break;case 22:l.mode&1?(nn=(h=nn)||l.memoizedState!==null,Zi(i,o,l),nn=h):Zi(i,o,l);break;default:Zi(i,o,l)}}function Ty(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new I1),o.forEach(function(h){var p=D1.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function _r(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var v=i,S=o,x=S;e:for(;x!==null;){switch(x.tag){case 5:qt=x.stateNode,yr=!1;break e;case 3:qt=x.stateNode.containerInfo,yr=!0;break e;case 4:qt=x.stateNode.containerInfo,yr=!0;break e}x=x.return}if(qt===null)throw Error(t(160));Ey(v,S,p),qt=null,yr=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch(Y){wt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sy(o,i),o=o.sibling}function Sy(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(_r(o,i),Fr(i),h&4){try{wl(3,i,i.return),vc(3,i)}catch(ye){wt(i,i.return,ye)}try{wl(5,i,i.return)}catch(ye){wt(i,i.return,ye)}}break;case 1:_r(o,i),Fr(i),h&512&&l!==null&&la(l,l.return);break;case 5:if(_r(o,i),Fr(i),h&512&&l!==null&&la(l,l.return),i.flags&32){var p=i.stateNode;try{Pr(p,"")}catch(ye){wt(i,i.return,ye)}}if(h&4&&(p=i.stateNode,p!=null)){var v=i.memoizedProps,S=l!==null?l.memoizedProps:v,x=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{x==="input"&&v.type==="radio"&&v.name!=null&&ks(p,v),Mi(x,S);var Y=Mi(x,v);for(S=0;S<L.length;S+=2){var re=L[S],ie=L[S+1];re==="style"?Ds(p,ie):re==="dangerouslySetInnerHTML"?Ns(p,ie):re==="children"?Pr(p,ie):X(p,re,ie,Y)}switch(x){case"input":Oi(p,v);break;case"textarea":Vi(p,v);break;case"select":var ne=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var de=v.value;de!=null?On(p,!!v.multiple,de,!1):ne!==!!v.multiple&&(v.defaultValue!=null?On(p,!!v.multiple,v.defaultValue,!0):On(p,!!v.multiple,v.multiple?[]:"",!1))}p[ul]=v}catch(ye){wt(i,i.return,ye)}}break;case 6:if(_r(o,i),Fr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,v=i.memoizedProps;try{p.nodeValue=v}catch(ye){wt(i,i.return,ye)}}break;case 3:if(_r(o,i),Fr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{fr(o.containerInfo)}catch(ye){wt(i,i.return,ye)}break;case 4:_r(o,i),Fr(i);break;case 13:_r(o,i),Fr(i),p=i.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Of=at())),h&4&&Ty(i);break;case 22:if(re=l!==null&&l.memoizedState!==null,i.mode&1?(nn=(Y=nn)||re,_r(o,i),nn=Y):_r(o,i),Fr(i),h&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!re&&(i.mode&1)!==0)for(pe=i,re=i.child;re!==null;){for(ie=pe=re;pe!==null;){switch(ne=pe,de=ne.child,ne.tag){case 0:case 11:case 14:case 15:wl(4,ne,ne.return);break;case 1:la(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){h=ne,l=ne.return;try{o=h,ve.props=o.memoizedProps,ve.state=o.memoizedState,ve.componentWillUnmount()}catch(ye){wt(h,l,ye)}}break;case 5:la(ne,ne.return);break;case 22:if(ne.memoizedState!==null){by(ie);continue}}de!==null?(de.return=ne,pe=de):by(ie)}re=re.sibling}e:for(re=null,ie=i;;){if(ie.tag===5){if(re===null){re=ie;try{p=ie.stateNode,Y?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(x=ie.stateNode,L=ie.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,x.style.display=Os("display",S))}catch(ye){wt(i,i.return,ye)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=Y?"":ie.memoizedProps}catch(ye){wt(i,i.return,ye)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:_r(o,i),Fr(i),h&4&&Ty(i);break;case 21:break;default:_r(o,i),Fr(i)}}function Fr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(_y(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Pr(p,""),h.flags&=-33);var v=wy(i);kf(i,v,p);break;case 3:case 4:var S=h.stateNode.containerInfo,x=wy(i);Pf(i,x,S);break;default:throw Error(t(161))}}catch(L){wt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function b1(i,o,l){pe=i,Iy(i)}function Iy(i,o,l){for(var h=(i.mode&1)!==0;pe!==null;){var p=pe,v=p.child;if(p.tag===22&&h){var S=p.memoizedState!==null||gc;if(!S){var x=p.alternate,L=x!==null&&x.memoizedState!==null||nn;x=gc;var Y=nn;if(gc=S,(nn=L)&&!Y)for(pe=p;pe!==null;)S=pe,L=S.child,S.tag===22&&S.memoizedState!==null?Ay(p):L!==null?(L.return=S,pe=L):Ay(p);for(;v!==null;)pe=v,Iy(v),v=v.sibling;pe=p,gc=x,nn=Y}Cy(i)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,pe=v):Cy(i)}}function Cy(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:nn||vc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!nn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:vr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&bv(o,v,h);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}bv(o,S,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var re=Y.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&fr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||o.flags&512&&Rf(o)}catch(ne){wt(o,o.return,ne)}}if(o===i){pe=null;break}if(l=o.sibling,l!==null){l.return=o.return,pe=l;break}pe=o.return}}function by(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Ay(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{vc(4,o)}catch(L){wt(o,l,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(L){wt(o,p,L)}}var v=o.return;try{Rf(o)}catch(L){wt(o,v,L)}break;case 5:var S=o.return;try{Rf(o)}catch(L){wt(o,S,L)}}}catch(L){wt(o,o.return,L)}if(o===i){pe=null;break}var x=o.sibling;if(x!==null){x.return=o.return,pe=x;break}pe=o.return}}var A1=Math.ceil,yc=Z.ReactCurrentDispatcher,xf=Z.ReactCurrentOwner,er=Z.ReactCurrentBatchConfig,Je=0,zt=null,Pt=null,Gt=0,Un=0,ua=Ki(0),Lt=0,El=null,ro=0,_c=0,Nf=0,Tl=null,In=null,Of=0,ca=1/0,yi=null,wc=!1,Df=null,es=null,Ec=!1,ts=null,Tc=0,Sl=0,Vf=null,Sc=-1,Ic=0;function pn(){return(Je&6)!==0?at():Sc!==-1?Sc:Sc=at()}function ns(i){return(i.mode&1)===0?1:(Je&2)!==0&&Gt!==0?Gt&-Gt:c1.transition!==null?(Ic===0&&(Ic=Ws()),Ic):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:Ya(i.type)),i)}function wr(i,o,l,h){if(50<Sl)throw Sl=0,Vf=null,Error(t(185));Ui(i,l,h),((Je&2)===0||i!==zt)&&(i===zt&&((Je&2)===0&&(_c|=l),Lt===4&&rs(i,Gt)),Cn(i,h),l===1&&Je===0&&(o.mode&1)===0&&(ca=at()+500,Ju&&Xi()))}function Cn(i,o){var l=i.callbackNode;oi(i,o);var h=Hs(i,i===zt?Gt:0);if(h===0)l!==null&&qa(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&qa(l),o===1)i.tag===0?u1(Py.bind(null,i)):pv(Py.bind(null,i)),s1(function(){(Je&6)===0&&Xi()}),l=null;else{switch(Bi(h)){case 1:l=Bs;break;case 4:l=Li;break;case 16:l=Gn;break;case 536870912:l=Iu;break;default:l=Gn}l=Ly(l,Ry.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Ry(i,o){if(Sc=-1,Ic=0,(Je&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ha()&&i.callbackNode!==l)return null;var h=Hs(i,i===zt?Gt:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Cc(i,h);else{o=h;var p=Je;Je|=2;var v=xy();(zt!==i||Gt!==o)&&(yi=null,ca=at()+500,so(i,o));do try{k1();break}catch(x){ky(i,x)}while(!0);Jd(),yc.current=v,Je=p,Pt!==null?o=0:(zt=null,Gt=0,o=Lt)}if(o!==0){if(o===2&&(p=Vn(i),p!==0&&(h=p,o=Mf(i,p))),o===1)throw l=El,so(i,0),rs(i,h),Cn(i,at()),l;if(o===6)rs(i,h);else{if(p=i.current.alternate,(h&30)===0&&!R1(p)&&(o=Cc(i,h),o===2&&(v=Vn(i),v!==0&&(h=v,o=Mf(i,v))),o===1))throw l=El,so(i,0),rs(i,h),Cn(i,at()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:oo(i,In,yi);break;case 3:if(rs(i,h),(h&130023424)===h&&(o=Of+500-at(),10<o)){if(Hs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){pn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=zd(oo.bind(null,i,In,yi),o);break}oo(i,In,yi);break;case 4:if(rs(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var S=31-hn(h);v=1<<S,S=o[S],S>p&&(p=S),h&=~v}if(h=p,h=at()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*A1(h/1960))-h,10<h){i.timeoutHandle=zd(oo.bind(null,i,In,yi),h);break}oo(i,In,yi);break;case 5:oo(i,In,yi);break;default:throw Error(t(329))}}}return Cn(i,at()),i.callbackNode===l?Ry.bind(null,i):null}function Mf(i,o){var l=Tl;return i.current.memoizedState.isDehydrated&&(so(i,o).flags|=256),i=Cc(i,o),i!==2&&(o=In,In=l,o!==null&&Lf(o)),i}function Lf(i){In===null?In=i:In.push.apply(In,i)}function R1(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],v=p.getSnapshot;p=p.value;try{if(!mr(v(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rs(i,o){for(o&=~Nf,o&=~_c,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-hn(o),h=1<<l;i[l]=-1,o&=~h}}function Py(i){if((Je&6)!==0)throw Error(t(327));ha();var o=Hs(i,0);if((o&1)===0)return Cn(i,at()),null;var l=Cc(i,o);if(i.tag!==0&&l===2){var h=Vn(i);h!==0&&(o=h,l=Mf(i,h))}if(l===1)throw l=El,so(i,0),rs(i,o),Cn(i,at()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,oo(i,In,yi),Cn(i,at()),null}function Ff(i,o){var l=Je;Je|=1;try{return i(o)}finally{Je=l,Je===0&&(ca=at()+500,Ju&&Xi())}}function io(i){ts!==null&&ts.tag===0&&(Je&6)===0&&ha();var o=Je;Je|=1;var l=er.transition,h=Ke;try{if(er.transition=null,Ke=1,i)return i()}finally{Ke=h,er.transition=l,Je=o,(Je&6)===0&&Xi()}}function jf(){Un=ua.current,dt(ua)}function so(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,i1(l)),Pt!==null)for(l=Pt.return;l!==null;){var h=l;switch(Gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Xu();break;case 3:oa(),dt(En),dt(Zt),af();break;case 5:sf(h);break;case 4:oa();break;case 13:dt(gt);break;case 19:dt(gt);break;case 10:Zd(h.type._context);break;case 22:case 23:jf()}l=l.return}if(zt=i,Pt=i=is(i.current,null),Gt=Un=o,Lt=0,El=null,Nf=_c=ro=0,In=Tl=null,eo!==null){for(o=0;o<eo.length;o++)if(l=eo[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,v=l.pending;if(v!==null){var S=v.next;v.next=p,h.next=S}l.pending=h}eo=null}return i}function ky(i,o){do{var l=Pt;try{if(Jd(),lc.current=dc,uc){for(var h=vt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}uc=!1}if(no=0,Ut=Mt=vt=null,ml=!1,gl=0,xf.current=null,l===null||l.return===null){Lt=1,El=o,Pt=null;break}e:{var v=i,S=l.return,x=l,L=o;if(o=Gt,x.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Y=L,re=x,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var de=ty(S);if(de!==null){de.flags&=-257,ny(de,S,x,v,o),de.mode&1&&ey(v,Y,o),o=de,L=Y;var ve=o.updateQueue;if(ve===null){var ye=new Set;ye.add(L),o.updateQueue=ye}else ve.add(L);break e}else{if((o&1)===0){ey(v,Y,o),Uf();break e}L=Error(t(426))}}else if(mt&&x.mode&1){var Ct=ty(S);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),ny(Ct,S,x,v,o),Xd(aa(L,x));break e}}v=L=aa(L,x),Lt!==4&&(Lt=2),Tl===null?Tl=[v]:Tl.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var q=Jv(v,L,o);Cv(v,q);break e;case 1:x=L;var U=v.type,G=v.stateNode;if((v.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(es===null||!es.has(G)))){v.flags|=65536,o&=-o,v.lanes|=o;var ae=Zv(v,x,o);Cv(v,ae);break e}}v=v.return}while(v!==null)}Oy(l)}catch(_e){o=_e,Pt===l&&l!==null&&(Pt=l=l.return);continue}break}while(!0)}function xy(){var i=yc.current;return yc.current=dc,i===null?dc:i}function Uf(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),zt===null||(ro&268435455)===0&&(_c&268435455)===0||rs(zt,Gt)}function Cc(i,o){var l=Je;Je|=2;var h=xy();(zt!==i||Gt!==o)&&(yi=null,so(i,o));do try{P1();break}catch(p){ky(i,p)}while(!0);if(Jd(),Je=l,yc.current=h,Pt!==null)throw Error(t(261));return zt=null,Gt=0,Lt}function P1(){for(;Pt!==null;)Ny(Pt)}function k1(){for(;Pt!==null&&!Tu();)Ny(Pt)}function Ny(i){var o=My(i.alternate,i,Un);i.memoizedProps=i.pendingProps,o===null?Oy(i):Pt=o,xf.current=null}function Oy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=T1(l,o,Un),l!==null){Pt=l;return}}else{if(l=S1(l,o),l!==null){l.flags&=32767,Pt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Lt=6,Pt=null;return}}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=i}while(o!==null);Lt===0&&(Lt=5)}function oo(i,o,l){var h=Ke,p=er.transition;try{er.transition=null,Ke=1,x1(i,o,l,h)}finally{er.transition=p,Ke=h}return null}function x1(i,o,l,h){do ha();while(ts!==null);if((Je&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(st(i,v),i===zt&&(Pt=zt=null,Gt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ec||(Ec=!0,Ly(Gn,function(){return ha(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=er.transition,er.transition=null;var S=Ke;Ke=1;var x=Je;Je|=4,xf.current=null,C1(i,l),Sy(l,i),YI(jd),Hi=!!Fd,jd=Fd=null,i.current=l,b1(l),Td(),Je=x,Ke=S,er.transition=v}else i.current=l;if(Ec&&(Ec=!1,ts=i,Tc=p),v=i.pendingLanes,v===0&&(es=null),Cu(l.stateNode),Cn(i,at()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(wc)throw wc=!1,i=Df,Df=null,i;return(Tc&1)!==0&&i.tag!==0&&ha(),v=i.pendingLanes,(v&1)!==0?i===Vf?Sl++:(Sl=0,Vf=i):Sl=0,Xi(),null}function ha(){if(ts!==null){var i=Bi(Tc),o=er.transition,l=Ke;try{if(er.transition=null,Ke=16>i?16:i,ts===null)var h=!1;else{if(i=ts,ts=null,Tc=0,(Je&6)!==0)throw Error(t(331));var p=Je;for(Je|=4,pe=i.current;pe!==null;){var v=pe,S=v.child;if((pe.flags&16)!==0){var x=v.deletions;if(x!==null){for(var L=0;L<x.length;L++){var Y=x[L];for(pe=Y;pe!==null;){var re=pe;switch(re.tag){case 0:case 11:case 15:wl(8,re,v)}var ie=re.child;if(ie!==null)ie.return=re,pe=ie;else for(;pe!==null;){re=pe;var ne=re.sibling,de=re.return;if(yy(re),re===Y){pe=null;break}if(ne!==null){ne.return=de,pe=ne;break}pe=de}}}var ve=v.alternate;if(ve!==null){var ye=ve.child;if(ye!==null){ve.child=null;do{var Ct=ye.sibling;ye.sibling=null,ye=Ct}while(ye!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,pe=S;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:wl(9,v,v.return)}var q=v.sibling;if(q!==null){q.return=v.return,pe=q;break e}pe=v.return}}var U=i.current;for(pe=U;pe!==null;){S=pe;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,pe=G;else e:for(S=U;pe!==null;){if(x=pe,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:vc(9,x)}}catch(_e){wt(x,x.return,_e)}if(x===S){pe=null;break e}var ae=x.sibling;if(ae!==null){ae.return=x.return,pe=ae;break e}pe=x.return}}if(Je=p,Xi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot($s,i)}catch{}h=!0}return h}finally{Ke=l,er.transition=o}}return!1}function Dy(i,o,l){o=aa(l,o),o=Jv(i,o,1),i=Ji(i,o,1),o=pn(),i!==null&&(Ui(i,1,o),Cn(i,o))}function wt(i,o,l){if(i.tag===3)Dy(i,i,l);else for(;o!==null;){if(o.tag===3){Dy(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(es===null||!es.has(h))){i=aa(l,i),i=Zv(o,i,1),o=Ji(o,i,1),i=pn(),o!==null&&(Ui(o,1,i),Cn(o,i));break}}o=o.return}}function N1(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=pn(),i.pingedLanes|=i.suspendedLanes&l,zt===i&&(Gt&l)===l&&(Lt===4||Lt===3&&(Gt&130023424)===Gt&&500>at()-Of?so(i,0):Nf|=l),Cn(i,o)}function Vy(i,o){o===0&&((i.mode&1)===0?o=1:(o=Do,Do<<=1,(Do&130023424)===0&&(Do=4194304)));var l=pn();i=mi(i,o),i!==null&&(Ui(i,o,l),Cn(i,l))}function O1(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Vy(i,l)}function D1(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),Vy(i,l)}var My;My=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||En.current)Sn=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return Sn=!1,E1(i,o,l);Sn=(i.flags&131072)!==0}else Sn=!1,mt&&(o.flags&1048576)!==0&&mv(o,ec,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;mc(i,o),i=o.pendingProps;var p=Zo(o,Zt.current);sa(o,l),p=cf(null,o,h,i,p,l);var v=hf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tn(h)?(v=!0,Yu(o)):v=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,nf(o),p.updater=fc,o.stateNode=p,p._reactInternals=o,vf(o,h,i,l),o=Ef(null,o,h,!0,v,l)):(o.tag=0,mt&&v&&qd(o),fn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(mc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=M1(h),i=vr(h,i),p){case 0:o=wf(null,o,h,i,l);break e;case 1:o=ly(null,o,h,i,l);break e;case 11:o=ry(null,o,h,i,l);break e;case 14:o=iy(null,o,h,vr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:vr(h,p),wf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:vr(h,p),ly(i,o,h,p,l);case 3:e:{if(uy(o),i===null)throw Error(t(387));h=o.pendingProps,v=o.memoizedState,p=v.element,Iv(i,o),oc(o,h,null,l);var S=o.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){p=aa(Error(t(423)),o),o=cy(i,o,h,l,p);break e}else if(h!==p){p=aa(Error(t(424)),o),o=cy(i,o,h,l,p);break e}else for(jn=Gi(o.stateNode.containerInfo.firstChild),Fn=o,mt=!0,gr=null,l=Tv(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(na(),h===p){o=vi(i,o,l);break e}fn(i,o,h,l)}o=o.child}return o;case 5:return Av(o),i===null&&Qd(o),h=o.type,p=o.pendingProps,v=i!==null?i.memoizedProps:null,S=p.children,Ud(h,p)?S=null:v!==null&&Ud(h,v)&&(o.flags|=32),ay(i,o),fn(i,o,S,l),o.child;case 6:return i===null&&Qd(o),null;case 13:return hy(i,o,l);case 4:return rf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ra(o,null,h,l):fn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:vr(h,p),ry(i,o,h,p,l);case 7:return fn(i,o,o.pendingProps,l),o.child;case 8:return fn(i,o,o.pendingProps.children,l),o.child;case 12:return fn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,v=o.memoizedProps,S=p.value,lt(rc,h._currentValue),h._currentValue=S,v!==null)if(mr(v.value,S)){if(v.children===p.children&&!En.current){o=vi(i,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var x=v.dependencies;if(x!==null){S=v.child;for(var L=x.firstContext;L!==null;){if(L.context===h){if(v.tag===1){L=gi(-1,l&-l),L.tag=2;var Y=v.updateQueue;if(Y!==null){Y=Y.shared;var re=Y.pending;re===null?L.next=L:(L.next=re.next,re.next=L),Y.pending=L}}v.lanes|=l,L=v.alternate,L!==null&&(L.lanes|=l),ef(v.return,l,o),x.lanes|=l;break}L=L.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,x=S.alternate,x!==null&&(x.lanes|=l),ef(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}fn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,sa(o,l),p=Jn(p),h=h(p),o.flags|=1,fn(i,o,h,l),o.child;case 14:return h=o.type,p=vr(h,o.pendingProps),p=vr(h.type,p),iy(i,o,h,p,l);case 15:return sy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:vr(h,p),mc(i,o),o.tag=1,Tn(h)?(i=!0,Yu(o)):i=!1,sa(o,l),Xv(o,h,p),vf(o,h,p,l),Ef(null,o,h,!0,i,l);case 19:return fy(i,o,l);case 22:return oy(i,o,l)}throw Error(t(156,o.tag))};function Ly(i,o){return No(i,o)}function V1(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(i,o,l,h){return new V1(i,o,l,h)}function zf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function M1(i){if(typeof i=="function")return zf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===Ve)return 14}return 2}function is(i,o){var l=i.alternate;return l===null?(l=tr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function bc(i,o,l,h,p,v){var S=2;if(h=i,typeof i=="function")zf(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return ao(l.children,p,v,o);case C:S=8,p|=8;break;case P:return i=tr(12,l,o,p|2),i.elementType=P,i.lanes=v,i;case k:return i=tr(13,l,o,p),i.elementType=k,i.lanes=v,i;case ze:return i=tr(19,l,o,p),i.elementType=ze,i.lanes=v,i;case $e:return Ac(l,p,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:S=10;break e;case j:S=9;break e;case z:S=11;break e;case Ve:S=14;break e;case Be:S=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=tr(S,l,o,p),o.elementType=i,o.type=h,o.lanes=v,o}function ao(i,o,l,h){return i=tr(7,i,h,o),i.lanes=l,i}function Ac(i,o,l,h){return i=tr(22,i,h,o),i.elementType=$e,i.lanes=l,i.stateNode={isHidden:!1},i}function Bf(i,o,l){return i=tr(6,i,null,o),i.lanes=l,i}function $f(i,o,l){return o=tr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function L1(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Hf(i,o,l,h,p,v,S,x,L){return i=new L1(i,o,l,x,L),o===1?(o=1,v===!0&&(o|=8)):o=0,v=tr(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(v),i}function F1(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function Fy(i){if(!i)return Qi;i=i._reactInternals;e:{if(lr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(Tn(l))return dv(i,l,o)}return o}function jy(i,o,l,h,p,v,S,x,L){return i=Hf(l,h,!0,i,p,v,S,x,L),i.context=Fy(null),l=i.current,h=pn(),p=ns(l),v=gi(h,p),v.callback=o??null,Ji(l,v,p),i.current.lanes=p,Ui(i,p,h),Cn(i,h),i}function Rc(i,o,l,h){var p=o.current,v=pn(),S=ns(p);return l=Fy(l),o.context===null?o.context=l:o.pendingContext=l,o=gi(v,S),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Ji(p,o,S),i!==null&&(wr(i,p,S,v),sc(i,p,S)),S}function Pc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Uy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Wf(i,o){Uy(i,o),(i=i.alternate)&&Uy(i,o)}function j1(){return null}var zy=typeof reportError=="function"?reportError:function(i){console.error(i)};function qf(i){this._internalRoot=i}kc.prototype.render=qf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Rc(i,o,null,null)},kc.prototype.unmount=qf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;io(function(){Rc(null,i,null,null)}),o[hi]=null}};function kc(i){this._internalRoot=i}kc.prototype.unstable_scheduleHydration=function(i){if(i){var o=ku();i={blockedOn:null,target:i,priority:o};for(var l=0;l<xr.length&&o!==0&&o<xr[l].priority;l++);xr.splice(l,0,i),l===0&&Ou(i)}};function Gf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function By(){}function U1(i,o,l,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var Y=Pc(S);v.call(Y)}}var S=jy(o,h,i,0,null,!1,!1,"",By);return i._reactRootContainer=S,i[hi]=S.current,al(i.nodeType===8?i.parentNode:i),io(),S}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var x=h;h=function(){var Y=Pc(L);x.call(Y)}}var L=Hf(i,0,!1,null,null,!1,!1,"",By);return i._reactRootContainer=L,i[hi]=L.current,al(i.nodeType===8?i.parentNode:i),io(function(){Rc(o,L,l,h)}),L}function Nc(i,o,l,h,p){var v=l._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var x=p;p=function(){var L=Pc(S);x.call(L)}}Rc(o,S,i,p)}else S=U1(l,o,i,p,h);return Pc(S)}Ru=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=Fi(o.pendingLanes);l!==0&&(zi(o,l|1),Cn(o,at()),(Je&6)===0&&(ca=at()+500,Xi()))}break;case 13:io(function(){var h=mi(i,1);if(h!==null){var p=pn();wr(h,i,1,p)}}),Wf(i,1)}},Vo=function(i){if(i.tag===13){var o=mi(i,134217728);if(o!==null){var l=pn();wr(o,i,134217728,l)}Wf(i,134217728)}},Pu=function(i){if(i.tag===13){var o=ns(i),l=mi(i,o);if(l!==null){var h=pn();wr(l,i,o,h)}Wf(i,o)}},ku=function(){return Ke},xu=function(i,o){var l=Ke;try{return Ke=i,o()}finally{Ke=l}},le=function(i,o,l){switch(o){case"input":if(Oi(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=Qu(h);if(!p)throw Error(t(90));$n(h),Oi(h,p)}}}break;case"textarea":Vi(i,l);break;case"select":o=l.value,o!=null&&On(i,!!l.multiple,o,!1)}},Fs=Ff,Ba=io;var z1={usingClientEntryPoint:!1,Events:[cl,Yo,Qu,qn,Ls,Ff]},Il={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B1={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wa(i),i===null?null:i.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||j1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{$s=Oc.inject(B1),Dn=Oc}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1,bn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(o))throw Error(t(200));return F1(i,o,null,l)},bn.createRoot=function(i,o){if(!Gf(i))throw Error(t(299));var l=!1,h="",p=zy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Hf(i,1,!1,null,null,l,!1,h,p),i[hi]=o.current,al(i.nodeType===8?i.parentNode:i),new qf(o)},bn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wa(o),i=i===null?null:i.stateNode,i},bn.flushSync=function(i){return io(i)},bn.hydrate=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!0,l)},bn.hydrateRoot=function(i,o,l){if(!Gf(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,v="",S=zy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=jy(o,null,i,1,l??null,p,!1,v,S),i[hi]=o.current,al(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new kc(o)},bn.render=function(i,o,l){if(!xc(o))throw Error(t(200));return Nc(null,i,o,!1,l)},bn.unmountComponentAtNode=function(i){if(!xc(i))throw Error(t(40));return i._reactRootContainer?(io(function(){Nc(null,null,i,!1,function(){i._reactRootContainer=null,i[hi]=null})}),!0):!1},bn.unstable_batchedUpdates=Ff,bn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nc(i,o,l,!1,h)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var Xy;function D0(){if(Xy)return Xf.exports;Xy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xf.exports=X1(),Xf.exports}var Yy;function Y1(){if(Yy)return Dc;Yy=1;var n=D0();return Dc.createRoot=n.createRoot,Dc.hydrateRoot=n.hydrateRoot,Dc}var J1=Y1();const Z1=N0(J1);var eC=D0();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bl.apply(this,arguments)}var ds;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ds||(ds={}));const Jy="popstate";function tC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return bp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:V0(s)}return rC(e,t,null,n)}function Dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nC(){return Math.random().toString(36).substr(2,8)}function Zy(n,e){return{usr:n.state,key:n.key,idx:e}}function bp(n,e,t,r){return t===void 0&&(t=null),Bl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?xa(e):e,{state:t,key:e&&e.key||r||nC()})}function V0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=ds.Pop,f=null,m=y();m==null&&(m=0,u.replaceState(Bl({},u.state,{idx:m}),""));function y(){return(u.state||{idx:null}).idx}function E(){d=ds.Pop;let b=y(),B=b==null?null:b-m;m=b,f&&f({action:d,location:D.location,delta:B})}function _(b,B){d=ds.Push;let K=bp(D.location,b,B);m=y()+1;let X=Zy(K,m),Z=D.createHref(K);try{u.pushState(X,"",Z)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(Z)}a&&f&&f({action:d,location:D.location,delta:1})}function R(b,B){d=ds.Replace;let K=bp(D.location,b,B);m=y();let X=Zy(K,m),Z=D.createHref(K);u.replaceState(X,"",Z),a&&f&&f({action:d,location:D.location,delta:0})}function O(b){let B=s.location.origin!=="null"?s.location.origin:s.location.href,K=typeof b=="string"?b:V0(b);return K=K.replace(/ $/,"%20"),Dt(B,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,B)}let D={get action(){return d},get location(){return n(s,u)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Jy,E),f=b,()=>{s.removeEventListener(Jy,E),f=null}},createHref(b){return e(s,b)},createURL:O,encodeLocation(b){let B=O(b);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:_,replace:R,go(b){return u.go(b)}};return D}var e_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(e_||(e_={}));function iC(n,e,t){return t===void 0&&(t="/"),sC(n,e,t)}function sC(n,e,t,r){let s=typeof e=="string"?xa(e):e,a=F0(s.pathname||"/",t);if(a==null)return null;let u=M0(n);oC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=yC(a);d=mC(u[f],m)}return d}function M0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Dt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=fo([r,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(Dt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),M0(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:fC(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of L0(a.path))s(a,u,f)}),e}function L0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=L0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function oC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:pC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const aC=/^:[\w-]+$/,lC=3,uC=2,cC=1,hC=10,dC=-2,t_=n=>n==="*";function fC(n,e){let t=n.split("/"),r=t.length;return t.some(t_)&&(r+=dC),e&&(r+=uC),t.filter(s=>!t_(s)).reduce((s,a)=>s+(aC.test(a)?lC:a===""?cC:hC),r)}function pC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function mC(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",E=gC({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),_=f.route;if(!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:fo([a,E.pathname]),pathnameBase:SC(fo([a,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(a=fo([a,E.pathnameBase]))}return u}function gC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=vC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,y,E)=>{let{paramName:_,isOptional:R}=y;if(_==="*"){let D=d[E]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const O=d[E];return R&&!O?m[_]=void 0:m[_]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function vC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function F0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const _C=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wC=n=>_C.test(n);function EC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?xa(n):n,a;if(t)if(wC(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),mm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=n_(t.substring(1),"/"):a=n_(t,e)}else a=e;return{pathname:a,search:IC(r),hash:CC(s)}}function n_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j0(n,e){let t=TC(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function U0(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=xa(n):(s=Bl({},n),Dt(!s.pathname||!s.pathname.includes("?"),Zf("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),Zf("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),Zf("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),E-=1;s.pathname=_.join("/")}d=E>=0?e[E]:"/"}let f=EC(s,d),m=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}const fo=n=>n.join("/").replace(/\/\/+/g,"/"),SC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const z0=["post","put","patch","delete"];new Set(z0);const AC=["get",...z0];new Set(AC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$l.apply(this,arguments)}const gm=V.createContext(null),RC=V.createContext(null),nu=V.createContext(null),jh=V.createContext(null),To=V.createContext({outlet:null,matches:[],isDataRoute:!1}),B0=V.createContext(null);function ru(){return V.useContext(jh)!=null}function vm(){return ru()||Dt(!1),V.useContext(jh).location}function $0(n){V.useContext(nu).static||V.useLayoutEffect(n)}function iu(){let{isDataRoute:n}=V.useContext(To);return n?zC():PC()}function PC(){ru()||Dt(!1);let n=V.useContext(gm),{basename:e,future:t,navigator:r}=V.useContext(nu),{matches:s}=V.useContext(To),{pathname:a}=vm(),u=JSON.stringify(j0(s,t.v7_relativeSplatPath)),d=V.useRef(!1);return $0(()=>{d.current=!0}),V.useCallback(function(m,y){if(y===void 0&&(y={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let E=U0(m,JSON.parse(u),a,y.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:fo([e,E.pathname])),(y.replace?r.replace:r.push)(E,y.state,y)},[e,r,u,a,n])}function kC(n,e){return xC(n,e)}function xC(n,e,t,r){ru()||Dt(!1);let{navigator:s}=V.useContext(nu),{matches:a}=V.useContext(To),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=vm(),y;if(e){var E;let b=typeof e=="string"?xa(e):e;f==="/"||(E=b.pathname)!=null&&E.startsWith(f)||Dt(!1),y=b}else y=m;let _=y.pathname||"/",R=_;if(f!=="/"){let b=f.replace(/^\//,"").split("/");R="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let O=iC(n,{pathname:R}),D=MC(O&&O.map(b=>Object.assign({},b,{params:Object.assign({},d,b.params),pathname:fo([f,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:fo([f,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,r);return e&&D?V.createElement(jh.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:ds.Pop}},D):D}function NC(){let n=UC(),e=bC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,null)}const OC=V.createElement(NC,null);class DC extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(To.Provider,{value:this.props.routeContext},V.createElement(B0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VC(n){let{routeContext:e,match:t,children:r}=n,s=V.useContext(gm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(To.Provider,{value:e},r)}function MC(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let y=u.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);y>=0||Dt(!1),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<u.length;y++){let E=u[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:_,errors:R}=t,O=E.route.loader&&_[E.route.id]===void 0&&(!R||R[E.route.id]===void 0);if(E.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((y,E,_)=>{let R,O=!1,D=null,b=null;t&&(R=d&&E.route.id?d[E.route.id]:void 0,D=E.route.errorElement||OC,f&&(m<0&&_===0?(BC("route-fallback"),O=!0,b=null):m===_&&(O=!0,b=E.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,_+1)),K=()=>{let X;return R?X=D:O?X=b:E.route.Component?X=V.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=y,V.createElement(VC,{match:E,routeContext:{outlet:y,matches:B,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||_===0)?V.createElement(DC,{location:t.location,revalidation:t.revalidation,component:D,error:R,children:K(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):K()},null)}var H0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(H0||{}),W0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(W0||{});function LC(n){let e=V.useContext(gm);return e||Dt(!1),e}function FC(n){let e=V.useContext(RC);return e||Dt(!1),e}function jC(n){let e=V.useContext(To);return e||Dt(!1),e}function q0(n){let e=jC(),t=e.matches[e.matches.length-1];return t.route.id||Dt(!1),t.route.id}function UC(){var n;let e=V.useContext(B0),t=FC(),r=q0();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function zC(){let{router:n}=LC(H0.UseNavigateStable),e=q0(W0.UseNavigateStable),t=V.useRef(!1);return $0(()=>{t.current=!0}),V.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$l({fromRouteId:e},a)))},[n,e])}const r_={};function BC(n,e,t){r_[n]||(r_[n]=!0)}function $C(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Sr(n){let{to:e,replace:t,state:r,relative:s}=n;ru()||Dt(!1);let{future:a,static:u}=V.useContext(nu),{matches:d}=V.useContext(To),{pathname:f}=vm(),m=iu(),y=U0(e,j0(d,a.v7_relativeSplatPath),f,s==="path"),E=JSON.stringify(y);return V.useEffect(()=>m(JSON.parse(E),{replace:t,state:r,relative:s}),[m,E,s,t,r]),null}function lo(n){Dt(!1)}function HC(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ds.Pop,navigator:a,static:u=!1,future:d}=n;ru()&&Dt(!1);let f=e.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:u,future:$l({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=xa(r));let{pathname:y="/",search:E="",hash:_="",state:R=null,key:O="default"}=r,D=V.useMemo(()=>{let b=F0(y,f);return b==null?null:{location:{pathname:b,search:E,hash:_,state:R,key:O},navigationType:s}},[f,y,E,_,R,O,s]);return D==null?null:V.createElement(nu.Provider,{value:m},V.createElement(jh.Provider,{children:t,value:D}))}function WC(n){let{children:e,location:t}=n;return kC(Ap(e),t)}new Promise(()=>{});function Ap(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,s)=>{if(!V.isValidElement(r))return;let a=[...e,s];if(r.type===V.Fragment){t.push.apply(t,Ap(r.props.children,a));return}r.type!==lo&&Dt(!1),!r.props.index||!r.props.children||Dt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Ap(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qC="6";try{window.__reactRouterVersion=qC}catch{}const GC="startTransition",i_=Cp[GC];function KC(n){let{basename:e,children:t,future:r,window:s}=n,a=V.useRef();a.current==null&&(a.current=tC({window:s,v5Compat:!0}));let u=a.current,[d,f]=V.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},y=V.useCallback(E=>{m&&i_?i_(()=>f(E)):f(E)},[f,m]);return V.useLayoutEffect(()=>u.listen(y),[u,y]),V.useEffect(()=>$C(r),[r]),V.createElement(HC,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}var s_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(s_||(s_={}));var o_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(o_||(o_={}));function a_(){var t;const n=((t=window.matchMedia)==null?void 0:t.call(window,"(display-mode: standalone)").matches)??!1,e=window.navigator.standalone===!0;return n||e}function QC(){return/iPad|iPhone|iPod/.test(window.navigator.userAgent)}function XC(){const[n,e]=V.useState(null),[t,r]=V.useState(!1);V.useEffect(()=>{function d(f){f.preventDefault(),e(f)}return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const s=V.useMemo(()=>!a_()&&QC()&&!t&&!n,[t,n]),a=V.useMemo(()=>!a_()&&!t&&!!n,[n,t]);async function u(){if(!n)return;await n.prompt(),(await n.userChoice).outcome==="accepted"&&e(null),r(!0)}return!s&&!a?null:T.jsxs("section",{className:"install-banner","aria-live":"polite",children:[T.jsx("p",{className:"hint",children:a?"Aggiungi Beastly alla schermata Home per aprirla come app.":"Su iPhone: Condividi -> Aggiungi a Home per installare Beastly."}),T.jsxs("div",{className:"install-actions",children:[a?T.jsx("button",{className:"btn",type:"button",onClick:()=>void u(),children:"Aggiungi alla Home"}):null,T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>r(!0),children:"Chiudi"})]})]})}const G0=V.createContext(null);function YC({children:n}){const[e,t]=V.useState([]),r=V.useCallback((a,u)=>{const d=Date.now()+Math.floor(Math.random()*1e3);t(f=>[...f,{id:d,type:a,message:u}]),window.setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},3200)},[]),s=V.useMemo(()=>({showSuccess:a=>r("success",a),showError:a=>r("error",a)}),[r]);return T.jsxs(G0.Provider,{value:s,children:[n,T.jsx("div",{className:"toast-wrap","aria-live":"polite","aria-atomic":"true",children:e.map(a=>T.jsx("div",{className:`toast toast-${a.type}`,children:a.message},a.id))})]})}function Uh(){const n=V.useContext(G0);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const JC=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ZC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,y=a>>2,E=(a&3)<<4|d>>4;let _=(d&15)<<2|m>>6,R=m&63;f||(R=64,u||(_=64)),r.push(t[y],t[E],t[_],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new eb;const _=a<<2|d>>4;if(r.push(_),m!==64){const R=d<<4&240|m>>2;if(r.push(R),E!==64){const O=m<<6&192|E;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tb=function(n){const e=K0(n);return Q0.encodeByteArray(e,!0)},ch=function(n){return tb(n).replace(/\./g,"")},X0=function(n){try{return Q0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=()=>nb().__FIREBASE_DEFAULTS__,ib=()=>{if(typeof process>"u"||typeof l_>"u")return;const n=l_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X0(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return JC()||rb()||ib()||sb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Y0=n=>{var e,t;return(t=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ym=n=>{const e=Y0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},J0=()=>{var n;return(n=zh())===null||n===void 0?void 0:n.config},Z0=n=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ch(JSON.stringify(t)),ch(JSON.stringify(u)),""].join(".")}const Vl={};function ab(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?n.emulator.push(e):n.prod.push(e);return n}function lb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let u_=!1;function $h(n,e){if(typeof window>"u"||typeof document>"u"||!xi(window.location.host)||Vl[n]===e||Vl[n]||u_)return;Vl[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=ab().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{u_=!0,u()},_}function y(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function E(){const _=lb(r),R=t("text"),O=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),b=document.getElementById(D)||document.createElement("a"),B=t("preprendIcon"),K=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const X=_.element;d(X),y(b,D);const Z=m();f(K,B),X.append(K,O,b,Z),document.body.appendChild(X)}a?(O.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ub(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function cb(){var n;const e=(n=zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function db(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pb(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mb(){return!cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gb(){try{return typeof indexedDB=="object"}catch{return!1}}function vb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="FirebaseError";class Ar extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yb,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?_b(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Ar(s,d,r)}}function _b(n,e){return n.replace(wb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wb=/\{\$([^}]+)}/g;function Eb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(c_(a)&&c_(u)){if(!go(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function c_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tb(n,e){const t=new Sb(n,e);return t.subscribe.bind(t)}class Sb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ib(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ep),s.error===void 0&&(s.error=ep),s.complete===void 0&&(s.complete=ep);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ib(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n){return n&&n._delegate?n._delegate:n}class Ci{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ob;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ab(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bb(n){return n===uo?void 0:n}function Ab(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Cb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const Pb={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},kb=qe.INFO,xb={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Nb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=xb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=kb,this._logHandler=Nb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Ob=(n,e)=>e.some(t=>n instanceof t);let h_,d_;function Db(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vb(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,Rp=new WeakMap,nE=new WeakMap,tp=new WeakMap,wm=new WeakMap;function Mb(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ps(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tE.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function Lb(n){if(Rp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Rp.set(n,e)}let Pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Fb(n){Pp=n(Pp)}function jb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(np(this),e,...t);return nE.set(r,e.sort?e.sort():[e]),ps(r)}:Vb().includes(n)?function(...e){return n.apply(np(this),e),ps(tE.get(this))}:function(...e){return ps(n.apply(np(this),e))}}function Ub(n){return typeof n=="function"?jb(n):(n instanceof IDBTransaction&&Lb(n),Ob(n,Db())?new Proxy(n,Pp):n)}function ps(n){if(n instanceof IDBRequest)return Mb(n);if(tp.has(n))return tp.get(n);const e=Ub(n);return e!==n&&(tp.set(n,e),wm.set(e,n)),e}const np=n=>wm.get(n);function zb(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=ps(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ps(u.result),f.oldVersion,f.newVersion,ps(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Bb=["get","getKey","getAll","getAllKeys","count"],$b=["put","add","delete","clear"],rp=new Map;function f_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=$b.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Bb.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return rp.set(e,a),a}Fb(n=>({...n,get:(e,t,r)=>f_(e,t)||n.get(e,t,r),has:(e,t)=>!!f_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Wb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Wb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",p_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new _m("@firebase/app"),qb="@firebase/app-compat",Gb="@firebase/analytics-compat",Kb="@firebase/analytics",Qb="@firebase/app-check-compat",Xb="@firebase/app-check",Yb="@firebase/auth",Jb="@firebase/auth-compat",Zb="@firebase/database",eA="@firebase/data-connect",tA="@firebase/database-compat",nA="@firebase/functions",rA="@firebase/functions-compat",iA="@firebase/installations",sA="@firebase/installations-compat",oA="@firebase/messaging",aA="@firebase/messaging-compat",lA="@firebase/performance",uA="@firebase/performance-compat",cA="@firebase/remote-config",hA="@firebase/remote-config-compat",dA="@firebase/storage",fA="@firebase/storage-compat",pA="@firebase/firestore",mA="@firebase/ai",gA="@firebase/firestore-compat",vA="firebase",yA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",_A={[kp]:"fire-core",[qb]:"fire-core-compat",[Kb]:"fire-analytics",[Gb]:"fire-analytics-compat",[Xb]:"fire-app-check",[Qb]:"fire-app-check-compat",[Yb]:"fire-auth",[Jb]:"fire-auth-compat",[Zb]:"fire-rtdb",[eA]:"fire-data-connect",[tA]:"fire-rtdb-compat",[nA]:"fire-fn",[rA]:"fire-fn-compat",[iA]:"fire-iid",[sA]:"fire-iid-compat",[oA]:"fire-fcm",[aA]:"fire-fcm-compat",[lA]:"fire-perf",[uA]:"fire-perf-compat",[cA]:"fire-rc",[hA]:"fire-rc-compat",[dA]:"fire-gcs",[fA]:"fire-gcs-compat",[pA]:"fire-fst",[gA]:"fire-fst-compat",[mA]:"fire-vertex","fire-js":"fire-js",[vA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,wA=new Map,Np=new Map;function m_(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _s(n){const e=n.name;if(Np.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,n);for(const t of hh.values())m_(t,n);for(const t of wA.values())m_(t,n);return!0}function au(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new su("app","Firebase",EA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=yA;function rE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(t||(t=J0()),!t)throw ms.create("no-options");const a=hh.get(s);if(a){if(go(t,a.options)&&go(r,a.config))return a;throw ms.create("duplicate-app",{appName:s})}const u=new Rb(s);for(const f of Np.values())u.addComponent(f);const d=new TA(t,r,u);return hh.set(s,d),d}function Hh(n=xp){const e=hh.get(n);if(!e&&n===xp&&J0())return rE();if(!e)throw ms.create("no-app",{appName:n});return e}function rr(n,e,t){var r;let s=(r=_A[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(d.join(" "));return}_s(new Ci(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-heartbeat-database",IA=1,Hl="firebase-heartbeat-store";let ip=null;function iE(){return ip||(ip=zb(SA,IA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),ip}async function CA(n){try{const t=(await iE()).transaction(Hl),r=await t.objectStore(Hl).get(sE(n));return await t.done,r}catch(e){if(e instanceof Ar)bi.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(t.message)}}}async function g_(n,e){try{const r=(await iE()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,sE(n)),await r.done}catch(t){if(t instanceof Ar)bi.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bi.warn(r.message)}}}function sE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=1024,AA=30;class RA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=v_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>AA){const u=xA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v_(),{heartbeatsToSend:r,unsentEntries:s}=PA(this._heartbeatsCache.heartbeats),a=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return bi.warn(t),""}}}function v_(){return new Date().toISOString().substring(0,10)}function PA(n,e=bA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),y_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),y_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gb()?vb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y_(n){return ch(JSON.stringify({version:2,heartbeats:n})).length}function xA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n){_s(new Ci("platform-logger",e=>new Hb(e),"PRIVATE")),_s(new Ci("heartbeat",e=>new RA(e),"PRIVATE")),rr(kp,p_,n),rr(kp,p_,"esm2017"),rr("fire-js","")}NA("");var OA="firebase",DA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(OA,DA,"app");function Em(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function oE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VA=oE,aE=new su("auth","Firebase",oE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new _m("@firebase/auth");function MA(n,...e){dh.logLevel<=qe.WARN&&dh.warn(`Auth (${So}): ${n}`,...e)}function Qc(n,...e){dh.logLevel<=qe.ERROR&&dh.error(`Auth (${So}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n,...e){throw Sm(n,...e)}function Ir(n,...e){return Sm(n,...e)}function Tm(n,e,t){const r=Object.assign(Object.assign({},VA()),{[e]:t});return new su("auth","Firebase",r).create(e,{appName:n.name})}function gs(n){return Tm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xr(n,"argument-error"),Tm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return aE.create(n,...e)}function De(n,e,...t){if(!n)throw Sm(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qc(e),new Error(e)}function Ai(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LA(){return __()==="http:"||__()==="https:"}function __(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LA()||db()||"connection"in navigator)?navigator.onLine:!0}function jA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=ub()||fb()}get(){return FA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BA=new lu(3e4,6e4);function Cm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Na(n,e,t,r,s={}){return cE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=ou(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return hb()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&xi(n.emulatorConfig.host)&&(m.credentials="include"),uE.fetch()(await hE(n,n.config.apiHost,t,d),m)})}async function cE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},UA),e);try{const s=new HA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Vc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Vc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Vc(n,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Tm(n,y,m);Xr(n,y)}}catch(s){if(s instanceof Ar)throw s;Xr(n,"network-request-failed",{message:String(s)})}}async function $A(n,e,t,r,s={}){const a=await Na(n,e,t,r,s);return"mfaPendingCredential"in a&&Xr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function hE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Im(n.config,s):`${n.config.apiScheme}://${s}`;return zA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class HA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ir(this.auth,"network-request-failed")),BA.get())})}}function Vc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ir(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(n,e){return Na(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return Na(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qA(n,e=!1){const t=ct(n),r=await t.getIdToken(e),s=bm(r);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Ml(sp(s.auth_time)),issuedAtTime:Ml(sp(s.iat)),expirationTime:Ml(sp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function sp(n){return Number(n)*1e3}function bm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=X0(t);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function w_(n){const e=bm(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ar&&GA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function GA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Wl(n,fh(t,{idToken:r}));De(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?dE(a.providerUserInfo):[],d=XA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),y=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Dp(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,E)}async function QA(n){const e=ct(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dE(n){return n.map(e=>{var{providerId:t}=e,r=Em(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(n,e){const t=await cE(n,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await hE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&xi(n.emulatorConfig.host)&&(f.credentials="include"),uE.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JA(n,e){return Na(n,"POST","/v2/accounts:revokeToken",Cm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=w_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await YA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new va;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(De(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Em(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Dp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qA(this,e)}reload(){return QA(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Wl(this,WA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,y;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,b=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,B=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:X,emailVerified:Z,isAnonymous:$,providerData:F,stsTokenManager:A}=t;De(X&&A,e,"internal-error");const C=va.fromJSON(this.name,A);De(typeof X=="string",e,"internal-error"),os(E,e.name),os(_,e.name),De(typeof Z=="boolean",e,"internal-error"),De(typeof $=="boolean",e,"internal-error"),os(R,e.name),os(O,e.name),os(D,e.name),os(b,e.name),os(B,e.name),os(K,e.name);const P=new Tr({uid:X,auth:e,email:_,emailVerified:Z,displayName:E,isAnonymous:$,photoURL:O,phoneNumber:R,tenantId:D,stsTokenManager:C,createdAt:B,lastLoginAt:K});return F&&Array.isArray(F)&&(P.providerData=F.map(N=>Object.assign({},N))),b&&(P._redirectEventId=b),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new va;s.updateFromServerResponse(t);const a=new Tr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];De(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?dE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new va;d.updateFromIdToken(r);const f=new Tr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;function Ei(n){Ai(n instanceof Function,"Expected a class definition");let e=E_.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,E_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fE.type="NONE";const T_=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n,e,t){return`firebase:${n}:${e}:${t}`}class ya{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Xc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xc("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?Tr._fromGetAccountInfoResponse(this.auth,t,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ya(Ei(T_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ei(T_);const u=Xc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(u);if(y){let E;if(typeof y=="string"){const _=await fh(e,{idToken:y}).catch(()=>{});if(!_)break;E=await Tr._fromGetAccountInfoResponse(e,_,y)}else E=Tr._fromJSON(e,y);m!==a&&(d=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new ya(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new ya(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(wE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pE(n=ln()){return/firefox\//i.test(n)}function mE(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(n=ln()){return/crios\//i.test(n)}function vE(n=ln()){return/iemobile/i.test(n)}function yE(n=ln()){return/android/i.test(n)}function _E(n=ln()){return/blackberry/i.test(n)}function wE(n=ln()){return/webos/i.test(n)}function Am(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZA(n=ln()){var e;return Am(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eR(){return pb()&&document.documentMode===10}function EE(n=ln()){return Am(n)||yE(n)||wE(n)||_E(n)||/windows phone/i.test(n)||vE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n,e=[]){let t;switch(n){case"Browser":t=S_(ln());break;case"Worker":t=`${S_(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${So}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(n,e={}){return Na(n,"GET","/v2/passwordPolicy",Cm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=6;class iR{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:rR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new tR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ei(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(gs(this));const t=e?ct(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nR(this),t=new iR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await JA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ei(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[Ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&MA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oa(n){return ct(n)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tb(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(n){Rm=n}function aR(n){return Rm.loadJS(n)}function lR(){return Rm.gapiScript}function uR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n,e){const t=au(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(go(a,e??{}))return s;Xr(s,"already-initialized")}return t.initialize({options:e})}function hR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ei);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dR(n,e,t){const r=Oa(n);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=SE(e),{host:u,port:d}=fR(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},y=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(go(m,r.config.emulator)&&go(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,xi(u)?(Bh(`${a}//${u}${f}`),$h("Auth",!0)):pR()}function SE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fR(n){const e=SE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:C_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:C_(u)}}}function C_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n,e){return $A(n,"POST","/v1/accounts:signInWithIdp",Cm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="http://localhost";class vo extends IE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Em(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new vo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return _a(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_a(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:mR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Wh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends uu{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _i.credential(t,r)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends uu{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends uu{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Tr._fromIdTokenResponse(e,r,s),u=b_(r);return new Sa({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=b_(r);return new Sa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function b_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Ar{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new mh(e,t,r,s)}}function CE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,a,e,r):a})}async function gR(n,e,t=!1){const r=await Wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e,t=!1){const{auth:r}=n;if(Rn(r.app))return Promise.reject(gs(r));const s="reauthenticate";try{const a=await Wl(n,CE(r,s,e,n),t);De(a.idToken,r,"internal-error");const u=bm(a.idToken);De(u,r,"internal-error");const{sub:d}=u;return De(n.uid===d,r,"user-mismatch"),Sa._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,e,t=!1){if(Rn(n.app))return Promise.reject(gs(n));const r="signIn",s=await CE(n,r,e),a=await Sa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n,e){return ct(n).setPersistence(e)}function bE(n,e,t,r){return ct(n).onIdTokenChanged(e,t,r)}function wR(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function qh(n){return ct(n).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1e3,TR=10;class RE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);eR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const PE=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kE.type="SESSION";const xE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await SR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Pm("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const _=E;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(_.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function CR(n){Hr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function bR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function RR(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebaseLocalStorageDb",PR=1,vh="firebaseLocalStorage",DE="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function kR(){const n=indexedDB.deleteDatabase(OE);return new cu(n).toPromise()}function Vp(){const n=indexedDB.open(OE,PR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:DE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await kR(),e(await Vp()))})})}async function A_(n,e,t){const r=Kh(n,!0).put({[DE]:e,value:t});return new cu(r).toPromise()}async function xR(n,e){const t=Kh(n,!1).get(e),r=await new cu(t).toPromise();return r===void 0?null:r.value}function R_(n,e){const t=Kh(n,!0).delete(e);return new cu(t).toPromise()}const NR=800,OR=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>OR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(RR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await bR(),!this.activeServiceWorker)return;this.sender=new IR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await A_(e,gh,"1"),await R_(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>A_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>R_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Kh(s,!1).getAll();return new cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const DR=VE;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){return e?Ei(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends IE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VR(n){return yR(n.auth,new xm(n),n.bypassAuthState)}function MR(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),vR(t,new xm(n),n.bypassAuthState)}async function LR(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),gR(t,new xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VR;case"linkViaPopup":case"linkViaRedirect":return LR;case"reauthViaPopup":case"reauthViaRedirect":return MR;default:Xr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new lu(2e3,1e4);async function jR(n,e,t){if(Rn(n.app))return Promise.reject(Ir(n,"operation-not-supported-in-this-environment"));const r=Oa(n);lE(n,e,Wh);const s=km(r,t);return new co(r,"signInViaPopup",e,s).executeNotNull()}class co extends ME{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FR.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="pendingRedirect",Yc=new Map;class zR extends ME{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const r=await BR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BR(n,e){const t=FE(e),r=LE(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function $R(n,e){return LE(n)._set(FE(e),"true")}function HR(n,e){Yc.set(n._key(),e)}function LE(n){return Ei(n._redirectPersistence)}function FE(n){return Xc(UR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,e,t){return qR(n,e,t)}async function qR(n,e,t){if(Rn(n.app))return Promise.reject(gs(n));const r=Oa(n);lE(n,e,Wh),await r._initializationPromise;const s=km(r,t);return await $R(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function GR(n,e){return await Oa(n)._initializationPromise,jE(n,e,!1)}async function jE(n,e,t=!1){if(Rn(n.app))return Promise.reject(gs(n));const r=Oa(n),s=km(r,e),u=await new zR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=600*1e3;class QR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!UE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ir(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KR&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e={}){return Na(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZR=/^https?/;async function eP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await YR(n);for(const t of e)try{if(tP(t))return}catch{}Xr(n,"unauthorized-domain")}function tP(n){const e=Op(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!ZR.test(t))return!1;if(JR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new lu(3e4,6e4);function k_(){const n=Hr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function rP(n){return new Promise((e,t)=>{var r,s,a;function u(){k_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k_(),t(Ir(n,"network-request-failed"))},timeout:nP.get()})}if(!((s=(r=Hr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Hr().gapi)===null||a===void 0)&&a.load)u();else{const d=uR("iframefcb");return Hr()[d]=()=>{gapi.load?u():t(Ir(n,"network-request-failed"))},aR(`${lR()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function iP(n){return Jc=Jc||rP(n),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new lu(5e3,15e3),oP="__/auth/iframe",aP="emulator/auth/iframe",lP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cP(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Im(e,aP):`https://${n.config.authDomain}/${oP}`,r={apiKey:e.apiKey,appName:n.name,v:So},s=uP.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ou(r).slice(1)}`}async function hP(n){const e=await iP(n),t=Hr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:cP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lP,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=Ir(n,"network-request-failed"),d=Hr().setTimeout(()=>{a(u)},sP.get());function f(){Hr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fP=500,pP=600,mP="_blank",gP="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vP(n,e,t,r=fP,s=pP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},dP),{width:r.toString(),height:s.toString(),top:a,left:u}),m=ln().toLowerCase();t&&(d=gE(m)?mP:t),pE(m)&&(e=e||gP,f.scrollbars="yes");const y=Object.entries(f).reduce((_,[R,O])=>`${_}${R}=${O},`,"");if(ZA(m)&&d!=="_self")return yP(e||"",d),new x_(null);const E=window.open(e||"",d,y);De(E,n,"popup-blocked");try{E.focus()}catch{}return new x_(E)}function yP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="__/auth/handler",wP="emulator/auth/handler",EP=encodeURIComponent("fac");async function N_(n,e,t,r,s,a){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:So,eventId:s};if(e instanceof Wh){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Eb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof uu){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),m=f?`#${EP}=${encodeURIComponent(f)}`:"";return`${TP(n)}?${ou(d).slice(1)}${m}`}function TP({config:n}){return n.emulator?Im(n,wP):`https://${n.authDomain}/${_P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class SP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xE,this._completeRedirectFn=jE,this._overrideRedirectResult=HR}async _openPopup(e,t,r,s){var a;Ai((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await N_(e,t,r,Op(),s);return vP(e,u,Pm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await N_(e,t,r,Op(),s);return CR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ai(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await hP(e),r=new QR(e);return t.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(op,{type:op},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[op];u!==void 0&&t(!!u),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return EE()||mE()||Am()}}const IP=SP;var O_="@firebase/auth",D_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AP(n){_s(new Ci("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(n)},m=new sR(r,s,a,f);return hR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_s(new Ci("auth-internal",e=>{const t=Oa(e.getProvider("auth").getImmediate());return(r=>new CP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(O_,D_,bP(n)),rr(O_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=300,PP=Z0("authIdTokenMaxAge")||RP;let V_=null;const kP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PP)return;const s=t==null?void 0:t.token;V_!==s&&(V_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xP(n=Hh()){const e=au(n,"auth");if(e.isInitialized())return e.getImmediate();const t=cR(n,{popupRedirectResolver:IP,persistence:[DR,PE,xE]}),r=Z0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=kP(a.toString());wR(t,u,()=>u(t.currentUser)),bE(t,d=>u(d))}}const s=Y0("auth");return s&&dR(t,`http://${s}`),t}function NP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}oR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Ir("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",NP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AP("Browser");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,zE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function P(){}P.prototype=C.prototype,A.D=C.prototype,A.prototype=new P,A.prototype.constructor=A,A.C=function(N,j,z){for(var k=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)k[ze-2]=arguments[ze];return C.prototype[j].apply(N,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,P){P||(P=0);var N=Array(16);if(typeof C=="string")for(var j=0;16>j;++j)N[j]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(j=0;16>j;++j)N[j]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=A.g[0],P=A.g[1],j=A.g[2];var z=A.g[3],k=C+(z^P&(j^z))+N[0]+3614090360&4294967295;C=P+(k<<7&4294967295|k>>>25),k=z+(j^C&(P^j))+N[1]+3905402710&4294967295,z=C+(k<<12&4294967295|k>>>20),k=j+(P^z&(C^P))+N[2]+606105819&4294967295,j=z+(k<<17&4294967295|k>>>15),k=P+(C^j&(z^C))+N[3]+3250441966&4294967295,P=j+(k<<22&4294967295|k>>>10),k=C+(z^P&(j^z))+N[4]+4118548399&4294967295,C=P+(k<<7&4294967295|k>>>25),k=z+(j^C&(P^j))+N[5]+1200080426&4294967295,z=C+(k<<12&4294967295|k>>>20),k=j+(P^z&(C^P))+N[6]+2821735955&4294967295,j=z+(k<<17&4294967295|k>>>15),k=P+(C^j&(z^C))+N[7]+4249261313&4294967295,P=j+(k<<22&4294967295|k>>>10),k=C+(z^P&(j^z))+N[8]+1770035416&4294967295,C=P+(k<<7&4294967295|k>>>25),k=z+(j^C&(P^j))+N[9]+2336552879&4294967295,z=C+(k<<12&4294967295|k>>>20),k=j+(P^z&(C^P))+N[10]+4294925233&4294967295,j=z+(k<<17&4294967295|k>>>15),k=P+(C^j&(z^C))+N[11]+2304563134&4294967295,P=j+(k<<22&4294967295|k>>>10),k=C+(z^P&(j^z))+N[12]+1804603682&4294967295,C=P+(k<<7&4294967295|k>>>25),k=z+(j^C&(P^j))+N[13]+4254626195&4294967295,z=C+(k<<12&4294967295|k>>>20),k=j+(P^z&(C^P))+N[14]+2792965006&4294967295,j=z+(k<<17&4294967295|k>>>15),k=P+(C^j&(z^C))+N[15]+1236535329&4294967295,P=j+(k<<22&4294967295|k>>>10),k=C+(j^z&(P^j))+N[1]+4129170786&4294967295,C=P+(k<<5&4294967295|k>>>27),k=z+(P^j&(C^P))+N[6]+3225465664&4294967295,z=C+(k<<9&4294967295|k>>>23),k=j+(C^P&(z^C))+N[11]+643717713&4294967295,j=z+(k<<14&4294967295|k>>>18),k=P+(z^C&(j^z))+N[0]+3921069994&4294967295,P=j+(k<<20&4294967295|k>>>12),k=C+(j^z&(P^j))+N[5]+3593408605&4294967295,C=P+(k<<5&4294967295|k>>>27),k=z+(P^j&(C^P))+N[10]+38016083&4294967295,z=C+(k<<9&4294967295|k>>>23),k=j+(C^P&(z^C))+N[15]+3634488961&4294967295,j=z+(k<<14&4294967295|k>>>18),k=P+(z^C&(j^z))+N[4]+3889429448&4294967295,P=j+(k<<20&4294967295|k>>>12),k=C+(j^z&(P^j))+N[9]+568446438&4294967295,C=P+(k<<5&4294967295|k>>>27),k=z+(P^j&(C^P))+N[14]+3275163606&4294967295,z=C+(k<<9&4294967295|k>>>23),k=j+(C^P&(z^C))+N[3]+4107603335&4294967295,j=z+(k<<14&4294967295|k>>>18),k=P+(z^C&(j^z))+N[8]+1163531501&4294967295,P=j+(k<<20&4294967295|k>>>12),k=C+(j^z&(P^j))+N[13]+2850285829&4294967295,C=P+(k<<5&4294967295|k>>>27),k=z+(P^j&(C^P))+N[2]+4243563512&4294967295,z=C+(k<<9&4294967295|k>>>23),k=j+(C^P&(z^C))+N[7]+1735328473&4294967295,j=z+(k<<14&4294967295|k>>>18),k=P+(z^C&(j^z))+N[12]+2368359562&4294967295,P=j+(k<<20&4294967295|k>>>12),k=C+(P^j^z)+N[5]+4294588738&4294967295,C=P+(k<<4&4294967295|k>>>28),k=z+(C^P^j)+N[8]+2272392833&4294967295,z=C+(k<<11&4294967295|k>>>21),k=j+(z^C^P)+N[11]+1839030562&4294967295,j=z+(k<<16&4294967295|k>>>16),k=P+(j^z^C)+N[14]+4259657740&4294967295,P=j+(k<<23&4294967295|k>>>9),k=C+(P^j^z)+N[1]+2763975236&4294967295,C=P+(k<<4&4294967295|k>>>28),k=z+(C^P^j)+N[4]+1272893353&4294967295,z=C+(k<<11&4294967295|k>>>21),k=j+(z^C^P)+N[7]+4139469664&4294967295,j=z+(k<<16&4294967295|k>>>16),k=P+(j^z^C)+N[10]+3200236656&4294967295,P=j+(k<<23&4294967295|k>>>9),k=C+(P^j^z)+N[13]+681279174&4294967295,C=P+(k<<4&4294967295|k>>>28),k=z+(C^P^j)+N[0]+3936430074&4294967295,z=C+(k<<11&4294967295|k>>>21),k=j+(z^C^P)+N[3]+3572445317&4294967295,j=z+(k<<16&4294967295|k>>>16),k=P+(j^z^C)+N[6]+76029189&4294967295,P=j+(k<<23&4294967295|k>>>9),k=C+(P^j^z)+N[9]+3654602809&4294967295,C=P+(k<<4&4294967295|k>>>28),k=z+(C^P^j)+N[12]+3873151461&4294967295,z=C+(k<<11&4294967295|k>>>21),k=j+(z^C^P)+N[15]+530742520&4294967295,j=z+(k<<16&4294967295|k>>>16),k=P+(j^z^C)+N[2]+3299628645&4294967295,P=j+(k<<23&4294967295|k>>>9),k=C+(j^(P|~z))+N[0]+4096336452&4294967295,C=P+(k<<6&4294967295|k>>>26),k=z+(P^(C|~j))+N[7]+1126891415&4294967295,z=C+(k<<10&4294967295|k>>>22),k=j+(C^(z|~P))+N[14]+2878612391&4294967295,j=z+(k<<15&4294967295|k>>>17),k=P+(z^(j|~C))+N[5]+4237533241&4294967295,P=j+(k<<21&4294967295|k>>>11),k=C+(j^(P|~z))+N[12]+1700485571&4294967295,C=P+(k<<6&4294967295|k>>>26),k=z+(P^(C|~j))+N[3]+2399980690&4294967295,z=C+(k<<10&4294967295|k>>>22),k=j+(C^(z|~P))+N[10]+4293915773&4294967295,j=z+(k<<15&4294967295|k>>>17),k=P+(z^(j|~C))+N[1]+2240044497&4294967295,P=j+(k<<21&4294967295|k>>>11),k=C+(j^(P|~z))+N[8]+1873313359&4294967295,C=P+(k<<6&4294967295|k>>>26),k=z+(P^(C|~j))+N[15]+4264355552&4294967295,z=C+(k<<10&4294967295|k>>>22),k=j+(C^(z|~P))+N[6]+2734768916&4294967295,j=z+(k<<15&4294967295|k>>>17),k=P+(z^(j|~C))+N[13]+1309151649&4294967295,P=j+(k<<21&4294967295|k>>>11),k=C+(j^(P|~z))+N[4]+4149444226&4294967295,C=P+(k<<6&4294967295|k>>>26),k=z+(P^(C|~j))+N[11]+3174756917&4294967295,z=C+(k<<10&4294967295|k>>>22),k=j+(C^(z|~P))+N[2]+718787259&4294967295,j=z+(k<<15&4294967295|k>>>17),k=P+(z^(j|~C))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.u=function(A,C){C===void 0&&(C=A.length);for(var P=C-this.blockSize,N=this.B,j=this.h,z=0;z<C;){if(j==0)for(;z<=P;)s(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<C;)if(N[j++]=A.charCodeAt(z++),j==this.blockSize){s(this,N),j=0;break}}else for(;z<C;)if(N[j++]=A[z++],j==this.blockSize){s(this,N),j=0;break}}this.h=j,this.o+=C},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;var P=8*this.o;for(C=A.length-8;C<A.length;++C)A[C]=P&255,P/=256;for(this.u(A),A=Array(16),C=P=0;4>C;++C)for(var N=0;32>N;N+=8)A[P++]=this.g[C]>>>N&255;return A};function a(A,C){var P=d;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=C(A)}function u(A,C){this.h=C;for(var P=[],N=!0,j=A.length-1;0<=j;j--){var z=A[j]|0;N&&z==C||(P[j]=z,N=!1)}this.g=P}var d={};function f(A){return-128<=A&&128>A?a(A,function(C){return new u([C|0],0>C?-1:0)}):new u([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return E;if(0>A)return b(m(-A));for(var C=[],P=1,N=0;A>=P;N++)C[N]=A/P|0,P*=4294967296;return new u(C,0)}function y(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return b(y(A.substring(1),C));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(C,8)),N=E,j=0;j<A.length;j+=8){var z=Math.min(8,A.length-j),k=parseInt(A.substring(j,j+z),C);8>z?(z=m(Math.pow(C,z)),N=N.j(z).add(m(k))):(N=N.j(P),N=N.add(m(k)))}return N}var E=f(0),_=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-b(this).m();for(var A=0,C=1,P=0;P<this.g.length;P++){var N=this.i(P);A+=(0<=N?N:4294967296+N)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(O(this))return"0";if(D(this))return"-"+b(this).toString(A);for(var C=m(Math.pow(A,6)),P=this,N="";;){var j=Z(P,C).g;P=B(P,j.j(C));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(A);if(P=j,O(P))return z+N;for(;6>z.length;)z="0"+z;N=z+N}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function O(A){if(A.h!=0)return!1;for(var C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function D(A){return A.h==-1}n.l=function(A){return A=B(this,A),D(A)?-1:O(A)?0:1};function b(A){for(var C=A.g.length,P=[],N=0;N<C;N++)P[N]=~A.g[N];return new u(P,~A.h).add(_)}n.abs=function(){return D(this)?b(this):this},n.add=function(A){for(var C=Math.max(this.g.length,A.g.length),P=[],N=0,j=0;j<=C;j++){var z=N+(this.i(j)&65535)+(A.i(j)&65535),k=(z>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);N=k>>>16,z&=65535,k&=65535,P[j]=k<<16|z}return new u(P,P[P.length-1]&-2147483648?-1:0)};function B(A,C){return A.add(b(C))}n.j=function(A){if(O(this)||O(A))return E;if(D(this))return D(A)?b(this).j(b(A)):b(b(this).j(A));if(D(A))return b(this.j(b(A)));if(0>this.l(R)&&0>A.l(R))return m(this.m()*A.m());for(var C=this.g.length+A.g.length,P=[],N=0;N<2*C;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<A.g.length;j++){var z=this.i(N)>>>16,k=this.i(N)&65535,ze=A.i(j)>>>16,Ve=A.i(j)&65535;P[2*N+2*j]+=k*Ve,K(P,2*N+2*j),P[2*N+2*j+1]+=z*Ve,K(P,2*N+2*j+1),P[2*N+2*j+1]+=k*ze,K(P,2*N+2*j+1),P[2*N+2*j+2]+=z*ze,K(P,2*N+2*j+2)}for(N=0;N<C;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=C;N<2*C;N++)P[N]=0;return new u(P,0)};function K(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function X(A,C){this.g=A,this.h=C}function Z(A,C){if(O(C))throw Error("division by zero");if(O(A))return new X(E,E);if(D(A))return C=Z(b(A),C),new X(b(C.g),b(C.h));if(D(C))return C=Z(A,b(C)),new X(b(C.g),C.h);if(30<A.g.length){if(D(A)||D(C))throw Error("slowDivide_ only works with positive integers.");for(var P=_,N=C;0>=N.l(A);)P=$(P),N=$(N);var j=F(P,1),z=F(N,1);for(N=F(N,2),P=F(P,2);!O(N);){var k=z.add(N);0>=k.l(A)&&(j=j.add(P),z=k),N=F(N,1),P=F(P,1)}return C=B(A,j.j(C)),new X(j,C)}for(j=E;0<=A.l(C);){for(P=Math.max(1,Math.floor(A.m()/C.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),z=m(P),k=z.j(C);D(k)||0<k.l(A);)P-=N,z=m(P),k=z.j(C);O(z)&&(z=_),j=j.add(z),A=B(A,k)}return new X(j,A)}n.A=function(A){return Z(this,A).h},n.and=function(A){for(var C=Math.max(this.g.length,A.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)&A.i(N);return new u(P,this.h&A.h)},n.or=function(A){for(var C=Math.max(this.g.length,A.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)|A.i(N);return new u(P,this.h|A.h)},n.xor=function(A){for(var C=Math.max(this.g.length,A.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)^A.i(N);return new u(P,this.h^A.h)};function $(A){for(var C=A.g.length+1,P=[],N=0;N<C;N++)P[N]=A.i(N)<<1|A.i(N-1)>>>31;return new u(P,A.h)}function F(A,C){var P=C>>5;C%=32;for(var N=A.g.length-P,j=[],z=0;z<N;z++)j[z]=0<C?A.i(z+P)>>>C|A.i(z+P+1)<<32-C:A.i(z+P);return new u(j,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,vs=u}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,kl,$E,Zc,Mp,HE,WE,qE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var w=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var W=c[I];if(!(W in w))break e;w=w[W]}c=c[c.length-1],I=w[c],g=g(I),g!=I&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,I=!1,W={next:function(){if(!I&&w<c.length){var J=w++;return{value:g(J,c[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,w){return c.call.apply(c.bind,arguments)}function E(c,g,w){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,I),c.apply(g,W)}}return function(){return c.apply(g,arguments)}}function _(c,g,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,_.apply(null,arguments)}function R(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function O(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(I,W,J){for(var ue=Array(arguments.length-2),it=2;it<arguments.length;it++)ue[it-2]=arguments[it];return g.prototype[W].apply(I,ue)}}function D(c){const g=c.length;if(0<g){const w=Array(g);for(let I=0;I<g;I++)w[I]=c[I];return w}return[]}function b(c,g){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(f(I)){const W=c.length||0,J=I.length||0;c.length=W+J;for(let ue=0;ue<J;ue++)c[W+ue]=I[ue]}else c.push(I)}}class B{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var $=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function F(c,g,w){for(const I in c)g.call(w,c[I],I,c)}function A(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function C(c){const g={};for(const w in c)g[w]=c[w];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,g){let w,I;for(let W=1;W<arguments.length;W++){I=arguments[W];for(w in I)c[w]=I[w];for(let J=0;J<P.length;J++)w=P[J],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function j(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function z(c){d.setTimeout(()=>{throw c},0)}function k(){var c=me;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ze{constructor(){this.h=this.g=null}add(g,w){const I=Ve.get();I.set(g,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Ve=new B(()=>new Be,c=>c.reset());class Be{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,se=!1,me=new ze,oe=()=>{const c=d.Promise.resolve(void 0);$e=()=>{c.then(H)}};var H=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(w){z(w)}var g=Ve;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};d.addEventListener("test",w,g),d.removeEventListener("test",w,g)}catch{}return c})();function Te(c,g){if(ce.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if($){e:{try{Z(g.nodeName);var W=!0;break e}catch{}W=!1}W||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Re[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Te.aa.h.call(this)}}O(Te,ce);var Re={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Fe(c,g,w,I,W){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!I,this.ha=W,this.key=++Le,this.da=this.fa=!1}function Ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function un(c){this.src=c,this.g={},this.h=0}un.prototype.add=function(c,g,w,I,W){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var ue=Nn(c,g,I,W);return-1<ue?(g=c[ue],w||(g.fa=!1)):(g=new Fe(g,this.src,J,!!I,W),g.fa=w,c.push(g)),g};function $n(c,g){var w=g.type;if(w in c.g){var I=c.g[w],W=Array.prototype.indexOf.call(I,g,void 0),J;(J=0<=W)&&Array.prototype.splice.call(I,W,1),J&&(Ne(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Nn(c,g,w,I){for(var W=0;W<c.length;++W){var J=c[W];if(!J.da&&J.listener==g&&J.capture==!!w&&J.ha==I)return W}return-1}var Hn="closure_lm_"+(1e6*Math.random()|0),ir={};function ks(c,g,w,I,W){if(Array.isArray(g)){for(var J=0;J<g.length;J++)ks(c,g[J],w,I,W);return null}return w=yn(w),c&&c[Pe]?c.K(g,w,m(I)?!!I.capture:!1,W):Oi(c,g,w,!1,I,W)}function Oi(c,g,w,I,W,J){if(!g)throw Error("Invalid event type");var ue=m(W)?!!W.capture:!!W,it=Di(c);if(it||(c[Hn]=it=new un(c)),w=it.add(g,w,I,ue,J),w.proxy)return w;if(I=Ao(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)Se||(W=ue),W===void 0&&(W=!1),c.addEventListener(g.toString(),I,W);else if(c.attachEvent)c.attachEvent(On(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ao(){function c(w){return g.call(c.src,c.listener,w)}const g=xs;return c}function Rr(c,g,w,I,W){if(Array.isArray(g))for(var J=0;J<g.length;J++)Rr(c,g[J],w,I,W);else I=m(I)?!!I.capture:!!I,w=yn(w),c&&c[Pe]?(c=c.i,g=String(g).toString(),g in c.g&&(J=c.g[g],w=Nn(J,w,I,W),-1<w&&(Ne(J[w]),Array.prototype.splice.call(J,w,1),J.length==0&&(delete c.g[g],c.h--)))):c&&(c=Di(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Nn(g,w,I,W)),(w=-1<c?g[c]:null)&&Wn(w))}function Wn(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Pe])$n(g.i,c);else{var w=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(w,I,c.capture):g.detachEvent?g.detachEvent(On(w),I):g.addListener&&g.removeListener&&g.removeListener(I),(w=Di(g))?($n(w,c),w.h==0&&(w.src=null,g[Hn]=null)):Ne(c)}}}function On(c){return c in ir?ir[c]:ir[c]="on"+c}function xs(c,g){if(c.da)c=!0;else{g=new Te(g,this);var w=c.listener,I=c.ha||c.src;c.fa&&Wn(c),c=w.call(I,g)}return c}function Di(c){return c=c[Hn],c instanceof un?c:null}var Vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(c){return typeof c=="function"?c:(c[Vi]||(c[Vi]=function(g){return c.handleEvent(g)}),c[Vi])}function xe(){Q.call(this),this.i=new un(this),this.M=this,this.F=null}O(xe,Q),xe.prototype[Pe]=!0,xe.prototype.removeEventListener=function(c,g,w,I){Rr(this,c,g,w,I)};function _t(c,g){var w,I=c.F;if(I)for(w=[];I;I=I.F)w.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new ce(g,c);else if(g instanceof ce)g.target=g.target||c;else{var W=g;g=new ce(I,c),N(g,W)}if(W=!0,w)for(var J=w.length-1;0<=J;J--){var ue=g.g=w[J];W=sr(ue,I,!0,g)&&W}if(ue=g.g=c,W=sr(ue,I,!0,g)&&W,W=sr(ue,I,!1,g)&&W,w)for(J=0;J<w.length;J++)ue=g.g=w[J],W=sr(ue,I,!1,g)&&W}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],I=0;I<w.length;I++)Ne(w[I]);delete c.g[g],c.h--}}this.F=null},xe.prototype.K=function(c,g,w,I){return this.i.add(String(c),g,!1,w,I)},xe.prototype.L=function(c,g,w,I){return this.i.add(String(c),g,!0,w,I)};function sr(c,g,w,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var W=!0,J=0;J<g.length;++J){var ue=g[J];if(ue&&!ue.da&&ue.capture==w){var it=ue.listener,Vt=ue.ha||ue.src;ue.fa&&$n(c.i,ue),W=it.call(Vt,I)!==!1&&W}}return W&&!I.defaultPrevented}function Ns(c,g,w){if(typeof c=="function")w&&(c=_(c,w));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Pr(c){c.g=Ns(()=>{c.g=null,c.i&&(c.i=!1,Pr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ni extends Q{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(c){Q.call(this),this.h=c,this.g={}}O(ri,Q);var Os=[];function Ds(c){F(c.g,function(g,w){this.g.hasOwnProperty(w)&&Wn(g)},c),c.g={}}ri.prototype.N=function(){ri.aa.N.call(this),Ds(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vs=d.JSON.stringify,Ms=d.JSON.parse,Mi=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ii(){}ii.prototype.h=null;function M(c){return c.h||(c.h=c.i())}function le(){}var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ye(){ce.call(this,"d")}O(Ye,ce);function cn(){ce.call(this,"c")}O(cn,ce);var qn={},Ls=null;function Fs(){return Ls=Ls||new xe}qn.La="serverreachability";function Ba(c){ce.call(this,qn.La,c)}O(Ba,ce);function si(c){const g=Fs();_t(g,new Ba(g))}qn.STAT_EVENT="statevent";function $a(c,g){ce.call(this,qn.STAT_EVENT,c),this.stat=g}O($a,ce);function It(c){const g=Fs();_t(g,new $a(g,c))}qn.Ma="timingevent";function Ro(c,g){ce.call(this,qn.Ma,c),this.size=g}O(Ro,ce);function or(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function Us(c,g,w,I,W,J){c.info(function(){if(c.g)if(J)for(var ue="",it=J.split("&"),Vt=0;Vt<it.length;Vt++){var Qe=it[Vt].split("=");if(1<Qe.length){var jt=Qe[0];Qe=Qe[1];var Rt=jt.split("_");ue=2<=Rt.length&&Rt[1]=="type"?ue+(jt+"="+Qe+"&"):ue+(jt+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+I+") [attempt "+W+"]: "+g+`
`+w+`
`+ue})}function Po(c,g,w,I,W,J,ue){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+W+"]: "+g+`
`+w+`
`+J+" "+ue})}function ar(c,g,w,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ed(c,w)+(I?" "+I:"")})}function Ha(c,g){c.info(function(){return"TIMEOUT: "+g})}js.prototype.info=function(){};function Ed(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var I=w[c];if(!(2>I.length)){var W=I[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<W.length;ue++)W[ue]=""}}}}return Vs(w)}catch{return g}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lr;function zs(){}O(zs,ii),zs.prototype.g=function(){return new XMLHttpRequest},zs.prototype.i=function(){return{}},lr=new zs;function ur(c,g,w,I){this.j=c,this.i=g,this.l=w,this.R=I||1,this.U=new ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Wa={},xo={};function No(c,g,w){c.L=1,c.v=zi(Vn(g)),c.m=w,c.P=!0,qa(c,null)}function qa(c,g){c.F=Date.now(),at(c),c.A=Vn(c.v);var w=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),$i(w.i,"t",I),c.C=0,w=c.j.J,c.h=new Eu,c.g=ju(c.j,w?g:null,!c.m),0<c.O&&(c.M=new ni(_(c.Y,c,c.g),c.O)),g=c.U,w=c.g,I=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Os[0]=W.toString()),W=Os);for(var J=0;J<W.length;J++){var ue=ks(w,W[J],I||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),si(),Us(c.i,c.u,c.A,c.l,c.R,c.m)}ur.prototype.ca=function(c){c=c.target;const g=this.M;g&&wn(c)==3?g.j():this.Y(c)},ur.prototype.Y=function(c){try{if(c==this.g)e:{const Rt=wn(this.g);var g=this.g.Ba();const Qn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||Rt!=4||g==7||(g==8||0>=Qn?si(3):si(2)),Bs(this);var w=this.g.Z();this.X=w;t:if(Tu(this)){var I=Ja(this.g);c="";var W=I.length,J=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Li(this);var ue="";break t}this.h.i=new d.TextDecoder}for(g=0;g<W;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(J&&g==W-1)});I.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=w==200,Po(this.i,this.u,this.A,this.l,this.R,Rt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Vt=this.g;if((it=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(it)){var Qe=it;break t}}Qe=null}if(w=Qe)ar(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,It(12),Gn(this),Li(this);break e}}if(this.P){w=!0;let Ln;for(;!this.J&&this.C<ue.length;)if(Ln=Td(this,ue),Ln==xo){Rt==4&&(this.s=4,It(14),w=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==Wa){this.s=4,It(15),ar(this.i,this.l,ue,"[Invalid Chunk]"),w=!1;break}else ar(this.i,this.l,Ln,null),Ga(this,Ln);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||ue.length!=0||this.h.h||(this.s=1,It(16),w=!1),this.o=this.o&&w,!w)ar(this.i,this.l,ue,"[Invalid Chunked Response]"),Gn(this),Li(this);else if(0<ue.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),el(jt),jt.M=!0,It(11))}}else ar(this.i,this.l,ue,null),Ga(this,ue);Rt==4&&Gn(this),this.o&&!this.J&&(Rt==4?$o(this.j,this):(this.o=!1,at(this)))}else Fo(this.g),w==400&&0<ue.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Gn(this),Li(this)}}}catch{}finally{}};function Tu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Td(c,g){var w=c.C,I=g.indexOf(`
`,w);return I==-1?xo:(w=Number(g.substring(w,I)),isNaN(w)?Wa:(I+=1,I+w>g.length?xo:(g=g.slice(I,I+w),c.C=I+w,g)))}ur.prototype.cancel=function(){this.J=!0,Gn(this)};function at(c){c.S=Date.now()+c.I,Su(c,c.I)}function Su(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=or(_(c.ba,c),g)}function Bs(c){c.B&&(d.clearTimeout(c.B),c.B=null)}ur.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ha(this.i,this.A),this.L!=2&&(si(),It(17)),Gn(this),this.s=2,Li(this)):Su(this,this.S-c)};function Li(c){c.j.G==0||c.J||$o(c.j,c)}function Gn(c){Bs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ds(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ga(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||hn(w.h,c))){if(!c.K&&hn(w.h,c)&&w.G==3){try{var I=w.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var W=I;if(W[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Bo(w),pr(w);else break e;zo(w),It(18)}}else w.za=W[1],0<w.za-w.T&&37500>W[2]&&w.F&&w.v==0&&!w.C&&(w.C=or(_(w.Za,w),6e3));if(1>=Cu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ci(w,11)}else if((c.K||w.g==c)&&Bo(w),!K(g))for(W=w.Da.g.parse(g),g=0;g<W.length;g++){let Qe=W[g];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const jt=Qe[3];jt!=null&&(w.la=jt,w.j.info("VER="+w.la));const Rt=Qe[4];Rt!=null&&(w.Aa=Rt,w.j.info("SVER="+w.Aa));const Qn=Qe[5];Qn!=null&&typeof Qn=="number"&&0<Qn&&(I=1.5*Qn,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Ln=c.g;if(Ln){const Qs=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var J=I.h;J.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ka(J,J.h),J.h=null))}if(I.D){const Wo=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(I.ya=Wo,st(I.I,I.D,Wo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ue=c;if(I.qa=Fu(I,I.J?I.ia:null,I.W),ue.K){bu(I.h,ue);var it=ue,Vt=I.L;Vt&&(it.I=Vt),it.B&&(Bs(it),at(it)),I.g=ue}else Ks(I);0<w.i.length&&Or(w)}else Qe[0]!="stop"&&Qe[0]!="close"||ci(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ci(w,7):Wt(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}si(4)}catch{}}var Iu=class{constructor(c,g){this.g=c,this.map=g}};function $s(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cu(c){return c.h?1:c.g?c.g.size:0}function hn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ka(c,g){c.g?c.g.add(g):c.h=g}function bu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}$s.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return D(c.i)}function Oo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,I=0;I<w;I++)g.push(c[I]);return g}g=[],w=0;for(I in c)g[w++]=c[I];return g}function Do(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const I in c)g[w++]=I;return g}}}function Fi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=Do(c),I=Oo(c),W=I.length,J=0;J<W;J++)g.call(void 0,I[J],w&&w[J],c)}var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var I=c[w].indexOf("="),W=null;if(0<=I){var J=c[w].substring(0,I);W=c[w].substring(I+1)}else J=c[w];g(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,Ws(this,c.j),this.o=c.o,this.g=c.g,ji(this,c.s),this.l=c.l;var g=c.i,w=new kr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Ui(this,w),this.m=c.m}else c&&(g=String(c).match(Hs))?(this.h=!1,Ws(this,g[1]||"",!0),this.o=Ke(g[2]||""),this.g=Ke(g[3]||"",!0),ji(this,g[4]),this.l=Ke(g[5]||"",!0),Ui(this,g[6]||"",!0),this.m=Ke(g[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}oi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Bi(g,Vo,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Bi(g,Vo,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Bi(w,w.charAt(0)=="/"?ku:Pu,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Bi(w,Qa)),c.join("")};function Vn(c){return new oi(c)}function Ws(c,g,w){c.j=w?Ke(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ji(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ui(c,g,w){g instanceof kr?(c.i=g,xr(c.i,c.h)):(w||(g=Bi(g,xu)),c.i=new kr(g,c.h))}function st(c,g,w){c.i.set(g,w)}function zi(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ke(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bi(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Ru),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ru(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,Pu=/[#\?:]/g,ku=/[#\?]/g,xu=/[#\?@]/g,Qa=/#/g;function kr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ht(c){c.g||(c.g=new Map,c.h=0,c.i&&Sd(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=kr.prototype,n.add=function(c,g){Ht(this),this.i=null,c=Kn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function cr(c,g){Ht(c),g=Kn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function hr(c,g){return Ht(c),g=Kn(c,g),c.g.has(g)}n.forEach=function(c,g){Ht(this),this.g.forEach(function(w,I){w.forEach(function(W){c.call(g,W,I,this)},this)},this)},n.na=function(){Ht(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let I=0;I<g.length;I++){const W=c[I];for(let J=0;J<W.length;J++)w.push(g[I])}return w},n.V=function(c){Ht(this);let g=[];if(typeof c=="string")hr(this,c)&&(g=g.concat(this.g.get(Kn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Ht(this),this.i=null,c=Kn(this,c),hr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function $i(c,g,w){cr(c,g),0<w.length&&(c.i=null,c.g.set(Kn(c,g),D(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var I=g[w];const J=encodeURIComponent(String(I)),ue=this.V(I);for(I=0;I<ue.length;I++){var W=J;ue[I]!==""&&(W+="="+encodeURIComponent(String(ue[I]))),c.push(W)}}return this.i=c.join("&")};function Kn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function xr(c,g){g&&!c.j&&(Ht(c),c.i=null,c.g.forEach(function(w,I){var W=I.toLowerCase();I!=W&&(cr(this,I),$i(this,W,w))},c)),c.j=g}function Id(c,g){const w=new js;if(d.Image){const I=new Image;I.onload=R(_n,w,"TestLoadImage: loaded",!0,g,I),I.onerror=R(_n,w,"TestLoadImage: error",!1,g,I),I.onabort=R(_n,w,"TestLoadImage: abort",!1,g,I),I.ontimeout=R(_n,w,"TestLoadImage: timeout",!1,g,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function Nu(c,g){const w=new js,I=new AbortController,W=setTimeout(()=>{I.abort(),_n(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(J=>{clearTimeout(W),J.ok?_n(w,"TestPingServer: ok",!0,g):_n(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(W),_n(w,"TestPingServer: error",!1,g)})}function _n(c,g,w,I,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),I(w)}catch{}}function Cd(){this.g=new Mi}function Ou(c,g,w){const I=w||"";try{Fi(c,function(W,J){let ue=W;m(W)&&(ue=Vs(W)),g.push(I+J+"="+encodeURIComponent(ue))})}catch(W){throw g.push(I+"type="+encodeURIComponent("_badmap")),W}}function ai(c){this.l=c.Ub||null,this.j=c.eb||!1}O(ai,ii),ai.prototype.g=function(){return new qs(this.l,this.j)},ai.prototype.i=(function(c){return function(){return c}})({});function qs(c,g){xe.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(qs,xe),n=qs.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,fr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Du(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Du(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?dr(this):fr(this),this.readyState==3&&Du(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,dr(this))},n.Qa=function(c){this.g&&(this.response=c,dr(this))},n.ga=function(){this.g&&dr(this)};function dr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,fr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function fr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function li(c){let g="";return F(c,function(w,I){g+=I,g+=":",g+=w,g+=`\r
`}),g}function Hi(c,g,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=li(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):st(c,g,w))}function pt(c){xe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(pt,xe);var bd=/^https?$/i,Xa=["POST","PUT"];n=pt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lr.g(),this.v=this.o?M(this.o):M(lr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(J){Gs(this,J);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var W in I)w.set(W,I[W]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())w.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),W=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xa,g,void 0))||I||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of w)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lo(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){Gs(this,J)}};function Gs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Mo(c),Mn(c)}function Mo(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(c){if(c.h&&typeof u<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)Ns(c.Ea,0,c);else if(_t(c,"readystatechange"),wn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var I;if(I=ue===0){var W=String(c.D).match(Hs)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),I=!bd.test(W?W.toLowerCase():"")}w=I}if(w)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var J=2<wn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",Mo(c)}}finally{Mn(c)}}}}function Mn(c,g){if(c.g){Lo(c);const w=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||_t(c,"ready");try{w.onreadystatechange=I}catch{}}}function Lo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ms(g)}};function Ja(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fo(c){const g={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(K(c[I]))continue;var w=j(c[I]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=g[W]||[];g[W]=J,J.push(w)}A(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Za(c){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nr("baseRetryDelayMs",5e3,c),this.cb=Nr("retryDelaySeedMs",1e4,c),this.Wa=Nr("forwardChannelMaxRetries",2,c),this.wa=Nr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $s(c&&c.concurrentRequestLimit),this.Da=new Cd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,I){It(0),this.W=c,this.H=g||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=Fu(this,null,this.W),Or(this)};function Wt(c){if(jo(c),c.G==3){var g=c.U++,w=Vn(c.I);if(st(w,"SID",c.K),st(w,"RID",g),st(w,"TYPE","terminate"),ui(c,w),g=new ur(c,c.j,g),g.L=2,g.v=zi(Vn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=g.v,w=!0),w||(g.g=ju(g.j,null),g.g.ea(g.v)),g.F=Date.now(),at(g)}Lu(c)}function pr(c){c.g&&(el(c),c.g.cancel(),c.g=null)}function jo(c){pr(c),c.u&&(d.clearTimeout(c.u),c.u=null),Bo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Or(c){if(!Dn(c.h)&&!c.s){c.s=!0;var g=c.Ga;$e||oe(),se||($e(),se=!0),me.add(g,c),c.B=0}}function Ad(c,g){return Cu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=or(_(c.Ga,c,g),Mu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new ur(this,this.j,c);let J=this.o;if(this.S&&(J?(J=C(J),N(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Wi(this,W,g),w=Vn(this.I),st(w,"RID",c),st(w,"CVER",22),this.D&&st(w,"X-HTTP-Session-Id",this.D),ui(this,w),J&&(this.O?g="headers="+encodeURIComponent(String(li(J)))+"&"+g:this.m&&Hi(w,this.m,J)),Ka(this.h,W),this.Ua&&st(w,"TYPE","init"),this.P?(st(w,"$req",g),st(w,"SID","null"),W.T=!0,No(W,w,null)):No(W,w,g),this.G=2}}else this.G==3&&(c?Uo(this,c):this.i.length==0||Dn(this.h)||Uo(this))};function Uo(c,g){var w;g?w=g.l:w=c.U++;const I=Vn(c.I);st(I,"SID",c.K),st(I,"RID",w),st(I,"AID",c.T),ui(c,I),c.m&&c.o&&Hi(I,c.m,c.o),w=new ur(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Wi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ka(c.h,w),No(w,I,g)}function ui(c,g){c.H&&F(c.H,function(w,I){st(g,I,w)}),c.l&&Fi({},function(w,I){st(g,I,w)})}function Wi(c,g,w){w=Math.min(c.i.length,w);var I=c.l?_(c.l.Na,c.l,c):null;e:{var W=c.i;let J=-1;for(;;){const ue=["count="+w];J==-1?0<w?(J=W[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let it=!0;for(let Vt=0;Vt<w;Vt++){let Qe=W[Vt].g;const jt=W[Vt].map;if(Qe-=J,0>Qe)J=Math.max(0,W[Vt].g-100),it=!1;else try{Ou(jt,ue,"req"+Qe+"_")}catch{I&&I(jt)}}if(it){I=ue.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,I}function Ks(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;$e||oe(),se||($e(),se=!0),me.add(g,c),c.v=0}}function zo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=or(_(c.Fa,c),Mu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=or(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),pr(this),Vu(this))};function el(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Vu(c){c.g=new ur(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Vn(c.qa);st(g,"RID","rpc"),st(g,"SID",c.K),st(g,"AID",c.T),st(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(g,"TO",c.ja),st(g,"TYPE","xmlhttp"),ui(c,g),c.m&&c.o&&Hi(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=zi(Vn(g)),w.m=null,w.P=!0,qa(w,c)}n.Za=function(){this.C!=null&&(this.C=null,pr(this),zo(this),It(19))};function Bo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function $o(c,g){var w=null;if(c.g==g){Bo(c),el(c),c.g=null;var I=2}else if(hn(c.h,g))w=g.D,bu(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var W=c.B;I=Fs(),_t(I,new Ro(I,w)),Or(c)}else Ks(c);else if(W=g.s,W==3||W==0&&0<g.X||!(I==1&&Ad(c,g)||I==2&&zo(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),W){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function Mu(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function ci(c,g){if(c.j.info("Error code "+g),g==2){var w=_(c.fb,c),I=c.Xa;const W=!I;I=new oi(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ws(I,"https"),zi(I),W?Id(I.toString(),w):Nu(I.toString(),w)}else It(2);c.G=0,c.l&&c.l.sa(g),Lu(c),jo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Lu(c){if(c.G=0,c.ka=[],c.l){const g=Au(c.h);(g.length!=0||c.i.length!=0)&&(b(c.ka,g),b(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Fu(c,g,w){var I=w instanceof oi?Vn(w):new oi(w);if(I.g!="")g&&(I.g=g+"."+I.g),ji(I,I.s);else{var W=d.location;I=W.protocol,g=g?g+"."+W.hostname:W.hostname,W=+W.port;var J=new oi(null);I&&Ws(J,I),g&&(J.g=g),W&&ji(J,W),w&&(J.l=w),I=J}return w=c.D,g=c.ya,w&&g&&st(I,w,g),st(I,"VER",c.la),ui(c,I),I}function ju(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new pt(new ai({eb:w})):new pt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tl(){}n=tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ho(){}Ho.prototype.g=function(c,g){return new dn(c,g)};function dn(c,g){xe.call(this),this.g=new Za(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!K(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!K(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Dr(this)}O(dn,xe),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Wt(this.g)},dn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Vs(c),c=w);g.i.push(new Iu(g.Ya++,c)),g.G==3&&Or(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,dn.aa.N.call(this)};function Uu(c){Ye.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}O(Uu,Ye);function zu(){cn.call(this),this.status=1}O(zu,cn);function Dr(c){this.g=c}O(Dr,tl),Dr.prototype.ua=function(){_t(this.g,"a")},Dr.prototype.ta=function(c){_t(this.g,new Uu(c))},Dr.prototype.sa=function(c){_t(this.g,new zu)},Dr.prototype.ra=function(){_t(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,qE=function(){return new Ho},WE=function(){return Fs()},HE=qn,Mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Zc=ko,wu.COMPLETE="complete",$E=wu,le.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",xe.prototype.listen=xe.prototype.K,kl=le,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,BE=pt}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const L_="@firebase/firestore",F_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new _m("@firebase/firestore");function fa(){return yo.logLevel}function fe(n,...e){if(yo.logLevel<=qe.DEBUG){const t=e.map(Nm);yo.debug(`Firestore (${Da}): ${n}`,...t)}}function Ri(n,...e){if(yo.logLevel<=qe.ERROR){const t=e.map(Nm);yo.error(`Firestore (${Da}): ${n}`,...t)}}function ws(n,...e){if(yo.logLevel<=qe.WARN){const t=e.map(Nm);yo.warn(`Firestore (${Da}): ${n}`,...t)}}function Nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,GE(n,r,t)}function GE(n,e,t){let r=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ri(r),new Error(r)}function rt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||GE(e,s,r)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class DP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VP{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ti,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ti)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new KE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class MP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new MP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jP(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function Lp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return He(r,s);{const a=QE(),u=UP(a.encode(U_(n,t)),a.encode(U_(e,t)));return u!==0?u:He(r,s)}}t+=r>65535?2:1}return He(n.length,e.length)}function U_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function UP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return He(n[t],e[t]);return He(n.length,e.length)}function Ia(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Ur{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ur.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return He(e.length,t.length)}static compareSegments(e,t){const r=Ur.isNumericId(e),s=Ur.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(t)):Lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class ut extends Ur{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const zP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Ur{construct(e,t,r){return new Yt(e,t,r)}static isValidIdentifier(e){return zP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new Yt([z_])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BP(n,e,t,r){if(e===!0&&r===!0)throw new he(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B_(n){if(!Ee.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $_(n){if(Ee.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function Yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qh(n);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n,e){const t={typeString:n};return e&&(t.value=e),t}function hu(n,e){if(!YE(n))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new he(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,W_=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*W_);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<H_)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W_}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ot("string",ft._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new ft(0,0))}static max(){return new Me(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function $P(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new Es(s,Ee.empty(),e)}function HP(n){return new Es(n.readTime,n.key,ql)}class Es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Es(Me.min(),Ee.empty(),ql)}static max(){return new Es(Me.max(),Ee.empty(),ql)}}function WP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==qP)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((s=>s?te.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((y=>{u[m]=y,++d,d===a&&r(u)}),(y=>s(y)))}}))}static doWhile(e,t){return new te(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function KP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ma(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Xh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function Yh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function QP(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="";function XP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=q_(e)),e=YP(n.get(t),e);return q_(e)}function YP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case JE:t+="";break;default:t+=a}}return t}function q_(n){return n+JE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function As(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=a??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Qt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class K_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Ft(Yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new eT("Invalid base64 string: "+a):a}})(e);return new Jt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const JP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(n){if(rt(!!n,39018),typeof n=="string"){let e=0;const t=JP.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?Jt.fromBase64String(n):Jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",rT="__previous_value__",iT="__local_write_time__";function Vm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||t===void 0?void 0:t.stringValue)===tT}function Jh(n){const e=n.mapValue.fields[rT];return Vm(e)?Jh(e):e}function Gl(n){const e=Ts(n.mapValue.fields[iT].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,r,s,a,u,d,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const _h="(default)";class Kl{constructor(e,t){this.projectId=e,this.database=t||_h}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",ek="__max__",Fc={mapValue:{}},oT="__vector__",wh="value";function Is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vm(n)?4:nk(n)?9007199254740991:tk(n)?10:11:ke(28295,{value:n})}function Jr(n,e){if(n===e)return!0;const t=Is(n);if(t!==Is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gl(n).isEqual(Gl(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Ts(s.timestampValue),d=Ts(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Ss(s.bytesValue).isEqual(Ss(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return bt(s.geoPointValue.latitude)===bt(a.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return bt(s.integerValue)===bt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=bt(s.doubleValue),d=bt(a.doubleValue);return u===d?yh(u)===yh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ia(n.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(G_(u)!==G_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Jr(u[f],d[f])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function Ql(n,e){return(n.values||[]).find((t=>Jr(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=Is(n),r=Is(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=bt(a.integerValue||a.doubleValue),f=bt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return Q_(n.timestampValue,e.timestampValue);case 4:return Q_(Gl(n),Gl(e));case 5:return Lp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Ss(a),f=Ss(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=He(d[m],f[m]);if(y!==0)return y}return He(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=He(bt(a.latitude),bt(u.latitude));return d!==0?d:He(bt(a.longitude),bt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return X_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,y;const E=a.fields||{},_=u.fields||{},R=(d=E[wh])===null||d===void 0?void 0:d.arrayValue,O=(f=_[wh])===null||f===void 0?void 0:f.arrayValue,D=He(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0);return D!==0?D:X_(R,O)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Fc.mapValue&&u===Fc.mapValue)return 0;if(a===Fc.mapValue)return 1;if(u===Fc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const _=Lp(f[E],y[E]);if(_!==0)return _;const R=Ca(d[f[E]],m[y[E]]);if(R!==0)return R}return He(f.length,y.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{le:t})}}function Q_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=Ts(n),r=Ts(e),s=He(t.seconds,r.seconds);return s!==0?s:He(t.nanos,r.nanos)}function X_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ca(t[s],r[s]);if(a)return a}return He(t.length,r.length)}function ba(n){return Fp(n)}function Fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ts(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Fp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Fp(t.fields[u])}`;return s+"}"})(n.mapValue):ke(61005,{value:n})}function eh(n){switch(Is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(n);return e?16+eh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+eh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return As(r.fields,((a,u)=>{s+=a.length+eh(u)})),s})(n.mapValue);default:throw ke(13486,{value:n})}}function Y_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jp(n){return!!n&&"integerValue"in n}function Mm(n){return!!n&&"arrayValue"in n}function J_(n){return!!n&&"nullValue"in n}function Z_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function tk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sT])===null||t===void 0?void 0:t.stringValue)===oT}function Ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return As(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ll(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ek}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=Yt.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=Ll(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){As(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Pn(Ll(this.value))}}function aT(n){const e=[];return As(n.fields,((t,r)=>{const s=new Yt([t]);if(th(r)){const a=aT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new an(e,0,Me.min(),Me.min(),Me.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,s){return new an(e,1,t,Me.min(),r,s,0)}static newNoDocument(e,t){return new an(e,2,t,Me.min(),Me.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,Me.min(),Me.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function ew(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ee.comparator(Ee.fromName(u.referenceValue),t.key):r=Ca(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function tw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t="asc"){this.field=e,this.dir=t}}function rk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class Nt extends lT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sk(e,t,r):t==="array-contains"?new lk(e,r):t==="in"?new uk(e,r):t==="not-in"?new ck(e,r):t==="array-contains-any"?new hk(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ok(e,r):new ak(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&Is(this.value)===Is(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends lT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new br(e,t)}matches(e){return uT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(n){return n.op==="and"}function cT(n){return ik(n)&&uT(n)}function ik(n){for(const e of n.filters)if(e instanceof br)return!1;return!0}function Up(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+ba(n.value);if(cT(n))return n.filters.map((e=>Up(e))).join(",");{const e=n.filters.map((t=>Up(t))).join(",");return`${n.op}(${e})`}}function hT(n,e){return n instanceof Nt?(function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&Jr(r.value,s.value)})(n,e):n instanceof br?(function(r,s){return s instanceof br&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&hT(u,s.filters[d])),!0):!1})(n,e):void ke(19439)}function dT(n){return n instanceof Nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ba(t.value)}`})(n):n instanceof br?(function(t){return t.op.toString()+" {"+t.getFilters().map(dT).join(" ,")+"}"})(n):"Filter"}class sk extends Nt{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class ok extends Nt{constructor(e,t){super(e,"in",t),this.keys=fT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ak extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=fT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class lk extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mm(t)&&Ql(t.arrayValue,this.value)}}class uk extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ql(this.value.arrayValue,t)}}class ck extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ql(this.value.arrayValue,t)}}class hk extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ql(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function nw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new dk(n,e,t,r,s,a,u)}function Lm(n){const e=Ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Up(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ba(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ba(r))).join(",")),e.Pe=t}return e.Pe}function Fm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tw(n.startAt,e.startAt)&&tw(n.endAt,e.endAt)}function zp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function fk(n,e,t,r,s,a,u,d){return new du(n,e,t,r,s,a,u,d)}function jm(n){return new du(n)}function rw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Fl(n){const e=Ue(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ft(Yt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Th(a,r))})),t.has(Yt.keyField().canonicalString())||e.Te.push(new Th(Yt.keyField(),r))}return e.Te}function Wr(n){const e=Ue(n);return e.Ie||(e.Ie=pk(e,Fl(n))),e.Ie}function pk(n,e){if(n.limitType==="F")return nw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Th(s.field,a)}));const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return nw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Bp(n,e){const t=n.filters.concat([e]);return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $p(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zh(n,e){return Fm(Wr(n),Wr(e))&&n.limitType===e.limitType}function mT(n){return`${Lm(Wr(n))}|lt:${n.limitType}`}function pa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>dT(s))).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ba(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ba(s))).join(",")),`Target(${r})`})(Wr(n))}; limitType=${n.limitType})`}function ed(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Fl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=ew(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,Fl(r),s)||r.endAt&&!(function(u,d,f){const m=ew(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,Fl(r),s))})(n,e)}function mk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gT(n){return(e,t)=>{let r=!1;for(const s of Fl(n)){const a=gk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function gk(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Ca(f,m):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new yt(Ee.comparator);function Pi(){return vk}const vT=new yt(Ee.comparator);function xl(...n){let e=vT;for(const t of n)e=e.insert(t.key,t);return e}function yT(n){let e=vT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ho(){return jl()}function _T(){return jl()}function jl(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const yk=new yt(Ee.comparator),_k=new Ft(Ee.comparator);function Ge(...n){let e=_k;for(const t of n)e=e.add(t);return e}const wk=new Ft(He);function Ek(){return wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function wT(n){return{integerValue:""+n}}function Tk(n,e){return QP(e)?wT(e):Um(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function Sk(n,e,t){return n instanceof Xl?(function(s,a){const u={fields:{[nT]:{stringValue:tT},[iT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Vm(a)&&(a=Jh(a)),a&&(u.fields[rT]=a),{mapValue:u}})(t,e):n instanceof Yl?TT(n,e):n instanceof Jl?ST(n,e):(function(s,a){const u=ET(s,a),d=iw(u)+iw(s.Ee);return jp(u)&&jp(s.Ee)?wT(d):Um(s.serializer,d)})(n,e)}function Ik(n,e,t){return n instanceof Yl?TT(n,e):n instanceof Jl?ST(n,e):t}function ET(n,e){return n instanceof Sh?(function(r){return jp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Xl extends td{}class Yl extends td{constructor(e){super(),this.elements=e}}function TT(n,e){const t=IT(e);for(const r of n.elements)t.some((s=>Jr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Jl extends td{constructor(e){super(),this.elements=e}}function ST(n,e){let t=IT(e);for(const r of n.elements)t=t.filter((s=>!Jr(s,r)));return{arrayValue:{values:t}}}class Sh extends td{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function iw(n){return bt(n.integerValue||n.doubleValue)}function IT(n){return Mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.field=e,this.transform=t}}function bk(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Jl&&s instanceof Jl?Ia(r.elements,s.elements,Jr):r instanceof Sh&&s instanceof Sh?Jr(r.Ee,s.Ee):r instanceof Xl&&s instanceof Xl})(n.transform,e.transform)}class Ak{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class nd{}function CT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zm(n.key,Cr.none()):new fu(n.key,n.data,Cr.none());{const t=n.data,r=Pn.empty();let s=new Ft(Yt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Rs(n.key,r,new zn(s.toArray()),Cr.none())}}function Rk(n,e,t){n instanceof fu?(function(s,a,u){const d=s.value.clone(),f=ow(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Rs?(function(s,a,u){if(!nh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=ow(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(bT(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ul(n,e,t,r){return n instanceof fu?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=a.value.clone(),y=aw(a.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Rs?(function(a,u,d,f){if(!nh(a.precondition,u))return d;const m=aw(a.fieldTransforms,f,u),y=u.data;return y.setAll(bT(a)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,u,d){return nh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function Pk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=ET(r.transform,s||null);a!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,a))}return t||null}function sw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ia(r,s,((a,u)=>bk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends nd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rs extends nd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function bT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ow(n,e,t){const r=new Map;rt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Ik(u,d,t[s]))}return r}function aw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Sk(a,u,e))}return r}class zm extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kk extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Rk(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_T();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=CT(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,((t,r)=>sw(t,r)))&&Ia(this.baseMutations,e.baseMutations,((t,r)=>sw(t,r)))}}class Bm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){rt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return yk})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Bm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Xe;function Dk(n){switch(n){case ee.OK:return ke(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function AT(n){if(n===void 0)return Ri("GRPC error has no .code"),ee.UNKNOWN;switch(n){case kt.OK:return ee.OK;case kt.CANCELLED:return ee.CANCELLED;case kt.UNKNOWN:return ee.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ee.INTERNAL;case kt.UNAVAILABLE:return ee.UNAVAILABLE;case kt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case kt.NOT_FOUND:return ee.NOT_FOUND;case kt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case kt.ABORTED:return ee.ABORTED;case kt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case kt.DATA_LOSS:return ee.DATA_LOSS;default:return ke(39323,{code:n})}}(Xe=kt||(kt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new vs([4294967295,4294967295],0);function lw(n){const e=QE().encode(n),t=new zE;return t.update(e),new Uint8Array(t.digest())}function uw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([t,r],0),new vs([s,a],0)]}class $m{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nl(`Invalid padding: ${t}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=vs.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(vs.fromNumber(r)));return s.compare(Vk)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=lw(e),[r,s]=uw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new $m(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=lw(e),[r,s]=uw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rd(Me.min(),s,new yt(He),Pi(),Ge())}}class pu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pu(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class RT{constructor(e,t){this.targetId=e,this.De=t}}class PT{constructor(e,t,r=Jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class cw{constructor(){this.ve=0,this.Ce=hw(),this.Fe=Jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ke(38017,{changeType:a})}})),new pu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=hw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Mk{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pi(),this.je=jc(),this.Je=jc(),this.He=new yt(He)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(zp(a))if(r===0){const u=new Ee(a.path);this.Xe(t,u,an.newNoDocument(u,Me.min()))}else rt(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=Ss(r).toUint8Array()}catch(f){if(f instanceof eT)return ws("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new $m(u,s,a)}catch(f){return ws(f instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&zp(d.target)){const f=new Ee(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,an.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=Ge();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new rd(e,t,this.He,this.ze,r);return this.ze=Pi(),this.je=jc(),this.Je=jc(),this.He=new yt(He),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new cw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ft(He),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ft(He),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new cw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function jc(){return new yt(Ee.comparator)}function hw(){return new yt(Ee.comparator)}const Lk={asc:"ASCENDING",desc:"DESCENDING"},Fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jk={and:"AND",or:"OR"};class Uk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hp(n,e){return n.useProto3Json||Yh(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zk(n,e){return Ih(n,e.toTimestamp())}function qr(n){return rt(!!n,49232),Me.fromTimestamp((function(t){const r=Ts(t);return new ft(r.seconds,r.nanos)})(n))}function Hm(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=(function(s){return new ut(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xT(n){const e=ut.fromString(n);return rt(MT(e),10190,{key:e.toString()}),e}function qp(n,e){return Hm(n.databaseId,e.path)}function ap(n,e){const t=xT(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(OT(t))}function NT(n,e){return Hm(n.databaseId,e)}function Bk(n){const e=xT(n);return e.length===4?ut.emptyPath():OT(e)}function Gp(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dw(n,e,t){return{name:qp(n,e),fields:t.value.mapValue.fields}}function $k(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ke(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(rt(y===void 0||typeof y=="string",58123),Jt.fromBase64String(y||"")):(rt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Jt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const y=m.code===void 0?ee.UNKNOWN:AT(m.code);return new he(y,m.message||"")})(u);t=new PT(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ap(n,r.document.name),a=qr(r.document.updateTime),u=r.document.createTime?qr(r.document.createTime):Me.min(),d=new Pn({mapValue:{fields:r.document.fields}}),f=an.newFoundDocument(s,a,u,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new rh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ap(n,r.document),a=r.readTime?qr(r.readTime):Me.min(),u=an.newNoDocument(s,a),d=r.removedTargetIds||[];t=new rh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ap(n,r.document),a=r.removedTargetIds||[];t=new rh([],a,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Ok(s,a),d=r.targetId;t=new RT(d,u)}}return t}function Hk(n,e){let t;if(e instanceof fu)t={update:dw(n,e.key,e.value)};else if(e instanceof zm)t={delete:qp(n,e.key)};else if(e instanceof Rs)t={update:dw(n,e.key,e.data),updateMask:Zk(e.fieldMask)};else{if(!(e instanceof kk))return ke(16599,{Rt:e.type});t={verify:qp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Jl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw ke(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:zk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function Wk(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?qr(s.updateTime):qr(a);return u.isEqual(Me.min())&&(u=qr(a)),new Ak(u,s.transformResults||[])})(t,e)))):[]}function qk(n,e){return{documents:[NT(n,e.path)]}}function Gk(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NT(n,s);const a=(function(m){if(m.length!==0)return VT(br.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((y=>(function(_){return{field:ma(_.field),direction:Xk(_.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Hp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function Kk(n){let e=Bk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){rt(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(E){const _=DT(E);return _ instanceof br&&cT(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((_=>(function(O){return new Th(ga(O.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let _;return _=typeof E=="object"?E.value:E,Yh(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(E){const _=!!E.before,R=E.values||[];return new Eh(R,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const _=!E.before,R=E.values||[];return new Eh(R,_)})(t.endAt)),fk(e,s,u,a,d,"F",f,m)}function Qk(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ga(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ga(t.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ga(t.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ga(t.unaryFilter.field);return Nt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Nt.create(ga(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return br.create(t.compositeFilter.filters.map((r=>DT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function Xk(n){return Lk[n]}function Yk(n){return Fk[n]}function Jk(n){return jk[n]}function ma(n){return{fieldPath:n.canonicalString()}}function ga(n){return Yt.fromServerFormat(n.fieldPath)}function VT(n){return n instanceof Nt?(function(t){if(t.op==="=="){if(Z_(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NAN"}};if(J_(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z_(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NAN"}};if(J_(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(t.field),op:Yk(t.op),value:t.value}}})(n):n instanceof br?(function(t){const r=t.getFilters().map((s=>VT(s)));return r.length===1?r[0]:{compositeFilter:{op:Jk(t.op),filters:r}}})(n):ke(54877,{filter:n})}function Zk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,r,s,a=Me.min(),u=Me.min(),d=Jt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.gt=e}}function tx(n){const e=Kk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.Dn=new rx}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Es.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ft(ut.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(LT,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Aa(0)}static ur(){return new Aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LruGarbageCollector",ix=1048576;function mw([n,e],[t,r]){const s=He(n,t);return s===0?He(e,r):s}class sx{constructor(e){this.Tr=e,this.buffer=new Ft(mw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ox{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(pw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ma(t)?fe(pw,"Ignoring IndexedDB error during garbage collection: ",t):await Va(t)}await this.Rr(3e5)}))}}class ax{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Xh.ue);const r=new sx(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(fw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(m=Date.now(),fa()<=qe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function lx(n,e){return new ax(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ul(r.mutation,s,zn.empty(),ft.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const s=ho();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=xl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=Pi();const u=jl(),d=(function(){return jl()})();return t.forEach(((f,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Rs)?a=a.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),Ul(y.mutation,m,y.mutation.getFieldMask(),ft.now())):u.set(m.key,zn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,y)=>u.set(m,y))),t.forEach(((m,y)=>{var E;return d.set(m,new cx(y,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=jl();let s=new yt(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||zn.empty();y=d.applyToLocalView(m,y),r.set(f,y);const E=(s.get(d.batchId)||Ge()).add(f);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,E=_T();y.forEach((_=>{if(!a.has(_)){const R=CT(t.get(_),r.get(_));R!==null&&E.set(_,R),a=a.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return te.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):te.resolve(ho());let d=ql,f=a;return u.next((m=>te.forEach(m,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((_=>{f=f.insert(y,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((y=>({batchId:d,changes:yT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((r=>{let s=xl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=xl();return this.indexManager.getCollectionParents(e,a).next((d=>te.forEach(d,(f=>{const m=(function(E,_){return new du(_,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((E,_)=>{u=u.insert(E,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,an.newInvalidDocument(y)))}));let d=xl();return u.forEach(((f,m)=>{const y=a.get(f);y!==void 0&&Ul(y.mutation,m,zn.empty(),ft.now()),ed(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:qr(s.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:tx(s.bundledQuery),readTime:qr(s.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.overlays=new yt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return te.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.wt(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=ho(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new yt(((m,y)=>m-y));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=ho(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=ho(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=s)););return te.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Nk(t,r));let a=this.kr.get(t);a===void 0&&(a=Ge(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.qr=new Ft($t.Qr),this.$r=new Ft($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ee(new ut([])),r=new $t(t,e),s=new $t(t,e+1),a=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new ut([])),r=new $t(t,e),s=new $t(t,e+1);let a=Ge();return this.$r.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new $t(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||He(e.Hr,t.Hr)}static Ur(e,t){return He(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ft($t.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new xk(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new $t(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Dm:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),s=new $t(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ft(He);return t.forEach((s=>{const a=new $t(s,0),u=new $t(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ee.isDocumentKey(a)||(a=a.child(""));const u=new $t(new Ee(a),0);let d=new Ft(He);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),te.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){rt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(t.mutations,(s=>{const a=new $t(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new $t(t,0),s=this.Yr.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.ni=e,this.docs=(function(){return new yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():an.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Pi();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||WP(HP(y),r)<=0||(s.has(y.key)||ed(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,s){ke(9500)}ri(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new vx(this)}getSize(e){return te.resolve(this.size)}}class vx extends ux{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.persistence=e,this.ii=new Io((t=>Lm(t)),Fm),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new Wm,this.targetCount=0,this._i=Aa.ar()}forEachTarget(e,t){return this.ii.forEach(((r,s)=>t(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),te.waitFor(a).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xh(0),this.ci=!1,this.ci=!0,this.li=new px,this.referenceDelegate=e(this),this.hi=new yx(this),this.indexManager=new nx,this.remoteDocumentCache=(function(s){return new gx(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new ex(t),this.Ti=new dx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new mx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new _x(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return te.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class _x extends GP{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ai=new Wm,this.Ri=null}static Vi(e){return new qm(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(r=>{const s=Ee.fromPath(r);return this.fi(e,s).next((a=>{a||t.removeEntry(s,Me.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ch{constructor(e,t){this.persistence=e,this.gi=new Io((r=>XP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=lx(this,t)}static Vi(e,t){return new Ch(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((a=>a?te.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Me.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eh(e.data.value)),t}Sr(e,t,r){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ge(),s=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return mb()?8:KP(ln())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new wx;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(fa()<=qe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(fa()<=qe.DEBUG&&fe("QueryEngine","Query:",pa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(fa()<=qe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):te.resolve())}ps(e,t){if(rw(t))return te.resolve(null);let r=Wr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=$p(t,null,"F"),r=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ge(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,$p(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,s){return rw(t)||s.isEqual(Me.min())?te.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?te.resolve(null):(fa()<=qe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pa(t)),this.vs(e,u,t,$P(s,ql)).next((d=>d)))}))}bs(e,t){let r=new Ft(gT(e));return t.forEach(((s,a)=>{ed(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return fa()<=qe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",pa(t)),this.gs.getDocumentsMatchingQuery(e,t,Es.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",Tx=3e8;class Sx{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new yt(He),this.Ms=new Io((a=>Lm(a)),Fm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Ix(n,e,t,r){return new Sx(n,e,t,r)}async function jT(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ge();for(const m of s){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Cx(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,y){const E=m.batch,_=E.keys();let R=te.resolve();return _.forEach((O=>{R=R.next((()=>y.getEntry(f,O))).next((D=>{const b=m.docVersions.get(O);rt(b!==null,48541),D.version.compareTo(b)<0&&(E.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),y.addEntry(D)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ge();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function UT(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function bx(n,e){const t=Ue(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((y,E)=>{const _=s.get(E);if(!_)return;d.push(t.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>t.hi.addMatchingKeys(a,y.addedDocuments,E))));let R=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Jt.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),s=s.insert(E,R),(function(D,b,B){return D.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Tx?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,R,y)&&d.push(t.hi.updateTargetData(a,R))}));let f=Pi(),m=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(Ax(a,u,e.documentUpdates).next((y=>{f=y.Ls,m=y.ks}))),!r.isEqual(Me.min())){const y=t.hi.getLastRemoteSnapshotVersion(a).next((E=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(y)}return te.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function Ax(n,e,t){let r=Ge(),s=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=Pi();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):fe(Km,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function Rx(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Dm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Px(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.hi.getTargetData(r,e).next((a=>a?(s=a,te.resolve(s)):t.hi.allocateTargetId(r).next((u=>(s=new fs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Kp(n,e,t){const r=Ue(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Ma(u))throw u;fe(Km,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function gw(n,e,t){const r=Ue(n);let s=Me.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,y){const E=Ue(f),_=E.Ms.get(y);return _!==void 0?te.resolve(E.Fs.get(_)):E.hi.getTargetData(m,y)})(r,u,Wr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:Me.min(),t?a:Ge()))).next((d=>(kx(r,mk(e),d),{documents:d,qs:a})))))}function kx(n,e,t){let r=n.xs.get(e)||Me.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class vw{constructor(){this.activeTargetIds=Ek()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xx{constructor(){this.Fo=new vw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="ConnectivityMonitor";class _w{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(yw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Qp(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="RestConnection",Ox={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=Qp(),d=this.Go(e,t.toUriEncodedString());fe(lp,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),y=xi(m);return this.jo(e,d,f,r,y).then((E=>(fe(lp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw ws(lp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",r),E}))}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Da})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const r=Ox[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Mx extends Dx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=Qp();return new Promise(((d,f)=>{const m=new BE;m.setWithCredentials(!0),m.listenOnce($E.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Zc.NO_ERROR:const E=m.getResponseJson();fe(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Zc.TIMEOUT:fe(rn,`RPC '${e}' ${u} timed out`),f(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const _=m.getStatus();if(fe(rn,`RPC '${e}' ${u} failed with status:`,_,"response text:",m.getResponseText()),_>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const O=R==null?void 0:R.error;if(O&&O.status&&O.message){const D=(function(B){const K=B.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(K)>=0?K:ee.UNKNOWN})(O.status);f(new he(D,O.message))}else f(new he(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new he(ee.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{fe(rn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(s);fe(rn,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",y,r,15)}))}P_(e,t,r){const s=Qp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=qE(),d=WE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");fe(rn,`Creating RPC '${e}' stream ${s}: ${y}`,f);const E=u.createWebChannel(y,f);this.T_(E);let _=!1,R=!1;const O=new Vx({Ho:b=>{R?fe(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(_||(fe(rn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),_=!0),fe(rn,`RPC '${e}' stream ${s} sending:`,b),E.send(b))},Yo:()=>E.close()}),D=(b,B,K)=>{b.listen(B,(X=>{try{K(X)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return D(E,kl.EventType.OPEN,(()=>{R||(fe(rn,`RPC '${e}' stream ${s} transport opened.`),O.s_())})),D(E,kl.EventType.CLOSE,(()=>{R||(R=!0,fe(rn,`RPC '${e}' stream ${s} transport closed`),O.__(),this.I_(E))})),D(E,kl.EventType.ERROR,(b=>{R||(R=!0,ws(rn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),O.__(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),D(E,kl.EventType.MESSAGE,(b=>{var B;if(!R){const K=b.data[0];rt(!!K,16349);const X=K,Z=(X==null?void 0:X.error)||((B=X[0])===null||B===void 0?void 0:B.error);if(Z){fe(rn,`RPC '${e}' stream ${s} received error:`,Z);const $=Z.status;let F=(function(P){const N=kt[P];if(N!==void 0)return AT(N)})($),A=Z.message;F===void 0&&(F=ee.INTERNAL,A="Unknown error status: "+$+" with message "+Z.message),R=!0,O.__(new he(F,A)),E.close()}else fe(rn,`RPC '${e}' stream ${s} received:`,K),O.a_(K)}})),D(d,HE.STAT_EVENT,(b=>{b.stat===Mp.PROXY?fe(rn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Mp.NOPROXY&&fe(rn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){return new Uk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="PersistentStream";class BT{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ri(t.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===t&&this.W_(r,s)}),(r=>{e((()=>{const s=new he(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return fe(ww,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(fe(ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lx extends BT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=$k(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?qr(u.readTime):Me.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Gp(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=zp(f)?{documents:qk(a,f)}:{query:Gk(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kT(a,u.resumeToken);const m=Hp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Me.min())>0){d.readTime=Ih(a,u.snapshotVersion.toTimestamp());const m=Hp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=Qk(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Gp(this.serializer),t.removeTarget=e,this.k_(t)}}class Fx extends BT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Wk(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Gp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Hk(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{}class Ux extends jx{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Wp(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ee.UNKNOWN,a.toString())}))}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Wp(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class zx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ri(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class Bx{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Co(this)&&(fe(_o,"Restarting streams for network reachability change."),await(async function(f){const m=Ue(f);m.Ia.add(4),await mu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await sd(m)})(this))}))})),this.Aa=new zx(r,s)}}async function sd(n){if(Co(n))for(const e of n.da)await e(!0)}async function mu(n){for(const e of n.da)await e(!1)}function $T(n,e){const t=Ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Jm(t)?Ym(t):La(t).x_()&&Xm(t,e))}function Qm(n,e){const t=Ue(n),r=La(t);t.Ta.delete(e),r.x_()&&HT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Co(t)&&t.Aa.set("Unknown"))}function Xm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}La(n).H_(e)}function HT(n,e){n.Ra.$e(e),La(n).Y_(e)}function Ym(n){n.Ra=new Mk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),La(n).start(),n.Aa.aa()}function Jm(n){return Co(n)&&!La(n).M_()&&n.Ta.size>0}function Co(n){return Ue(n).Ia.size===0}function WT(n){n.Ra=void 0}async function $x(n){n.Aa.set("Online")}async function Hx(n){n.Ta.forEach(((e,t)=>{Xm(n,e)}))}async function Wx(n,e){WT(n),Jm(n)?(n.Aa.la(e),Ym(n)):n.Aa.set("Unknown")}async function qx(n,e,t){if(n.Aa.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(r){fe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(n,r)}else if(e instanceof rh?n.Ra.Ye(e):e instanceof RT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Me.min()))try{const r=await UT(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ta.get(m);y&&a.Ta.set(m,y.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const y=a.Ta.get(f);if(!y)return;a.Ta.set(f,y.withResumeToken(Jt.EMPTY_BYTE_STRING,y.snapshotVersion)),HT(a,f);const E=new fs(y.target,f,m,y.sequenceNumber);Xm(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){fe(_o,"Failed to raise snapshot:",r),await bh(n,r)}}async function bh(n,e,t){if(!Ma(e))throw e;n.Ia.add(1),await mu(n),n.Aa.set("Offline"),t||(t=()=>UT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(_o,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await sd(n)}))}function qT(n,e){return e().catch((t=>bh(n,t,e)))}async function od(n){const e=Ue(n),t=Cs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Dm;for(;Gx(e);)try{const s=await Rx(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,Kx(e,s)}catch(s){await bh(e,s)}GT(e)&&KT(e)}function Gx(n){return Co(n)&&n.Pa.length<10}function Kx(n,e){n.Pa.push(e);const t=Cs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function GT(n){return Co(n)&&!Cs(n).M_()&&n.Pa.length>0}function KT(n){Cs(n).start()}async function Qx(n){Cs(n).na()}async function Xx(n){const e=Cs(n);for(const t of n.Pa)e.X_(t.mutations)}async function Yx(n,e,t){const r=n.Pa.shift(),s=Bm.from(r,e,t);await qT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await od(n)}async function Jx(n,e){e&&Cs(n).Z_&&await(async function(r,s){if((function(u){return Dk(u)&&u!==ee.ABORTED})(s.code)){const a=r.Pa.shift();Cs(r).N_(),await qT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await od(r)}})(n,e),GT(n)&&KT(n)}async function Ew(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),fe(_o,"RemoteStore received new credentials");const r=Co(t);t.Ia.add(3),await mu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await sd(t)}async function Zx(n,e){const t=Ue(n);e?(t.Ia.delete(2),await sd(t)):e||(t.Ia.add(2),await mu(t),t.Aa.set("Unknown"))}function La(n){return n.Va||(n.Va=(function(t,r,s){const a=Ue(t);return a.ia(),new Lx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:$x.bind(null,n),e_:Hx.bind(null,n),n_:Wx.bind(null,n),J_:qx.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Jm(n)?Ym(n):n.Aa.set("Unknown")):(await n.Va.stop(),WT(n))}))),n.Va}function Cs(n){return n.ma||(n.ma=(function(t,r,s){const a=Ue(t);return a.ia(),new Fx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Qx.bind(null,n),n_:Jx.bind(null,n),ea:Xx.bind(null,n),ta:Yx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await od(n)):(await n.ma.stop(),n.Pa.length>0&&(fe(_o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new Zm(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(n,e){if(Ri("AsyncQueue",`${e}: ${n}`),Ma(n))return new he(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{static emptySet(e){return new wa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=xl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.fa=new yt(Ee.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ke(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ra{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ra(e,t,wa.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class tN{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=Ue(t),a=s.queries;s.queries=Sw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function Sw(){return new Io((n=>mT(n)),Zh)}async function QT(n,e){const t=Ue(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new eN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=eg(u,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&tg(t)}async function XT(n,e){const t=Ue(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nN(n,e){const t=Ue(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&tg(t)}function rN(n,e,t){const r=Ue(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function tg(n){n.Da.forEach((e=>{e.next()}))}var Xp,Iw;(Iw=Xp||(Xp={})).Fa="default",Iw.Cache="cache";class YT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class ZT{constructor(e){this.key=e}}class iN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=gT(e),this.eu=new wa(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Tw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const _=s.get(y),R=ed(this.query,E)?E:null,O=!!_&&this.mutatedKeys.has(_.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let b=!1;_&&R?_.data.isEqual(R.data)?O!==D&&(r.track({type:3,doc:R}),b=!0):this.iu(_,R)||(r.track({type:2,doc:R}),b=!0,(f&&this.Xa(R,f)>0||m&&this.Xa(R,m)<0)&&(d=!0)):!_&&R?(r.track({type:0,doc:R}),b=!0):_&&!R&&(r.track({type:1,doc:_}),b=!0,(f||m)&&(d=!0)),b&&(R?(u=u.add(R),a=D?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,E)=>(function(R,O){const D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:b})}};return D(R)-D(O)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new Ra(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new ZT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new JT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ra.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ng="SyncEngine";class sN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oN{constructor(e){this.key=e,this.lu=!1}}class aN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Io((d=>mT(d)),Zh),this.Tu=new Map,this.Iu=new Set,this.du=new yt(Ee.comparator),this.Eu=new Map,this.Au=new Wm,this.Ru={},this.Vu=new Map,this.mu=Aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lN(n,e,t=!0){const r=sS(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await eS(r,e,t,!0),s}async function uN(n,e){const t=sS(n);await eS(t,e,!0,!1)}async function eS(n,e,t,r){const s=await Px(n.localStore,Wr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await cN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&$T(n.remoteStore,s),d}async function cN(n,e,t,r,s){n.gu=(E,_,R)=>(async function(D,b,B,K){let X=b.view.nu(B);X.Ds&&(X=await gw(D.localStore,b.query,!1).then((({documents:A})=>b.view.nu(A,X))));const Z=K&&K.targetChanges.get(b.targetId),$=K&&K.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(X,D.isPrimaryClient,Z,$);return bw(D,b.targetId,F._u),F.snapshot})(n,E,_,R);const a=await gw(n.localStore,e,!0),u=new iN(e,a.qs),d=u.nu(a.documents),f=pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);bw(n,t,m._u);const y=new sN(e,t,u);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function hN(n,e,t){const r=Ue(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter((u=>!Zh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kp(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Qm(r.remoteStore,s.targetId),Yp(r,s.targetId)})).catch(Va)):(Yp(r,s.targetId),await Kp(r.localStore,s.targetId,!0))}async function dN(n,e){const t=Ue(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(t.remoteStore,r.targetId))}async function fN(n,e,t){const r=wN(n);try{const s=await(function(u,d){const f=Ue(u),m=ft.now(),y=d.reduce(((R,O)=>R.add(O.key)),Ge());let E,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let O=Pi(),D=Ge();return f.Os.getEntries(R,y).next((b=>{O=b,O.forEach(((B,K)=>{K.isValidDocument()||(D=D.add(B))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,O))).next((b=>{E=b;const B=[];for(const K of d){const X=Pk(K,E.get(K.key).overlayedDocument);X!=null&&B.push(new Rs(K.key,X,aT(X.value.mapValue),Cr.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,B,d)})).next((b=>{_=b;const B=b.applyToLocalDocumentSet(E,D);return f.documentOverlayCache.saveOverlays(R,b.batchId,B)}))})).then((()=>({batchId:_.batchId,changes:yT(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new yt(He)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,s.batchId,t),await gu(r,s.changes),await od(r.remoteStore)}catch(s){const a=eg(s,"Failed to persist write");t.reject(a)}}async function tS(n,e){const t=Ue(n);try{const r=await bx(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?rt(u.lu,14607):s.removedDocuments.size>0&&(rt(u.lu,42227),u.lu=!1))})),await gu(t,r,e)}catch(r){await Va(r)}}function Cw(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=Ue(u);f.onlineState=d;let m=!1;f.queries.forEach(((y,E)=>{for(const _ of E.wa)_.va(d)&&(m=!0)})),m&&tg(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pN(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new yt(Ee.comparator);u=u.insert(a,an.newNoDocument(a,Me.min()));const d=Ge().add(a),f=new rd(Me.min(),new Map,new yt(He),u,d);await tS(r,f),r.du=r.du.remove(a),r.Eu.delete(e),rg(r)}else await Kp(r.localStore,e,!1).then((()=>Yp(r,e,t))).catch(Va)}async function mN(n,e){const t=Ue(n),r=e.batch.batchId;try{const s=await Cx(t.localStore,e);rS(t,r,null),nS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gu(t,s)}catch(s){await Va(s)}}async function gN(n,e,t){const r=Ue(n);try{const s=await(function(u,d){const f=Ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next((E=>(rt(E!==null,37113),y=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);rS(r,e,t),nS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gu(r,s)}catch(s){await Va(s)}}function nS(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function rS(n,e,t){const r=Ue(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Yp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||iS(n,r)}))}function iS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),rg(n))}function bw(n,e,t){for(const r of t)r instanceof JT?(n.Au.addReference(r.key,e),vN(n,r)):r instanceof ZT?(fe(ng,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||iS(n,r.key)):ke(19791,{yu:r})}function vN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(fe(ng,"New document in limbo: "+t),n.Iu.add(r),rg(n))}function rg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(ut.fromString(e)),r=n.mu.next();n.Eu.set(r,new oN(t)),n.du=n.du.insert(t,r),$T(n.remoteStore,new fs(Wr(jm(t.path)),r,"TargetPurposeLimboResolution",Xh.ue))}}async function gu(n,e,t){const r=Ue(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const E=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Gm.Es(f.targetId,m);a.push(E)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,m){const y=Ue(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(m,(_=>te.forEach(_.Is,(R=>y.persistence.referenceDelegate.addReference(E,_.targetId,R))).next((()=>te.forEach(_.ds,(R=>y.persistence.referenceDelegate.removeReference(E,_.targetId,R)))))))))}catch(E){if(!Ma(E))throw E;fe(Km,"Failed to update sequence numbers: "+E)}for(const E of m){const _=E.targetId;if(!E.fromCache){const R=y.Fs.get(_),O=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(O);y.Fs=y.Fs.insert(_,D)}}})(r.localStore,a))}async function yN(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){fe(ng,"User change. New user:",e.toKey());const r=await jT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new he(ee.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(t,r.Bs)}}function _N(n,e){const t=Ue(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let s=Ge();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function sS(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pN.bind(null,e),e.hu.J_=nN.bind(null,e.eventManager),e.hu.pu=rN.bind(null,e.eventManager),e}function wN(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gN.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Ix(this.persistence,new Ex,e.initialUser,this.serializer)}Du(e){return new FT(qm.Vi,this.serializer)}bu(e){return new xx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class EN extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){rt(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ox(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new FT((r=>Ch.Vi(r,t)),this.serializer)}}class Jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),await Zx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tN})()}createDatastore(e){const t=id(e.databaseInfo.databaseId),r=(function(a){return new Mx(a)})(e.databaseInfo);return(function(a,u,d,f){return new Ux(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new Bx(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cw(this.syncEngine,t,0)),(function(){return _w.C()?new _w:new Nx})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,y){const E=new aN(s,a,u,d,f,m);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Ue(s);fe(_o,"RemoteStore shutting down."),a.Ia.add(5),await mu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class TN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{fe(bs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(fe(bs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=eg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cp(n,e){n.asyncQueue.verifyOperationInProgress(),fe(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await jT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{ws("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{ws("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function Aw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await SN(n);fe(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ew(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Ew(e.remoteStore,s))),n._onlineComponents=e}async function SN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(bs,"Using user provided OfflineComponentProvider");try{await cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ws("Error using user provided cache. Falling back to memory cache: "+t),await cp(n,new Ah)}}else fe(bs,"Using default OfflineComponentProvider"),await cp(n,new EN(void 0));return n._offlineComponents}async function aS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(bs,"Using user provided OnlineComponentProvider"),await Aw(n,n._uninitializedComponentsProvider._online)):(fe(bs,"Using default OnlineComponentProvider"),await Aw(n,new Jp))),n._onlineComponents}function IN(n){return aS(n).then((e=>e.syncEngine))}async function lS(n){const e=await aS(n),t=e.eventManager;return t.onListen=lN.bind(null,e.syncEngine),t.onUnlisten=hN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dN.bind(null,e.syncEngine),t}function CN(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new oS({next:_=>{y.Ou(),u.enqueueAndForget((()=>XT(a,E)));const R=_.docs.has(d);!R&&_.fromCache?m.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&f&&f.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),E=new YT(jm(d.path),y,{includeMetadataChanges:!0,ka:!0});return QT(a,E)})(await lS(n),n.asyncQueue,e,t,r))),r.promise}function bN(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const y=new oS({next:_=>{y.Ou(),u.enqueueAndForget((()=>XT(a,E))),_.fromCache&&f.source==="server"?m.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),E=new YT(d,y,{includeMetadataChanges:!0,ka:!0});return QT(a,E)})(await lS(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="firestore.googleapis.com",Pw=!0;class kw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=Pw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Pw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ix)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OP;switch(r.type){case"firstParty":return new LP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Rw.get(t);r&&(fe("ComponentProvider","Removing Datastore"),Rw.delete(t),r.terminate())})(this),Promise.resolve()}}function AN(n,e,t,r={}){var s;n=Yr(n,ad);const a=xi(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Bh(`https://${f}`),$h("Firestore",!0)),u.host!==cS&&u.host!==f&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!go(m,d)&&(n._setSettings(m),r.mockUserToken)){let y,E;if(typeof r.mockUserToken=="string")y=r.mockUserToken,E=on.MOCK_USER;else{y=eE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(_)}n._authCredentials=new DP(new KE(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hu(t,At._jsonSchema))return new At(e,r||null,new Ee(ut.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Ot("string",At._jsonSchemaVersion),referencePath:Ot("string")};class ys extends Fa{constructor(e,t,r){super(e,t,jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Ee(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function hS(n,e,...t){if(n=ct(n),XE("collection","path",e),n instanceof ad){const r=ut.fromString(e,...t);return $_(r),new ys(n,null,r)}{if(!(n instanceof At||n instanceof ys))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return $_(r),new ys(n.firestore,null,r)}}function Ps(n,e,...t){if(n=ct(n),arguments.length===1&&(e=Om.newId()),XE("doc","path",e),n instanceof ad){const r=ut.fromString(e,...t);return B_(r),new At(n,null,new Ee(r))}{if(!(n instanceof At||n instanceof ys))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return B_(r),new At(n.firestore,n instanceof ys?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class Nw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zT(this,"async_queue_retry"),this.oc=()=>{const r=up();r&&fe(xw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=up();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=up();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ti;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ma(e))throw e;fe(xw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Ri("INTERNAL UNHANDLED ERROR: ",Ow(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Zm.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:Ow(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Ow(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ja extends ad{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Nw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nw(e),this._firestoreClient=void 0,await e}}}function RN(n,e){const t=typeof n=="object"?n:Hh(),r=typeof n=="string"?n:_h,s=au(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=ym("firestore");a&&AN(s,...a)}return s}function ig(n){if(n._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PN(n),n._firestoreClient}function PN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,y){return new ZP(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,uS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new TN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nr(Jt.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nr(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,nr._jsonSchema))return nr.fromBase64String(e.bytes)}}nr._jsonSchemaVersion="firestore/bytes/1.0",nr._jsonSchema={type:Ot("string",nr._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Ot("string",Gr._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:Ot("string",Kr._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=/^__.*__$/;class xN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class dS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:n})}}class sg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fS(this.Ec)&&kN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class NN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||id(e)}Dc(e,t,r,s=!1){return new sg({Ec:e,methodName:t,bc:r,path:Yt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(n){const e=n._freezeSettings(),t=id(n._databaseId);return new NN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ON(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);lg("Data must be an object, but it was:",u,r);const d=pS(r,u);let f,m;if(a.merge)f=new zn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const _=Zp(e,E,t);if(!u.contains(_))throw new he(ee.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gS(y,_)||y.push(_)}f=new zn(y),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new xN(new Pn(d),f,m)}class cd extends ud{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class ag extends ud{_toFieldTransform(e){return new Ck(e.path,new Xl)}isEqual(e){return e instanceof ag}}function DN(n,e,t,r){const s=n.Dc(1,e,t);lg("Data must be an object, but it was:",s,r);const a=[],u=Pn.empty();As(r,((f,m)=>{const y=ug(e,f,t);m=ct(m);const E=s.gc(y);if(m instanceof cd)a.push(y);else{const _=vu(m,E);_!=null&&(a.push(y),u.set(y,_))}}));const d=new zn(a);return new dS(u,d,s.fieldTransforms)}function VN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[Zp(e,r,t)],f=[s];if(a.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)d.push(Zp(e,a[_])),f.push(a[_+1]);const m=[],y=Pn.empty();for(let _=d.length-1;_>=0;--_)if(!gS(m,d[_])){const R=d[_];let O=f[_];O=ct(O);const D=u.gc(R);if(O instanceof cd)m.push(R);else{const b=vu(O,D);b!=null&&(m.push(R),y.set(R,b))}}const E=new zn(m);return new dS(y,E,u.fieldTransforms)}function MN(n,e,t,r=!1){return vu(t,n.Dc(r?4:3,e))}function vu(n,e){if(mS(n=ct(n)))return lg("Unsupported field value:",e,n),pS(n,e);if(n instanceof ud)return(function(r,s){if(!fS(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=vu(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ft.fromDate(r);return{timestampValue:Ih(s.serializer,a)}}if(r instanceof ft){const a=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(s.serializer,a)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nr)return{bytesValue:kT(s.serializer,r._byteString)};if(r instanceof At){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Hm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kr)return(function(u,d){return{mapValue:{fields:{[sT]:{stringValue:oT},[wh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Um(d.serializer,m)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Qh(r)}`)})(n,e)}function pS(n,e){const t={};return ZE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(n,((r,s)=>{const a=vu(s,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function mS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Gr||n instanceof nr||n instanceof At||n instanceof ud||n instanceof Kr)}function lg(n,e,t){if(!mS(t)||!YE(t)){const r=Qh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Zp(n,e,t){if((e=ct(e))instanceof ld)return e._internalPath;if(typeof e=="string")return ug(n,e);throw Rh("Field path arguments must be of type string or ",n,!1,void 0,t)}const LN=new RegExp("[~\\*/\\[\\]]");function ug(n,e,t){if(e.search(LN)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new he(ee.INVALID_ARGUMENT,d+n+f)}function gS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FN extends vS{data(){return super.data()}}function cg(n,e){return typeof e=="string"?ug(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class UN extends hg{}function yS(n,e,...t){let r=[];e instanceof hg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof dg)).length,d=a.filter((f=>f instanceof hd)).length;if(u>1||u>0&&d>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class hd extends UN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hd(e,t,r)}_apply(e){const t=this._parse(e);return wS(e._query,t),new Fa(e.firestore,e.converter,Bp(e._query,t))}_parse(e){const t=og(e.firestore);return(function(a,u,d,f,m,y,E){let _;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Vw(E,y);const O=[];for(const D of E)O.push(Dw(f,a,D));_={arrayValue:{values:O}}}else _=Dw(f,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Vw(E,y),_=MN(d,u,E,y==="in"||y==="not-in");return Nt.create(m,y,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _S(n,e,t){const r=e,s=cg("where",n);return hd._create(s,r,t)}class dg extends hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)wS(u,f),u=Bp(u,f)})(e._query,t),new Fa(e.firestore,e.converter,Bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dw(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Ee.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Y_(n,new Ee(r))}if(t instanceof At)return Y_(n,t._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(t)}.`)}function Vw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wS(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zN{convertValue(e,t="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return As(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[wh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>bt(u.doubleValue)));return new Kr(a)}convertGeoPoint(e){return new Gr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const t=Ts(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);rt(MT(r),9688,{name:e});const s=new Kl(r.get(1),r.get(3)),a=new Ee(r.popFirst(5));return s.isEqual(t)||Ri(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends vS{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:Ot("string",po._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class ih extends po{data(e={}){return super.data(e)}}class Ea{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ol(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ih(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new ih(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ol(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:$N(d.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $N(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){n=Yr(n,At);const e=Yr(n.firestore,ja);return CN(ig(e),n._key).then((t=>qN(e,n,t)))}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:Ot("string",Ea._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class ES extends zN{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function TS(n){n=Yr(n,Fa);const e=Yr(n.firestore,ja),t=ig(e),r=new ES(e);return jN(n._query),bN(t,n._query).then((s=>new Ea(e,r,n,s)))}function fg(n,e,t){n=Yr(n,At);const r=Yr(n.firestore,ja),s=BN(n.converter,e,t);return pg(r,[ON(og(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Cr.none())])}function HN(n,e,t,...r){n=Yr(n,At);const s=Yr(n.firestore,ja),a=og(s);let u;return u=typeof(e=ct(e))=="string"||e instanceof ld?VN(a,"updateDoc",n._key,e,t,r):DN(a,"updateDoc",n._key,e),pg(s,[u.toMutation(n._key,Cr.exists(!0))])}function WN(n){return pg(Yr(n.firestore,ja),[new zm(n._key,Cr.none())])}function pg(n,e){return(function(r,s){const a=new Ti;return r.asyncQueue.enqueueAndForget((async()=>fN(await IN(r),s,a))),a.promise})(ig(n),e)}function qN(n,e,t){const r=t.docs.get(e._key),s=new ES(n);return new po(n,s,e._key,r,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}function em(){return new ag("serverTimestamp")}(function(e,t=!0){(function(s){Da=s})(So),_s(new Ci("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new ja(new VP(r.getProvider("auth-internal")),new FP(u,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(m.options.projectId,y)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),rr(L_,F_,e),rr(L_,F_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="type.googleapis.com/google.protobuf.Int64Value",KN="type.googleapis.com/google.protobuf.UInt64Value";function SS(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ph(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ph(e));if(typeof n=="function"||typeof n=="object")return SS(n,e=>Ph(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Pa(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case GN:case KN:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Pa(e)):typeof n=="function"||typeof n=="object"?SS(n,e=>Pa(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kn extends Ar{constructor(e,t,r){super(`${mg}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,kn.prototype)}}function QN(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kh(n,e){let t=QN(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Mw[u])return new kn("internal","internal");t=Mw[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=Pa(s))}}catch{}return t==="ok"?null:new kn(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Rn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="us-central1",YN=/^data: (.*?)(?:\n|$)/;function JN(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new kn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class ZN{constructor(e,t,r,s,a=tm,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new XN(e,t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=tm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function eO(n,e,t){const r=xi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Bh(n.emulatorOrigin),$h("Functions",!0))}function tO(n,e,t){const r=s=>rO(n,e,s,{});return r.stream=(s,a)=>sO(n,e,s,a),r}async function nO(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function IS(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function rO(n,e,t,r){const s=n._url(e);return iO(n,s,t,r)}async function iO(n,e,t,r){t=Ph(t);const s={data:t},a=await IS(n,r),u=r.timeout||7e4,d=JN(u),f=await Promise.race([nO(e,s,a,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!f)throw new kn("cancelled","Firebase Functions instance was deleted.");const m=kh(f.status,f.json);if(m)throw m;if(!f.json)throw new kn("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new kn("internal","Response is missing data field.");return{data:Pa(y)}}function sO(n,e,t,r){const s=n._url(e);return oO(n,s,t,r||{})}async function oO(n,e,t,r){var s;t=Ph(t);const a={data:t},u=await IS(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:u,signal:r==null?void 0:r.signal})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const D=new kn("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const O=kh(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const y=new Promise((R,O)=>{f=R,m=O});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const R=new kn("cancelled","Request was cancelled.");m(R)});const E=d.body.getReader(),_=aO(E,f,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const R=_.getReader();return{async next(){const{value:O,done:D}=await R.read();return{value:O,done:D}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:y}}function aO(n,e,t,r){const s=(u,d)=>{const f=u.match(YN);if(!f)return;const m=f[1];try{const y=JSON.parse(m);if("result"in y){e(Pa(y.result));return}if("message"in y){d.enqueue(Pa(y.message));return}if("error"in y){const E=kh(0,y);d.error(E),t(E);return}}catch(y){if(y instanceof kn){d.error(y),t(y);return}}},a=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const m=new kn("cancelled","Request was cancelled");return u.error(m),t(m),Promise.resolve()}try{const{value:m,done:y}=await n.read();if(y){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const _=new kn("cancelled","Request was cancelled");u.error(_),t(_),await n.cancel();return}d+=a.decode(m,{stream:!0});const E=d.split(`
`);d=E.pop()||"";for(const _ of E)_.trim()&&s(_.trim(),u);return f()}catch(m){const y=m instanceof kn?m:kh(0,null);u.error(y),t(y)}}},cancel(){return n.cancel()}})}const Lw="@firebase/functions",Fw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="auth-internal",uO="app-check-internal",cO="messaging-internal";function hO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(lO),u=t.getProvider(cO),d=t.getProvider(uO);return new ZN(s,a,u,d,r)};_s(new Ci(mg,e,"PUBLIC").setMultipleInstances(!0)),rr(Lw,Fw,n),rr(Lw,Fw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(n=Hh(),e=tm){const r=au(ct(n),mg).getImmediate({identifier:e}),s=ym("functions");return s&&fO(r,...s),r}function fO(n,e,t){eO(ct(n),e,t)}function Zr(n,e,t){return tO(ct(n),e)}hO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebasestorage.googleapis.com",bS="storageBucket",pO=120*1e3,mO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Ar{constructor(e,t,r=0){super(hp(e),`Firebase Storage: ${t} (${hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function hp(n){return"storage/"+n}function gg(){const n="An unknown error occurred, please check the error payload for server response.";return new St(Tt.UNKNOWN,n)}function gO(n){return new St(Tt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vO(n){return new St(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Tt.UNAUTHENTICATED,n)}function _O(){return new St(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wO(n){return new St(Tt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function EO(){return new St(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TO(){return new St(Tt.CANCELED,"User canceled the upload/download.")}function SO(n){return new St(Tt.INVALID_URL,"Invalid URL '"+n+"'.")}function IO(n){return new St(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function CO(){return new St(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bS+"' property when initializing the app?")}function bO(){return new St(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function AO(){return new St(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RO(n){return new St(Tt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function nm(n){return new St(Tt.INVALID_ARGUMENT,n)}function AS(){return new St(Tt.APP_DELETED,"The Firebase app was deleted.")}function PO(n){return new St(Tt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zl(n,e){return new St(Tt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bl(n){throw new St(Tt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gn.makeFromUrl(e,t)}catch{return new gn(e,"")}if(r.path==="")return r;throw IO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${y}/b/${s}/o${_}`,"i"),O={bucket:1,path:3},D=t===CS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",B=new RegExp(`^https?://${D}/${s}/${b}`,"i"),X=[{regex:d,indices:f,postModify:a},{regex:R,indices:O,postModify:m},{regex:B,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<X.length;Z++){const $=X[Z],F=$.regex.exec(e);if(F){const A=F[$.indices.bucket];let C=F[$.indices.path];C||(C=""),r=new gn(A,C),$.postModify(r);break}}if(r==null)throw SO(e);return r}}class kO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function y(...b){m||(m=!0,e.apply(null,b))}function E(b){s=setTimeout(()=>{s=null,n(R,f())},b)}function _(){a&&clearTimeout(a)}function R(b,...B){if(m){_();return}if(b){_(),y.call(null,b,...B);return}if(f()||u){_(),y.call(null,b,...B);return}r<64&&(r*=2);let X;d===1?(d=2,X=0):X=(r+Math.random())*1e3,E(X)}let O=!1;function D(b){O||(O=!0,_(),!m&&(s!==null?(b||(d=2),clearTimeout(s),E(0)):b||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,D(!0)},t),D}function NO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(n){return n!==void 0}function DO(n){return typeof n=="object"&&!Array.isArray(n)}function vg(n){return typeof n=="string"||n instanceof String}function jw(n){return yg()&&n instanceof Blob}function yg(){return typeof Blob<"u"}function rm(n,e,t,r){if(r<e)throw nm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function RS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var mo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mo||(mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t,r,s,a,u,d,f,m,y,E,_=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=E,this.retry=_,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,D)=>{this.resolve_=O,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===mo.NO_ERROR,f=a.getStatus();if(!d||VO(f,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===mo.ABORT;r(!1,new zc(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new zc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());OO(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=gg();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?AS():TO();u(f)}else{const f=EO();u(f)}};this.canceled_?t(!1,new zc(!1,null,!0)):this.backoffId_=xO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function LO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function UO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function zO(n,e,t,r,s,a,u=!0,d=!1){const f=RS(n.urlParams),m=n.url+f,y=Object.assign({},n.headers);return jO(y,e),LO(y,t),FO(y,a),UO(y,r),new MO(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $O(...n){const e=BO();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(yg())return new Blob(n);throw new St(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){if(typeof atob>"u")throw RO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dp{constructor(e,t){this.data=e,this.contentType=t||null}}function qO(n,e){switch(n){case $r.RAW:return new dp(PS(e));case $r.BASE64:case $r.BASE64URL:return new dp(kS(n,e));case $r.DATA_URL:return new dp(KO(e),QO(e))}throw gg()}function PS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function GO(n){let e;try{e=decodeURIComponent(n)}catch{throw zl($r.DATA_URL,"Malformed data URL.")}return PS(e)}function kS(n,e){switch(n){case $r.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case $r.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw zl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=WO(e)}catch(s){throw s.message.includes("polyfill")?s:zl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw zl($r.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=XO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KO(n){const e=new xS(n);return e.base64?kS($r.BASE64,e.rest):GO(e.rest)}function QO(n){return new xS(n).contentType}function XO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){let r=0,s="";jw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(jw(this.data_)){const r=this.data_,s=HO(r,e,t);return s===null?null:new hs(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new hs(r,!0)}}static getBlob(...e){if(yg()){const t=e.map(r=>r instanceof hs?r.data_:r);return new hs($O.apply(null,t))}else{const t=e.map(u=>vg(u)?qO($r.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new hs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n){let e;try{e=JSON.parse(n)}catch{return null}return DO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function JO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function NS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n,e){return e}class mn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||ZO}}let Bc=null;function eD(n){return!vg(n)||n.length<2?n:NS(n)}function OS(){if(Bc)return Bc;const n=[];n.push(new mn("bucket")),n.push(new mn("generation")),n.push(new mn("metageneration")),n.push(new mn("name","fullPath",!0));function e(a,u){return eD(u)}const t=new mn("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new mn("size");return s.xform=r,n.push(s),n.push(new mn("timeCreated")),n.push(new mn("updated")),n.push(new mn("md5Hash",null,!0)),n.push(new mn("cacheControl",null,!0)),n.push(new mn("contentDisposition",null,!0)),n.push(new mn("contentEncoding",null,!0)),n.push(new mn("contentLanguage",null,!0)),n.push(new mn("contentType",null,!0)),n.push(new mn("metadata","customMetadata",!0)),Bc=n,Bc}function tD(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new gn(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function nD(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return tD(r,n),r}function DS(n,e,t){const r=_g(e);return r===null?null:nD(n,r,t)}function rD(n,e,t,r){const s=_g(e);if(s===null||!vg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,E=n.fullPath,_="/b/"+u(y)+"/o/"+u(E),R=yu(_,t,r),O=RS({alt:"media",token:m});return R+O})[0]}function iD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="prefixes",zw="items";function sD(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Uw])for(const s of t[Uw]){const a=s.replace(/\/$/,""),u=n._makeStorageReference(new gn(e,a));r.prefixes.push(u)}if(t[zw])for(const s of t[zw]){const a=n._makeStorageReference(new gn(e,s.name));r.items.push(a)}return r}function oD(n,e,t){const r=_g(t);return r===null?null:sD(n,e,r)}class fd{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n){if(!n)throw gg()}function aD(n,e){function t(r,s){const a=DS(n,s,e);return wg(a!==null),a}return t}function lD(n,e){function t(r,s){const a=oD(n,e,s);return wg(a!==null),a}return t}function uD(n,e){function t(r,s){const a=DS(n,s,e);return wg(a!==null),rD(a,s,n.host,n._protocol)}return t}function Eg(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=_O():s=yO():t.getStatus()===402?s=vO(n.bucket):t.getStatus()===403?s=wO(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function VS(n){const e=Eg(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=gO(n.path)),a.serverResponse=s.serverResponse,a}return t}function cD(n,e,t,r,s){const a={};e.isRoot?a.prefix="":a.prefix=e.path+"/",t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),s&&(a.maxResults=s);const u=e.bucketOnlyServerUrl(),d=yu(u,n.host,n._protocol),f="GET",m=n.maxOperationRetryTime,y=new fd(d,f,lD(n,e.bucket),m);return y.urlParams=a,y.errorHandler=Eg(e),y}function hD(n,e,t){const r=e.fullServerUrl(),s=yu(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new fd(s,a,uD(n,t),u);return d.errorHandler=VS(e),d}function dD(n,e){const t=e.fullServerUrl(),r=yu(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new fd(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=VS(e),d}function fD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function pD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=fD(null,e)),r}function mD(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let X="";for(let Z=0;Z<2;Z++)X=X+Math.random().toString().slice(2);return X}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=pD(e,r,s),y=iD(m,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,_=`\r
--`+f+"--",R=hs.getBlob(E,r,_);if(R===null)throw bO();const O={name:m.fullPath},D=yu(a,n.host,n._protocol),b="POST",B=n.maxUploadRetryTime,K=new fd(D,b,aD(n,t),B);return K.urlParams=O,K.headers=u,K.body=R.uploadData(),K.errorHandler=Eg(e),K}class gD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw bl("cannot .send() more than once");if(xi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vD extends gD{initXhr(){this.xhr_.responseType="text"}}function pd(){return new vD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this._service=e,t instanceof gn?this._location=t:this._location=gn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wo(e,t)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NS(this._location.path)}get storage(){return this._service}get parent(){const e=YO(this._location.path);if(e===null)return null;const t=new gn(this._location.bucket,e);return new wo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw PO(e)}}function yD(n,e,t){n._throwIfRoot("uploadBytes");const r=mD(n.storage,n._location,OS(),new hs(e,!0),t);return n.storage.makeRequestWithTokens(r,pd).then(s=>({metadata:s,ref:n}))}function _D(n){const e={prefixes:[],items:[]};return MS(n,e).then(()=>e)}async function MS(n,e,t){const s=await wD(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await MS(n,e,s.nextPageToken)}function wD(n,e){e!=null&&typeof e.maxResults=="number"&&rm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=cD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pd)}function ED(n){n._throwIfRoot("getDownloadURL");const e=hD(n.storage,n._location,OS());return n.storage.makeRequestWithTokens(e,pd).then(t=>{if(t===null)throw AO();return t})}function TD(n){n._throwIfRoot("deleteObject");const e=dD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pd)}function SD(n,e){const t=JO(n._location.path,e),r=new gn(n._location.bucket,t);return new wo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n){return/^[A-Za-z]+:\/\//.test(n)}function CD(n,e){return new wo(n,e)}function LS(n,e){if(n instanceof Tg){const t=n;if(t._bucket==null)throw CO();const r=new wo(t,t._bucket);return e!=null?LS(r,e):r}else return e!==void 0?SD(n,e):n}function bD(n,e){if(e&&ID(e)){if(n instanceof Tg)return CD(n,e);throw nm("To use ref(service, url), the first argument must be a Storage instance.")}else return LS(n,e)}function Bw(n,e){const t=e==null?void 0:e[bS];return t==null?null:gn.makeFromBucketSpec(t,n)}function AD(n,e,t,r={}){n.host=`${e}:${t}`;const s=xi(e);s&&(Bh(`https://${n.host}/b`),$h("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:eE(a,n.app.options.projectId))}class Tg{constructor(e,t,r,s,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=CS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pO,this._maxUploadRetryTime=mO,this._requests=new Set,s!=null?this._bucket=gn.makeFromBucketSpec(s,this._host):this._bucket=Bw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=Bw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new kO(AS());{const u=zO(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const $w="@firebase/storage",Hw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="storage";function RD(n,e,t){return n=ct(n),yD(n,e,t)}function PD(n){return n=ct(n),_D(n)}function kD(n){return n=ct(n),ED(n)}function jS(n){return n=ct(n),TD(n)}function Sg(n,e){return n=ct(n),bD(n,e)}function xD(n=Hh(),e){n=ct(n);const r=au(n,FS).getImmediate({identifier:e}),s=ym("storage");return s&&ND(r,...s),r}function ND(n,e,t,r={}){AD(n,e,t,r)}function OD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Tg(t,r,s,e,So)}function DD(){_s(new Ci(FS,OD,"PUBLIC").setMultipleInstances(!0)),rr($w,Hw,""),rr($w,Hw,"esm2017")}DD();const VD={apiKey:"AIzaSyBMwuPSGuAL3BC4KbmKv7BXwumOvQH4q_U",authDomain:"beastlyworkout-e05ac.firebaseapp.com",projectId:"beastlyworkout-e05ac",storageBucket:"beastlyworkout-e05ac.firebasestorage.app",messagingSenderId:"450850141428",appId:"1:450850141428:web:3cdba0ebf48acfa9f51aa1"},md=rE(VD),vn=xP(md),ei=RN(md),Ig=xD(md),ti=dO(md,"us-central1");_R(vn,PE);Zr(ti,"bootstrapFirstAdmin");Zr(ti,"setUserRole");const MD=Zr(ti,"ensureCoachAccess"),LD=Zr(ti,"acceptCoachTrial"),FD=Zr(ti,"getCoachAccessState"),jD=Zr(ti,"completeClientOnboarding"),UD=Zr(ti,"listCoachesForSupervisor"),zD=Zr(ti,"activateCoachSubscription"),BD=Zr(ti,"renewCoachSubscription"),$D=Zr(ti,"disableCoachSubscription");async function HD(){return(await MD()).data}async function US(){return(await LD()).data}async function Ww(){return(await FD()).data}async function WD(n){return(await jD(n)).data}async function qD(){return(await UD()).data}async function qw(n){return(await zD({uid:n})).data}async function GD(n){return(await BD({uid:n})).data}async function KD(n){return(await $D({uid:n})).data}async function QD(){return vn.currentUser?vn.currentUser.getIdTokenResult(!0):null}async function zS(n){const e=n??vn.currentUser;if(!e)return null;try{const r=(await e.getIdTokenResult()).claims.role;return r==="admin"||r==="trainer"||r==="client"?r:null}catch(t){if((typeof t=="object"&&t&&"code"in t?String(t.code):"").includes("user-token-expired"))try{await e.getIdToken(!0);const a=(await e.getIdTokenResult()).claims.role;return a==="admin"||a==="trainer"||a==="client"?a:null}catch{return await qh(vn),null}throw t}}async function XD(n){const e=n??vn.currentUser;return e?(await e.getIdTokenResult()).claims.supervisor===!0:!1}function BS(){return{createdAt:em(),updatedAt:em()}}function $S(){return{updatedAt:em()}}function bo(){var e;const n=(e=vn.currentUser)==null?void 0:e.uid;if(!n)throw new Error("unauthenticated");return n}async function HS(n={}){const e=bo(),t=Ps(ei,"users",e);return await fg(t,{uid:e,...BS(),...n},{merge:!0}),t}async function im(n){const e=n??bo();return dd(Ps(ei,"users",e))}async function YD(n){const e=n??bo(),t=yS(hS(ei,"users"),_S("assignedCoachId","==",e));return TS(t)}async function WS(n,e){return dd(Ps(ei,"users",n,"private",e))}async function JD(n,e){await fg(Ps(ei,"users",n,"private","onboarding"),{...e,...$S()},{merge:!0})}async function ZD(n){const e=bo(),t=Ps(ei,"plans",n.clientId);return await fg(t,{trainerId:e,clientId:n.clientId,status:n.status,title:n.title,description:n.description??"",exercises:n.exercises,clientNotes:"",lastViewedAt:null,...BS()}),t}async function qS(n,e){const t=e??bo(),r=n==="client"?"clientId":"trainerId",s=yS(hS(ei,"plans"),_S(r,"==",t));return TS(s)}async function e2(n){const e=n??bo();return dd(Ps(ei,"plans",e))}async function t2(n,e){await HN(Ps(ei,"plans",n),{...e,...$S()})}async function n2(n){const e=Ps(ei,"plans",n),t=await dd(e);if(t.exists()){const r=t.data(),s=s2(r.exercises);await Promise.allSettled(s.map(d=>o2(d)));const a=typeof r.trainerId=="string"?r.trainerId:"",u=typeof r.clientId=="string"?r.clientId:"";a&&u&&await a2(a,u)}await WN(e)}async function r2(n,e){const t=bo(),r=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${Date.now()}-${r}`,a=i2(t,n,s);return await RD(a,e,{contentType:e.type||"application/octet-stream"}),kD(a)}function i2(n,e,t){return Sg(Ig,`workout-media/${n}/${e}/${t}`)}function s2(n){if(!Array.isArray(n))return[];const e=new Set;for(const t of n){if(!t||typeof t!="object")continue;const r=t.imageUrl,s=t.mediaUrl;Gw(r)&&e.add(r),Gw(s)&&e.add(s)}return[...e]}function Gw(n){return typeof n!="string"?!1:n.startsWith("gs://")||n.includes("firebasestorage.googleapis.com")||n.includes("firebasestorage.app")}async function o2(n){try{await jS(Sg(Ig,n))}catch(e){console.warn("Unable to remove storage file",{url:n,error:e})}}async function a2(n,e){const t=Sg(Ig,`workout-media/${n}/${e}`);await GS(t)}async function GS(n){try{const{items:e,prefixes:t}=await PD(n);await Promise.allSettled(e.map(r=>jS(r))),await Promise.allSettled(t.map(r=>GS(r)))}catch(e){console.warn("Unable to clear storage folder",{path:n.fullPath,error:e})}}function Ua(){const[n,e]=V.useState(!0),[t,r]=V.useState(vn.currentUser),[s,a]=V.useState(null),[u,d]=V.useState(!1);return V.useEffect(()=>bE(vn,async f=>{try{if(e(!0),r(f),!f){a(null),d(!1);return}await Cg(f);const m=await zS(f);a(m),d(await XD(f))}catch(m){(typeof m=="object"&&m&&"code"in m?String(m.code):"").includes("user-token-expired")&&(await qh(vn),r(null)),a(null),d(!1)}finally{e(!1)}}),[]),V.useMemo(()=>({initializing:n,user:t,role:s,isSupervisor:u,isAuthenticated:!!t}),[n,t,s,u])}const sm=new _i;sm.setCustomParameters({prompt:"select_account"});async function Cg(n){(await im(n.uid)).exists()||await HS({email:n.email??"",displayName:n.displayName??"",role:"client"})}async function Kw(){try{const n=await jR(vn,sm);return await Cg(n.user),{redirected:!1,user:n.user}}catch(n){if(u2(n))return await WR(vn,sm),{redirected:!0,user:null};throw n}}async function l2(){try{const n=await GR(vn);return n!=null&&n.user&&await Cg(n.user),n}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code):"").includes("user-token-expired"))return await qh(vn),null;throw n}}async function Si(){return qh(vn)}function u2(n){if(!(typeof n=="object"&&n&&"code"in n))return!1;const e=String(n.code);return e==="auth/popup-blocked"||e==="auth/operation-not-supported-in-this-environment"}function KS(n){return n.replace(/[^\d]/g,"")}const c2="393405882404".trim(),QS=KS(c2),Er=QS.length>6;function sh(n,e){const t=KS(e??QS),r=encodeURIComponent(n??"Ciao coach, avrei bisogno di un feedback sulla mia scheda.");return`https://wa.me/${t}?text=${r}`}function h2(n){return n.map(e=>({id:e.id,...e.data()}))}function Kt(n){if(typeof n=="object"&&n&&"code"in n){const e=String(n.code);return e.includes("permission-denied")?"Non hai i permessi per questa azione.":e.includes("unauthenticated")?"La sessione  scaduta. Accedi di nuovo.":e.includes("invalid-argument")?"Alcuni dati non sono corretti. Controlla e riprova.":e.includes("failed-precondition")?"Manca una configurazione tecnica lato server. Riprova tra poco.":e.includes("internal")?"Qualcosa non ha funzionato. Riprova tra pochi secondi.":"Operazione non completata. Riprova."}if(n instanceof Error){const e=n.message.toLowerCase();return e.includes("token")||e.includes("credential")?"Sessione non valida. Esci e accedi di nuovo.":"Si  verificato un problema. Riprova."}return"Operazione non riuscita."}const jr="bw_login_intent";function d2(n){return n==="trainer"||n==="admin"}function f2(){const{user:n,role:e}=Ua(),t=iu(),{showError:r}=Uh(),[s,a]=V.useState(!1),[u,d]=V.useState(""),[f,m]=V.useState(!1),[y,E]=V.useState(!1),[_,R]=V.useState(null),O=V.useRef(0),D=V.useMemo(()=>sh("Ciao, vorrei richiedere accesso alla piattaforma Beastly Workout e sottoscrivere l'abbonamento coach.","393405882404"),[]);V.useEffect(()=>{async function F(){try{await l2()}catch(A){const C=Kt(A);d(C),r(C)}}F()},[r]);async function b(F=10){if(!n)return!1;for(let A=0;A<F;A+=1){await QD();const C=await zS(n);if(d2(C))return!0;await new Promise(P=>setTimeout(P,500))}return!1}async function B(){if(!n)return;const F=++O.current,A=()=>F!==O.current||y;m(!0),d("Sto preparando il tuo accesso coach...");try{if(await HS({email:n.email??"",displayName:n.displayName??"",coachAccessRequestedAt:new Date().toISOString()}),A())return;const C=await HD();if(A())return;if(C.isExpired){if(await Si(),sessionStorage.removeItem(jr),A())return;R({mode:"expired",access:C});return}if(C.requiresTrialAcceptance){if(A())return;R({mode:"trial",access:C});return}const P=await b();if(A())return;if(!P){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}sessionStorage.removeItem(jr),t("/app/coach",{replace:!0})}catch(C){if(A())return;const P=Kt(C);d(P),r(P)}finally{A()||m(!1)}}V.useEffect(()=>{async function F(){if(!n){m(!1),y||d("");return}if(f||y)return;if(sessionStorage.getItem(jr)==="coach"){await B();return}if(!e){t("/app/client",{replace:!0});return}t(e==="client"?"/app/client":"/app/coach",{replace:!0})}F()},[n,e,f,y]),V.useEffect(()=>{y&&(n||(E(!1),t("/auth",{replace:!0})))},[y,n,t]);async function K(){O.current+=1,E(!0),m(!1),d("Uscita in corso..."),sessionStorage.removeItem(jr),R(null);try{await Si()}catch(F){d(Kt(F)),E(!1)}}async function X(){a(!0),d("Sto attivando il tuo periodo di prova...");try{const F=await US();if(F.isExpired){await Si(),sessionStorage.removeItem(jr),R({mode:"expired",access:F});return}if(!await b()){d("Accesso coach in sincronizzazione. Riprova tra qualche secondo.");return}R(null),sessionStorage.removeItem(jr),t("/app/coach",{replace:!0})}catch(F){const A=Kt(F);d(A),r(A)}finally{a(!1)}}async function Z(){a(!0),d(""),R(null);try{if(sessionStorage.setItem(jr,"client"),(await Kw()).redirected){d("Ti sto reindirizzando a Google...");return}t("/app/client",{replace:!0})}catch(F){const A=Kt(F);d(A),r(A)}finally{a(!1)}}async function $(){a(!0),d(""),R(null);try{sessionStorage.setItem(jr,"coach");const F=await Kw();if(F.redirected){d("Ti sto reindirizzando a Google...");return}if(!F.user){d("Accesso non completato. Riprova.");return}await B()}catch(F){const A=Kt(F);d(A),r(A)}finally{a(!1)}}return(_==null?void 0:_.mode)==="trial"?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h1",{children:"Prova gratuita 15 giorni"}),T.jsx("p",{className:"hero-sub",children:"Hai 15 giorni gratuiti da oggi. Alla scadenza l'accesso sar bloccato finch non attiverai l'abbonamento."}),T.jsx("button",{className:"btn",type:"button",disabled:s,onClick:()=>void X(),children:s?"Attivazione...":"Accetta e continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void K(),children:"Esci"}),u?T.jsx("p",{className:"message",children:u}):null]})}):(_==null?void 0:_.mode)==="expired"?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h1",{children:"Periodo di prova terminato"}),T.jsx("p",{className:"hero-sub",children:"Per riattivare l'accesso alla piattaforma, contattaci su WhatsApp e richiedi la sottoscrizione dell'abbonamento."}),T.jsx("a",{className:"btn btn-whatsapp",href:D,target:"_blank",rel:"noreferrer",children:"Richiedi attivazione su WhatsApp"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{R(null),sessionStorage.removeItem(jr)},children:"Torna all'accesso"})]})}):n&&e&&sessionStorage.getItem(jr)!=="coach"?T.jsx(Sr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("img",{className:"auth-logo",src:"/brand/beastly-logo.jpeg",alt:"Beastly Workout logo"}),T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Accedi con Google"}),T.jsx("p",{className:"hero-sub",children:"Entra in pochi secondi e inizia subito il tuo percorso."}),T.jsx("button",{className:"btn",disabled:s||f,onClick:()=>void Z(),type:"button",children:s?"Connessione...":"Continua con Google"}),T.jsx("div",{className:"divider"}),T.jsx("h2",{children:"Sei un Coach?"}),T.jsx("p",{className:"hint",children:"Accedi o registrati come coach con Google."}),T.jsx("button",{className:"btn btn-ghost",disabled:s||f,onClick:()=>void $(),type:"button",children:f?"Verifica accesso coach...":"Continua come Coach"}),u?T.jsx("p",{className:"message",children:u}):null,T.jsx(XC,{})]})})}function XS({role:n,title:e,subtitle:t,headerAction:r,sections:s=[],activeSection:a,onSectionChange:u,children:d}){const f=s.length>0&&!!u,[m,y]=V.useState(!1),E=V.useMemo(()=>f?s.length<=4?s:s.slice(0,3):[],[f,s]),_=V.useMemo(()=>!f||s.length<=4?[]:s.slice(3),[f,s]),R=m?"__more__":a,O=m||!m&&_.some(b=>b.id===a);function D(b,B){const K=(B==="mobile"?R:a)===b.id,X=B==="mobile"?b.mobileLabel??b.label:b.label;return T.jsxs("button",{className:`shell-tab shell-tab-${B} ${K?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(b.id),B==="mobile"&&y(!1)},"aria-current":K?"page":void 0,children:[b.icon?T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:b.icon}):null,T.jsx("span",{className:"shell-tab-label",children:X})]},`${B}-${b.id}`)}return T.jsxs("main",{className:`page shell-page ${n==="client"?"shell-client":"shell-coach"}`.trim(),children:[f?T.jsxs("aside",{className:"shell-sidebar desktop-only",children:[T.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),T.jsx("h2",{children:e}),T.jsx("p",{className:"hint",children:t}),T.jsx("nav",{className:"shell-sidebar-nav",children:s.map(b=>D(b,"desktop"))}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Si(),children:"Esci dal profilo"})]}):null,T.jsxs("section",{className:"shell-main",children:[T.jsxs("section",{className:"hero hero-compact",children:[T.jsx("p",{className:"eyebrow",children:n==="client"?"Area Cliente":"Area Coach"}),T.jsx("h1",{children:e}),T.jsx("p",{className:"hero-sub",children:t}),r,f?null:T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Si(),children:"Esci dal profilo"})]}),T.jsx("section",{className:"stack app-stack",children:d})]}),T.jsxs("nav",{className:"mobile-nav shell-mobile-nav",children:[f?E.map(b=>D(b,"mobile")):T.jsxs("button",{className:"shell-tab shell-tab-mobile shell-tab-active",type:"button",children:[T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),T.jsx("span",{className:"shell-tab-label",children:"Home"})]}),_.length>0?T.jsxs("button",{className:`shell-tab shell-tab-mobile ${O||m?"shell-tab-active":""}`.trim(),type:"button",onClick:()=>y(b=>!b),children:[T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),T.jsx("span",{className:"shell-tab-label",children:"Altro"})]}):null,T.jsxs("button",{className:"shell-tab shell-tab-mobile",type:"button",onClick:()=>void Si(),children:[T.jsx("span",{className:"shell-tab-icon","aria-hidden":"true",children:""}),T.jsx("span",{className:"shell-tab-label",children:"Esci"})]})]}),m&&_.length>0?T.jsx("section",{className:"modal-overlay mobile-more-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card mobile-more-card",children:[T.jsx("h3",{children:"Altre sezioni"}),T.jsx("div",{className:"mobile-more-list",children:_.map(b=>T.jsxs("button",{className:`step-tab ${a===b.id?"step-tab-active":""}`.trim(),type:"button",onClick:()=>{u==null||u(b.id),y(!1)},children:[b.icon?`${b.icon} `:"",b.label]},`more-${b.id}`))}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>y(!1),children:"Chiudi"})]})}):null]})}function fp(n){try{const e=new URL(n);if(e.hostname.includes("youtu.be")){const t=e.pathname.replace("/","").trim();return t?`https://www.youtube.com/embed/${t}`:null}if(e.hostname.includes("youtube.com")){const t=e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:null}return null}catch{return null}}function Qw(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function Xw(n){return/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function p2(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:typeof t.name=="string"?t.name:"",sets:typeof t.sets=="number"?t.sets:Number(t.sets??0)||0,reps:typeof t.reps=="number"?t.reps:Number(t.reps??0)||0,weight:typeof t.weight=="string"?t.weight:"",mediaUrl:typeof t.mediaUrl=="string"?t.mediaUrl:""}}).filter(e=>!!e):[]}function m2(){const{role:n,user:e}=Ua(),t=iu(),{showError:r}=Uh(),[s,a]=V.useState([]),[u,d]=V.useState(!1),[f,m]=V.useState(!0),[y,E]=V.useState(null),[_,R]=V.useState(null),[O,D]=V.useState("plan"),b="Ciao coach, avrei bisogno di un feedback sulla mia scheda.";V.useEffect(()=>{async function $(){if(e)try{const A=(await im(e.uid)).data();if(!(A!=null&&A.onboardingCompleted)){t("/onboarding",{replace:!0});return}}catch{t("/onboarding",{replace:!0});return}finally{m(!1)}}$()},[e,t]);async function B(){d(!0);try{const $=(e==null?void 0:e.uid)??"",F=$?await im($):null,A=(F==null?void 0:F.data())??{},C=$?await WS($,"onboarding"):null;R((C==null?void 0:C.data())??null);const P=Array.from(new Set([$,(A.uid??"").trim(),(A.clientId??"").trim()].filter(k=>k.length>0))),N=await Promise.allSettled(P.flatMap(k=>[qS("client",k),e2(k)])),j=new Map;for(const k of N){if(k.status!=="fulfilled")continue;const ze=k.value;if("docs"in ze)for(const Ve of h2(ze.docs))j.set(Ve.id,Ve);else if(ze.exists()){const Ve={id:ze.id,...ze.data()};j.set(Ve.id,Ve)}}const z=Array.from(j.values()).sort((k,ze)=>{const Ve=P.includes(k.id)?0:1,Be=P.includes(ze.id)?0:1;return Ve-Be});a(z)}catch($){r(Kt($))}finally{d(!1)}}V.useEffect(()=>{e&&(n==="client"||n===null)&&B()},[n,e==null?void 0:e.uid]);const K=s[0],X=p2(K==null?void 0:K.exercises),Z=[{label:"Nome e cognome",value:_==null?void 0:_.fullName},{label:"E-mail",value:(_==null?void 0:_.email)??(e==null?void 0:e.email)},{label:"Telefono",value:_==null?void 0:_.phone},{label:"Et",value:_==null?void 0:_.age},{label:"Sesso",value:_==null?void 0:_.sex},{label:"Altezza",value:_!=null&&_.heightCm?`${_.heightCm} cm`:""},{label:"Peso",value:_!=null&&_.weightKg?`${_.weightKg} kg`:""},{label:"Obiettivo",value:_==null?void 0:_.objectivePrimary}].filter($=>($.value??"").toString().trim().length>0);return e?f?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Prepariamo la tua area"}),T.jsx("p",{className:"hero-sub",children:"Sto verificando le informazioni del tuo profilo..."})]})}):T.jsxs(XS,{role:"client",subtitle:"Scheda tecnica e anagrafica in un unico spazio chiaro.",title:"La tua area",sections:[{id:"plan",label:"Scheda",mobileLabel:"Scheda",icon:""},{id:"profile",label:"Profilo",mobileLabel:"Profilo",icon:""}],activeSection:O,onSectionChange:$=>D($),headerAction:T.jsx("div",{className:"mobile-only",children:T.jsx("a",{className:`btn btn-whatsapp ${Er?"":"btn-disabled"}`.trim(),href:Er?sh(b):"#",onClick:$=>{Er||$.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"})}),children:[O==="plan"?T.jsxs(T.Fragment,{children:[T.jsxs("article",{className:"card desktop-only",children:[T.jsx("h2",{children:"Parla con il tuo Personal Trainer"}),T.jsx("p",{className:"hint",children:"Per feedback sulla scheda o qualsiasi dubbio, scrivi direttamente su WhatsApp."}),T.jsx("a",{className:`btn btn-whatsapp ${Er?"":"btn-disabled"}`.trim(),href:Er?sh(b):"#",onClick:$=>{Er||$.preventDefault()},target:"_blank",rel:"noreferrer",children:"Apri chat WhatsApp"}),Er?null:T.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}),T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"La tua scheda tecnica"}),K?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"plan-head",children:[T.jsx("p",{className:"hint",children:"Programma attivo"}),T.jsx("h3",{children:K.title})]}),T.jsx("div",{className:"exercise-grid",children:X.map(($,F)=>T.jsxs("article",{className:"exercise-card",children:[T.jsx("p",{className:"exercise-name",children:$.name||`Esercizio ${F+1}`}),T.jsxs("div",{className:"exercise-meta",children:[T.jsxs("span",{children:[$.sets??"-"," serie"]}),T.jsxs("span",{children:[$.reps||"-"," reps"]}),T.jsx("span",{children:$.weight||"Peso libero"})]}),$.mediaUrl?T.jsx("button",{className:"btn-link",type:"button",onClick:()=>E({url:$.mediaUrl,label:$.name||`Esercizio ${F+1}`}),children:fp($.mediaUrl)||Xw($.mediaUrl)?"Apri video":Qw($.mediaUrl)?"Apri immagine":"Apri link"}):T.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`plan-ex-${F}`))})]}):T.jsx("p",{className:"hint",children:"La tua scheda non  ancora disponibile. Il coach la pubblicher a breve."})]})]}):null,O==="profile"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Profilo e anagrafica"}),Z.length>0?T.jsx("div",{className:"client-info-block",children:Z.map($=>T.jsxs("p",{className:"hint",children:[T.jsxs("strong",{children:[$.label,":"]})," ",$.value]},$.label))}):T.jsx("p",{className:"hint",children:"Anagrafica non ancora disponibile."}),T.jsx("a",{className:`btn btn-whatsapp ${Er?"":"btn-disabled"}`.trim(),href:Er?sh(b):"#",onClick:$=>{Er||$.preventDefault()},target:"_blank",rel:"noreferrer",children:"Scrivi al tuo PT su WhatsApp"}),Er?null:T.jsx("p",{className:"message",children:"Numero WhatsApp PT non ancora configurato."})]}):null,u?T.jsx("p",{className:"message",children:"Caricamento..."}):null,y?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:y.label}),fp(y.url)?T.jsx("iframe",{title:y.label,src:fp(y.url)??void 0,className:"media-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):Qw(y.url)?T.jsx("img",{src:y.url,alt:y.label,className:"media-frame media-image"}):Xw(y.url)?T.jsx("video",{src:y.url,controls:!0,className:"media-frame"}):T.jsxs("p",{className:"hint",children:["Anteprima non disponibile."," ",T.jsx("a",{href:y.url,target:"_blank",rel:"noreferrer",children:"Apri il link"})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>E(null),children:"Chiudi"})]})}):null]}):T.jsx(Sr,{to:"/auth",replace:!0})}function Eo(n){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(n)}function g2(n,e){if(Eo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Eo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YS(n){var e=g2(n,"string");return Eo(e)=="symbol"?e:e+""}function Dl(n,e,t){return(e=YS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function be(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(t),!0).forEach(function(r){Dl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function v2(n){if(Array.isArray(n))return n}function y2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,a,u,d=[],f=!0,m=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(y){m=!0,s=y}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw s}}return d}}function om(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function JS(n,e){if(n){if(typeof n=="string")return om(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?om(n,e):void 0}}function _2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ii(n,e){return v2(n)||y2(n,e)||JS(n,e)||_2()}function w2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Ni(n,e){if(n==null)return{};var t,r,s=w2(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var E2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function T2(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,a=n.defaultValue,u=a===void 0?null:a,d=n.inputValue,f=n.menuIsOpen,m=n.onChange,y=n.onInputChange,E=n.onMenuClose,_=n.onMenuOpen,R=n.value,O=Ni(n,E2),D=V.useState(d!==void 0?d:t),b=Ii(D,2),B=b[0],K=b[1],X=V.useState(f!==void 0?f:s),Z=Ii(X,2),$=Z[0],F=Z[1],A=V.useState(R!==void 0?R:u),C=Ii(A,2),P=C[0],N=C[1],j=V.useCallback(function(se,me){typeof m=="function"&&m(se,me),N(se)},[m]),z=V.useCallback(function(se,me){var oe;typeof y=="function"&&(oe=y(se,me)),K(oe!==void 0?oe:se)},[y]),k=V.useCallback(function(){typeof _=="function"&&_(),F(!0)},[_]),ze=V.useCallback(function(){typeof E=="function"&&E(),F(!1)},[E]),Ve=d!==void 0?d:B,Be=f!==void 0?f:$,$e=R!==void 0?R:P;return be(be({},O),{},{inputValue:Ve,menuIsOpen:Be,onChange:j,onInputChange:z,onMenuClose:ze,onMenuOpen:k,value:$e})}function Ae(){return Ae=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ae.apply(null,arguments)}function S2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,YS(r.key),r)}}function I2(n,e,t){return e&&Jw(n.prototype,e),t&&Jw(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function am(n,e){return am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},am(n,e)}function C2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&am(n,e)}function xh(n){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xh(n)}function ZS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZS=function(){return!!n})()}function b2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function A2(n,e){if(e&&(Eo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b2(n)}function R2(n){var e=ZS();return function(){var t,r=xh(n);if(e){var s=xh(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return A2(this,t)}}function P2(n){if(Array.isArray(n))return om(n)}function k2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function x2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bg(n){return P2(n)||k2(n)||JS(n)||x2()}function N2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function O2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var D2=(function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(O2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=N2(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n})(),sn="-ms-",Nh="-moz-",et="-webkit-",eI="comm",Ag="rule",Rg="decl",V2="@import",tI="@keyframes",M2="@layer",L2=Math.abs,gd=String.fromCharCode,F2=Object.assign;function j2(n,e){return Xt(n,0)^45?(((e<<2^Xt(n,0))<<2^Xt(n,1))<<2^Xt(n,2))<<2^Xt(n,3):0}function nI(n){return n.trim()}function U2(n,e){return(n=e.exec(n))?n[0]:n}function tt(n,e,t){return n.replace(e,t)}function lm(n,e){return n.indexOf(e)}function Xt(n,e){return n.charCodeAt(e)|0}function Zl(n,e,t){return n.slice(e,t)}function zr(n){return n.length}function Pg(n){return n.length}function $c(n,e){return e.push(n),n}function z2(n,e){return n.map(e).join("")}var vd=1,ka=1,rI=0,xn=0,xt=0,za="";function yd(n,e,t,r,s,a,u){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:vd,column:ka,length:u,return:""}}function Al(n,e){return F2(yd("",null,null,"",null,null,0),n,{length:-n.length},e)}function B2(){return xt}function $2(){return xt=xn>0?Xt(za,--xn):0,ka--,xt===10&&(ka=1,vd--),xt}function Bn(){return xt=xn<rI?Xt(za,xn++):0,ka++,xt===10&&(ka=1,vd++),xt}function Qr(){return Xt(za,xn)}function oh(){return xn}function _u(n,e){return Zl(za,n,e)}function eu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function iI(n){return vd=ka=1,rI=zr(za=n),xn=0,[]}function sI(n){return za="",n}function ah(n){return nI(_u(xn-1,um(n===91?n+2:n===40?n+1:n)))}function H2(n){for(;(xt=Qr())&&xt<33;)Bn();return eu(n)>2||eu(xt)>3?"":" "}function W2(n,e){for(;--e&&Bn()&&!(xt<48||xt>102||xt>57&&xt<65||xt>70&&xt<97););return _u(n,oh()+(e<6&&Qr()==32&&Bn()==32))}function um(n){for(;Bn();)switch(xt){case n:return xn;case 34:case 39:n!==34&&n!==39&&um(xt);break;case 40:n===41&&um(n);break;case 92:Bn();break}return xn}function q2(n,e){for(;Bn()&&n+xt!==57;)if(n+xt===84&&Qr()===47)break;return"/*"+_u(e,xn-1)+"*"+gd(n===47?n:Bn())}function G2(n){for(;!eu(Qr());)Bn();return _u(n,xn)}function K2(n){return sI(lh("",null,null,null,[""],n=iI(n),0,[0],n))}function lh(n,e,t,r,s,a,u,d,f){for(var m=0,y=0,E=u,_=0,R=0,O=0,D=1,b=1,B=1,K=0,X="",Z=s,$=a,F=r,A=X;b;)switch(O=K,K=Bn()){case 40:if(O!=108&&Xt(A,E-1)==58){lm(A+=tt(ah(K),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:A+=ah(K);break;case 9:case 10:case 13:case 32:A+=H2(O);break;case 92:A+=W2(oh()-1,7);continue;case 47:switch(Qr()){case 42:case 47:$c(Q2(q2(Bn(),oh()),e,t),f);break;default:A+="/"}break;case 123*D:d[m++]=zr(A)*B;case 125*D:case 59:case 0:switch(K){case 0:case 125:b=0;case 59+y:B==-1&&(A=tt(A,/\f/g,"")),R>0&&zr(A)-E&&$c(R>32?e0(A+";",r,t,E-1):e0(tt(A," ","")+";",r,t,E-2),f);break;case 59:A+=";";default:if($c(F=Zw(A,e,t,m,y,s,d,X,Z=[],$=[],E),a),K===123)if(y===0)lh(A,e,F,F,Z,a,E,d,$);else switch(_===99&&Xt(A,3)===110?100:_){case 100:case 108:case 109:case 115:lh(n,F,F,r&&$c(Zw(n,F,F,0,0,s,d,X,s,Z=[],E),$),s,$,E,d,r?Z:$);break;default:lh(A,F,F,F,[""],$,0,d,$)}}m=y=R=0,D=B=1,X=A="",E=u;break;case 58:E=1+zr(A),R=O;default:if(D<1){if(K==123)--D;else if(K==125&&D++==0&&$2()==125)continue}switch(A+=gd(K),K*D){case 38:B=y>0?1:(A+="\f",-1);break;case 44:d[m++]=(zr(A)-1)*B,B=1;break;case 64:Qr()===45&&(A+=ah(Bn())),_=Qr(),y=E=zr(X=A+=G2(oh())),K++;break;case 45:O===45&&zr(A)==2&&(D=0)}}return a}function Zw(n,e,t,r,s,a,u,d,f,m,y){for(var E=s-1,_=s===0?a:[""],R=Pg(_),O=0,D=0,b=0;O<r;++O)for(var B=0,K=Zl(n,E+1,E=L2(D=u[O])),X=n;B<R;++B)(X=nI(D>0?_[B]+" "+K:tt(K,/&\f/g,_[B])))&&(f[b++]=X);return yd(n,e,t,s===0?Ag:d,f,m,y)}function Q2(n,e,t){return yd(n,e,t,eI,gd(B2()),Zl(n,2,-2),0)}function e0(n,e,t,r){return yd(n,e,t,Rg,Zl(n,0,r),Zl(n,r+1,-1),r)}function Ta(n,e){for(var t="",r=Pg(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function X2(n,e,t,r){switch(n.type){case M2:if(n.children.length)break;case V2:case Rg:return n.return=n.return||n.value;case eI:return"";case tI:return n.return=n.value+"{"+Ta(n.children,r)+"}";case Ag:n.value=n.props.join(",")}return zr(t=Ta(n.children,r))?n.return=n.value+"{"+t+"}":""}function Y2(n){var e=Pg(n);return function(t,r,s,a){for(var u="",d=0;d<e;d++)u+=n[d](t,r,s,a)||"";return u}}function J2(n){return function(e){e.root||(e=e.return)&&n(e)}}function Z2(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var eV=function(e,t,r){for(var s=0,a=0;s=a,a=Qr(),s===38&&a===12&&(t[r]=1),!eu(a);)Bn();return _u(e,xn)},tV=function(e,t){var r=-1,s=44;do switch(eu(s)){case 0:s===38&&Qr()===12&&(t[r]=1),e[r]+=eV(xn-1,t,r);break;case 2:e[r]+=ah(s);break;case 4:if(s===44){e[++r]=Qr()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=gd(s)}while(s=Bn());return e},nV=function(e,t){return sI(tV(iI(e),t))},t0=new WeakMap,rV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!t0.get(r))&&!s){t0.set(e,!0);for(var a=[],u=nV(t,a),d=r.props,f=0,m=0;f<u.length;f++)for(var y=0;y<d.length;y++,m++)e.props[m]=a[f]?u[f].replace(/&\f/g,d[y]):d[y]+" "+u[f]}}},iV=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function oI(n,e){switch(j2(n,e)){case 5103:return et+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return et+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return et+n+Nh+n+sn+n+n;case 6828:case 4268:return et+n+sn+n+n;case 6165:return et+n+sn+"flex-"+n+n;case 5187:return et+n+tt(n,/(\w+).+(:[^]+)/,et+"box-$1$2"+sn+"flex-$1$2")+n;case 5443:return et+n+sn+"flex-item-"+tt(n,/flex-|-self/,"")+n;case 4675:return et+n+sn+"flex-line-pack"+tt(n,/align-content|flex-|-self/,"")+n;case 5548:return et+n+sn+tt(n,"shrink","negative")+n;case 5292:return et+n+sn+tt(n,"basis","preferred-size")+n;case 6060:return et+"box-"+tt(n,"-grow","")+et+n+sn+tt(n,"grow","positive")+n;case 4554:return et+tt(n,/([^-])(transform)/g,"$1"+et+"$2")+n;case 6187:return tt(tt(tt(n,/(zoom-|grab)/,et+"$1"),/(image-set)/,et+"$1"),n,"")+n;case 5495:case 3959:return tt(n,/(image-set\([^]*)/,et+"$1$`$1");case 4968:return tt(tt(n,/(.+:)(flex-)?(.*)/,et+"box-pack:$3"+sn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+et+n+n;case 4095:case 3583:case 4068:case 2532:return tt(n,/(.+)-inline(.+)/,et+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zr(n)-1-e>6)switch(Xt(n,e+1)){case 109:if(Xt(n,e+4)!==45)break;case 102:return tt(n,/(.+:)(.+)-([^]+)/,"$1"+et+"$2-$3$1"+Nh+(Xt(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~lm(n,"stretch")?oI(tt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Xt(n,e+1)!==115)break;case 6444:switch(Xt(n,zr(n)-3-(~lm(n,"!important")&&10))){case 107:return tt(n,":",":"+et)+n;case 101:return tt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+et+(Xt(n,14)===45?"inline-":"")+"box$3$1"+et+"$2$3$1"+sn+"$2box$3")+n}break;case 5936:switch(Xt(n,e+11)){case 114:return et+n+sn+tt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return et+n+sn+tt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return et+n+sn+tt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return et+n+sn+n+n}return n}var sV=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Rg:e.return=oI(e.value,e.length);break;case tI:return Ta([Al(e,{value:tt(e.value,"@","@"+et)})],s);case Ag:if(e.length)return z2(e.props,function(a){switch(U2(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ta([Al(e,{props:[tt(a,/:(read-\w+)/,":"+Nh+"$1")]})],s);case"::placeholder":return Ta([Al(e,{props:[tt(a,/:(plac\w+)/,":"+et+"input-$1")]}),Al(e,{props:[tt(a,/:(plac\w+)/,":"+Nh+"$1")]}),Al(e,{props:[tt(a,/:(plac\w+)/,sn+"input-$1")]})],s)}return""})}},oV=[sV],aV=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(D){var b=D.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(D),D.setAttribute("data-s",""))})}var s=e.stylisPlugins||oV,a={},u,d=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(D){for(var b=D.getAttribute("data-emotion").split(" "),B=1;B<b.length;B++)a[b[B]]=!0;d.push(D)});var f,m=[rV,iV];{var y,E=[X2,J2(function(D){y.insert(D)})],_=Y2(m.concat(s,E)),R=function(b){return Ta(K2(b),_)};f=function(b,B,K,X){y=K,R(b?b+"{"+B.styles+"}":B.styles),X&&(O.inserted[B.name]=!0)}}var O={key:t,sheet:new D2({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return O.sheet.hydrate(d),O},pp={exports:{}},nt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function lV(){if(n0)return nt;n0=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,y=n?Symbol.for("react.forward_ref"):60112,E=n?Symbol.for("react.suspense"):60113,_=n?Symbol.for("react.suspense_list"):60120,R=n?Symbol.for("react.memo"):60115,O=n?Symbol.for("react.lazy"):60116,D=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,B=n?Symbol.for("react.responder"):60118,K=n?Symbol.for("react.scope"):60119;function X($){if(typeof $=="object"&&$!==null){var F=$.$$typeof;switch(F){case e:switch($=$.type,$){case f:case m:case r:case a:case s:case E:return $;default:switch($=$&&$.$$typeof,$){case d:case y:case O:case R:case u:return $;default:return F}}case t:return F}}}function Z($){return X($)===m}return nt.AsyncMode=f,nt.ConcurrentMode=m,nt.ContextConsumer=d,nt.ContextProvider=u,nt.Element=e,nt.ForwardRef=y,nt.Fragment=r,nt.Lazy=O,nt.Memo=R,nt.Portal=t,nt.Profiler=a,nt.StrictMode=s,nt.Suspense=E,nt.isAsyncMode=function($){return Z($)||X($)===f},nt.isConcurrentMode=Z,nt.isContextConsumer=function($){return X($)===d},nt.isContextProvider=function($){return X($)===u},nt.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===e},nt.isForwardRef=function($){return X($)===y},nt.isFragment=function($){return X($)===r},nt.isLazy=function($){return X($)===O},nt.isMemo=function($){return X($)===R},nt.isPortal=function($){return X($)===t},nt.isProfiler=function($){return X($)===a},nt.isStrictMode=function($){return X($)===s},nt.isSuspense=function($){return X($)===E},nt.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===r||$===m||$===a||$===s||$===E||$===_||typeof $=="object"&&$!==null&&($.$$typeof===O||$.$$typeof===R||$.$$typeof===u||$.$$typeof===d||$.$$typeof===y||$.$$typeof===b||$.$$typeof===B||$.$$typeof===K||$.$$typeof===D)},nt.typeOf=X,nt}var r0;function uV(){return r0||(r0=1,pp.exports=lV()),pp.exports}var mp,i0;function cV(){if(i0)return mp;i0=1;var n=uV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function u(O){return n.isMemo(O)?s:a[O.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,_=Object.prototype;function R(O,D,b){if(typeof D!="string"){if(_){var B=E(D);B&&B!==_&&R(O,B,b)}var K=f(D);m&&(K=K.concat(m(D)));for(var X=u(O),Z=u(D),$=0;$<K.length;++$){var F=K[$];if(!t[F]&&!(b&&b[F])&&!(Z&&Z[F])&&!(X&&X[F])){var A=y(D,F);try{d(O,F,A)}catch{}}}}return O}return mp=R,mp}cV();var hV=!0;function dV(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var aI=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||hV===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},fV=function(e,t,r){aI(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function pV(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var mV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gV=/[A-Z]|^ms/g,vV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lI=function(e){return e.charCodeAt(1)===45},s0=function(e){return e!=null&&typeof e!="boolean"},gp=Z2(function(n){return lI(n)?n:n.replace(gV,"-$&").toLowerCase()}),o0=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(vV,function(r,s,a){return Br={name:s,styles:a,next:Br},s})}return mV[e]!==1&&!lI(e)&&typeof t=="number"&&t!==0?t+"px":t};function tu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Br={name:s.name,styles:s.styles,next:Br},s.name;var a=t;if(a.styles!==void 0){var u=a.next;if(u!==void 0)for(;u!==void 0;)Br={name:u.name,styles:u.styles,next:Br},u=u.next;var d=a.styles+";";return d}return yV(n,e,t)}case"function":{if(n!==void 0){var f=Br,m=t(n);return Br=f,tu(n,e,m)}break}}var y=t;return y}function yV(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=tu(n,e,t[s])+";";else for(var a in t){var u=t[a];if(typeof u!="object"){var d=u;s0(d)&&(r+=gp(a)+":"+o0(a,d)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var f=0;f<u.length;f++)s0(u[f])&&(r+=gp(a)+":"+o0(a,u[f])+";");else{var m=tu(n,e,u);switch(a){case"animation":case"animationName":{r+=gp(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var a0=/label:\s*([^\s;{]+)\s*(;|$)/g,Br;function uI(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Br=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=tu(t,e,a);else{var u=a;s+=u[0]}for(var d=1;d<n.length;d++)if(s+=tu(t,e,n[d]),r){var f=a;s+=f[d]}a0.lastIndex=0;for(var m="",y;(y=a0.exec(s))!==null;)m+="-"+y[1];var E=pV(s)+m;return{name:E,styles:s,next:Br}}var _V=function(e){return e()},wV=Cp.useInsertionEffect?Cp.useInsertionEffect:!1,EV=wV||_V,cI=V.createContext(typeof HTMLElement<"u"?aV({key:"css"}):null);cI.Provider;var TV=function(e){return V.forwardRef(function(t,r){var s=V.useContext(cI);return e(t,s,r)})},SV=V.createContext({}),kg={}.hasOwnProperty,cm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",IV=function(e,t){var r={};for(var s in t)kg.call(t,s)&&(r[s]=t[s]);return r[cm]=e,r},CV=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return aI(t,r,s),EV(function(){return fV(t,r,s)}),null},bV=TV(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[cm],a=[r],u="";typeof n.className=="string"?u=dV(e.registered,a,n.className):n.className!=null&&(u=n.className+" ");var d=uI(a,void 0,V.useContext(SV));u+=e.key+"-"+d.name;var f={};for(var m in n)kg.call(n,m)&&m!=="css"&&m!==cm&&(f[m]=n[m]);return f.className=u,t&&(f.ref=t),V.createElement(V.Fragment,null,V.createElement(CV,{cache:e,serialized:d,isStringTag:typeof s=="string"}),V.createElement(s,f))}),AV=bV,we=function(e,t){var r=arguments;if(t==null||!kg.call(t,"css"))return V.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=AV,a[1]=IV(e,t);for(var u=2;u<s;u++)a[u]=r[u];return V.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(we||(we={}));function xg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return uI(e)}function RV(){var n=xg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function PV(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const kV=Math.min,xV=Math.max,Oh=Math.round,Hc=Math.floor,Dh=n=>({x:n,y:n});function NV(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function _d(){return typeof window<"u"}function hI(n){return fI(n)?(n.nodeName||"").toLowerCase():"#document"}function ki(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function dI(n){var e;return(e=(fI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function fI(n){return _d()?n instanceof Node||n instanceof ki(n).Node:!1}function OV(n){return _d()?n instanceof Element||n instanceof ki(n).Element:!1}function Ng(n){return _d()?n instanceof HTMLElement||n instanceof ki(n).HTMLElement:!1}function l0(n){return!_d()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ki(n).ShadowRoot}const DV=new Set(["inline","contents"]);function pI(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Og(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!DV.has(s)}function VV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MV=new Set(["html","body","#document"]);function LV(n){return MV.has(hI(n))}function Og(n){return ki(n).getComputedStyle(n)}function FV(n){if(hI(n)==="html")return n;const e=n.assignedSlot||n.parentNode||l0(n)&&n.host||dI(n);return l0(e)?e.host:e}function mI(n){const e=FV(n);return LV(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ng(e)&&pI(e)?e:mI(e)}function Vh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=mI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),u=ki(s);if(a){const d=hm(u);return e.concat(u,u.visualViewport||[],pI(s)?s:[],d&&t?Vh(d):[])}return e.concat(s,Vh(s,[],t))}function hm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function jV(n){const e=Og(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ng(n),a=s?n.offsetWidth:t,u=s?n.offsetHeight:r,d=Oh(t)!==a||Oh(r)!==u;return d&&(t=a,r=u),{width:t,height:r,$:d}}function Dg(n){return OV(n)?n:n.contextElement}function u0(n){const e=Dg(n);if(!Ng(e))return Dh(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=jV(e);let u=(a?Oh(t.width):t.width)/r,d=(a?Oh(t.height):t.height)/s;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const UV=Dh(0);function zV(n){const e=ki(n);return!VV()||!e.visualViewport?UV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BV(n,e,t){return!1}function c0(n,e,t,r){e===void 0&&(e=!1);const s=n.getBoundingClientRect(),a=Dg(n);let u=Dh(1);e&&(u=u0(n));const d=BV()?zV(a):Dh(0);let f=(s.left+d.x)/u.x,m=(s.top+d.y)/u.y,y=s.width/u.x,E=s.height/u.y;if(a){const _=ki(a),R=r;let O=_,D=hm(O);for(;D&&r&&R!==O;){const b=u0(D),B=D.getBoundingClientRect(),K=Og(D),X=B.left+(D.clientLeft+parseFloat(K.paddingLeft))*b.x,Z=B.top+(D.clientTop+parseFloat(K.paddingTop))*b.y;f*=b.x,m*=b.y,y*=b.x,E*=b.y,f+=X,m+=Z,O=ki(D),D=hm(O)}}return NV({width:y,height:E,x:f,y:m})}function gI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function $V(n,e){let t=null,r;const s=dI(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:y,top:E,width:_,height:R}=m;if(d||e(),!_||!R)return;const O=Hc(E),D=Hc(s.clientWidth-(y+_)),b=Hc(s.clientHeight-(E+R)),B=Hc(y),X={rootMargin:-O+"px "+-D+"px "+-b+"px "+-B+"px",threshold:xV(0,kV(1,f))||1};let Z=!0;function $(F){const A=F[0].intersectionRatio;if(A!==f){if(!Z)return u();A?u(!1,A):r=setTimeout(()=>{u(!1,1e-7)},1e3)}A===1&&!gI(m,n.getBoundingClientRect())&&u(),Z=!1}try{t=new IntersectionObserver($,{...X,root:s.ownerDocument})}catch{t=new IntersectionObserver($,X)}t.observe(n)}return u(!0),a}function HV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Dg(n),y=s||a?[...m?Vh(m):[],...Vh(e)]:[];y.forEach(B=>{s&&B.addEventListener("scroll",t,{passive:!0}),a&&B.addEventListener("resize",t)});const E=m&&d?$V(m,t):null;let _=-1,R=null;u&&(R=new ResizeObserver(B=>{let[K]=B;K&&K.target===m&&R&&(R.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var X;(X=R)==null||X.observe(e)})),t()}),m&&!f&&R.observe(m),R.observe(e));let O,D=f?c0(n):null;f&&b();function b(){const B=c0(n);D&&!gI(D,B)&&t(),D=B,O=requestAnimationFrame(b)}return t(),()=>{var B;y.forEach(K=>{s&&K.removeEventListener("scroll",t),a&&K.removeEventListener("resize",t)}),E==null||E(),(B=R)==null||B.disconnect(),R=null,f&&cancelAnimationFrame(O)}}var dm=V.useLayoutEffect,WV=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Mh=function(){};function qV(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function GV(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&a.push("".concat(qV(n,u)));return a.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var h0=function(e){return nM(e)?e.filter(Boolean):Eo(e)==="object"&&e!==null?[e]:[]},vI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Ni(e,WV);return be({},t)},Et=function(e,t,r){var s=e.cx,a=e.getStyles,u=e.getClassNames,d=e.className;return{css:a(t,e),className:s(r??{},u(t,e),d)}};function wd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function KV(n){return wd(n)?window.innerHeight:n.clientHeight}function yI(n){return wd(n)?window.pageYOffset:n.scrollTop}function Lh(n,e){if(wd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function QV(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function XV(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function Wc(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Mh,s=yI(n),a=e-s,u=10,d=0;function f(){d+=u;var m=XV(d,s,a,t);Lh(n,m),d<t?window.requestAnimationFrame(f):r(n)}f()}function d0(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Lh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Lh(n,Math.max(e.offsetTop-s,0))}function YV(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function f0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function JV(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var _I=!1,ZV={get passive(){return _I=!0}},qc=typeof window<"u"?window:{};qc.addEventListener&&qc.removeEventListener&&(qc.addEventListener("p",Mh,ZV),qc.removeEventListener("p",Mh,!1));var eM=_I;function tM(n){return n!=null}function nM(n){return Array.isArray(n)}function Gc(n,e,t){return n?e:t}var rM=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var a=Object.entries(e).filter(function(u){var d=Ii(u,1),f=d[0];return!r.includes(f)});return a.reduce(function(u,d){var f=Ii(d,2),m=f[0],y=f[1];return u[m]=y,u},{})},iM=["children","innerProps"],sM=["children","innerProps"];function oM(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,a=n.shouldScroll,u=n.isFixedPosition,d=n.controlHeight,f=QV(t),m={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return m;var y=f.getBoundingClientRect(),E=y.height,_=t.getBoundingClientRect(),R=_.bottom,O=_.height,D=_.top,b=t.offsetParent.getBoundingClientRect(),B=b.top,K=u?window.innerHeight:KV(f),X=yI(f),Z=parseInt(getComputedStyle(t).marginBottom,10),$=parseInt(getComputedStyle(t).marginTop,10),F=B-$,A=K-D,C=F+X,P=E-X-D,N=R-K+X+Z,j=X+D-$,z=160;switch(s){case"auto":case"bottom":if(A>=O)return{placement:"bottom",maxHeight:e};if(P>=O&&!u)return a&&Wc(f,N,z),{placement:"bottom",maxHeight:e};if(!u&&P>=r||u&&A>=r){a&&Wc(f,N,z);var k=u?A-Z:P-Z;return{placement:"bottom",maxHeight:k}}if(s==="auto"||u){var ze=e,Ve=u?F:C;return Ve>=r&&(ze=Math.min(Ve-Z-d,e)),{placement:"top",maxHeight:ze}}if(s==="bottom")return a&&Lh(f,N),{placement:"bottom",maxHeight:e};break;case"top":if(F>=O)return{placement:"top",maxHeight:e};if(C>=O&&!u)return a&&Wc(f,j,z),{placement:"top",maxHeight:e};if(!u&&C>=r||u&&F>=r){var Be=e;return(!u&&C>=r||u&&F>=r)&&(Be=u?F-$:C-$),a&&Wc(f,j,z),{placement:"top",maxHeight:Be}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return m}function aM(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var wI=function(e){return e==="auto"?"bottom":e},lM=function(e,t){var r,s=e.placement,a=e.theme,u=a.borderRadius,d=a.spacing,f=a.colors;return be((r={label:"menu"},Dl(r,aM(s),"100%"),Dl(r,"position","absolute"),Dl(r,"width","100%"),Dl(r,"zIndex",1),r),t?{}:{backgroundColor:f.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},EI=V.createContext(null),uM=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,u=e.menuPosition,d=e.menuShouldScrollIntoView,f=e.theme,m=V.useContext(EI)||{},y=m.setPortalPlacement,E=V.useRef(null),_=V.useState(s),R=Ii(_,2),O=R[0],D=R[1],b=V.useState(null),B=Ii(b,2),K=B[0],X=B[1],Z=f.spacing.controlHeight;return dm(function(){var $=E.current;if($){var F=u==="fixed",A=d&&!F,C=oM({maxHeight:s,menuEl:$,minHeight:r,placement:a,shouldScroll:A,isFixedPosition:F,controlHeight:Z});D(C.maxHeight),X(C.placement),y==null||y(C.placement)}},[s,a,u,d,r,y,Z]),t({ref:E,placerProps:be(be({},e),{},{placement:K||wI(a),maxHeight:O})})},cM=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return we("div",Ae({},Et(e,"menu",{menu:!0}),{ref:r},s),t)},hM=cM,dM=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return be({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},fM=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,a=e.isMulti;return we("div",Ae({},Et(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:s},r),t)},TI=function(e,t){var r=e.theme,s=r.spacing.baseUnit,a=r.colors;return be({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},pM=TI,mM=TI,gM=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,a=Ni(e,iM);return we("div",Ae({},Et(be(be({},a),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},vM=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,a=Ni(e,sM);return we("div",Ae({},Et(be(be({},a),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},yM=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},_M=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,u=e.menuPlacement,d=e.menuPosition,f=V.useRef(null),m=V.useRef(null),y=V.useState(wI(u)),E=Ii(y,2),_=E[0],R=E[1],O=V.useMemo(function(){return{setPortalPlacement:R}},[]),D=V.useState(null),b=Ii(D,2),B=b[0],K=b[1],X=V.useCallback(function(){if(s){var A=YV(s),C=d==="fixed"?0:window.pageYOffset,P=A[_]+C;(P!==(B==null?void 0:B.offset)||A.left!==(B==null?void 0:B.rect.left)||A.width!==(B==null?void 0:B.rect.width))&&K({offset:P,rect:A})}},[s,d,_,B==null?void 0:B.offset,B==null?void 0:B.rect.left,B==null?void 0:B.rect.width]);dm(function(){X()},[X]);var Z=V.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),s&&f.current&&(m.current=HV(s,f.current,X,{elementResize:"ResizeObserver"in window}))},[s,X]);dm(function(){Z()},[Z]);var $=V.useCallback(function(A){f.current=A,Z()},[Z]);if(!t&&d!=="fixed"||!B)return null;var F=we("div",Ae({ref:$},Et(be(be({},e),{},{offset:B.offset,position:d,rect:B.rect}),"menuPortal",{"menu-portal":!0}),a),r);return we(EI.Provider,{value:O},t?eC.createPortal(F,t):F)},wM=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},EM=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,a=e.isRtl;return we("div",Ae({},Et(e,"container",{"--is-disabled":s,"--is-rtl":a}),r),t)},TM=function(e,t){var r=e.theme.spacing,s=e.isMulti,a=e.hasValue,u=e.selectProps.controlShouldRenderValue;return be({alignItems:"center",display:s&&a&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},SM=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,a=e.hasValue;return we("div",Ae({},Et(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":a}),r),t)},IM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},CM=function(e){var t=e.children,r=e.innerProps;return we("div",Ae({},Et(e,"indicatorsContainer",{indicators:!0}),r),t)},p0,bM=["size"],AM=["innerProps","isRtl","size"],RM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},SI=function(e){var t=e.size,r=Ni(e,bM);return we("svg",Ae({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:RM},r))},Vg=function(e){return we(SI,Ae({size:20},e),we("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},II=function(e){return we(SI,Ae({size:20},e),we("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},CI=function(e,t){var r=e.isFocused,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return be({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:a*2,":hover":{color:r?u.neutral80:u.neutral40}})},PM=CI,kM=function(e){var t=e.children,r=e.innerProps;return we("div",Ae({},Et(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||we(II,null))},xM=CI,NM=function(e){var t=e.children,r=e.innerProps;return we("div",Ae({},Et(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||we(Vg,null))},OM=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing.baseUnit,u=s.colors;return be({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:a*2,marginTop:a*2})},DM=function(e){var t=e.innerProps;return we("span",Ae({},t,Et(e,"indicatorSeparator",{"indicator-separator":!0})))},VM=RV(p0||(p0=PV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),MM=function(e,t){var r=e.isFocused,s=e.size,a=e.theme,u=a.colors,d=a.spacing.baseUnit;return be({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:d*2})},vp=function(e){var t=e.delay,r=e.offset;return we("span",{css:xg({animation:"".concat(VM," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LM=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,a=s===void 0?4:s,u=Ni(e,AM);return we("div",Ae({},Et(be(be({},u),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),we(vp,{delay:0,offset:r}),we(vp,{delay:160,offset:!0}),we(vp,{delay:320,offset:!r}))},FM=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.theme,u=a.colors,d=a.borderRadius,f=a.spacing;return be({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:s?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:s?u.primary:u.neutral30}})},jM=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return we("div",Ae({ref:a},Et(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":d}),u,{"aria-disabled":r||void 0}),t)},UM=jM,zM=["data"],BM=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},$M=function(e){var t=e.children,r=e.cx,s=e.getStyles,a=e.getClassNames,u=e.Heading,d=e.headingProps,f=e.innerProps,m=e.label,y=e.theme,E=e.selectProps;return we("div",Ae({},Et(e,"group",{group:!0}),f),we(u,Ae({},d,{selectProps:E,theme:y,getStyles:s,getClassNames:a,cx:r}),m),we("div",null,t))},HM=function(e,t){var r=e.theme,s=r.colors,a=r.spacing;return be({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},WM=function(e){var t=vI(e);t.data;var r=Ni(t,zM);return we("div",Ae({},Et(e,"groupHeading",{"group-heading":!0}),r))},qM=$M,GM=["innerRef","isDisabled","isHidden","inputClassName"],KM=function(e,t){var r=e.isDisabled,s=e.value,a=e.theme,u=a.spacing,d=a.colors;return be(be({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},QM),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:d.neutral80})},bI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},QM={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":be({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},bI)},XM=function(e){return be({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},bI)},YM=function(e){var t=e.cx,r=e.value,s=vI(e),a=s.innerRef,u=s.isDisabled,d=s.isHidden,f=s.inputClassName,m=Ni(s,GM);return we("div",Ae({},Et(e,"input",{"input-container":!0}),{"data-value":r||""}),we("input",Ae({className:t({input:!0},f),ref:a,style:XM(d),disabled:u},m)))},JM=YM,ZM=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors;return be({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:a/2,margin:s.baseUnit/2})},eL=function(e,t){var r=e.theme,s=r.borderRadius,a=r.colors,u=e.cropWithEllipsis;return be({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},tL=function(e,t){var r=e.theme,s=r.spacing,a=r.borderRadius,u=r.colors,d=e.isFocused;return be({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:d?u.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},AI=function(e){var t=e.children,r=e.innerProps;return we("div",r,t)},nL=AI,rL=AI;function iL(n){var e=n.children,t=n.innerProps;return we("div",Ae({role:"button"},t),e||we(Vg,{size:14}))}var sL=function(e){var t=e.children,r=e.components,s=e.data,a=e.innerProps,u=e.isDisabled,d=e.removeProps,f=e.selectProps,m=r.Container,y=r.Label,E=r.Remove;return we(m,{data:s,innerProps:be(be({},Et(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),a),selectProps:f},we(y,{data:s,innerProps:be({},Et(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},t),we(E,{data:s,innerProps:be(be({},Et(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},d),selectProps:f}))},oL=sL,aL=function(e,t){var r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.theme,d=u.spacing,f=u.colors;return be({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?f.primary:s?f.primary25:"transparent",color:r?f.neutral20:a?f.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?f.primary:f.primary50}})},lL=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,a=e.isSelected,u=e.innerRef,d=e.innerProps;return we("div",Ae({},Et(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":a}),{ref:u,"aria-disabled":r},d),t)},uL=lL,cL=function(e,t){var r=e.theme,s=r.spacing,a=r.colors;return be({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},hL=function(e){var t=e.children,r=e.innerProps;return we("div",Ae({},Et(e,"placeholder",{placeholder:!0}),r),t)},dL=hL,fL=function(e,t){var r=e.isDisabled,s=e.theme,a=s.spacing,u=s.colors;return be({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},pL=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return we("div",Ae({},Et(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},mL=pL,gL={ClearIndicator:NM,Control:UM,DropdownIndicator:kM,DownChevron:II,CrossIcon:Vg,Group:qM,GroupHeading:WM,IndicatorsContainer:CM,IndicatorSeparator:DM,Input:JM,LoadingIndicator:LM,Menu:hM,MenuList:fM,MenuPortal:_M,LoadingMessage:vM,NoOptionsMessage:gM,MultiValue:oL,MultiValueContainer:nL,MultiValueLabel:rL,MultiValueRemove:iL,Option:uL,Placeholder:dL,SelectContainer:EM,SingleValue:mL,ValueContainer:SM},vL=function(e){return be(be({},gL),e.components)},m0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function yL(n,e){return!!(n===e||m0(n)&&m0(e))}function _L(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!yL(n[t],e[t]))return!1;return!0}function wL(n,e){e===void 0&&(e=_L);var t=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var u=n.apply(this,s);return t={lastResult:u,lastArgs:s,lastThis:this},u}return r.clear=function(){t=null},r}var EL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},TL=function(e){return we("span",Ae({css:EL},e))},g0=TL,SL={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,a=e.context,u=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,a=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return u?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,a=e.label,u=a===void 0?"":a,d=e.selectValue,f=e.isDisabled,m=e.isSelected,y=e.isAppleDevice,E=function(D,b){return D&&D.length?"".concat(D.indexOf(b)+1," of ").concat(D.length):""};if(t==="value"&&d)return"value ".concat(u," focused, ").concat(E(d,r),".");if(t==="menu"&&y){var _=f?" disabled":"",R="".concat(m?" selected":"").concat(_);return"".concat(u).concat(R,", ").concat(E(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},IL=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,u=e.isFocused,d=e.selectValue,f=e.selectProps,m=e.id,y=e.isAppleDevice,E=f.ariaLiveMessages,_=f.getOptionLabel,R=f.inputValue,O=f.isMulti,D=f.isOptionDisabled,b=f.isSearchable,B=f.menuIsOpen,K=f.options,X=f.screenReaderStatus,Z=f.tabSelectsValue,$=f.isLoading,F=f["aria-label"],A=f["aria-live"],C=V.useMemo(function(){return be(be({},SL),E||{})},[E]),P=V.useMemo(function(){var Ve="";if(t&&C.onChange){var Be=t.option,$e=t.options,se=t.removedValue,me=t.removedValues,oe=t.value,H=function(Le){return Array.isArray(Le)?null:Le},Q=se||Be||H(oe),ce=Q?_(Q):"",Se=$e||me||void 0,Te=Se?Se.map(_):[],Re=be({isDisabled:Q&&D(Q,d),label:ce,labels:Te},t);Ve=C.onChange(Re)}return Ve},[t,C,D,d,_]),N=V.useMemo(function(){var Ve="",Be=r||s,$e=!!(r&&d&&d.includes(r));if(Be&&C.onFocus){var se={focused:Be,label:_(Be),isDisabled:D(Be,d),isSelected:$e,options:a,context:Be===r?"menu":"value",selectValue:d,isAppleDevice:y};Ve=C.onFocus(se)}return Ve},[r,s,_,D,C,a,d,y]),j=V.useMemo(function(){var Ve="";if(B&&K.length&&!$&&C.onFilter){var Be=X({count:a.length});Ve=C.onFilter({inputValue:R,resultsMessage:Be})}return Ve},[a,R,B,C,K,X,$]),z=(t==null?void 0:t.action)==="initial-input-focus",k=V.useMemo(function(){var Ve="";if(C.guidance){var Be=s?"value":B?"menu":"input";Ve=C.guidance({"aria-label":F,context:Be,isDisabled:r&&D(r,d),isMulti:O,isSearchable:b,tabSelectsValue:Z,isInitialFocus:z})}return Ve},[F,r,s,O,D,b,B,C,d,Z,z]),ze=we(V.Fragment,null,we("span",{id:"aria-selection"},P),we("span",{id:"aria-focused"},N),we("span",{id:"aria-results"},j),we("span",{id:"aria-guidance"},k));return we(V.Fragment,null,we(g0,{id:m},z&&ze),we(g0,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!z&&ze))},CL=IL,fm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],bL=new RegExp("["+fm.map(function(n){return n.letters}).join("")+"]","g"),RI={};for(var yp=0;yp<fm.length;yp++)for(var _p=fm[yp],wp=0;wp<_p.letters.length;wp++)RI[_p.letters[wp]]=_p.base;var PI=function(e){return e.replace(bL,function(t){return RI[t]})},AL=wL(PI),v0=function(e){return e.replace(/^\s+|\s+$/g,"")},RL=function(e){return"".concat(e.label," ").concat(e.value)},PL=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=be({ignoreCase:!0,ignoreAccents:!0,stringify:RL,trim:!0,matchFrom:"any"},e),a=s.ignoreCase,u=s.ignoreAccents,d=s.stringify,f=s.trim,m=s.matchFrom,y=f?v0(r):r,E=f?v0(d(t)):d(t);return a&&(y=y.toLowerCase(),E=E.toLowerCase()),u&&(y=AL(y),E=PI(E)),m==="start"?E.substr(0,y.length)===y:E.indexOf(y)>-1}},kL=["innerRef"];function xL(n){var e=n.innerRef,t=Ni(n,kL),r=rM(t,"onExited","in","enter","exit","appear");return we("input",Ae({ref:e},r,{css:xg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var NL=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function OL(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,a=n.onTopLeave,u=V.useRef(!1),d=V.useRef(!1),f=V.useRef(0),m=V.useRef(null),y=V.useCallback(function(b,B){if(m.current!==null){var K=m.current,X=K.scrollTop,Z=K.scrollHeight,$=K.clientHeight,F=m.current,A=B>0,C=Z-$-X,P=!1;C>B&&u.current&&(r&&r(b),u.current=!1),A&&d.current&&(a&&a(b),d.current=!1),A&&B>C?(t&&!u.current&&t(b),F.scrollTop=Z,P=!0,u.current=!0):!A&&-B>X&&(s&&!d.current&&s(b),F.scrollTop=0,P=!0,d.current=!0),P&&NL(b)}},[t,r,s,a]),E=V.useCallback(function(b){y(b,b.deltaY)},[y]),_=V.useCallback(function(b){f.current=b.changedTouches[0].clientY},[]),R=V.useCallback(function(b){var B=f.current-b.changedTouches[0].clientY;y(b,B)},[y]),O=V.useCallback(function(b){if(b){var B=eM?{passive:!1}:!1;b.addEventListener("wheel",E,B),b.addEventListener("touchstart",_,B),b.addEventListener("touchmove",R,B)}},[R,_,E]),D=V.useCallback(function(b){b&&(b.removeEventListener("wheel",E,!1),b.removeEventListener("touchstart",_,!1),b.removeEventListener("touchmove",R,!1))},[R,_,E]);return V.useEffect(function(){if(e){var b=m.current;return O(b),function(){D(b)}}},[e,O,D]),function(b){m.current=b}}var y0=["boxSizing","height","overflow","paddingRight","position"],_0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function w0(n){n.cancelable&&n.preventDefault()}function E0(n){n.stopPropagation()}function T0(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function S0(){return"ontouchstart"in window||navigator.maxTouchPoints}var I0=!!(typeof window<"u"&&window.document&&window.document.createElement),Rl=0,da={capture:!1,passive:!1};function DL(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=V.useRef({}),a=V.useRef(null),u=V.useCallback(function(f){if(I0){var m=document.body,y=m&&m.style;if(r&&y0.forEach(function(O){var D=y&&y[O];s.current[O]=D}),r&&Rl<1){var E=parseInt(s.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,R=window.innerWidth-_+E||0;Object.keys(_0).forEach(function(O){var D=_0[O];y&&(y[O]=D)}),y&&(y.paddingRight="".concat(R,"px"))}m&&S0()&&(m.addEventListener("touchmove",w0,da),f&&(f.addEventListener("touchstart",T0,da),f.addEventListener("touchmove",E0,da))),Rl+=1}},[r]),d=V.useCallback(function(f){if(I0){var m=document.body,y=m&&m.style;Rl=Math.max(Rl-1,0),r&&Rl<1&&y0.forEach(function(E){var _=s.current[E];y&&(y[E]=_)}),m&&S0()&&(m.removeEventListener("touchmove",w0,da),f&&(f.removeEventListener("touchstart",T0,da),f.removeEventListener("touchmove",E0,da)))}},[r]);return V.useEffect(function(){if(e){var f=a.current;return u(f),function(){d(f)}}},[e,u,d]),function(f){a.current=f}}var VL=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},ML={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function LL(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,a=n.onBottomArrive,u=n.onBottomLeave,d=n.onTopArrive,f=n.onTopLeave,m=OL({isEnabled:s,onBottomArrive:a,onBottomLeave:u,onTopArrive:d,onTopLeave:f}),y=DL({isEnabled:t}),E=function(R){m(R),y(R)};return we(V.Fragment,null,t&&we("div",{onClick:VL,css:ML}),e(E))}var FL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},jL=function(e){var t=e.name,r=e.onFocus;return we("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:FL,value:"",onChange:function(){}})},UL=jL;function Mg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function zL(){return Mg(/^iPhone/i)}function kI(){return Mg(/^Mac/i)}function BL(){return Mg(/^iPad/i)||kI()&&navigator.maxTouchPoints>1}function $L(){return zL()||BL()}function HL(){return kI()||$L()}var WL=function(e){return e.label},qL=function(e){return e.label},GL=function(e){return e.value},KL=function(e){return!!e.isDisabled},QL={clearIndicator:xM,container:wM,control:FM,dropdownIndicator:PM,group:BM,groupHeading:HM,indicatorsContainer:IM,indicatorSeparator:OM,input:KM,loadingIndicator:MM,loadingMessage:mM,menu:lM,menuList:dM,menuPortal:yM,multiValue:ZM,multiValueLabel:eL,multiValueRemove:tL,noOptionsMessage:pM,option:aL,placeholder:cL,singleValue:fL,valueContainer:TM},XL={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},YL=4,xI=4,JL=38,ZL=xI*2,e4={baseUnit:xI,controlHeight:JL,menuGutter:ZL},Ep={borderRadius:YL,colors:XL,spacing:e4},t4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:f0(),captureMenuScroll:!f0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:PL(),formatGroupLabel:WL,getOptionLabel:qL,getOptionValue:GL,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:KL,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!JV(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function C0(n,e,t,r){var s=DI(n,e,t),a=VI(n,e,t),u=OI(n,e),d=Fh(n,e);return{type:"option",data:e,isDisabled:s,isSelected:a,label:u,value:d,index:r}}function uh(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(u,d){return C0(n,u,e,d)}).filter(function(u){return A0(n,u)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var a=C0(n,t,e,r);return A0(n,a)?a:void 0}).filter(tM)}function NI(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,bg(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function b0(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,bg(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function n4(n,e){return NI(uh(n,e))}function A0(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,a=e.isSelected,u=e.label,d=e.value;return(!LI(n)||!a)&&MI(n,{label:u,value:d,data:s},r)}function r4(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var a=e.indexOf(t);if(a>-1)return t;if(s<e.length)return e[s]}return null}function i4(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Tp=function(e,t){var r,s=(r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id;return s||null},OI=function(e,t){return e.getOptionLabel(t)},Fh=function(e,t){return e.getOptionValue(t)};function DI(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function VI(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Fh(n,e);return t.some(function(s){return Fh(n,s)===r})}function MI(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var LI=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},s4=1,FI=(function(n){C2(t,n);var e=R2(t);function t(r){var s;if(S2(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,m){var y=s.props,E=y.onChange,_=y.name;m.name=_,s.ariaOnChange(f,m),E(f,m)},s.setValue=function(f,m,y){var E=s.props,_=E.closeMenuOnSelect,R=E.isMulti,O=E.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:O}),_&&(s.setState({inputIsHiddenAfterUpdate:!R}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:m,option:y})},s.selectOption=function(f){var m=s.props,y=m.blurInputOnSelect,E=m.isMulti,_=m.name,R=s.state.selectValue,O=E&&s.isOptionSelected(f,R),D=s.isOptionDisabled(f,R);if(O){var b=s.getOptionValue(f);s.setValue(R.filter(function(B){return s.getOptionValue(B)!==b}),"deselect-option",f)}else if(!D)E?s.setValue([].concat(bg(R),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:_});return}y&&s.blurInput()},s.removeValue=function(f){var m=s.props.isMulti,y=s.state.selectValue,E=s.getOptionValue(f),_=y.filter(function(O){return s.getOptionValue(O)!==E}),R=Gc(m,_,_[0]||null);s.onChange(R,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(Gc(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,m=s.state.selectValue,y=m[m.length-1],E=m.slice(0,m.length-1),_=Gc(f,E,E[0]||null);y&&s.onChange(_,{action:"pop-value",removedValue:y})},s.getFocusedOptionId=function(f){return Tp(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return b0(uh(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return GV.apply(void 0,[s.props.classNamePrefix].concat(m))},s.getOptionLabel=function(f){return OI(s.props,f)},s.getOptionValue=function(f){return Fh(s.props,f)},s.getStyles=function(f,m){var y=s.props.unstyled,E=QL[f](m,y);E.boxSizing="border-box";var _=s.props.styles[f];return _?_(E,m):E},s.getClassNames=function(f,m){var y,E;return(y=(E=s.props.classNames)[f])===null||y===void 0?void 0:y.call(E,m)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return vL(s.props)},s.buildCategorizedOptions=function(){return uh(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return NI(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,m){s.setState({ariaSelection:be({value:f},m)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():m&&s.openMenu("first"):(m&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var m=s.props,y=m.isMulti,E=m.menuIsOpen;s.focusInput(),E?(s.setState({inputIsHiddenAfterUpdate:!y}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&wd(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var m=f.touches,y=m&&m.item(0);y&&(s.initialTouchX=y.clientX,s.initialTouchY=y.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var m=f.touches,y=m&&m.item(0);if(y){var E=Math.abs(y.clientX-s.initialTouchX),_=Math.abs(y.clientY-s.initialTouchY),R=5;s.userIsDragging=E>R||_>R}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var m=s.props.inputValue,y=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(y,{action:"input-change",prevInputValue:m}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var m=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:m}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var m=s.getFocusableOptions(),y=m.indexOf(f);s.setState({focusedOption:f,focusedOptionId:y>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return LI(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var m=s.props,y=m.isMulti,E=m.backspaceRemovesValue,_=m.escapeClearsValue,R=m.inputValue,O=m.isClearable,D=m.isDisabled,b=m.menuIsOpen,B=m.onKeyDown,K=m.tabSelectsValue,X=m.openMenuOnFocus,Z=s.state,$=Z.focusedOption,F=Z.focusedValue,A=Z.selectValue;if(!D&&!(typeof B=="function"&&(B(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!y||R)return;s.focusValue("previous");break;case"ArrowRight":if(!y||R)return;s.focusValue("next");break;case"Delete":case"Backspace":if(R)return;if(F)s.removeValue(F);else{if(!E)return;y?s.popValue():O&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!b||!K||!$||X&&s.isOptionSelected($,A))return;s.selectOption($);break;case"Enter":if(f.keyCode===229)break;if(b){if(!$||s.isComposing)return;s.selectOption($);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:R}),s.onMenuClose()):O&&_&&s.clearValue();break;case" ":if(R)return;if(!b){s.openMenu("first");break}if(!$)return;s.selectOption($);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++s4),s.state.selectValue=h0(r.value),r.menuIsOpen&&s.state.selectValue.length){var a=s.getFocusableOptionsWithIds(),u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=a,s.state.focusedOption=u[d],s.state.focusedOptionId=Tp(a,u[d])}return s}return I2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&d0(this.menuListRef,this.focusedOptionRef),HL()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var a=this.props,u=a.isDisabled,d=a.menuIsOpen,f=this.state.isFocused;(f&&!u&&s.isDisabled||f&&d&&!s.menuIsOpen)&&this.focusInput(),f&&u&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!u&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(d0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,a){this.props.onInputChange(s,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var a=this,u=this.state,d=u.selectValue,f=u.isFocused,m=this.buildFocusableOptions(),y=s==="first"?0:m.length-1;if(!this.props.isMulti){var E=m.indexOf(d[0]);E>-1&&(y=E)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[y],focusedOptionId:this.getFocusedOptionId(m[y])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(s){var a=this.state,u=a.selectValue,d=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=u.indexOf(d);d||(f=-1);var m=u.length-1,y=-1;if(u.length){switch(s){case"previous":f===0?y=0:f===-1?y=m:y=f-1;break;case"next":f>-1&&f<m&&(y=f+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:u[y]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,u=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var f=0,m=d.indexOf(u);u||(m=-1),s==="up"?f=m>0?m-1:d.length-1:s==="down"?f=(m+1)%d.length:s==="pageup"?(f=m-a,f<0&&(f=0)):s==="pagedown"?(f=m+a,f>d.length-1&&(f=d.length-1)):s==="last"&&(f=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ep):be(be({},Ep),this.props.theme):Ep})},{key:"getCommonProps",value:function(){var s=this.clearValue,a=this.cx,u=this.getStyles,d=this.getClassNames,f=this.getValue,m=this.selectOption,y=this.setValue,E=this.props,_=E.isMulti,R=E.isRtl,O=E.options,D=this.hasValue();return{clearValue:s,cx:a,getStyles:u,getClassNames:d,getValue:f,hasValue:D,isMulti:_,isRtl:R,options:O,selectOption:m,selectProps:E,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,a=s.isClearable,u=s.isMulti;return a===void 0?u:a}},{key:"isOptionDisabled",value:function(s,a){return DI(this.props,s,a)}},{key:"isOptionSelected",value:function(s,a){return VI(this.props,s,a)}},{key:"filterOption",value:function(s,a){return MI(this.props,s,a)}},{key:"formatOptionLabel",value:function(s,a){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(s,{context:a,inputValue:u,selectValue:d})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var s=this.props,a=s.isDisabled,u=s.isSearchable,d=s.inputId,f=s.inputValue,m=s.tabIndex,y=s.form,E=s.menuIsOpen,_=s.required,R=this.getComponents(),O=R.Input,D=this.state,b=D.inputIsHidden,B=D.ariaSelection,K=this.commonProps,X=d||this.getElementId("input"),Z=be(be(be({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":_,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?(B==null?void 0:B.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?V.createElement(O,Ae({},K,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:X,innerRef:this.getInputRef,isDisabled:a,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:y,type:"text",value:f},Z)):V.createElement(xL,Ae({id:X,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Mh,onFocus:this.onInputFocus,disabled:a,tabIndex:m,inputMode:"none",form:y,value:""},Z))})},{key:"renderPlaceholderOrValue",value:function(){var s=this,a=this.getComponents(),u=a.MultiValue,d=a.MultiValueContainer,f=a.MultiValueLabel,m=a.MultiValueRemove,y=a.SingleValue,E=a.Placeholder,_=this.commonProps,R=this.props,O=R.controlShouldRenderValue,D=R.isDisabled,b=R.isMulti,B=R.inputValue,K=R.placeholder,X=this.state,Z=X.selectValue,$=X.focusedValue,F=X.isFocused;if(!this.hasValue()||!O)return B?null:V.createElement(E,Ae({},_,{key:"placeholder",isDisabled:D,isFocused:F,innerProps:{id:this.getElementId("placeholder")}}),K);if(b)return Z.map(function(C,P){var N=C===$,j="".concat(s.getOptionLabel(C),"-").concat(s.getOptionValue(C));return V.createElement(u,Ae({},_,{components:{Container:d,Label:f,Remove:m},isFocused:N,isDisabled:D,key:j,index:P,removeProps:{onClick:function(){return s.removeValue(C)},onTouchEnd:function(){return s.removeValue(C)},onMouseDown:function(k){k.preventDefault()}},data:C}),s.formatOptionLabel(C,"value"))});if(B)return null;var A=Z[0];return V.createElement(y,Ae({},_,{data:A,isDisabled:D}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),a=s.ClearIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!this.isClearable()||!a||f||!this.hasValue()||m)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Ae({},u,{innerProps:E,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),a=s.LoadingIndicator,u=this.commonProps,d=this.props,f=d.isDisabled,m=d.isLoading,y=this.state.isFocused;if(!a||!m)return null;var E={"aria-hidden":"true"};return V.createElement(a,Ae({},u,{innerProps:E,isDisabled:f,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator,u=s.IndicatorSeparator;if(!a||!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return V.createElement(u,Ae({},d,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),a=s.DropdownIndicator;if(!a)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return V.createElement(a,Ae({},u,{innerProps:m,isDisabled:d,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,a=this.getComponents(),u=a.Group,d=a.GroupHeading,f=a.Menu,m=a.MenuList,y=a.MenuPortal,E=a.LoadingMessage,_=a.NoOptionsMessage,R=a.Option,O=this.commonProps,D=this.state.focusedOption,b=this.props,B=b.captureMenuScroll,K=b.inputValue,X=b.isLoading,Z=b.loadingMessage,$=b.minMenuHeight,F=b.maxMenuHeight,A=b.menuIsOpen,C=b.menuPlacement,P=b.menuPosition,N=b.menuPortalTarget,j=b.menuShouldBlockScroll,z=b.menuShouldScrollIntoView,k=b.noOptionsMessage,ze=b.onMenuScrollToTop,Ve=b.onMenuScrollToBottom;if(!A)return null;var Be=function(ce,Se){var Te=ce.type,Re=ce.data,Pe=ce.isDisabled,Le=ce.isSelected,Fe=ce.label,Ne=ce.value,un=D===Re,$n=Pe?void 0:function(){return s.onOptionHover(Re)},Nn=Pe?void 0:function(){return s.selectOption(Re)},Hn="".concat(s.getElementId("option"),"-").concat(Se),ir={id:Hn,onClick:Nn,onMouseMove:$n,onMouseOver:$n,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:Le};return V.createElement(R,Ae({},O,{innerProps:ir,data:Re,isDisabled:Pe,isSelected:Le,key:Hn,label:Fe,type:Te,value:Ne,isFocused:un,innerRef:un?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(ce.data,"menu"))},$e;if(this.hasOptions())$e=this.getCategorizedOptions().map(function(Q){if(Q.type==="group"){var ce=Q.data,Se=Q.options,Te=Q.index,Re="".concat(s.getElementId("group"),"-").concat(Te),Pe="".concat(Re,"-heading");return V.createElement(u,Ae({},O,{key:Re,data:ce,options:Se,Heading:d,headingProps:{id:Pe,data:Q.data},label:s.formatGroupLabel(Q.data)}),Q.options.map(function(Le){return Be(Le,"".concat(Te,"-").concat(Le.index))}))}else if(Q.type==="option")return Be(Q,"".concat(Q.index))});else if(X){var se=Z({inputValue:K});if(se===null)return null;$e=V.createElement(E,O,se)}else{var me=k({inputValue:K});if(me===null)return null;$e=V.createElement(_,O,me)}var oe={minMenuHeight:$,maxMenuHeight:F,menuPlacement:C,menuPosition:P,menuShouldScrollIntoView:z},H=V.createElement(uM,Ae({},O,oe),function(Q){var ce=Q.ref,Se=Q.placerProps,Te=Se.placement,Re=Se.maxHeight;return V.createElement(f,Ae({},O,oe,{innerRef:ce,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:X,placement:Te}),V.createElement(LL,{captureEnabled:B,onTopArrive:ze,onBottomArrive:Ve,lockEnabled:j},function(Pe){return V.createElement(m,Ae({},O,{innerRef:function(Fe){s.getMenuListRef(Fe),Pe(Fe)},innerProps:{role:"listbox","aria-multiselectable":O.isMulti,id:s.getElementId("listbox")},isLoading:X,maxHeight:Re,focusedOption:D}),$e)}))});return N||P==="fixed"?V.createElement(y,Ae({},O,{appendTo:N,controlElement:this.controlRef,menuPlacement:C,menuPosition:P}),H):H}},{key:"renderFormField",value:function(){var s=this,a=this.props,u=a.delimiter,d=a.isDisabled,f=a.isMulti,m=a.name,y=a.required,E=this.state.selectValue;if(y&&!this.hasValue()&&!d)return V.createElement(UL,{name:m,onFocus:this.onValueInputFocus});if(!(!m||d))if(f)if(u){var _=E.map(function(D){return s.getOptionValue(D)}).join(u);return V.createElement("input",{name:m,type:"hidden",value:_})}else{var R=E.length>0?E.map(function(D,b){return V.createElement("input",{key:"i-".concat(b),name:m,type:"hidden",value:s.getOptionValue(D)})}):V.createElement("input",{name:m,type:"hidden",value:""});return V.createElement("div",null,R)}else{var O=E[0]?this.getOptionValue(E[0]):"";return V.createElement("input",{name:m,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,a=this.state,u=a.ariaSelection,d=a.focusedOption,f=a.focusedValue,m=a.isFocused,y=a.selectValue,E=this.getFocusableOptions();return V.createElement(CL,Ae({},s,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:d,focusedValue:f,isFocused:m,selectValue:y,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),a=s.Control,u=s.IndicatorsContainer,d=s.SelectContainer,f=s.ValueContainer,m=this.props,y=m.className,E=m.id,_=m.isDisabled,R=m.menuIsOpen,O=this.state.isFocused,D=this.commonProps=this.getCommonProps();return V.createElement(d,Ae({},D,{className:y,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:_,isFocused:O}),this.renderLiveRegion(),V.createElement(a,Ae({},D,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:_,isFocused:O,menuIsOpen:R}),V.createElement(f,Ae({},D,{isDisabled:_}),this.renderPlaceholderOrValue(),this.renderInput()),V.createElement(u,Ae({},D,{isDisabled:_}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=a.prevProps,d=a.clearFocusValueOnUpdate,f=a.inputIsHiddenAfterUpdate,m=a.ariaSelection,y=a.isFocused,E=a.prevWasFocused,_=a.instancePrefix,R=s.options,O=s.value,D=s.menuIsOpen,b=s.inputValue,B=s.isMulti,K=h0(O),X={};if(u&&(O!==u.value||R!==u.options||D!==u.menuIsOpen||b!==u.inputValue)){var Z=D?n4(s,K):[],$=D?b0(uh(s,K),"".concat(_,"-option")):[],F=d?r4(a,K):null,A=i4(a,Z),C=Tp($,A);X={selectValue:K,focusedOption:A,focusedOptionId:C,focusableOptionsWithIds:$,focusedValue:F,clearFocusValueOnUpdate:!1}}var P=f!=null&&s!==u?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},N=m,j=y&&E;return y&&!j&&(N={value:Gc(B,K,K[0]||null),options:K,action:"initial-input-focus"},j=!E),(m==null?void 0:m.action)==="initial-input-focus"&&(N=null),be(be(be({},X),P),{},{prevProps:s,ariaSelection:N,prevWasFocused:j})}}]),t})(V.Component);FI.defaultProps=t4;var o4=V.forwardRef(function(n,e){var t=T2(n);return V.createElement(FI,Ae({ref:e},t))}),a4=o4;const Pl=["Anagrafica","Stato fisico","Obiettivi","Supporto"];function je(n){return typeof n=="string"?n:n==null?"":String(n)}function Kc(n){return je(n.uid).trim()||n.id}function Sp(n){return Array.isArray(n)?n.map(e=>{if(!e||typeof e!="object")return null;const t=e;return{name:je(t.name),sets:Number(t.sets??3)||3,reps:Number(t.reps??10)||10,weight:je(t.weight),mediaUrl:je(t.mediaUrl)}}).filter(e=>!!e):[]}function ot(n){return je(n).trim()||"Non compilato"}function l4(n){const e=n.replace(/[^\d+]/g,"").replace(/\s+/g,"");return e?e.startsWith("+")?e.slice(1):e.startsWith("00")?e.slice(2):e.startsWith("39")?e:e.length>=9?`39${e}`:e:""}function u4(n,e){const t=l4(n),r=e!=null&&e.trim()?`Ciao ${e.trim()},`:"Ciao,",s=encodeURIComponent(`${r} la tua scheda tecnica  pronta. Quando vuoi possiamo rivederla insieme.`);return t?`https://wa.me/${t}?text=${s}`:""}function R0(n){return n.includes("youtube.com")||n.includes("youtu.be")||/\.(mp4|webm|mov|m4v|ogg)(\?.*)?$/i.test(n)}function Ip(n){return/\.(jpg|jpeg|png|gif|webp|avif|svg)(\?.*)?$/i.test(n)}function as(){return{name:"",sets:3,reps:10,weight:"",mediaUrl:""}}function jI(n){return{fullName:(n==null?void 0:n.name)??"",age:"",sex:"",email:(n==null?void 0:n.email)??"",phone:"",discoverySource:"",heightCm:"",weightKg:"",pastProgram:"",trainingFrequency:"",workoutDuration:"",workoutLocation:"",equipment:"",trainingTypeHistory:"",hasInjuries:"",injuryDetails:"",objectivePrimary:"",objectiveReason:"",expectedTimeline:"",supportPreference:"",supportPreferenceOther:"",investmentRange:"",whatBlockedSoFar:"",oneThingToImprove:"",importanceScore:"",riskIfNoChange:"",readiness:"",notes:""}}function P0(n,e){const t=jI(e);return n?{...t,fullName:je(n.fullName).trim()||t.fullName,age:je(n.age).trim(),sex:je(n.sex).trim(),email:je(n.email).trim()||t.email,phone:je(n.phone).trim(),discoverySource:je(n.discoverySource).trim(),heightCm:je(n.heightCm).trim(),weightKg:je(n.weightKg).trim(),pastProgram:je(n.pastProgram).trim(),trainingFrequency:je(n.trainingFrequency).trim(),workoutDuration:je(n.workoutDuration).trim(),workoutLocation:je(n.workoutLocation).trim(),equipment:je(n.equipment).trim(),trainingTypeHistory:je(n.trainingTypeHistory).trim(),hasInjuries:je(n.hasInjuries).trim(),injuryDetails:je(n.injuryDetails).trim(),objectivePrimary:je(n.objectivePrimary).trim(),objectiveReason:je(n.objectiveReason).trim(),expectedTimeline:je(n.expectedTimeline).trim(),supportPreference:je(n.supportPreference).trim(),supportPreferenceOther:je(n.supportPreferenceOther).trim(),investmentRange:je(n.investmentRange).trim(),whatBlockedSoFar:je(n.whatBlockedSoFar).trim(),oneThingToImprove:je(n.oneThingToImprove).trim(),importanceScore:n.importanceScore!=null?String(n.importanceScore):"",riskIfNoChange:je(n.riskIfNoChange).trim(),readiness:je(n.readiness).trim(),notes:je(n.notes).trim()}:t}function c4(n){return n.includes("1-2")?2:n.includes("3-4")?4:n.includes("5")?5:0}function k0(n){if(!n)return"Non disponibile";const e=new Date(n);return Number.isNaN(e.getTime())?"Non disponibile":e.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}function h4(){const{role:n,user:e,isSupervisor:t}=Ua(),r=iu(),{showError:s,showSuccess:a}=Uh(),[u,d]=V.useState([]),[f,m]=V.useState([]),[y,E]=V.useState(!1),[_,R]=V.useState(null),[O,D]=V.useState(!1),[b,B]=V.useState(!1),[K,X]=V.useState(!1),[Z,$]=V.useState(0),[F,A]=V.useState(jI()),[C,P]=V.useState(null),[N,j]=V.useState(null),[z,k]=V.useState(!1),[ze,Ve]=V.useState([]),[Be,$e]=V.useState(""),[se,me]=V.useState(""),[oe,H]=V.useState("clients"),[Q,ce]=V.useState(""),[Se,Te]=V.useState(""),[Re,Pe]=V.useState([as()]),Le=C!==null,Fe=u.find(M=>Kc(M)===Q)??null,Ne=f.find(M=>M.id===Q)??f.find(M=>M.clientId===Q),un=u4(je(_==null?void 0:_.phone),je(_==null?void 0:_.fullName)),$n=u.reduce((M,le)=>{const ge=je(le.displayName).trim()||je(le.email).trim()||le.id;return M[Kc(le)]=ge,M[le.id]=ge,M},{}),Nn=u.map(M=>({value:Kc(M),label:je(M.displayName).trim()||je(M.email)||M.id})),Hn=Nn.find(M=>M.value===Q)??null,ir=Math.round((Z+1)/Pl.length*100),ks=[{id:"code",label:"Codice",mobileLabel:"Codice",icon:""},{id:"clients",label:"Clienti",mobileLabel:"Clienti",icon:""},{id:"plans",label:"Schede",mobileLabel:"Schede",icon:""},{id:"overview",label:"Panoramica",mobileLabel:"Dashboard",icon:""},...t?[{id:"supervisor",label:"Supervisor",mobileLabel:"Admin",icon:""}]:[]],Oi=ze.filter(M=>M.uid!==(e==null?void 0:e.uid)).filter(M=>!M.isSupervisor).filter(M=>{const le=Be.trim().toLowerCase();return le?M.displayName.toLowerCase().includes(le)||M.email.toLowerCase().includes(le):!0}).sort((M,le)=>{const ge=M.expiresAt?new Date(M.expiresAt).getTime():Number.MAX_SAFE_INTEGER,Ye=le.expiresAt?new Date(le.expiresAt).getTime():Number.MAX_SAFE_INTEGER;return ge-Ye});V.useEffect(()=>{!t&&oe==="supervisor"&&H("clients")},[t,oe]);const Ao=V.useMemo(()=>({control:(M,le)=>({...M,minHeight:48,borderRadius:12,borderColor:le.isFocused?"#ff6a00":"rgba(18,18,18,0.16)",boxShadow:le.isFocused?"0 0 0 2px rgba(255,106,0,0.20)":"none",backgroundColor:"#fff","&:hover":{borderColor:"#ff6a00"}}),menu:M=>({...M,borderRadius:12,overflow:"hidden",zIndex:50}),option:(M,le)=>({...M,backgroundColor:le.isSelected?"#ff6a00":le.isFocused?"rgba(255,106,0,0.10)":"#fff",color:le.isSelected?"#fff":"#121212",cursor:"pointer"})}),[]);V.useEffect(()=>{async function M(){if(!Q){R(null);return}try{const le=await WS(Q,"onboarding");R(le.data()??null)}catch{R(null)}}M()},[Q]),V.useEffect(()=>{if(!Q)return;if(!Ne){Te(""),Pe([as()]);return}Te(Ne.title??"");const M=Sp(Ne.exercises).filter(le=>le.name.trim().length>0);Pe(M.length>0?M:[as()])},[Q,Ne==null?void 0:Ne.id]),V.useEffect(()=>{Ne||B(!1)},[Ne==null?void 0:Ne.id]);async function Rr(){if(n){E(!0);try{const ge=(await YD(e==null?void 0:e.uid)).docs.map(Ye=>({id:Ye.id,...Ye.data()})).sort((Ye,cn)=>{const qn=je(Ye.displayName||Ye.email||Ye.id).toLowerCase(),Ls=je(cn.displayName||cn.email||cn.id).toLowerCase();return qn.localeCompare(Ls)});d(ge),!Q&&ge[0]&&ce(Kc(ge[0]));try{const Ye=await qS(n);m(Ye.docs.map(cn=>({id:cn.id,...cn.data()})))}catch(Ye){m([]),s(Kt(Ye))}}catch(M){console.error("Coach action failed:",M),s(Kt(M))}finally{E(!1)}}}V.useEffect(()=>{Rr()},[n,e==null?void 0:e.uid]),V.useEffect(()=>{!N||N.isSupervisor||N.isExpired&&Si().finally(()=>{sessionStorage.setItem("bw_login_intent","coach"),r("/auth",{replace:!0})})},[N==null?void 0:N.status,N==null?void 0:N.isExpired,N==null?void 0:N.isSupervisor]),V.useEffect(()=>{async function M(){if(!(!n||n==="client")){k(!0);try{const le=await Ww();j(le)}catch(le){s(Kt(le))}finally{k(!1)}}}M()},[n,e==null?void 0:e.uid]);async function Wn(){if(t)try{const M=await qD();Ve(M.coaches??[])}catch(M){s(Kt(M))}}V.useEffect(()=>{Wn()},[t,e==null?void 0:e.uid]);async function On(M,le){E(!0);try{await M(),a(le),await Rr()}catch(ge){s(Kt(ge))}finally{E(!1)}}function xs(){Pe(M=>[...M,as()])}function Di(M){Pe(le=>le.length<=1?le:le.filter((ge,Ye)=>Ye!==M))}function Vi(M){yn(M,as())}function yn(M,le){Pe(ge=>ge.map((Ye,cn)=>cn===M?{...Ye,...le}:Ye))}function xe(M,le){A(ge=>({...ge,[M]:le}))}function _t(){if(!Ne){Te(""),Pe([as()]);return}Te(Ne.title??"");const M=Sp(Ne.exercises).filter(le=>le.name.trim().length>0);Pe(M.length>0?M:[as()])}function sr(){if(!Q){s("Seleziona prima un cliente.");return}const M={name:je(Fe==null?void 0:Fe.displayName).trim(),email:je(Fe==null?void 0:Fe.email).trim()};A(P0(_,M)),$(0),X(!0)}function Ns(){const M={name:je(Fe==null?void 0:Fe.displayName).trim(),email:je(Fe==null?void 0:Fe.email).trim()};A(P0(_,M)),$(0),X(!1)}function Pr(){return F.fullName.trim()?F.email.trim()?F.phone.trim()?F.age.trim()?F.sex.trim()?F.heightCm.trim()?F.weightKg.trim()?F.pastProgram.trim()?F.trainingFrequency.trim()?F.workoutDuration.trim()?F.workoutLocation.trim()?F.equipment.trim()?F.objectivePrimary.trim()?F.objectiveReason.trim()?F.expectedTimeline.trim()?F.supportPreference.trim()?F.investmentRange.trim()?F.readiness.trim()?null:"Compila disponibilit a partire.":"Compila fascia investimento.":"Compila supporto preferito.":"Compila timeline risultati.":"Compila motivo obiettivo.":"Compila obiettivo principale.":"Compila attrezzatura.":"Compila luogo allenamento.":"Compila durata allenamento.":"Compila frequenza allenamento.":"Compila esperienza allenamento.":"Inserisci peso.":"Inserisci altezza.":"Inserisci sesso.":"Inserisci et.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function ni(){if(!Q){s("Seleziona prima un cliente.");return}const M=Pr();if(M){s(M);return}const le={fullName:F.fullName.trim(),age:F.age.trim(),sex:F.sex.trim(),email:F.email.trim(),phone:F.phone.trim(),discoverySource:F.discoverySource.trim(),heightCm:F.heightCm.trim(),weightKg:F.weightKg.trim(),pastProgram:F.pastProgram.trim(),trainingFrequency:F.trainingFrequency.trim(),workoutDuration:F.workoutDuration.trim(),workoutLocation:F.workoutLocation.trim(),equipment:F.equipment.trim(),trainingTypeHistory:F.trainingTypeHistory.trim(),hasInjuries:F.hasInjuries.trim(),injuryDetails:F.injuryDetails.trim(),objectivePrimary:F.objectivePrimary.trim(),objectiveReason:F.objectiveReason.trim(),expectedTimeline:F.expectedTimeline.trim(),supportPreference:F.supportPreference.trim(),supportPreferenceOther:F.supportPreferenceOther.trim(),investmentRange:F.investmentRange.trim(),whatBlockedSoFar:F.whatBlockedSoFar.trim(),oneThingToImprove:F.oneThingToImprove.trim(),importanceScore:Number(F.importanceScore||0),riskIfNoChange:F.riskIfNoChange.trim(),readiness:F.readiness.trim(),goal:F.objectivePrimary.trim(),experienceLevel:F.pastProgram.trim(),trainingDaysPerWeek:c4(F.trainingFrequency),notes:F.notes.trim(),compiledBy:"coach"};E(!0);try{await JD(Q,le),R(le),a("Anagrafica cliente salvata con successo."),X(!1)}catch(ge){s(Kt(ge))}finally{E(!1)}}async function ri(){const M=Se.trim();if(!M){s("Inserisci un titolo per la scheda.");return}const le=Re.map(ge=>({name:ge.name.trim(),sets:Number(ge.sets)||0,reps:Number(ge.reps)||0,weight:ge.weight.trim(),mediaUrl:ge.mediaUrl.trim()})).filter(ge=>ge.name.length>0);if(le.length===0){s("Aggiungi almeno un esercizio con nome.");return}Ne?await On(()=>t2(Ne.id,{title:M,status:"active",exercises:le}),"Scheda aggiornata con successo."):await On(()=>ZD({clientId:Q,title:M,status:"active",exercises:le}),"Scheda creata e subito visibile al cliente."),D(!1)}function Os(){if(!Q){s("Seleziona prima un cliente.");return}_t(),D(!0)}function Ds(){_t(),D(!1)}async function Vs(M,le){if(le){if(!le.type.startsWith("image/")){s("Puoi caricare solo immagini. Per i video usa il campo URL.");return}if(!Q){s("Seleziona prima un cliente.");return}P(M);try{const ge=await r2(Q,le);yn(M,{mediaUrl:ge}),a("Media caricato con successo.")}catch(ge){console.error("Media upload failed:",ge),s(Kt(ge))}finally{P(null)}}}async function Ms(){!Ne||!window.confirm("Vuoi davvero eliminare tutta la scheda tecnica di questo cliente?")||(await On(()=>n2(Ne.id),"Scheda eliminata con successo."),Te(""),Pe([as()]),D(!1))}async function Mi(M,le){me(M);try{if(le==="activate"){const ge=ze.find(Ye=>Ye.uid===M);(ge==null?void 0:ge.status)==="disabled"?(await qw(M),a("Coach sbloccato con successo.")):(ge==null?void 0:ge.status)==="active_paid"?(await GD(M),a("Abbonamento rinnovato di 1 anno.")):(await qw(M),a("Abbonamento attivato."))}else await KD(M),a("Abbonamento disattivato.");await Wn()}catch(ge){s(Kt(ge))}finally{me("")}}async function ii(){k(!0);try{await US();const M=await Ww();j(M),a("Periodo di prova attivato.")}catch(M){s(Kt(M))}finally{k(!1)}}return T.jsxs(XS,{role:n==="trainer"?"trainer":"admin",subtitle:"Flusso diviso per tab: clienti, schede e controllo accessi.",title:"Area Coach",sections:ks,activeSection:oe,onSectionChange:M=>H(M),children:[N!=null&&N.requiresTrialAcceptance?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card fullscreen-gate",children:[T.jsx("p",{className:"eyebrow",children:"Accesso Coach"}),T.jsx("h2",{children:"Prova gratuita 15 giorni"}),T.jsx("p",{className:"hero-sub",children:"Per entrare nell'area coach devi accettare il periodo gratuito di 15 giorni. Al termine sar necessario attivare l'abbonamento."}),T.jsx("button",{className:"btn",type:"button",disabled:z,onClick:()=>void ii(),children:z?"Attivazione...":"Accetta e continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>{Si().finally(()=>r("/auth",{replace:!0}))},children:"Esci"})]})}):null,oe==="code"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Il tuo codice coach"}),T.jsx("p",{className:"hero-sub",children:"Invia questo codice al cliente:  obbligatorio per associarlo a te in onboarding."}),T.jsx("p",{className:"coach-code",children:(N==null?void 0:N.coachCode)||"Caricamento..."}),z?T.jsx("p",{className:"hint",children:"Sto verificando il tuo accesso..."}):null,N!=null&&N.isSupervisor?T.jsx("p",{className:"hint",children:"Account supervisor: accesso sempre attivo, senza trial."}):T.jsxs("p",{className:"hint",children:["Stato accesso: ",T.jsx("strong",{children:(N==null?void 0:N.status)??"non disponibile"}),"  ","Scadenza: ",T.jsx("strong",{children:k0((N==null?void 0:N.expiresAt)??(N==null?void 0:N.trialEndsAt)??(N==null?void 0:N.subscriptionEndsAt))})]})]}):null,t&&oe==="supervisor"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Gestione coach (Supervisor)"}),T.jsxs("label",{children:["Cerca coach per nome o email",T.jsx("input",{value:Be,onChange:M=>$e(M.target.value),placeholder:"Es. Mario Rossi o mario@gmail.com"})]}),T.jsxs("div",{className:"supervisor-list",children:[Oi.map(M=>T.jsxs("article",{className:"supervisor-row",children:[T.jsxs("div",{children:[T.jsx("p",{children:T.jsx("strong",{children:M.displayName||"Coach senza nome"})}),T.jsx("p",{className:"hint",children:M.email}),T.jsxs("p",{className:"hint",children:["Codice: ",M.coachCode||"-"]}),T.jsxs("p",{className:"hint",children:["Stato: ",M.isSupervisor?"supervisor_active":M.status]}),T.jsxs("p",{className:"hint",children:["Scadenza: ",k0(M.expiresAt)]})]}),T.jsxs("div",{className:"supervisor-actions",children:[T.jsx("button",{className:"btn btn-ghost",type:"button",disabled:M.isSupervisor||se===M.uid,onClick:()=>void Mi(M.uid,"activate"),children:M.status==="disabled"?"Sblocca":M.status==="active_paid"?"Rinnova +1 anno":"Attiva"}),T.jsx("button",{className:"btn btn-danger",type:"button",disabled:M.isSupervisor||se===M.uid,onClick:()=>void Mi(M.uid,"disable"),children:"Disattiva"})]})]},M.uid)),Oi.length===0?T.jsx("article",{className:"supervisor-row",children:T.jsx("p",{className:"hint",children:"Nessun altro coach disponibile al momento. Quando un coach si registra, lo vedrai qui con stato e scadenza."})}):null]})]}):null,oe==="clients"||oe==="plans"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:oe==="plans"?"Schede tecniche":"Gestione cliente"}),T.jsxs("label",{children:["Clienti registrati",T.jsx(a4,{styles:Ao,options:Nn,value:Hn,onChange:M=>ce((M==null?void 0:M.value)??""),placeholder:u.length===0?"Nessun cliente disponibile":"Cerca cliente per nome...",noOptionsMessage:()=>"Nessun risultato",isSearchable:!0})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Rr(),children:"Aggiorna lista clienti"}),u.length===0?T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[T.jsx("h2",{children:oe==="plans"?"Nessuna scheda disponibile":"Nessun cliente associato"}),T.jsx("p",{className:"hint",children:oe==="plans"?"Non hai ancora clienti associati, quindi non puoi creare schede. Quando un cliente inserisce il tuo codice coach, troverai qui la sezione per creare il programma.":"Al momento non hai clienti legati al tuo codice coach. Quando un cliente inserisce il tuo codice in onboarding, apparir qui."})]}):T.jsxs(T.Fragment,{children:[oe==="clients"?T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[T.jsx("h2",{children:"Anagrafica cliente"}),T.jsx("p",{className:"hint",children:"L'utente compila i dati base. Il questionario completo lo compili qui."}),T.jsx("button",{className:"btn",type:"button",onClick:sr,disabled:y||!Q,children:_?"Modifica anagrafica completa":"Compila anagrafica completa"}),un?T.jsx("a",{className:"btn btn-whatsapp",href:un,target:"_blank",rel:"noreferrer",children:"Scrivi al cliente su WhatsApp"}):T.jsx("p",{className:"hint",children:"Numero WhatsApp cliente non disponibile."}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Anagrafica"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Nome:"})," ",ot(_==null?void 0:_.fullName)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Et:"})," ",ot(_==null?void 0:_.age)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Sesso:"})," ",ot(_==null?void 0:_.sex)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Email:"})," ",ot(_==null?void 0:_.email)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Telefono:"})," ",ot(_==null?void 0:_.phone)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Come ci ha conosciuto:"})," ",ot(_==null?void 0:_.discoverySource)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Stato fisico e allenamento"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Altezza:"})," ",ot(_==null?void 0:_.heightCm)," cm"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Peso:"})," ",ot(_==null?void 0:_.weightKg)," kg"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Esperienza programmi:"})," ",ot((_==null?void 0:_.pastProgram)||(_==null?void 0:_.experienceLevel))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Allenamenti settimanali:"})," ",ot((_==null?void 0:_.trainingFrequency)||(_==null?void 0:_.trainingDaysPerWeek))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Durata sessione:"})," ",ot(_==null?void 0:_.workoutDuration)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Luogo allenamento:"})," ",ot(_==null?void 0:_.workoutLocation)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Attrezzatura:"})," ",ot(_==null?void 0:_.equipment)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Allenamenti svolti:"})," ",ot(_==null?void 0:_.trainingTypeHistory)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Infortuni/problemi:"})," ",ot(_==null?void 0:_.hasInjuries)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Dettagli infortuni:"})," ",ot(_==null?void 0:_.injuryDetails)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Obiettivi"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Obiettivo principale:"})," ",ot((_==null?void 0:_.objectivePrimary)||(_==null?void 0:_.goal))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Perch:"})," ",ot(_==null?void 0:_.objectiveReason)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Timeline risultati:"})," ",ot(_==null?void 0:_.expectedTimeline)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Cosa lo ha bloccato:"})," ",ot((_==null?void 0:_.whatBlockedSoFar)||(_==null?void 0:_.notes))]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Miglioramento desiderato (3 mesi):"})," ",ot(_==null?void 0:_.oneThingToImprove)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Importanza obiettivo:"})," ",ot(_==null?void 0:_.importanceScore)," / 10"]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Rischio se non cambia:"})," ",ot(_==null?void 0:_.riskIfNoChange)]})]}),T.jsxs("div",{className:"client-info-block",children:[T.jsx("h3",{children:"Supporto e decisione"}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Supporto preferito:"})," ",ot(_==null?void 0:_.supportPreference)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Altro supporto:"})," ",ot(_==null?void 0:_.supportPreferenceOther)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Fascia investimento:"})," ",ot(_==null?void 0:_.investmentRange)]}),T.jsxs("p",{className:"hint",children:[T.jsx("strong",{children:"Disponibilit a partire:"})," ",ot(_==null?void 0:_.readiness)]})]})]}):null,oe==="plans"?T.jsxs(T.Fragment,{children:[Q?null:T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px dashed rgba(18,18,18,0.16)"},children:[T.jsx("h2",{children:"Seleziona un cliente"}),T.jsx("p",{className:"hint",children:"Scegli un cliente dalla lista in alto per creare o modificare la sua scheda tecnica."})]}),T.jsx("p",{className:"hint",children:Ne?"Questo cliente ha gi una scheda: puoi modificarla.":"Questo cliente non ha ancora una scheda: ne creerai una nuova."}),T.jsxs("div",{className:"supervisor-actions",children:[Ne?T.jsx("button",{className:"btn btn-ghost",disabled:y,onClick:()=>B(!0),type:"button",children:"Visualizza scheda"}):null,T.jsx("button",{className:"btn",disabled:y||!Q,onClick:Os,type:"button",children:Ne?"Modifica scheda":"Crea scheda"})]}),Ne?T.jsx("button",{className:"btn btn-danger",disabled:y,onClick:()=>void Ms(),type:"button",children:"Elimina scheda"}):null]}):null]})]}):null,K?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:"Anagrafica completa cliente"}),T.jsxs("p",{className:"hero-sub",children:["Step ",Z+1," di ",Pl.length,"  Completamento ",ir,"%"]}),T.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:T.jsx("div",{className:"onboarding-progress-bar",style:{width:`${ir}%`}})}),T.jsx("div",{className:"step-tabs",children:Pl.map((M,le)=>T.jsx("button",{className:`step-tab ${Z===le?"step-tab-active":""}`.trim(),type:"button",onClick:()=>$(le),children:M},M))}),Z===0?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Nome e cognome *",T.jsx("input",{value:F.fullName,onChange:M=>xe("fullName",M.target.value)})]}),T.jsxs("label",{children:["Et *",T.jsx("input",{type:"number",min:12,max:99,value:F.age,onChange:M=>xe("age",M.target.value)})]}),T.jsxs("label",{children:["Sesso *",T.jsx("input",{value:F.sex,onChange:M=>xe("sex",M.target.value)})]}),T.jsxs("label",{children:["E-mail *",T.jsx("input",{type:"email",value:F.email,onChange:M=>xe("email",M.target.value)})]}),T.jsxs("label",{children:["Telefono *",T.jsx("input",{type:"tel",value:F.phone,onChange:M=>xe("phone",M.target.value)})]}),T.jsxs("label",{children:["Come ci ha conosciuto",T.jsx("input",{value:F.discoverySource,onChange:M=>xe("discoverySource",M.target.value)})]})]}):null,Z===1?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Altezza (cm) *",T.jsx("input",{type:"number",min:100,max:250,value:F.heightCm,onChange:M=>xe("heightCm",M.target.value)})]}),T.jsxs("label",{children:["Peso (kg) *",T.jsx("input",{type:"number",min:30,max:250,value:F.weightKg,onChange:M=>xe("weightKg",M.target.value)})]}),T.jsxs("label",{children:["Programmi precedenti *",T.jsx("input",{value:F.pastProgram,onChange:M=>xe("pastProgram",M.target.value),placeholder:"Es. Si con coach online"})]}),T.jsxs("label",{children:["Frequenza allenamenti *",T.jsx("input",{value:F.trainingFrequency,onChange:M=>xe("trainingFrequency",M.target.value),placeholder:"Es. 3-4 a settimana"})]}),T.jsxs("label",{children:["Durata allenamento *",T.jsx("input",{value:F.workoutDuration,onChange:M=>xe("workoutDuration",M.target.value),placeholder:"Es. 45 minuti"})]}),T.jsxs("label",{children:["Dove si allena *",T.jsx("input",{value:F.workoutLocation,onChange:M=>xe("workoutLocation",M.target.value)})]}),T.jsxs("label",{children:["Attrezzatura disponibile *",T.jsx("input",{value:F.equipment,onChange:M=>xe("equipment",M.target.value)})]}),T.jsxs("label",{children:["Allenamenti fatti",T.jsx("textarea",{value:F.trainingTypeHistory,onChange:M=>xe("trainingTypeHistory",M.target.value)})]}),T.jsxs("label",{children:["Infortuni/problemi",T.jsx("input",{value:F.hasInjuries,onChange:M=>xe("hasInjuries",M.target.value),placeholder:"Si/No"})]}),T.jsxs("label",{children:["Dettagli infortuni",T.jsx("textarea",{value:F.injuryDetails,onChange:M=>xe("injuryDetails",M.target.value)})]})]}):null,Z===2?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Obiettivo principale *",T.jsx("input",{value:F.objectivePrimary,onChange:M=>xe("objectivePrimary",M.target.value)})]}),T.jsxs("label",{children:["Perch questo obiettivo? *",T.jsx("textarea",{value:F.objectiveReason,onChange:M=>xe("objectiveReason",M.target.value)})]}),T.jsxs("label",{children:["Timeline risultati *",T.jsx("input",{value:F.expectedTimeline,onChange:M=>xe("expectedTimeline",M.target.value)})]}),T.jsxs("label",{children:["Cosa lo ha bloccato",T.jsx("textarea",{value:F.whatBlockedSoFar,onChange:M=>xe("whatBlockedSoFar",M.target.value)})]}),T.jsxs("label",{children:["Miglioramento nei prossimi 3 mesi",T.jsx("textarea",{value:F.oneThingToImprove,onChange:M=>xe("oneThingToImprove",M.target.value)})]}),T.jsxs("label",{children:["Importanza obiettivo (1-10)",T.jsx("input",{type:"number",min:1,max:10,value:F.importanceScore,onChange:M=>xe("importanceScore",M.target.value)})]}),T.jsxs("label",{children:["Rischio se non cambia",T.jsx("textarea",{value:F.riskIfNoChange,onChange:M=>xe("riskIfNoChange",M.target.value)})]})]}):null,Z===3?T.jsxs("div",{className:"modal-grid",children:[T.jsxs("label",{children:["Supporto preferito *",T.jsx("input",{value:F.supportPreference,onChange:M=>xe("supportPreference",M.target.value)})]}),T.jsxs("label",{children:["Altro supporto",T.jsx("input",{value:F.supportPreferenceOther,onChange:M=>xe("supportPreferenceOther",M.target.value)})]}),T.jsxs("label",{children:["Fascia investimento *",T.jsx("input",{value:F.investmentRange,onChange:M=>xe("investmentRange",M.target.value),placeholder:"Es. 150-250"})]}),T.jsxs("label",{children:["Disponibilit a partire *",T.jsx("input",{value:F.readiness,onChange:M=>xe("readiness",M.target.value)})]}),T.jsxs("label",{children:["Note coach",T.jsx("textarea",{value:F.notes,onChange:M=>xe("notes",M.target.value)})]})]}):null,T.jsxs("div",{className:"onboarding-actions",children:[T.jsx("button",{className:"btn btn-ghost",type:"button",disabled:Z===0,onClick:()=>$(M=>Math.max(M-1,0)),children:"Indietro"}),Z<Pl.length-1?T.jsx("button",{className:"btn",type:"button",onClick:()=>$(M=>Math.min(M+1,Pl.length-1)),children:"Continua"}):T.jsx("button",{className:"btn",type:"button",onClick:()=>void ni(),disabled:y,children:y?"Salvataggio...":"Salva anagrafica"})]}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Ns,children:"Chiudi"})]})}):null,O?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:Ne?"Modifica scheda":"Compila la scheda"}),T.jsx("p",{className:"hint",children:"Aggiungi esercizi uno alla volta per completare il programma."}),T.jsxs("label",{children:["Titolo scheda *",T.jsx("input",{value:Se,onChange:M=>Te(M.target.value),placeholder:"Forza 4 settimane",required:!0})]}),Re.map((M,le)=>T.jsxs("article",{className:"card",style:{boxShadow:"none",border:"1px solid rgba(18,18,18,0.10)"},children:[T.jsxs("div",{className:"exercise-head",children:[T.jsxs("h2",{children:["Esercizio ",le+1]}),T.jsx("button",{className:"icon-btn",type:"button",onClick:()=>Vi(le),"aria-label":`Reset esercizio ${le+1}`,title:"Reset esercizio",children:""})]}),T.jsxs("label",{children:["Nome esercizio",T.jsx("input",{value:M.name,onChange:ge=>yn(le,{name:ge.target.value}),placeholder:"Es. Squat bilanciere"})]}),T.jsxs("label",{children:["Numero serie",T.jsx("input",{type:"number",min:1,value:M.sets,onChange:ge=>yn(le,{sets:Number(ge.target.value)})})]}),T.jsxs("label",{children:["Ripetizioni",T.jsx("input",{type:"number",min:1,value:M.reps,onChange:ge=>yn(le,{reps:Number(ge.target.value)}),placeholder:"10"})]}),T.jsxs("label",{children:["Peso",T.jsx("input",{value:M.weight,onChange:ge=>yn(le,{weight:ge.target.value}),placeholder:"Es. 40kg o corpo libero"})]}),T.jsxs("label",{children:["URL video (YouTube o link diretto)",T.jsx("input",{value:R0(M.mediaUrl)?M.mediaUrl:"",onChange:ge=>yn(le,{mediaUrl:ge.target.value}),placeholder:"https://..."})]}),T.jsxs("label",{children:["Oppure carica un'immagine",T.jsx("input",{type:"file",accept:"image/*",onChange:ge=>{var Ye;return void Vs(le,((Ye=ge.target.files)==null?void 0:Ye[0])??null)},disabled:C===le}),Ip(M.mediaUrl)?T.jsx("img",{src:M.mediaUrl,alt:`Anteprima esercizio ${le+1}`,className:"exercise-upload-preview"}):null]}),Ip(M.mediaUrl)?T.jsxs("p",{className:"hint",children:["Immagine caricata."," ",T.jsx("button",{className:"btn-link",type:"button",onClick:()=>yn(le,{mediaUrl:""}),children:"Rimuovi"})]}):null,C===le?T.jsx("p",{className:"hint",children:"Caricamento media in corso..."}):null,T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Di(le),children:"Rimuovi esercizio"})]},`exercise-${le}`)),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:xs,children:"Aggiungi esercizio"}),T.jsx("button",{className:"btn",type:"button",disabled:y||Le,onClick:()=>void ri(),children:Le?"Attendi caricamento media...":Ne?"Salva modifiche":"Salva scheda tecnica"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:Ds,children:"Chiudi"})]})}):null,b&&Ne?T.jsx("section",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:T.jsxs("article",{className:"card modal-card",children:[T.jsx("h2",{children:"Scheda in sola lettura"}),T.jsxs("p",{className:"hint",children:["Cliente: ",$n[Q]||Q]}),T.jsxs("div",{className:"plan-head",children:[T.jsx("p",{className:"hint",children:"Titolo programma"}),T.jsx("h3",{children:Ne.title||"Senza titolo"})]}),T.jsx("div",{className:"exercise-grid",children:Sp(Ne.exercises).map((M,le)=>T.jsxs("article",{className:"exercise-card",children:[T.jsx("p",{className:"exercise-name",children:M.name||`Esercizio ${le+1}`}),T.jsxs("div",{className:"exercise-meta",children:[T.jsxs("span",{children:[M.sets||"-"," serie"]}),T.jsxs("span",{children:[M.reps||"-"," reps"]}),T.jsx("span",{children:M.weight||"Peso libero"})]}),M.mediaUrl?T.jsx("a",{className:"btn-link",href:M.mediaUrl,target:"_blank",rel:"noreferrer",children:R0(M.mediaUrl)?"Apri video":Ip(M.mediaUrl)?"Apri immagine":"Apri link"}):T.jsx("p",{className:"hint",children:"Nessun media allegato"})]},`preview-ex-${le}`))}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>B(!1),children:"Chiudi"})]})}):null,oe==="overview"?T.jsxs("article",{className:"card",children:[T.jsx("h2",{children:"Panoramica"}),T.jsxs("p",{className:"hint",children:["Clienti registrati: ",u.length]}),T.jsxs("p",{className:"hint",children:["Programmi creati: ",f.length]}),T.jsx("ul",{className:"list",children:f.slice(0,5).map(M=>{var le;return T.jsxs("li",{children:[T.jsx("strong",{children:M.title}),"  ",((le=M.exercises)==null?void 0:le.length)??0," esercizi  cliente ",$n[M.clientId]||M.clientId]},M.id)})})]}):null,y?T.jsx("p",{className:"message",children:"Caricamento..."}):null]})}function d4(){const{user:n,role:e}=Ua(),t=iu(),{showError:r,showSuccess:s}=Uh(),[a,u]=V.useState(!1),[d,f]=V.useState({fullName:(n==null?void 0:n.displayName)??"",email:(n==null?void 0:n.email)??"",phone:"",coachCode:""});if(!n)return T.jsx(Sr,{to:"/auth",replace:!0});if(e==="admin"||e==="trainer")return T.jsx(Sr,{to:"/app/coach",replace:!0});function m(_,R){f(O=>({...O,[_]:R}))}function y(){return d.fullName.trim()?d.email.trim()?d.phone.trim()?d.coachCode.trim()?null:"Inserisci il codice coach.":"Inserisci numero di telefono.":"Inserisci e-mail.":"Inserisci nome e cognome."}async function E(){const _=y();if(_){r(_);return}u(!0);try{await WD({fullName:d.fullName.trim(),email:d.email.trim(),phone:d.phone.trim(),coachCode:d.coachCode.trim()}),s("Profilo salvato. Ora puoi entrare nella tua area."),t("/app/client",{replace:!0})}catch(R){r(Kt(R))}finally{u(!1)}}return T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Onboarding Cliente"}),T.jsx("h1",{children:"Completa il tuo profilo"}),T.jsx("p",{className:"hero-sub",children:"Inserisci solo i dati base. Il coach completer l'anagrafica avanzata."}),T.jsx("div",{className:"onboarding-progress","aria-hidden":"true",children:T.jsx("div",{className:"onboarding-progress-bar",style:{width:"100%"}})}),T.jsxs("label",{children:["Nome e cognome *",T.jsx("input",{value:d.fullName,onChange:_=>m("fullName",_.target.value),placeholder:"Nome e cognome"})]}),T.jsxs("label",{children:["E-mail *",T.jsx("input",{value:d.email,onChange:_=>m("email",_.target.value),type:"email",placeholder:"nome@esempio.com"})]}),T.jsxs("label",{children:["Numero di telefono *",T.jsx("input",{value:d.phone,onChange:_=>m("phone",_.target.value),type:"tel",inputMode:"numeric",placeholder:"Es. 3405882404"})]}),T.jsxs("label",{children:["Codice coach *",T.jsx("input",{value:d.coachCode,onChange:_=>m("coachCode",_.target.value),placeholder:"Es. lorenzobeastly"})]}),T.jsx("button",{className:"btn",disabled:a,type:"button",onClick:()=>void E(),children:a?"Salvataggio...":"Continua"}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void Si(),children:"Esci e cambia account"})]})})}function UI(){return T.jsx("main",{className:"page page-center",children:T.jsxs("div",{className:"card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Caricamento in corso"})]})})}class f4 extends V.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("App render error:",e)}render(){return this.state.hasError?T.jsx("main",{className:"page page-center",children:T.jsxs("section",{className:"card auth-card",children:[T.jsx("p",{className:"eyebrow",children:"Beastly Workout"}),T.jsx("h1",{children:"Qualcosa non ha funzionato"}),T.jsx("p",{className:"hero-sub",children:"Ricarica la pagina o esci e rientra nel tuo profilo."}),T.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>window.location.assign("/auth"),children:"Torna all'accesso"})]})}):this.props.children}}function x0({allow:n,children:e}){const{user:t,role:r,initializing:s}=Ua();return s?T.jsx(UI,{}):t?r?n.includes(r)?e:T.jsx(Sr,{to:r==="client"?"/app/client":"/app/coach",replace:!0}):n.includes("client")?e:T.jsx(Sr,{to:"/onboarding",replace:!0}):T.jsx(Sr,{to:"/auth",replace:!0})}function p4(){const{user:n,role:e,initializing:t}=Ua();return t?T.jsx(UI,{}):n?e?T.jsx(Sr,{to:e==="client"?"/app/client":"/app/coach",replace:!0}):T.jsx(Sr,{to:"/app/client",replace:!0}):T.jsx(Sr,{to:"/auth",replace:!0})}function m4(){return T.jsx(f4,{children:T.jsxs(WC,{children:[T.jsx(lo,{path:"/",element:T.jsx(p4,{})}),T.jsx(lo,{path:"/auth",element:T.jsx(f2,{})}),T.jsx(lo,{path:"/onboarding",element:T.jsx(d4,{})}),T.jsx(lo,{path:"/app/coach",element:T.jsx(x0,{allow:["admin","trainer"],children:T.jsx(h4,{})})}),T.jsx(lo,{path:"/app/client",element:T.jsx(x0,{allow:["client"],children:T.jsx(m2,{})})}),T.jsx(lo,{path:"*",element:T.jsx(Sr,{to:"/",replace:!0})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});Z1.createRoot(document.getElementById("root")).render(T.jsx(O0.StrictMode,{children:T.jsx(YC,{children:T.jsx(KC,{children:T.jsx(m4,{})})})}));
